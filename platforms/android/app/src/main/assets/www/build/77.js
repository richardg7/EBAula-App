webpackJsonp([77],{1892:function(t,e,r){"use strict";function i(t){return c._42(0,[(t()(),c._16(0,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,r){var i=!0;if("click"===e){i=!1!==t.component.openToc(r)&&i}return i},L.b,L.a)),c._15(1,1097728,[[1,4]],0,G.a,[[8,""],$.a,c.p,c.K],null,null),(t()(),c._40(-1,0,["\n                "])),(t()(),c._16(3,0,null,0,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._15(4,147456,null,0,H.a,[$.a,c.p,c.K],{name:[0,"name"]},null),(t()(),c._40(-1,0,["\n            "]))],function(t,e){t(e,4,0,"bookmark")},function(t,e){t(e,3,0,c._29(e,4)._hidden)})}function o(t){return c._42(0,[(t()(),c._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,X.b,X.a)),c._15(1,114688,null,0,F.a,[$.a,c.p,c.K],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,c._29(e,1)._paused)})}function s(t){return c._42(0,[(t()(),c._16(0,0,null,null,1,"core-iframe",[],null,null,null,j.b,j.a)),c._15(1,638976,null,0,k.a,[V.a,z.a,_.a,K.c],{src:[0,"src"],iframeWidth:[1,"iframeWidth"],iframeHeight:[2,"iframeHeight"]},null)],function(t,e){var r=e.component;t(e,1,0,r.src,r.scorm.popup?r.scorm.width:void 0,r.scorm.popup?r.scorm.height:void 0)},null)}function n(t){return c._42(0,[(t()(),c._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),c._40(1,null,["",""])),c._32(131072,W.a,[B.a,c.i])],null,function(t,e){var r=e.component;t(e,1,0,c._41(e,1,0,c._29(e,2).transform(r.errorMessage)))})}function a(t){return c._42(0,[(t()(),c._16(0,0,null,null,23,"ion-header",[],null,null,null,null,null)),c._15(1,16384,null,0,J.a,[$.a,c.p,c.K,[2,Y.a]],null,null),(t()(),c._40(-1,null,["\n    "])),(t()(),c._16(3,0,null,null,19,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,q.b,q.a)),c._15(4,49152,null,0,Q.a,[Z.a,[2,Y.a],[2,tt.a],$.a,c.p,c.K],null,null),c._15(5,212992,null,0,et.a,[Q.a,rt.a,B.a,u.a],null,null),(t()(),c._40(-1,3,["\n        "])),(t()(),c._16(7,0,null,3,3,"ion-title",[],null,null,null,it.b,it.a)),c._15(8,49152,null,0,ot.a,[$.a,c.p,c.K,[2,st.a],[2,Q.a]],null,null),(t()(),c._16(9,0,null,0,1,"core-format-text",[],null,null,null,null,null)),c._15(10,540672,null,0,nt.a,[c.p,m.a,_.a,at.a,B.a,rt.a,ct.a,lt.a,V.a,dt.a,ht.a,ut.a,[2,tt.a],[2,mt.a],[2,ft.a],z.a,u.a],{text:[0,"text"]},null),(t()(),c._40(-1,3,["\n\n        "])),(t()(),c._16(12,0,null,2,9,"ion-buttons",[["end",""]],null,null,null,null,null)),c._15(13,16384,null,1,_t.a,[$.a,c.p,c.K,[2,st.a],[2,Q.a]],null,null),c._37(603979776,1,{_buttons:1}),(t()(),c._40(-1,null,["\n            "])),(t()(),c._11(16777216,null,null,1,null,i)),c._15(17,16384,null,0,pt.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(t()(),c._40(-1,null,["\n            "])),(t()(),c._11(16777216,null,null,1,null,o)),c._15(20,16384,null,0,pt.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(t()(),c._40(-1,null,["\n        "])),(t()(),c._40(-1,3,["\n    "])),(t()(),c._40(-1,null,["\n"])),(t()(),c._40(-1,null,["\n"])),(t()(),c._16(25,0,null,null,15,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,vt.b,vt.a)),c._15(26,4374528,null,0,mt.a,[$.a,rt.a,It.a,c.p,c.K,Z.a,Et.a,c.D,[2,Y.a],[2,tt.a]],null,null),(t()(),c._40(-1,1,["\n    "])),(t()(),c._16(28,0,null,1,11,"core-loading",[],null,null,null,Ct.b,Ct.a)),c._15(29,638976,null,0,Mt.a,[B.a,c.p,u.a,ct.a],{hideUntil:[0,"hideUntil"]},null),(t()(),c._40(-1,0,["\n        "])),(t()(),c._16(31,0,null,0,1,"core-navigation-bar",[],null,[[null,"action"]],function(t,e,r){var i=!0;if("action"===e){i=!1!==t.component.loadSco(r)&&i}return i},gt.b,gt.a)),c._15(32,49152,null,0,wt.a,[at.a],{previous:[0,"previous"],next:[1,"next"]},{action:"action"}),(t()(),c._40(-1,0,["\n        "])),(t()(),c._11(16777216,null,0,1,null,s)),c._15(35,16384,null,0,pt.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(t()(),c._40(-1,0,["\n        "])),(t()(),c._11(16777216,null,0,1,null,n)),c._15(38,16384,null,0,pt.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(t()(),c._40(-1,0,["\n    "])),(t()(),c._40(-1,1,["\n"])),(t()(),c._40(-1,null,["\n"]))],function(t,e){var r=e.component;t(e,5,0);t(e,10,0,r.title);t(e,17,0,r.showToc&&!r.loadingToc&&r.toc&&r.toc.length);t(e,20,0,r.showToc&&r.loadingToc);t(e,29,0,r.loaded);t(e,32,0,r.previousSco,r.nextSco);t(e,35,0,r.loaded&&r.src);t(e,38,0,!r.src&&r.errorMessage)},function(t,e){t(e,3,0,c._29(e,4)._hidden,c._29(e,4)._sbPadding);t(e,25,0,c._29(e,26).statusbarPadding,c._29(e,26)._hasRefresher)})}Object.defineProperty(e,"__esModule",{value:!0});var c=r(1),l=(r(0),r(9),r(4)),d=r(29),h=r(30),u=r(13),m=r(2),f=r(86),_=r(5),p=r(25),v=r(193),I=r(351),E=r(288),C=function(){function t(t,e,r,i,o,s,n,a,c){this.eventsProvider=t,this.scormProvider=e,this.siteId=r,this.scorm=i,this.scoId=o,this.attempt=s,this.mode=a,this.offline=c,this.CMI_STRING_256="^[\\u0000-\\uFFFF]{0,255}$",this.CMI_STRING_4096="^[\\u0000-\\uFFFF]{0,4096}$",this.CMI_TIME="^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(.[0-9]{1,2})?$",this.CMI_TIMESPAN="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",this.CMI_INTEGER="^\\d+$",this.CMI_SINTEGER="^-?([0-9]+)$",this.CMI_DECIMAL="^-?([0-9]{0,3})(.[0-9]*)?$",this.CMI_IDENTIFIER="^[\\u0021-\\u007E]{0,255}$",this.CMI_FEEDBACK=this.CMI_STRING_256,this.CMI_INDEX="[._](\\d+).",this.CMI_STATUS="^passed$|^completed$|^failed$|^incomplete$|^browsed$",this.CMI_STATUS_2="^passed$|^completed$|^failed$|^incomplete$|^browsed$|^not attempted$",this.CMI_EXIT="^time-out$|^suspend$|^logout$|^$",this.CMI_TYPE="^true-false$|^choice$|^fill-in$|^matching$|^performance$|^sequencing$|^likert$|^numeric$",this.CMI_RESULT="^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(.[0-9]*)?$",this.NAV_EVENT="^previous$|^continue$",this.CMI_CHILDREN="core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions",this.CORE_CHILDREN="student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",this.SCORE_CHILDREN="raw,min,max",this.COMMENTS_CHILDREN="content,location,time",this.OBJECTIVES_CHILDREN="id,score,status",this.CORRECT_RESPONSES_CHILDREN="pattern",this.STUDENT_DATA_CHILDREN="mastery_score,max_time_allowed,time_limit_action",this.STUDENT_PREFERENCE_CHILDREN="audio,language,speed,text",this.INTERACTIONS_CHILDREN="id,objectives,time,type,correct_responses,weighting,student_response,result,latency",this.SCORE_RANGE="0#100",this.AUDIO_RANGE="-1#100",this.SPEED_RANGE="-100#100",this.WEIGHTING_RANGE="-100#100",this.TEXT_RANGE="-1#1",this.ERROR_STRINGS={0:"No error",101:"General exception",201:"Invalid argument error",202:"Element cannot have children",203:"Element not an array - cannot have count",301:"Not initialized",401:"Not implemented error",402:"Invalid set value, element is a keyword",403:"Element is read only",404:"Element is write only",405:"Incorrect data type"},this.currentUserData={},this.def={},this.defExtra={},this.dataModel={},this.initialized=!1,this.mode=a||v.a.MODENORMAL,this.offline=!!c,this.init(n)}return t.prototype.addTime=function(t,e){var r=t.split(":"),i=e.split(":"),o=r[2].split("."),s=i[2].split("."),n=0,a=0;o.length>1&&(a=parseInt(o[1],10));var c=0;s.length>1&&(c=parseInt(s[1],10));var l=a+c;l-=100*(n=Math.floor(l/100)),Math.floor(l)<10&&(l="0"+l.toString());var d=parseInt(o[0],10)+parseInt(s[0],10)+n;d-=60*(n=Math.floor(d/60)),Math.floor(d)<10&&(d="0"+d.toString());var h=parseInt(r[1],10)+parseInt(i[1],10)+n;(h-=60*(n=Math.floor(h/60)))<10&&(h="0"+h.toString());var u=parseInt(r[0],10)+parseInt(i[0],10)+n;return u<10&&(u="0"+u.toString()),"0"!=l?u+":"+h+":"+d+"."+l:u+":"+h+":"+d},t.prototype.cloneObj=function(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var r in t)e[r]=this.cloneObj(t[r]);return e},t.prototype.collectData=function(){var t=[];for(var e in this.currentUserData[this.scoId])if("cmi"==e.substr(0,3)){var r=new RegExp(this.CMI_INDEX,"g"),i=String(e).replace(r,".n.");if("cmi.core.session_time"!=e&&(void 0===this.dataModel[this.scoId][e]&&void 0!==this.dataModel[this.scoId][i]&&(this.dataModel[this.scoId][e]=this.cloneObj(this.dataModel[this.scoId][i])),void 0!==this.dataModel[this.scoId][e]&&"r"!=this.dataModel[this.scoId][e].mod)){var o={element:e.replace(r,"_$1."),value:this.getEl(e)};void 0!==this.dataModel[this.scoId][e].defaultvalue?this.dataModel[this.scoId][e].defaultvalue==o.value&&typeof this.dataModel[this.scoId][e].defaultvalue==typeof o.value||(t.push(o),this.dataModel[this.scoId][e].defaultvalue=o.value):(t.push(o),this.dataModel[this.scoId][e].defaultvalue=o.value)}}return t},t.prototype.getEl=function(t){return void 0!==this.currentUserData[this.scoId]&&void 0!==this.currentUserData[this.scoId][t]?this.currentUserData[this.scoId][t]:""},t.prototype.init=function(t){for(var e in t){var r=t[e];this.def[e]=r.defaultdata,this.defExtra[e]=r.userdata}for(var e in this.def){this.dataModel[e]={"cmi._children":{defaultvalue:this.CMI_CHILDREN,mod:"r",writeerror:"402"},"cmi._version":{defaultvalue:"3.4",mod:"r",writeerror:"402"},"cmi.core._children":{defaultvalue:this.CORE_CHILDREN,mod:"r",writeerror:"402"},"cmi.core.student_id":{defaultvalue:this.def[e]["cmi.core.student_id"],mod:"r",writeerror:"403"},"cmi.core.student_name":{defaultvalue:this.def[e]["cmi.core.student_name"],mod:"r",writeerror:"403"},"cmi.core.lesson_location":{defaultvalue:this.def[e]["cmi.core.lesson_location"],format:this.CMI_STRING_256,mod:"rw",writeerror:"405"},"cmi.core.credit":{defaultvalue:this.def[e]["cmi.core.credit"],mod:"r",writeerror:"403"},"cmi.core.lesson_status":{defaultvalue:this.def[e]["cmi.core.lesson_status"],format:this.CMI_STATUS,mod:"rw",writeerror:"405"},"cmi.core.entry":{defaultvalue:this.def[e]["cmi.core.entry"],mod:"r",writeerror:"403"},"cmi.core.score._children":{defaultvalue:this.SCORE_CHILDREN,mod:"r",writeerror:"402"},"cmi.core.score.raw":{defaultvalue:this.def[e]["cmi.core.score.raw"],format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.core.score.max":{defaultvalue:this.def[e]["cmi.core.score.max"],format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.core.score.min":{defaultvalue:this.def[e]["cmi.core.score.min"],format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.core.total_time":{defaultvalue:this.def[e]["cmi.core.total_time"],mod:"r",writeerror:"403"},"cmi.core.lesson_mode":{defaultvalue:this.def[e]["cmi.core.lesson_mode"],mod:"r",writeerror:"403"},"cmi.core.exit":{defaultvalue:this.def[e]["cmi.core.exit"],format:this.CMI_EXIT,mod:"w",readerror:"404",writeerror:"405"},"cmi.core.session_time":{format:this.CMI_TIMESPAN,mod:"w",defaultvalue:"00:00:00",readerror:"404",writeerror:"405"},"cmi.suspend_data":{defaultvalue:this.def[e]["cmi.suspend_data"],format:this.CMI_STRING_4096,mod:"rw",writeerror:"405"},"cmi.launch_data":{defaultvalue:this.def[e]["cmi.launch_data"],mod:"r",writeerror:"403"},"cmi.comments":{defaultvalue:this.def[e]["cmi.comments"],format:this.CMI_STRING_4096,mod:"rw",writeerror:"405"},"cmi.evaluation.comments._count":{defaultvalue:"0",mod:"r",writeerror:"402"},"cmi.evaluation.comments._children":{defaultvalue:this.COMMENTS_CHILDREN,mod:"r",writeerror:"402"},"cmi.evaluation.comments.n.content":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_STRING_256,mod:"rw",writeerror:"405"},"cmi.evaluation.comments.n.location":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_STRING_256,mod:"rw",writeerror:"405"},"cmi.evaluation.comments.n.time":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_TIME,mod:"rw",writeerror:"405"},"cmi.comments_from_lms":{mod:"r",writeerror:"403"},"cmi.objectives._children":{defaultvalue:this.OBJECTIVES_CHILDREN,mod:"r",writeerror:"402"},"cmi.objectives._count":{mod:"r",defaultvalue:"0",writeerror:"402"},"cmi.objectives.n.id":{pattern:this.CMI_INDEX,format:this.CMI_IDENTIFIER,mod:"rw",writeerror:"405"},"cmi.objectives.n.score._children":{pattern:this.CMI_INDEX,mod:"r",writeerror:"402"},"cmi.objectives.n.score.raw":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.objectives.n.score.min":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.objectives.n.score.max":{defaultvalue:"",pattern:this.CMI_INDEX,format:this.CMI_DECIMAL,range:this.SCORE_RANGE,mod:"rw",writeerror:"405"},"cmi.objectives.n.status":{pattern:this.CMI_INDEX,format:this.CMI_STATUS_2,mod:"rw",writeerror:"405"},"cmi.student_data._children":{defaultvalue:this.STUDENT_DATA_CHILDREN,mod:"r",writeerror:"402"},"cmi.student_data.mastery_score":{defaultvalue:this.def[e]["cmi.student_data.mastery_score"],mod:"r",writeerror:"403"},"cmi.student_data.max_time_allowed":{defaultvalue:this.def[e]["cmi.student_data.max_time_allowed"],mod:"r",writeerror:"403"},"cmi.student_data.time_limit_action":{defaultvalue:this.def[e]["cmi.student_data.time_limit_action"],mod:"r",writeerror:"403"},"cmi.student_preference._children":{defaultvalue:this.STUDENT_PREFERENCE_CHILDREN,mod:"r",writeerror:"402"},"cmi.student_preference.audio":{defaultvalue:this.def[e]["cmi.student_preference.audio"],format:this.CMI_SINTEGER,range:this.AUDIO_RANGE,mod:"rw",writeerror:"405"},"cmi.student_preference.language":{defaultvalue:this.def[e]["cmi.student_preference.language"],format:this.CMI_STRING_256,mod:"rw",writeerror:"405"},"cmi.student_preference.speed":{defaultvalue:this.def[e]["cmi.student_preference.speed"],format:this.CMI_SINTEGER,range:this.SPEED_RANGE,mod:"rw",writeerror:"405"},"cmi.student_preference.text":{defaultvalue:this.def[e]["cmi.student_preference.text"],format:this.CMI_SINTEGER,range:this.TEXT_RANGE,mod:"rw",writeerror:"405"},"cmi.interactions._children":{defaultvalue:this.INTERACTIONS_CHILDREN,mod:"r",writeerror:"402"},"cmi.interactions._count":{mod:"r",defaultvalue:"0",writeerror:"402"},"cmi.interactions.n.id":{pattern:this.CMI_INDEX,format:this.CMI_IDENTIFIER,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.objectives._count":{pattern:this.CMI_INDEX,mod:"r",defaultvalue:"0",writeerror:"402"},"cmi.interactions.n.objectives.n.id":{pattern:this.CMI_INDEX,format:this.CMI_IDENTIFIER,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.time":{pattern:this.CMI_INDEX,format:this.CMI_TIME,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.type":{pattern:this.CMI_INDEX,format:this.CMI_TYPE,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.correct_responses._count":{pattern:this.CMI_INDEX,mod:"r",defaultvalue:"0",writeerror:"402"},"cmi.interactions.n.correct_responses.n.pattern":{pattern:this.CMI_INDEX,format:this.CMI_FEEDBACK,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.weighting":{pattern:this.CMI_INDEX,format:this.CMI_DECIMAL,range:this.WEIGHTING_RANGE,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.student_response":{pattern:this.CMI_INDEX,format:this.CMI_FEEDBACK,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.result":{pattern:this.CMI_INDEX,format:this.CMI_RESULT,mod:"w",readerror:"404",writeerror:"405"},"cmi.interactions.n.latency":{pattern:this.CMI_INDEX,format:this.CMI_TIMESPAN,mod:"w",readerror:"404",writeerror:"405"},"nav.event":{defaultvalue:"",format:this.NAV_EVENT,mod:"w",readerror:"404",writeerror:"405"}},this.currentUserData[e]={};for(var i in this.dataModel[e])null===i.match(/\.n\./)&&void 0!==this.dataModel[e][i].defaultvalue&&(this.currentUserData[e][i]=this.dataModel[e][i].defaultvalue);for(var i in this.def[e])null===i.match(/\.n\./)&&(this.currentUserData[e][i]=void 0!==this.dataModel[e][i].defaultvalue?this.dataModel[e][i].defaultvalue:void 0!==this.defExtra[e][i]?this.defExtra[e][i]:"");var o=new RegExp(this.CMI_INDEX,"g");for(var i in this.defExtra[e]){var s="",n=0,a=void 0,c=void 0;i.match(o)&&(a=i.replace(o,".$1."),this.currentUserData[e][a]=this.defExtra[e][i],0===a.indexOf("cmi.evaluation.comments")?(s="cmi.evaluation.comments._count",n=a.match(/.(\d+)./)[1]):0===a.indexOf("cmi.objectives")?(s="cmi.objectives._count",n=a.match(/.(\d+)./)[1]):0===a.indexOf("cmi.interactions")&&(a.indexOf(".objectives.")>0?(c=a.match(/cmi.interactions.(\d+)./)[1],n=a.match(/objectives.(\d+)./)[1],s="cmi.interactions."+c+".objectives._count"):a.indexOf(".correct_responses.")>0?(c=a.match(/cmi.interactions.(\d+)./)[1],n=a.match(/correct_responses.(\d+)./)[1],s="cmi.interactions."+c+".correct_responses._count"):(s="cmi.interactions._count",n=a.match(/.(\d+)./)[1])),s&&(void 0===this.currentUserData[e][s]&&(this.currentUserData[e][s]=0),parseInt(n)==parseInt(this.currentUserData[e][s])&&(this.currentUserData[e][s]=parseInt(this.currentUserData[e][s])+1),parseInt(n)>parseInt(this.currentUserData[e][s])&&(this.currentUserData[e][s]=parseInt(n)-1)))}""===this.currentUserData[e]["cmi.core.lesson_status"]&&(this.currentUserData[e]["cmi.core.lesson_status"]="not attempted"),this.currentUserData[e]["cmi.core.credit"]=this.mode==v.a.MODENORMAL?"credit":"no-credit",this.currentUserData[e]["cmi.core.lesson_mode"]=this.mode}},t.prototype.LMSCommit=function(t){if(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.errorCode="0",""==t){if(this.initialized){var e=this.storeData(!1);return this.triggerEvent(v.a.UPDATE_TOC_EVENT),this.errorCode=e?"0":"101",e?"true":"false"}this.errorCode="301"}else this.errorCode="201";return"false"},t.prototype.LMSFinish=function(t){if(this.errorCode="0",""==t){if(this.initialized){this.initialized=!1;var e=this.storeData(!0);return""!=this.getEl("nav.event")?"continue"==this.getEl("nav.event")?this.triggerEvent(v.a.LAUNCH_NEXT_SCO_EVENT):this.triggerEvent(v.a.LAUNCH_PREV_SCO_EVENT):"1"==this.scorm.auto&&this.triggerEvent(v.a.LAUNCH_NEXT_SCO_EVENT),this.errorCode=e?"0":"101",this.triggerEvent(v.a.UPDATE_TOC_EVENT),e?"true":"false"}this.errorCode="301"}else this.errorCode="201";return"false"},t.prototype.LMSGetDiagnostic=function(t){return""==t&&(t=this.errorCode),t},t.prototype.LMSGetErrorString=function(t){return""!=t?this.ERROR_STRINGS[t]:""},t.prototype.LMSGetLastError=function(){return this.errorCode},t.prototype.LMSGetValue=function(t){if(this.errorCode="0",this.initialized)if(""!=t){var e=new RegExp(this.CMI_INDEX,"g"),r=String(t).replace(e,".n.");if(void 0!==this.dataModel[this.scoId][r]){if("w"!=this.dataModel[this.scoId][r].mod)return this.errorCode="0",this.getEl(t);this.errorCode=this.dataModel[this.scoId][r].readerror}else{if("._children"==r.substr(r.length-"._children".length,r.length)){var i=r.substr(0,r.length-"._children".length);this.errorCode=void 0!==this.dataModel[this.scoId][i]?"202":"201"}else if("._count"==r.substr(r.length-"._count".length,r.length)){i=r.substr(0,r.length-"._count".length);this.errorCode=void 0!==this.dataModel[this.scoId][i]?"203":"201"}else this.errorCode="201"}}else this.errorCode="201";else this.errorCode="301";return""},t.prototype.LMSInitialize=function(t){if(this.errorCode="0",""==t){if(!this.initialized)return this.initialized=!0,this.errorCode="0","true";this.errorCode="101"}else this.errorCode="201";return"false"},t.prototype.LMSSetValue=function(t,e){if(this.errorCode="0",this.initialized)if(""!=t){var r=new RegExp(this.CMI_INDEX,"g"),i=String(t).replace(r,".n.");if(void 0!==this.dataModel[this.scoId][i])if("r"!=this.dataModel[this.scoId][i].mod){r=new RegExp(this.dataModel[this.scoId][i].format);if(null!=(e+="").match(r)){if(t!=i){if(0===t.indexOf("cmi.objectives")){var o=t.match(/cmi.objectives.(\d+)./)[1];void 0===this.currentUserData[this.scoId][(l="cmi.objectives."+o+".score")+"._children"]&&(this.setEl(this.currentUserData[this.scoId][l+"._children"],this.SCORE_CHILDREN),this.setEl(this.currentUserData[this.scoId][l+".raw"],""),this.setEl(this.currentUserData[this.scoId][l+".min"],""),this.setEl(this.currentUserData[this.scoId][l+".max"],""))}else if(0===t.indexOf("cmi.interactions")){o=t.match(/cmi.interactions.(\d+)./)[1];void 0===this.currentUserData[this.scoId][l="cmi.interactions."+o+".objectives._count"]&&this.setEl(l,0),void 0===this.currentUserData[this.scoId][l="cmi.interactions."+o+".correct_responses._count"]&&this.setEl(l,0)}for(var s=t.split("."),n="cmi",a=1;a<s.length-1;a++){var c=s[a];if(s[a+1].match(/^\d+$/)){var l;if(void 0===this.currentUserData[this.scoId][l=n+"."+c+"._count"]&&this.setEl(l,0),s[a+1]==this.getEl(l)){var d=this.getEl(l);this.setEl(l,parseInt(d,10)+1)}s[a+1]>this.getEl(l)&&(this.errorCode="201"),n=n.concat("."+c+"."+s[a+1]),a++}else n=n.concat("."+c)}t=n.concat("."+s[s.length-1])}if("0"==this.errorCode){if(this.scorm.autocommit&&!this.timeout&&(this.timeout=setTimeout(this.LMSCommit.bind(this),6e4,[""])),void 0===this.dataModel[this.scoId][i].range)return"cmi.comments"==t?this.setEl("cmi.comments",this.getEl("cmi.comments")+e):this.setEl(t,e),this.errorCode="0","true";var h=this.dataModel[this.scoId][i].range.split("#");if((e*=1)>=h[0]&&e<=h[1])return this.setEl(t,e),this.errorCode="0","true";this.errorCode=this.dataModel[this.scoId][i].writeerror}}else this.errorCode=this.dataModel[this.scoId][i].writeerror}else this.errorCode=this.dataModel[this.scoId][i].writeerror;else this.errorCode="201"}else this.errorCode="201";else this.errorCode="301";return"false"},t.prototype.loadSco=function(t){this.scoId=t},t.prototype.setEl=function(t,e){void 0===this.currentUserData[this.scoId]&&(this.currentUserData[this.scoId]={}),this.currentUserData[this.scoId][t]=e},t.prototype.setOffline=function(t){this.offline=t},t.prototype.storeData=function(t){var e;t?("not attempted"==this.getEl("cmi.core.lesson_status")&&this.setEl("cmi.core.lesson_status","completed"),this.getEl("cmi.core.lesson_mode")==v.a.MODENORMAL&&"credit"==this.getEl("cmi.core.credit")&&""!==this.getEl("cmi.student_data.mastery_score")&&""!==this.getEl("cmi.core.score.raw")&&(parseFloat(this.getEl("cmi.core.score.raw"))>=parseFloat(this.getEl("cmi.student_data.mastery_score"))?this.setEl("cmi.core.lesson_status","passed"):this.setEl("cmi.core.lesson_status","failed")),this.getEl("cmi.core.lesson_mode")==v.a.MODEBROWSE&&""==this.dataModel[this.scoId]["cmi.core.lesson_status"].defaultvalue&&"not attempted"==this.getEl("cmi.core.lesson_status")&&this.setEl("cmi.core.lesson_status","browsed"),(e=this.collectData()).push(this.totalTime())):e=this.collectData();var r=this.scormProvider.saveTracksSync(this.scoId,this.attempt,e,this.scorm,this.offline,this.currentUserData);return this.offline||r?r:(this.offline=!0,this.triggerEvent(v.a.GO_OFFLINE_EVENT),this.scormProvider.saveTracksSync(this.scoId,this.attempt,e,this.scorm,this.offline,this.currentUserData))},t.prototype.totalTime=function(){return{element:"cmi.core.total_time",value:this.addTime(this.getEl("cmi.core.total_time"),this.getEl("cmi.core.session_time"))}},t.prototype.triggerEvent=function(t){this.eventsProvider.trigger(t,{scormId:this.scorm.id,scoId:this.scoId,attempt:this.attempt},this.siteId)},t}(),M=r(710),g=function(){function t(t,e,r,i,o,s,n,a,c,l){this.popoverCtrl=e,this.eventsProvider=r,this.sitesProvider=i,this.syncProvider=o,this.domUtils=s,this.timeUtils=n,this.scormProvider=a,this.scormHelper=c,this.scormSyncProvider=l,this.loadingToc=!0,this.offline=!1,this.scorm=t.get("scorm")||{},this.mode=t.get("mode")||v.a.MODENORMAL,this.newAttempt=!!t.get("newAttempt"),this.organizationId=t.get("organizationId"),this.initialScoId=t.get("scoId"),this.siteId=this.sitesProvider.getCurrentSiteId(),this.title=this.scorm.name,this.syncProvider.blockOperation(v.a.COMPONENT,this.scorm.id,"player")}return t.prototype.ngOnInit=function(){var t=this;this.showToc=this.scormProvider.displayTocInPlayer(this.scorm),this.scorm.popup&&(this.scorm.width<=100&&(this.scorm.width=this.scorm.width+"%"),this.scorm.height<=100&&(this.scorm.height=this.scorm.height+"%")),this.fetchData().then(function(){if(t.currentSco){return(t.newAttempt?t.setStartTime(t.currentSco.id):Promise.resolve()).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_scorm.errorgetscorm",!0)}).finally(function(){t.loadSco(t.currentSco)})}}).finally(function(){t.loaded=!0}),this.tocObserver=this.eventsProvider.on(v.a.UPDATE_TOC_EVENT,function(e){e.scormId===t.scorm.id&&(t.offline?setTimeout(t.refreshToc.bind(t),100):t.refreshToc())},this.siteId),this.launchNextObserver=this.eventsProvider.on(v.a.LAUNCH_NEXT_SCO_EVENT,function(e){e.scormId===t.scorm.id&&t.nextSco&&t.loadSco(t.nextSco)},this.siteId),this.launchPrevObserver=this.eventsProvider.on(v.a.LAUNCH_PREV_SCO_EVENT,function(e){e.scormId===t.scorm.id&&t.previousSco&&t.loadSco(t.previousSco)},this.siteId),this.goOfflineObserver=this.eventsProvider.on(v.a.GO_OFFLINE_EVENT,function(e){e.scormId!==t.scorm.id||t.offline||(t.offline=!0,setTimeout(function(){t.scormHelper.convertAttemptToOffline(t.scorm,t.attempt).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.error",!0)}).then(function(){t.refreshToc()})},200))},this.siteId)},t.prototype.calculateNextAndPreviousSco=function(t){this.previousSco=this.scormHelper.getPreviousScoFromToc(this.toc,t),this.nextSco=this.scormHelper.getNextScoFromToc(this.toc,t)},t.prototype.determineAttemptAndMode=function(t){var e,r=this;return this.scormHelper.determineAttemptToContinue(this.scorm,t).then(function(e){return r.attempt=e.number,r.offline=e.offline,r.attempt!=t.lastAttempt.number&&(r.attemptToContinue=r.attempt),r.attempt>0&&r.scormProvider.isAttemptIncomplete(r.scorm.id,r.attempt,r.offline)}).then(function(i){if((e=r.scormProvider.determineAttemptAndMode(r.scorm,r.mode,r.attempt,r.newAttempt,i)).attempt>r.attempt)return r.offline?r.scormHelper.createOfflineAttempt(r.scorm,e.attempt,t.online.length):r.scormProvider.getScormUserData(r.scorm.id,e.attempt,void 0,!1,!0).catch(function(){return r.offline=!0,r.scormHelper.createOfflineAttempt(r.scorm,e.attempt,t.online.length)})}).then(function(){r.mode=e.mode,r.newAttempt=e.newAttempt,r.attempt=e.attempt})},t.prototype.fetchData=function(){var t=this;return this.scormSyncProvider.waitForSync(this.scorm.id).then(function(){return t.scormProvider.getAttemptCount(t.scorm.id).then(function(e){return t.determineAttemptAndMode(e).then(function(){var e=[];return e.push(t.fetchToc()),e.push(t.scormProvider.getScormUserData(t.scorm.id,t.attempt,void 0,t.offline).then(function(e){t.userData=e})),Promise.all(e)})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_scorm.errorgetscorm",!0)})})},t.prototype.fetchToc=function(){var t=this;return this.loadingToc=!0,this.scormProvider.isAttemptIncomplete(this.scorm.id,this.attempt,this.offline).then(function(e){return t.scorm.incomplete=e,t.scormProvider.getOrganizationToc(t.scorm.id,t.attempt,t.organizationId,t.offline)}).then(function(e){if(t.toc=t.scormProvider.formatTocToArray(e),t.toc.forEach(function(e){e.image=t.scormProvider.getScoStatusIcon(e,t.scorm.incomplete)}),t.initialScoId>0&&(t.currentSco=t.scormHelper.getScoFromToc(t.toc,t.initialScoId)),!t.currentSco)return t.scormHelper.getFirstSco(t.scorm.id,t.attempt,t.toc,t.organizationId,t.offline).then(function(e){e?t.currentSco=e:t.errorMessage="addon.mod_scorm.errornovalidsco"})}).finally(function(){t.loadingToc=!1})},t.prototype.ionViewWillUnload=function(){this.src=""},t.prototype.loadSco=function(t){var e=this;if(this.dataModel?this.dataModel.loadSco(t.id):(this.dataModel=new C(this.eventsProvider,this.scormProvider,this.siteId,this.scorm,t.id,this.attempt,this.userData,this.mode,this.offline),window.API=this.dataModel),this.currentSco=t,this.title=t.title||this.scorm.name,this.calculateNextAndPreviousSco(t.id),this.scormProvider.getScoSrc(this.scorm,t).then(function(t){t==e.src?(e.src="",setTimeout(function(){e.src=t})):e.src=t}),"asset"==t.scormtype){var r=[{element:"cmi.core.lesson_status",value:"completed"}];this.scormProvider.saveTracks(t.id,this.attempt,r,this.scorm,this.offline).catch(function(){if(!e.offline)return e.scormProvider.getScormUserData(e.scorm.id,e.attempt,void 0,!1).then(function(i){if(!i[t.id]||"completed"!=i[t.id].userdata["cmi.core.lesson_status"])return e.scormHelper.convertAttemptToOffline(e.scorm,e.attempt).then(function(){return e.offline=!0,e.dataModel.setOffline(!0),e.scormProvider.saveTracks(t.id,e.attempt,r,e.scorm,!0)}).catch(function(t){e.domUtils.showErrorModalDefault(t,"core.error",!0)})})}).then(function(){e.refreshToc()})}this.scormProvider.logLaunchSco(this.scorm.id,t.id).catch(function(){})},t.prototype.openToc=function(t){var e=this,r=this.popoverCtrl.create(M.a,{toc:this.toc,attemptToContinue:this.attemptToContinue,mode:this.mode});r.onDidDismiss(function(t){t&&e.loadSco(t)}),r.present({ev:t})},t.prototype.refreshToc=function(){var t=this;return this.scormProvider.invalidateAllScormData(this.scorm.id).catch(function(){}).then(function(){return t.fetchToc()}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_scorm.errorgetscorm",!0)})},t.prototype.setStartTime=function(t){var e=this,r=[{element:"x.start.time",value:this.timeUtils.timestamp()}];return this.scormProvider.saveTracks(t,this.attempt,r,this.scorm,this.offline).then(function(){e.offline||e.scormProvider.getAttemptCount(e.scorm.id,!1,!0).catch(function(){})})},t.prototype.ngOnDestroy=function(){this.tocObserver&&this.tocObserver.off(),this.launchNextObserver&&this.launchNextObserver.off(),this.launchPrevObserver&&this.launchPrevObserver.off(),this.goOfflineObserver&&this.goOfflineObserver.off(),this.syncProvider.unblockOperation(v.a.COMPONENT,this.scorm.id,"player")},t}(),w=function(){return function(){}}(),T=r(1345),N=r(1346),D=r(1347),S=r(1348),R=r(1349),b=r(1350),O=r(1351),A=r(1352),y=r(1353),P=r(1356),U=r(1357),x=r(1358),L=r(46),G=r(43),$=r(7),H=r(47),X=r(112),F=r(95),j=r(350),k=r(255),V=r(6),z=r(38),K=r(75),W=r(27),B=r(19),J=r(435),Y=r(37),q=r(1354),Q=r(200),Z=r(34),tt=r(22),et=r(663),rt=r(15),it=r(1355),ot=r(337),st=r(247),nt=r(42),at=r(11),ct=r(3),lt=r(26),dt=r(17),ht=r(10),ut=r(18),mt=r(24),ft=r(35),_t=r(436),pt=r(8),vt=r(185),It=r(32),Et=r(107),Ct=r(49),Mt=r(48),gt=r(708),wt=r(359),Tt=r(61),Nt=r(63),Dt=c._14({encapsulation:2,styles:[],data:{}}),St=c._12("page-addon-mod-scorm-player",g,function(t){return c._42(0,[(t()(),c._16(0,0,null,null,1,"page-addon-mod-scorm-player",[],null,null,null,a,Dt)),c._15(1,245760,null,0,g,[Tt.a,Nt.a,u.a,m.a,f.a,_.a,p.a,v.a,I.a,E.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Rt=r(23),bt=r(333),Ot=r(334),At=r(336),yt=r(335),Pt=r(434),Ut=r(662),xt=r(106),Lt=r(248);r.d(e,"AddonModScormPlayerPageModuleNgFactory",function(){return Gt});var Gt=c._13(w,[],function(t){return c._25([c._26(512,c.n,c._6,[[8,[T.a,N.a,D.a,S.a,R.a,b.a,O.a,A.a,y.a,P.a,U.a,x.a,St]],[3,c.n],c.B]),c._26(4608,pt.m,pt.l,[c.x,[2,pt.v]]),c._26(4608,Rt.x,Rt.x,[]),c._26(4608,Rt.d,Rt.d,[]),c._26(4608,bt.b,bt.a,[]),c._26(4608,Ot.a,Ot.b,[]),c._26(4608,At.b,At.a,[]),c._26(4608,yt.b,yt.a,[]),c._26(4608,B.a,B.a,[Pt.a,bt.b,Ot.a,At.b,yt.b,B.b,B.c]),c._26(512,pt.b,pt.b,[]),c._26(512,Rt.v,Rt.v,[]),c._26(512,Rt.i,Rt.i,[]),c._26(512,Rt.s,Rt.s,[]),c._26(512,Ut.a,Ut.a,[]),c._26(512,l.a,l.a,[]),c._26(512,h.a,h.a,[]),c._26(512,xt.a,xt.a,[]),c._26(512,d.a,d.a,[]),c._26(512,Ut.b,Ut.b,[]),c._26(512,w,w,[]),c._26(256,B.c,void 0,[]),c._26(256,B.b,void 0,[]),c._26(256,Lt.a,g,[])])})}});