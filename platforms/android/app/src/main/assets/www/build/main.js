webpackJsonp([123],[,,function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(4),t(10);var i=t(13),o=(t(6),t(518),t(11),t(26),t(3),t(40)),r=t(137),l=t(180),s=(t.n(l),function(){function e(e,n,t,i,o,r,l,s,a){this.http=n,this.sitesFactory=t,this.appProvider=i,this.translate=o,this.urlUtils=r,this.eventsProvider=l,this.textUtils=s,this.utils=a,this.SITES_TABLE="sites",this.CURRENT_SITE_TABLE="current_site",this.appTablesSchema=[{name:this.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"siteUrl",type:"TEXT",notNull:!0},{name:"token",type:"TEXT"},{name:"info",type:"TEXT"},{name:"privateToken",type:"TEXT"},{name:"config",type:"TEXT"},{name:"loggedOut",type:"INTEGER"}]},{name:this.CURRENT_SITE_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"siteId",type:"TEXT",notNull:!0,unique:!0}]}],this.VALID_VERSION=1,this.LEGACY_APP_VERSION=0,this.INVALID_VERSION=-1,this.services={},this.sessionRestored=!1,this.sites={},this.siteTablesSchemas=[],this.logger=e.getInstance("CoreSitesProvider"),this.appDB=i.getDB(),this.appDB.createTablesFromSchema(this.appTablesSchema)}return e.prototype.getDemoSiteData=function(e){var n=r.a.demo_sites;if(void 0!==n&&void 0!==n[e])return n[e]},e.prototype.checkSite=function(e,n){var t=this;return void 0===n&&(n="https://"),e=this.urlUtils.formatURL(e),this.urlUtils.isHttpURL(e)?this.appProvider.isOnline()?this.checkSiteWithProtocol(e,n).catch(function(i){return i.critical?Promise.reject(i.error):(n="https://"==n?"http://":"https://",t.checkSiteWithProtocol(e,n).catch(function(e){return e.critical?Promise.reject(e.error):Promise.reject(t.textUtils.getErrorMessageFromError(i)||t.textUtils.getErrorMessageFromError(e)||t.translate.instant("core.cannotconnect"))}))}):Promise.reject(this.translate.instant("core.networkerrormsg")):Promise.reject(this.translate.instant("core.login.invalidsite"))},e.prototype.checkSiteWithProtocol=function(e,n){function t(e,n){return Promise.reject({error:e,errorcode:n,critical:!0})}var i,l=this;return e=e.replace(/^http(s)?\:\/\//i,n),this.siteExists(e).catch(function(n){if("enablewsdescription"==n.errorcode)return t(n.error,n.errorcode);var i=l.urlUtils.addOrRemoveWWW(e);return l.siteExists(i).then(function(){e=i}).catch(function(e){return"enablewsdescription"==e.errorcode?t(e.error,e.errorcode):Promise.reject(l.textUtils.getErrorMessageFromError(n)||l.textUtils.getErrorMessageFromError(e))})}).then(function(){var n=l.sitesFactory.makeSite(void 0,e);return n.checkLocalMobilePlugin().then(function(s){return s.service=s.service||r.a.wsservice,l.services[e]=s.service,s.coreSupported||s.code!=o.a.LOGIN_SSO_CODE&&s.code!=o.a.LOGIN_SSO_INAPP_CODE?n.getPublicConfig().then(function(e){if(i=e,!e.enablewebservices)return t(l.translate.instant("core.login.webservicesnotenabled"));if(!e.enablemobilewebservice)return t(l.translate.instant("core.login.mobileservicesnotenabled"));if(e.maintenanceenabled){var n=l.translate.instant("core.sitemaintenance");return e.maintenancemessage&&(n+=e.maintenancemessage),t(n)}return 0===s.code&&(s.code=e.typeoflogin),s},function(e){return 1===e.available?Promise.reject({error:e.error}):s}):s}).then(function(t){return e=n.getURL(),{siteUrl:e,code:t.code,warning:t.warning,service:t.service,config:i}})})},e.prototype.siteExists=function(e){var n=this;return this.http.post(e+"/login/token.php",{}).timeout(o.a.WS_TIMEOUT).toPromise().catch(function(){return Promise.reject({error:n.translate.instant("core.cannotconnect")})}).then(function(e){return!e.errorcode||"enablewsdescription"!=e.errorcode&&"requirecorrectaccess"!=e.errorcode?e.error&&"Web services must be enabled in Advanced features."==e.error?Promise.reject({errorcode:"enablewsdescription",error:e.error}):void 0:Promise.reject({errorcode:e.errorcode,error:e.error})})},e.prototype.getUserToken=function(e,n,t,i,r){var l=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));i||(i=this.determineService(e));var s=e+"/login/token.php";return this.http.post(s,{username:n,password:t,service:i}).timeout(o.a.WS_TIMEOUT).toPromise().then(function(o){return void 0===o?Promise.reject(l.translate.instant("core.cannotconnect")):void 0!==o.token?{token:o.token,siteUrl:e,privateToken:o.privatetoken}:void 0!==o.error?r||"requirecorrectaccess"!=o.errorcode?"missingparam"==o.errorcode?l.utils.checkRedirect(s).then(function(e){return e?Promise.reject({error:l.translate.instant("core.login.sitehasredirect")}):Promise.reject({error:o.error,errorcode:o.errorcode})}):void 0!==o.errorcode?Promise.reject({error:o.error,errorcode:o.errorcode}):Promise.reject(o.error):(e=l.urlUtils.addOrRemoveWWW(e),l.getUserToken(e,n,t,i,!0)):Promise.reject(l.translate.instant("core.login.invalidaccount"))},function(){return Promise.reject(l.translate.instant("core.cannotconnect"))})},e.prototype.newSite=function(e,n,t){var o=this;void 0===t&&(t="");var r=this.sitesFactory.makeSite(void 0,e,n,void 0,t);return r.fetchSiteInfo().then(function(l){var s=o.isValidMoodleVersion(l);if(s==o.VALID_VERSION){var a=o.createSiteID(l.siteurl,l.username);return r.setId(a),r.setInfo(l),o.getSiteConfig(r).then(function(s){return r.setConfig(s),o.addSite(a,e,n,l,t,s),o.currentSite=r,o.sites[a]=r,o.login(a),o.eventsProvider.trigger(i.a.SITE_ADDED,l,a),o.siteTablesSchemas.length&&r.getDb().createTablesFromSchema(o.siteTablesSchemas),a})}if(s==o.LEGACY_APP_VERSION){var u="core.login.legacymoodleversion",c=void 0;o.appProvider.isDesktop()&&(u+="desktop",c={$a:e});var d=o.translate.instant(u,c);return(o.appProvider.isWindows()||o.appProvider.isLinux())&&(d+=o.translate.instant("core.login.legacymoodleversiondesktopdownloadold")),Promise.reject({error:d,errorcode:"legacymoodleversion"})}return Promise.reject({error:o.translate.instant("core.login.invalidmoodleversion"),errorcode:"invalidmoodleversion"})})},e.prototype.createSiteID=function(e,n){return l.Md5.hashAsciiStr(e+n)},e.prototype.determineService=function(e){return e=e.replace("https://","http://"),this.services[e]?this.services[e]:(e=e.replace("http://","https://"),this.services[e]?this.services[e]:r.a.wsservice)},e.prototype.isValidMoodleVersion=function(e){if(!e)return this.INVALID_VERSION;if(e.version){var n=parseInt(e.version,10);if(!isNaN(n))return n>=2016052300?this.VALID_VERSION:n>=2012120300?this.LEGACY_APP_VERSION:this.INVALID_VERSION}var t=this.getReleaseNumber(e.release||"");if(t){if(t>="3.1")return this.VALID_VERSION;if(t>="2.4")return this.LEGACY_APP_VERSION}return this.INVALID_VERSION},e.prototype.getReleaseNumber=function(e){var n=e.match(/^\d(\.\d(\.\d+)?)?/);return n?n[0]:""},e.prototype.validateSiteInfo=function(e){if(!e.firstname||!e.lastname){return{error:"core.requireduserdatamissing",params:{$a:'<a core-link href="'+e.siteurl+'">'+e.siteurl+"</a>"}}}return!0},e.prototype.addSite=function(e,n,t,i,o,r){void 0===o&&(o="");var l={id:e,siteUrl:n,token:t,info:i?JSON.stringify(i):i,privateToken:o,config:r?JSON.stringify(r):r,loggedOut:0};return this.appDB.insertRecord(this.SITES_TABLE,l)},e.prototype.loadSite=function(e,n,t){var o=this;return this.logger.debug("Load site "+e),this.getSite(e).then(function(r){return o.currentSite=r,r.isLoggedOut()?(o.eventsProvider.trigger(i.a.SESSION_EXPIRED,{pageName:n,params:t},r.getId()),!1):r.checkIfLocalMobileInstalledAndNotUsed().then(function(){return o.eventsProvider.trigger(i.a.SESSION_EXPIRED,{pageName:n,params:t},e),!1},function(){return o.login(e),o.updateSiteInfo(e),!0})})},e.prototype.getCurrentSite=function(){return this.currentSite},e.prototype.getCurrentSiteHomeId=function(){return this.currentSite?this.currentSite.getSiteHomeId():1},e.prototype.getCurrentSiteId=function(){return this.currentSite?this.currentSite.getId():""},e.prototype.getCurrentSiteUserId=function(){return this.currentSite?this.currentSite.getUserId():0},e.prototype.isLoggedIn=function(){return void 0!==this.currentSite&&void 0!==this.currentSite.token&&""!=this.currentSite.token},e.prototype.deleteSite=function(e){var n=this;return this.logger.debug("Delete site "+e),void 0!==this.currentSite&&this.currentSite.id==e&&this.logout(),this.getSite(e).then(function(t){return t.deleteDB().then(function(){return delete n.sites[e],n.appDB.deleteRecords(n.SITES_TABLE,{id:e}).then(function(){return t.deleteFolder()},function(){return t.deleteFolder()}).then(function(){n.eventsProvider.trigger(i.a.SITE_DELETED,t,e)})})})},e.prototype.hasSites=function(){return this.appDB.countRecords(this.SITES_TABLE).then(function(e){return e>0})},e.prototype.getSite=function(e){var n=this;return e?this.currentSite&&this.currentSite.getId()==e?Promise.resolve(this.currentSite):void 0!==this.sites[e]?Promise.resolve(this.sites[e]):this.appDB.getRecord(this.SITES_TABLE,{id:e}).then(function(e){return n.makeSiteFromSiteListEntry(e)}):this.currentSite?Promise.resolve(this.currentSite):Promise.reject(null)},e.prototype.makeSiteFromSiteListEntry=function(e){var n,t=e.info,i=e.config;return t=t?this.textUtils.parseJSON(t):t,i=i?this.textUtils.parseJSON(i):i,n=this.sitesFactory.makeSite(e.id,e.siteUrl,e.token,t,e.privateToken,i,1==e.loggedOut),this.sites[e.id]=n,this.siteTablesSchemas.length&&n.getDb().createTablesFromSchema(this.siteTablesSchemas),n},e.prototype.isCurrentSite=function(e){if(!e||!this.currentSite)return!!this.currentSite;var n="object"==typeof e?e.getId():e;return this.currentSite.getId()===n},e.prototype.getSiteDb=function(e){return this.getSite(e).then(function(e){return e.getDb()})},e.prototype.getSiteHomeId=function(e){return this.getSite(e).then(function(e){return e.getSiteHomeId()})},e.prototype.getSites=function(e){var n=this;return this.appDB.getAllRecords(this.SITES_TABLE).then(function(t){var i=[];return t.forEach(function(t){if(!e||e.indexOf(t.id)>-1){var o=t.info?n.textUtils.parseJSON(t.info):t.info;i.push({id:t.id,siteUrl:t.siteUrl,fullName:o&&o.fullname,siteName:o&&o.sitename,avatar:o&&o.userpictureurl})}}),i})},e.prototype.getSortedSites=function(e){return this.getSites(e).then(function(e){return e.sort(function(e,n){var t=e.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),i=n.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),o=t.localeCompare(i);return 0!==o?o:(t=e.fullName.toLowerCase().trim(),i=n.fullName.toLowerCase().trim(),t.localeCompare(i))}),e})},e.prototype.getSitesIds=function(){return this.appDB.getAllRecords(this.SITES_TABLE).then(function(e){return e.map(function(e){return e.id})})},e.prototype.login=function(e){var n=this;return this.appDB.insertRecord(this.CURRENT_SITE_TABLE,{id:1,siteId:e}).then(function(){n.eventsProvider.trigger(i.a.LOGIN,{},e)})},e.prototype.logout=function(){var e=this;if(!this.currentSite)return Promise.resolve();var n=this.currentSite.getId(),t=this.currentSite.getStoredConfig(),o=[];return this.currentSite=void 0,t&&"1"==t.tool_mobile_forcelogout&&o.push(this.setSiteLoggedOut(n,!0)),o.push(this.appDB.deleteRecords(this.CURRENT_SITE_TABLE,{id:1})),Promise.all(o).finally(function(){e.eventsProvider.trigger(i.a.LOGOUT,{},n)})},e.prototype.restoreSession=function(){var e=this;return this.sessionRestored?Promise.reject(null):(this.sessionRestored=!0,this.appDB.getRecord(this.CURRENT_SITE_TABLE,{id:1}).then(function(n){var t=n.siteId;return e.logger.debug("Restore session in site "+t),e.loadSite(t)}).catch(function(){}))},e.prototype.setSiteLoggedOut=function(e,n){var t=this;return this.getSite(e).then(function(i){var o={token:"",loggedOut:n?1:0};return i.setLoggedOut(n),t.appDB.updateRecords(t.SITES_TABLE,o,{id:e})})},e.prototype.updateSiteToken=function(e,n,t,i){var o=this;void 0===i&&(i="");var r=this.createSiteID(e,n);return this.updateSiteTokenBySiteId(r,t,i).then(function(){return o.login(r)})},e.prototype.updateSiteTokenBySiteId=function(e,n,t){var i=this;return void 0===t&&(t=""),this.getSite(e).then(function(o){var r={token:n,privateToken:t,loggedOut:0};return o.token=n,o.privateToken=t,o.setLoggedOut(!1),i.appDB.updateRecords(i.SITES_TABLE,r,{id:e})})},e.prototype.updateSiteInfo=function(e){var n=this;return this.getSite(e).then(function(t){return t.fetchSiteInfo().then(function(o){return t.setInfo(o),n.isLegacyMoodleByInfo(o)?Promise.reject(n.translate.instant("core.login.legacymoodleversion")):n.getSiteConfig(t).catch(function(){}).then(function(r){var l={info:JSON.stringify(o),loggedOut:t.isLoggedOut()?1:0};return void 0!==r&&(t.setConfig(r),l.config=JSON.stringify(r)),n.appDB.updateRecords(n.SITES_TABLE,l,{id:e}).finally(function(){n.eventsProvider.trigger(i.a.SITE_UPDATED,o,e)})})})})},e.prototype.updateSiteInfoByUrl=function(e,n){var t=this.createSiteID(e,n);return this.updateSiteInfo(t)},e.prototype.getSiteIdsFromUrl=function(e,n,t){var i=this;return n&&this.currentSite&&this.currentSite.containsUrl(e)&&(!t||this.currentSite.getInfo().username==t)?Promise.resolve([this.currentSite.getId()]):e.match(/^https?:\/\//i)?this.appDB.getAllRecords(this.SITES_TABLE).then(function(n){var o=[];return n.forEach(function(n){i.sites[n.id]||i.makeSiteFromSiteListEntry(n),i.sites[n.id].containsUrl(e)&&(t&&i.sites[n.id].getInfo().username!=t||o.push(n.id))}),o}).catch(function(){return[]}):this.urlUtils.isAbsoluteURL(e)?Promise.resolve([]):this.currentSite?Promise.resolve([this.currentSite.getId()]):Promise.resolve([])},e.prototype.getStoredCurrentSiteId=function(){return this.appDB.getRecord(this.CURRENT_SITE_TABLE,{id:1}).then(function(e){return e.siteId})},e.prototype.getSitePublicConfig=function(e){return this.sitesFactory.makeSite(void 0,e).getPublicConfig()},e.prototype.getSiteConfig=function(e){return e.wsAvailable("tool_mobile_get_config")?e.getConfig(void 0,!0):Promise.resolve()},e.prototype.isFeatureDisabled=function(e,n){return this.getSite(n).then(function(n){return n.isFeatureDisabled(e)})},e.prototype.createTableFromSchema=function(e){this.createTablesFromSchema([e])},e.prototype.createTablesFromSchema=function(e){this.siteTablesSchemas=this.siteTablesSchemas.concat(e);for(var n in this.sites)this.sites[n].getDb().createTablesFromSchema(e)},e.prototype.wsAvailableInCurrentSite=function(e,n){void 0===n&&(n=!0);var t=this.getCurrentSite();return t&&t.wsAvailable(e,n)},e.prototype.isLegacyMoodleByInfo=function(e){return this.isValidMoodleVersion(e)==this.LEGACY_APP_VERSION},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(9),t(397),t(398),t(399),t(517),t(10),t(5),t(65);var i=t(13),o=(t(6),t(4),t(148),t(198),t(40)),r=function(){function e(e,n,t,i,o,r,l,s,a,u,c,d,f,p){this.iab=e,this.appProvider=n,this.clipboard=t,this.domUtils=i,this.translate=r,this.platform=l,this.langProvider=s,this.eventsProvider=a,this.fileOpener=u,this.mimetypeUtils=c,this.webIntent=d,this.wsProvider=f,this.zone=p,this.uniqueIds={},this.logger=o.getInstance("CoreUtilsProvider")}return e.prototype.allPromises=function(e){return e&&e.length?new Promise(function(n,t){var i,o=e.length,r=0;e.forEach(function(e){e.catch(function(e){i=e}).finally(function(){++r===o&&(i?t(i):n())})})}):Promise.resolve()},e.prototype.arrayToObject=function(e,n,t){return t=t||{},e.forEach(function(e){t[e[n]]=e}),t},e.prototype.basicLeftCompare=function(e,n,t,i,o){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=!0),"function"==typeof e||"function"==typeof n)return!0;if("object"==typeof e&&"object"==typeof n){if(i>=t)return!0;var r=!0;for(var l in e){var s=e[l];if("$$hashKey"==l)return;this.basicLeftCompare(s,n[l],t,i+1)||(r=!1)}return r}if(o&&(void 0===e&&null===n||null===e&&void 0===n))return!0;var a=parseFloat(e),u=parseFloat(n);return isNaN(a)||isNaN(u)?e===n:a==u},e.prototype.blockLeaveView=function(){},e.prototype.checkRedirect=function(e){if(window.fetch){var n,t=window,i={redirect:"follow"};return t.AbortController&&(n=new t.AbortController,i.signal=n.signal),this.timeoutPromise(window.fetch(e,i),o.a.WS_TIMEOUT).then(function(e){return e.redirected}).catch(function(e){return e.timeout&&n&&n.abort(),!1})}return Promise.resolve(!1)},e.prototype.closeInAppBrowser=function(e){this.iabInstance&&(this.iabInstance.close(),e&&this.appProvider.isDesktop()&&t(119).ipcRenderer.send("closeSecondaryWindows"))},e.prototype.clone=function(e){if(Array.isArray(e)){for(var n=[],t=0;t<e.length;t++)n[t]=this.clone(e[t]);return n}if("object"==typeof e&&null!==e){var i={};for(var o in e)i[o]=this.clone(e[o]);return i}return e},e.prototype.copyProperties=function(e,n,t){void 0===t&&(t=!0);for(var i in e)n[i]=t?this.clone(e[i]):e[i]},e.prototype.copyToClipboard=function(e){var n=this;return this.clipboard.copy(e).then(function(){return n.domUtils.showToast("core.copiedtoclipboard",!0)}).catch(function(){})},e.prototype.createFakeWSError=function(e,n){return this.wsProvider.createFakeWSError(e,n)},e.prototype.emptyArray=function(e){e.length=0},e.prototype.emptyObject=function(e){for(var n in e)e.hasOwnProperty(n)&&delete e[n]},e.prototype.executeOrderedPromises=function(e){var n=this,t=[],i=Promise.resolve(),o=function(o){var r=e[o],l=void 0;l=i.finally(function(){var e;try{e=r.func.apply(r.context,r.params||[])}catch(e){return void n.logger.error(e.message)}return e}),t.push(l),r.blocking&&(i=l)};for(var r in e)o(r);return this.allPromises(t)},e.prototype.flattenObject=function(e){var n={};for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("object"!=typeof i||Array.isArray(i))n[t]=i;else{var o=this.flattenObject(i);for(var r in o)o.hasOwnProperty(r)&&(n[t+"."+r]=o[r])}}return n},e.prototype.filterByRegexp=function(e,n){return e&&e.length?e.filter(function(e){var t=e.match(n);return t&&t.length}):[]},e.prototype.filterEnabledSites=function(e,n,t){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var r=[],l=[],s=function(o){var s=e[o];!t&&r.length||r.push(Promise.resolve(n.apply(n,[s].concat(i))).then(function(e){e&&l.push(s)}))};for(var a in e)s(a);return this.allPromises(r).catch(function(){}).then(function(){return t?l:l.length?e:[]})},e.prototype.formatFloat=function(e){if(void 0===e||null===e||"boolean"==typeof e)return"";var n=this.translate.instant("core.decsep");return(e+="").replace(".",n)},e.prototype.formatTree=function(e,n,t,i,o){void 0===n&&(n="parent"),void 0===t&&(t="id"),void 0===i&&(i=0),void 0===o&&(o=5);var r,l,s={},a={},u=[];return e.forEach(function(c,d){if(l=c[t],r=c[n],c.children=[],s[l]=d,r!=i){var f=e[s[r]];if(f)if(a[r]==o){var p=f[n];p&&(e[s[p]].children.push(c),a[l]=a[r],c.parent=p)}else f.children.push(c),a[l]=a[r]+1}else u.push(c),a[l]=1}),u},e.prototype.getCountryName=function(e){var n="assets.countries."+e,t=this.translate.instant(n);return t!==n?t:e},e.prototype.getCountryList=function(){var e=this;return this.getCountryKeysList().then(function(n){var t={};return n.forEach(function(n){if(0===n.indexOf("assets.countries.")){var i=n.replace("assets.countries.","");t[i]=e.translate.instant(n)}}),t})},e.prototype.getCountryKeysList=function(){var e=this,n=this.langProvider.getDefaultLanguage();return this.getCountryKeysListForLanguage(n).catch(function(){var t=e.langProvider.getFallbackLanguage();return t===n?Promise.reject("Countries not found."):e.getCountryKeysListForLanguage(t)})},e.prototype.getCountryKeysListForLanguage=function(e){return this.langProvider.getTranslationTable(e).then(function(e){var n=[];for(var t in e)0===t.indexOf("assets.countries.")&&n.push(t);return 0===n.length?Promise.reject("Countries not found."):n})},e.prototype.getMimeTypeFromUrl=function(e){var n=this.mimetypeUtils.guessExtensionFromUrl(e),t=this.mimetypeUtils.getMimeType(n);return t?Promise.resolve(t):this.wsProvider.getRemoteFileMimeType(e).then(function(e){return e||""})},e.prototype.getUniqueId=function(e){return this.uniqueIds[e]||(this.uniqueIds[e]=0),++this.uniqueIds[e]},e.prototype.hasRepeatedFilenames=function(e){if(!e||!e.length)return!1;for(var n=[],t=0;t<e.length;t++){var i=e[t].filename||e[t].name;if(n.indexOf(i)>-1)return this.translate.instant("core.filenameexist",{$a:i});n.push(i)}return!1},e.prototype.indexOfRegexp=function(e,n){if(!e||!e.length)return-1;for(var t=0;t<e.length;t++){var i=e[t].match(n);if(i&&i.length)return t}return-1},e.prototype.isFalseOrZero=function(e){return void 0!==e&&(!1===e||"false"===e||0===parseInt(e,10))},e.prototype.isTrueOrOne=function(e){return void 0!==e&&(!0===e||"true"===e||1===parseInt(e,10))},e.prototype.isWebServiceError=function(e){return void 0!==e.warningcode||void 0!==e.errorcode&&"invalidtoken"!=e.errorcode&&"userdeleted"!=e.errorcode&&"upgraderunning"!=e.errorcode&&"forcepasswordchangenotice"!=e.errorcode&&"usernotfullysetup"!=e.errorcode&&"sitepolicynotagreed"!=e.errorcode&&"sitemaintenance"!=e.errorcode&&("accessexception"!=e.errorcode||-1==e.message.indexOf("Invalid token - token expired"))},e.prototype.makeMenuFromList=function(e,n,t,i){void 0===t&&(t=",");var o=e.split(t).map(function(e,n){return{label:e.trim(),value:n+1}});return n&&o.unshift({label:n,value:i||0}),o},e.prototype.mergeArraysWithoutDuplicates=function(e,n,t){return this.uniqueArray(e.concat(n),t)},e.prototype.openFile=function(e){var n=this,t=this.mimetypeUtils.getFileExtension(e),i=this.mimetypeUtils.getMimeType(t);try{e=decodeURIComponent(e)}catch(e){}return this.fileOpener.open(e,i).catch(function(o){return n.logger.error("Error opening file "+e+" with mimetype "+i),n.logger.error("Error: ",JSON.stringify(o)),o=!t||t.indexOf("/")>-1||t.indexOf("\\")>-1?n.translate.instant("core.erroropenfilenoextension"):n.translate.instant("core.erroropenfilenoapp"),Promise.reject(o)})},e.prototype.openInApp=function(e,n){var t=this;if(e){if((n=n||{}).enableViewPortScale||(n.enableViewPortScale="yes"),!n.location&&this.platform.is("ios")&&0===e.indexOf("file://")&&(n.location="no"),this.iabInstance=this.iab.create(e,"_blank",n),this.appProvider.isDesktop()||this.appProvider.isMobile()){var o,r=[],l=this.iabInstance.on("loadstart").subscribe(function(e){t.zone.run(function(){r.push(e.url),r.length>10&&r.shift(),t.eventsProvider.trigger(i.a.IAB_LOAD_START,e)})});this.platform.is("android")&&(o=this.iabInstance.on("loadstop").subscribe(function(e){t.zone.run(function(){-1==r.indexOf(e.url)&&t.eventsProvider.trigger(i.a.IAB_LOAD_START,e)})}));var s=this.iabInstance.on("exit").subscribe(function(e){t.zone.run(function(){l.unsubscribe(),o&&o.unsubscribe(),s.unsubscribe(),t.eventsProvider.trigger(i.a.IAB_EXIT,e)})})}return this.iabInstance}},e.prototype.openInBrowser=function(e){if(this.appProvider.isDesktop()){t(119).shell.openExternal(e)||window.open(e,"_system")}else window.open(e,"_system")},e.prototype.openOnlineFile=function(e){var n=this;return this.platform.is("android")?this.getMimeTypeFromUrl(e).catch(function(){}).then(function(t){if(!t)return Promise.reject(n.translate.instant("core.erroropenfilenoextension"));return n.webIntent.startActivity({action:n.webIntent.ACTION_VIEW,url:e,type:t}).catch(function(i){return n.logger.error("Error opening online file "+e+" with mimetype "+t),n.logger.error("Error: ",JSON.stringify(i)),Promise.reject(n.translate.instant("core.erroropenfilenoapp"))})}):(this.openInApp(e),Promise.resolve())},e.prototype.objectToArray=function(e){return Object.keys(e).map(function(n){return e[n]})},e.prototype.objectToArrayOfObjects=function(e,n,t,i,o){var r=function(e,i){if("object"==typeof i){var o=[];return Object.keys(i).forEach(function(n){o=o.concat(r(e?e+"["+n+"]":n,i[n]))}),o}var l={};return l[n]=e,l[t]=i,l};if(!e)return[];var l=r("",e);return i||o?l.sort(function(e,o){return i?e[n]>=o[n]?1:-1:e[t]>=o[t]?1:-1}):l},e.prototype.objectToKeyValueMap=function(e,n,t,i){if(e){var o=i?i.length:0,r={};return e.forEach(function(e){var i=o>0?e[n].substr(o):e[n];r[i]=e[t]}),r}},e.prototype.promiseDefer=function(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e},e.prototype.promiseFails=function(e){return e.then(function(){return!1}).catch(function(){return!0})},e.prototype.promiseWorks=function(e){return e.then(function(){return!0}).catch(function(){return!1})},e.prototype.sameAtKeyMissingIsBlank=function(e,n,t){var i=void 0!==e[t]?e[t]:"",o=void 0!==n[t]?n[t]:"";return"number"!=typeof i&&"boolean"!=typeof i||(i=""+i),"number"!=typeof o&&"boolean"!=typeof o||(o=""+o),i===o},e.prototype.sortAndStringify=function(e){return JSON.stringify(this.sortProperties(e))},e.prototype.sortProperties=function(e){var n=this;return"object"!=typeof e||Array.isArray(e)?e:Object.keys(e).sort().reduce(function(t,i){return t[i]=n.sortProperties(e[i]),t},{})},e.prototype.sortValues=function(e){if("object"!=typeof e||Array.isArray(e))return e;var n=this.objectToArrayOfObjects(e,"name","value",!1,!0);return this.objectToKeyValueMap(n,"name","value")},e.prototype.sumFileSizes=function(e){var n={size:0,total:!0};return e.forEach(function(e){void 0===e.filesize?n.total=!1:n.size+=e.filesize}),n},e.prototype.timeoutPromise=function(e,n){return new Promise(function(t,i){var o=setTimeout(function(){i({timeout:!0})},n);e.then(t).catch(i).finally(function(){clearTimeout(o)})})},e.prototype.unformatFloat=function(e,n){if(void 0===e)return!1;if(null==e)return"";if(e+="",""==(e=e.trim()))return"";e=(e=e.replace(" ","")).replace(this.translate.instant("core.decsep"),".");var t=parseFloat(e);return!(n&&(!isFinite(e)||isNaN(t)))&&t},e.prototype.uniqueArray=function(e,n){for(var t=[],i=[],o=e.length,r=0;r<o;r++){var l=e[r],s=n?l[n]:l;-1==i.indexOf(s)&&(i.push(s),t.push(l))}return t},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0);var i=t(1),o=(t(9),t(4),t(10),t(175),t(40)),r=t(180),l=(t.n(r),t(156)),s=(t.n(l),function(){function e(e,n,t,i,r,l,s,a,u,c,d){var f=this;this.translate=e,this.loadingCtrl=n,this.toastCtrl=t,this.alertCtrl=i,this.textUtils=r,this.appProvider=l,this.platform=s,this.configProvider=a,this.urlUtils=u,this.modalCtrl=c,this.sanitizer=d,this.INPUT_SUPPORT_KEYBOARD=["date","datetime","datetime-local","email","month","number","password","search","tel","text","time","url","week"],this.INSTANCE_ID_ATTR_NAME="core-instance-id",this.template=document.createElement("template"),this.instances={},this.lastInstanceId=0,this.debugDisplay=!1,this.displayedAlerts={},a.get(o.a.SETTINGS_DEBUG_DISPLAY,!1).then(function(e){f.debugDisplay=!!e})}return e.prototype.closest=function(e,n){var t=this;if("function"==typeof e.closest)return e.closest(n);if(this.matchesFn||(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(t.matchesFn=e,!0)}),this.matchesFn))for(;e;){if(e[this.matchesFn](n))return e;e=e.parentElement}},e.prototype.confirmDownloadSize=function(e,n,t,i,r,l){if(i=void 0===i?o.a.WIFI_DOWNLOAD_THRESHOLD:i,r=void 0===r?o.a.DOWNLOAD_THRESHOLD:r,e.size<0||0==e.size&&!e.total)return t=t||"core.course.confirmdownloadunknownsize",this.showConfirm(this.translate.instant(t));if(!e.total){var s=this.textUtils.bytesToSize(e.size,2);return this.showConfirm(this.translate.instant("core.course.confirmpartialdownloadsize",{size:s}))}if(e.size>=i||this.appProvider.isNetworkAccessLimited()&&e.size>=r){n=n||"core.course.confirmdownload";s=this.textUtils.bytesToSize(e.size,2);return this.showConfirm(this.translate.instant(n,{size:s}))}return l?this.showConfirm(this.translate.instant("core.areyousure")):Promise.resolve()},e.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},e.prototype.createCanceledError=function(){return{coreCanceled:!0}},e.prototype.createChangesFromKeyValueDiff=function(e){var n={};return e.forEachAddedItem(function(e){n[e.key]=new i.Q(e.previousValue,e.currentValue,!0)}),e.forEachChangedItem(function(e){n[e.key]=new i.Q(e.previousValue,e.currentValue,!1)}),e.forEachRemovedItem(function(e){n[e.key]=new i.Q(e.previousValue,e.currentValue,!0)}),n},e.prototype.extractDownloadableFilesFromHtml=function(e){var n,t=[];n=this.convertToElement(e).querySelectorAll("a, img, audio, video, source, track");for(var i=0;i<n.length;i++){var o=n[i],r="A"===o.tagName?o.href:o.src;r&&this.urlUtils.isDownloadableUrl(r)&&-1==t.indexOf(r)&&t.push(r),"VIDEO"==o.tagName&&o.getAttribute("poster")&&(r=o.getAttribute("poster"))&&this.urlUtils.isDownloadableUrl(r)&&-1==t.indexOf(r)&&t.push(r)}return t},e.prototype.extractDownloadableFilesFromHtmlAsFakeFileObjects=function(e){return this.extractDownloadableFilesFromHtml(e).map(function(e){return{fileurl:e}})},e.prototype.extractUrlsFromCSS=function(e){var n=[],t=e.match(/url\(\s*["']?(?!data:)([^)]+)\)/gim);return t?(t.forEach(function(e){var t=e.match(/url\(\s*['"]?([^'"]*)['"]?\s*\)/im);t&&t[1]&&n.push(t[1])}),n):n},e.prototype.focusElement=function(e){e&&e.focus&&(e.focus(),this.platform.is("android")&&this.supportsInputKeyboard(e)&&this.appProvider.openKeyboard())},e.prototype.formatPixelsSize=function(e){return"string"==typeof e&&(e.indexOf("px")>-1||e.indexOf("%")>-1)?e:(e=parseInt(e,10),isNaN(e)?"":e+"px")},e.prototype.getContentsOfElement=function(e,n){if(e){var t=e.querySelector(n);if(t)return t.innerHTML}},e.prototype.getDataFromForm=function(e){if(!e||!e.elements)return{};for(var n={},t=0;t<e.elements.length;t++){var i=e.elements[t],o=i.name||"";o&&"submit"!=i.type&&"BUTTON"!=i.tagName&&("checkbox"==i.type?n[o]=!!i.checked:"radio"==i.type?i.checked&&(n[o]=i.value):n[o]=i.value)}return n},e.prototype.getHTMLElementAttribute=function(e,n){return this.convertToElement(e).children[0].getAttribute("src")},e.prototype.getElementHeight=function(e,n,t,i,o){return this.getElementMeasure(e,!1,n,t,i,o)},e.prototype.getElementMeasure=function(e,n,t,i,o,r){var l=n?"offsetWidth":"offsetHeight",s=n?"width":"height",a=n?"clientWidth":"clientHeight",u=n?"Left":"Top",c=n?"Right":"Bottom",d=e[l]||e[s]||e[a]||0;if(d<=0){var f=getComputedStyle(e);f&&""==f.display&&(e.style.display="inline-block",d=e[l]||e[s]||e[a]||0,e.style.display="")}if(t||i||o){var p=getComputedStyle(e),h=0;t&&(h+=this.getComputedStyleMeasure(p,"padding"+u)+this.getComputedStyleMeasure(p,"padding"+c)),i&&(h+=this.getComputedStyleMeasure(p,"margin"+u)+this.getComputedStyleMeasure(p,"margin"+c)),o&&(h+=this.getComputedStyleMeasure(p,"border"+u+"Width")+this.getComputedStyleMeasure(p,"border"+c+"Width")),r?d=d>h?d-h:0:d+=h}return d},e.prototype.getComputedStyleMeasure=function(e,n){return parseInt(e[n],10)||0},e.prototype.getConnectionWarningIconHtml=function(){return'<div text-center><span class="core-icon-with-badge"><ion-icon role="img" class="icon fa fa-wifi" aria-label="wifi"></ion-icon><ion-icon class="icon fa fa-exclamation-triangle core-icon-badge"></ion-icon></span></div>'},e.prototype.getElementWidth=function(e,n,t,i,o){return this.getElementMeasure(e,!0,n,t,i,o)},e.prototype.getElementXY=function(e,n,t){var i,o=n?e.querySelector(n):e,r=0,l=0;if(t||(t="scroll-content"),!o)return null;for(;o;){for(l+=o.offsetLeft-o.scrollLeft+o.clientLeft,r+=o.offsetTop-o.scrollTop+o.clientTop,i=o.offsetParent,o=o.parentElement;i!=o&&o;)o=-1!=o.className.indexOf(t)?null:o.parentElement;o&&-1!=o.className.indexOf(t)&&(o=null)}return[l,r]},e.prototype.getErrorTitle=function(e){return e==this.translate.instant("core.networkerrormsg")||e==this.translate.instant("core.fileuploader.errormustbeonlinetoupload")?this.sanitizer.bypassSecurityTrustHtml(this.getConnectionWarningIconHtml()):this.textUtils.decodeHTML(this.translate.instant("core.error"))},e.prototype.getInstanceByElement=function(e){var n=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);return this.instances[n]},e.prototype.isElementOutsideOfScreen=function(e,n){var t,i,o=n.getBoundingClientRect(),r=0;return!!o&&(t=Math.round((o.bottom+o.top)/2),i=e.getBoundingClientRect(),r=i&&i.top||0,t>window.innerHeight||t<r)},e.prototype.isRichTextEditorEnabled=function(){return this.isRichTextEditorSupported()?this.configProvider.get(o.a.SETTINGS_RICH_TEXT_EDITOR,!0).then(function(e){return!!e}):Promise.resolve(!1)},e.prototype.isRichTextEditorSupported=function(){return!0},e.prototype.moveChildren=function(e,n){for(var t=[];e.childNodes.length>0;){var i=e.childNodes[0];t.push(i),n.appendChild(i)}return t},e.prototype.removeElement=function(e,n){if(e){var t=e.querySelector(n);t&&t.remove()}},e.prototype.removeElementFromHtml=function(e,n,t){var i,o=this.convertToElement(e);if(t){i=o.querySelectorAll(n);for(var r=0;r<i.length;r++)i[r].remove()}else(i=o.querySelector(n))&&i.remove();return o.innerHTML},e.prototype.removeInstanceByElement=function(e){var n=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);delete this.instances[n]},e.prototype.removeInstanceById=function(e){delete this.instances[e]},e.prototype.replaceClassesInElement=function(e,n){for(var t in n)for(var i=e.querySelectorAll("."+t),o=0;o<i.length;o++){var r=i[o];r.className=r.className.replace(t,n[t])}},e.prototype.restoreSourcesInHtml=function(e,n,t){var i=this,o=this.convertToElement(e);return Array.from(o.querySelectorAll("img, video, audio, source, track")).forEach(function(e){var t=n[i.textUtils.decodeURIComponent(e.getAttribute("src"))];void 0!==t&&e.setAttribute("src",t),"VIDEO"==e.tagName&&e.getAttribute("poster")&&void 0!==(t=n[i.textUtils.decodeURIComponent(e.getAttribute("poster"))])&&e.setAttribute("poster",t)}),Array.from(o.querySelectorAll("a")).forEach(function(e){var o=i.textUtils.decodeURIComponent(e.getAttribute("href")),r=n[o];void 0!==r&&(e.setAttribute("href",r),"function"==typeof t&&t(e,o))}),o.innerHTML},e.prototype.scrollTo=function(e,n,t,i,o){return e&&e._scroll&&e.scrollTo(n,t,i,o)},e.prototype.scrollToBottom=function(e,n){return e&&e._scroll&&e.scrollToBottom(n)},e.prototype.scrollToTop=function(e,n){return e&&e._scroll&&e.scrollToTop(n)},e.prototype.getContentHeight=function(e){return e&&e._scroll&&e.contentHeight||0},e.prototype.getScrollHeight=function(e){return e&&e._scroll&&e.scrollHeight||0},e.prototype.getScrollTop=function(e){return e&&e._scroll&&e.scrollTop||0},e.prototype.scrollToElement=function(e,n,t){var i=this.getElementXY(n,void 0,t);return!!i&&(this.scrollTo(e,i[0],i[1]),!0)},e.prototype.scrollToElementBySelector=function(e,n,t){var i=this.getElementXY(e.getScrollElement(),n,t);return!!i&&(this.scrollTo(e,i[0],i[1]),!0)},e.prototype.scrollToInputError=function(e,n){return!!e&&this.scrollToElementBySelector(e,".core-input-error",n)},e.prototype.setDebugDisplay=function(e){this.debugDisplay=e},e.prototype.showAlert=function(e,n,t,i){var o=this,s=this.textUtils.hasHTMLTags(n);return(s?this.textUtils.formatText(n):Promise.resolve(n)).then(function(n){var a=r.Md5.hashAsciiStr((e||"")+"#"+(n||""));if(o.displayedAlerts[a])return o.displayedAlerts[a];var u=o.alertCtrl.create({title:e,message:n,buttons:[t||o.translate.instant("core.ok")]});return u.present().then(function(){if(s){var e=u.pageRef().nativeElement.querySelector(".alert-message");o.treatAnchors(e)}}),o.displayedAlerts[a]=u,u.didDismiss=new l.Subject,u.willDismiss=new l.Subject,u.onDidDismiss(function(e,n){delete o.displayedAlerts[a],u.didDismiss.next({data:e,role:n})}),u.onWillDismiss(function(e,n){u.willDismiss.next({data:e,role:n})}),i>0&&setTimeout(function(){u.dismiss()},i),u})},e.prototype.showAlertTranslated=function(e,n,t,i){return e=e?this.translate.instant(e):e,n=n?this.translate.instant(n):n,t=t?this.translate.instant(t):t,this.showAlert(e,n,t,i)},e.prototype.showConfirm=function(e,n,t,i,o){var r=this;return new Promise(function(l,s){var a=r.textUtils.hasHTMLTags(e);(a?r.textUtils.formatText(e):Promise.resolve(e)).then(function(e){(o=o||{}).message=e,o.title=n,n||(o.cssClass="core-nohead"),o.buttons=[{text:i||r.translate.instant("core.cancel"),role:"cancel",handler:function(){s(r.createCanceledError())}},{text:t||r.translate.instant("core.ok"),handler:function(){l()}}];var u=r.alertCtrl.create(o);u.present().then(function(){if(a){var e=u.pageRef().nativeElement.querySelector(".alert-message");r.treatAnchors(e)}})})})},e.prototype.showErrorModal=function(e,n,t){var i="";if("object"==typeof e){if(this.debugDisplay&&(e.debuginfo&&(i="<br><br>"+this.textUtils.escapeHTML(e.debuginfo)),e.backtrace&&(i+="<br><br>"+this.textUtils.replaceNewLines(this.textUtils.escapeHTML(e.backtrace),"<br>")),console.error(e)),e.coreCanceled)return;(e=this.textUtils.getErrorMessageFromError(e))||(e=JSON.stringify(e),i="");var r=e.match(/token"?[=|:]"?(\w*)/,"");r&&r[1]&&(e=e.replace(new RegExp(r[1],"g"),"secret"))}if(e!=o.a.DONT_SHOW_ERROR){var l=this.textUtils.decodeHTML(n?this.translate.instant(e):e);return i&&(l+=i),this.showAlert(this.getErrorTitle(l),l,void 0,t)}},e.prototype.showErrorModalDefault=function(e,n,t,i){if(!e||!e.coreCanceled){var o=e;return e&&"string"!=typeof e&&(o=this.textUtils.getErrorMessageFromError(e)),this.showErrorModal("string"==typeof o?e:n,t,i)}},e.prototype.showErrorModalFirstWarning=function(e,n,t,i){return this.showErrorModalDefault(e&&e.length&&e[0].message,n,t,i)},e.prototype.showModalLoading=function(e,n){e?n&&(e=this.translate.instant(e)):e=this.translate.instant("core.loading");var t=this.loadingCtrl.create({content:e});return t.present(),t},e.prototype.showPrompt=function(e,n,t,i){var o=this;return void 0===i&&(i="password"),new Promise(function(r,l){var s=o.textUtils.hasHTMLTags(e);(s?o.textUtils.formatText(e):Promise.resolve(e)).then(function(e){var a=o.alertCtrl.create({message:e,title:n,inputs:[{name:"promptinput",placeholder:t||o.translate.instant("core.login.password"),type:i}],buttons:[{text:o.translate.instant("core.cancel"),role:"cancel",handler:function(){l()}},{text:o.translate.instant("core.ok"),handler:function(e){r(e.promptinput)}}]});a.present().then(function(){if(s){var e=a.pageRef().nativeElement.querySelector(".alert-message");o.treatAnchors(e)}})})})},e.prototype.showToast=function(e,n,t,i){void 0===t&&(t=2e3),void 0===i&&(i=""),n&&(e=this.translate.instant(e));var o=this.toastCtrl.create({message:e,duration:t,position:"bottom",cssClass:i,dismissOnPageChange:!0});return o.present(),o},e.prototype.storeInstanceByElement=function(e,n){var t=String(this.lastInstanceId++);return e.setAttribute(this.INSTANCE_ID_ATTR_NAME,t),this.instances[t]=n,t},e.prototype.supportsInputKeyboard=function(e){return e&&!e.disabled&&("textarea"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&-1!=this.INPUT_SUPPORT_KEYBOARD.indexOf(e.type))},e.prototype.toDom=function(e){return this.convertToElement(e).children},e.prototype.treatAnchors=function(e){var n=this;Array.from(e.querySelectorAll("a")).forEach(function(e){e.addEventListener("click",function(i){if(!i.defaultPrevented){var o=e.getAttribute("href");if(o)if(i.preventDefault(),i.stopPropagation(),n.appProvider.isDesktop()){t(119).shell.openExternal(o)||window.open(o,"_system")}else window.open(o,"_system")}})})},e.prototype.viewImage=function(e,n,t,i){if(e){this.modalCtrl.create("CoreViewerImagePage",{title:n,image:e,component:t,componentId:i}).present()}},e.prototype.waitForImages=function(e){var n=[],t=!1;return Array.from(e.querySelectorAll("img")).forEach(function(e){e&&!e.complete&&(t=!0,n.push(new Promise(function(n,t){var i=function(){n(),e.removeEventListener("load",i),e.removeEventListener("error",i)};e.addEventListener("load",i),e.addEventListener("error",i)})))}),Promise.all(n).then(function(){return t})},e.prototype.wrapElement=function(e,n){e.parentNode.insertBefore(n,e),n.appendChild(e)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(14),o=(t.n(i),function(){function e(){this.enabled=!0}return e.prototype.getInstance=function(e){return e=e||"",{log:this.prepareLogFn(console.log.bind(console),e),info:this.prepareLogFn(console.info.bind(console),e),warn:this.prepareLogFn(console.warn.bind(console),e),debug:this.prepareLogFn(console.debug.bind(console),e),error:this.prepareLogFn(console.error.bind(console),e)}},e.prototype.prepareLogFn=function(e,n){var t=this;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(t.enabled){var l=i().format("l LTS");o[0]=l+" "+n+": "+o[0],e.apply(null,o)}}},e}())},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(317),t(190),t(389),t(6);var i=t(13),o=function(){function e(e,n,t,o,r,l,s,a,u){var c=this;this.platform=n,this.keyboard=t,this.appCtrl=o,this.network=r,this.menuCtrl=u,this.DBNAME="MoodleMobile",this.isKeyboardShown=!1,this.backActions=[],this.logger=l.getInstance("CoreAppProvider"),this.db=e.getDB(this.DBNAME),this.keyboard.onKeyboardShow().subscribe(function(e){a.run(function(){document.body.classList.add("keyboard-is-open"),c.isKeyboardShown=!0,s.trigger(i.a.KEYBOARD_CHANGE,e.keyboardHeight)})}),this.keyboard.onKeyboardHide().subscribe(function(e){a.run(function(){document.body.classList.remove("keyboard-is-open"),c.isKeyboardShown=!1,s.trigger(i.a.KEYBOARD_CHANGE,0)})}),this.platform.registerBackButtonAction(function(){c.backButtonAction()},100)}return e.prototype.canGetUserMedia=function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)},e.prototype.canRecordMedia=function(){return!!window.MediaRecorder},e.prototype.closeKeyboard=function(){this.isMobile()&&this.keyboard.hide()},e.prototype.getDB=function(){return this.db},e.prototype.getRootNavController=function(){return this.appCtrl.getRootNavs()[0]},e.prototype.is64Bits=function(){var e=window.process;return this.isDesktop()&&"x64"==e.arch},e.prototype.isDesktop=function(){var e=window.process;return!(!e||!e.versions||void 0===e.versions.electron)},e.prototype.isKeyboardVisible=function(){return this.isKeyboardShown},e.prototype.isLinux=function(){if(!this.isDesktop())return!1;try{return 0===t(516).platform().indexOf("linux")}catch(e){return!1}},e.prototype.isMac=function(){if(!this.isDesktop())return!1;try{return 0===t(516).platform().indexOf("darwin")}catch(e){return!1}},e.prototype.isMobile=function(){return this.platform.is("cordova")},e.prototype.isWide=function(){return this.platform.width()>768},e.prototype.isOnline=function(){var e=null!==this.network.type&&this.network.type!=Connection.NONE&&this.network.type!=Connection.UNKNOWN;return!e&&navigator.onLine&&(e=!0),e},e.prototype.isNetworkAccessLimited=function(){var e=this.network.type;if(null===e)return!1;return[Connection.CELL_2G,Connection.CELL_3G,Connection.CELL_4G,Connection.CELL].indexOf(e)>-1},e.prototype.isWifi=function(){return this.isOnline()&&!this.isNetworkAccessLimited()},e.prototype.isWindows=function(){if(!this.isDesktop())return!1;try{return 0===t(516).platform().indexOf("win")}catch(e){return!1}},e.prototype.openKeyboard=function(){this.isMobile()&&!this.platform.is("ios")&&this.keyboard.show()},e.prototype.startSSOAuthentication=function(){var e,n,t=this;this.ssoAuthenticationPromise=new Promise(function(i,o){n=i,e=setTimeout(function(){t.finishSSOAuthentication()},1e4)}),this.ssoAuthenticationPromise.resolve=n,this.ssoAuthenticationPromise.then(function(){clearTimeout(e)})},e.prototype.finishSSOAuthentication=function(){this.ssoAuthenticationPromise&&(this.ssoAuthenticationPromise.resolve&&this.ssoAuthenticationPromise.resolve(),this.ssoAuthenticationPromise=void 0)},e.prototype.isSSOAuthenticationOngoing=function(){return!!this.ssoAuthenticationPromise},e.prototype.waitForSSOAuthentication=function(){return this.ssoAuthenticationPromise||Promise.resolve()},e.prototype.getRedirect=function(){if(localStorage&&localStorage.getItem)try{var e={siteId:localStorage.getItem("CoreRedirectSiteId"),page:localStorage.getItem("CoreRedirectState"),params:localStorage.getItem("CoreRedirectParams"),timemodified:parseInt(localStorage.getItem("CoreRedirectTime"),10)};return e.params&&(e.params=JSON.parse(e.params)),e}catch(e){this.logger.error("Error loading redirect data:",e)}return{}},e.prototype.storeRedirect=function(e,n,t){if(localStorage&&localStorage.setItem)try{localStorage.setItem("CoreRedirectSiteId",e),localStorage.setItem("CoreRedirectState",n),localStorage.setItem("CoreRedirectParams",JSON.stringify(t)),localStorage.setItem("CoreRedirectTime",String(Date.now()))}catch(e){}},e.prototype.backButtonAction=function(){for(var e=0;e<this.backActions.length&&!(this.backActions[e].priority<1e3);e++)if(this.backActions[e].fn())return;if(this.menuCtrl&&this.menuCtrl.isOpen())this.menuCtrl.close();else{for(;e<this.backActions.length&&!(this.backActions[e].priority<500);e++)if(this.backActions[e].fn())return;if(!this.appCtrl.navPop()){for(;e<this.backActions.length;e++)if(this.backActions[e].fn())return;this.appCtrl.goBack()}}},e.prototype.registerBackButtonAction=function(e,n){var t=this;void 0===n&&(n=0);var i={fn:e,priority:n};return this.backActions.push(i),this.backActions.sort(function(e,n){return n.priority-e.priority}),function(){var e=t.backActions.indexOf(i);return e>=0&&!!t.backActions.splice(e,1)}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(148);var i=function(){function e(e,n,t,i,o){this.translate=e,this.langProvider=n,this.modalCtrl=t,this.sanitizer=i,this.platform=o,this.DISABLED_FEATURES_COMPAT_REGEXPS=[{old:/\$mmLoginEmailSignup/g,new:"CoreLoginEmailSignup"},{old:/\$mmSideMenuDelegate/g,new:"CoreMainMenuDelegate"},{old:/\$mmCoursesDelegate/g,new:"CoreCourseOptionsDelegate"},{old:/\$mmUserDelegate/g,new:"CoreUserDelegate"},{old:/\$mmCourseDelegate/g,new:"CoreCourseModuleDelegate"},{old:/_mmCourses/g,new:"_CoreCourses"},{old:/_mmaFrontpage/g,new:"_CoreSiteHome"},{old:/_mmaGrades/g,new:"_CoreGrades"},{old:/_mmaCompetency/g,new:"_AddonCompetency"},{old:/_mmaNotifications/g,new:"_AddonNotifications"},{old:/_mmaMessages/g,new:"_AddonMessages"},{old:/_mmaCalendar/g,new:"_AddonCalendar"},{old:/_mmaFiles/g,new:"_AddonFiles"},{old:/_mmaParticipants/g,new:"_CoreUserParticipants"},{old:/_mmaCourseCompletion/g,new:"_AddonCourseCompletion"},{old:/_mmaNotes/g,new:"_AddonNotes"},{old:/_mmaBadges/g,new:"_AddonBadges"},{old:/files_privatefiles/g,new:"AddonFilesPrivateFiles"},{old:/files_sitefiles/g,new:"AddonFilesSiteFiles"},{old:/files_upload/g,new:"AddonFilesUpload"},{old:/_mmaModAssign/g,new:"_AddonModAssign"},{old:/_mmaModBook/g,new:"_AddonModBook"},{old:/_mmaModChat/g,new:"_AddonModChat"},{old:/_mmaModChoice/g,new:"_AddonModChoice"},{old:/_mmaModData/g,new:"_AddonModData"},{old:/_mmaModFeedback/g,new:"_AddonModFeedback"},{old:/_mmaModFolder/g,new:"_AddonModFolder"},{old:/_mmaModForum/g,new:"_AddonModForum"},{old:/_mmaModGlossary/g,new:"_AddonModGlossary"},{old:/_mmaModImscp/g,new:"_AddonModImscp"},{old:/_mmaModLabel/g,new:"_AddonModLabel"},{old:/_mmaModLesson/g,new:"_AddonModLesson"},{old:/_mmaModLti/g,new:"_AddonModLti"},{old:/_mmaModPage/g,new:"_AddonModPage"},{old:/_mmaModQuiz/g,new:"_AddonModQuiz"},{old:/_mmaModResource/g,new:"_AddonModResource"},{old:/_mmaModScorm/g,new:"_AddonModScorm"},{old:/_mmaModSurvey/g,new:"_AddonModSurvey"},{old:/_mmaModUrl/g,new:"_AddonModUrl"},{old:/_mmaModWiki/g,new:"_AddonModWiki"},{old:/_mmaModWorkshop/g,new:"_AddonModWorkshop"}],this.template=document.createElement("template")}return e.prototype.buildAddressURL=function(e){return this.sanitizer.bypassSecurityTrustUrl((this.platform.is("android")?"geo:0,0?q=":"http://maps.google.com?q=")+encodeURIComponent(e))},e.prototype.buildMessage=function(e){var n="";return e.forEach(function(e){e&&(n+="<p>"+e+"</p>")}),n},e.prototype.bytesToSize=function(e,n){if(void 0===n&&(n=2),void 0===e||e<0)return this.translate.instant("core.notapplicable");n<0&&(n=2);var t=["core.sizeb","core.sizekb","core.sizemb","core.sizegb","core.sizetb"],i=this.translate.instant(t),o=0;if(e>=1024){for(;e>=1024;)o++,e/=1024;e=Number(Math.round(parseFloat(e+"e+"+n))+"e-"+n)}return this.translate.instant("core.humanreadablesize",{size:e,unit:i[t[o]]})},e.prototype.cleanTags=function(e,n){if("string"!=typeof e)return e;if(!e)return"";e=e.replace(/(<([^>]+)>)/gi,"");return e=this.convertToElement(e).textContent,e=this.replaceNewLines(e,n?" ":"<br>")},e.prototype.concatenatePaths=function(e,n){if(!e)return n;if(!n)return e;var t=e.slice(-1),i=n.charAt(0);return"/"===t&&"/"===i?e+n.substr(1):"/"!==t&&"/"!==i?e+"/"+n:e+n},e.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},e.prototype.countWords=function(e){return e&&"string"==typeof e?(e=e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,""),e=e.replace(/<\/?(?!\!)[^>]*>/gi,""),e=this.decodeHTMLEntities(e),(e=e.replace(/_/gi," ")).match(/\S+/gi).length):0},e.prototype.decodeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g," ")},e.prototype.decodeHTMLEntities=function(e){if(e){e=this.convertToElement(e).textContent}return e},e.prototype.decodeURI=function(e){try{return decodeURI(e)}catch(e){}return e},e.prototype.decodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(e){}return e},e.prototype.escapeForRegex=function(e){return e&&"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},e.prototype.escapeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},e.prototype.expandText=function(e,n,t,i,o){if(n.length>0){var r={title:e,content:n,component:t,componentId:i,files:o};r.isModal=!0;this.modalCtrl.create("CoreViewerTextPage",r).present()}},e.prototype.formatHtmlLines=function(e){var n=this.hasHTMLTags(e);return-1==e.indexOf("<p>")&&(e="<p>"+e+"</p>"),n?e:this.replaceNewLines(e,"<br>")},e.prototype.formatText=function(e,n,t,i){var o=this;return this.treatMultilangTags(e).then(function(e){return n&&(e=o.cleanTags(e,t)),i>0&&(e=o.shortenText(e,i)),e})},e.prototype.getErrorMessageFromError=function(e){return"string"==typeof e?e:e&&(e.message||e.error||e.content||e.body)},e.prototype.getTextPluginfileUrl=function(e){if(e&&e.length){var n=e[0].url||e[0].fileurl;return n.substr(0,Math.max(n.lastIndexOf("/"),n.lastIndexOf("%2F")))}},e.prototype.hasHTMLTags=function(e){return/<[a-z][\s\S]*>/i.test(e)},e.prototype.htmlIsBlank=function(e){if(!e)return!0;var n=document.createElement("div");return n.innerHTML=e,""===n.textContent&&null===n.querySelector("img, object, hr")},e.prototype.hasUnicode=function(e){for(var n=0;n<e.length;n++)if(e.charCodeAt(n)>55295)return!0;return!1},e.prototype.hasUnicodeData=function(e){for(var n in e)if("object"==typeof e[n]){if(this.hasUnicodeData(e[n]))return!0}else if("string"==typeof e[n]&&this.hasUnicode(e[n]))return!0;return!1},e.prototype.parseJSON=function(e,n,t){try{return JSON.parse(e)}catch(e){t&&t(e)}return void 0!==n?n:e},e.prototype.removeSpecialCharactersForFiles=function(e){return e&&"string"==typeof e?e.replace(/[#:\/\?\\]+/g,"_"):""},e.prototype.replaceNewLines=function(e,n){return e&&"string"==typeof e?e.replace(/(?:\r\n|\r|\n)/g,n):""},e.prototype.replacePluginfileUrls=function(e,n){if(e&&"string"==typeof e){var t=this.getTextPluginfileUrl(n);if(t)return e.replace(/@@PLUGINFILE@@/g,t)}return e},e.prototype.restorePluginfileUrls=function(e,n){if(e&&"string"==typeof e){var t=this.getTextPluginfileUrl(n);if(t)return e.replace(new RegExp(this.escapeForRegex(t),"g"),"@@PLUGINFILE@@")}return e},e.prototype.roundToDecimals=function(e,n){void 0===n&&(n=2);var t=Math.pow(10,n);return Math.round(e*t)/t},e.prototype.s=function(e){return e?this.escapeHTML(e).replace(/&amp;#(\d+|x[0-9a-f]+);/i,"&#$1;"):""},e.prototype.shortenText=function(e,n){if(e.length>n){var t=(e=e.substr(0,n)).lastIndexOf(" ");t>0&&(e=e.substr(0,t)),e+="&hellip;"}return e},e.prototype.stripUnicode=function(e){for(var n="",t=0;t<e.length;t++)e.charCodeAt(t)<=55295&&(n+=e.charAt(t));return n},e.prototype.treatDisabledFeatures=function(e){if(!e)return"";for(var n=0;n<this.DISABLED_FEATURES_COMPAT_REGEXPS.length;n++){var t=this.DISABLED_FEATURES_COMPAT_REGEXPS[n];e=e.replace(t.old,t.new)}return e},e.prototype.treatMultilangTags=function(e){return e&&"string"==typeof e?this.langProvider.getCurrentLanguage().then(function(n){var t=/<(?:lang|span)[^>]+lang="[a-zA-Z0-9_-]+"[^>]*>(.*?)<\/(?:lang|span)>/g,i=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g");if(!e.match(i)){var o=e.match(t);if(!o||!o[0])return e;n=o[0].match(/lang="([a-zA-Z0-9_-]+)"/)[1],i=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g")}return e=e.replace(i,"$1"),e=e.replace(t,"")}):Promise.resolve("")},e.prototype.twoDigits=function(e){return e<10?"0"+e:""+e},e.prototype.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.unserialize=function(e,n){var t=function(e){for(var n=e.length,t=e.length-1;t>=0;t--){var i=e.charCodeAt(t);i>127&&i<=2047?n++:i>2047&&i<=65535&&(n+=2),i>=56320&&i<=57343&&t--}return n-1},i=function(e,t){n&&n(e+t)},o=function(e,n,t){for(var o=2,r=[],l=e.slice(n,n+1);l!==t;)o+n>e.length&&i("Error","Invalid"),r.push(l),l=e.slice(n+(o-1),n+o),o+=1;return[r.length,r.join("")]},r=function(e,n){var l,s,a,u,c,d,f,p,h,m,_,g,v,y,b,P,E=0,C=function(e){return e};switch(n||(n=0),l=e.slice(n,n+1).toLowerCase(),s=n+2,l){case"i":C=function(e){return parseInt(e,10)},p=(h=o(e,s,";"))[1],s+=(E=h[0])+1;break;case"b":C=function(e){return 0!==parseInt(e,10)},p=(h=o(e,s,";"))[1],s+=(E=h[0])+1;break;case"d":C=function(e){return parseFloat(e)},p=(h=o(e,s,";"))[1],s+=(E=h[0])+1;break;case"n":p=null;break;case"s":_=(m=o(e,s,":"))[1],p=(h=function(e,n,i){for(var o,r=[],l=0;l<i;l++)o=e.slice(n+(l-1),n+l),r.push(o),i-=t(o);return[r.length,r.join("")]}(e,(s+=(E=m[0])+2)+1,parseInt(_,10)))[1],s+=(E=h[0])+2,E!==parseInt(_,10)&&E!==p.length&&i("SyntaxError","String length mismatch");break;case"a":p={},u=(a=o(e,s,":"))[1],s+=(E=a[0])+2,d=parseInt(u,10),c=!0;for(var I=0;I<d;I++)v=(y=r(e,s))[2],P=(b=r(e,s+=y[1]))[2],s+=b[1],v!==I&&(c=!1),p[v]=P;if(c){for(f=new Array(d),g=0;g<d;g++)f[g]=p[g];p=f}s+=1;break;default:i("SyntaxError","Unknown / Unhandled data type(s): "+l)}return[l,s-n,C(p)]};return r(e+"",0)[2]},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(156),o=(t.n(i),function(){function e(e){this.observables={},this.uniqueEvents={},this.logger=e.getInstance("CoreEventsProvider")}return e.prototype.on=function(e,n,t){var o=this;if(this.uniqueEvents[e])return n(this.uniqueEvents[e].data),{off:function(){}};this.logger.debug("New observer listening to event '"+e+"'"),void 0===this.observables[e]&&(this.observables[e]=new i.Subject);var r=this.observables[e].subscribe(function(e){t&&e.siteId!=t||n(e)});return{off:function(){o.logger.debug("Stop listening to event '"+e+"'"),r.unsubscribe()}}},e.prototype.trigger=function(e,n,t){this.logger.debug("Event '"+e+"' triggered."),this.observables[e]&&(t&&(n||(n={}),n.siteId=t),this.observables[e].next(n))},e.prototype.triggerUnique=function(e,n,t){this.uniqueEvents[e]?this.logger.debug("Unique event '"+e+"' ignored because it was already triggered."):(this.logger.debug("Unique event '"+e+"' triggered."),t&&(n||(n={}),n.siteId=t),this.uniqueEvents[e]={data:n},this.observables[e]&&this.observables[e].next(n))},e.SESSION_EXPIRED="session_expired",e.PASSWORD_CHANGE_FORCED="password_change_forced",e.USER_NOT_FULLY_SETUP="user_not_fully_setup",e.SITE_POLICY_NOT_AGREED="site_policy_not_agreed",e.LOGIN="login",e.LOGOUT="logout",e.LANGUAGE_CHANGED="language_changed",e.NOTIFICATION_SOUND_CHANGED="notification_sound_changed",e.SITE_ADDED="site_added",e.SITE_UPDATED="site_updated",e.SITE_DELETED="site_deleted",e.COMPLETION_MODULE_VIEWED="completion_module_viewed",e.USER_DELETED="user_deleted",e.PACKAGE_STATUS_CHANGED="package_status_changed",e.COURSE_STATUS_CHANGED="course_status_changed",e.SECTION_STATUS_CHANGED="section_status_changed",e.SITE_PLUGINS_LOADED="site_plugins_loaded",e.LOGIN_SITE_CHECKED="login_site_checked",e.LOGIN_SITE_UNCHECKED="login_site_unchecked",e.IAB_LOAD_START="inappbrowser_load_start",e.IAB_EXIT="inappbrowser_exit",e.APP_LAUNCHED_URL="app_launched_url",e.FILE_SHARED="file_shared",e.KEYBOARD_CHANGE="keyboard_change",e.CORE_LOADING_CHANGED="core_loading_changed",e.ORIENTATION_CHANGE="orientation_change",e.LOAD_PAGE_MAIN_MENU="load_page_main_menu",e}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var i=t(13),o=t(40),r=(t(325),function(){function e(e,n,t,i,o,r,l,s){this.sitesProvider=n,this.eventsProvider=t,this.utils=i,this.timeUtils=o,this.translate=r,this.courseOffline=l,this.appProvider=s,this.ROOT_CACHE_KEY="mmCourse:",this.COURSE_STATUS_TABLE="course_status",this.courseStatusTableSchema={name:this.COURSE_STATUS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"status",type:"TEXT",notNull:!0},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"}]},this.CORE_MODULES=["assign","assignment","book","chat","choice","data","database","date","external-tool","feedback","file","folder","forum","glossary","ims","imscp","label","lesson","lti","page","quiz","resource","scorm","survey","url","wiki","workshop"],this.logger=e.getInstance("CoreCourseProvider"),this.sitesProvider.createTableFromSchema(this.courseStatusTableSchema)}return n=e,e.prototype.canGetCourseBlocks=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_block_get_course_blocks")},e.prototype.canRequestStealthModules=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan(["3.4.6","3.5.3"])},e.prototype.checkModuleCompletion=function(e,n){var t=this;n&&2===n.tracking&&0===n.state&&this.invalidateSections(e).finally(function(){t.eventsProvider.trigger(i.a.COMPLETION_MODULE_VIEWED,{courseId:e})})},e.prototype.clearAllCoursesStatus=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.logger.debug("Clear all course status for site "+e.id),e.getDb().deleteRecords(n.COURSE_STATUS_TABLE).then(function(){n.triggerCourseStatusChanged(-1,o.a.NOT_DOWNLOADED,e.id)})})},e.prototype.getActivitiesCompletionStatus=function(e,n,t,i,o,r){var l=this;return void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===r&&(r=!0),this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId(),l.logger.debug("Getting completion status for user "+t+" in course "+e);var s={courseid:e,userid:t},a={cacheKey:l.getActivitiesCompletionCacheKey(e,t)};return i?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),n.read("core_completion_get_activities_completion_status",s,a).then(function(e){return e&&e.statuses?l.utils.arrayToObject(e.statuses,"cmid"):Promise.reject(null)}).then(function(t){return r?l.courseOffline.getCourseManualCompletions(e,n.id).then(function(e){return e.forEach(function(e){if(e&&void 0!==t[e.cmid]){var n=t[e.cmid];1===n.tracking&&(n.state=e.completed,n.offline=!0)}}),t}).catch(function(){return t}):t})})},e.prototype.getActivitiesCompletionCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"activitiescompletion:"+e+":"+n},e.prototype.getCourseBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseid:e},o={cacheKey:t.getCourseBlocksCacheKey(e)};return n.read("core_block_get_course_blocks",i,o).then(function(e){return e.blocks||[]})})},e.prototype.getCourseBlocksCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseblocks:"+e},e.prototype.getCourseStatusData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.COURSE_STATUS_TABLE,{id:e}).then(function(e){return e||Promise.reject(null)})})},e.prototype.getCourseStatus=function(e,n){return this.getCourseStatusData(e,n).then(function(e){return e.status||o.a.NOT_DOWNLOADED}).catch(function(){return o.a.NOT_DOWNLOADED})},e.prototype.getModule=function(e,t,i,o,r,l,s){var a=this;l=l||this.sitesProvider.getCurrentSiteId();var u=function(e,n,i,o,l){var s={courseid:t,options:[]},c={omitExpires:l};return o&&s.options.push({name:"includestealthmodules",value:1}),i?(s.options.push({name:"modname",value:i}),c.cacheKey=a.getModuleByModNameCacheKey(i)):(s.options.push({name:"cmid",value:n}),c.cacheKey=a.getModuleCacheKey(n)),!l&&r&&(c.getFromCache=!1,c.emergencyCache=!1),e.read("core_course_get_contents",s,c).catch(function(){if(!r&&!a.appProvider.isOnline()){if(o)return u(e,n,i,!1,!0);if(i)return u(e,n,void 0,a.canRequestStealthModules(e),!0)}return Promise.reject(null)})};return(t?Promise.resolve():this.getModuleBasicInfo(e,l).then(function(e){t=e.course})).then(function(){return a.sitesProvider.getSite(l)}).then(function(n){return a.logger.debug("Getting module "+e+" in course "+t),u(n,e,s,a.canRequestStealthModules(n),o)}).catch(function(){var e={omitExpires:o};return!o&&r&&(e.getFromCache=!1,e.emergencyCache=!1),a.getSections(t,!1,!1,e,l)}).then(function(o){for(var r=0;r<o.length;r++){var l=o[r];if(null==i||isNaN(i)||l.id==n.STEALTH_MODULES_SECTION_ID||i==l.id)for(var s=0;s<l.modules.length;s++){var a=l.modules[s];if(a.id==e)return a.course=t,a}}return Promise.reject(null)})},e.prototype.getModuleBasicInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={cmid:e},o={cacheKey:t.getModuleCacheKey(e)};return n.read("core_course_get_course_module",i,o).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},e.prototype.getModuleBasicGradeInfo=function(e,n){return this.getModuleBasicInfo(e,n).then(function(e){var n={advancedgrading:e.advancedgrading||!1,grade:e.grade||!1,gradecat:e.gradecat||!1,gradepass:e.gradepass||!1,outcomes:e.outcomes||!1,scale:e.scale||!1};return(!1!==n.grade||!1!==n.advancedgrading||!1!==n.outcomes)&&n})},e.prototype.getModuleBasicInfoByInstance=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={instance:e,module:n},r={cacheKey:i.getModuleBasicInfoByInstanceCacheKey(e,n)};return t.read("core_course_get_course_module_by_instance",o,r).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},e.prototype.getModuleBasicInfoByInstanceCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"moduleByInstance:"+n+":"+e},e.prototype.getModuleCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:"+e},e.prototype.getModuleByModNameCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:modName:"+e},e.prototype.getModuleIconSrc=function(e,n){if(this.CORE_MODULES.indexOf(e)<0){if(n)return n;e="external-tool"}return"assets/img/mod/"+e+".svg"},e.prototype.getModuleSectionId=function(e,n){return this.getModuleBasicInfo(e,n).then(function(e){return e.section})},e.prototype.getSection=function(e,n,t,i,o){return n<0?Promise.reject("Invalid section ID"):this.getSections(e,t,i,void 0,o).then(function(e){for(var t=0;t<e.length;t++)if(e[t].id==n)return e[t];return Promise.reject("Unkown section")})},e.prototype.getSections=function(e,n,t,i,o,r){var l=this;return void 0===r&&(r=!0),this.sitesProvider.getSite(o).then(function(o){(i=i||{}).cacheKey=l.getSectionsCacheKey(e);var s={courseid:e,options:[{name:"excludemodules",value:n?1:0},{name:"excludecontents",value:t?1:0}]};return l.canRequestStealthModules(o)&&s.options.push({name:"includestealthmodules",value:r?1:0}),o.read("core_course_get_contents",s,i).catch(function(){return i.omitExpires=!0,s.options.splice(-1,1),o.read("core_course_get_contents",s,i)}).then(function(n){var t=o.getSiteHomeId(),i=!0;return e==t&&(i=o.getStoredConfig("numsections")),void 0!==i&&!i&&n.length>0&&n.pop(),n})})},e.prototype.getSectionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"sections:"+e},e.prototype.getSectionsModules=function(e){if(!e||!e.length)return[];var n=[];return e.forEach(function(e){e.modules&&(n=n.concat(e.modules))}),n},e.prototype.invalidateCourseBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseBlocksCacheKey(e))})},e.prototype.invalidateModule=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){var o=[];return t&&o.push(n.invalidateWsCacheForKey(i.getModuleByModNameCacheKey(t))),o.push(n.invalidateWsCacheForKey(i.getModuleCacheKey(e))),Promise.all(o)})},e.prototype.invalidateModuleByInstance=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getModuleBasicInfoByInstanceCacheKey(e,n))})},e.prototype.invalidateSections=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){var o=[],r=n.getSiteHomeId();return t=t||n.getUserId(),o.push(n.invalidateWsCacheForKey(i.getSectionsCacheKey(e))),o.push(n.invalidateWsCacheForKey(i.getActivitiesCompletionCacheKey(e,t))),e==r&&o.push(n.invalidateConfig()),Promise.all(o)})},e.prototype.loadModuleContents=function(e,n,t,i,o,r,l){return!o&&e.contents&&e.contents.length?Promise.resolve():this.getModule(e.id,n,t,i,o,r,l).then(function(n){e.contents=n.contents})},e.prototype.logView=function(e,n,t){var i={courseid:e};return void 0!==n&&(i.sectionnumber=n),this.sitesProvider.getSite(t).then(function(e){return e.write("core_course_view_course",i).then(function(e){if(!e.status)return Promise.reject(null)})})},e.prototype.markCompletedManually=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l=function(){return r.courseOffline.markCompletedManually(e,n,t,i,o)};return!this.appProvider.isOnline()&&t?l():this.markCompletedManuallyOnline(e,n,o).then(function(n){return r.courseOffline.deleteManualCompletion(e,o).catch(function(){}).then(function(){return n})}).catch(function(e){return r.utils.isWebServiceError(e)||!t?Promise.reject(e):l()})},e.prototype.markCompletedManuallyOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_completion_update_activity_completion_status_manually",{cmid:e,completed:n})})},e.prototype.moduleHasView=function(e){return!!e.url},e.prototype.setCoursePreviousStatus=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set previous status for course "+e+" in site "+n),this.sitesProvider.getSite(n).then(function(i){var r=i.getDb(),l={};return t.getCourseStatusData(e,n).then(function(i){return t.logger.debug("Set previous status '"+i.status+"' for course "+e),l.status=i.previous||o.a.NOT_DOWNLOADED,l.updated=Date.now(),i.status==o.a.DOWNLOADING&&(l.downloadTime=i.previousDownloadTime),r.updateRecords(t.COURSE_STATUS_TABLE,l,{id:e}).then(function(){return t.triggerCourseStatusChanged(e,l.status,n),l.status})})})},e.prototype.setCourseStatus=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set status '"+n+"' for course "+e+" in site "+t),this.sitesProvider.getSite(t).then(function(r){var l,s;return n==o.a.DOWNLOADING&&(l=i.timeUtils.timestamp()),i.getCourseStatusData(e,t).then(function(e){return void 0===l?(l=e.downloadTime,s=e.previousDownloadTime):s=e.downloadTime,e.status}).catch(function(){}).then(function(t){if(t!=n){var o={id:e,status:n,previous:t,updated:(new Date).getTime(),downloadTime:l,previousDownloadTime:s};return r.getDb().insertRecord(i.COURSE_STATUS_TABLE,o)}}).then(function(){i.triggerCourseStatusChanged(e,n,t)})})},e.prototype.translateModuleName=function(e){this.CORE_MODULES.indexOf(e)<0&&(e="external-tool");var n="core.mod_"+e,t=this.translate.instant(n);return t!==n?t:e},e.prototype.triggerCourseStatusChanged=function(e,n,t){this.eventsProvider.trigger(i.a.COURSE_STATUS_CHANGED,{courseId:e,status:n},t)},e.ALL_SECTIONS_ID=-2,e.STEALTH_MODULES_SECTION_ID=-1,e.ACCESS_GUEST="courses_access_guest",e.ACCESS_DEFAULT="courses_access_default",e.COMPLETION_TRACKING_NONE=0,e.COMPLETION_TRACKING_MANUAL=1,e.COMPLETION_TRACKING_AUTOMATIC=2,e.COMPLETION_INCOMPLETE=0,e.COMPLETION_COMPLETE=1,e.COMPLETION_COMPLETE_PASS=2,e.COMPLETION_COMPLETE_FAIL=3,e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(190),t(10);var i=t(13),o=(t(154),t(6),t(243),t(2),t(198),t(5),t(65),t(11),t(25),t(26),t(3),t(40)),r=t(180),l=(t.n(r),function(){function e(e,n,t,i,o,r,l,s,a,u,c,d,f,p,h,m){var _=this;this.appProvider=n,this.fileProvider=t,this.sitesProvider=i,this.wsProvider=o,this.textUtils=r,this.utils=l,this.mimeUtils=s,this.urlUtils=a,this.timeUtils=u,this.eventsProvider=c,this.pluginFileDelegate=p,this.domUtils=h,this.QUEUE_PROCESS_INTERVAL=0,this.FOLDER="filepool",this.WIFI_DOWNLOAD_THRESHOLD=20971520,this.DOWNLOAD_THRESHOLD=2097152,this.QUEUE_RUNNING="CoreFilepool:QUEUE_RUNNING",this.QUEUE_PAUSED="CoreFilepool:QUEUE_PAUSED",this.ERR_QUEUE_IS_EMPTY="CoreFilepoolError:ERR_QUEUE_IS_EMPTY",this.ERR_FS_OR_NETWORK_UNAVAILABLE="CoreFilepoolError:ERR_FS_OR_NETWORK_UNAVAILABLE",this.ERR_QUEUE_ON_PAUSE="CoreFilepoolError:ERR_QUEUE_ON_PAUSE",this.QUEUE_TABLE="filepool_files_queue",this.FILES_TABLE="filepool_files",this.LINKS_TABLE="filepool_files_links",this.PACKAGES_TABLE="filepool_packages",this.appTablesSchema=[{name:this.QUEUE_TABLE,columns:[{name:"siteId",type:"TEXT"},{name:"fileId",type:"TEXT"},{name:"added",type:"INTEGER"},{name:"priority",type:"INTEGER"},{name:"url",type:"TEXT"},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"links",type:"TEXT"}],primaryKeys:["siteId","fileId"]}],this.sitesTablesSchema=[{name:this.FILES_TABLE,columns:[{name:"fileId",type:"TEXT",primaryKey:!0},{name:"url",type:"TEXT",notNull:!0},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"stale",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"extension",type:"TEXT"}]},{name:this.LINKS_TABLE,columns:[{name:"fileId",type:"TEXT"},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"}],primaryKeys:["fileId","component","componentId"]},{name:this.PACKAGES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"},{name:"status",type:"TEXT"},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"},{name:"extra",type:"TEXT"}]}],this.tokenRegex=new RegExp("(\\?|&)token=([A-Za-z0-9]*)"),this.urlAttributes=[this.tokenRegex,new RegExp("(\\?|&)forcedownload=[0-1]"),new RegExp("(\\?|&)preview=[A-Za-z0-9]+"),new RegExp("(\\?|&)offline=[0-1]","g")],this.queueDeferreds={},this.sizeCache={},this.packagesPromises={},this.filePromises={},this.logger=e.getInstance("CoreFilepoolProvider"),this.appDB=this.appProvider.getDB(),this.appDB.createTablesFromSchema(this.appTablesSchema),this.sitesProvider.createTablesFromSchema(this.sitesTablesSchema),d.ready().then(function(){_.checkQueueProcessing(),f.onConnect().subscribe(function(){m.run(function(){_.checkQueueProcessing()})})})}return e.prototype.addFileLink=function(e,n,t,i){var o=this;return t?(i=this.fixComponentId(i),this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(o.LINKS_TABLE,{fileId:n,component:t,componentId:i||""})})):Promise.reject(null)},e.prototype.addFileLinkByUrl=function(e,n,t,i){var o=this;return this.fixPluginfileURL(e,n).then(function(n){var r=o.getFileIdByUrl(n);return o.addFileLink(e,r,t,i)})},e.prototype.addFileLinks=function(e,n,t){var i=this,o=[];return t.forEach(function(t){o.push(i.addFileLink(e,n,t.component,t.componentId))}),Promise.all(o)},e.prototype.addFilesToQueue=function(e,n,t,i){return this.downloadOrPrefetchFiles(e,n,!0,!1,t,i)},e.prototype.addFileToPool=function(e,n,t){var i=this,o=Object.assign({},t);return o.fileId=n,this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(i.FILES_TABLE,o)})},e.prototype.addHashToFilename=function(e,n){var t=n.match(/_[a-f0-9]{32}/g);if(t&&t.length){var i=t[t.length-1],o=e.replace(i,"");if("_"+r.Md5.hashAsciiStr("url:"+o)==i)return n}return n+"_"+r.Md5.hashAsciiStr("url:"+e)},e.prototype.addToQueue=function(e,n,t,i,o,r,l,s,a,u){var c=this;return void 0===a&&(a={}),this.logger.debug("Adding "+n+" to the queue"),this.appDB.insertRecord(this.QUEUE_TABLE,{siteId:e,fileId:n,url:t,priority:i,revision:o,timemodified:r,path:l,isexternalfile:a.isexternalfile?1:0,repositorytype:a.repositorytype,links:JSON.stringify(u?[u]:[]),added:Date.now()}).then(function(){return c.checkQueueProcessing(),c.notifyFileDownloading(e,n),c.getQueuePromise(e,n,!0,s)})},e.prototype.addToQueueByUrl=function(e,n,t,i,o,r,l,s,a,u){var c=this;void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a={});var d,f,p;return this.fileProvider.isAvailable()?this.sitesProvider.getSite(e).then(function(h){return h.canDownloadFiles()?c.fixPluginfileURL(e,n).then(function(n){var h={siteId:e,fileId:d};return u=u||c.getRevisionFromUrl(n),d=c.getFileIdByUrl(n),void 0!==t&&(f={component:t,componentId:c.fixComponentId(i)}),p=c.getQueueDeferred(e,d,!1,l),c.hasFileInQueue(e,d).then(function(t){var i={},m=!1;if(t){if(t.priority<s&&(i.priority=s),u&&t.revision!==u&&(i.revision=u),o&&t.timemodified!==o&&(i.timemodified=o),r&&t.path!==r&&(i.path=r),t.isexternalfile!==a.isexternalfile&&(t.isexternalfile||a.isexternalfile)&&(i.isexternalfile=a.isexternalfile),t.repositorytype!==a.repositorytype&&(t.repositorytype||a.repositorytype)&&(i.repositorytype=a.repositorytype),f){if(t.links&&t.links.length)for(var _ in t.links){var g=t.links[_];if(g.component==f.component&&g.componentId==f.componentId){m=!0;break}}m||(i.links=t.links||[],i.links.push(f),i.links=JSON.stringify(t.links))}return Object.keys(i).length?(c.logger.debug("Updating file "+d+" which is already in queue"),c.appDB.updateRecords(c.QUEUE_TABLE,i,h).then(function(){return c.getQueuePromise(e,d,!0,l)})):(c.logger.debug("File "+d+" already in queue and does not require update"),p?p.promise:c.getQueuePromise(e,d,!0,l))}return c.addToQueue(e,d,n,s,u,o,r,l,a,f)},function(){return c.addToQueue(e,d,n,s,u,o,r,l,a,f)})}):Promise.reject(null)}):Promise.reject(null)},e.prototype.addToQueueIfNeeded=function(e,n,t,i,o,r,l,s,a){var u=this;void 0===o&&(o=0),void 0===r&&(r=!0),void 0===s&&(s={});var c;if(r){if(void 0!==this.sizeCache[n])c=Promise.resolve(this.sizeCache[n]);else{if(!this.appProvider.isOnline())return Promise.reject(null);c=this.wsProvider.getRemoteFileSize(n)}return c.then(function(r){var c=u.appProvider.isWifi(),d=r<=0;if(d||(u.sizeCache[n]=r),d){if(l&&c)return u.addToQueueByUrl(e,n,t,i,o,void 0,void 0,0,s,a)}else if(r<=u.DOWNLOAD_THRESHOLD||c&&r<=u.WIFI_DOWNLOAD_THRESHOLD)return u.addToQueueByUrl(e,n,t,i,o,void 0,void 0,0,s,a)})}return this.addToQueueByUrl(e,n,t,i,o,void 0,void 0,0,s,a)},e.prototype.checkQueueProcessing=function(){this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.queueState!==this.QUEUE_RUNNING&&(this.queueState=this.QUEUE_RUNNING,this.processQueue()):this.queueState=this.QUEUE_PAUSED},e.prototype.clearAllPackagesStatus=function(e){var n=this;return this.logger.debug("Clear all packages status for site "+e),this.sitesProvider.getSite(e).then(function(t){return t.getDb().getAllRecords(n.PACKAGES_TABLE).then(function(i){return t.getDb().deleteRecords(n.PACKAGES_TABLE).then(function(){i.forEach(function(t){n.triggerPackageStatusChanged(e,o.a.NOT_DOWNLOADED,t.component,t.componentId)})})})})},e.prototype.clearFilepool=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.deleteRecords(n.FILES_TABLE)})},e.prototype.componentHasFiles=function(e,n,t){var i=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.countRecords(i.LINKS_TABLE,{component:n,componentId:t||""}).then(function(e){if(e<=0)return Promise.reject(null)})})},e.prototype.determinePackagesStatus=function(e,n){return e||(e=o.a.NOT_DOWNLOADABLE),n===o.a.NOT_DOWNLOADED?o.a.NOT_DOWNLOADED:n===o.a.DOWNLOADED&&e===o.a.NOT_DOWNLOADABLE?o.a.DOWNLOADED:n!==o.a.DOWNLOADING||e!==o.a.NOT_DOWNLOADABLE&&e!==o.a.DOWNLOADED?n===o.a.OUTDATED&&e!==o.a.NOT_DOWNLOADED?o.a.OUTDATED:e:o.a.DOWNLOADING},e.prototype.downloadForPoolByUrl=function(e,n,t,i,o,r){var l=this;void 0===t&&(t={});var s=this.getFileIdByUrl(n),a=this.mimeUtils.guessExtensionFromUrl(n),u=void 0===i,c=i||this.getFilePath(e,s,a);return Promise.resolve(c).then(function(i){if(r&&r.fileId!==s)return l.logger.error("Invalid object to update passed"),Promise.reject(null);var a=l.getFileDownloadId(n,i);return l.filePromises[e]&&l.filePromises[e][a]?l.filePromises[e][a]:(l.filePromises[e]||(l.filePromises[e]={}),l.filePromises[e][a]=l.sitesProvider.getSite(e).then(function(a){return a.canDownloadFiles()?l.wsProvider.downloadFile(n,i,u,o).then(function(i){var o=r||{};return o.downloadTime=Date.now(),o.stale=0,o.url=n,o.revision=t.revision,o.timemodified=t.timemodified,o.isexternalfile=t.isexternalfile?1:0,o.repositorytype=t.repositorytype,o.path=i.path,o.extension=i.extension,l.addFileToPool(e,s,o).then(function(){return i.toURL()})}):Promise.reject(null)}).finally(function(){delete l.filePromises[e][a]}),l.filePromises[e][a])})},e.prototype.downloadOrPrefetchFiles=function(e,n,t,i,o,r,l){var s=this,a=[];return n.forEach(function(n){var u,c=n.url||n.fileurl,d=n.timemodified,f={isexternalfile:n.isexternalfile,repositorytype:n.repositorytype};l&&(u=n.filename,"/"!==n.filepath&&(u=n.filepath.substr(1)+u),u=s.textUtils.concatenatePaths(l,u)),a.push(t?s.addToQueueByUrl(e,c,o,r,d,u,void 0,0,f):s.downloadUrl(e,c,i,o,r,d,u,void 0,f))}),this.utils.allPromises(a)},e.prototype.downloadOrPrefetchPackage=function(e,n,t,i,r,l,s,a){var u,c=this,d=this.getPackageId(i,r);return this.packagesPromises[e]&&this.packagesPromises[e][d]?this.packagesPromises[e][d]:(this.packagesPromises[e]||(this.packagesPromises[e]={}),u=this.storePackageStatus(e,o.a.DOWNLOADING,i,r).then(function(){var u=[],d=0;return n.forEach(function(n){var o,l,f,p=n.url||n.fileurl,h={isexternalfile:n.isexternalfile,repositorytype:n.repositorytype},m=0;a&&(f=function(e){e&&e.loaded&&(d+=e.loaded-m,m=e.loaded,a({packageDownload:!0,loaded:d,fileProgress:e}))}),s&&(o=n.filename,"/"!==n.filepath&&(o=n.filepath.substr(1)+o),o=c.textUtils.concatenatePaths(s,o)),l=t?c.addToQueueByUrl(e,p,i,r,n.timemodified,o,void 0,0,h):c.downloadUrl(e,p,!1,i,r,n.timemodified,f,o,h),u.push(l)}),Promise.all(u).then(function(){return c.storePackageStatus(e,o.a.DOWNLOADED,i,r,l)}).catch(function(){return c.setPackagePreviousStatus(e,i,r).then(function(){return Promise.reject(null)})})}).finally(function(){delete c.packagesPromises[e][d]}),this.packagesPromises[e][d]=u,u)},e.prototype.downloadPackage=function(e,n,t,i,o,r,l){return this.downloadOrPrefetchPackage(e,n,!1,t,i,o,r,l)},e.prototype.downloadUrl=function(e,n,t,i,o,r,l,s,a,u){var c=this;void 0===r&&(r=0),void 0===a&&(a={});var d;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(f){return n=f,a=Object.assign({},a),a.timemodified=r||0,a.revision=u||c.getRevisionFromUrl(n),d=c.getFileIdByUrl(n),c.hasFileInPool(e,d).then(function(i){return void 0===i?(c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,n,a,s,l)):c.isFileOutdated(i,a.revision,a.timemodified)&&c.appProvider.isOnline()&&!t?(c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,n,a,s,l,i)):(s?c.getInternalUrlByPath(s):c.getInternalUrlById(e,d)).then(function(e){return e},function(){return c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,n,a,s,l,i)})},function(){return c.notifyFileDownloading(e,d),c.downloadForPoolByUrl(e,n,a,s,l)}).then(function(n){return void 0!==i&&c.addFileLink(e,d,i,o).catch(function(){}),c.notifyFileDownloaded(e,d),n},function(n){return c.notifyFileDownloadError(e,d),Promise.reject(n)})}):Promise.reject(null)},e.prototype.fillExtensionInFile=function(e,n){var t=this;return void 0!==e.extension?Promise.resolve():this.sitesProvider.getSiteDb(n).then(function(n){var i=t.mimeUtils.getFileExtension(e.path);if(!i)return t.logger.debug("Staled file with no extension "+e.fileId),n.updateRecords(t.FILES_TABLE,{stale:1},{fileId:e.fileId});var o=e.fileId;return e.fileId=t.mimeUtils.removeExtension(o),e.extension=i,n.updateRecords(t.FILES_TABLE,e,{fileId:o}).then(function(){if(e.fileId!=o)return n.updateRecords(t.LINKS_TABLE,{fileId:e.fileId},{fileId:o});t.logger.debug("Removed extesion "+i+" from file "+e.fileId)})})},e.prototype.fillMissingExtensionInFiles=function(e){var n=this;return this.logger.debug("Fill missing extensions in files of "+e),this.sitesProvider.getSiteDb(e).then(function(t){return t.getAllRecords(n.FILES_TABLE).then(function(t){var i=[];return t.forEach(function(t){i.push(n.fillExtensionInFile(t,e))}),Promise.all(i)})})},e.prototype.fixComponentId=function(e){if("number"==typeof e)return e;var n=parseInt(e,10);return isNaN(n)?void 0===e||null===e?-1:e:n},e.prototype.fixPluginfileURL=function(e,n){return this.sitesProvider.getSite(e).then(function(e){return e.fixPluginfileURL(n)})},e.prototype.getComponentFiles=function(e,n,t){return e.getRecords(this.LINKS_TABLE,{component:n,componentId:t||""})},e.prototype.getDirectoryUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n),o=t.getFilePath(e,i,"");return t.fileProvider.getDir(o).then(function(e){return e.toURL()})}):Promise.reject(null)},e.prototype.getFileDownloadId=function(e,n){return r.Md5.hashAsciiStr(e+"###"+n)},e.prototype.getFileEventName=function(e,n){return"CoreFilepoolFile:"+e+":"+n},e.prototype.getFileEventNameByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.getFileEventName(e,i)})},e.prototype.getFileIdByUrl=function(e){var n,t=this.removeRevisionFromUrl(e);return-1!==(t=this.textUtils.decodeHTML(this.textUtils.decodeURIComponent(t))).indexOf("/webservice/pluginfile")&&this.urlAttributes.forEach(function(e){t=t.replace(e,"")}),n=this.guessFilenameFromUrl(t),this.addHashToFilename(t,n)},e.prototype.getFileLinks=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecords(t.LINKS_TABLE,{fileId:n})})},e.prototype.getFilePath=function(e,n,t){var i=this.getFilepoolFolderPath(e)+"/"+n;return void 0===t?this.hasFileInPool(e,n).then(function(e){return e.extension&&(i+="."+e.extension),i}).catch(function(){return i}):(t&&(i+="."+t),i)},e.prototype.getFilePathByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.getFilePath(e,i)})},e.prototype.getFilepoolFolderPath=function(e){return this.fileProvider.getSiteFolder(e)+"/"+this.FOLDER},e.prototype.getFilesByComponent=function(e,n,t){var i=this;return this.sitesProvider.getSiteDb(e).then(function(e){return i.getComponentFiles(e,n,t).then(function(n){var t=[],o=[];return n.forEach(function(n){t.push(e.getRecord(i.FILES_TABLE,{fileId:n.fileId}).then(function(e){e&&o.push({url:e.url,path:e.path,extension:e.extension,revision:e.revision,timemodified:e.timemodified})}).catch(function(){}))}),Promise.all(t).then(function(){return o})})})},e.prototype.getFilesSizeByComponent=function(e,n,t){var i=this;return this.getFilesByComponent(e,n,t).then(function(e){var n=[],t=0;return e.forEach(function(e){n.push(i.fileProvider.getFileSize(e.path).then(function(e){t+=e}).catch(function(){}))}),Promise.all(n).then(function(){return t})})},e.prototype.getFileStateByUrl=function(e,n,t,i,r){var l=this;void 0===t&&(t=0);var s;return this.fixPluginfileURL(e,n).then(function(a){return n=a,r=r||l.getRevisionFromUrl(n),s=l.getFileIdByUrl(n),l.hasFileInQueue(e,s).then(function(){return o.a.DOWNLOADING}).catch(function(){var a=l.mimeUtils.guessExtensionFromUrl(n),u=i||l.getFilePath(e,s,a);return Promise.resolve(u).then(function(i){var a=l.getFileDownloadId(n,i);return l.filePromises[e]&&l.filePromises[e][a]?o.a.DOWNLOADING:l.hasFileInPool(e,s).then(function(e){return l.isFileOutdated(e,r,t)?o.a.OUTDATED:o.a.DOWNLOADED}).catch(function(){return o.a.NOT_DOWNLOADED})})})})},e.prototype.getFileUrlByUrl=function(e,n,t,i,o,r,l,s,a,u){var c=this;void 0===o&&(o="url"),void 0===r&&(r=0),void 0===l&&(l=!0),void 0===a&&(a={});var d,f=function(n){c.addToQueueIfNeeded(e,n,t,i,r,l,s,a,u).catch(function(){})};return this.fixPluginfileURL(e,n).then(function(t){return n=t,u=u||c.getRevisionFromUrl(n),d=c.getFileIdByUrl(n),c.hasFileInPool(e,d).then(function(t){var i;return void 0===t?(f(n),i=n):c.isFileOutdated(t,u,r)&&c.appProvider.isOnline()?(f(n),i=n):i=(i="src"===o?c.getInternalSrcById(e,d):c.getInternalUrlById(e,d)).then(function(e){return e}).catch(function(){return c.logger.debug("File "+d+" not found on disk"),c.removeFileById(e,d),f(n),c.appProvider.isOnline()?n:Promise.reject(null)}),i},function(){return f(n),n})})},e.prototype.getInternalSrcById=function(e,n){var t=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,n)).then(function(e){return t.fileProvider.getFile(e).then(function(e){return t.fileProvider.getInternalURL(e)})}):Promise.reject(null)},e.prototype.getInternalUrlById=function(e,n){var t=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,n)).then(function(e){return t.fileProvider.getFile(e).then(function(e){return t.appProvider.isDesktop()?e.toInternalURL():e.toURL()})}):Promise.reject(null)},e.prototype.getInternalUrlByPath=function(e){return this.fileProvider.isAvailable()?this.fileProvider.getFile(e).then(function(e){return e.toURL()}):Promise.reject(null)},e.prototype.getInternalUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.getInternalUrlById(e,i)}):Promise.reject(null)},e.prototype.getPackageData=function(e,n,t){var i=this;return t=this.fixComponentId(t),this.sitesProvider.getSite(e).then(function(e){var o=i.getPackageId(n,t);return e.getDb().getRecord(i.PACKAGES_TABLE,{id:o})})},e.prototype.getPackageDirNameByUrl=function(e){var n,t="";return-1!==(e=this.removeRevisionFromUrl(e)).indexOf("/webservice/pluginfile")&&(this.urlAttributes.forEach(function(n){e=e.replace(n,"")}),(n=this.mimeUtils.guessExtensionFromUrl(e))&&"php"!==n&&(t="."+n)),r.Md5.hashAsciiStr("url:"+e)+t},e.prototype.getPackageDirPathByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getPackageDirNameByUrl(n);return t.getFilePath(e,i,"")})},e.prototype.getPackageDirUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var i=t.getPackageDirNameByUrl(n),o=t.getFilePath(e,i,"");return t.fileProvider.getDir(o).then(function(e){return e.toURL()})}):Promise.reject(null)},e.prototype.getPackageDownloadPromise=function(e,n,t){var i=this.getPackageId(n,t);if(this.packagesPromises[e]&&this.packagesPromises[e][i])return this.packagesPromises[e][i]},e.prototype.getPackageExtra=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.extra})},e.prototype.getPackageId=function(e,n){return r.Md5.hashAsciiStr(e+"#"+this.fixComponentId(n))},e.prototype.getPackagePreviousStatus=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.previous||o.a.NOT_DOWNLOADED}).catch(function(){return o.a.NOT_DOWNLOADED})},e.prototype.getPackageStatus=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.status||o.a.NOT_DOWNLOADED}).catch(function(){return o.a.NOT_DOWNLOADED})},e.prototype.getPluginFileArgs=function(e){if(this.urlUtils.isPluginFileUrl(e)){var n=e.substr(e.indexOf("/pluginfile.php")+16).split("/");if(!(n.length<3))return n}},e.prototype.getQueueDeferred=function(e,n,t,i){if(void 0===t&&(t=!0),!this.queueDeferreds[e]){if(!t)return;this.queueDeferreds[e]={}}if(!this.queueDeferreds[e][n]){if(!t)return;this.queueDeferreds[e][n]=this.utils.promiseDefer()}return i&&(this.queueDeferreds[e][n].onProgress=i),this.queueDeferreds[e][n]},e.prototype.getQueueOnProgress=function(e,n){var t=this.getQueueDeferred(e,n,!1);if(t)return t.onProgress},e.prototype.getQueuePromise=function(e,n,t,i){return void 0===t&&(t=!0),this.getQueueDeferred(e,n,t,i).promise},e.prototype.getRevisionFromFileList=function(e){var n=this,t=0;return e.forEach(function(e){if(e.url||e.fileurl){var i=n.getRevisionFromUrl(e.url||e.fileurl);i>t&&(t=i)}}),t},e.prototype.getRevisionFromUrl=function(e){var n=this.getPluginFileArgs(e);if(!n)return 0;var t=this.pluginFileDelegate.getComponentRevisionRegExp(n);if(!t)return 0;var i=e.match(t);return i&&void 0!==i[1]?parseInt(i[1],10):0},e.prototype.getSrcByUrl=function(e,n,t,i,o,r,l,s,a){return void 0===o&&(o=0),void 0===r&&(r=!0),void 0===s&&(s={}),this.getFileUrlByUrl(e,n,t,i,"src",o,r,l,s,a)},e.prototype.getTimemodifiedFromFileList=function(e){var n=0;return e.forEach(function(e){e.timemodified>n&&(n=e.timemodified)}),n},e.prototype.getUrlByUrl=function(e,n,t,i,o,r,l,s,a){return void 0===o&&(o=0),void 0===r&&(r=!0),void 0===s&&(s={}),this.getFileUrlByUrl(e,n,t,i,"url",o,r,l,s,a)},e.prototype.guessFilenameFromUrl=function(e){var n="";if(-1!==e.indexOf("/webservice/pluginfile")){var t=this.urlUtils.extractUrlParams(e);n=t.file?t.file.substr(t.file.lastIndexOf("/")+1):this.urlUtils.getLastFileWithoutParams(e)}else if(this.urlUtils.isGravatarUrl(e))n="gravatar_"+this.urlUtils.getLastFileWithoutParams(e);else if(this.urlUtils.isThemeImageUrl(e)){var i=e.match(/\/core\/([^\/]*)\//);i&&i[1]&&(n=i[1]),n="default_"+n+"_"+this.urlUtils.getLastFileWithoutParams(e)}else n=this.urlUtils.getLastFileWithoutParams(e);return n=this.mimeUtils.removeExtension(n),this.textUtils.removeSpecialCharactersForFiles(n)},e.prototype.hasFileInPool=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecord(t.FILES_TABLE,{fileId:n}).then(function(e){return void 0===e?Promise.reject(null):e})})},e.prototype.hasFileInQueue=function(e,n){var t=this;return this.appDB.getRecord(this.QUEUE_TABLE,{siteId:e,fileId:n}).then(function(e){return void 0===e?Promise.reject(null):(e.links=t.textUtils.parseJSON(e.links,[]),e)})},e.prototype.invalidateAllFiles=function(e,n){var t=this;return void 0===n&&(n=!0),this.sitesProvider.getSiteDb(e).then(function(e){var i,o;return n&&(i="isexternalfile = ? OR (revision < ? AND timemodified = ?)",o=[0,1,0]),e.updateRecordsWhere(t.FILES_TABLE,{stale:1},i,o)})},e.prototype.invalidateFileByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.sitesProvider.getSiteDb(e).then(function(e){return e.updateRecords(t.FILES_TABLE,{stale:1},{fileId:i})})})},e.prototype.invalidateFilesByComponent=function(e,n,t,i){var o=this;return void 0===i&&(i=!0),this.sitesProvider.getSiteDb(e).then(function(e){return o.getComponentFiles(e,n,t).then(function(n){var t=n.map(function(e){return e.fileId}),r=e.getInOrEqual(t);return r[0]="fileId "+r[0],i&&(r[0]+=" AND (isexternalfile = ? OR (revision < ? AND timemodified = ?))",r[1]=r[1].concat([0,1,0])),e.updateRecordsWhere(o.FILES_TABLE,{stale:1},r[0],r[1])})})},e.prototype.isFileDownloadingByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.hasFileInQueue(e,i)})},e.prototype.isFileOutdated=function(e,n,t){return!!e.stale||n>e.revision||t>e.timemodified},e.prototype.isFileUpdateUnknown=function(e){return!!e.isexternalfile||e.revision<1&&!e.timemodified},e.prototype.notifyFileDeleted=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"deleted"})},e.prototype.notifyFileDownloaded=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"download",success:!0})},e.prototype.notifyFileDownloadError=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"download",success:!1})},e.prototype.notifyFileDownloading=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"downloading"})},e.prototype.notifyFileOutdated=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"outdated"})},e.prototype.prefetchPackage=function(e,n,t,i,o,r,l){return this.downloadOrPrefetchPackage(e,n,!0,t,i,o,r,l)},e.prototype.processQueue=function(){var e=this;(this.queueState!==this.QUEUE_RUNNING?Promise.reject(this.ERR_QUEUE_ON_PAUSE):this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.processImportantQueueItem():Promise.reject(this.ERR_FS_OR_NETWORK_UNAVAILABLE)).then(function(){setTimeout(function(){e.processQueue()},e.QUEUE_PROCESS_INTERVAL)},function(n){n===e.ERR_FS_OR_NETWORK_UNAVAILABLE?e.logger.debug("Filesysem or network unavailable, pausing queue processing."):n===e.ERR_QUEUE_IS_EMPTY&&e.logger.debug("Queue is empty, pausing queue processing."),e.queueState=e.QUEUE_PAUSED})},e.prototype.processImportantQueueItem=function(){var e=this;return this.appDB.getRecords(this.QUEUE_TABLE,void 0,"priority DESC, added ASC",void 0,0,1).then(function(n){var t=n.pop();return t?(t.links=e.textUtils.parseJSON(t.links,[]),e.processQueueItem(t)):Promise.reject(e.ERR_QUEUE_IS_EMPTY)},function(){return Promise.reject(e.ERR_QUEUE_IS_EMPTY)})},e.prototype.processQueueItem=function(e){var n=this,t=e.siteId,i=e.fileId,o=e.url,r={revision:e.revision||void 0,timemodified:e.timemodified||void 0,isexternalfile:e.isexternalfile||void 0,repositorytype:e.repositorytype||void 0},l=e.path||void 0,s=e.links||[];return this.logger.debug("Processing queue item: "+t+", "+i),this.hasFileInPool(t,i).catch(function(){}).then(function(e){if(e&&!r.isexternalfile&&!n.isFileOutdated(e,r.revision,r.timemodified))return n.logger.debug("Queued file already in store, ignoring..."),n.addFileLinks(t,i,s).catch(function(){}),n.removeFromQueue(t,i).catch(function(){}).finally(function(){n.treatQueueDeferred(t,i,!0)}),void n.notifyFileDownloaded(t,i);var a=n.getQueueOnProgress(t,i);return n.downloadForPoolByUrl(t,o,r,l,a,e).then(function(){return n.addFileLinks(t,i,s).catch(function(){}),n.treatQueueDeferred(t,i,!0),n.notifyFileDownloaded(t,i),n.removeFromQueue(t,i).catch(function(){})},function(e){var r=!1;return e&&e.source===o?1===e.code?r=!0:2===e.code?r=!0:3===e.code?r=!0:4===e.code||(r=!0):r=!0,r?(n.logger.debug("Item dropped from queue due to error: "+o,e),n.removeFromQueue(t,i).catch(function(){}).then(function(){n.treatQueueDeferred(t,i,!1),n.notifyFileDownloadError(t,i)})):(n.treatQueueDeferred(t,i,!1),n.notifyFileDownloadError(t,i),Promise.reject(e))})})},e.prototype.removeFromQueue=function(e,n){return this.appDB.deleteRecords(this.QUEUE_TABLE,{siteId:e,fileId:n})},e.prototype.removeFileById=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(i){return Promise.resolve(t.getFilePath(e,n)).then(function(o){var r=[];return r.push(i.deleteRecords(t.FILES_TABLE,{fileId:n})),r.push(i.deleteRecords(t.LINKS_TABLE,{fileId:n})),t.fileProvider.isAvailable()&&r.push(t.fileProvider.removeFile(o).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),Promise.all(r).then(function(){t.notifyFileDeleted(e,n)})})})},e.prototype.removeFilesByComponent=function(e,n,t){var i=this;return this.sitesProvider.getSiteDb(e).then(function(e){return i.getComponentFiles(e,n,t)}).then(function(n){return Promise.all(n.map(function(n){return i.removeFileById(e,n.fileId)}))})},e.prototype.removeFileByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var i=t.getFileIdByUrl(n);return t.removeFileById(e,i)})},e.prototype.removeRevisionFromUrl=function(e){var n=this.getPluginFileArgs(e);return n?this.pluginFileDelegate.removeRevisionFromUrl(e,n):e},e.prototype.setPackagePreviousStatus=function(e,n,t){var i=this;return t=this.fixComponentId(t),this.logger.debug("Set previous status for package "+n+" "+t),this.sitesProvider.getSite(e).then(function(e){var r=i.getPackageId(n,t);return e.getDb().getRecord(i.PACKAGES_TABLE,{id:r}).then(function(l){var s={};return l.status==o.a.DOWNLOADING&&(s.downloadTime=l.previousDownloadTime),s.status=l.previous||o.a.NOT_DOWNLOADED,s.updated=Date.now(),i.logger.debug("Set previous status '"+l.status+"' for package "+n+" "+t),e.getDb().updateRecords(i.PACKAGES_TABLE,s,{id:r}).then(function(){return i.triggerPackageStatusChanged(e.id,s.status,n,t),s.status})})})},e.prototype.shouldDownloadBeforeOpen=function(e,n){return n>=0&&n<=this.DOWNLOAD_THRESHOLD?Promise.resolve():this.appProvider.isDesktop()?Promise.resolve():this.utils.getMimeTypeFromUrl(e).then(function(e){if(-1!=e.indexOf("video")||-1!=e.indexOf("audio"))return Promise.reject(null)})},e.prototype.storePackageStatus=function(e,n,t,i,r){var l=this;return this.logger.debug("Set status '"+n+"' for package "+t+" "+i),i=this.fixComponentId(i),this.sitesProvider.getSite(e).then(function(s){var a,u,c=l.getPackageId(t,i);return n==o.a.DOWNLOADING&&(a=l.timeUtils.timestamp()),s.getDb().getRecord(l.PACKAGES_TABLE,{id:c}).then(function(e){return void 0!==r&&null!==r||(r=e.extra),void 0===a?(a=e.downloadTime,u=e.previousDownloadTime):u=e.downloadTime,e.status}).catch(function(){}).then(function(o){var d={id:c,component:t,componentId:i,status:n,previous:o,updated:Date.now(),downloadTime:a,previousDownloadTime:u,extra:r};return(o===n?Promise.resolve():s.getDb().insertRecord(l.PACKAGES_TABLE,d)).then(function(){l.triggerPackageStatusChanged(e,n,t,i)})})})},e.prototype.treatCSSCode=function(e,n,t,i,o,r){var l,s=this,a=this.domUtils.extractUrlsFromCSS(t),u=[],c=!1;return u.push(this.getFilePathByUrl(e,n).then(function(e){l=e})),a.forEach(function(n){0==n.indexOf("http")&&u.push(s.downloadUrl(e,n,!1,i,o,0,void 0,void 0,void 0,r).then(function(e){e!=n&&(t=t.replace(new RegExp(s.textUtils.escapeForRegex(n),"g"),e),c=!0)}).catch(function(e){s.logger.warn("Error treating file ",n,e)}))}),Promise.all(u).then(function(){if(c)return s.fileProvider.writeFile(l,t)}).then(function(){return t})},e.prototype.treatExtensionInQueue=function(){var e=this;return this.logger.debug("Treat extensions in queue"),this.appDB.getAllRecords(this.QUEUE_TABLE).then(function(n){var t=[];return n.forEach(function(n){var i=n.fileId;n.fileId=e.mimeUtils.removeExtension(i),i!=n.fileId&&t.push(e.appDB.updateRecords(e.QUEUE_TABLE,{fileId:n.fileId},{fileId:i}))}),Promise.all(t)})},e.prototype.treatQueueDeferred=function(e,n,t){this.queueDeferreds[e]&&this.queueDeferreds[e][n]&&(t?this.queueDeferreds[e][n].resolve():this.queueDeferreds[e][n].reject(),delete this.queueDeferreds[e][n])},e.prototype.triggerPackageStatusChanged=function(e,n,t,o){var r={component:t,componentId:this.fixComponentId(o),status:n};this.eventsProvider.trigger(i.a.PACKAGE_STATUS_CHANGED,r,e)},e.prototype.updatePackageDownloadTime=function(e,n,t){var i=this;return t=this.fixComponentId(t),this.sitesProvider.getSite(e).then(function(e){var o=i.getPackageId(n,t);return e.getDb().updateRecords(i.PACKAGES_TABLE,{downloadTime:i.timeUtils.timestamp()},{id:o})})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4);var i=t(13),o=(t(64),t(40)),r=t(137),l=function(){function e(e,n,t,o,r,l,s,a,u,c,d,f){this.sitesProvider=n,this.loginHelper=t,this.contentLinksDelegate=o,this.appProvider=r,this.domUtils=l,this.urlUtils=s,this.translate=a,this.initDelegate=u,this.textUtils=d,this.sitePluginsProvider=f,this.logger=e.getInstance("CoreContentLinksHelperProvider"),c.on(i.a.APP_LAUNCHED_URL,this.handleCustomUrl.bind(this))}return e.prototype.canHandleLink=function(e,n,t){var i=this;return this.contentLinksDelegate.getActionsFor(e,void 0,t).then(function(e){return!!i.getFirstValidAction(e)}).catch(function(){return!1})},e.prototype.getFirstValidAction=function(e){if(e)for(var n=0;n<e.length;n++){var t=e[n];if(t&&t.sites&&t.sites.length)return t}},e.prototype.goInSite=function(e,n,t,i){i=i||this.sitesProvider.getCurrentSiteId(),e&&i==this.sitesProvider.getCurrentSiteId()?e.push(n,t):this.loginHelper.redirect(n,t,i)},e.prototype.goToChooseSite=function(e){this.appProvider.getRootNavController().setRoot("CoreContentLinksChooseSitePage",{url:e})},e.prototype.handleCustomUrl=function(e){var n=this,t=r.a.customurlscheme+"://link";if(-1==e.indexOf(t))return!1;var i,l=this.domUtils.showModalLoading();return e=this.textUtils.decodeURIComponent(e),this.logger.debug("Treating custom URL scheme: "+e),e=e.replace(t+"=",""),(i=this.urlUtils.getUsernameFromUrl(e))&&(e=e.replace(i+"@","")),this.initDelegate.ready().then(function(){return n.sitesProvider.getSiteIdsFromUrl(e,!1,i)}).then(function(t){if(t.length)return l.dismiss(),n.handleLink(e,i).then(function(e){e||n.domUtils.showErrorModal("core.contentlinks.errornoactions",!0)});var r=n.contentLinksDelegate.getSiteUrl(e);return r?n.sitesProvider.checkSite(r).then(function(t){var r,s=n.loginHelper.isSSOLoginNeeded(t.code),a="CoreLoginCredentialsPage",u={siteUrl:t.siteUrl,username:i,urlToOpen:e,siteConfig:t.config},c=!1;if(l.dismiss(),n.sitesProvider.isLoggedIn()){var d=n.translate.instant("core.contentlinks.confirmurlothersite");r=n.domUtils.showConfirm(d).then(function(){if(!s)return(c=n.sitePluginsProvider.hasSitePluginsLoaded)&&n.appProvider.storeRedirect(o.a.NO_SITE_ID,a,u),n.sitesProvider.logout().catch(function(){})})}else r=Promise.resolve();return r.then(function(){s?n.loginHelper.confirmAndOpenBrowserForSSOLogin(t.siteUrl,t.code,t.service,t.config&&t.config.launchurl):c||n.appProvider.getRootNavController().setRoot(a,u)})}).catch(function(e){e&&n.domUtils.showErrorModal(e)}):void n.domUtils.showErrorModal("core.login.invalidsite",!0)}).finally(function(){l.dismiss()}),!0},e.prototype.handleLink=function(e,n,t){var i=this;return this.contentLinksDelegate.getActionsFor(e,void 0,n).then(function(n){var o=i.getFirstValidAction(n);return!!o&&(i.sitesProvider.isLoggedIn()?1==o.sites.length&&o.sites[0]==i.sitesProvider.getCurrentSiteId()?o.action(o.sites[0],t):i.domUtils.showConfirm(i.translate.instant("core.contentlinks.confirmurlothersite")).then(function(){1==o.sites.length?o.action(o.sites[0],t):i.goToChooseSite(e)}).catch(function(){}):1==o.sites.length?o.action(o.sites[0],t):i.goToChooseSite(e),!0)}).catch(function(){return!1})},e}()},,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var i=t(14),o=(t.n(i),t(40)),r=function(){function e(e){this.translate=e,this.FORMAT_REPLACEMENTS={"%a":"ddd","%A":"dddd","%d":"DD","%e":"D","%j":"DDDD","%u":"E","%w":"e","%U":"ww","%V":"WW","%W":"ww","%b":"MMM","%B":"MMMM","%h":"MMM","%m":"MM","%C":"","%g":"GG","%G":"GGGG","%y":"YY","%Y":"YYYY","%H":"HH","%k":"H","%I":"hh","%l":"h","%M":"mm","%p":"A","%P":"a","%r":"hh:mm:ss A","%R":"HH:mm","%S":"ss","%T":"HH:mm:ss","%X":"LTS","%z":"ZZ","%Z":"ZZ","%c":"LLLL","%D":"MM/DD/YY","%F":"YYYY-MM-DD","%s":"X","%x":"L","%n":"\n","%t":"\t","%%":"%"}}return e.prototype.convertPHPToMoment=function(e){if("string"!=typeof e)return"";for(var n="",t=!1,i=0;i<e.length;i++){var o=e[i];"%"==o?(o+=e[++i]||"",t&&(t=!1,n+="]"),n+=void 0!==this.FORMAT_REPLACEMENTS[o]?this.FORMAT_REPLACEMENTS[o]:o):(t||(t=!0,n+="["),n+=o)}return t&&(n+="]"),n},e.prototype.formatTime=function(e){var n,t,i,r,l,s,a;a=(n=Math.abs(e))-(t=Math.floor(n/o.a.SECONDS_YEAR))*o.a.SECONDS_YEAR,a=n-(i=Math.floor(a/o.a.SECONDS_DAY))*o.a.SECONDS_DAY,a-=(r=Math.floor(a/o.a.SECONDS_HOUR))*o.a.SECONDS_HOUR,l=Math.floor(a/o.a.SECONDS_MINUTE);var u=this.translate.instant("core."+(1==(s=a-l*o.a.SECONDS_MINUTE)?"sec":"secs")),c=this.translate.instant("core."+(1==l?"min":"mins")),d=this.translate.instant("core."+(1==r?"hour":"hours")),f=this.translate.instant("core."+(1==i?"day":"days")),p=this.translate.instant("core."+(1==t?"year":"years")),h="",m="",_="",g="",v="";return t&&(h=t+" "+p),i&&(m=i+" "+f),r&&(_=r+" "+d),l&&(g=l+" "+c),s&&(v=s+" "+u),t?h+" "+m:i?m+" "+_:r?_+" "+g:l?g+" "+v:s?v:this.translate.instant("core.now")},e.prototype.formatDuration=function(e,n){n=n||5;var t=i.duration(e,"seconds"),o="";return n&&t.years()>0&&(o+=" "+i.duration(t.years(),"years").humanize(),n--),n&&t.months()>0&&(o+=" "+i.duration(t.months(),"months").humanize(),n--),n&&t.days()>0&&(o+=" "+i.duration(t.days(),"days").humanize(),n--),n&&t.hours()>0&&(o+=" "+i.duration(t.hours(),"hours").humanize(),n--),n&&t.minutes()>0&&(o+=" "+i.duration(t.minutes(),"minutes").humanize(),n--),o.trim()},e.prototype.readableTimestamp=function(){return i(Date.now()).format("YYYYMMDDHHmmSS")},e.prototype.timestamp=function(){return Math.round(Date.now()/1e3)},e.prototype.userDate=function(e,n,t,o,r){return void 0===t&&(t=!0),void 0===o&&(o=!0),void 0===r&&(r=!0),n=this.translate.instant(n||"core.strftimedaydatetime"),o&&(n=n.replace(/%d/g,"%e")),r&&(n=n.replace("%I","%l")),t&&(n=this.convertPHPToMoment(n)),i(e).format(n)},e.prototype.getLocalizedDateFormat=function(e){return i.localeData().longDateFormat(e)},e.prototype.getMidnightForTimestamp=function(e){return e?i(1e3*e).startOf("day").unix():i().startOf("day").unix()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(148);var i=function(){function e(e,n){this.langProvider=e,this.textUtils=n}return e.prototype.addOrRemoveWWW=function(e){return e&&(e=e.match(/http(s)?:\/\/www\./)?e.replace("www.",""):(e=e.replace("https://","https://www.")).replace("http://","http://www.")),e},e.prototype.extractUrlParams=function(e){var n={};return e.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,t,i){return n[t]=void 0!==i?i:"",e}),n},e.prototype.fixPluginfileURL=function(e,n,t){return e?-1!=(e=e.replace(/&amp;/g,"&")).indexOf("token=")?e:this.isPluginFileUrl(e)?(e.match(/\?[^=]+=/)?e+="&":e+="?",0===(e+="token="+n+"&offline=1").indexOf(this.textUtils.concatenatePaths(t,"pluginfile.php"))&&(e=e.replace("/pluginfile","/webservice/pluginfile")),e):e:""},e.prototype.formatURL=function(e){return e=e.trim(),/^http(s)?\:\/\/.*/i.test(e)||(e="https://"+e),e=e.replace(/^http/i,"http"),e=e.replace(/^https/i,"https"),e=e.replace(/\/$/,"")},e.prototype.getDocsUrl=function(e,n){void 0===n&&(n="Mobile_app");var t="https://docs.moodle.org/en/"+n;if(void 0!==e){var i=e.substr(0,3).replace(".","");parseInt(i)>=24&&(t=t.replace("https://docs.moodle.org/","https://docs.moodle.org/"+i+"/"))}return this.langProvider.getCurrentLanguage().then(function(e){return t.replace("/en/","/"+e+"/")}).catch(function(){return t})},e.prototype.getLastFileWithoutParams=function(e){var n=e.substr(e.lastIndexOf("/")+1);return-1!=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),n},e.prototype.getUrlProtocol=function(e){if(e){var n=e.match(/^([^\/:\.\?]*):\/\//);return n&&n[1]?n[1]:void 0}},e.prototype.getUrlScheme=function(e){if(e){var n=e.match(/^([a-z][a-z0-9+\-.]*):/);return n&&n[1]?n[1]:void 0}},e.prototype.getUsernameFromUrl=function(e){if(e.indexOf("@")>-1){var n=e.replace(/.*?:\/\//,"").match(/[^@]*/);if(n&&n.length&&!n[0].match(/[\/|?]/))return n[0]}},e.prototype.isAbsoluteURL=function(e){return/^[^:]{2,}:\/\//i.test(e)||/^(tel:|mailto:|geo:)/.test(e)},e.prototype.isDownloadableUrl=function(e){return this.isPluginFileUrl(e)||this.isThemeImageUrl(e)||this.isGravatarUrl(e)},e.prototype.isGravatarUrl=function(e){return e&&-1!==e.indexOf("gravatar.com/avatar")},e.prototype.isHttpURL=function(e){return/^https?\:\/\/.+/i.test(e)},e.prototype.isPluginFileUrl=function(e){return e&&-1!==e.indexOf("/pluginfile.php")},e.prototype.isThemeImageUrl=function(e){return e&&-1!==e.indexOf("/theme/image.php")},e.prototype.removeProtocolAndWWW=function(e){return e=e.replace(/.*?:\/\//g,""),e=e.replace(/^www./,"")},e.prototype.removeUrlParams=function(e){var n=e.match(/^[^\?]+/);return n&&n[0]},e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(84),t(343),t(282),t(109),t(449),t(70),t(74),t(520),t(707),t(404),t(1391),t(1392),t(149),t(227),t(82),t(188),t(1370),t(1371),t(1372),t(521),t(359),t(280),t(673),t(1393),t(276),t(187);var i=function(){return function(){}}()},function(e,n,t){"use strict";t(0),t(1),t(340),t(132),t(5),t(226),t(291),t(42),t(189),t(3),t(672),t(349),t(1423),t(663),t(352);t.d(n,"a",function(){return i});var i=function(){return function(){}}()},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),t(4),function(){function e(e,n,t,i,o){var r=this;this.masterNav=e,this.when="md",this.isEnabled=!1,this.masterPageName="",this.masterPageIndex=0,this.loadDetailPage=!1,this.masterCanLeaveOverridden=!1,this.ignoreSplitChanged=!1,this.detailPage=null,this.element=n.nativeElement,this.audioCaptureSubscription=t.onAudioCapture.subscribe(function(e){r.ignoreSplitChanged=e}),this.languageChangedSubscription=o.onLangChange.subscribe(function(e){setTimeout(function(){r.side=i.isRTL?"right":"left",r.menu.setElementAttribute("side",r.side)})})}return e.prototype.ngOnInit=function(){this.masterPageName=this.masterNav.getActive().component.name,this.masterPageIndex=this.masterNav.indexOf(this.masterNav.getActive()),this.emptyDetails(),this.handleCanLeave()},e.prototype.getDetailsNav=function(){return this.isEnabled?this.detailNav:this.masterNav},e.prototype.getMasterNav=function(){return this.masterNav},e.prototype.handleCanLeave=function(){var e=this;this.detailsDidEnterSubscription=this.detailNav.viewDidEnter.subscribe(function(n){if(e.isOn()){var t=e.masterNav.getActive();e.masterCanLeaveOverridden&&(t.instance.ionViewCanLeave=e.originalMasterCanLeave,e.originalMasterCanLeave=void 0,e.masterCanLeaveOverridden=!1),n&&n.instance&&n.instance.ionViewCanLeave&&(t.instance.ionViewCanLeave&&(e.originalMasterCanLeave=t.instance.ionViewCanLeave),e.masterCanLeaveOverridden=!0,t.instance.ionViewCanLeave=function(){return Promise.resolve().then(function(){if(e.originalMasterCanLeave){var n=e.originalMasterCanLeave.apply(t.instance);return"boolean"!=typeof n||n?n:Promise.reject(null)}}).then(function(){return n.instance.ionViewCanLeave()})})}})},e.prototype.isOn=function(){return this.isEnabled},e.prototype.push=function(e,n){this.isEnabled?this.detailNav.setRoot(e,n):(this.loadDetailPage={component:e,data:n},this.masterNav.push(e,n))},e.prototype.emptyDetails=function(){this.loadDetailPage=!1,this.detailNav.setRoot("CoreSplitViewPlaceholderPage")},e.prototype.onSplitPaneChanged=function(e){this.ignoreSplitChanged||(this.isEnabled=e,this.masterNav&&this.detailNav&&(e?this.activateSplitView():this.deactivateSplitView()))},e.prototype.activateSplitView=function(){var e=this.masterNav.getActive(),n=e.component.name;this.masterNav.getPrevious()&&this.masterNav.getPrevious().component.name==this.masterPageName&&(n!=this.masterPageName?(this.masterNav.pop(),this.detailNav.setRoot(e.component,e.data)):this.loadDetailPage&&this.detailNav.setRoot(this.loadDetailPage.component,this.loadDetailPage.data),this.loadDetailPage=!1)},e.prototype.deactivateSplitView=function(){var e=this.detailNav.getActive();"CoreSplitViewPlaceholderPage"!=e.component.name&&this.masterNav.insert(this.masterPageIndex+1,e.component,e.data)},e.prototype.ngOnDestroy=function(){this.detailsDidEnterSubscription&&this.detailsDidEnterSubscription.unsubscribe(),this.audioCaptureSubscription.unsubscribe(),this.languageChangedSubscription.unsubscribe()},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.E)())],e)}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(190),t(10),t(6),t(2),t(5),t(3);var i=function(){function e(e,n,t,i,o,r,l,s,a,u,c,d,f,p){this.fileProvider=n,this.sitesProvider=t,this.urlUtils=i,this.textUtils=o,this.utils=r,this.domUtils=l,this.platform=s,this.appProvider=a,this.translate=u,this.network=c,this.zone=d,this.config=f,this.contentLinksHelper=p,this.logger=e.getInstance("CoreUtilsProvider")}return n=e,e.prototype.checkOnlineFrameInOffline=function(e,n){var t=this,i=e.src||e.data;if(i&&i.match(/^https?:\/\//i)&&!this.appProvider.isOnline()){if(e.classList.contains("core-iframe-offline-disabled"))return!0;var o=document.createElement("div");o.setAttribute("text-center",""),o.setAttribute("padding",""),o.classList.add("core-iframe-offline-warning");var r=this.sitesProvider.getCurrentSite(),l=r?r.getInfo().username:void 0;this.contentLinksHelper.canHandleLink(i,void 0,l).then(function(r){if(r){var s=document.createElement("a");if(n)s.style.display="block",s.style.padding="1em",s.style.fontWeight="500",s.style.textAlign="center",s.style.textTransform="uppercase",s.style.cursor="pointer";else{var a=t.config.get("mode");s.setAttribute("ion-button",""),s.classList.add("button","button-"+a,"button-default","button-default-"+a,"button-block","button-block-"+a)}var u=t.translate.instant("core.viewembeddedcontent");s.innerHTML=n?u:'<span class="button-inner">'+u+"</span>",s.onclick=function(e){t.contentLinksHelper.handleLink(i,l),e.preventDefault()},o.appendChild(s)}else o.innerHTML=(n?"":t.domUtils.getConnectionWarningIconHtml())+"<p>"+t.translate.instant("core.networkerroriframemsg")+"</p>";e.parentElement.insertBefore(o,e)}),e.classList.add("core-iframe-offline-disabled"),n&&(e.style.display="none");var s=this.network.onConnect().subscribe(function(){t.zone.run(function(){t.checkOnlineFrameInOffline(e,n)||s.unsubscribe()})});return!0}return e.classList.contains("core-iframe-offline-disabled")&&(e.src=e.src,e.data=e.data,this.domUtils.removeElement(e.parentElement,"div.core-iframe-offline-warning"),e.classList.remove("core-iframe-offline-disabled"),n&&(e.style.display="")),!1},e.prototype.getContentWindowAndDocument=function(e){var n,t=e.contentWindow;try{n=e.contentDocument||t&&t.document}catch(e){}if(!t&&n&&(t=n.defaultView),!t&&e.getSVGDocument){try{n=e.getSVGDocument()}catch(e){}n&&n.defaultView?t=n.defaultView:e.window?t=e.window:e.getWindow&&(t=e.getWindow())}return{window:t,document:n}},e.prototype.redefineWindowOpen=function(e,t,i){var o=this;t&&(t.open=function(n,t){if(!o.urlUtils.getUrlScheme(n)){var i=e.src||e.data;if(!i)return o.logger.warn("Cannot get iframe src to open relative url",n,e),null;var r=o.fileProvider.getFileAndDirectoryFromPath(i);if(!r.directory)return o.logger.warn("Cannot get iframe dir path to open relative url",n,e),null;n=o.textUtils.concatenatePaths(r.directory,n)}return"_self"==t?"object"==e.tagName.toLowerCase()?e.setAttribute("data",n):e.setAttribute("src",n):0===n.indexOf("cdvfile://")||0===n.indexOf("file://")?o.utils.openFile(n).catch(function(e){o.domUtils.showErrorModal(e)}):o.sitesProvider.isLoggedIn()?o.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(n):o.utils.openInBrowser(n),null}),i&&n.FRAME_TAGS.forEach(function(e){Array.from(i.querySelectorAll(e)).forEach(function(e){o.treatFrame(e,!0)})})},e.prototype.treatFrame=function(e,n){var t=this;if(e){this.checkOnlineFrameInOffline(e,n);var i=this.getContentWindowAndDocument(e);this.redefineWindowOpen(e,i.window,i.document),this.treatFrameLinks(e,i.document),e.addEventListener("load",function(){t.checkOnlineFrameInOffline(e,n),i=t.getContentWindowAndDocument(e),t.redefineWindowOpen(e,i.window,i.document),t.treatFrameLinks(e,i.document),i.window&&setTimeout(function(){i.window.dispatchEvent(new Event("resize"))},1e3)})}},e.prototype.treatFrameLinks=function(e,n){var t=this;n&&n.addEventListener("click",function(n){if(!n.defaultPrevented){for(var i=n.target;i&&"A"!==i.tagName;)i=i.parentElement;if(i&&"A"===i.tagName){var o=i,r=t.urlUtils.getUrlScheme(o.href);if(o.href&&(!r||"javascript"!=r))if(r&&"file"!=r&&"filesystem"!=r){n.preventDefault();var l=t.urlUtils.getUrlScheme(e.src||e.data);if(l&&"file"!=l&&"filesystem"!=l&&(!o.target||"_self"==o.target))return void("object"==e.tagName.toLowerCase()?e.setAttribute("data",o.href):e.setAttribute("src",o.href));t.sitesProvider.isLoggedIn()?t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(o.href):t.utils.openInBrowser(o.href)}else"_parent"==o.target||"_top"==o.target||"_blank"==o.target?(n.preventDefault(),t.utils.openFile(o.href).catch(function(e){t.domUtils.showErrorModal(e)})):!t.platform.is("ios")||o.target&&"_self"!=o.target||(n.preventDefault(),"object"==e.tagName.toLowerCase()?e.setAttribute("data",o.href):e.setAttribute("src",o.href))}}})},e.FRAME_TAGS=["iframe","frame","object","embed"],e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){}return e.SECONDS_YEAR=31536e3,e.SECONDS_WEEK=604800,e.SECONDS_DAY=86400,e.SECONDS_HOUR=3600,e.SECONDS_MINUTE=60,e.WIFI_DOWNLOAD_THRESHOLD=104857600,e.DOWNLOAD_THRESHOLD=10485760,e.DONT_SHOW_ERROR="CoreDontShowError",e.NO_SITE_ID="NoSite",e.SETTINGS_RICH_TEXT_EDITOR="CoreSettingsRichTextEditor",e.SETTINGS_NOTIFICATION_SOUND="CoreSettingsNotificationSound",e.SETTINGS_SYNC_ONLY_ON_WIFI="CoreSettingsSyncOnlyOnWifi",e.SETTINGS_DEBUG_DISPLAY="CoreSettingsDebugDisplay",e.SETTINGS_REPORT_IN_BACKGROUND="CoreSettingsReportInBackground",e.WS_TIMEOUT=3e4,e.WS_PREFIX="local_mobile_",e.LOGIN_SSO_CODE=2,e.LOGIN_SSO_INAPP_CODE=3,e.LOGIN_LAUNCH_DATA="CoreLoginLaunchData",e.DOWNLOADED="downloaded",e.DOWNLOADING="downloading",e.NOT_DOWNLOADED="notdownloaded",e.OUTDATED="outdated",e.NOT_DOWNLOADABLE="notdownloadable",e.RESOURCELIB_DISPLAY_AUTO=0,e.RESOURCELIB_DISPLAY_EMBED=1,e.RESOURCELIB_DISPLAY_FRAME=2,e.RESOURCELIB_DISPLAY_NEW=3,e.RESOURCELIB_DISPLAY_DOWNLOAD=4,e.RESOURCELIB_DISPLAY_OPEN=5,e.RESOURCELIB_DISPLAY_POPUP=6,e.FEATURE_GRADE_HAS_GRADE="grade_has_grade",e.FEATURE_GRADE_OUTCOMES="outcomes",e.FEATURE_ADVANCED_GRADING="grade_advanced_grading",e.FEATURE_CONTROLS_GRADE_VISIBILITY="controlsgradevisbility",e.FEATURE_PLAGIARISM="plagiarism",e.FEATURE_COMPLETION_TRACKS_VIEWS="completion_tracks_views",e.FEATURE_COMPLETION_HAS_RULES="completion_has_rules",e.FEATURE_NO_VIEW_LINK="viewlink",e.FEATURE_IDNUMBER="idnumber",e.FEATURE_GROUPS="groups",e.FEATURE_GROUPINGS="groupings",e.FEATURE_MOD_ARCHETYPE="mod_archetype",e.FEATURE_MOD_INTRO="mod_intro",e.FEATURE_MODEDIT_DEFAULT_COMPLETION="modedit_default_completion",e.FEATURE_COMMENT="comment",e.FEATURE_RATE="rate",e.FEATURE_BACKUP_MOODLE2="backup_moodle2",e.FEATURE_SHOW_DESCRIPTION="showdescription",e.FEATURE_USES_QUESTIONS="usesquestions",e.MOD_ARCHETYPE_OTHER=0,e.MOD_ARCHETYPE_RESOURCE=1,e.MOD_ARCHETYPE_ASSIGNMENT=2,e.MOD_ARCHETYPE_SYSTEM=3,e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(4);var i=t(13),o=(t(110),t(16)),r=(t(325),t(56),t(53),t(40)),l=t(14),s=(t.n(l),function(){function e(e,n,t,i,o,r,l,s,a,u,c,d,f,p,h,m,_,g,v,y,b,P){this.courseProvider=e,this.domUtils=n,this.moduleDelegate=t,this.prefetchDelegate=i,this.filepoolProvider=o,this.sitesProvider=r,this.textUtils=l,this.timeUtils=s,this.utils=a,this.translate=u,this.loginHelper=c,this.courseOptionsDelegate=d,this.siteHomeProvider=f,this.eventsProvider=p,this.fileHelper=h,this.appProvider=m,this.fileProvider=_,this.injector=g,this.coursesProvider=v,this.courseOffline=y,this.courseFormatDelegate=b,this.sitePluginsProvider=P,this.courseDwnPromises={}}return e.prototype.addHandlerDataForModules=function(e,n,t,i){var o=this,r=!1;return e.forEach(function(e){e&&o.sectionHasContent(e)&&e.modules&&(r=!0,e.modules.forEach(function(r){r.handlerData=o.moduleDelegate.getModuleDataFor(r.modname,r,n,e.id),r.completiondata&&r.completion>0?(r.completiondata.courseId=n,r.completiondata.courseName=i,r.completiondata.tracking=r.completion,r.completiondata.cmid=r.id,r.completionstatus=r.completiondata):t&&void 0!==t[r.id]&&(r.completiondata=t[r.id],r.completiondata.courseId=n,r.completiondata.courseName=i,r.completionstatus=r.completiondata),r.isStealth=0===r.visibleoncoursepage||r.visible&&!e.visible}))}),r},e.prototype.calculateSectionStatus=function(e,n,t){var i=this;return e.id==o.a.ALL_SECTIONS_ID?Promise.reject(null):this.prefetchDelegate.getModulesStatus(e.modules,n,e.id,t).then(function(n){var t=i.getSectionDownloadId(e);return i.prefetchDelegate.isBeingDownloaded(t)&&(n.status=r.a.DOWNLOADING),e.showDownload=n.status===r.a.NOT_DOWNLOADED,e.showRefresh=n.status===r.a.OUTDATED||!i.prefetchDelegate.canCheckUpdates()&&n.status===r.a.DOWNLOADED,n.status===r.a.DOWNLOADING&&i.prefetchDelegate.isBeingDownloaded(e.id)?(e.isDownloading=!0,i.prefetchDelegate.setOnProgress(t,function(n){e.count=n.count,e.total=n.total})):(e.isDownloading=!1,e.total=0),n})},e.prototype.calculateSectionsStatus=function(e,n,t){var i,l,s=this,a=[];return e.forEach(function(e){e.id===o.a.ALL_SECTIONS_ID?(i=e,e.isCalculating=!0):(e.isCalculating=!0,a.push(s.calculateSectionStatus(e,n,t).then(function(e){l=s.filepoolProvider.determinePackagesStatus(l,e.status)}).finally(function(){e.isCalculating=!1})))}),Promise.all(a).then(function(){i&&(i.showDownload=l===r.a.NOT_DOWNLOADED,i.showRefresh=l===r.a.OUTDATED||!s.prefetchDelegate.canCheckUpdates()&&l===r.a.DOWNLOADED,i.isDownloading=l===r.a.DOWNLOADING)}).finally(function(){i&&(i.isCalculating=!1)})},e.prototype.confirmAndPrefetchCourse=function(e,n,t,i){var o=this,r=e.prefetchCourseIcon,l=e.title,s=this.sitesProvider.getCurrentSiteId();return e.prefetchCourseIcon="spinner",e.title="core.downloading",(t?Promise.resolve(t):this.courseProvider.getSections(n.id,!1,!0)).then(function(t){return o.confirmDownloadSizeSection(n.id,void 0,t,!0).then(function(){return(i?Promise.resolve(i):o.courseOptionsDelegate.getHandlersToDisplay(o.injector,n)).then(function(e){return o.prefetchCourse(n,t,e,s)}).then(function(){return!0})},function(n){return e.prefetchCourseIcon=r,e.title=l,Promise.reject(n)})})},e.prototype.confirmAndPrefetchCourses=function(e,n){var t=this,i=this.sitesProvider.getCurrentSiteId();return this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var o=[],r=e.length,l=0;return e.forEach(function(e){var s,a,u=[],c=!0;u.push(t.courseProvider.getSections(e.id,!1,!0).then(function(e){s=e})),u.push(t.courseOptionsDelegate.getHandlersToDisplay(t.injector,e).then(function(e){a=e})),o.push(Promise.all(u).then(function(){return t.prefetchCourse(e,s,a,i)}).catch(function(e){return c=!1,Promise.reject(e)}).finally(function(){l++,n&&n({count:l,total:r,courseId:e.id,success:c})}))}),n&&n({count:0,total:r,success:!0}),t.utils.allPromises(o)})},e.prototype.confirmAndRemoveFiles=function(e,n){var t=this;return this.domUtils.showConfirm(this.translate.instant("core.course.confirmdeletemodulefiles")).then(function(){return t.prefetchDelegate.removeModuleFiles(e,n)}).catch(function(e){e&&t.domUtils.showErrorModal(e)})},e.prototype.confirmDownloadSizeSection=function(e,n,t,i){var r,l=this;if(n&&n.id!=o.a.ALL_SECTIONS_ID)r=this.prefetchDelegate.getDownloadSize(n.modules,e);else{var s=[],a={size:0,total:!0};t.forEach(function(n){n.id!=o.a.ALL_SECTIONS_ID&&s.push(l.prefetchDelegate.getDownloadSize(n.modules,e).then(function(e){a.total=a.total&&e.total,a.size+=e.size}))}),r=Promise.all(s).then(function(){return a})}return r.then(function(e){return l.domUtils.confirmDownloadSize(e,void 0,void 0,void 0,void 0,i)})},e.prototype.contextMenuPrefetch=function(e,n,t){var i=this,o=e.prefetchStatusIcon;return e.prefetchStatusIcon="spinner",this.prefetchDelegate.getModuleDownloadSize(n,t,!0).then(function(e){return i.domUtils.confirmDownloadSize(e).then(function(){return i.prefetchDelegate.prefetchModule(n,t,!0)})}).catch(function(n){e.prefetchStatusIcon=o,e.isDestroyed||i.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)})},e.prototype.determineCoursesStatus=function(e){var n=this,t=[],i=this.sitesProvider.getCurrentSiteId();return e.forEach(function(e){t.push(n.courseProvider.getCourseStatus(e.id,i))}),Promise.all(t).then(function(e){for(var t=e[0],i=1;i<e.length;i++)t=n.filepoolProvider.determinePackagesStatus(t,e[i]);return t})},e.prototype.downloadModuleAndOpenFile=function(e,n,t,i,o,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();return(o?Promise.resolve(o):this.courseProvider.loadModuleContents(e,n).then(function(){o=e.contents})).then(function(){return o&&o.length?s.sitesProvider.getSite(l):Promise.reject(null)}).then(function(a){var u=o[0],c=s.fileHelper.getFileUrl(u);if(s.fileHelper.shouldOpenInBrowser(u)){if(s.appProvider.isOnline()){var d=a.fixPluginfileURL(c).replace("&offline=1","");return d=d.replace(/forcedownload=\d+&/,""),d=d.replace(/[\?|\&]forcedownload=\d+/,""),s.utils.openInBrowser(d),void(s.fileProvider.isAvailable()&&s.downloadModule(e,n,t,i,o,l))}return s.filepoolProvider.getInternalUrlByUrl(l,c).then(function(e){return s.utils.openFile(e)}).catch(function(e){return Promise.reject(s.translate.instant("core.networkerrormsg"))})}return s.downloadModuleWithMainFileIfNeeded(e,n,t,i,o,l).then(function(a){return 0===a.path.indexOf("http")?(a.path=a.path+"#moodlemobile-embedded",s.utils.openOnlineFile(a.path).catch(function(u){if(!s.fileProvider.isAvailable())return Promise.reject(u);if(a.status===r.a.DOWNLOADING)return Promise.reject(s.translate.instant("core.erroropenfiledownloading"));return(a.status===r.a.NOT_DOWNLOADED?s.downloadModule(e,n,t,i,o,l).then(function(){return s.filepoolProvider.getInternalUrlByUrl(l,c)}):s.filepoolProvider.getInternalUrlByUrl(l,c)).then(function(e){return s.utils.openFile(e)})})):s.utils.openFile(a.path)})})},e.prototype.downloadModuleWithMainFileIfNeeded=function(e,n,t,i,o,l){var s=this;if(l=l||this.sitesProvider.getCurrentSiteId(),!o||!o.length)return Promise.reject(null);var a=o[0],u=this.fileHelper.getFileUrl(a),c=this.fileHelper.getFileTimemodified(a),d={fixedUrl:void 0,path:void 0,status:void 0};return this.sitesProvider.getSite(l).then(function(f){var p=f.fixPluginfileURL(u);return d.fixedUrl=p,s.fileProvider.isAvailable()?s.filepoolProvider.getPackageStatus(l,t,i).then(function(f){d.status=f;var h=s.appProvider.isWifi(),m=s.appProvider.isOnline();return f===r.a.DOWNLOADED?s.filepoolProvider.getInternalUrlByUrl(l,u).catch(function(e){return s.filepoolProvider.storePackageStatus(l,r.a.NOT_DOWNLOADED,t,i).then(function(){return Promise.reject(e)})}):f!==r.a.DOWNLOADING||s.appProvider.isDesktop()?m||f!==r.a.NOT_DOWNLOADED?s.filepoolProvider.shouldDownloadBeforeOpen(p,a.filesize).then(function(){return s.downloadModule(e,n,t,i,o,l).then(function(){return s.filepoolProvider.getInternalUrlByUrl(l,u)})},function(){return h&&s.downloadModule(e,n,t,i,o,l),!s.fileHelper.isStateDownloaded(f)||m?p:s.filepoolProvider.getUrlByUrl(l,u,t,i,c,!1,!1,a)}):Promise.reject(s.translate.instant("core.networkerrormsg")):p}).then(function(e){return d.path=e,d}):(d.path=p,d)})},e.prototype.downloadModule=function(e,n,t,i,o,r){var l=this.prefetchDelegate.getPrefetchHandlerFor(e);return l?l.download?l.download(e,n):l.prefetch(e,n,!0):(o=o||e.contents,this.filepoolProvider.downloadOrPrefetchFiles(r,o,!1,!1,t,i))},e.prototype.fillContextMenu=function(e,n,t,o,l){var s=this;return this.getModulePrefetchInfo(n,t,o,l).then(function(o){e.size=o.size>0?o.sizeReadable:0,e.prefetchStatusIcon=o.statusIcon,o.status!=r.a.NOT_DOWNLOADABLE&&(e.prefetchText=o.downloadTime>0?s.translate.instant("core.lastdownloaded")+": "+o.downloadTimeReadable:s.translate.instant("core.download")),void 0===e.contextMenuStatusObserver&&l&&(e.contextMenuStatusObserver=s.eventsProvider.on(i.a.PACKAGE_STATUS_CHANGED,function(i){i.componentId==n.id&&i.component==l&&s.fillContextMenu(e,n,t,!1,l)},s.sitesProvider.getCurrentSiteId()))})},e.prototype.initPrefetchCoursesIcons=function(e,n){var t=this;return!e||e.length<2?(n.icon="",Promise.resolve(n)):this.determineCoursesStatus(e).then(function(e){var i=t.getCourseStatusIconAndTitleFromStatus(e).icon;return"spinner"==i&&(i="cloud-download"),n.icon=i,n})},e.prototype.loadOfflineCompletion=function(e,n,t){var i=this;return this.courseOffline.getCourseManualCompletions(e,t).then(function(e){if(e&&e.length){var t=e.length,o=0;e=i.utils.arrayToObject(e,"cmid");for(var r=0;r<n.length;r++){var l=n[r];if(l.modules&&l.modules.length)for(var s=0;s<l.modules.length;s++){var a=l.modules[s],u=e[a.id];if(u&&void 0!==a.completiondata&&u.timecompleted>=1e3*a.completiondata.timecompleted&&(a.completiondata.state=u.completed,a.completiondata.offline=!0,++o==t))break}}}})},e.prototype.prefetchCourses=function(e,n){return n.icon="spinner",n.badge="",this.confirmAndPrefetchCourses(e,function(e){n.badge=e.count+" / "+e.total}).then(function(){n.icon="refresh"}).finally(function(){n.badge=""})},e.prototype.getCourseDownloadPromise=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[n]&&this.courseDwnPromises[n][e]},e.prototype.getCourseStatusIconAndTitle=function(e,n){var t=this;return this.courseProvider.getCourseStatus(e,n).then(function(e){return t.getCourseStatusIconAndTitleFromStatus(e)})},e.prototype.getCourseStatusIconAndTitleFromStatus=function(e){return e==r.a.DOWNLOADED?{icon:"refresh",title:"core.course.refreshcourse"}:e==r.a.DOWNLOADING?{icon:"spinner",title:"core.downloading"}:{icon:"cloud-download",title:"core.course.downloadcourse"}},e.prototype.getModuleCourseIdByInstance=function(e,n,t){var i=this;return this.courseProvider.getModuleBasicInfoByInstance(e,n,t).then(function(e){return e.course}).catch(function(e){return i.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},e.prototype.getModulePrefetchInfo=function(e,n,t,i){var o=this,s={},a=this.sitesProvider.getCurrentSiteId(),u=[];return t&&this.prefetchDelegate.invalidateModuleStatusCache(e),u.push(this.prefetchDelegate.getModuleDownloadedSize(e,n).then(function(e){s.size=e,s.sizeReadable=o.textUtils.bytesToSize(e,2)})),u.push(this.prefetchDelegate.getModuleStatus(e,n).then(function(e){switch(s.status=e,e){case r.a.NOT_DOWNLOADED:s.statusIcon="cloud-download";break;case r.a.DOWNLOADING:s.statusIcon="spinner";break;case r.a.OUTDATED:s.statusIcon="refresh";break;case r.a.DOWNLOADED:if(!o.prefetchDelegate.canCheckUpdates()){s.statusIcon="refresh";break}default:s.statusIcon=""}})),u.push(this.filepoolProvider.getPackageData(a,i,e.id).then(function(e){if(e&&e.downloadTime&&(e.status==r.a.OUTDATED||e.status==r.a.DOWNLOADED)){var n=o.timeUtils.timestamp();s.downloadTime=e.downloadTime,s.downloadTimeReadable=n-e.downloadTime<604800?l(1e3*e.downloadTime).fromNow():l(1e3*e.downloadTime).calendar()}}).catch(function(){s.downloadTime=0})),Promise.all(u).then(function(){return s})},e.prototype.getSectionDownloadId=function(e){return"Section-"+e.id},e.prototype.navigateToModule=function(e,n,t,i,o){var r=this;n=n||this.sitesProvider.getCurrentSiteId();var l,s=this.domUtils.showModalLoading();return(t&&i?Promise.resolve():t?this.courseProvider.getModuleSectionId(e,n).then(function(e){i=e}):this.courseProvider.getModuleBasicInfo(e,n).then(function(e){t=e.course,i=e.section})).then(function(){return t=Number(t),i=Number(i),r.sitesProvider.getSite(n)}).then(function(s){return l=s,r.courseProvider.getModule(e,t,i,!1,!1,n,o)}).then(function(e){var o={course:{id:t},module:e,sectionId:i};if(e.handlerData=r.moduleDelegate.getModuleDataFor(e.modname,e,t,i),t==l.getSiteHomeId())return r.siteHomeProvider.isAvailable().then(function(){r.loginHelper.redirect("CoreSiteHomeIndexPage",o,n)});r.loginHelper.redirect("CoreCourseSectionPage",o,n)}).catch(function(e){r.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){s.dismiss()})},e.prototype.openModule=function(e,n,t,i){return n.handlerData||(n.handlerData=this.moduleDelegate.getModuleDataFor(n.modname,n,t,i)),!(!n.handlerData||!n.handlerData.action)&&(n.handlerData.action(new Event("click"),e,n,t,{animate:!1}),!0)},e.prototype.prefetchCourse=function(e,n,t,i){var l=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[i]&&this.courseDwnPromises[i][e.id]?this.courseDwnPromises[i][e.id]:(this.courseDwnPromises[i]||(this.courseDwnPromises[i]={}),this.courseDwnPromises[i][e.id]=this.courseProvider.setCourseStatus(e.id,r.a.DOWNLOADING,i).then(function(){var i=[],r=n[0];n[0].id!=o.a.ALL_SECTIONS_ID&&(r={id:o.a.ALL_SECTIONS_ID}),i.push(l.prefetchSection(r,e.id,n)),t.forEach(function(n){n.prefetch&&i.push(n.prefetch(e))}),l.coursesProvider.isGetCoursesByFieldAvailable()&&i.push(l.coursesProvider.getCoursesByField("id",e.id));var s=n.find(function(e){return e.modules&&e.modules.length>0});return s&&void 0!==s.modules[0].completion||i.push(l.courseProvider.getActivitiesCompletionStatus(e.id)),l.utils.allPromises(i)}).then(function(){return l.courseProvider.setCourseStatus(e.id,r.a.DOWNLOADED,i)}).catch(function(n){return l.courseProvider.setCoursePreviousStatus(e.id,i).then(function(){return Promise.reject(n)})}).finally(function(){delete l.courseDwnPromises[i][e.id]}),this.courseDwnPromises[i][e.id])},e.prototype.prefetchModule=function(e,n,t,i,o){return this.domUtils.confirmDownloadSize(t).then(function(){return(o?e.invalidateContent(n.id,i):Promise.resolve()).catch(function(){}).then(function(){return e.prefetch(n,i,!0)})})},e.prototype.prefetchSection=function(e,n,t){var i=this;if(e.id!=o.a.ALL_SECTIONS_ID)return this.prefetchSingleSectionIfNeeded(e,n).then(function(){return i.calculateSectionStatus(e,n)});var l,s=[];return e.isDownloading=!0,t.forEach(function(e){e.id!=o.a.ALL_SECTIONS_ID&&s.push(i.prefetchSingleSectionIfNeeded(e,n).then(function(){return i.calculateSectionStatus(e,n).then(function(e){l=i.filepoolProvider.determinePackagesStatus(l,e.status)})}))}),this.utils.allPromises(s).then(function(){e.showDownload=l===r.a.NOT_DOWNLOADED,e.showRefresh=l===r.a.OUTDATED||!i.prefetchDelegate.canCheckUpdates()&&l===r.a.DOWNLOADED,e.isDownloading=l===r.a.DOWNLOADING}).finally(function(){e.isDownloading=!1})},e.prototype.prefetchSingleSectionIfNeeded=function(e,n){var t=this;return e.id==o.a.ALL_SECTIONS_ID?Promise.resolve():e.hiddenbynumsections?Promise.resolve():(e.isDownloading=!0,this.prefetchDelegate.getModulesStatus(e.modules,n,e.id).then(function(i){if(i.status!=r.a.DOWNLOADED&&i.status!=r.a.NOT_DOWNLOADABLE)return t.prefetchSingleSection(e,i,n)},function(n){return e.isDownloading=!1,Promise.reject(n)}))},e.prototype.prefetchSingleSection=function(e,n,t){if(e.id==o.a.ALL_SECTIONS_ID)return Promise.resolve();if(e.total>0)return Promise.resolve();var i=n[r.a.OUTDATED].concat(n[r.a.NOT_DOWNLOADED]).concat(n[r.a.DOWNLOADING]),l=this.getSectionDownloadId(e);return e.isDownloading=!0,this.prefetchDelegate.prefetchModules(l,i,t,function(n){e.count=n.count,e.total=n.total})},e.prototype.sectionHasContent=function(e){return!e.hiddenbynumsections&&(void 0!==e.availabilityinfo&&""!=e.availabilityinfo||""!=e.summary||e.modules&&e.modules.length>0)},e.prototype.openCourse=function(e,n){var t=this;if(this.sitePluginsProvider.sitePluginPromiseExists("format_"+n.format)){var o=this.domUtils.showModalLoading();this.sitePluginsProvider.sitePluginLoaded("format_"+n.format).then(function(){if(t.sitePluginsProvider.sitePluginsFinishedLoading)o.dismiss(),t.courseFormatDelegate.openCourse(e,n);else var r=t.eventsProvider.on(i.a.SITE_PLUGINS_LOADED,function(){o.dismiss(),t.courseFormatDelegate.openCourse(e,n),r&&r.off()})}).catch(function(){o.dismiss(),t.domUtils.showErrorModal("core.courses.errorloadplugins",!0)})}else this.courseFormatDelegate.openCourse(e,n)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(4),t(13)),l=t(38),s=t(189),a=t(226),u=(t(35),function(){function e(e,n,t,i,r,l,s,a,u,c,d,f,p,h,m,_,g){this.sitesProvider=n,this.domUtils=t,this.textUtils=i,this.translate=r,this.platform=l,this.utils=s,this.urlUtils=a,this.loggerProvider=u,this.filepoolProvider=c,this.appProvider=d,this.contentLinksHelper=f,this.navCtrl=p,this.content=h,this.svComponent=m,this.iframeUtils=_,this.eventsProvider=g,this.adaptImg=!0,this.element=e.nativeElement,this.element.classList.add("opacity-hide"),this.afterRender=new o.r,this.element.addEventListener("click",this.elementClicked.bind(this))}return e.prototype.ngOnChanges=function(e){e.text&&(this.hideShowMore(),this.formatAndRenderContents())},e.prototype.addExternalContent=function(e){var n=new a.a(e,this.loggerProvider,this.filepoolProvider,this.platform,this.sitesProvider,this.domUtils,this.urlUtils,this.appProvider,this.utils);n.component=this.component,n.componentId=this.componentId,n.siteId=this.siteId,n.ngAfterViewInit()},e.prototype.addMediaAdaptClass=function(e){e.classList.add("core-media-adapt-width")},e.prototype.adaptImage=function(e,n){var t=this.getElementWidth(n),i=document.createElement("span"),o=n.attributes.getNamedItem("width"),r=parseInt(o&&o.value);isNaN(r)||(n.style.width=o.value.indexOf("%")<0?r+"px":r+"%"),i.classList.add("core-adapted-img-container"),i.style.cssFloat=n.style.cssFloat,n.classList.contains("atto_image_button_right")?i.classList.add("atto_image_button_right"):n.classList.contains("atto_image_button_left")?i.classList.add("atto_image_button_left"):n.classList.contains("atto_image_button_text-top")?i.classList.add("atto_image_button_text-top"):n.classList.contains("atto_image_button_middle")?i.classList.add("atto_image_button_middle"):n.classList.contains("atto_image_button_text-bottom")&&i.classList.add("atto_image_button_text-bottom"),this.domUtils.wrapElement(n,i),t>e&&this.addMagnifyingGlass(i,n)},e.prototype.addMagnifyingGlass=function(e,n){var t=this,i=this.textUtils.escapeHTML(n.getAttribute("src")),o=this.textUtils.escapeHTML(this.translate.instant("core.openfullimage")),r=document.createElement("a");r.classList.add("core-image-viewer-icon"),r.setAttribute("aria-label",o),r.innerHTML='<ion-icon name="search" class="icon icon-md ion-md-search"></ion-icon>',r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.domUtils.viewImage(i,n.getAttribute("alt"),t.component,t.componentId)}),e.appendChild(r)},e.prototype.calculateHeight=function(){var e=this.element.style.maxHeight;this.element.style.maxHeight=null;var n=this.getElementHeight(this.element);this.element.style.maxHeight=e,!n||n>this.maxHeight?this.showMoreDisplayed||this.displayShowMore():this.showMoreDisplayed&&this.hideShowMore()},e.prototype.displayShowMore=function(){var e=this.utils.isTrueOrOne(this.fullOnClick)||!1,n=document.createElement("div");n.classList.add("core-show-more"),n.innerHTML=this.translate.instant("core.showmore"),this.element.appendChild(n),e&&this.element.classList.add("core-expand-in-fullview"),this.element.classList.add("core-text-formatted"),this.element.classList.add("core-shortened"),this.element.style.maxHeight=this.maxHeight+"px",this.showMoreDisplayed=!0},e.prototype.elementClicked=function(e){if(!e.defaultPrevented){var n=this.utils.isTrueOrOne(this.fullOnClick)||!1;(n||this.showMoreDisplayed)&&(e.preventDefault(),e.stopPropagation(),n?this.textUtils.expandText(this.fullTitle||this.translate.instant("core.description"),this.text,this.component,this.componentId):this.element.classList.toggle("core-shortened"))}},e.prototype.finishRender=function(){this.element.classList.remove("opacity-hide"),this.afterRender.emit()},e.prototype.formatAndRenderContents=function(){var e=this;if(!this.text)return this.element.innerHTML="",void this.finishRender();this.maxHeight&&!this.element.getAttribute("maxHeight")&&this.element.setAttribute("maxHeight",String(this.maxHeight)),this.element.getAttribute("singleLine")||this.element.setAttribute("singleLine",String(this.utils.isTrueOrOne(this.singleLine))),this.text=this.text?this.text.trim():"",this.formatContents().then(function(n){e.element.classList.add("core-disable-media-adapt"),e.element.innerHTML="",e.maxHeight&&""!=n.innerHTML?(e.domUtils.moveChildren(n,e.element),e.calculateHeight(),e.domUtils.waitForImages(e.element).then(function(n){n&&e.calculateHeight()}),e.loadingChangedListener||(e.loadingChangedListener=e.eventsProvider.on(r.a.CORE_LOADING_CHANGED,function(n){n.loaded&&e.domUtils.closest(e.element.parentElement,"#"+n.uniqueId)&&e.calculateHeight()}))):e.domUtils.moveChildren(n,e.element),e.element.classList.remove("core-disable-media-adapt"),e.finishRender()})},e.prototype.formatContents=function(){var e,n=this;return this.sitesProvider.getSite(this.siteId).catch(function(){}).then(function(t){return e=t,n.textUtils.formatText(n.text,n.utils.isTrueOrOne(n.clean),n.utils.isTrueOrOne(n.singleLine))}).then(function(t){var i,o,r,a,u,c,d,f,p,h=document.createElement("div"),m=e&&e.isVersionGreaterEqualThan(["3.3.4","3.4"]);if(h.innerHTML=t,i=Array.from(h.querySelectorAll("img")),o=Array.from(h.querySelectorAll("a")),r=Array.from(h.querySelectorAll("audio")),a=Array.from(h.querySelectorAll("video")),u=Array.from(h.querySelectorAll("iframe")),c=Array.from(h.querySelectorAll(".button")),d=Array.from(h.querySelectorAll("*[style]")),f=Array.from(h.querySelectorAll("button,input,select,textarea")),p=Array.from(h.querySelectorAll(l.a.FRAME_TAGS.join(",").replace(/iframe,?/,""))),o.forEach(function(e){var t=new s.a(e,n.domUtils,n.utils,n.sitesProvider,n.urlUtils,n.contentLinksHelper,n.navCtrl,n.content,n.svComponent);t.capture=!0,t.ngOnInit(),n.addExternalContent(e)}),i&&i.length>0){var _=n.getElementWidth(n.element)||100;i.forEach(function(e){n.addMediaAdaptClass(e),n.addExternalContent(e),n.utils.isTrueOrOne(n.adaptImg)&&!e.classList.contains("icon")&&n.adaptImage(_,e)})}return r.forEach(function(e){n.treatMedia(e)}),a.forEach(function(e){n.treatVideoFilters(e),n.treatMedia(e)}),u.forEach(function(t){n.treatIframe(t,e,m)}),c.forEach(function(e){e.querySelector("a")&&e.classList.add("core-button-with-inner-link")}),d.forEach(function(e){"A"!=e.tagName&&"IMG"!=e.tagName&&"AUDIO"!=e.tagName&&"VIDEO"!=e.tagName&&"SOURCE"!=e.tagName&&"TRACK"!=e.tagName&&n.addExternalContent(e)}),f.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})}),p.forEach(function(e){n.iframeUtils.treatFrame(e)}),h})},e.prototype.getElementWidth=function(e){var n=this.domUtils.getElementWidth(e);if(!n){var t=this.domUtils.getElementWidth(e.parentNode,!0,!1,!1,!0),i=getComputedStyle(e,null).display;e.style.display="inline-block",n=this.domUtils.getElementWidth(e),t>0&&(!n||n>t)&&(n=t),e.style.display=i}return n},e.prototype.getElementHeight=function(e){return this.domUtils.getElementHeight(e)||0},e.prototype.hideShowMore=function(){var e=this.element.querySelector("div.core-show-more");e&&e.remove(),this.element.classList.remove("core-expand-in-fullview"),this.element.classList.remove("core-text-formatted"),this.element.classList.remove("core-shortened"),this.element.style.maxHeight=null,this.showMoreDisplayed=!1},e.prototype.treatVideoFilters=function(e){if(e.classList.contains("video-js")){var n=this.textUtils.parseJSON(e.getAttribute("data-setup")||e.getAttribute("data-setup-lazy")||"{}"),t=n.techOrder&&n.techOrder[0]&&"youtube"==n.techOrder[0]&&this.parseYoutubeUrl(n.sources&&n.sources[0]&&n.sources[0].src);if(t&&t.videoId){var i=document.createElement("iframe");i.id=e.id,i.src="https://www.youtube.com/embed/"+t.videoId,i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","1"),i.width="100%",i.height="300",e.parentNode.replaceChild(i,e),this.iframeUtils.treatFrame(i)}}},e.prototype.treatMedia=function(e){var n=this;this.addMediaAdaptClass(e),this.addExternalContent(e);var t=Array.from(e.querySelectorAll("source")),i=Array.from(e.querySelectorAll("track"));t.forEach(function(e){e.setAttribute("target-src",e.getAttribute("src")),e.removeAttribute("src"),n.addExternalContent(e)}),i.forEach(function(e){n.addExternalContent(e)}),e.addEventListener("click",function(e){e.stopPropagation()})},e.prototype.treatIframe=function(e,n,t){var i=this,o=e.src,r=this.sitesProvider.getCurrentSite();if(this.addMediaAdaptClass(e),r&&r.containsUrl(o))r.getAutoLoginUrl(o,!1).then(function(n){e.src=n,i.iframeUtils.treatFrame(e)});else{if(o&&t){var l=e.src.match(/https?:\/\/player\.vimeo\.com\/video\/([0-9]+)/);if(l&&l[1]){var s=this.textUtils.concatenatePaths(n.getURL(),"/media/player/vimeo/wsplayer.php?video=")+l[1]+"&token="+n.getToken(),a=void 0,u=void 0;e.width?a=e.width:(a=this.getElementWidth(e))||(a=window.innerWidth),e.height?u=e.height:(u=this.getElementHeight(e))||(u=a),e.src=s+"&width="+a+"&height="+u,e.width||(e.width=a),e.height||(e.height=u),e.parentElement.classList.contains("embed-responsive")&&e.addEventListener("load",function(){if(e.contentDocument){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML="iframe {width: 100%;height: 100%;}",e.contentDocument.head.appendChild(n)}})}}this.iframeUtils.treatFrame(e)}},e.prototype.parseYoutubeUrl=function(e){var n={videoId:null,listId:null,start:null};if(!e)return n;var t=(e=this.textUtils.decodeHTML(e)).match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length&&(n.videoId=t[2]),(t=e.match(/[?&]list=([^#\&\?]+)/))&&t[1]&&(n.listId=t[1]),(t=e.match(/[?&]start=(\d+)/))&&t[1]?n.start=parseInt(t[1],10):(t=e.match(/[?&]t=(\d+h)?(\d+m)?(\d+s)?/))&&(n.start=(t[1]?3600*parseInt(t[1],10):0)+(t[2]?60*parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0)),n},e=Object(i.__decorate)([Object(i.__param)(12,Object(o.E)()),Object(i.__param)(13,Object(o.E)()),Object(i.__param)(14,Object(o.E)())],e)}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.utils=t,this.filepoolProvider=i,this.ROOT_CACHE_KEY="mmUser:",this.USERS_TABLE="users",this.tablesSchema=[{name:this.USERS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"fullname",type:"TEXT"},{name:"profileimageurl",type:"TEXT"}]}],this.logger=e.getInstance("CoreUserProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.changeProfilePicture=function(e,n){var t={draftitemid:e,delete:0,userid:n};return this.sitesProvider.getCurrentSite().write("core_user_update_picture",t).then(function(e){return e.success?e.profileimageurl:Promise.reject(null)})},e.prototype.deleteStoredUser=function(e,n){var t=this;if(isNaN(e))return Promise.reject(null);var i=[];return n=n||this.sitesProvider.getCurrentSiteId(),i.push(this.invalidateUserCache(e,n)),i.push(this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.USERS_TABLE,{id:e})})),Promise.all(i)},e.prototype.getParticipants=function(e,t,i,o,r){var l=this;return void 0===t&&(t=0),void 0===i&&(i=n.PARTICIPANTS_LIST_LIMIT),this.sitesProvider.getSite(o).then(function(n){l.logger.debug("Get participants for course '"+e+"' starting at '"+t+"'");var s={courseid:e,options:[{name:"limitfrom",value:t},{name:"limitnumber",value:i},{name:"sortby",value:"siteorder"}]},a={cacheKey:l.getParticipantsListCacheKey(e)};return r&&(a.getFromCache=!1,a.emergencyCache=!1),n.read("core_enrol_get_enrolled_users",s,a).then(function(e){var n=e.length>=i;return l.storeUsers(e,o),{participants:e,canLoadMore:n}})})},e.prototype.getParticipantsListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+e},e.prototype.getProfile=function(e,n,t,i){var o=this;return void 0===t&&(t=!1),i=i||this.sitesProvider.getCurrentSiteId(),t?this.getUserFromLocalDb(e,i).catch(function(){return o.getUserFromWS(e,n,i)}):this.getUserFromWS(e,n,i).catch(function(){return o.getUserFromLocalDb(e,i)})},e.prototype.getUserCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},e.prototype.getUserFromLocalDb=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.USERS_TABLE,{id:e})})},e.prototype.getUserFromWS=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o,r,l={cacheKey:i.getUserCacheKey(e)};return n&&n!=t.getSiteHomeId()?(i.logger.debug("Get participant with ID '"+e+"' in course '"+n),o="core_user_get_course_user_profiles",r={userlist:[{userid:e,courseid:n}]}):(i.logger.debug("Get user with ID '"+e+"'"),o="core_user_get_users_by_field",r={field:"id","values[0]":e}),t.read(o,r,l).then(function(e){if(0==e.length)return Promise.reject("Cannot retrieve user info.");var n=e.shift();return n.country&&(n.country=i.utils.getCountryName(n.country)),i.storeUser(n.id,n.fullname,n.profileimageurl),n})})},e.prototype.invalidateUserCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserCacheKey(e))})},e.prototype.invalidateParticipantsList=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getParticipantsListCacheKey(e))})},e.prototype.isParticipantsDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isParticipantsDisabledInSite(e)})},e.prototype.isParticipantsDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_CoreUserParticipants")},e.prototype.isPluginEnabledForCourse=function(e,n){return e?this.utils.promiseWorks(this.getParticipants(e,0,1,n)):Promise.reject(null)},e.prototype.isUpdatePictureDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreUserDelegate_picture")},e.prototype.logView=function(e,n){var t={userid:e};return n&&(t.courseid=n),this.sitesProvider.getCurrentSite().write("core_user_view_user_profile",t)},e.prototype.logParticipantsView=function(e){return this.sitesProvider.getCurrentSite().write("core_user_view_user_list",{courseid:e})},e.prototype.prefetchProfiles=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o={},r=[];return e.forEach(function(e){null!==e&&(e=Number(e),isNaN(e)||o[e]||(o[e]=!0,r.push(i.getProfile(e,n,!1,t).then(function(e){e.profileimageurl&&i.filepoolProvider.addToQueueByUrl(t,e.profileimageurl)}))))}),Promise.all(r)},e.prototype.storeUser=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={id:e,fullname:n,profileimageurl:t};return i.getDb().insertRecord(o.USERS_TABLE,r)})},e.prototype.storeUsers=function(e,n){var t=this,i=[];return e.forEach(function(e){void 0===e.id||isNaN(parseInt(e.id,10))||i.push(t.storeUser(parseInt(e.id,10),e.fullname,e.profileimageurl,n))}),Promise.all(i)},e.prototype.updateUserPreference=function(e,n,t,i){return this.updateUserPreferences([{type:e,value:n}],void 0,t,i)},e.prototype.updateUserPreferences=function(e,n,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={userid:t=t||i.getUserId(),preferences:e};return void 0!==n&&(o.emailstop=n?1:0),i.write("core_user_update_user_preferences",o,{responseExpected:!1})})},e.PARTICIPANTS_LIST_LIMIT=50,e.PROFILE_REFRESHED="CoreUserProfileRefreshed",e.PROFILE_PICTURE_UPDATED="CoreUserProfilePictureUpdated",e;var n}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4),t(1426);var i=t(13),o=function(){function e(e,n,t,i){this.translate=e,this.eventsProvider=t,this.element=n.nativeElement,this.uniqueId="core-loading-content-"+i.getUniqueId("CoreLoadingComponent")}return e.prototype.ngOnInit=function(){this.message||(this.message=this.translate.instant("core.loading")),this.hideUntil&&(this.element.classList.add("core-loading-loaded"),this.content.nativeElement.classList.add("core-loading-content"))},e.prototype.ngOnChanges=function(e){var n=this;e.hideUntil&&(!0===e.hideUntil.currentValue?setTimeout(function(){n.element.classList.add("core-loading-loaded"),setTimeout(function(){n.content.nativeElement.classList.add("core-loading-content")},500)}):(this.element.classList.remove("core-loading-loaded"),this.content.nativeElement.classList.remove("core-loading-content")),setTimeout(function(){n.eventsProvider.trigger(i.a.CORE_LOADING_CHANGED,{loaded:e.hideUntil.currentValue,uniqueId:n.uniqueId})}))},e}()},function(e,n,t){"use strict";function i(e){return s._42(0,[(e()(),s._16(0,0,null,null,1,"p",[["class","core-loading-message"]],null,null,null,null,null)),(e()(),s._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.message)})}function o(e){return s._42(0,[(e()(),s._16(0,0,null,null,10,"div",[["class","core-loading-container"]],[[24,"@coreShowHideAnimation",0]],null,null,null,null)),(e()(),s._40(-1,null,["\n    "])),(e()(),s._16(2,0,null,null,7,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),s._40(-1,null,["\n        "])),(e()(),s._16(4,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,a.b,a.a)),s._15(5,114688,null,0,u.a,[c.a,s.p,s.K],null,null),(e()(),s._40(-1,null,["\n        "])),(e()(),s._11(16777216,null,null,1,null,i)),s._15(8,16384,null,0,d.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n    "])),(e()(),s._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0);e(n,8,0,t.message)},function(e,n){e(n,0,0,void 0);e(n,4,0,s._29(n,5)._paused)})}function r(e){return s._42(0,[s._28(null,0),(e()(),s._11(0,null,null,0))],null,null)}function l(e){return s._42(0,[s._37(402653184,1,{content:0}),(e()(),s._11(16777216,null,null,1,null,o)),s._15(2,16384,null,0,d.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n"])),(e()(),s._16(4,0,[[1,0],["content",1]],null,4,"div",[["class","core-loading-content"]],[[8,"id",0]],null,null,null,null)),(e()(),s._40(-1,null,["\n    "])),(e()(),s._11(16777216,null,null,1,null,r)),s._15(7,16384,null,0,d.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.hideUntil);e(n,7,0,t.hideUntil)},function(e,n){e(n,4,0,n.component.uniqueId)})}t.d(n,"a",function(){return f}),n.b=l;var s=t(1),a=t(112),u=t(95),c=t(7),d=t(8),f=s._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreShowHideAnimation",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"500ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"500ms ease-in-out"}],options:null}],options:{}}]}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(270),t(10),t(6),t(65),t(11),t(401);var i=function(){function e(e,n,t,i,o,r,l){this.platform=n,this.file=t,this.appProvider=i,this.textUtils=o,this.zip=r,this.mimeUtils=l,this.initialized=!1,this.basePath="",this.isHTMLAPI=!1,this.CHUNK_SIZE=10485760,this.logger=e.getInstance("CoreFileProvider"),n.is("android")&&!Object.getOwnPropertyDescriptor(FileReader.prototype,"onloadend")&&(this.defineGetterSetter(FileReader.prototype,"readyState",function(){return this._localURL?this._readyState:this._realReader.readyState}),this.defineGetterSetter(FileReader.prototype,"error",function(){return this._localURL?this._error:this._realReader.error}),this.defineGetterSetter(FileReader.prototype,"result",function(){return this._localURL?this._result:this._realReader.result}),this.defineEvent("onloadstart"),this.defineEvent("onprogress"),this.defineEvent("onload"),this.defineEvent("onerror"),this.defineEvent("onloadend"),this.defineEvent("onabort"))}return n=e,e.prototype.defineEvent=function(e){this.defineGetterSetter(FileReader.prototype,e,function(){return this._realReader[e]||null},function(n){this._realReader[e]=n})},e.prototype.defineGetterSetter=function(e,n,t,i){if(Object.defineProperty){var o={get:t,configurable:!0};i&&(o.set=i),Object.defineProperty(e,n,o)}else e.__defineGetter__(n,t),i&&e.__defineSetter__(n,i)},e.prototype.setHTMLBasePath=function(e){this.isHTMLAPI=!0,this.basePath=e},e.prototype.usesHTMLAPI=function(){return this.isHTMLAPI},e.prototype.init=function(){var e=this;return this.initialized?Promise.resolve():this.platform.ready().then(function(){if(e.platform.is("android"))e.basePath=e.file.externalApplicationStorageDirectory||e.basePath;else if(e.platform.is("ios"))e.basePath=e.file.documentsDirectory||e.basePath;else if(!e.isAvailable()||""===e.basePath)return e.logger.error("Error getting device OS."),Promise.reject(null);e.initialized=!0,e.logger.debug("FS initialized: "+e.basePath)})},e.prototype.isAvailable=function(){return void 0!==window.resolveLocalFileSystemURL},e.prototype.getFile=function(e){var n=this;return this.init().then(function(){return n.logger.debug("Get file: "+e),n.file.resolveLocalFilesystemUrl(n.addBasePathIfNeeded(e))}).then(function(e){return e})},e.prototype.getDir=function(e){var n=this;return this.init().then(function(){return n.logger.debug("Get directory: "+e),n.file.resolveDirectoryUrl(n.addBasePathIfNeeded(e))})},e.prototype.getSiteFolder=function(e){return n.SITESFOLDER+"/"+e},e.prototype.create=function(e,n,t,i){var o=this;return this.init().then(function(){if(n=o.removeStartingSlash(n.replace(o.basePath,"")),i=i||o.basePath,-1==n.indexOf("/"))return e?(o.logger.debug("Create dir "+n+" in "+i),o.file.createDir(i,n,!t)):(o.logger.debug("Create file "+n+" in "+i),o.file.createFile(i,n,!t));var r=n.substr(0,n.indexOf("/")),l=n.substr(n.indexOf("/")+1);return o.logger.debug("Create dir "+r+" in "+i),o.file.createDir(i,r,!0).then(function(n){return o.create(e,l,t,n.toURL())}).catch(function(e){return o.logger.error("Error creating directory "+r+" in "+i),Promise.reject(e)})})},e.prototype.createDir=function(e,n){return this.create(!0,e,n)},e.prototype.createFile=function(e,n){return this.create(!1,e,n)},e.prototype.removeDir=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Remove directory: "+e),n.file.removeRecursively(n.basePath,e)})},e.prototype.removeFile=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Remove file: "+e),n.file.removeFile(n.basePath,e)})},e.prototype.removeFileByFileEntry=function(e){return new Promise(function(n,t){e.remove(n,t)})},e.prototype.getDirectoryContents=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Get contents of dir: "+e),n.file.listDir(n.basePath,e)})},e.prototype.getSize=function(e){var n=this;return new Promise(function(t,i){if(e.isDirectory){e.createReader().readEntries(function(e){for(var o=[],r=0;r<e.length;r++)o.push(n.getSize(e[r]));Promise.all(o).then(function(e){for(var n=0,o=0;o<e.length;o++){var r=parseInt(e[o]);if(isNaN(r))return void i();n+=r}t(n)},i)},i)}else e.isFile&&e.file(function(e){t(e.size)},i)})},e.prototype.getDirectorySize=function(e){var n=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of dir: "+e),this.getDir(e).then(function(e){return n.getSize(e)})},e.prototype.getFileSize=function(e){var n=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of file: "+e),this.getFile(e).then(function(e){return n.getSize(e)})},e.prototype.getFileObjectFromFileEntry=function(e){var n=this;return new Promise(function(t,i){n.logger.debug("Get file object of: "+e.fullPath),e.file(t,i)})},e.prototype.calculateFreeSpace=function(){var e=this;return this.file.getFreeDiskSpace().then(function(n){return e.platform.is("ios")?Number(n):1024*Number(n)})},e.prototype.normalizeFileName=function(e){return e=this.textUtils.decodeURIComponent(e)},e.prototype.readFile=function(e,t){switch(void 0===t&&(t=n.FORMATTEXT),e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Read file "+e+" with format "+t),t){case n.FORMATDATAURL:return this.file.readAsDataURL(this.basePath,e);case n.FORMATBINARYSTRING:return this.file.readAsBinaryString(this.basePath,e);case n.FORMATARRAYBUFFER:return this.file.readAsArrayBuffer(this.basePath,e);default:return this.file.readAsText(this.basePath,e)}},e.prototype.readFileData=function(e,t){return void 0===t&&(t=n.FORMATTEXT),t=t||n.FORMATTEXT,this.logger.debug("Read file from file data with format "+t),new Promise(function(i,o){var r=new FileReader;r.onloadend=function(e){var n=e.target;void 0!==n.result||null!==n.result?i(n.result):o(void 0!==n.error||null!==n.error?n.error:{code:null,message:"READER_ONLOADEND_ERR"})};var l=!1;switch(r.onloadstart=function(e){l=!0},setTimeout(function(){l||o("Upload cannot start.")},3e3),t){case n.FORMATDATAURL:r.readAsDataURL(e);break;case n.FORMATBINARYSTRING:r.readAsBinaryString(e);break;case n.FORMATARRAYBUFFER:r.readAsArrayBuffer(e);break;default:r.readAsText(e)}})},e.prototype.writeFile=function(e,n,t){var i=this;return this.init().then(function(){return e=i.removeStartingSlash(e.replace(i.basePath,"")),i.logger.debug("Write file: "+e),i.createFile(e).then(function(o){if(i.isHTMLAPI&&!i.appProvider.isDesktop()&&("string"==typeof n||"[object ArrayBuffer]"==n.toString())){var r=i.mimeUtils.getMimeType(i.mimeUtils.getFileExtension(e));n=new Blob([n],{type:r||"text/plain"})}return i.file.writeFile(i.basePath,e,n,{replace:!t,append:!!t}).then(function(){return o})})})},e.prototype.writeFileDataInFile=function(e,n,t,i,o){var r=this;void 0===i&&(i=0);var l=e.slice(i=i||0,Math.min(i+this.CHUNK_SIZE,e.size));return this.writeFileDataInFileChunk(l,n,o).then(function(o){return i+=r.CHUNK_SIZE,t&&t({lengthComputable:!0,loaded:i,total:e.size}),i>=e.size?o:r.writeFileDataInFile(e,n,t,i,!0)})},e.prototype.writeFileDataInFileChunk=function(e,t,i){var o=this;return this.readFileData(e,n.FORMATARRAYBUFFER).then(function(e){return o.writeFile(t,e,i)})},e.prototype.getExternalFile=function(e){return this.file.resolveLocalFilesystemUrl(e).then(function(e){return e})},e.prototype.removeExternalFile=function(e){var n=e.substring(0,e.lastIndexOf("/")),t=e.substr(e.lastIndexOf("/")+1);return this.file.removeFile(n,t)},e.prototype.getBasePath=function(){var e=this;return this.init().then(function(){return"/"==e.basePath.slice(-1)?e.basePath:e.basePath+"/"})},e.prototype.getBasePathToDownload=function(){var e=this;return this.init().then(function(){return e.platform.is("ios")?e.file.resolveDirectoryUrl(e.basePath).then(function(e){return e.toInternalURL()}):e.basePath})},e.prototype.getBasePathInstant=function(){return this.basePath?"/"==this.basePath.slice(-1)?this.basePath:this.basePath+"/":this.basePath},e.prototype.moveFile=function(e,n){var t=this;return this.init().then(function(){if(e=t.removeStartingSlash(e.replace(t.basePath,"")),n=t.removeStartingSlash(n.replace(t.basePath,"")),t.isHTMLAPI){for(var i=e.split("/"),o=n.split("/"),r=t.basePath,l=0;l<i.length;l++){var s=i[l];if(o[l]!==s)break;r=t.textUtils.concatenatePaths(r,s+="/"),e=e.replace(s,""),n=n.replace(s,"")}return t.file.moveFile(r,e,r,n)}return t.file.moveFile(t.basePath,e,t.basePath,n).catch(function(i){var o=decodeURI(e),r=decodeURI(n);return o!=e||r!=n?t.file.moveFile(t.basePath,o,t.basePath,r):Promise.reject(i)})})},e.prototype.copyFile=function(e,n){var t,i,o=this;return this.init().then(function(){if(e=o.removeStartingSlash(e.replace(o.basePath,"")),n=o.removeStartingSlash(n.replace(o.basePath,"")),t=o.getFileAndDirectoryFromPath(e),(i=o.getFileAndDirectoryFromPath(n)).directory)return o.createDir(i.directory)}).then(function(){if(o.isHTMLAPI){var r=o.textUtils.concatenatePaths(o.basePath,t.directory),l=o.textUtils.concatenatePaths(o.basePath,i.directory);return o.file.copyFile(r,t.name,l,i.name)}return o.file.copyFile(o.basePath,e,o.basePath,n).catch(function(t){var i=decodeURI(e),r=decodeURI(n);return e!=i||n!=r?o.file.copyFile(o.basePath,i,o.basePath,r):Promise.reject(t)})})},e.prototype.getFileAndDirectoryFromPath=function(e){var n={directory:"",name:""};return n.directory=e.substring(0,e.lastIndexOf("/")),n.name=e.substr(e.lastIndexOf("/")+1),n},e.prototype.getInternalURL=function(e){return e.toInternalURL?e.toInternalURL():e.toURL()},e.prototype.addBasePathIfNeeded=function(e){return e.indexOf(this.basePath)>-1?e:this.textUtils.concatenatePaths(this.basePath,e)},e.prototype.removeBasePath=function(e){if(e.indexOf(this.basePath)>-1)return e.replace(this.basePath,"")},e.prototype.unzipFile=function(e,n,t){var i=this;return this.getFile(e).then(function(o){return n=i.addBasePathIfNeeded(n||i.mimeUtils.removeExtension(e)),i.zip.unzip(o.toURL(),n,t)}).then(function(e){if(-1==e)return Promise.reject(null)})},e.prototype.replaceInFile=function(e,n,t){var i=this;return this.readFile(e).then(function(o){return void 0!==o&&null!==o&&o.replace?o.match(n)?(o=o.replace(n,t),i.writeFile(e,o)):void 0:Promise.reject(null)})},e.prototype.getMetadata=function(e){return e&&e.getMetadata?new Promise(function(n,t){e.getMetadata(n,t)}):Promise.reject(null)},e.prototype.getMetadataFromPath=function(e,n){var t=this;return(n?this.getDir(e):this.getFile(e)).then(function(e){return t.getMetadata(e)})},e.prototype.removeStartingSlash=function(e){return"/"==e[0]?e.substr(1):e},e.prototype.copyOrMoveExternalFile=function(e,n,t){var i=this;return this.getExternalFile(e).then(function(e){var o=i.getFileAndDirectoryFromPath(n);return i.createDir(o.directory).then(function(n){return new Promise(function(i,r){t?e.copyTo(n,o.name,i,r):e.moveTo(n,o.name,i,r)})})})},e.prototype.copyExternalFile=function(e,n){return this.copyOrMoveExternalFile(e,n,!0)},e.prototype.moveExternalFile=function(e,n){return this.copyOrMoveExternalFile(e,n,!1)},e.prototype.getUniqueNameInFolder=function(e,n,t){var i=this;return this.getDirectoryContents(e).then(function(e){var o,r={},l=1,s=i.mimeUtils.removeExtension(n),a=i.mimeUtils.getFileExtension(n)||t;if(s=i.textUtils.removeSpecialCharactersForFiles(i.textUtils.decodeURIComponent(s)),e.forEach(function(e){r[e.name.toLowerCase()]=e}),a=a?"."+a:"",o=s+a,void 0===r[o.toLowerCase()])return o;do{o=s+"("+l+")"+a,l++}while(void 0!==r[o]);return o}).catch(function(){return i.textUtils.removeSpecialCharactersForFiles(i.textUtils.decodeURIComponent(n))})},e.prototype.clearTmpFolder=function(){return this.removeDir(n.TMPFOLDER).catch(function(){})},e.prototype.removeUnusedFiles=function(e,n){var t=this;return this.getDirectoryContents(e).then(function(e){if(e.length){var i={},o=[];return n.forEach(function(e){e.fullPath&&(i[e.fullPath]=e)}),e.forEach(function(e){i[e.fullPath]||o.push(t.removeFileByFileEntry(e))}),Promise.all(o)}}).catch(function(){})},e.prototype.isFileInAppFolder=function(e){return-1!=e.indexOf(this.basePath)},e.FORMATTEXT=0,e.FORMATDATAURL=1,e.FORMATBINARYSTRING=2,e.FORMATARRAYBUFFER=3,e.SITESFOLDER="sites",e.TMPFOLDER="tmp",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmCourses:",this.logger=e.getInstance("CoreCoursesProvider")}return n=e,e.prototype.canGetAdminAndNavOptions=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_navigation_options")&&this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_administration_options")},e.prototype.getCategories=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={criteria:[{key:0==e?"parent":"id",value:e}],addsubcategories:n?1:0},r={cacheKey:i.getCategoriesCacheKey(e,n)};return t.read("core_course_get_categories",o,r)})},e.prototype.getCategoriesCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"categories:"+e+":"+!!n},e.prototype.getCourseIdsForAdminAndNavOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(i){var o=i.getSiteHomeId();return 1==e.length?t.getUserCourses(!0,n).then(function(n){var t=e[0],i=!1;if(t==o)i=!0;else for(var r=0;r<n.length;r++)if(n[r].id==t){i=!0;break}return i&&((e=n.map(function(e){return e.id})).push(o),e.sort(function(e,n){return n-e})),e}).catch(function(){return e}):(e.length>1&&-1==e.indexOf(o)&&e.push(o),e.sort(function(e,n){return n-e}),e)})},e.prototype.isDownloadCourseDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDownloadCoursesDisabledInSite(e)})},e.prototype.isDownloadCourseDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreCourseDownload")},e.prototype.isDownloadCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDownloadCoursesDisabledInSite(e)})},e.prototype.isDownloadCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreCoursesDownload")},e.prototype.isMyCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isMyCoursesDisabledInSite(e)})},e.prototype.isMyCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreCourses")},e.prototype.isSearchCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isSearchCoursesDisabledInSite(e)})},e.prototype.isSearchCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_search")},e.prototype.getCourse=function(e,n){return this.getCourses([e],n).then(function(e){return e&&e.length>0?e[0]:Promise.reject(null)})},e.prototype.getCourseEnrolmentMethods=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseid:e},o={cacheKey:t.getCourseEnrolmentMethodsCacheKey(e)};return n.read("core_enrol_get_course_enrolment_methods",i,o)})},e.prototype.getCourseEnrolmentMethodsCacheKey=function(e){return this.ROOT_CACHE_KEY+"enrolmentmethods:"+e},e.prototype.getCourseGuestEnrolmentInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={instanceid:e},o={cacheKey:t.getCourseGuestEnrolmentInfoCacheKey(e)};return n.read("enrol_guest_get_instance_info",i,o).then(function(e){return e.instanceinfo})})},e.prototype.getCourseGuestEnrolmentInfoCacheKey=function(e){return this.ROOT_CACHE_KEY+"guestinfo:"+e},e.prototype.getCourses=function(e,n){var t=this;return Array.isArray(e)?0===e.length?Promise.resolve([]):this.sitesProvider.getSite(n).then(function(n){var i={options:{ids:e}},o={cacheKey:t.getCoursesCacheKey(e)};return n.read("core_course_get_courses",i,o)}):Promise.reject(null)},e.prototype.getCoursesCacheKey=function(e){return this.ROOT_CACHE_KEY+"course:"+JSON.stringify(e)},e.prototype.fixCoursesByFieldParams=function(e,n,t){if("id"==e||"ids"==e){var i=String(n).split(",");return this.getCourseIdsForAdminAndNavOptions(i,t).then(function(e){return e.length>1?{field:"ids",value:e.join(",")}:{field:"id",value:Number(e[0])}})}return Promise.resolve({field:e,value:n})},e.prototype.getCoursesByField=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=n,r=!1;return this.fixCoursesByFieldParams(e,n,t).then(function(o){return r=o.field!=e||o.value!=n,e=o.field,n=o.value,i.sitesProvider.getSite(t)}).then(function(t){var l={field:e||"",value:e?n:""},s={cacheKey:i.getCoursesByFieldCacheKey(e,n)};return t.read("core_course_get_courses_by_field",l,s).then(function(n){if(n.courses){if("ids"==e&&r){var t=String(o).split(","),i=[];n.courses.forEach(function(e){var n=t.indexOf(String(e.id));-1!=n&&(i.push(e),t.splice(n,1))}),n.courses=i}return n.courses.sort(function(e,n){return void 0===e.sortorder&&void 0===n.sortorder?n.id-e.id:void 0===e.sortorder?1:void 0===n.sortorder?-1:e.sortorder-n.sortorder})}return Promise.reject(null)})})},e.prototype.getCoursesByFieldCacheKey=function(e,n){return e=e||"",n=e?n:"",this.ROOT_CACHE_KEY+"coursesbyfield:"+e+":"+n},e.prototype.isGetCoursesByFieldAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_get_courses_by_field")},e.prototype.getCoursesAdminAndNavOptions=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,n).then(function(e){var i,o,r=[];return r.push(t.getUserNavigationOptions(e,n).catch(function(){return{}}).then(function(e){i=e})),r.push(t.getUserAdministrationOptions(e,n).catch(function(){return{}}).then(function(e){o=e})),Promise.all(r).then(function(){return{navOptions:i,admOptions:o}})})},e.prototype.getUserAdministrationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"administrationOptions:"},e.prototype.getUserAdministrationOptionsCacheKey=function(e){return this.getUserAdministrationOptionsCommonCacheKey()+e.join(",")},e.prototype.getUserAdministrationOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseids:e},o={cacheKey:t.getUserAdministrationOptionsCacheKey(e)};return n.read("core_course_get_user_administration_options",i,o).then(function(e){return t.formatUserAdminOrNavOptions(e.courses)})})},e.prototype.getUserNavigationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"navigationOptions:"},e.prototype.getUserNavigationOptionsCacheKey=function(e){return this.getUserNavigationOptionsCommonCacheKey()+e.join(",")},e.prototype.getUserNavigationOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseids:e},o={cacheKey:t.getUserNavigationOptionsCacheKey(e)};return n.read("core_course_get_user_navigation_options",i,o).then(function(e){return t.formatUserAdminOrNavOptions(e.courses)})})},e.prototype.formatUserAdminOrNavOptions=function(e){var n={};return e.forEach(function(e){var t={};e.options&&e.options.forEach(function(e){t[e.name]=e.available}),n[e.id]=t}),n},e.prototype.getUserCourse=function(e,n,t){return e?this.getUserCourses(n,t).then(function(n){var t;for(var i in n)if(n[i].id==e){t=n[i];break}return t||Promise.reject(null)}):Promise.reject(null)},e.prototype.getUserCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={userid:n.getUserId()},o={cacheKey:t.getUserCoursesCacheKey(),omitExpires:!!e};return n.read("core_enrol_get_users_courses",i,o)})},e.prototype.getUserCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"usercourses"},e.prototype.invalidateCategories=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getCategoriesCacheKey(e,n))})},e.prototype.invalidateCourse=function(e,n){return this.invalidateCourses([e],n)},e.prototype.invalidateCourseEnrolmentMethods=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseEnrolmentMethodsCacheKey(e))})},e.prototype.invalidateCourseGuestEnrolmentInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseGuestEnrolmentInfoCacheKey(e))})},e.prototype.invalidateCoursesAdminAndNavOptions=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,n).then(function(e){var i=[];return i.push(t.invalidateUserAdministrationOptionsForCourses(e,n)),i.push(t.invalidateUserNavigationOptionsForCourses(e,n)),Promise.all(i)})},e.prototype.invalidateCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCoursesCacheKey(e))})},e.prototype.invalidateCoursesByField=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.fixCoursesByFieldParams(e,n,t).then(function(o){return e=o.field,n=o.value,i.sitesProvider.getSite(t)}).then(function(t){return t.invalidateWsCacheForKey(i.getCoursesByFieldCacheKey(e,n))})},e.prototype.invalidateUserAdministrationOptions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getUserAdministrationOptionsCommonCacheKey())})},e.prototype.invalidateUserAdministrationOptionsForCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserAdministrationOptionsCacheKey(e))})},e.prototype.invalidateUserCourses=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getUserCoursesCacheKey())})},e.prototype.invalidateUserNavigationOptions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getUserNavigationOptionsCommonCacheKey())})},e.prototype.invalidateUserNavigationOptionsForCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserNavigationOptionsCacheKey(e))})},e.prototype.isGuestWSAvailable=function(){var e=this.sitesProvider.getCurrentSite();return e&&e.wsAvailable("enrol_guest_get_instance_info")},e.prototype.search=function(e,t,i,o){return void 0===t&&(t=0),i=i||n.SEARCH_PER_PAGE,this.sitesProvider.getSite(o).then(function(n){return n.read("core_course_search_courses",{criterianame:"search",criteriavalue:e,page:t,perpage:i},{getFromCache:!1}).then(function(e){return{total:e.total,courses:e.courses}})})},e.prototype.selfEnrol=function(e,t,i,o){return void 0===t&&(t=""),this.sitesProvider.getSite(o).then(function(o){var r={courseid:e,password:t};return i&&(r.instanceid=i),o.write("enrol_self_enrol_user",r).then(function(e){if(e){if(e.status)return!0;if(e.warnings&&e.warnings.length){var t;return e.warnings.forEach(function(e){"2"!=e.warningcode&&"3"!=e.warningcode&&"4"!=e.warningcode||(t=e.message)}),t?Promise.reject({code:n.ENROL_INVALID_KEY,message:t}):Promise.reject(e.warnings[0])}}return Promise.reject(null)})})},e.prototype.setFavouriteCourse=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_course_set_favourite_courses",{courses:[{id:e,favourite:n?1:0}]})})},e.SEARCH_PER_PAGE=20,e.ENROL_INVALID_KEY="CoreCoursesEnrolInvalidKey",e.EVENT_MY_COURSES_UPDATED="courses_my_courses_updated",e.EVENT_MY_COURSES_REFRESHED="courses_my_courses_refreshed",e.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED="dashboard_download_enabled_changed",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(13),r=t(990),l=t(40),s=t(180),a=(t.n(s),t(156)),u=(t.n(a),function(e){function n(n,t,i,l,s,a,u,c){var d=e.call(this,"CoreCourseModulePrefetchDelegate",n,t,c)||this;return d.sitesProvider=t,d.utils=i,d.courseProvider=l,d.filepoolProvider=s,d.timeUtils=a,d.fileProvider=u,d.eventsProvider=c,d.CHECK_UPDATES_TIMES_TABLE="check_updates_times",d.checkUpdatesTableSchema={name:d.CHECK_UPDATES_TIMES_TABLE,columns:[{name:"courseId",type:"INTEGER",primaryKey:!0},{name:"time",type:"INTEGER",notNull:!0}]},d.ROOT_CACHE_KEY="mmCourse:",d.statusCache=new r.a,d.handlerNameProperty="modName",d.courseUpdatesPromises={},d.prefetchData={},d.sitesProvider.createTableFromSchema(d.checkUpdatesTableSchema),c.on(o.a.LOGOUT,d.clearStatusCache.bind(d)),c.on(o.a.PACKAGE_STATUS_CHANGED,function(e){d.updateStatusCache(e.status,e.component,e.componentId)},d.sitesProvider.getCurrentSiteId()),d}return Object(i.__extends)(n,e),n.prototype.canCheckUpdates=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_check_updates")},n.prototype.canModuleUseCheckUpdates=function(e,n){var t=this.getPrefetchHandlerFor(e);return t?t.canUseCheckUpdates?Promise.resolve(t.canUseCheckUpdates(e,n)):Promise.resolve(!0):Promise.resolve(!1)},n.prototype.clearStatusCache=function(){this.statusCache.clear()},n.prototype.createToCheckList=function(e,n){var t=this,i={toCheck:[],cannotUse:[]},o=[];return e.forEach(function(e){o.push(t.getModuleStatusAndDownloadTime(e,n).then(function(o){if(o.status==l.a.DOWNLOADED)return t.canModuleUseCheckUpdates(e,n).then(function(n){n?i.toCheck.push({contextlevel:"module",id:e.id,since:o.downloadTime||0}):i.cannotUse.push(e)})}).catch(function(){}))}),Promise.all(o).then(function(){return i.toCheck.sort(function(e,n){return e.id>=n.id?1:-1}),i})},n.prototype.determineModuleStatus=function(e,n,t){var i=this.getPrefetchHandlerFor(e),o=this.sitesProvider.getCurrentSiteId();if(i)if(n==l.a.DOWNLOADING)this.filepoolProvider.getPackageDownloadPromise(o,i.component,e.id)||i.prefetch(e);else if(i.determineStatus)return i.determineStatus(e,n,t);return n},n.prototype.getCourseUpdates=function(e,n){var t=this;if(!this.canCheckUpdates())return Promise.reject(null);var i=s.Md5.hashAsciiStr(n+"#"+JSON.stringify(e)),o=this.sitesProvider.getCurrentSiteId();return this.courseUpdatesPromises[o]&&this.courseUpdatesPromises[o][i]?this.courseUpdatesPromises[o][i]:(this.courseUpdatesPromises[o]||(this.courseUpdatesPromises[o]={}),this.courseUpdatesPromises[o][i]=this.createToCheckList(e,n).then(function(e){var i={};return e.cannotUse.forEach(function(e){i[e.id]=!1}),e.toCheck.length?t.sitesProvider.getSite(o).then(function(o){var r={courseid:n,tocheck:e.toCheck},l={cacheKey:t.getCourseUpdatesCacheKey(n),emergencyCache:!1,uniqueCacheKey:!0};return o.read("core_course_check_updates",r,l).then(function(r){if(!r||void 0===r.instances)return Promise.reject(null);var l={courseId:n,time:t.timeUtils.timestamp()};return o.getDb().insertRecord(t.CHECK_UPDATES_TIMES_TABLE,l).catch(function(){}),t.treatCheckUpdatesResult(e.toCheck,r,i)}).catch(function(s){return o.getDb().getRecord(t.CHECK_UPDATES_TIMES_TABLE,{courseId:n}).then(function(n){return l.getCacheUsingCacheKey=!0,l.omitExpires=!0,o.read("core_course_check_updates",r,l).then(function(o){return o&&void 0!==o.instances?t.treatCheckUpdatesResult(e.toCheck,o,i,n.time):Promise.reject(s)})},function(){return i})})}):i}).finally(function(){delete t.courseUpdatesPromises[o][i]}),this.courseUpdatesPromises[o][i])},n.prototype.getCourseUpdatesByCourseId=function(e){var n=this;return this.canCheckUpdates()?this.courseProvider.getSections(e,!1,!0,{omitExpires:!0}).then(function(t){return n.getCourseUpdates(n.courseProvider.getSectionsModules(t),e)}):Promise.reject(null)},n.prototype.getCourseUpdatesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseUpdates:"+e},n.prototype.getDownloadSize=function(e,n){var t=this;return this.getModulesStatus(e,n).then(function(e){var i=[],o={size:0,total:!0};return e[l.a.NOT_DOWNLOADED].concat(e[l.a.OUTDATED]).forEach(function(e){i.push(t.getModuleDownloadSize(e,n).then(function(e){o.total=o.total&&e.total,o.size+=e.size}))}),Promise.all(i).then(function(){return o})})},n.prototype.getModuleDownloadSize=function(e,n,t){var i,o,r=this,l=this.getPrefetchHandlerFor(e);return l?this.isModuleDownloadable(e,n).then(function(s){return s?(o=r.filepoolProvider.getPackageId(l.component,e.id),void 0!==(i=r.statusCache.getValue(o,"downloadSize"))?i:Promise.resolve(l.getDownloadSize(e,n,t)).then(function(e){return r.statusCache.setValue(o,"downloadSize",e)}).catch(function(e){var n=r.statusCache.getValue(o,"downloadSize",!0);return n||Promise.reject(e)})):{size:0,total:!0}}):Promise.resolve({size:0,total:!1})},n.prototype.getModuleDownloadedSize=function(e,n){var t,i,o=this,r=this.getPrefetchHandlerFor(e);return r?this.isModuleDownloadable(e,n).then(function(l){return l?(i=o.filepoolProvider.getPackageId(r.component,e.id),void 0!==(t=o.statusCache.getValue(i,"downloadedSize"))?t:(r.getDownloadedSize?Promise.resolve(r.getDownloadedSize(e,n)):o.getModuleFiles(e,n).then(function(e){var n=o.sitesProvider.getCurrentSiteId(),t=[],i=0;return e.forEach(function(e){var r=e.url||e.fileurl;t.push(o.filepoolProvider.getFilePathByUrl(n,r).then(function(t){return o.fileProvider.getFileSize(t).catch(function(){return o.filepoolProvider.isFileDownloadingByUrl(n,r).then(function(){return e.filesize}).catch(function(){return 0})}).then(function(e){i+=e})}))}),Promise.all(t).then(function(){return i})})).then(function(e){return o.statusCache.setValue(i,"downloadedSize",e)}).catch(function(){return o.statusCache.getValue(i,"downloadedSize",!0)})):0}):Promise.resolve(0)},n.prototype.getModuleFiles=function(e,n){var t=this.getPrefetchHandlerFor(e);return t.getFiles?Promise.resolve(t.getFiles(e,n)):t.loadContents?t.loadContents(e,n).then(function(){return e.contents}):Promise.resolve(e.contents||[])},n.prototype.getModuleStatus=function(e,n,t,i,o){var r=this,s=this.getPrefetchHandlerFor(e),a=this.sitesProvider.getCurrentSiteId(),u=this.canCheckUpdates();if(s){var c,d=s.component,f=this.filepoolProvider.getPackageId(d,e.id),p=this.statusCache.getValue(f,"status"),h=!0;return i||void 0===p?this.isModuleDownloadable(e,n).then(function(i){return i?r.filepoolProvider.getPackageStatus(a,d,e.id).then(function(i){if((p=s.determineStatus?s.determineStatus(e,i,u):i)!=l.a.DOWNLOADED)return p;if(void 0===t)c=r.getCourseUpdatesByCourseId(n);else{if(!1===t)return p;c=Promise.resolve(t)}return c.then(function(t){return t&&!1!==t[e.id]?r.moduleHasUpdates(e,n,t).then(function(n){return n?(p=l.a.OUTDATED,r.filepoolProvider.storePackageStatus(a,p,d,e.id).catch(function(){}).then(function(){return p})):p}).catch(function(){var n=r.statusCache.getValue(f,"status",!0);return r.determineModuleStatus(e,n,u)}):l.a.OUTDATED},function(){return h=!1,r.storeCourseAndSection(f,n,o),i})}):l.a.NOT_DOWNLOADABLE}).then(function(t){return h&&r.updateStatusCache(t,d,e.id,n,o),r.determineModuleStatus(e,t,u)}):(this.storeCourseAndSection(f,n,o),Promise.resolve(this.determineModuleStatus(e,p,u)))}return Promise.resolve(l.a.NOT_DOWNLOADABLE)},n.prototype.getModulesStatus=function(e,n,t,i){var o=this,r=[],s={total:0},a=l.a.NOT_DOWNLOADABLE;return s[l.a.NOT_DOWNLOADED]=[],s[l.a.DOWNLOADED]=[],s[l.a.DOWNLOADING]=[],s[l.a.OUTDATED]=[],this.getCourseUpdatesByCourseId(n).catch(function(){return!1}).then(function(t){return e.forEach(function(e){var l=o.getPrefetchHandlerFor(e);if(l){var u=o.filepoolProvider.getPackageId(l.component,e.id);r.push(o.getModuleStatus(e,n,t,i).then(function(n){s[n]&&(a=o.filepoolProvider.determinePackagesStatus(a,n),s[n].push(e),s.total++)}).catch(function(n){var t=o.statusCache.getValue(u,"status",!0);if(void 0===t)return Promise.reject(n);s[t]&&(a=o.filepoolProvider.determinePackagesStatus(a,t),s[t].push(e),s.total++)}))}}),Promise.all(r).then(function(){return s.status=a,s})})},n.prototype.getModuleStatusAndDownloadTime=function(e,n){var t=this,i=this.getPrefetchHandlerFor(e),o=this.sitesProvider.getCurrentSiteId();if(i){var r=this.filepoolProvider.getPackageId(i.component,e.id),s=this.statusCache.getValue(r,"status");return void 0!==s&&s!=l.a.DOWNLOADED?Promise.resolve({status:s}):this.isModuleDownloadable(e,n).then(function(n){return n?t.filepoolProvider.getPackageData(o,i.component,e.id).then(function(e){return{status:e.status,downloadTime:e.downloadTime||0}}):{status:l.a.NOT_DOWNLOADABLE}})}return Promise.resolve({status:l.a.NOT_DOWNLOADABLE})},n.prototype.getPrefetchHandlerFor=function(e){return this.getHandler(e.modname,!0)},n.prototype.invalidateCourseUpdates=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCourseUpdatesCacheKey(e))},n.prototype.invalidateModules=function(e,n){var t=this,i=[];return e.forEach(function(e){var o=t.getPrefetchHandlerFor(e);o&&(o.invalidateModule&&i.push(o.invalidateModule(e,n).catch(function(){})),t.invalidateModuleStatusCache(e))}),i.push(this.invalidateCourseUpdates(n)),Promise.all(i)},n.prototype.invalidateModuleStatusCache=function(e){var n=this.getPrefetchHandlerFor(e);n&&this.statusCache.invalidate(this.filepoolProvider.getPackageId(n.component,e.id))},n.prototype.isBeingDownloaded=function(e){var n=this.sitesProvider.getCurrentSiteId();return!(!this.prefetchData[n]||!this.prefetchData[n][e])},n.prototype.isModuleDownloadable=function(e,n){var t=this;if(!1===e.uservisible)return Promise.resolve(!1);var i=this.getPrefetchHandlerFor(e);if(i){if("function"==typeof i.isDownloadable){var o=this.filepoolProvider.getPackageId(i.component,e.id),r=this.statusCache.getValue(o,"downloadable");return void 0!==r?Promise.resolve(r):Promise.resolve(i.isDownloadable(e,n)).then(function(e){return t.statusCache.setValue(o,"downloadable",e)}).catch(function(){return!1})}return Promise.resolve(!0)}return Promise.resolve(!1)},n.prototype.moduleHasUpdates=function(e,n,t){var i=this.getPrefetchHandlerFor(e),o=t[e.id];if(i&&i.hasUpdates)return Promise.resolve(i.hasUpdates(e,n,o));if(!(o&&o.updates&&o.updates.length))return Promise.resolve(!1);if(i&&i.updatesNames&&i.updatesNames.test){for(var r=0,l=o.updates.length;r<l;r++)if(i.updatesNames.test(o.updates[r].name))return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.resolve(!0)},n.prototype.prefetchModule=function(e,n,t){var i=this.getPrefetchHandlerFor(e);return i?i.prefetch(e,n,t):Promise.resolve()},n.prototype.prefetchModules=function(e,n,t,i){var o=this,r=this.sitesProvider.getCurrentSiteId(),l=this.prefetchData[r]&&this.prefetchData[r][e];if(l)return i&&l.subscriptions.push(l.observable.subscribe(i)),l.promise;var s=0,u=[],c=n.length,d=n.map(function(e){return e.id}),f={observable:new a.BehaviorSubject({count:s,total:c}),promise:void 0,subscriptions:[]};return i&&f.observable.subscribe(i),n.forEach(function(e){var n=o.getPrefetchHandlerFor(e);n&&u.push(o.isModuleDownloadable(e,t).then(function(i){if(i)return n.prefetch(e,t).then(function(){var n=d.indexOf(e.id);n>-1&&(d.splice(n,1),f.observable.next({count:++s,total:c}))})}))}),f.promise=Promise.all(u).finally(function(){f.subscriptions.forEach(function(e){e.unsubscribe()}),delete o.prefetchData[r][e]}),this.prefetchData[r]||(this.prefetchData[r]={}),this.prefetchData[r][e]=f,f.promise},n.prototype.removeModuleFiles=function(e,n){var t=this,i=this.getPrefetchHandlerFor(e),o=this.sitesProvider.getCurrentSiteId();return(i&&i.removeFiles?i.removeFiles(e,n):this.getModuleFiles(e,n).then(function(e){var n=[];return e.forEach(function(e){n.push(t.filepoolProvider.removeFileByUrl(o,e.url||e.fileurl).catch(function(){}))}),Promise.all(n)})).then(function(){if(i){var n=t.filepoolProvider.getPackageId(i.component,e.id);return t.statusCache.setValue(n,"downloadedSize",0),t.filepoolProvider.storePackageStatus(o,l.a.NOT_DOWNLOADED,i.component,e.id)}})},n.prototype.setOnProgress=function(e,n){var t=this.sitesProvider.getCurrentSiteId(),i=this.prefetchData[t]&&this.prefetchData[t][e];i&&i.subscriptions.push(i.observable.subscribe(n))},n.prototype.storeCourseAndSection=function(e,n,t){n&&this.statusCache.setValue(e,"courseId",n),t&&t>0&&this.statusCache.setValue(e,"sectionId",t)},n.prototype.treatCheckUpdatesResult=function(e,n,t,i){return this.utils.arrayToObject(n.instances,"id",t),n.warnings.forEach(function(e){"missingcallback"==e.warningcode&&(t[e.itemid]=!1)}),i&&e.forEach(function(e){t[e.id]&&e.since>i&&delete t[e.id]}),t},n.prototype.updateStatusCache=function(e,n,t,i,r){var l,s=this.filepoolProvider.getPackageId(n,t),a=this.statusCache.getValue(s,"status",!0);l=void 0!==a&&a!==e,this.storeCourseAndSection(s,i,r),l?(i||(i=this.statusCache.getValue(s,"courseId",!0)),r||(r=this.statusCache.getValue(s,"sectionId",!0)),this.statusCache.invalidate(s),this.statusCache.setValue(s,"status",e),r&&this.eventsProvider.trigger(o.a.SECTION_STATUS_CHANGED,{sectionId:r,courseId:i},this.sitesProvider.getCurrentSiteId())):this.statusCache.setValue(s,"status",e)},n}(t(102).a))},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(538),function(e){function n(n,t,i,o,r){var l=e.call(this,"CoreCourseModuleDelegate",n,t,i)||this;return l.sitesProvider=t,l.courseProvider=o,l.defaultHandler=r,l.featurePrefix="CoreCourseModuleDelegate_",l.handlerNameProperty="modName",l}return Object(i.__extends)(n,e),n.prototype.getMainComponent=function(e,n,t){var i=this;return Promise.resolve(this.executeFunctionOnEnabled(t.modname,"getMainComponent",[e,n,t])).catch(function(e){i.logger.error("Error getting main component",e)})},n.prototype.getModuleDataFor=function(e,n,t,i){return this.executeFunctionOnEnabled(e,"getData",[n,t,i])},n.prototype.isModuleDisabled=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.isModuleDisabledInSite(e,n)})},n.prototype.isModuleDisabledInSite=function(e,n){var t=this.getHandler(e,!0);return!!t&&(n=n||this.sitesProvider.getCurrentSite(),this.isFeatureDisabled(t,n))},n.prototype.displayRefresherInSingleActivity=function(e){return this.executeFunctionOnEnabled(e,"displayRefresherInSingleActivity")},n.prototype.getModuleIconSrc=function(e,n){return this.executeFunctionOnEnabled(e,"getIconSrc")||this.courseProvider.getModuleIconSrc(e,n)},n.prototype.supportsFeature=function(e,n,t){var i,o=this.enabledHandlers[e];return o&&(o.supportsFeature?i=o.supportsFeature.apply(o,[n]):o.supportedFeatures&&(i=o.supportedFeatures[n])),null===i||void 0===i?t:i},n}(t(102).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(9);var i=t(137),o=t(13),r=function(){function e(e,n,t,i,r,l,s,a,u,c){var d=this;this.sitesProvider=n,this.utils=t,this.langProvider=i,this.appProvider=r,this.platform=l,this.filepoolProvider=s,this.coursesProvider=a,this.textUtils=u,this.eventsProvider=c,this.ROOT_CACHE_KEY="CoreSitePlugins:",this.sitePlugins={},this.sitePluginPromises={},this.hasSitePluginsLoaded=!1,this.sitePluginsFinishedLoading=!1,this.logger=e.getInstance("CoreUserProvider");var f=this.eventsProvider.on(o.a.SITE_PLUGINS_LOADED,function(){d.sitePluginsFinishedLoading=!0,f&&f.off()})}return e.prototype.addDefaultArgs=function(e,n){var t=this;return e=e||{},n=n||this.sitesProvider.getCurrentSite(),this.langProvider.getCurrentLanguage().then(function(o){var r=t.utils.clone(e);return r.userid=e.userid||n.getUserId(),r.appid=i.a.app_id,r.appversioncode=i.a.versioncode,r.appversionname=i.a.versionname,r.applang=o,r.appcustomurlscheme=i.a.customurlscheme,r.appisdesktop=t.appProvider.isDesktop(),r.appismobile=t.appProvider.isMobile(),r.appiswide=t.appProvider.isWide(),r.appplatform=r.appisdevice?t.platform.is("ios")?"ios":"android":r.appisdesktop?t.appProvider.isMac()?"mac":t.appProvider.isLinux()?"linux":"windows":"browser",r})},e.prototype.callWS=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return t=t||{},t.cacheKey=t.cacheKey||o.getCallWSCacheKey(e,n),i.read(e,n,t)})},e.prototype.createDataForJS=function(e,n){var t;return e&&("boolean"==typeof(t=this.utils.clone(e.jsResult||{}))&&(t={}),t.INIT_TEMPLATES=this.utils.objectToKeyValueMap(e.templates,"id","html"),t.INIT_OTHERDATA=e.otherdata),n&&(t.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(n.templates,"id","html"),t.CONTENT_OTHERDATA=n.otherdata),t},e.prototype.getCallWSCacheKey=function(e,n){return this.getCallWSCommonCacheKey(e)+":"+this.utils.sortAndStringify(n)},e.prototype.getCallWSCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"ws:"+e},e.prototype.getContent=function(e,n,t,i,o){var r=this;return this.logger.debug("Get content for component '"+e+"' and method '"+n+"'"),this.sitesProvider.getSite(o).then(function(o){return r.addDefaultArgs(t,o).then(function(o){var l={component:e,method:n,args:r.utils.objectToArrayOfObjects(o,"name","value",!0)};return i=i||{},i.cacheKey=r.getContentCacheKey(e,n,t),r.sitesProvider.getCurrentSite().read("tool_mobile_get_content",l,i)}).then(function(e){if(e.otherdata){e.otherdata=r.utils.objectToKeyValueMap(e.otherdata,"name","value");for(var n in e.otherdata){var t=e.otherdata[n];"string"!=typeof t||"{"!=t[0]&&"["!=t[0]||(e.otherdata[n]=r.textUtils.parseJSON(t))}}else e.otherdata={};return e})})},e.prototype.getContentCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"content:"+e+":"+n+":"+this.utils.sortAndStringify(t)},e.prototype.getDownloadParam=function(e,n,t,i){switch(n){case"courseids":return[t];case e+"id":return i&&i.instance}},e.prototype.getHandlerUniqueName=function(e,n){return e.addon+"_"+n},e.prototype.getSitePluginHandler=function(e){return this.sitePlugins[e]},e.prototype.invalidateAllCallWSForMethod=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCallWSCommonCacheKey(e))})},e.prototype.invalidateCallWS=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(t.cacheKey||o.getCallWSCacheKey(e,n))})},e.prototype.invalidateContent=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(o.getContentCacheKey(e,n,t))})},e.prototype.isGetContentAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("tool_mobile_get_content")},e.prototype.isHandlerEnabledForCourse=function(e,n,t){return(!t||!t.courses||-1!=t.courses.indexOf(e))&&(!n&&void 0!==n||this.coursesProvider.getUserCourse(e,!0).then(function(){return!0}).catch(function(){return!1}))},e.prototype.isHandlerEnabledForUser=function(e,n,t){return(!n||e==this.sitesProvider.getCurrentSite().getUserId())&&(!t||!t.users||-1!=t.users.indexOf(e))},e.prototype.loadOtherDataInArgs=function(e,n,t){if(e=e?this.utils.clone(e):{},n=n||{},void 0===t)return e;if(t)for(var i in t){var o=t[i];e[o]=n[o]}else for(var r in n)e[r]=n[r];return e},e.prototype.prefetchFunctions=function(e,n,t,i,o,r,l,s){var a=this;s=s||this.sitesProvider.getCurrentSite();var u=[];for(var c in t.offlinefunctions)if(s.wsAvailable(c)){var d=t.offlinefunctions[c],f=this.getCallWSCacheKey(c,n),p={};if(d.length)for(var h in d){var m=d[h];if(void 0!==n[m])p[m]=n[m];else{var _=this.getDownloadParam(e,m,i,o);void 0!==_&&(p[m]=_)}}else p=n;u.push(this.callWS(c,p,{cacheKey:f}))}else u.push(this.getContent(e,c,n).then(function(n){var t=[];return n.files&&n.files.length&&t.push(a.filepoolProvider.downloadOrPrefetchFiles(s.id,n.files,r,!1,e,o.id,l)),Promise.all(t)}));return Promise.all(u)},e.prototype.setSitePluginHandler=function(e,n){this.sitePlugins[e]=n},e.prototype.registerSitePluginPromise=function(e,n){this.sitePluginPromises[e]=n},e.prototype.sitePluginPromiseExists=function(e){return this.sitePluginPromises.hasOwnProperty(e)},e.prototype.sitePluginLoaded=function(e){return this.sitePluginPromises[e]},e.COMPONENT="CoreSitePlugins",e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){this.name="CoreContentLinksHandlerBase",this.priority=0,this.checkAllUsers=!1,this.featureName=""}return e.prototype.getActions=function(e,n,t,i){return[]},e.prototype.handles=function(e){return this.pattern&&e.search(this.pattern)>=0},e.prototype.getSiteUrl=function(e){if(this.pattern){var n=e.search(this.pattern);if(n>-1)return e.substr(0,n)}},e.prototype.isEnabled=function(e,n,t,i){return!0},e}()},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.urlUtils=t,this.utils=i,this.handlers={},this.logger=e.getInstance("CoreContentLinksDelegate")}return e.prototype.getActionsFor=function(e,n,t){var i=this;return e?this.sitesProvider.getSiteIdsFromUrl(e,!0,t).then(function(t){var o=[],r=[],l=i.urlUtils.extractUrlParams(e),s=function(s){var a=i.handlers[s],u=a.checkAllUsers,c=i.isHandlerEnabled.bind(i,a,e,l,n);if(!a.handles(e))return"continue";r.push(i.utils.filterEnabledSites(t,c,u).then(function(t){if(t.length)return Promise.resolve(a.getActions(t,e,l,n)).then(function(e){e&&e.length&&(e.forEach(function(e){e.message=e.message||"core.view",e.icon=e.icon||"eye",e.sites=e.sites||t}),o.push({priority:a.priority,actions:e}))})}))};for(var a in i.handlers)s(a);return i.utils.allPromises(r).catch(function(){}).then(function(){return i.sortActionsByPriority(o)})}):Promise.resolve([])},e.prototype.getSiteUrl=function(e){if(e)for(var n in this.handlers){var t=this.handlers[n].getSiteUrl(e);if(t)return t}},e.prototype.isHandlerEnabled=function(e,n,t,i,o){return(e.featureName?this.sitesProvider.isFeatureDisabled(e.featureName,o):Promise.resolve(!1)).then(function(r){return!r&&(!e.isEnabled||e.isEnabled(o,n,t,i))})},e.prototype.registerHandler=function(e){return void 0!==this.handlers[e.name]?(this.logger.log("Addon '"+e.name+"' already registered"),!1):(this.logger.log("Registered addon '"+e.name+"'"),this.handlers[e.name]=e,!0)},e.prototype.sortActionsByPriority=function(e){var n=[];return(e=e.sort(function(e,n){return e.priority<=n.priority?1:-1})).forEach(function(e){n=n.concat(e.actions)}),n},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6),t(4);var i=function(){function e(e,n,t,i){var o=this;this.translate=t,this.textUtils=i,this.extToMime={},this.mimeToExt={},this.groupsMimeInfo={},this.extensionRegex=/^[a-z0-9]+$/,this.logger=n.getInstance("CoreMimetypeUtilsProvider"),e.get("assets/exttomime.json").subscribe(function(e){o.extToMime=e},function(e){}),e.get("assets/mimetoext.json").subscribe(function(e){o.mimeToExt=e},function(e){})}return e.prototype.canBeEmbedded=function(e){return this.isExtensionInGroup(e,["web_image","web_video","web_audio"])},e.prototype.cleanExtension=function(e){if(!e)return e;var n=e.indexOf("?");return n>-1&&(e=e.substr(0,n)),(e=e.replace(/_.{32}$/,""))&&"."==e[0]&&(e=e.substr(1)),e},e.prototype.fillGroupMimeInfo=function(e){var n={},t=[];for(var i in this.extToMime){var o=this.extToMime[i];o.type&&o.groups&&-1!=o.groups.indexOf(e)&&(n[o.type]=!0,t.push(i))}this.groupsMimeInfo[e]={mimetypes:Object.keys(n),extensions:t}},e.prototype.getExtension=function(e,n){if(e=e||"","application/x-forcedownload"==(e=e.split(";")[0])||"application/forcedownload"==e)return this.guessExtensionFromUrl(n);var t=this.mimeToExt[e];if(t&&t.length){if(t.length>1&&n){var i=this.guessExtensionFromUrl(n);if(-1!=t.indexOf(i))return i}return t[0]}},e.prototype.getExtensionType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].string)return this.extToMime[e].string},e.prototype.getExtensions=function(e){return e=e||"",e=e.split(";")[0],this.mimeToExt[e]||[]},e.prototype.getFileIcon=function(e){var n=this.getFileExtension(e),t="unknown";if(n&&this.extToMime[n])if(this.extToMime[n].icon)t=this.extToMime[n].icon;else{var i=this.extToMime[n].type.split("/")[0];"video"!=i&&"text"!=i&&"image"!=i&&"document"!=i&&"audio"!=i||(t=i)}return this.getFileIconForType(t)},e.prototype.getFolderIcon=function(){return"assets/img/files/folder-64.png"},e.prototype.getFileIconForType=function(e){return"assets/img/files/"+e+"-64.png"},e.prototype.guessExtensionFromUrl=function(e){var n,t,i,o=e.split(".");if(o.length>1&&((i=(n=o.pop().toLowerCase()).indexOf("?"))>-1&&(n=n.substr(0,i)),this.extensionRegex.test(n)&&(t=n)),!t||void 0!==this.getMimeType(t))return t;this.logger.warn("Guess file extension: Not valid extension "+t)},e.prototype.getFileExtension=function(e){var n,t=e.lastIndexOf(".");if(!(t>-1&&(n=e.substr(t+1).toLowerCase(),n=this.cleanExtension(n),void 0===this.getMimeType(n))))return n;this.logger.warn("Get file extension: Not valid extension "+n)},e.prototype.getGroupMimeInfo=function(e,n){return void 0===this.groupsMimeInfo[e]&&this.fillGroupMimeInfo(e),n?this.groupsMimeInfo[e][n]:this.groupsMimeInfo[e]},e.prototype.getMimeType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].type)return this.extToMime[e].type},e.prototype.getMimetypeDescription=function(e,n){var t="assets.mimetypes.",i="",o="",r="";if("object"==typeof e&&"function"==typeof e.file?i=e.name:"object"==typeof e?(i=e.filename||"",o=e.mimetype||""):o=e,i&&(r=this.getFileExtension(i),o||(o=this.getMimeType(r))),!o)return"";r||(r=this.getExtension(o));var l=this.getMimetypeType(o)||"",s=o.split("/"),a={mimetype:o,ext:r||"",mimetype1:s[0],mimetype2:s[1]||""},u={};for(var c in a){var d=a[c];u[c]=d,u[c.toUpperCase()]=d.toUpperCase(),u[this.textUtils.ucFirst(c)]=this.textUtils.ucFirst(d)}var f=o.replace(/\+/g,"_"),p=l.replace(/\+/g,"_"),h=this.translate.instant(t+f,{$a:u}),m=this.translate.instant(t+p,{$a:u}),_=this.translate.instant(t+"default",{$a:u}),g=o;return h!=t+f?g=h:m!=t+p?g=m:_!=t+"default"&&(g=_),n&&(g=this.textUtils.ucFirst(g)),g},e.prototype.getMimetypeType=function(e){e=e.split(";")[0];var n=this.mimeToExt[e];if(n)for(var t=0;t<n.length;t++){var i=n[t];if(this.extToMime[i]&&this.extToMime[i].string)return this.extToMime[i].string}},e.prototype.getTranslatedGroupName=function(e){var n="assets.mimetypes.group:"+e,t=this.translate.instant(n);return t!=n?t:e},e.prototype.isExtensionInGroup=function(e,n){if(e=this.cleanExtension(e),n&&n.length&&this.extToMime[e]&&this.extToMime[e].groups)for(var t=0;t<this.extToMime[e].groups.length;t++){if(-1!=n.indexOf(this.extToMime[e].groups[t]))return!0}return!1},e.prototype.removeExtension=function(e){var n,t=e.lastIndexOf(".");return t>-1&&(n=e.substr(t+1).toLowerCase(),void 0!==this.getMimeType(n))?e.substr(0,t):e},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(454),t(444),t(360);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(321),t(403),t(4);var i=t(156),o=(t.n(i),function(){function e(e,n,t,o,r,l,s,a,u,c,d,f){this.fileProvider=n,this.textUtils=t,this.utils=o,this.sitesProvider=r,this.timeUtils=l,this.mimeUtils=s,this.filepoolProvider=a,this.platform=u,this.translate=c,this.mediaCapture=d,this.camera=f,this.onGetPicture=new i.Subject,this.onAudioCapture=new i.Subject,this.onVideoCapture=new i.Subject,this.logger=e.getInstance("CoreFileUploaderProvider")}return e.prototype.addDot=function(e){return"."+e},e.prototype.areFileListDifferent=function(e,n){if(e=e||[],n=n||[],e.length!=n.length)return!0;for(var t=0;t<e.length;t++)if((e[t].name||e[t].filename)!=(n[t].name||n[t].filename))return!0;return!1},e.prototype.captureAudio=function(e){var n=this;return this.onAudioCapture.next(!0),this.mediaCapture.captureAudio(e).finally(function(){n.onAudioCapture.next(!1)})},e.prototype.captureVideo=function(e){var n=this;return this.onVideoCapture.next(!0),this.mediaCapture.captureVideo(e).finally(function(){n.onVideoCapture.next(!1)})},e.prototype.clearTmpFiles=function(e){e.forEach(function(e){!e.offline&&e.remove&&e.remove(function(){})})},e.prototype.getCameraUploadOptions=function(e,n){var t=this.mimeUtils.getExtension(e),i=this.mimeUtils.getMimeType(t),o=this.platform.is("ios"),r={deleteAfterUpload:!n,mimeType:i};return r.fileName=!o||"image/jpeg"!=i&&"image/png"!=i?this.fileProvider.getFileAndDirectoryFromPath(e).name:"image_"+this.timeUtils.readableTimestamp()+"."+t,n&&(r.deleteAfterUpload=this.fileProvider.isFileInAppFolder(e),this.platform.is("android")&&(r.fileName=r.fileName.replace(/(\.[^\.]*)\?[^\.]*$/,"$1"))),r},e.prototype.getFileUploadOptions=function(e,n,t,i,o,r){var l={};return l.fileName=n,l.mimeType=t||this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(l.fileName)),l.deleteAfterUpload=!!i,l.itemId=r||0,l.fileArea=o,l},e.prototype.getMediaUploadOptions=function(e){var n,t={},i=e.name;return n=i.split("."),n[0]+="_"+this.timeUtils.readableTimestamp(),i=n.join("."),t.fileName=i,t.deleteAfterUpload=!0,t.mimeType=e.type?e.type:this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(t.fileName)),t},e.prototype.getPicture=function(e){var n=this;return this.onGetPicture.next(!0),this.camera.getPicture(e).finally(function(){n.onGetPicture.next(!1)})},e.prototype.getStoredFiles=function(e){var n=this;return this.fileProvider.getDirectoryContents(e).then(function(e){return n.markOfflineFiles(e)})},e.prototype.getStoredFilesFromOfflineFilesObject=function(e,n){var t=[];return e&&(e.online&&e.online.length>0&&(t=this.utils.clone(e.online)),e.offline>0)?this.getStoredFiles(n).then(function(e){return t.concat(e)}).catch(function(){return t}):Promise.resolve(t)},e.prototype.isInvalidMimetype=function(e,n,t){var i;if(e&&(t?i=this.mimeUtils.getExtension(t):(i=this.mimeUtils.getFileExtension(n),t=this.mimeUtils.getMimeType(i)),t&&-1==e.indexOf(t)))return i=i||this.translate.instant("core.unknown"),this.translate.instant("core.fileuploader.invalidfiletype",{$a:i})},e.prototype.markOfflineFiles=function(e){return e.forEach(function(e){e.offline=!0,e.filename=e.name}),e},e.prototype.prepareFiletypeList=function(e){var n=this,t={},i=[];return e.split(/[;, ]+/g).forEach(function(e){if(e=e.trim())if(-1!=e.indexOf("/"))i.push({name:n.mimeUtils.getMimetypeDescription(e),extlist:n.mimeUtils.getExtensions(e).map(n.addDot).join(" ")}),t[e]=!0;else if(0===e.indexOf(".")){var o=n.mimeUtils.getMimeType(e);i.push({name:!!o&&n.mimeUtils.getMimetypeDescription(o),extlist:e}),o&&(t[o]=!0)}else{var r=n.mimeUtils.getGroupMimeInfo(e,"extensions"),l=n.mimeUtils.getGroupMimeInfo(e,"mimetypes");if(r.length>0)i.push({name:n.mimeUtils.getTranslatedGroupName(e),extlist:r?r.map(n.addDot).join(" "):""}),l.forEach(function(e){e&&(t[e]=!0)});else{e=n.addDot(e);o=n.mimeUtils.getMimeType(e);i.push({name:!!o&&n.mimeUtils.getMimetypeDescription(o),extlist:e}),o&&(t[o]=!0)}}}),{info:i,mimetypes:Object.keys(t)}},e.prototype.storeFilesToUpload=function(e,n){var t=this,i={online:[],offline:0};return n&&n.length?this.fileProvider.removeUnusedFiles(e,n).then(function(){var o=[];return n.forEach(function(n){if(n.filename&&!n.name)i.online.push({filename:n.filename,fileurl:n.fileurl});else if(n.name)if(n.fullPath&&-1!=n.fullPath.indexOf(e))i.offline++;else{var r=t.textUtils.concatenatePaths(e,n.name);o.push(t.fileProvider.copyFile(n.toURL(),r)),i.offline++}else o.push(Promise.reject(null))}),Promise.all(o).then(function(){return i})}):Promise.resolve(i)},e.prototype.uploadFile=function(e,n,t,i){var o=this,r=(n=n||{}).deleteAfterUpload,l=this.utils.clone(n);return delete l.deleteAfterUpload,this.sitesProvider.getSite(i).then(function(n){return n.uploadFile(e,l,t)}).then(function(n){return r&&setTimeout(function(){o.fileProvider.removeExternalFile(e)},500),n})},e.prototype.uploadOrReuploadFile=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l,s;return e.filename&&!e.name?(s=e.filename,l=this.filepoolProvider.downloadUrl(o,e.url||e.fileurl,!1,t,i,e.timemodified,void 0,void 0,e).then(function(e){return r.fileProvider.getExternalFile(e)})):(s=e.name,l=Promise.resolve(e)),l.then(function(e){var t=r.getFileUploadOptions(e.toURL(),s,e.type,!0,"draft",n);return r.uploadFile(e.toURL(),t,void 0,o).then(function(e){return e.itemid})})},e.prototype.uploadOrReuploadFiles=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),e&&e.length?this.uploadOrReuploadFile(e[0],0,n,t,i).then(function(r){for(var l=[],s=1;s<e.length;s++){l.push(o.uploadOrReuploadFile(e[s],r,n,t,i))}return Promise.all(l).then(function(){return r})}):Promise.resolve(1)},e.LIMITED_SIZE_WARNING=1048576,e.WIFI_SIZE_WARNING=10485760,e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(2);var i=function(){function e(e,n,t){this.sitesProvider=e,this.translate=n,this.coursesProvider=t,this.ROOT_CACHE_KEY="mmGroups:"}return n=e,e.prototype.activityHasGroups=function(e,t){return this.getActivityGroupMode(e,t).then(function(e){return e===n.SEPARATEGROUPS||e===n.VISIBLEGROUPS}).catch(function(){return!1})},e.prototype.getActivityAllowedGroups=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var o={cmid:e,userid:n},r={cacheKey:i.getActivityAllowedGroupsCacheKey(e,n)};return t.read("core_group_get_activity_allowed_groups",o,r).then(function(e){return e&&e.groups?e.groups:Promise.reject(null)})})},e.prototype.getActivityAllowedGroupsCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"allowedgroups:"+e+":"+n},e.prototype.getActivityAllowedGroupsIfEnabled=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.activityHasGroups(e,t).then(function(o){return o?i.getActivityAllowedGroups(e,n,t):[]})},e.prototype.getActivityGroupInfo=function(e,t,i,o){var r=this;void 0===t&&(t=!0);var l={groups:[]};return this.getActivityGroupMode(e,o).then(function(t){return l.separateGroups=t===n.SEPARATEGROUPS,l.visibleGroups=t===n.VISIBLEGROUPS,l.separateGroups||l.visibleGroups?r.getActivityAllowedGroups(e,i,o):[]}).then(function(e){return e.length<=0?(l.separateGroups=!1,l.visibleGroups=!1):((t||l.visibleGroups)&&l.groups.push({id:0,name:r.translate.instant("core.allparticipants")}),l.groups=l.groups.concat(e)),l})},e.prototype.getActivityGroupMode=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={cmid:e},o={cacheKey:t.getActivityGroupModeCacheKey(e)};return n.read("core_group_get_activity_groupmode",i,o).then(function(e){return e&&void 0!==e.groupmode?e.groupmode:Promise.reject(null)})})},e.prototype.getActivityGroupModeCacheKey=function(e){return this.ROOT_CACHE_KEY+"groupmode:"+e},e.prototype.getAllUserGroups=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){return e=e||t.getId(),t.isVersionGreaterEqualThan("3.6")?n.getUserGroupsInCourse(0,e):n.coursesProvider.getUserCourses(!1,e).then(function(i){return i.push({id:t.getSiteHomeId()}),n.getUserGroups(i,e)})})},e.prototype.getUserGroups=function(e,n,t){var i=this,o=e.map(function(e){return i.getUserGroupsInCourse("object"==typeof e?e.id:e,n,t)});return Promise.all(o).then(function(e){return[].concat.apply([],e)})},e.prototype.getUserGroupsInCourse=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){var o={userid:t=t||n.getUserId(),courseid:e},r={cacheKey:i.getUserGroupsInCourseCacheKey(e,t)};return n.read("core_group_get_course_user_groups",o,r).then(function(e){return e&&e.groups?e.groups:Promise.reject(null)})})},e.prototype.getUserGroupsInCoursePrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"courseGroups:"},e.prototype.getUserGroupsInCourseCacheKey=function(e,n){return this.getUserGroupsInCoursePrefixCacheKey()+e+":"+n},e.prototype.invalidateActivityAllowedGroups=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(i.getActivityAllowedGroupsCacheKey(e,n))})},e.prototype.invalidateActivityGroupMode=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getActivityGroupModeCacheKey(e))})},e.prototype.invalidateActivityGroupInfo=function(e,n,t){var i=[];return i.push(this.invalidateActivityAllowedGroups(e,n,t)),i.push(this.invalidateActivityGroupMode(e,t)),Promise.all(i)},e.prototype.invalidateAllUserGroups=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){return t.isVersionGreaterEqualThan("3.6")?n.invalidateUserGroupsInCourse(0,e):t.invalidateWsCacheForKeyStartingWith(n.getUserGroupsInCoursePrefixCacheKey())})},e.prototype.invalidateUserGroups=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var o=e.map(function(e){return i.invalidateUserGroupsInCourse("object"==typeof e?e.id:e,n.id,t)});return Promise.all(o)})},e.prototype.invalidateUserGroupsInCourse=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getUserGroupsInCourseCacheKey(e,t))})},e.NOGROUPS=0,e.SEPARATEGROUPS=1,e.VISIBLEGROUPS=2,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(9),function(){function e(e,n,t){this.tabs=e,this.domUtils=t,this.enabled=!0,this.ionSelect=new i.r,this.loaded=!1,this.initialized=!1,this._show=!0,this.element=n.nativeElement}return Object.defineProperty(e.prototype,"show",{get:function(){return this._show},set:function(e){if(void 0!==e){var n=this._show!=e;this._show=e,this.initialized&&n&&this.tabs.tabVisibilityChanged()}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.tabs.addTab(this),this.initialized=!0},e.prototype.ngOnDestroy=function(){this.tabs.removeTab(this)},e.prototype.selectTab=function(){var e=this;this.element.classList.add("selected"),this.loaded=!0,this.ionSelect.emit(this),this.showHideNavBarButtons(!0),setTimeout(function(){e.scroll&&(e.scroll.getScrollElement().onscroll=function(n){e.tabs.showHideTabs(n)})},1)},e.prototype.unselectTab=function(){this.element.classList.remove("selected"),this.showHideNavBarButtons(!1)},e.prototype.getChildrenNavBarButtons=function(){for(var e=this.element.querySelectorAll("core-navbar-buttons"),n=[],t=0;t<e.length;t++){var i=this.domUtils.getInstanceByElement(e[t]);i&&n.push(i)}return n},e.prototype.showHideNavBarButtons=function(e){var n=this.getChildrenNavBarButtons();for(var t in n)n[t].forceHide(!e)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(1),r=(t(9),t(4),t(520)),l=(t(69),t(156)),s=(t.n(l),function(){function e(e,n,t,i,o){var r=this;this.translate=e,this.popoverCtrl=n,this.domUtils=i,this.coreTab=o,this.hideMenu=!0,this.items=[],this.itemsMovedToParent=[],this.itemsChangedStream=new l.Subject,this.itemsChangedStream.auditTime(250).subscribe(function(){r.hideMenu=!r.items.some(function(e){return!e.hidden}),r.items.sort(function(e,n){return e.priority<=n.priority?1:-1})}),this.instanceId=this.domUtils.storeInstanceByElement(t.nativeElement,this)}return e.prototype.ngOnInit=function(){this.icon=this.icon||"more",this.ariaLabel=this.title||this.translate.instant("core.info")},e.prototype.addItem=function(e){this.parentContextMenu?(this.parentContextMenu.addItem(e),-1==this.itemsMovedToParent.indexOf(e)&&this.itemsMovedToParent.push(e)):-1==this.items.indexOf(e)&&(this.items.push(e),this.itemsChanged())},e.prototype.itemsChanged=function(){this.parentContextMenu?this.parentContextMenu.itemsChanged():this.itemsChangedStream.next()},e.prototype.mergeContextMenus=function(e){this.parentContextMenu=e;for(var n=0;n<this.items.length;n++){var t=this.items[n];e.addItem(t),this.itemsMovedToParent.push(t)}this.items=[],this.itemsChanged()},e.prototype.removeItem=function(e){if(this.parentContextMenu){this.parentContextMenu.removeItem(e);(n=this.itemsMovedToParent.indexOf(e))>=0&&this.itemsMovedToParent.splice(n,1)}else{var n;(n=this.items.indexOf(e))>=0&&this.items.splice(n,1),this.itemsChanged()}},e.prototype.removeMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.removeItem(this.itemsMovedToParent[e])},e.prototype.restoreMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.addItem(this.itemsMovedToParent[e])},e.prototype.showContextMenu=function(e){this.popoverCtrl.create(r.a,{title:this.title,items:this.items}).present({ev:e})},e.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.removeMergedItems()},e=Object(i.__decorate)([Object(i.__param)(4,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(555),function(e){function n(n,t,i,o){var r=e.call(this,"CoreQuestionDelegate",n,t,i)||this;return r.defaultHandler=o,r.handlerNameProperty="type",r}return Object(i.__extends)(n,e),n.prototype.getBehaviourForQuestion=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"getBehaviour",[e,n])||n},n.prototype.getComponentForQuestion=function(e,n){var t=this.getTypeName(n);return Promise.resolve(this.executeFunctionOnEnabled(t,"getComponent",[e,n]))},n.prototype.getPreventSubmitMessage=function(e){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"getPreventSubmitMessage",[e])},n.prototype.getFullTypeName=function(e){return"qtype_"+e},n.prototype.getTypeName=function(e){return this.getFullTypeName(e.type)},n.prototype.isCompleteResponse=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"isCompleteResponse",[e,n])},n.prototype.isGradableResponse=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"isGradableResponse",[e,n])},n.prototype.isSameResponse=function(e,n,t){var i=this.getTypeName(e);return this.executeFunctionOnEnabled(i,"isSameResponse",[e,n,t])},n.prototype.isQuestionSupported=function(e){return this.hasHandler(this.getFullTypeName(e),!0)},n.prototype.prepareAnswersForQuestion=function(e,n,t,i){var o=this.getTypeName(e);return Promise.resolve(this.executeFunctionOnEnabled(o,"prepareAnswers",[e,n,t,i]))},n.prototype.validateSequenceCheck=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"validateSequenceCheck",[e,n])},n.prototype.getAdditionalDownloadableFiles=function(e){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"getAdditionalDownloadableFiles",[e])||[]},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(164),t(122);var i=t(402),o=function(){function e(e,n,t,i,o,r,l,s,a,u,c,d){this.sitesProvider=n,this.textUtils=t,this.timeUtils=i,this.appProvider=o,this.utils=r,this.userProvider=l,this.submissionDelegate=s,this.gradesProvider=a,this.filepoolProvider=u,this.assignOffline=c,this.commentsProvider=d,this.ROOT_CACHE_KEY="mmaModAssign:",this.gradingOfflineEnabled={},this.logger=e.getInstance("AddonModAssignProvider")}return n=e,e.prototype.canSubmitOffline=function(e,t){if(!this.isSubmissionOpen(e,t))return!1;var i=t.lastattempt.submission,o=t.lastattempt.teamsubmission;if(o){if(o.status===n.SUBMISSION_STATUS_SUBMITTED)return!1;if(i&&i.status===n.SUBMISSION_STATUS_SUBMITTED)return!1;if(e.preventsubmissionnotingroup&&!t.lastattempt.submissiongroup)return!1}else{if(!i)return!1;if(i.status===n.SUBMISSION_STATUS_SUBMITTED)return!1}return e.submissiondrafts},e.prototype.getAssignment=function(e,n,t){return this.getAssignmentByField(e,"cmid",n,t)},e.prototype.getAssignmentByField=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e],includenotenrolledcourses:1},l={cacheKey:o.getAssignmentCacheKey(e)};return i.read("mod_assign_get_assignments",r,l).catch(function(){return delete r.includenotenrolledcourses,i.read("mod_assign_get_assignments",r,l)}).then(function(e){if(e.courses&&e.courses.length)for(var i=e.courses[0].assignments,o=0;o<i.length;o++)if(i[o][n]==t)return i[o];return Promise.reject(null)})})},e.prototype.getAssignmentById=function(e,n,t){return this.getAssignmentByField(e,"id",n,t)},e.prototype.getAssignmentCacheKey=function(e){return this.ROOT_CACHE_KEY+"assignment:"+e},e.prototype.getAssignmentUserMappings=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={assignmentids:[e]},r={cacheKey:i.getAssignmentUserMappingsCacheKey(e)};return t.read("mod_assign_get_user_mappings",o,r).then(function(t){if(t.assignments&&t.assignments.length){if(!n||n<0)return-1;var i=t.assignments[0];if(i.assignmentid==e)for(var o=i.mappings,r=0;r<o.length;r++)if(o[r].userid==n)return o[r].id}else if(t.warnings&&t.warnings.length)return Promise.reject(t.warnings[0]);return Promise.reject(null)})})},e.prototype.getAssignmentUserMappingsCacheKey=function(e){return this.ROOT_CACHE_KEY+"usermappings:"+e},e.prototype.getAssignmentGrades=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={assignmentids:[e]},o={cacheKey:t.getAssignmentGradesCacheKey(e)};return n.read("mod_assign_get_grades",i,o).then(function(n){if(n.assignments&&n.assignments.length){var t=n.assignments[0];if(t.assignmentid==e)return t.grades}else if(n.warnings&&n.warnings.length)return 3==n.warnings[0].warningcode?[]:Promise.reject(n.warnings[0]);return Promise.reject(null)})})},e.prototype.getAssignmentGradesCacheKey=function(e){return this.ROOT_CACHE_KEY+"assigngrades:"+e},e.prototype.getParticipantFromUserId=function(e,n){if(e)for(var t in e)if(e[t].id==n){var i=e[t];return delete e[t],i}},e.prototype.getSubmissionGradingStatusColor=function(e){return e?e==n.GRADING_STATUS_GRADED||e==n.MARKING_WORKFLOW_STATE_RELEASED?"success":"danger":""},e.prototype.getSubmissionGradingStatusTranslationId=function(e){if(e)return e==n.GRADING_STATUS_GRADED||e==n.GRADING_STATUS_NOT_GRADED||e==n.GRADED_FOLLOWUP_SUBMIT?"addon.mod_assign."+e:"addon.mod_assign.markingworkflowstate"+e},e.prototype.getSubmissionObjectFromAttempt=function(e,n){return e.teamsubmission?n.teamsubmission:n.submission},e.prototype.getSubmissionPluginAttachments=function(e){var n=[];return e.fileareas&&e.fileareas.forEach(function(e){e&&e.files&&e.files.forEach(function(e){e.filename||(e.filename="/"==e.filepath[0]?e.filepath.substr(1):e.filepath),n.push(e)})}),n},e.prototype.getSubmissionPluginText=function(e,n){var t="";return e.editorfields&&(e.editorfields.forEach(function(e){t+=e.text}),!n&&e.fileareas&&e.fileareas[0]&&(t=this.textUtils.replacePluginfileUrls(t,e.fileareas[0].files))),t},e.prototype.getSubmissions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={assignmentids:[e]},o={cacheKey:t.getSubmissionsCacheKey(e)};return n.read("mod_assign_get_submissions",i,o).then(function(e){return e.warnings.length>0&&1==e.warnings[0].warningcode?{canviewsubmissions:!1}:e.assignments&&e.assignments.length?{canviewsubmissions:!0,submissions:e.assignments[0].submissions}:Promise.reject(null)})})},e.prototype.getSubmissionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"submissions:"+e},e.prototype.getSubmissionStatus=function(e,n,t,i,o,r){var l=this;return void 0===i&&(i=!0),n=n||0,this.sitesProvider.getSite(r).then(function(r){var s={assignid:e,userid:n},a={cacheKey:l.getSubmissionStatusCacheKey(e,n,t),getCacheUsingCacheKey:!0,filter:i,rewriteurls:i};return o&&(a.getFromCache=!1,a.emergencyCache=!1),i||(a.saveToCache=!1),r.read("mod_assign_get_submission_status",s,a)})},e.prototype.getSubmissionStatusCacheKey=function(e,n,t){return n||(t=!1,n=this.sitesProvider.getCurrentSiteUserId()),this.getSubmissionsCacheKey(e)+":"+n+":"+(t?1:0)},e.prototype.getSubmissionStatusColor=function(e){switch(e){case"submitted":return"success";case"draft":return"info";case"new":case"noattempt":case"noonlinesubmissions":case"nosubmission":case"gradedfollowupsubmit":return"danger";default:return"light"}},e.prototype.getSubmissionsUserData=function(e,t,i,o,r,l){var s=this,a=[],u=[],c=r&&r.length>0;return e.forEach(function(e){if(e.submitid=e.userid>0?e.userid:e.blindid,!(e.submitid<=0)){var n=s.getParticipantFromUserId(r,e.submitid);if(!c||n){n&&(o||(e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl),e.manyGroups=!!n.groups&&n.groups.length>1,n.groupname&&(e.groupid=n.groupid,e.groupname=n.groupname));var d;e.userid>0&&(o?(delete e.userid,d=s.getAssignmentUserMappings(i,e.submitid,l).then(function(n){e.blindid=n})):n||(d=s.userProvider.getProfile(e.userid,t,!0).then(function(n){e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl}).catch(function(){}))),d=d||Promise.resolve(),a.push(d.then(function(){(e.userfullname||e.blindid)&&u.push(e)}))}}}),Promise.all(a).then(function(){return c&&r.forEach(function(e){var t={submitid:e.id};o?t.blindid=e.id:(t.userid=e.id,t.userfullname=e.fullname,t.userprofileimageurl=e.profileimageurl),e.groupname&&(t.groupid=e.groupid,t.groupname=e.groupname),t.status=e.submitted?n.SUBMISSION_STATUS_SUBMITTED:n.SUBMISSION_STATUS_NEW,u.push(t)}),u})},e.prototype.getUnsupportedEditPlugins=function(e){var n=this,t=[],i=[];return e.forEach(function(e){i.push(n.submissionDelegate.isPluginSupportedForEdit(e.type).then(function(n){n||t.push(e.name)}))}),Promise.all(i).then(function(){return t})},e.prototype.listParticipants=function(e,n,t){var i=this;return n=n||0,this.sitesProvider.getSite(t).then(function(t){if(!t.wsAvailable("mod_assign_list_participants"))return Promise.reject(null);var o={assignid:e,groupid:n,filter:""},r={cacheKey:i.listParticipantsCacheKey(e,n)};return t.read("mod_assign_list_participants",o,r)})},e.prototype.listParticipantsCacheKey=function(e,n){return this.listParticipantsPrefixCacheKey(e)+":"+n},e.prototype.listParticipantsPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"participants:"+e},e.prototype.invalidateAllSubmissionData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubmissionsCacheKey(e))})},e.prototype.invalidateAssignmentData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentCacheKey(e))})},e.prototype.invalidateAssignmentUserMappingsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentUserMappingsCacheKey(e))})},e.prototype.invalidateAssignmentGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentGradesCacheKey(e))})},e.prototype.invalidateContent=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getAssignment(n,e,t).then(function(e){var o=[];return o.push(i.invalidateAllSubmissionData(e.id,t)),o.push(i.invalidateAssignmentUserMappingsData(e.id,t)),o.push(i.invalidateAssignmentGradesData(e.id,t)),o.push(i.invalidateListParticipantsData(e.id,t)),o.push(i.commentsProvider.invalidateCommentsByInstance("module",e.id,t)),o.push(i.invalidateAssignmentData(n,t)),o.push(i.gradesProvider.invalidateAllCourseGradesData(n)),Promise.all(o)})},e.prototype.invalidateFiles=function(e){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),n.COMPONENT,e)},e.prototype.invalidateSubmissionData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSubmissionsCacheKey(e))})},e.prototype.invalidateSubmissionStatusData=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(o.getSubmissionStatusCacheKey(e,n,t))})},e.prototype.invalidateListParticipantsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.listParticipantsPrefixCacheKey(e))})},e.prototype.isGradingOfflineEnabled=function(e){var n=this;return void 0!==this.gradingOfflineEnabled[e]?Promise.resolve(this.gradingOfflineEnabled[e]):this.gradesProvider.isGradeItemsAvalaible(e).then(function(t){return n.gradingOfflineEnabled[e]=t,t})},e.prototype.isOutcomesEditEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_assign_submit_grading_form")})},e.prototype.isPluginEnabled=function(e){return!0},e.prototype.isSubmissionOpen=function(e,t){if(!e||!t)return!1;var i,o=this.timeUtils.timestamp(),r=t.lastattempt,l=this.getSubmissionObjectFromAttempt(e,r);return e.cutoffdate&&(i=e.cutoffdate),(!r||!r.locked)&&(i&&r&&r.extensionduedate&&r.extensionduedate>i&&(i=r.extensionduedate),!!(i?e.allowsubmissionsfromdate<=o&&o<=i:e.allowsubmissionsfromdate<=o)&&(!l||!e.submissiondrafts||l.status!=n.SUBMISSION_STATUS_SUBMITTED))},e.prototype.logSubmissionView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_assign_view_submission_status",{assignid:e})})},e.prototype.logGradingView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_assign_view_grading_table",{assignid:e})})},e.prototype.logView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_assign_view_assign",{assignid:e})})},e.prototype.needsSubmissionToBeGraded=function(e,t){return e.gradingstatus?e.gradingstatus!=n.GRADING_STATUS_GRADED&&e.gradingstatus!=n.MARKING_WORKFLOW_STATE_RELEASED?Promise.resolve(!0):this.getSubmissionStatus(t,e.submitid,e.blindid).then(function(n){return!n.feedback||!n.feedback.gradeddate||n.feedback.gradeddate<e.timemodified}):Promise.resolve(!0)},e.prototype.saveSubmission=function(e,n,t,i,o,r,l,s){var a=this;s=s||this.sitesProvider.getCurrentSiteId();var u=function(){return a.assignOffline.saveSubmission(e,n,t,o,!r,l,s).then(function(){return!1})};return i&&!this.appProvider.isOnline()?u():this.assignOffline.deleteSubmission(e,l,s).then(function(){return a.saveSubmissionOnline(e,t,s).then(function(){return!0}).catch(function(e){return i&&e&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.saveSubmissionOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_assign_save_submission",{assignmentid:e,plugindata:n}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},e.prototype.submitForGrading=function(e,n,t,i,o,r){var l=this;r=r||this.sitesProvider.getCurrentSiteId();var s=function(){return l.assignOffline.markSubmitted(e,n,!0,t,i,void 0,r).then(function(){return!1})};return o||!this.appProvider.isOnline()?s():this.assignOffline.deleteSubmission(e,void 0,r).then(function(){return l.submitForGradingOnline(e,t,r).then(function(){return!0}).catch(function(e){return e&&!l.utils.isWebServiceError(e)?s():Promise.reject(e)})})},e.prototype.submitForGradingOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_assign_submit_for_grading",{assignmentid:e,acceptsubmissionstatement:n?1:0}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},e.prototype.submitGradingForm=function(e,n,t,i,o,r,l,s,a,u,c){var d=this;c=c||this.sitesProvider.getCurrentSiteId();var f=function(){return d.assignOffline.submitGradingForm(e,n,t,i,o,r,l,s,a,u,c).then(function(){return!1})};return this.isGradingOfflineEnabled(c).then(function(t){return t?d.appProvider.isOnline()?d.assignOffline.deleteSubmissionGrade(e,n,c).then(function(){return d.submitGradingFormOnline(e,n,i,o,r,l,s,a,u,c).then(function(){return!0}).catch(function(e){return e&&!d.utils.isWebServiceError(e)?f():Promise.reject(e)})}):f():d.submitGradingFormOnline(e,n,i,o,r,l,s,a,u,c)})},e.prototype.submitGradingFormOnline=function(e,n,t,o,r,l,s,a,u,c){return this.sitesProvider.getSite(c).then(function(c){if(n=n||c.getUserId(),c.wsAvailable("mod_assign_submit_grading_form")){var d={grade:t,attemptnumber:o,addattempt:r?1:0,workflowstate:l,applytoall:s?1:0};for(var f in a)d["outcome_"+f+"["+n+"]"]=a[f];for(var f in u)d[f]=u[f];var p=i.a.serialize(d,!0),h={assignmentid:e,userid:n,jsonformdata:JSON.stringify(p)};return c.write("mod_assign_submit_grading_form",h).then(function(e){if(e&&e.length)return Promise.reject(e[0])})}return c.write("mod_assign_save_grade",h={assignmentid:e,userid:n,grade:t,attemptnumber:o,addattempt:r?1:0,workflowstate:l,applytoall:s?1:0,plugindata:u},{responseExpected:!1})})},e.COMPONENT="mmaModAssign",e.SUBMISSION_COMPONENT="mmaModAssignSubmission",e.UNLIMITED_ATTEMPTS=-1,e.SUBMISSION_STATUS_NEW="new",e.SUBMISSION_STATUS_REOPENED="reopened",e.SUBMISSION_STATUS_DRAFT="draft",e.SUBMISSION_STATUS_SUBMITTED="submitted",e.ATTEMPT_REOPEN_METHOD_NONE="none",e.ATTEMPT_REOPEN_METHOD_MANUAL="manual",e.GRADING_STATUS_GRADED="graded",e.GRADING_STATUS_NOT_GRADED="notgraded",e.MARKING_WORKFLOW_STATE_RELEASED="released",e.NEED_GRADING="needgrading",e.GRADED_FOLLOWUP_SUBMIT="gradedfollowupsubmit",e.SUBMISSION_SAVED_EVENT="addon_mod_assign_submission_saved",e.SUBMITTED_FOR_GRADING_EVENT="addon_mod_assign_submitted_for_grading",e.GRADED_EVENT="addon_mod_assign_graded",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.ctxtMenu=e,this.closeOnClick=!0,this.hasAction=!1,this.destroyed=!1,this.action=new i.r}return e.prototype.ngOnInit=function(){this.priority=this.priority||1,this.closeOnClick=this.getBooleanValue(this.closeOnClick,!0),this.hasAction=this.action.observers.length>0,this.ariaAction=this.ariaAction||this.content,this.hasAction&&(this.href=""),this.captureLink=!(!this.href||!this.captureLink)&&this.captureLink,this.autoLogin=this.autoLogin||"check",this.destroyed||this.ctxtMenu.addItem(this)},e.prototype.getBooleanValue=function(e,n){return void 0===e?n:e&&"false"!==e},e.prototype.ngOnDestroy=function(){this.destroyed=!0,this.ctxtMenu.removeItem(this)},e.prototype.ngOnChanges=function(e){e.hidden&&!e.hidden.firstChange&&this.ctxtMenu.itemsChanged()},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e,n,t,i){this.translate=n,this.textUtils=t,this.utils=i,this.coreMarkRequired=!0,this.element=e.nativeElement,this.requiredLabel=this.translate.instant("core.required")}return e.prototype.ngOnInit=function(){this.coreMarkRequired=this.utils.isTrueOrOne(this.coreMarkRequired)},e.prototype.ngAfterViewInit=function(){if(this.coreMarkRequired){(e=this.element.getAttribute("aria-label")||this.textUtils.cleanTags(this.element.innerHTML,!0))&&this.element.setAttribute("aria-label",e+" "+this.requiredLabel)}else{var e;(e=this.element.getAttribute("aria-label"))&&this.element.setAttribute("aria-label",e.replace(" "+this.requiredLabel,""))}},e}()},,,,function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"button",[["class","bar-button"],["clear",""],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showContextMenu(t)&&i}return i},r.b,r.a)),o._15(1,1097728,null,0,l.a,[[8,""],s.a,o.p,o.K],{clear:[0,"clear"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(3,0,null,0,1,"core-icon",[],null,null,null,a.b,a.a)),o._15(4,245760,null,0,u.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"])),o._28(null,0)],function(e,n){var t=n.component;e(n,1,0,"");e(n,4,0,t.icon)},function(e,n){var t=n.component;e(n,0,0,t.hideMenu,t.ariaLabel)})}t.d(n,"a",function(){return c}),n.b=i;var o=t(1),r=t(46),l=t(43),s=t(7),a=t(131),u=t(121),c=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function i(e){return o._42(0,[],null,null)}t.d(n,"a",function(){return r}),n.b=i;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n,t){this.domUtils=t,this.BUTTON_HIDDEN_CLASS="core-navbar-button-hidden",this.forceHidden=!1,this.element=e.nativeElement,this.logger=n.getInstance("CoreNavBarButtonsComponent"),this.instanceId=this.domUtils.storeInstanceByElement(this.element,this)}return Object.defineProperty(e.prototype,"hidden",{set:function(e){this._hidden=e,this.showHideAllElements()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{set:function(e){e.forEach(function(e){e.setRole("bar-button")})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.searchHeader().then(function(n){if(n){var t="ion-buttons",i=void 0;e.element.hasAttribute("start")?t+="[start]":e.element.hasAttribute("end")&&(t+="[end]"),(i=n.querySelector(t))?(e.mergeContextMenus(i),e.movedChildren=e.domUtils.moveChildren(e.element,i),e.showHideAllElements()):e.logger.warn("The header was found, but it didn't have the right ion-buttons.",t)}}).catch(function(){e.logger.warn("Header not found.")})},e.prototype.forceHide=function(e){this.forceHidden=e,this.showHideAllElements()},e.prototype.mergeContextMenus=function(e){var n=e.querySelector("core-context-menu");if(n){var t=this.element.querySelector("core-context-menu");if(t){var i=this.domUtils.getInstanceByElement(n),o=this.domUtils.getInstanceByElement(t);i&&o&&i.coreTab===o.coreTab&&(this.mergedContextMenu=o,this.mergedContextMenu.mergeContextMenus(i),t.parentElement.removeChild(t))}}},e.prototype.searchHeader=function(e){var n=this;void 0===e&&(e=0);for(var t=this.element;t&&t.parentElement;)if(t=this.domUtils.closest(t.parentElement,".ion-page")){var i=this.searchHeaderInPage(t);if(i&&"none"!=getComputedStyle(i,null).display)return Promise.resolve(i)}return e<5?new Promise(function(t,i){setTimeout(function(){n.searchHeader(e+1).then(t,i)},200)}):Promise.reject(null)},e.prototype.searchHeaderInPage=function(e){for(var n=0;n<e.children.length;n++){var t=e.children[n];if("ION-HEADER"==t.tagName)return t}},e.prototype.showHideAllElements=function(){var e=this;this.movedChildren&&this.movedChildren.forEach(function(n){e.showHideElement(n)}),this.mergedContextMenu&&(this.forceHidden||this._hidden?this.mergedContextMenu.removeMergedItems():this.mergedContextMenu.restoreMergedItems())},e.prototype.showHideElement=function(e){e instanceof Element&&(this.forceHidden||this._hidden?e.classList.add(this.BUTTON_HIDDEN_CLASS):e.classList.remove(this.BUTTON_HIDDEN_CLASS))},e.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.movedChildren&&this.movedChildren.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)}),this.mergedContextMenu&&this.mergedContextMenu.removeMergedItems()},e}()},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-icon",[["class","core-input-required-asterisk"],["md","ios-medical"],["name","medical"],["role","img"]],[[8,"title",0],[2,"hide",null]],null,null,null,null)),r._15(1,147456,null,0,l.a,[s.a,r.p,r.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"medical","ios-medical")},function(e,n){e(n,0,0,n.component.requiredLabel,r._29(n,1)._hidden)})}function o(e){return r._42(0,[r._28(null,0),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(3,16384,null,0,a.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,[" "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.component.coreMarkRequired)},null)}t.d(n,"a",function(){return u}),n.b=o;var r=t(1),l=t(47),s=t(7),a=t(8),u=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e){this.translate=e}return e.prototype.ngOnInit=function(){this.formControl&&(this.initErrorMessages(),this.errorKeys=Object.keys(this.errorMessages))},e.prototype.initErrorMessages=function(){this.errorMessages=this.errorMessages||{},this.errorMessages.required=this.errorMessages.required||this.translate.instant("core.required"),this.errorMessages.email=this.errorMessages.email||this.translate.instant("core.login.invalidemail"),this.errorMessages.date=this.errorMessages.date||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetime=this.errorMessages.datetime||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetimelocal=this.errorMessages.datetimelocal||this.translate.instant("core.login.invaliddate"),this.errorMessages.time=this.errorMessages.time||this.translate.instant("core.login.invalidtime"),this.errorMessages.url=this.errorMessages.url||this.translate.instant("core.login.invalidurl"),this.errorMessages.max=this.errorMessages.max||"",this.errorMessages.min=this.errorMessages.min||""},e.prototype.ngOnChanges=function(e){e.errorText&&(this.errorText=e.errorText.currentValue)},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(13),o=(t(2),function(){function e(e,n){var t=this;this.sitesProvider=n,this.SYNC_TABLE="sync",this.tableSchema={name:this.SYNC_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"id",type:"TEXT",notNull:!0},{name:"time",type:"INTEGER"},{name:"warnings",type:"TEXT"}],primaryKeys:["component","id"]},this.blockedItems={},this.sitesProvider.createTableFromSchema(this.tableSchema),e.on(i.a.LOGOUT,function(e){t.clearAllBlocks(e.siteId)})}return e.prototype.blockOperation=function(e,n,t,i){i=i||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueSyncBlockId(e,n);this.blockedItems[i]||(this.blockedItems[i]={}),this.blockedItems[i][o]||(this.blockedItems[i][o]={}),this.blockedItems[i][o][t=t||"-"]=!0},e.prototype.clearAllBlocks=function(e){e?delete this.blockedItems[e]:this.blockedItems={}},e.prototype.clearBlocks=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var i=this.getUniqueSyncBlockId(e,n);this.blockedItems[t]&&delete this.blockedItems[t][i]},e.prototype.getSyncRecord=function(e,n,t){var i=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(i.SYNC_TABLE,{component:e,id:n})})},e.prototype.insertOrUpdateSyncRecord=function(e,n,t,i){var o=this;return this.sitesProvider.getSiteDb(i).then(function(i){return t.component=e,t.id=n,i.insertRecord(o.SYNC_TABLE,t)})},e.prototype.getUniqueSyncBlockId=function(e,n){return e+"#"+n},e.prototype.isBlocked=function(e,n,t){if(t=t||this.sitesProvider.getCurrentSiteId(),!this.blockedItems[t])return!1;var i=this.getUniqueSyncBlockId(e,n);return!!this.blockedItems[t][i]&&Object.keys(this.blockedItems[t][i]).length>0},e.prototype.unblockOperation=function(e,n,t,i){t=t||"-",i=i||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueSyncBlockId(e,n);this.blockedItems[i]&&this.blockedItems[i][o]&&delete this.blockedItems[i][o][t]},e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(59),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),r=function(e){function n(n,t,i){var o=e.call(this)||this;return o.courseHelper=n,o.addon=t,o.modName=i,o.useModNameToGetModule=!1,o.pattern=new RegExp("/mod/"+i+"/view.php.*([&?]id=\\d+)"),o.featureName="CoreCourseModuleDelegate_"+t,o}return o(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){o.courseHelper.navigateToModule(parseInt(t.id,10),e,i,void 0,o.useModNameToGetModule?o.modName:void 0)}}]},n}(i.a)},function(e,n,t){"use strict";function i(e){return o._42(0,[o._28(null,0)],null,null)}t.d(n,"a",function(){return r}),n.b=i;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function i(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),f._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.errorMessages[n.parent.parent.context.$implicit])})}function o(e){return f._42(0,[(e()(),f._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),f._40(1,null,["\n                    ","\n                "])),f._33(2,{$a:0}),f._32(131072,p.a,[h.a,f.i])],null,function(e,n){var t=n.component;e(n,1,0,f._41(n,1,0,f._29(n,3).transform("core.login.invalidvaluemax",e(n,2,0,t.formControl.errors.max.max))))})}function r(e){return f._42(0,[(e()(),f._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),f._40(1,null,["\n                    ","\n                "])),f._33(2,{$a:0}),f._32(131072,p.a,[h.a,f.i])],null,function(e,n){var t=n.component;e(n,1,0,f._41(n,1,0,f._29(n,3).transform("core.login.invalidvaluemin",e(n,2,0,t.formControl.errors.min.min))))})}function l(e){return f._42(0,[(e()(),f._16(0,0,null,null,10,"div",[["class","core-input-error"]],null,null,null,null,null)),(e()(),f._40(-1,null,["\n                "])),(e()(),f._11(16777216,null,null,1,null,i)),f._15(3,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n                "])),(e()(),f._11(16777216,null,null,1,null,o)),f._15(6,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n                "])),(e()(),f._11(16777216,null,null,1,null,r)),f._15(9,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.errorMessages[n.parent.context.$implicit]);e(n,6,0,!t.errorMessages[n.parent.context.$implicit]&&"max"==n.parent.context.$implicit&&t.formControl.errors.max);e(n,9,0,!t.errorMessages[n.parent.context.$implicit]&&"min"==n.parent.context.$implicit&&t.formControl.errors.min)},null)}function s(e){return f._42(0,[(e()(),f._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),f._40(-1,null,["\n            "])),(e()(),f._11(16777216,null,null,1,null,l)),f._15(3,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.formControl.hasError(n.context.$implicit))},null)}function a(e){return f._42(0,[(e()(),f._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),f._40(-1,null,["\n        "])),(e()(),f._11(16777216,null,null,1,null,s)),f._15(3,802816,null,0,m.j,[f.W,f.T,f.v],{ngForOf:[0,"ngForOf"]},null),(e()(),f._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.errorKeys)},null)}function u(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"div",[["class","core-input-error"]],null,null,null,null,null)),(e()(),f._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.errorText)})}function c(e){return f._42(0,[(e()(),f._16(0,0,null,null,7,"div",[["class","core-input-error-container"],["role","alert"]],null,null,null,null,null)),(e()(),f._40(-1,null,["\n    "])),(e()(),f._11(16777216,null,null,1,null,a)),f._15(3,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n    "])),(e()(),f._11(16777216,null,null,1,null,u)),f._15(6,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.formControl&&t.formControl.dirty&&!t.formControl.valid);e(n,6,0,t.errorText)},null)}function d(e){return f._42(0,[(e()(),f._11(16777216,null,null,1,null,c)),f._15(1,16384,null,0,m.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.formControl&&t.formControl.dirty&&!t.formControl.valid||t.errorText)},null)}t.d(n,"a",function(){return _}),n.b=d;var f=t(1),p=t(27),h=t(19),m=t(8),_=f._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(208),t(115);var i=function(){function e(e,t,i,o,r,l,s){this.sitesProvider=t,this.utils=i,this.filepoolProvider=o,this.dataOffline=r,this.appProvider=l,this.fieldsDelegate=s,this.ROOT_CACHE_KEY=n.COMPONENT+":",this.logger=e.getInstance("AddonModDataProvider")}return n=e,e.prototype.addEntry=function(e,n,t,i,o,r,l,s){var a=this;void 0===o&&(o=0),void 0===s&&(s=!1),l=l||this.sitesProvider.getCurrentSiteId();if(!this.appProvider.isOnline()||s){var u=this.checkFields(r,i);if(u)return Promise.resolve({fieldnotifications:u})}return this.addEntryOnline(e,i,o,l).catch(function(r){return a.utils.isWebServiceError(r)?Promise.reject(r):a.dataOffline.saveEntry(e,n,"add",t,o,i,void 0,l).then(function(e){return{newentryid:e}})})},e.prototype.addEntryOnline=function(e,n,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={databaseid:e,data:n};return void 0!==t&&(o.groupid=t),i.write("mod_data_add_entry",o)})},e.prototype.approveEntry=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l=function(){return r.dataOffline.saveEntry(e,n,t?"approve":"disapprove",i,void 0,void 0,void 0,o)},s=t?"disapprove":"approve";return this.dataOffline.getEntry(e,n,s,o).then(function(){return r.dataOffline.deleteEntry(e,n,s,o)}).catch(function(){return r.appProvider.isOnline()?r.approveEntryOnline(n,t,o).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()})},e.prototype.approveEntryOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_data_approve_entry",{entryid:e,approve:n?1:0})})},e.prototype.checkFields=function(e,n){var t=this,i=[],o={};return n.forEach(function(e){void 0===o[e.fieldid]&&(o[e.fieldid]=[]),o[e.fieldid].push(e)}),Object.keys(e).forEach(function(n){var r=e[n],l=t.fieldsDelegate.getFieldsNotifications(r,o[r.id]);l&&i.push({fieldname:r.name,notification:l})}),!!i.length&&i},e.prototype.deleteEntry=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=function(){return o.dataOffline.saveEntry(e,n,"delete",t,void 0,void 0,void 0,i)},l=!1;return this.dataOffline.getEntryActions(e,n,i).then(function(t){if(t&&t.length){var r=t.map(function(t){return"add"==t.action&&(l=!0),o.dataOffline.deleteEntry(e,n,t.action,i)});return Promise.all(r)}}).then(function(){if(!l)return o.appProvider.isOnline()?o.deleteEntryOnline(n,i).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()}):r()})},e.prototype.deleteEntryOnline=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_data_delete_entry",{entryid:e})})},e.prototype.editEntry=function(e,n,t,i,o,r,l){var s=this;void 0===l&&(l=!1),r=r||this.sitesProvider.getCurrentSiteId();var a,u=function(){return s.dataOffline.saveEntry(e,n,"edit",t,void 0,i,void 0,r).then(function(){return{updated:!0}})},c=!1;if(!this.appProvider.isOnline()||l){var d=this.checkFields(o,i);if(d)return Promise.resolve({fieldnotifications:d})}return this.dataOffline.getEntryActions(e,n,r).then(function(t){if(t&&t.length){var i=[];return t.forEach(function(t){"add"==t.action?(c=!0,a=t.groupid,i.push(s.dataOffline.deleteEntry(e,n,t.action,r))):"edit"==t.action&&i.push(s.dataOffline.deleteEntry(e,n,t.action,r))}),Promise.all(i)}}).then(function(){return c?s.addEntry(e,n,t,i,a,o,r,l).then(function(e){return e.updated=!0,e}):!s.appProvider.isOnline()||l?u():s.editEntryOnline(n,i,r).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):u()})})},e.prototype.editEntryOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_data_update_entry",{entryid:e,data:n})})},e.prototype.fetchAllEntries=function(e,t,i,o,r,l,s,a){return void 0===t&&(t=0),void 0===i&&(i="0"),void 0===o&&(o="DESC"),void 0===r&&(r=n.PER_PAGE),void 0===l&&(l=!1),void 0===s&&(s=!1),a=a||this.sitesProvider.getCurrentSiteId(),this.fetchEntriesRecursive(e,t,i,o,r,l,s,[],0,a)},e.prototype.fetchEntriesRecursive=function(e,n,t,i,o,r,l,s,a,u){var c=this;return this.getEntries(e,n,t,i,a,o,r,l,u).then(function(d){s=s.concat(d.entries);return o>0&&(a+1)*o<d.totalcount?c.fetchEntriesRecursive(e,n,t,i,o,r,l,s,a+1,u):s})},e.prototype.getDatabaseDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},e.prototype.getDatabaseDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getDatabaseByKey=function(e,n,t,i,o){var r=this;return void 0===o&&(o=!1),this.sitesProvider.getSite(i).then(function(i){var l={courseids:[e]},s={cacheKey:r.getDatabaseDataCacheKey(e)};return o&&(s.omitExpires=!0),i.read("mod_data_get_databases_by_courses",l,s).then(function(e){if(e&&e.databases){var i=e.databases.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getDatabase=function(e,n,t,i){return void 0===i&&(i=!1),this.getDatabaseByKey(e,"coursemodule",n,t,i)},e.prototype.getDatabaseById=function(e,n,t,i){return void 0===i&&(i=!1),this.getDatabaseByKey(e,"id",n,t,i)},e.prototype.getDatabaseAccessInformationDataPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":access:"},e.prototype.getDatabaseAccessInformationDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getDatabaseAccessInformationDataPrefixCacheKey(e)+n},e.prototype.getDatabaseAccessInformation=function(e,n,t,i,o){var r=this;return void 0===t&&(t=!1),void 0===i&&(i=!1),this.sitesProvider.getSite(o).then(function(o){var l={databaseid:e},s={cacheKey:r.getDatabaseAccessInformationDataCacheKey(e,n)};return void 0!==n&&(l.groupid=n),t?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_data_get_data_access_information",l,s)})},e.prototype.getEntries=function(e,t,i,o,r,l,s,a,u){var c=this;return void 0===t&&(t=0),void 0===i&&(i="0"),void 0===o&&(o="DESC"),void 0===r&&(r=0),void 0===l&&(l=n.PER_PAGE),void 0===s&&(s=!1),void 0===a&&(a=!1),this.sitesProvider.getSite(u).then(function(n){var u={databaseid:e,returncontents:1,page:r,perpage:l,groupid:t,sort:i,order:o},d={cacheKey:c.getEntriesCacheKey(e,t)};return s?d.omitExpires=!0:a&&(d.getFromCache=!1,d.emergencyCache=!1),n.read("mod_data_get_entries",u,d)})},e.prototype.getEntriesCacheKey=function(e,n){return void 0===n&&(n=0),this.getEntriesPrefixCacheKey(e)+n},e.prototype.getEntriesPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":entries:"},e.prototype.getEntry=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={entryid:n,returncontents:1},r={cacheKey:i.getEntryCacheKey(e,n)};return t.read("mod_data_get_entry",o,r)})},e.prototype.getEntryCacheKey=function(e,n){return this.getDatabaseDataPrefixCacheKey(e)+":entry:"+n},e.prototype.getFields=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={databaseid:e},l={cacheKey:o.getFieldsCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_data_get_fields",r,l).then(function(e){return e&&e.fields?e.fields:Promise.reject(null)})})},e.prototype.getFieldsCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":fields"},e.prototype.invalidateContent=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.getDatabase(n,e).then(function(e){var o=[];return o.push(i.invalidateDatabaseData(n,t)),o.push(i.invalidateDatabaseWSData(e.id,t)),Promise.all(o)})),o.push(this.invalidateFiles(e,t)),this.utils.allPromises(o)},e.prototype.invalidateDatabaseAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getDatabaseAccessInformationDataPrefixCacheKey(e))})},e.prototype.invalidateEntriesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getEntriesPrefixCacheKey(e))})},e.prototype.invalidateFiles=function(e,t){return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.invalidateDatabaseData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDatabaseDataCacheKey(e))})},e.prototype.invalidateDatabaseWSData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getDatabaseDataPrefixCacheKey(e))})},e.prototype.invalidateEntryData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getEntryCacheKey(e,n))})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_data_get_data_access_information")})},e.prototype.logView=function(e){var n={databaseid:e};return this.sitesProvider.getCurrentSite().write("mod_data_view_database",n)},e.prototype.searchEntries=function(e,t,i,o,r,l,s,a,u){return void 0===t&&(t=0),void 0===s&&(s=0),void 0===a&&(a=n.PER_PAGE),this.sitesProvider.getSite(u).then(function(n){var u={databaseid:e,groupid:t,returncontents:1,page:s,perpage:a};return void 0!==r&&(u.sort=r),void 0!==l&&(u.order=l),void 0!==i&&(u.search=i),void 0!==o&&(u.advsearch=o),n.read("mod_data_search_entries",u,{getFromCache:!1,saveToCache:!0,emergencyCache:!0})})},e.COMPONENT="mmaModData",e.PER_PAGE=25,e.ENTRY_CHANGED="addon_mod_data_entry_changed",e;var n}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(59),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),r=function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.translate=t,r.addon=i,r.modName=o,r.pattern=new RegExp("/mod/"+o+"/index.php.*([&?]id=\\d+)"),r.featureName="CoreCourseModuleDelegate_"+i,r}return o(n,e),n.prototype.getActions=function(e,n,t){var i=this;return[{action:function(e,n){var o={courseId:t.id,modName:i.modName,title:i.title||i.translate.instant("addon.mod_"+i.modName+".modulenameplural")};i.linkHelper.goInSite(n,"CoreCourseListModTypePage",o,e)}}]},n}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(102),r=t(156),l=(t.n(r),function(e){function n(n,i,o,r){var l=e.call(this,"CoreUserDelegate",n,i,r)||this;return l.loggerProvider=n,l.sitesProvider=i,l.coursesProvider=o,l.eventsProvider=r,l.featurePrefix="CoreUserDelegate_",l.userHandlers={},r.on(t.UPDATE_HANDLER_EVENT,function(e){if(e&&e.handler&&l.userHandlers[e.userId]){var n=l.userHandlers[e.userId],t=n.handlers.find(function(n){return n.name==e.handler});if(t){for(var i in e.data)t.data[i]=e.data[i];n.observable.next(n.handlers)}}}),l}return Object(i.__extends)(n,e),t=n,n.prototype.areHandlersLoaded=function(e){return this.userHandlers[e]&&this.userHandlers[e].loaded},n.prototype.clearUserHandlers=function(e){var n=this.userHandlers[e];n&&(n.handlers=[],n.observable.next([]),n.loaded=!1)},n.prototype.getProfileHandlersFor=function(e,n){var i,o,l,s=this;i=this.coursesProvider.canGetAdminAndNavOptions()?this.coursesProvider.getUserCourses(!0).then(function(e){var t=e.map(function(e){return e.id});return s.coursesProvider.getCoursesAdminAndNavOptions(t).then(function(e){var t=n||s.sitesProvider.getCurrentSiteHomeId();o=e.navOptions[t],l=e.admOptions[t]})}):Promise.resolve(),this.userHandlers[e.id]||(this.userHandlers[e.id]={loaded:!1,handlers:[],observable:new r.BehaviorSubject([])});var a=this.userHandlers[e.id];return a.handlers=[],i.then(function(){var i=[],r=function(r){var u=s.handlers[r],c=u.isEnabledForUser(e,n,o,l),d=Promise.resolve(c).then(function(i){if(!i)return Promise.reject(null);a.handlers.push({name:r,data:u.getDisplayData(e,n),priority:u.priority,type:u.type||t.TYPE_NEW_PAGE})}).catch(function(){});i.push(d)};for(var u in s.enabledHandlers)r(u);return Promise.all(i).then(function(){a.handlers.sort(function(e,n){return n.priority-e.priority}),a.loaded=!0,a.observable.next(a.handlers)})}).catch(function(){a.loaded=!0,a.observable.next(a.handlers)}),a.observable},n.TYPE_COMMUNICATION="communication",n.TYPE_NEW_PAGE="newpage",n.TYPE_ACTION="action",n.UPDATE_HANDLER_EVENT="CoreUserDelegate_update_handler_event",n;var t}(o.a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(13),o=function(){function e(e,n,t,o){this.loggerProvider=n,this.sitesProvider=t,this.eventsProvider=o,this.handlers={},this.enabledHandlers={},this.handlerNameProperty="name",this.updatePromises={},this.logger=this.loggerProvider.getInstance(e),o&&(o.on(i.a.LOGIN,this.updateHandlers.bind(this)),o.on(i.a.SITE_UPDATED,this.updateHandlers.bind(this)),o.on(i.a.SITE_PLUGINS_LOADED,this.updateHandlers.bind(this)))}return e.prototype.executeFunctionOnEnabled=function(e,n,t){return this.execute(this.enabledHandlers[e],n,t)},e.prototype.executeFunction=function(e,n,t){return this.execute(this.handlers[e],n,t)},e.prototype.execute=function(e,n,t){return e&&e[n]?e[n].apply(e,t):this.defaultHandler&&this.defaultHandler[n]?this.defaultHandler[n].apply(this.defaultHandler,t):void 0},e.prototype.getHandler=function(e,n){return void 0===n&&(n=!1),n?this.enabledHandlers[e]:this.handlers[e]},e.prototype.hasFunction=function(e,n,t){void 0===t&&(t=!0);var i=t?this.enabledHandlers[e]:this.handlers[e];return i&&i[n]},e.prototype.hasHandler=function(e,n){return void 0===n&&(n=!1),n?void 0!==this.enabledHandlers[e]:void 0!==this.handlers[e]},e.prototype.isLastUpdateCall=function(e){return!this.lastUpdateHandlersStart||e==this.lastUpdateHandlersStart},e.prototype.registerHandler=function(e){return void 0!==this.handlers[e[this.handlerNameProperty]]?(this.logger.log("Handler '"+e[this.handlerNameProperty]+"' already registered"),!1):(this.logger.log("Registered handler '"+e[this.handlerNameProperty]+"'"),this.handlers[e[this.handlerNameProperty]]=e,!0)},e.prototype.updateHandler=function(e,n){var t,i=this,o=this.sitesProvider.getCurrentSiteId(),r=this.sitesProvider.getCurrentSite();return this.updatePromises[o]&&this.updatePromises[o][e.name]?this.updatePromises[o][e.name]:(this.updatePromises[o]||(this.updatePromises[o]={}),t=this.sitesProvider.isLoggedIn()?this.isFeatureDisabled(e,r)?Promise.resolve(!1):Promise.resolve(e.isEnabled()):Promise.reject(null),this.updatePromises[o][e.name]=t.catch(function(){return!1}).then(function(n){i.sitesProvider.getCurrentSiteId()===o&&(n?i.enabledHandlers[e[i.handlerNameProperty]]=e:delete i.enabledHandlers[e[i.handlerNameProperty]])}).finally(function(){delete i.updatePromises[o][e.name]}),this.updatePromises[o][e.name])},e.prototype.isFeatureDisabled=function(e,n){return void 0!==this.featurePrefix&&n.isFeatureDisabled(this.featurePrefix+e.name)},e.prototype.updateHandlers=function(){var e=this,n=[],t=Date.now();this.logger.debug("Updating handlers for current site."),this.lastUpdateHandlersStart=t;for(var i in this.handlers)n.push(this.updateHandler(this.handlers[i],t));return Promise.all(n).then(function(){return!0},function(){return!0}).then(function(){e.isLastUpdateCall(t)&&e.updateData()})},e.prototype.updateData=function(){},e}()},function(e,n,t){"use strict";function i(e){return l._42(0,[(e()(),l._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,s.b,s.a)),l._15(1,1097728,null,3,a.a,[u.a,c.a,l.p,l.K,[2,d.a]],null,null),l._37(335544320,4,{contentLabel:0}),l._37(603979776,5,{_buttons:1}),l._37(603979776,6,{_icons:1}),l._15(5,16384,null,0,f.a,[],null,null),(e()(),l._40(-1,2,["\n        "])),(e()(),l._16(7,0,null,4,2,"ion-note",[["item-end",""]],null,null,null,null,null)),l._15(8,16384,null,0,p.a,[c.a,l.p,l.K],null,null),(e()(),l._40(9,null,["",""])),(e()(),l._40(-1,2,["\n    "]))],null,function(e,n){e(n,9,0,n.component.note)})}function o(e){return l._42(0,[(e()(),l._16(0,0,null,null,16,"ion-card",[],null,null,null,null,null)),l._15(1,16384,null,0,h.a,[c.a,l.p,l.K],null,null),(e()(),l._40(-1,null,["\n    "])),(e()(),l._16(3,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,s.b,s.a)),l._15(4,1097728,null,3,a.a,[u.a,c.a,l.p,l.K,[2,d.a]],null,null),l._37(335544320,1,{contentLabel:0}),l._37(603979776,2,{_buttons:1}),l._37(603979776,3,{_icons:1}),l._15(8,16384,null,0,f.a,[],null,null),(e()(),l._40(-1,2,["\n        "])),(e()(),l._16(10,0,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),l._15(11,540672,null,0,m.a,[l.p,_.a,g.a,v.a,y.a,b.a,P.a,E.a,C.a,I.a,S.a,w.a,[2,A.a],[2,T.a],[2,O.a],k.a,D.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"]},null),(e()(),l._40(-1,2,["\n    "])),(e()(),l._40(-1,null,["\n    "])),(e()(),l._11(16777216,null,null,1,null,i)),l._15(15,16384,null,0,x.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(e()(),l._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.description,t.component,t.componentId,t.showFull&&"false"!==t.showFull?0:120,"true");e(n,15,0,t.note)},null)}function r(e){return l._42(0,[(e()(),l._11(16777216,null,null,1,null,o)),l._15(1,16384,null,0,x.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.description)},null)}t.d(n,"a",function(){return M}),n.b=r;var l=t(1),s=t(31),a=t(21),u=t(20),c=t(7),d=t(28),f=t(33),p=t(225),h=t(87),m=t(42),_=t(2),g=t(5),v=t(11),y=t(19),b=t(15),P=t(3),E=t(26),C=t(6),I=t(17),S=t(10),w=t(18),A=t(22),T=t(24),O=t(35),k=t(38),D=t(13),x=t(8),M=l._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(190),t(10),t(175),t(6),t(3);var i=t(40),o=function(){function e(e,n,t,i,o,r){var l=this;this.appProvider=n,this.configProvider=t,this.utils=i,this.CRON_TABLE="cron",this.tableSchema={name:this.CRON_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"value",type:"INTEGER"}]},this.handlers={},this.queuePromise=Promise.resolve(),this.logger=e.getInstance("CoreCronDelegate"),this.appDB=this.appProvider.getDB(),this.appDB.createTableFromSchema(this.tableSchema),o.onConnect().subscribe(function(){r.run(function(){l.startNetworkHandlers()})})}return n=e,e.prototype.checkAndExecuteHandler=function(e,t,o){var r=this;if(!this.handlers[e]||!this.handlers[e].execute)return this.logger.debug("Cannot execute handler because is invalid: "+e),Promise.reject(null);var l=this.handlerUsesNetwork(e),s=!t&&this.isHandlerSync(e);return l&&!this.appProvider.isOnline()?(this.logger.debug("Cannot execute handler because device is offline: "+e),this.stopHandler(e),Promise.reject(null)):(s?this.configProvider.get(i.a.SETTINGS_SYNC_ONLY_ON_WIFI,!1).then(function(e){return!e||r.appProvider.isWifi()}):Promise.resolve(!0)).then(function(t){return t?(r.queuePromise=r.queuePromise.catch(function(){}).then(function(){return r.executeHandler(e,o).then(function(){return r.logger.debug("Execution of handler '"+e+"' was a success."),r.setHandlerLastExecutionTime(e,Date.now()).then(function(){r.scheduleNextExecution(e)})},function(t){return r.logger.error("Execution of handler '"+e+"' failed.",t),r.scheduleNextExecution(e,n.MIN_INTERVAL),Promise.reject(null)})}),r.queuePromise):(r.logger.debug("Cannot execute handler because device is using limited connection: "+e),r.scheduleNextExecution(e,n.MIN_INTERVAL),Promise.reject(null))})},e.prototype.executeHandler=function(e,t){var i=this;return new Promise(function(o,r){var l;i.logger.debug("Executing handler: "+e),Promise.resolve(i.handlers[e].execute(t)).then(o).catch(r).finally(function(){clearTimeout(l)}),l=setTimeout(function(){i.logger.debug("Resolving execution of handler '"+e+"' because it took too long."),o()},n.MAX_TIME_PROCESS)})},e.prototype.forceSyncExecution=function(e){var n=[];for(var t in this.handlers)this.isHandlerManualSync(t)&&n.push(this.forceCronHandlerExecution(t,e));return this.utils.allPromises(n)},e.prototype.forceCronHandlerExecution=function(e,n){var t=this.handlers[e];return t.running=!0,clearTimeout(t.timeout),delete t.timeout,this.checkAndExecuteHandler(e,!0,n)},e.prototype.getHandlerInterval=function(e){if(!this.handlers[e]||!this.handlers[e].getInterval)return n.DEFAULT_INTERVAL;var t=this.appProvider.isDesktop()?n.DESKTOP_MIN_INTERVAL:n.MIN_INTERVAL,i=this.handlers[e].getInterval();return i?Math.max(t,i):n.DEFAULT_INTERVAL},e.prototype.getHandlerLastExecutionId=function(e){return"last_execution_"+e},e.prototype.getHandlerLastExecutionTime=function(e){var n=this.getHandlerLastExecutionId(e);return this.appDB.getRecord(this.CRON_TABLE,{id:n}).then(function(e){var n=parseInt(e.value,10);return isNaN(n)?0:n}).catch(function(){return 0})},e.prototype.handlerUsesNetwork=function(e){return!this.handlers[e]||!this.handlers[e].usesNetwork||this.handlers[e].usesNetwork()},e.prototype.hasManualSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerManualSync(e))return!0;return!1},e.prototype.hasSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerSync(e))return!0;return!1},e.prototype.isHandlerManualSync=function(e){return this.handlers[e]&&this.handlers[e].canManualSync?this.handlers[e].canManualSync():this.isHandlerSync(e)},e.prototype.isHandlerSync=function(e){return!this.handlers[e]||!this.handlers[e].isSync||this.handlers[e].isSync()},e.prototype.register=function(e){e&&e.name&&(void 0===this.handlers[e.name]?(this.logger.debug("Register handler '"+e.name+"' in cron."),e.running=!1,this.handlers[e.name]=e,this.startHandler(e.name)):this.logger.debug("The cron handler '"+e.name+"' is already registered."))},e.prototype.scheduleNextExecution=function(e,n){var t=this;if(this.handlers[e]&&!this.handlers[e].timeout){(n?Promise.resolve(n):this.getHandlerLastExecutionTime(e).then(function(n){return n+t.getHandlerInterval(e)-Date.now()})).then(function(n){t.logger.debug("Scheduling next execution of handler '"+e+"' in '"+n+"' ms"),n<0&&(n=0),t.handlers[e].timeout=setTimeout(function(){delete t.handlers[e].timeout,t.checkAndExecuteHandler(e).catch(function(){})},n)})}},e.prototype.setHandlerLastExecutionTime=function(e,n){var t=this.getHandlerLastExecutionId(e);return this.appDB.insertRecord(this.CRON_TABLE,{id:t,value:n})},e.prototype.startHandler=function(e){this.handlers[e]?this.handlers[e].running?this.logger.debug("Handler '"+e+"', is already running."):(this.handlers[e].running=!0,this.scheduleNextExecution(e)):this.logger.debug("Cannot start handler '"+e+"', is invalid.")},e.prototype.startNetworkHandlers=function(){for(var e in this.handlers)this.handlerUsesNetwork(e)&&this.startHandler(e)},e.prototype.stopHandler=function(e){this.handlers[e]?this.handlers[e].running?(this.handlers[e].running=!1,clearTimeout(this.handlers[e].timeout),delete this.handlers[e].timeout):this.logger.debug("Cannot stop handler '"+e+"', it's not running."):this.logger.debug("Cannot stop handler '"+e+"', is invalid.")},e.DEFAULT_INTERVAL=36e5,e.MIN_INTERVAL=3e5,e.DESKTOP_MIN_INTERVAL=6e4,e.MAX_TIME_PROCESS=12e4,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(10),t(175),t(17);var i=t(154),o=(t(141),t(6),t(2),t(3),t(137)),r=t(342),l=function(){function e(e,n,t,o,r,l,s,a){this.configProvider=n,this.sitesProvider=t,this.filepoolProvider=o,this.notifProvider=r,this.utils=l,this.appProvider=s,this.calendarProvider=a,this.name="CoreUpdateManager",this.priority=i.a.MAX_RECOMMENDED_PRIORITY+300,this.blocking=!0,this.VERSION_APPLIED="version_applied",this.localNotificationsComponentsMigrate={},this.appDBTables=[{name:"config",newName:"core_config",fields:[{name:"value",type:"any"}]},{name:"cron"},{name:"current_site",fields:[{name:"siteid",newName:"siteId"}]},{name:"desktop_local_notifications",fields:[{name:"data",type:"object"},{name:"triggered",type:"boolean"}],filterFields:["id","title","text","at","data","triggered"]},{name:"files_queue",newName:"filepool_files_queue",fields:[{name:"isexternalfile",type:"boolean"},{name:"links",type:"object"},{name:"sortorder",delete:!0}]},{name:"notification_components"},{name:"notification_sites"},{name:"notifications_triggered"},{name:"shared_files"},{name:"sites",fields:[{name:"siteurl",newName:"siteUrl"},{name:"infos",newName:"info",type:"object"},{name:"privatetoken",newName:"privateToken"},{name:"config",type:"object"},{name:"loggedout",newName:"loggedOut"}]}],this.siteDBTables=[{name:"check_updates_times",fields:[{name:"courseid",newName:"courseId"}]},{name:"course_status",fields:[{name:"previous",newName:"previousStatus"},{name:"downloadtime",newName:"downloadTime"},{name:"previousdownloadtime",newName:"previousDownloadTime"}]},{name:"filepool",newName:"filepool_files",fields:[{name:"stale",type:"boolean"},{name:"downloaded",newName:"downloadTime"},{name:"isexternalfile",type:"boolean"}]},{name:"files_links",newName:"filepool_files_links",fields:[{name:"componentAndId",delete:!0}]},{name:"filepool_packages",fields:[{name:"downloadtime",newName:"downloadTime"},{name:"previousdownloadtime",newName:"previousDownloadTime"},{name:"revision",newName:"extra"},{name:"timemodified",delete:!0}]},{name:"mm_emulator_last_received_notification",newName:"core_emulator_last_received_notification",filterFields:["component","id","timecreated"]},{name:"questions",fields:[{name:"componentId",newName:"componentid"},{name:"componentAndAttempt",delete:!0},{name:"componentAndComponentId",delete:!0}]},{name:"question_answers",fields:[{name:"componentId",newName:"componentid"},{name:"componentAndAttempt",delete:!0},{name:"componentAndComponentId",delete:!0},{name:"componentAndAttemptAndQuestion",delete:!0}]},{name:"sync"},{name:"users"},{name:"wscache",fields:[{name:"data",type:"object"},{name:"expirationtime",newName:"expirationTime"}]}],this.logger=e.getInstance("CoreUpdateManagerProvider")}return e.prototype.load=function(){var e=this,n=[],t=o.a.versioncode;return this.configProvider.get(this.VERSION_APPLIED,0).then(function(n){return n||e.migrateAllDBs().then(function(){return e.migrateLocalNotificationsComponents()}).then(function(){return e.configProvider.get(e.VERSION_APPLIED,0)})}).then(function(i){return t>=2013&&i<2013&&i>0&&n.push(e.migrateFileExtensions()),t>=2017&&i<2017&&i>0&&(n.push(e.setCalendarDefaultNotifTime()),n.push(e.setSitesConfig())),t>=3500&&i<3500&&i>0&&n.push(e.logoutLegacySites()),Promise.all(n).then(function(){return e.configProvider.set(e.VERSION_APPLIED,t)}).catch(function(n){e.logger.error("Error applying update from "+i+" to "+t,n)})})},e.prototype.registerAppTablesMigration=function(e){var n=this;e.forEach(function(e){n.registerAppTableMigration(e)})},e.prototype.registerAppTableMigration=function(e){this.appDBTables.push(e)},e.prototype.registerSiteTablesMigration=function(e){var n=this;e.forEach(function(e){n.registerSiteTableMigration(e)})},e.prototype.registerSiteTableMigration=function(e){this.siteDBTables.push(e)},e.prototype.registerLocalNotifComponentMigration=function(e,n){this.localNotificationsComponentsMigrate[e]=n},e.prototype.migrateAllDBs=function(){var e=this;return window.ydn?this.migrateAppDB().then(function(){return e.sitesProvider.getSitesIds()}).then(function(n){var t=[];return n.forEach(function(n){t.push(e.migrateSiteDB(n))}),e.utils.allPromises(t)}):Promise.resolve()},e.prototype.migrateAppDB=function(){var e=new window.ydn.db.Storage("MoodleMobile"),n=this.appProvider.getDB();return this.migrateDB(e,n,this.appDBTables)},e.prototype.migrateSiteDB=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(t){var i=new window.ydn.db.Storage("Site-"+e);return n.migrateDB(i,t,n.siteDBTables)})},e.prototype.migrateDB=function(e,n,t){var i=this;if(!e||!n)return Promise.resolve();var o=[];return t.forEach(function(t){o.push(Promise.resolve(e.values(t.name,void 0,99999999)).then(function(e){for(var i=t.fields||[],o=t.filterFields||[],r=function(n){var t=e[n];i.forEach(function(e){var n=t[e.name];"object"==e.type||"any"==e.type&&"object"==typeof n?t[e.name]=JSON.stringify(n):"date"==e.type&&n?t[e.name]=n.getTime():("boolean"==e.type||"any"==e.type&&"boolean"==typeof n)&&(t[e.name]=n?1:0),e.newName&&(t[e.newName]=t[e.name],delete t[e.name]),e.delete&&delete t[e.name]});for(var r in t)0===r.indexOf("$")?delete t[r]:o.length&&-1==o.indexOf(r)&&delete t[r]},l=0;l<e.length;l++)r(l);return n.insertRecords(t.newName||t.name,e)}).catch(function(e){i.logger.error("Error migrating table "+t.name+" to "+(t.newName||t.name)+": ",e)}))}),this.utils.allPromises(o)},e.prototype.migrateFileExtensions=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.filepoolProvider.fillMissingExtensionInFiles(n))}),t.push(e.filepoolProvider.treatExtensionInQueue()),Promise.all(t)})},e.prototype.migrateLocalNotificationsComponents=function(){var e=this;if(!this.notifProvider.isAvailable())return Promise.resolve();var n=[],t=function(t){var o=i.localNotificationsComponentsMigrate[t];n.push(i.notifProvider.updateComponentName(t,o).catch(function(n){e.logger.error("Error migrating local notif component from "+t+" to "+o+": ",n)}))},i=this;for(var o in this.localNotificationsComponentsMigrate)t(o);return Promise.all(n)},e.prototype.setCalendarDefaultNotifTime=function(){var e=this;return this.notifProvider.isAvailable()?this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.calendarProvider.getAllEventsFromLocalDb(n).then(function(t){var i=[];return t.forEach(function(t){t.notificationtime==r.a.DEFAULT_NOTIFICATION_TIME&&(t.notificationtime=-1,i.push(e.calendarProvider.storeEventInLocalDb(t,n)))}),Promise.all(i)}))}),Promise.all(t)}):Promise.resolve()},e.prototype.setSitesConfig=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){return e.sitesProvider.getStoredCurrentSiteId().catch(function(){}).then(function(t){var i;return i=t?e.setSiteConfig(t):Promise.resolve(),n.forEach(function(n){n!=t&&e.setSiteConfig(n)}),i})})},e.prototype.setSiteConfig=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){if(!e.getStoredConfig()&&e.wsAvailable("tool_mobile_get_config"))return e.getConfig().then(function(t){return n.sitesProvider.addSite(e.getId(),e.getURL(),e.getToken(),e.getInfo(),e.getPrivateToken(),t)}).catch(function(){})})},e.prototype.logoutLegacySites=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.sitesProvider.getSite(n).then(function(n){if(e.sitesProvider.isLegacyMoodleByInfo(n.getInfo()))return e.sitesProvider.setSiteLoggedOut(n.getId(),!0)}))}),e.utils.allPromises(t)})},e}()},function(e,n,t){"use strict";t(0),t(1),t(1424),t(1425),t(341),t(1390),t(223),t(1386),t(519),t(6),t(25);t.d(n,"a",function(){return i});var i=function(){return function(){}}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(102),r=t(13),l=t(51),s=t(16),a=function(e){function n(n,t,i,o,l){var s=e.call(this,"CoreCourseOptionsDelegate",n,t,o)||this;return s.sitesProvider=t,s.utils=i,s.eventsProvider=o,s.coursesProvider=l,s.loaded={},s.lastUpdateHandlersForCoursesStart={},s.coursesHandlers={},s.featurePrefix="CoreCourseOptionsDelegate_",o.on(r.a.LOGOUT,function(){s.clearCoursesHandlers()}),s}return Object(i.__extends)(n,e),n.prototype.areHandlersLoaded=function(e){return!!this.loaded[e]},n.prototype.clearCoursesHandlers=function(e){e?(this.loaded[e]=!1,delete this.coursesHandlers[e]):(this.loaded={},this.coursesHandlers={})},n.prototype.clearAndInvalidateCoursesOptions=function(e){var n=[];if(this.eventsProvider.trigger(l.a.EVENT_MY_COURSES_REFRESHED),e)n.push(this.coursesProvider.invalidateCoursesAdminAndNavOptions([e])),n.push(this.invalidateCourseHandlers(e));else{n.push(this.coursesProvider.invalidateUserNavigationOptions()),n.push(this.coursesProvider.invalidateUserAdministrationOptions());for(var t in this.coursesHandlers)n.push(this.invalidateCourseHandlers(parseInt(t,10)))}return this.clearCoursesHandlers(e),Promise.all(n)},n.prototype.getHandlersForAccess=function(e,n,t,i,o){var r=this;return this.loaded[e]||(n=!1),!n&&this.coursesHandlers[e]&&this.coursesHandlers[e].access.type==t.type||(this.coursesHandlers[e]||(this.coursesHandlers[e]={}),this.coursesHandlers[e].access=t,this.coursesHandlers[e].navOptions=i,this.coursesHandlers[e].admOptions=o,this.coursesHandlers[e].deferred=this.utils.promiseDefer(),this.updateHandlersForCourse(e,t,i,o)),this.coursesHandlers[e].deferred.promise.then(function(){return r.coursesHandlers[e].enabledHandlers})},n.prototype.getHandlersToDisplay=function(e,n,t,i,o,r){var l=this;n.id=parseInt(n.id,10);var a={type:i?s.a.ACCESS_GUEST:s.a.ACCESS_DEFAULT},u=[];return o&&(n.navOptions=o),r&&(n.admOptions=r),this.loadCourseOptions(n,t).then(function(){return l.getHandlersForAccess(n.id,t,a,n.navOptions,n.admOptions)}).then(function(){var t=[];return l.coursesHandlers[n.id].enabledHandlers.forEach(function(i){t.push(Promise.resolve(i.getDisplayData(e,n)).then(function(e){u.push({data:e,priority:i.priority,prefetch:i.prefetch&&i.prefetch.bind(i),name:i.name})}).catch(function(e){l.logger.error("Error getting data for handler",i.name,e)}))}),Promise.all(t)}).then(function(){return u.sort(function(e,n){return n.priority-e.priority}),u})},n.prototype.hasHandlersForCourse=function(e,n){var t=this;return this.loadCourseOptions(e,n).then(function(){return t.hasHandlersForDefault(e.id,n,e.navOptions,e.admOptions)})},n.prototype.hasHandlersForDefault=function(e,n,t,i){return this.getHandlersForAccess(e,n,{type:s.a.ACCESS_DEFAULT},t,i).then(function(e){return!(!e||!e.length)})},n.prototype.hasHandlersForGuest=function(e,n,t,i){return this.getHandlersForAccess(e,n,{type:s.a.ACCESS_GUEST},t,i).then(function(e){return!(!e||!e.length)})},n.prototype.invalidateCourseHandlers=function(e){var n=[],t=this.coursesHandlers[e];return t?(t.enabledHandlers.forEach(function(i){i&&i.invalidateEnabledForCourse&&n.push(Promise.resolve(i.invalidateEnabledForCourse(e,t.navOptions,t.admOptions)))}),this.utils.allPromises(n)):Promise.resolve()},n.prototype.isLastUpdateCourseCall=function(e,n){return!this.lastUpdateHandlersForCoursesStart[e]||n==this.lastUpdateHandlersForCoursesStart[e]},n.prototype.loadCourseOptions=function(e,n){return this.coursesProvider.canGetAdminAndNavOptions()&&(void 0===e.navOptions||void 0===e.admOptions||n)?this.coursesProvider.getCoursesAdminAndNavOptions([e.id]).then(function(n){e.navOptions=n.navOptions[e.id],e.admOptions=n.admOptions[e.id]}):Promise.resolve()},n.prototype.updateData=function(e){if(this.sitesProvider.getCurrentSiteId()===e)for(var n in this.coursesHandlers){var t=this.coursesHandlers[n];this.updateHandlersForCourse(parseInt(n,10),t.access,t.navOptions,t.admOptions)}},n.prototype.updateHandlersForCourse=function(e,n,t,i){var o=this,r=[],l=[],s=this.sitesProvider.getCurrentSiteId(),a=Date.now();this.lastUpdateHandlersForCoursesStart[e]=a;var u=function(o){var s=c.enabledHandlers[o];r.push(Promise.resolve(s.isEnabledForCourse(e,n,t,i)).then(function(e){if(!e)return Promise.reject(null);l.push(s)}).catch(function(){}))},c=this;for(var d in this.enabledHandlers)u(d);return Promise.all(r).then(function(){return!0}).catch(function(){return!0}).finally(function(){o.isLastUpdateCourseCall(e,a)&&o.sitesProvider.getCurrentSiteId()===s&&(o.coursesHandlers[e].enabledHandlers=l,o.loaded[e]=!0,o.coursesHandlers[e].deferred.resolve())})},n}(o.a)},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(619),function(e){function n(n,t,i,o,r){var l=e.call(this,"AddonModDataFieldsDelegate",n,t,i)||this;return l.utils=o,l.defaultHandler=r,l.handlerNameProperty="type",l}return Object(i.__extends)(n,e),n.prototype.getComponentForField=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n]))},n.prototype.getFieldSearchData=function(e,n){return this.executeFunctionOnEnabled(e.type,"getFieldSearchData",[e,n])},n.prototype.getFieldEditData=function(e,n,t){return this.executeFunctionOnEnabled(e.type,"getFieldEditData",[e,n,t])},n.prototype.getFieldEditFiles=function(e,n,t){return this.executeFunctionOnEnabled(e.type,"getFieldEditFiles",[e,n,t])},n.prototype.getFieldsNotifications=function(e,n){return this.executeFunctionOnEnabled(e.type,"getFieldsNotifications",[e,n])},n.prototype.hasFiles=function(e){return this.hasFunction(e.type,"getFieldEditFiles")},n.prototype.hasFieldDataChanged=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e.type,"hasFieldDataChanged",[e,n,t])).then(function(e){return e?Promise.reject(null):Promise.resolve()})},n.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},n.prototype.overrideData=function(e,n,t,i){return t?this.executeFunctionOnEnabled(e.type,"overrideData",[n||{},t,i]):n},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(71),t(556),function(e){function n(n,t,i,o,r){var l=e.call(this,"CoreQuestionBehaviourDelegate",n,t,i)||this;return l.questionDelegate=o,l.defaultHandler=r,l.handlerNameProperty="type",l}return Object(i.__extends)(n,e),n.prototype.determineNewState=function(e,n,t,i,o){return e=this.questionDelegate.getBehaviourForQuestion(i,e),Promise.resolve(this.executeFunctionOnEnabled(e,"determineNewState",[n,t,i,o]))},n.prototype.handleQuestion=function(e,n,t){return n=this.questionDelegate.getBehaviourForQuestion(t,n),Promise.resolve(this.executeFunctionOnEnabled(n,"handleQuestion",[e,t]))},n.prototype.isBehaviourSupported=function(e){return this.hasHandler(e,!0)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.timeUtils=t,this.utils=i,this.QUESTION_TABLE="questions",this.QUESTION_ANSWERS_TABLE="question_answers",this.tablesSchema=[{name:this.QUESTION_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"slot",type:"INTEGER",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"number",type:"INTEGER"},{name:"state",type:"TEXT"}],primaryKeys:["component","attemptid","slot"]},{name:this.QUESTION_ANSWERS_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"name",type:"TEXT",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"questionslot",type:"INTEGER"},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["component","attemptid","name"]}],this.QUESTION_PREFIX_REGEX=/q\d+:(\d+)_/,this.STATES={todo:{name:"todo",class:"core-question-notyetanswered",status:"notyetanswered",active:!0,finished:!1},invalid:{name:"invalid",class:"core-question-invalidanswer",status:"invalidanswer",active:!0,finished:!1},complete:{name:"complete",class:"core-question-answersaved",status:"answersaved",active:!0,finished:!1},needsgrading:{name:"needsgrading",class:"core-question-requiresgrading",status:"requiresgrading",active:!1,finished:!0},finished:{name:"finished",class:"core-question-complete",status:"complete",active:!1,finished:!0},gaveup:{name:"gaveup",class:"core-question-notanswered",status:"notanswered",active:!1,finished:!0},gradedwrong:{name:"gradedwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},gradedpartial:{name:"gradedpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},gradedright:{name:"gradedright",class:"core-question-correct",status:"correct",active:!1,finished:!0},mangrwrong:{name:"mangrwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},mangrpartial:{name:"mangrpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},mangrright:{name:"mangrright",class:"core-question-correct",status:"correct",active:!1,finished:!0},cannotdeterminestatus:{name:"cannotdeterminestatus",class:"core-question-unknown",status:"cannotdeterminestatus",active:!0,finished:!1}},this.logger=e.getInstance("CoreQuestionProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return e.prototype.compareAllAnswers=function(e,n){var t=this.utils.mergeArraysWithoutDuplicates(Object.keys(e),Object.keys(n));for(var i in t){var o=t[i];if(!this.isExtraAnswer(o[0])&&!this.utils.sameAtKeyMissingIsBlank(e,n,o))return!1}return!0},e.prototype.convertAnswersArrayToObject=function(e,n){var t=this,i={};return e.forEach(function(e){if(n){var o=t.removeQuestionPrefix(e.name);i[o]=e.value}else i[e.name]=e.value}),i},e.prototype.getAnswer=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().getRecord(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,name:t})})},e.prototype.getAttemptAnswers=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(i.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n})})},e.prototype.getAttemptQuestions=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(i.QUESTION_TABLE,{component:e,attemptid:n})})},e.prototype.getBasicAnswers=function(e){var n={};for(var t in e)this.isExtraAnswer(t)||(n[t]=e[t]);return n},e.prototype.getBasicAnswersFromArray=function(e){var n=this,t=[];return e.forEach(function(e){n.isExtraAnswer(e.name)&&t.push(e)}),t},e.prototype.getQuestion=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().getRecord(o.QUESTION_TABLE,{component:e,attemptid:n,slot:t})})},e.prototype.getQuestionAnswers=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,questionslot:t}).then(function(e){return i?r.getBasicAnswersFromArray(e):e})})},e.prototype.getQuestionSlotFromName=function(e){if(e){var n=e.match(this.QUESTION_PREFIX_REGEX);if(n&&n[1])return parseInt(n[1],10)}return-1},e.prototype.getState=function(e){return this.STATES[e||"cannotdeterminestatus"]},e.prototype.isExtraAnswer=function(e){return"-"==(e=this.removeQuestionPrefix(e))[0]||":"==e[0]},e.prototype.removeAttemptAnswers=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(i.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n})})},e.prototype.removeAttemptQuestions=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(i.QUESTION_TABLE,{component:e,attemptid:n})})},e.prototype.removeAnswer=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,name:t})})},e.prototype.removeQuestion=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(o.QUESTION_TABLE,{component:e,attemptid:n,slot:t})})},e.prototype.removeQuestionAnswers=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,questionslot:t})})},e.prototype.removeQuestionPrefix=function(e){return e?e.replace(this.QUESTION_PREFIX_REGEX,""):""},e.prototype.saveAnswers=function(e,n,t,i,o,r,l){var s=this;return r=r||this.timeUtils.timestamp(),this.sitesProvider.getSite(l).then(function(l){var a=l.getDb(),u=[];for(var c in o){var d=o[c],f={component:e,componentid:n,attemptid:t,userid:i,questionslot:s.getQuestionSlotFromName(c),name:c,value:d,timemodified:r};u.push(a.insertRecord(s.QUESTION_ANSWERS_TABLE,f))}return Promise.all(u)})},e.prototype.saveQuestion=function(e,n,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={component:e,componentid:n,attemptid:t,userid:i,number:o.number,slot:o.slot,state:r};return l.getDb().insertRecord(s.QUESTION_TABLE,a)})},e.COMPONENT="mmQuestion",e}()},,function(e,n){e.exports=require("electron")},function(e,n,t){"use strict";function i(e){return s._42(0,[(e()(),s._16(0,0,null,null,0,"img",[["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.image)})}function o(e){return s._42(0,[(e()(),s._16(0,0,null,null,1,"core-icon",[],null,null,null,a.b,a.a)),s._15(1,245760,null,0,u.a,[s.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.component.icon)},null)}function r(e){return s._42(0,[(e()(),s._16(0,0,null,null,1,"p",[],[[2,"padding-top",null]],null,null,null,null)),(e()(),s._40(1,null,["",""]))],null,function(e,n){var t=n.component;e(n,0,0,t.image||t.icon);e(n,1,0,t.message)})}function l(e){return s._42(0,[(e()(),s._16(0,0,null,null,15,"div",[["class","core-empty-box"]],[[2,"core-empty-box-inline",null]],null,null,null,null)),(e()(),s._40(-1,null,["\n    "])),(e()(),s._16(2,0,null,null,12,"div",[["class","core-empty-box-content"],["padding",""]],null,null,null,null,null)),(e()(),s._40(-1,null,["\n        "])),(e()(),s._11(16777216,null,null,1,null,i)),s._15(5,16384,null,0,c.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n        "])),(e()(),s._11(16777216,null,null,1,null,o)),s._15(8,16384,null,0,c.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n        "])),(e()(),s._11(16777216,null,null,1,null,r)),s._15(11,16384,null,0,c.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n        "])),s._28(null,0),(e()(),s._40(-1,null,["\n    "])),(e()(),s._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.image&&!t.icon);e(n,8,0,t.icon);e(n,11,0,t.message)},function(e,n){var t=n.component;e(n,0,0,!t.image&&!t.icon||t.inline)})}t.d(n,"a",function(){return d}),n.b=l;var s=t(1),a=t(131),u=t(121),c=t(8),d=s._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.name.startsWith("fa-")?(this.newElement=document.createElement("ion-icon"),this.newElement.classList.add("icon"),this.newElement.classList.add("fa"),this.newElement.classList.add(this.name),this.isTrueProperty(this.fixedWidth)&&this.newElement.classList.add("fa-fw"),this.color&&this.newElement.classList.add("fa-"+this.color)):this.newElement=this.element.firstElementChild;for(var e=this.element.attributes,n=e.length-1;n>=0;n--)if("class"==e[n].name){if(e[n].value)for(var t=e[n].value.split(" "),i=0;i<t.length;i++)t[i]&&this.newElement.classList.add(t[i])}else this.newElement.setAttribute(e[n].name,e[n].value);this.element.parentElement.replaceChild(this.newElement,this.element)},e.prototype.isTrueProperty=function(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:!!e},e.prototype.ngOnDestroy=function(){this.newElement&&this.newElement.remove()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o,r){this.sitesProvider=t,this.textUtils=i,this.fileProvider=o,this.timeUtils=r,this.tablesSchema=[{name:n.SUBMISSIONS_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"plugindata",type:"TEXT"},{name:"onlinetimemodified",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"submitted",type:"INTEGER"},{name:"submissionstatement",type:"INTEGER"}],primaryKeys:["assignid","userid"]},{name:n.SUBMISSIONS_GRADES_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"grade",type:"REAL"},{name:"attemptnumber",type:"INTEGER"},{name:"addattempt",type:"INTEGER"},{name:"workflowstate",type:"TEXT"},{name:"applytoall",type:"INTEGER"},{name:"outcomes",type:"TEXT"},{name:"plugindata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["assignid","userid"]}],this.logger=e.getInstance("AddonModAssignOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteSubmission=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.getDb().deleteRecords(n.SUBMISSIONS_TABLE,{assignid:e,userid:t})})},e.prototype.deleteSubmissionGrade=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.getDb().deleteRecords(n.SUBMISSIONS_GRADES_TABLE,{assignid:e,userid:t})})},e.prototype.getAllAssigns=function(e){var n=[];return n.push(this.getAllSubmissions(e)),n.push(this.getAllSubmissionsGrade(e)),Promise.all(n).then(function(e){return e=[].concat.apply([],e),e=e.map(function(e){return e.assignid}),e=e.filter(function(n,t){return e.indexOf(n)==t})})},e.prototype.getAllSubmissions=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.SUBMISSIONS_TABLE)}).then(function(e){return e.forEach(function(e){e.plugindata=t.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAllSubmissionsGrade=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.SUBMISSIONS_GRADES_TABLE)}).then(function(e){return e.forEach(function(e){e.outcomes=t.textUtils.parseJSON(e.outcomes,{}),e.plugindata=t.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAssignSubmissions=function(e,t){var i=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecords(n.SUBMISSIONS_TABLE,{assignid:e})}).then(function(e){return e.forEach(function(e){e.plugindata=i.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getAssignSubmissionsGrade=function(e,t){var i=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecords(n.SUBMISSIONS_GRADES_TABLE,{assignid:e})}).then(function(e){return e.forEach(function(e){e.outcomes=i.textUtils.parseJSON(e.outcomes,{}),e.plugindata=i.textUtils.parseJSON(e.plugindata,{})}),e})},e.prototype.getSubmission=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.getDb().getRecord(n.SUBMISSIONS_TABLE,{assignid:e,userid:t})}).then(function(e){return e.plugindata=o.textUtils.parseJSON(e.plugindata,{}),e})},e.prototype.getSubmissionFolder=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var o=i.fileProvider.getSiteFolder(t.getId());return i.textUtils.concatenatePaths(o,"offlineassign/"+e+"/"+n)})},e.prototype.getSubmissionGrade=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.getDb().getRecord(n.SUBMISSIONS_GRADES_TABLE,{assignid:e,userid:t})}).then(function(e){return e.outcomes=o.textUtils.parseJSON(e.outcomes,{}),e.plugindata=o.textUtils.parseJSON(e.plugindata,{}),e})},e.prototype.getSubmissionPluginFolder=function(e,n,t,i){var o=this;return this.getSubmissionFolder(e,t,i).then(function(e){return o.textUtils.concatenatePaths(e,n)})},e.prototype.hasAssignOfflineData=function(e,n){var t=[];return t.push(this.getAssignSubmissions(e,n)),t.push(this.getAssignSubmissionsGrade(e,n)),Promise.all(t).then(function(e){for(var n=0;n<e.length;n++){var t=e[n];if(t&&t.length)return!0}return!1}).catch(function(){return!1})},e.prototype.markSubmitted=function(e,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){return l=l||s.getUserId(),a.getSubmission(e,l,s.getId()).catch(function(){var n=a.timeUtils.timestamp();return{assignid:e,courseid:t,userid:l,onlinetimemodified:r,timecreated:n,timemodified:n}}).then(function(e){return e.submitted=i?1:0,e.submissionstatement=o?1:0,e.plugindata=e.plugindata?JSON.stringify(e.plugindata):"{}",s.getDb().insertRecord(n.SUBMISSIONS_TABLE,e)})})},e.prototype.saveSubmission=function(e,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){l=l||s.getUserId();var u=a.timeUtils.timestamp(),c={assignid:e,courseid:t,plugindata:i?JSON.stringify(i):"{}",userid:l,submitted:r?1:0,timecreated:u,timemodified:u,onlinetimemodified:o};return s.getDb().insertRecord(n.SUBMISSIONS_TABLE,c)})},e.prototype.submitGradingForm=function(e,t,i,o,r,l,s,a,u,c,d){var f=this;return this.sitesProvider.getSite(d).then(function(d){var p=f.timeUtils.timestamp(),h={assignid:e,userid:t,courseid:i,grade:o,attemptnumber:r,addattempt:l?1:0,workflowstate:s,applytoall:a?1:0,outcomes:u?JSON.stringify(u):"{}",plugindata:c?JSON.stringify(c):"{}",timemodified:p};return d.getDb().insertRecord(n.SUBMISSIONS_GRADES_TABLE,h)})},e.SUBMISSIONS_TABLE="addon_mod_assign_submissions",e.SUBMISSIONS_GRADES_TABLE="addon_mod_assign_submissions_grading",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(117),o=(t(71),function(){function e(e,n,t,i,o,r,l,s,a){this.domUtils=e,this.textUtils=n,this.questionProvider=t,this.sitesProvider=i,this.translate=o,this.urlUtils=r,this.utils=l,this.filepoolProvider=s,this.questionDelegate=a,this.lastErrorShown=0}return e.prototype.addBehaviourButton=function(e,n){n&&e&&(e.behaviourButtons||(e.behaviourButtons=[]),e.behaviourButtons.push({id:n.id,name:n.name,value:n.value,disabled:n.disabled}))},e.prototype.extractQbehaviourButtons=function(e,n){var t=this;n=n||'.im-controls input[type="submit"]';var i=this.domUtils.convertToElement(e.html);Array.from(i.querySelectorAll(n)).forEach(function(n){t.addBehaviourButton(e,n)}),e.html=i.innerHTML},e.prototype.extractQbehaviourCBM=function(e){var n=this,t=this.domUtils.convertToElement(e.html),i=Array.from(t.querySelectorAll('.im-controls .certaintychoices label[for*="certainty"]'));return e.behaviourCertaintyOptions=[],i.forEach(function(t){var i=t.querySelector('input[type="radio"]');i&&(e.behaviourCertaintyOptions.push({id:i.id,name:i.name,value:i.value,text:n.textUtils.cleanTags(t.innerHTML),disabled:i.disabled}),i.checked&&(e.behaviourCertaintySelected=i.value))}),e.localAnswers&&void 0!==e.localAnswers["-certainty"]&&(e.behaviourCertaintySelected=e.localAnswers["-certainty"]),i.length>0},e.prototype.extractQbehaviourRedoButton=function(e){var n='input[type="submit"][name*=redoslot], input[type="submit"][name*=tryagain]';if(!this.searchBehaviourButton(e,"html",".outcome "+n)){if(e.feedbackHtml&&this.searchBehaviourButton(e,"feedbackHtml",n))return;e.infoHtml&&this.searchBehaviourButton(e,"infoHtml",n)}},e.prototype.extractQbehaviourSeenInput=function(e){var n=this.domUtils.convertToElement(e.html),t=n.querySelector('input[type="hidden"][name*=seen]');return!!t&&(e.behaviourSeenInput={name:t.name,value:t.value},t.parentElement.removeChild(t),e.html=n.innerHTML,!0)},e.prototype.extractQuestionComment=function(e){this.extractQuestionLastElementNotInContent(e,".comment","commentHtml")},e.prototype.extractQuestionFeedback=function(e){this.extractQuestionLastElementNotInContent(e,".outcome","feedbackHtml")},e.prototype.extractQuestionInfoBox=function(e,n){this.extractQuestionLastElementNotInContent(e,n,"infoHtml")},e.prototype.extractQuestionLastElementNotInContent=function(e,n,t){for(var i=this.domUtils.convertToElement(e.html),o=Array.from(i.querySelectorAll(n)),r=o.pop();r;){if(!this.domUtils.closest(r,".formulation"))return e[t]=r.innerHTML,r.parentElement.removeChild(r),void(e.html=i.innerHTML);r=o.pop()}},e.prototype.extractQuestionScripts=function(e){var n=this;if(e.scriptsCode="",e.initObjects=null,e.amdArgs=null,e.html){var t=e.html.match(/<script[^>]*>[\s\S]*?<\/script>/gm);if(!t)return;t.forEach(function(t){e.scriptsCode+=t,e.html=e.html.replace(t,"");var i=t.match(new RegExp("M.qtype_"+e.type+".init_question\\(.*?}\\);","mg"));if(i){var o=i.pop();o=(o=o.replace("M.qtype_"+e.type+".init_question(","")).substr(0,o.length-2),e.initObjects=n.textUtils.parseJSON(o,null)}var r=new RegExp('require\\(\\["qtype_'+e.type+'/question"\\], function\\(amd\\) \\{ amd.init\\(("q'+e.slot+'".*?)\\); \\}\\);;',"m"),l=t.match(r);l&&(e.amdArgs=n.textUtils.parseJSON("["+l[1]+"]",null))})}},e.prototype.getAllInputNamesFromHtml=function(e){var n=this,t=this.domUtils.convertToElement("<form>"+e+"</form>").children[0],i={};return Array.from(t.elements).forEach(function(e){var t=e.name||"";t&&!t.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&(i[n.questionProvider.removeQuestionPrefix(t)]=!0)}),i},e.prototype.getAnswersFromForm=function(e){if(!e||!e.elements)return{};var n={};return Array.from(e.elements).forEach(function(e){var t=e.name||e.getAttribute("ng-reflect-name")||"";t&&!t.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&("checkbox"==e.type?n[t]=!!e.checked:"radio"==e.type?e.checked&&(n[t]=e.value):n[t]=e.value)}),n},e.prototype.getQuestionAttachmentsFromHtml=function(e){var n=this,t=this.domUtils.convertToElement(e);this.domUtils.removeElement(t,"div[id*=filemanager]");var i=[];return Array.from(t.querySelectorAll("a")).forEach(function(e){var t=e.innerHTML;e.href&&t&&(t=n.textUtils.cleanTags(t,!0).trim(),i.push({filename:t,fileurl:e.href}))}),i},e.prototype.getQuestionSequenceCheckFromHtml=function(e){if(e){var n=this.domUtils.convertToElement(e).querySelector("input[name*=sequencecheck]");if(n&&void 0!==n.name&&void 0!==n.value)return{name:n.name,value:n.value}}},e.prototype.getQuestionStateClass=function(e){var n=this.questionProvider.getState(e);return n?n.class:""},e.prototype.getValidationErrorFromHtml=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(n,".validationerror")},e.prototype.hasDraftFileUrls=function(e){var n=this.sitesProvider.getCurrentSite().getURL();return"/"!=n.slice(-1)&&(n=n+="/"),n+="draftfile.php",-1!=e.indexOf(n)},e.prototype.loadLocalAnswersInHtml=function(e){var n=this,t=this.domUtils.convertToElement("<form>"+e.html+"</form>").children[0];Array.from(t.elements).forEach(function(t){var i=t.name||"";if(i&&!i.match(/_:flagged$/)&&"submit"!=t.type&&"BUTTON"!=t.tagName&&(i=n.questionProvider.removeQuestionPrefix(i),e.localAnswers&&void 0!==e.localAnswers[i]))if("TEXTAREA"==t.tagName)t.innerHTML=e.localAnswers[i];else if("SELECT"==t.tagName){var o=t.querySelector('option[value="'+e.localAnswers[i]+'"]');o&&o.setAttribute("selected","selected")}else"radio"==t.type?t.value==e.localAnswers[i]?t.setAttribute("checked","checked"):t.removeAttribute("checked"):"checkbox"==t.type?n.utils.isTrueOrOne(e.localAnswers[i])?t.setAttribute("checked","checked"):t.removeAttribute("checked"):t.setAttribute("value",e.localAnswers[i])}),e.html=t.innerHTML},e.prototype.prefetchQuestionFiles=function(e,n,t,o){var r=this,l=this.domUtils.extractDownloadableFilesFromHtml(e.html);return n||(n=i.a.COMPONENT,t=e.id),l.push.apply(l,this.questionDelegate.getAdditionalDownloadableFiles(e)),this.sitesProvider.getSite(o).then(function(e){var i=[];return l.forEach(function(l){!e.canDownloadFiles()&&r.urlUtils.isPluginFileUrl(l)||l.indexOf("theme/image.php")>-1&&l.indexOf("flagged")>-1||i.push(r.filepoolProvider.addToQueueByUrl(o,l,n,t))}),Promise.all(i)})},e.prototype.prepareAnswers=function(e,n,t,i){var o=this,r=[];return(e=e||[]).forEach(function(e){r.push(o.questionDelegate.prepareAnswersForQuestion(e,n,t,i))}),this.utils.allPromises(r).then(function(){return n})},e.prototype.replaceCorrectnessClasses=function(e){this.domUtils.replaceClassesInElement(e,{correct:"core-question-answer-correct",incorrect:"core-question-answer-incorrect"})},e.prototype.replaceFeedbackClasses=function(e){this.domUtils.replaceClassesInElement(e,{outcome:"core-question-feedback-container core-question-feedback-padding",specificfeedback:"core-question-feedback-container core-question-feedback-inline"})},e.prototype.searchBehaviourButton=function(e,n,t){var i=this.domUtils.convertToElement(e[n]),o=i.querySelector(t);return!!o&&(this.addBehaviourButton(e,o),o.parentElement.removeChild(o),e[n]=i.innerHTML,!0)},e.prototype.showComponentError=function(e,n){var t=Date.now();t-this.lastErrorShown>500&&(this.lastErrorShown=t,this.domUtils.showErrorModalDefault(n,"addon.mod_quiz.errorparsequestions",!0)),e&&e.emit()},e.prototype.treatCorrectnessIcons=function(e){Array.from(e.querySelectorAll("img.icon, img.questioncorrectnessicon")).forEach(function(e){if(e.src){var n=document.createElement("i");if(e.src.indexOf("incorrect")>-1)n.className="icon fa fa-remove text-danger fa-fw questioncorrectnessicon";else{if(!(e.src.indexOf("correct")>-1))return;n.className="icon fa fa-check text-success fa-fw questioncorrectnessicon"}n.title=e.title,n.ariaLabel=e.title,e.parentNode.replaceChild(n,e)}});Array.from(e.querySelectorAll(".feedbackspan.accesshide")).forEach(function(e){var n=e.previousSibling;n&&(n.classList.contains("icon")||n.classList.contains("questioncorrectnessicon"))&&(n.classList.add("questioncorrectnessicon"),e.innerHTML&&n.setAttribute("tappable",""))})},e.prototype.treatCorrectnessIconsClicks=function(e,n,t){var i=this,o=Array.from(e.querySelectorAll("i.icon.questioncorrectnessicon[tappable]")),r=this.translate.instant("core.question.feedback");o.forEach(function(e){var o=e.parentElement.querySelector(".feedbackspan.accesshide");o&&e.addEventListener("click",function(e){i.textUtils.expandText(r,o.innerHTML,n,t)})})},e}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e,n,t,i,o,r,l,s){this.sitesProvider=t,this.appProvider=i,this.syncProvider=o,this.textUtils=r,this.translate=l,this.timeUtils=s,this.component="core",this.syncInterval=3e5,this.syncPromises={},this.logger=n.getInstance(e),this.component=e}return e.prototype.addOngoingSync=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueSyncId(e);return this.syncPromises[t]||(this.syncPromises[t]={}),this.syncPromises[t][o]=n,n.finally(function(){delete i.syncPromises[t][o]})},e.prototype.getOngoingSync=function(e,n){if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n)){var t=this.getUniqueSyncId(e);return this.syncPromises[n][t]}},e.prototype.getReadableSyncTime=function(e,n){var t=this;return this.getSyncTime(e,n).then(function(e){return t.getReadableTimeFromTimestamp(e)})},e.prototype.getReadableTimeFromTimestamp=function(e){return e?this.timeUtils.userDate(e):this.translate.instant("core.never")},e.prototype.getSyncTime=function(e,n){return this.syncProvider.getSyncRecord(this.component,e,n).then(function(e){return e.time}).catch(function(){return 0})},e.prototype.getSyncWarnings=function(e,n){var t=this;return this.syncProvider.getSyncRecord(this.component,e,n).then(function(e){return t.textUtils.parseJSON(e.warnings,[])}).catch(function(){return[]})},e.prototype.getUniqueSyncId=function(e){return this.component+"#"+e},e.prototype.isSyncing=function(e,n){n=n||this.sitesProvider.getCurrentSiteId();var t=this.getUniqueSyncId(e);return!(!this.syncPromises[n]||!this.syncPromises[n][t])},e.prototype.isSyncNeeded=function(e,n){var t=this;return this.getSyncTime(e,n).then(function(e){return Date.now()-t.syncInterval>=e})},e.prototype.setSyncTime=function(e,n,t){return t=void 0!==t?t:Date.now(),this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{time:t},n)},e.prototype.setSyncWarnings=function(e,n,t){var i=JSON.stringify(n||[]);return this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{warnings:i},t)},e.prototype.syncOnSites=function(e,n,t,i){if(!this.appProvider.isOnline())return this.logger.debug("Cannot sync '"+e+"' because device is offline."),Promise.reject(null);var o;return i?(this.logger.debug("Try to sync '"+e+"' in site '"+i+"'."),o=Promise.resolve([i])):(this.logger.debug("Try to sync '"+e+"' in all sites."),o=this.sitesProvider.getSitesIds()),t=t||[],o.then(function(e){var i=[];return e.forEach(function(e){i.push(n.apply(n,[e].concat(t)))}),Promise.all(i)})},e.prototype.waitForSync=function(e,n){var t=this.getOngoingSync(e,n);return t?t.catch(function(){}):Promise.resolve()},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t,i,o){var r=e.call(this,"AddonModQuizAccessRulesDelegate",n,t,i)||this;return r.utils=o,r.handlerNameProperty="ruleName",r}return Object(i.__extends)(n,e),n.prototype.getAccessRuleHandler=function(e){return this.getHandler(e,!0)},n.prototype.getFixedPreflightData=function(e,n,t,i,o,r){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"getFixedPreflightData",[n,t,i,o,r])))}),this.utils.allPromises(s).catch(function(){})},n.prototype.getPreflightComponent=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(e,"getPreflightComponent",[n]))},n.prototype.isAccessRuleSupported=function(e){return this.hasHandler(e,!0)},n.prototype.isPreflightCheckRequired=function(e,n,t,i,o){var r=this,l=[],s=!1;return(e=e||[]).forEach(function(e){l.push(r.isPreflightCheckRequiredForRule(e,n,t,i,o).then(function(e){e&&(s=!0)}))}),this.utils.allPromises(l).then(function(){return s}).catch(function(){return s})},n.prototype.isPreflightCheckRequiredForRule=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(e,"isPreflightCheckRequired",[n,t,i,o]))},n.prototype.notifyPreflightCheckPassed=function(e,n,t,i,o,r){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckPassed",[n,t,i,o,r])))}),this.utils.allPromises(s).catch(function(){})},n.prototype.notifyPreflightCheckFailed=function(e,n,t,i,o,r){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckFailed",[n,t,i,o,r])))}),this.utils.allPromises(s).catch(function(){})},n.prototype.shouldShowTimeLeft=function(e,n,t,i){e=e||[];for(var o in e){if(this.executeFunctionOnEnabled(e[o],"shouldShowTimeLeft",[n,t,i]))return!0}return!1},n}(t(102).a)},,,function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[l.a,o.p,o.K],{color:[0,"color"],name:[1,"name"],ios:[2,"ios"],md:[3,"md"],isActive:[4,"isActive"]},null)],function(e,n){var t=n.component;e(n,1,0,t.color,t.name,t.ios,t.md,t.isActive)},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}t.d(n,"a",function(){return s}),n.b=i;var o=t(1),r=t(47),l=t(7),s=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4),t(10),t(17),t(2),t(3);var i=t(40),o=function(){function e(e,n,t,i,o,r){this.fileProvider=e,this.filepoolProvider=n,this.sitesProvider=t,this.appProvider=i,this.translate=o,this.utils=r}return e.prototype.downloadAndOpenFile=function(e,n,t,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=this.getFileUrl(e),u=this.getFileTimemodified(e);return this.downloadFileIfNeeded(e,a,n,t,u,o,r,l).then(function(c){if(c)return 0===c.indexOf("http")?(c+="#moodlemobile-embedded",s.utils.openOnlineFile(c).catch(function(c){if(!s.fileProvider.isAvailable())return Promise.reject(c);return(o?Promise.resolve(o):s.filepoolProvider.getFileStateByUrl(l,a,u)).then(function(o){if(o==i.a.DOWNLOADING)return Promise.reject(s.translate.instant("core.erroropenfiledownloading"));return(o===i.a.NOT_DOWNLOADED?s.downloadFile(a,n,t,u,r,e,l):s.filepoolProvider.getInternalUrlByUrl(l,a)).then(function(e){return s.utils.openFile(e)})})})):s.utils.openFile(c)})},e.prototype.downloadFileIfNeeded=function(e,n,t,o,r,l,s,a){var u=this;return a=a||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(a).then(function(c){var d=c.fixPluginfileURL(n);if(u.fileProvider.isAvailable()){return(l?Promise.resolve(l):u.filepoolProvider.getFileStateByUrl(a,n,r)).then(function(l){var c=u.appProvider.isWifi(),f=u.appProvider.isOnline();return l==i.a.DOWNLOADED?u.filepoolProvider.getUrlByUrl(a,n,t,o,r,!1,!1,e):f||u.isStateDownloaded(l)?(s&&s({calculating:!0}),u.filepoolProvider.shouldDownloadBeforeOpen(d,e.filesize).then(function(){if(l!=i.a.DOWNLOADING)return u.downloadFile(n,t,o,r,s,e,a)},function(){return c&&u.downloadFile(n,t,o,r,s,e,a),!u.isStateDownloaded(l)||f?d:u.filepoolProvider.getUrlByUrl(a,n,t,o,r,!1,!1,e)})):Promise.reject(u.translate.instant("core.networkerrormsg"))})}return d})},e.prototype.downloadFile=function(e,n,t,i,o,r,l){var s=this;return l=l||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(l).then(function(a){return a.canDownloadFiles()?s.filepoolProvider.downloadUrl(l,e,!1,n,t,i,o,void 0,r).catch(function(n){return s.filepoolProvider.getFileStateByUrl(l,e,i).then(function(t){return s.isStateDownloaded(t)?s.filepoolProvider.getInternalUrlByUrl(l,e):Promise.reject(n)})}):Promise.reject(s.translate.instant("core.cannotdownloadfiles"))})},e.prototype.getFileUrl=function(e){return e.fileurl||e.url},e.prototype.getFileTimemodified=function(e){return e.timemodified||0},e.prototype.isStateDownloaded=function(e){return e===i.a.DOWNLOADED||e===i.a.OUTDATED},e.prototype.shouldOpenInBrowser=function(e){if(!e||!e.isexternalfile||!e.mimetype)return!1;var n=e.mimetype;return-1!=n.indexOf("application/vnd.google-apps.")||"onedrive"==e.repositorytype&&(-1!=n.indexOf("application/vnd.openxmlformats-officedocument")||"text/plain"==n||"document/unknown"==n)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(9),t(321),t(4);var i=t(50),o=t(67),r=(t(406),function(){function e(e,n,t,i,o,r,l,s,a,u,c,d){this.appProvider=n,this.translate=t,this.fileUploaderProvider=i,this.domUtils=o,this.textUtils=r,this.fileProvider=l,this.utils=s,this.actionSheetCtrl=a,this.uploaderDelegate=u,this.camera=c,this.platform=d,this.logger=e.getInstance("CoreFileUploaderProvider")}return e.prototype.confirmUploadFile=function(e,n,t,i,r){if(0==e)return Promise.resolve();if(!t&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"));if(i=void 0===i?o.a.WIFI_SIZE_WARNING:i,r=void 0===r?o.a.LIMITED_SIZE_WARNING:r,e<0)return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadunknownsize"));if(e>=i||this.appProvider.isNetworkAccessLimited()&&e>=r){var l=this.textUtils.bytesToSize(e,2);return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadfile",{size:l}))}return n?this.domUtils.showConfirm(this.translate.instant("core.areyousure")):Promise.resolve()},e.prototype.copyAndUploadFile=function(e,n,t){var o=this;t=t||e.name;var r=this.domUtils.showModalLoading("core.fileuploader.readingfile",!0);return this.fileProvider.getUniqueNameInFolder(i.a.TMPFOLDER,t).then(function(n){var t=o.textUtils.concatenatePaths(i.a.TMPFOLDER,n);return o.fileProvider.writeFileDataInFile(e,t,function(e){o.showProgressModal(r,"core.fileuploader.readingfileperc",e)})}).catch(function(e){return o.logger.error("Error reading file to upload.",e),r.dismiss(),Promise.reject(o.translate.instant("core.fileuploader.errorreadingfile"))}).then(function(i){return r.dismiss(),n?o.uploadGenericFile(i.toURL(),t,e.type,!0):i})},e.prototype.copyToTmpFolder=function(e,n,t,o){var r,l=this,s=this.fileProvider.getFileAndDirectoryFromPath(e).name;return(void 0!==t&&-1!=t?this.fileProvider.getExternalFile(e).then(function(e){return l.fileProvider.getFileObjectFromFileEntry(e).then(function(e){e.size>t&&(r=e)})}).catch(function(){}):Promise.resolve()).then(function(){return r?l.errorMaxBytes(t,r.name):(s=s.replace(/(\.[^\.]*)\?[^\.]*$/,"$1"),l.fileProvider.getUniqueNameInFolder(i.a.TMPFOLDER,s,o))}).then(function(t){var o=l.textUtils.concatenatePaths(i.a.TMPFOLDER,t);return n?l.fileProvider.moveExternalFile(e,o):l.fileProvider.copyExternalFile(e,o)})},e.prototype.errorMaxBytes=function(e,n){var t=this.translate.instant("core.fileuploader.maxbytesfile",{$a:{file:n,size:this.textUtils.bytesToSize(e,2)}});return this.domUtils.showErrorModal(t),Promise.reject(null)},e.prototype.filePickerClosed=function(){this.filePickerDeferred&&(this.filePickerDeferred.reject(this.domUtils.createCanceledError()),this.filePickerDeferred=void 0)},e.prototype.fileUploaded=function(e){this.filePickerDeferred&&(this.filePickerDeferred.resolve(e),this.filePickerDeferred=void 0),this.actionSheet&&this.actionSheet.dismiss()},e.prototype.selectAndUploadFile=function(e,n,t){return this.selectFileWithPicker(e,!1,n,t,!0)},e.prototype.selectFile=function(e,n,t,i){return this.selectFileWithPicker(e,n,t,i,!1)},e.prototype.selectFileWithPicker=function(e,n,t,i,o){var r=this,l=[{text:this.translate.instant("core.cancel"),role:"cancel",handler:function(){r.filePickerClosed()}}],s=this.uploaderDelegate.getHandlers(i);return this.filePickerDeferred=this.utils.promiseDefer(),s.sort(function(e,n){return e.priority<=n.priority?1:-1}),s.forEach(function(t){l.push({text:r.translate.instant(t.title),icon:t.icon,cssClass:t.class,handler:function(){return!!t.action&&(n||r.appProvider.isOnline()?(t.action(e,o,n,t.mimetypes).then(function(t){return t.treated?t.result:t.fileEntry?r.uploadFileEntry(t.fileEntry,t.delete,e,o,n):t.path?r.fileProvider.getFile(t.path).catch(function(){return r.fileProvider.getExternalFile(t.path)}).then(function(i){return r.uploadFileEntry(i,t.delete,e,o,n)}):Promise.reject("No file received")}).then(function(e){r.fileUploaded(e)}).catch(function(e){e&&r.domUtils.showErrorModal(e)}),!1):(r.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0),!1))}})}),this.actionSheet=this.actionSheetCtrl.create({title:t||this.translate.instant("core.fileuploader."+(o?"uploadafile":"selectafile")),buttons:l}),this.actionSheet.present(),setTimeout(function(){s.forEach(function(t){t.afterRender&&t.afterRender(e,o,n,t.mimetypes)})},500),this.filePickerDeferred.promise},e.prototype.showConfirmAndUploadInSite=function(e,n,t){var i=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(o){return i.confirmUploadFile(o.size).then(function(){return i.uploadGenericFile(e.toURL(),o.name,o.type,n,t).then(function(){i.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})}).catch(function(e){return e&&i.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return i.domUtils.showErrorModal("core.fileuploader.errorreadingfile",!0),Promise.reject(null)})},e.prototype.treatCaptureError=function(e,n){if(e){if("string"==typeof e)return this.logger.error("Error while recording audio/video: "+e),e.indexOf("No Activity found")>-1?Promise.reject(this.translate.instant("core.fileuploader.errornoapp")):Promise.reject(this.translate.instant(n));if(3!=e.code)return this.logger.error("Error while recording audio/video",e),Promise.reject(this.translate.instant(n));this.logger.debug("Cancelled")}return Promise.reject(null)},e.prototype.treatImageError=function(e,n){if(e){if("string"!=typeof e)return Promise.reject(this.translate.instant(n));if(e.toLowerCase().indexOf("error")>-1||e.toLowerCase().indexOf("unable")>-1)return this.logger.error("Error getting image: "+e),Promise.reject(e);this.logger.debug("Cancelled")}return Promise.reject(null)},e.prototype.uploadAudioOrVideo=function(e,n,t,i){var o=this;this.logger.debug("Trying to record a "+(e?"audio":"video")+" file");var r={limit:1,mimetypes:i};return(e?this.fileUploaderProvider.captureAudio(r):this.fileUploaderProvider.captureVideo(r)).then(function(e){var r=e[0],l=r.fullPath,s=o.fileUploaderProvider.isInvalidMimetype(i,l);return s?Promise.reject(s):(o.appProvider.isMobile()&&-1==l.indexOf("file://")&&(l="file://"+l),t?o.uploadFile(l,n,!0,o.fileUploaderProvider.getMediaUploadOptions(r)):o.copyToTmpFolder(l,!0,n))},function(n){return o.treatCaptureError(n,e?"core.fileuploader.errorcapturingaudio":"core.fileuploader.errorcapturingvideo")})},e.prototype.uploadGenericFile=function(e,n,t,i,o){var r=this.fileUploaderProvider.getFileUploadOptions(e,n,t,i);return this.uploadFile(e,-1,!1,r,o)},e.prototype.uploadImage=function(e,n,t,i){var o=this;this.logger.debug("Trying to capture an image with camera");var r={quality:50,destinationType:this.camera.DestinationType.FILE_URI,correctOrientation:!0};if(e){var l=!i||this.utils.indexOfRegexp(i,/^image\//)>-1,s=!i||this.utils.indexOfRegexp(i,/^video\//)>-1;r.sourceType=this.camera.PictureSourceType.PHOTOLIBRARY,r.popoverOptions={x:10,y:10,width:this.platform.width()-200,height:this.platform.height()-200,arrowDir:this.camera.PopoverArrowDirection.ARROW_ANY},l&&!s?r.mediaType=this.camera.MediaType.PICTURE:!l&&s?r.mediaType=this.camera.MediaType.VIDEO:this.platform.is("ios")&&(r.mediaType=this.camera.MediaType.ALLMEDIA)}else i&&(i.indexOf("image/jpeg")>-1?r.encodingType=this.camera.EncodingType.JPEG:i.indexOf("image/png")>-1&&(r.encodingType=this.camera.EncodingType.PNG));return this.fileUploaderProvider.getPicture(r).then(function(r){var l=o.fileUploaderProvider.isInvalidMimetype(i,r);return l?Promise.reject(l):t?o.uploadFile(r,n,!0,o.fileUploaderProvider.getCameraUploadOptions(r,e)):o.copyToTmpFolder(r,!e,n,"jpg")},function(n){return o.treatImageError(n,e?"core.fileuploader.errorgettingimagealbum":"core.fileuploader.errorcapturingimage")})},e.prototype.uploadFileEntry=function(e,n,t,i,o,r){var l=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(s){return l.uploadFileObject(s,t,i,o,r).then(function(t){return n&&l.fileProvider.removeFileByFileEntry(e),t})})},e.prototype.uploadFileObject=function(e,n,t,i,o){var r=this;return-1!=n&&e.size>n?this.errorMaxBytes(n,e.name):this.confirmUploadFile(e.size,!1,i).then(function(){return r.copyAndUploadFile(e,t,o)})},e.prototype.uploadFile=function(e,n,t,i,o){var r,l=this,s=this.translate.instant("core.error"),a=this.translate.instant("core.retry"),u=this.translate.instant("core.fileuploader.uploading"),c=function(r){return l.domUtils.showConfirm(r,s,a).then(function(){return l.uploadFile(e,n,t,i,o)},function(){return i.deleteAfterUpload&&l.fileProvider.removeExternalFile(e),Promise.reject(null)})};return this.appProvider.isOnline()?(t?this.fileProvider.getExternalFile(e).then(function(e){return l.fileProvider.getFileObjectFromFileEntry(e).then(function(e){return(r=e).size})}).catch(function(){}):Promise.resolve(0)).then(function(e){return-1!=n&&e>n?l.errorMaxBytes(n,r.name):e>0?l.confirmUploadFile(e):void 0}).then(function(){var n=l.domUtils.showModalLoading(u);return l.fileUploaderProvider.uploadFile(e,i,function(e){l.showProgressModal(n,"core.fileuploader.uploadingperc",e)},o).catch(function(e){return l.logger.error("Error uploading file.",e),n.dismiss(),"string"!=typeof e&&(e=l.translate.instant("core.fileuploader.errorwhileuploading")),c(e)}).finally(function(){n.dismiss()})}):c(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"))},e.prototype.showProgressModal=function(e,n,t){if(t&&t.lengthComputable){var i=Math.min(t.loaded/t.total*100,100);i>=0&&(e.setContent(this.translate.instant(n,{$a:i.toFixed(1)})),e._cmp&&e._cmp.changeDetectorRef&&e._cmp.changeDetectorRef.detectChanges())}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(9),t(4);var i=t(13),o=t(137),r=t(40),l=t(180),s=(t.n(l),function(){function e(e,n,t,i,o,r,l,s,a,u,c,d,f,p,h,m){this.sitesProvider=n,this.domUtils=t,this.wsProvider=i,this.translate=o,this.textUtils=r,this.eventsProvider=l,this.appProvider=s,this.utils=a,this.urlUtils=u,this.configProvider=c,this.platform=d,this.initDelegate=f,this.sitePluginsProvider=p,this.location=h,this.alertCtrl=m,this.isSSOConfirmShown=!1,this.isOpenEditAlertShown=!1,this.waitingForBrowser=!1,this.logger=e.getInstance("CoreLoginHelper")}return e.prototype.acceptSitePolicy=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.write("core_user_agree_site_policy",{}).then(function(e){if(!e.status){if(e.warnings&&e.warnings.length){for(var n in e.warnings){if("alreadyagreed"==e.warnings[n].warningcode)return}return Promise.reject(e.warnings[0])}return Promise.reject(null)}})})},e.prototype.appLaunchedByURL=function(e){var n=this,t=o.a.customurlscheme+"://token=";if(-1==e.indexOf(t))return!1;if(this.appProvider.isSSOAuthenticationOngoing())return!0;this.appProvider.isDesktop()&&this.utils.closeInAppBrowser(!0),this.appProvider.startSSOAuthentication(),this.logger.debug("App launched by URL with an SSO"),e=(e=e.replace(t,"")).replace(/\/?#?\/?$/,"");try{e=atob(e)}catch(e){return this.logger.error("Error decoding parameter received for login SSO"),!1}var i,r;return this.initDelegate.ready().then(function(){return r=n.domUtils.showModalLoading("core.login.authenticating",!0),n.validateBrowserSSOLogin(e)}).then(function(e){return i=e,n.handleSSOLoginAuthentication(i.siteUrl,i.token,i.privateToken)}).then(function(){i.pageName?n.appProvider.getRootNavController().push(i.pageName,i.pageParams):n.goToSiteInitialPage()}).catch(function(e){e&&(n.domUtils.showErrorModal(e),n.sitesProvider.logout())}).finally(function(){r.dismiss(),n.appProvider.finishSSOAuthentication()}),!0},e.prototype.canRequestPasswordReset=function(e){return this.requestPasswordReset(e).then(function(){return!0}).catch(function(e){return 1==e.available||void 0!==e.errorcode&&"invalidrecord"!=e.errorcode&&""!=e.errorcode})},e.prototype.checkLogout=function(){var e=this.appProvider.getRootNavController();!this.appProvider.isSSOAuthenticationOngoing()&&this.sitesProvider.isLoggedIn()&&this.sitesProvider.getCurrentSite().isLoggedOut()&&"CoreLoginReconnectPage"==e.getActive().name&&this.sitesProvider.logout()},e.prototype.confirmAndOpenBrowserForSSOLogin=function(e,n,t,i){var o=this;(this.shouldShowSSOConfirm(n)?this.domUtils.showConfirm(this.translate.instant("core.login.logininsiterequired")):Promise.resolve()).then(function(){o.openBrowserForSSOLogin(e,n,t,i)}).catch(function(){})},e.prototype.formatProfileFieldsForSignup=function(e){if(!e)return[];var n={};return e.forEach(function(e){e.signup&&(n[e.categoryid]||(n[e.categoryid]={id:e.categoryid,name:e.categoryname,fields:[]}),n[e.categoryid].fields.push(e))}),Object.keys(n).map(function(e){return n[e]})},e.prototype.getErrorMessages=function(e,n,t,i,o,r,l,s){var a={};return e&&(a.required=a.requiredTrue=this.translate.instant(e)),n&&(a.email=this.translate.instant(n)),t&&(a.pattern=this.translate.instant(t)),i&&(a.url=this.translate.instant(i)),o&&(a.minlength=this.translate.instant(o)),r&&(a.maxlength=this.translate.instant(r)),l&&(a.min=this.translate.instant(l)),s&&(a.max=this.translate.instant(s)),a},e.prototype.getSitePolicy=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getConfig("sitepolicy",!0).then(function(e){return e||Promise.reject(null)},function(){return n.wsProvider.callAjax("auth_email_get_signup_settings",{},{siteUrl:e.getURL()}).then(function(e){return e.sitepolicy?e.sitepolicy:Promise.reject(null)})})})},e.prototype.getFixedSites=function(){return o.a.siteurl},e.prototype.getValidIdentityProviders=function(e){var n=[],t=this.textUtils.concatenatePaths(e.wwwroot,"auth/oauth2/"),i=this.textUtils.concatenatePaths(e.httpswwwroot,"auth/oauth2/");return e.identityproviders&&e.identityproviders.length&&e.identityproviders.forEach(function(e){!e.url||-1==e.url.indexOf(i)&&-1==e.url.indexOf(t)||n.push(e)}),n},e.prototype.goToAddSite=function(e,n){var t,i;if(this.isFixedUrlSet()){t="CoreLoginCredentialsPage",i={siteUrl:"string"==typeof o.a.siteurl?o.a.siteurl:o.a.siteurl[0].url}}else t="CoreLoginSitePage",i={showKeyboard:n};return e?this.appProvider.getRootNavController().setRoot(t,i,{animate:!1}):this.appProvider.getRootNavController().push(t,i)},e.prototype.goToSiteInitialPage=function(){return this.location.replaceState(""),this.appProvider.getRootNavController().setRoot("CoreMainMenuPage")},e.prototype.handleSSOLoginAuthentication=function(e,n,t){var i=this;if(this.sitesProvider.isLoggedIn()){var o=this.sitesProvider.getCurrentSite().getInfo();return void 0!==o&&void 0!==o.username?this.sitesProvider.updateSiteToken(o.siteurl,o.username,n,t).then(function(){return i.sitesProvider.updateSiteInfoByUrl(o.siteurl,o.username)},function(){return Promise.reject(i.translate.instant("core.login.errorupdatesite"))}):Promise.reject(this.translate.instant("core.login.errorupdatesite"))}return this.sitesProvider.newSite(e,n,t)},e.prototype.hasSeveralFixedSites=function(){return o.a.siteurl&&Array.isArray(o.a.siteurl)&&o.a.siteurl.length>1},e.prototype.inAppBrowserLoadStart=function(e){if(e=e.replace(/^https?:\/\//,""),this.appLaunchedByURL(e))this.utils.closeInAppBrowser(!1);else if(this.platform.is("android")){var n=this.urlUtils.getUrlProtocol(e);n&&"file"!==n&&"cdvfile"!==n?(this.utils.openInBrowser(e),this.lastInAppUrl?this.utils.openInApp(this.lastInAppUrl):this.utils.closeInAppBrowser(!1)):this.lastInAppUrl=e}},e.prototype.isEmailSignupDisabled=function(e){var n=e&&e.tool_mobile_disabledfeatures;if(!n)return!1;n=this.textUtils.treatDisabledFeatures(n);var t=new RegExp("(,|^)CoreLoginEmailSignup(,|$)","g");return!!n.match(t)},e.prototype.isFixedUrlSet=function(){return Array.isArray(o.a.siteurl)?1==o.a.siteurl.length:!!o.a.siteurl},e.prototype.isSiteLoggedOut=function(e,n){var t=this.sitesProvider.getCurrentSite();return!!t&&(!!t.isLoggedOut()&&(this.eventsProvider.trigger(i.a.SESSION_EXPIRED,{pageName:e,params:n},t.getId()),!0))},e.prototype.isSSOEmbeddedBrowser=function(e){return!!this.appProvider.isLinux()||e==r.a.LOGIN_SSO_INAPP_CODE},e.prototype.isSSOLoginNeeded=function(e){return e==r.a.LOGIN_SSO_CODE||e==r.a.LOGIN_SSO_INAPP_CODE},e.prototype.loadSiteAndPage=function(e,n,t){var i=this,o=this.appProvider.getRootNavController();if(t==r.a.NO_SITE_ID)o.setRoot(e,n);else{var l=this.domUtils.showModalLoading();this.sitesProvider.loadSite(t,e,n).then(function(t){t&&(i.location.replaceState(""),o.setRoot("CoreMainMenuPage",{redirectPage:e,redirectParams:n}))}).catch(function(e){o.setRoot("CoreLoginSitesPage")}).finally(function(){l.dismiss()})}},e.prototype.loadPageInMainMenu=function(e,n){this.eventsProvider.trigger(i.a.LOAD_PAGE_MAIN_MENU,{redirectPage:e,redirectParams:n})},e.prototype.openBrowserForOAuthLogin=function(e,n,t,i,o){if(t=t||e+"/admin/tool/mobile/launch.php",!n||!n.url)return!1;var r=this.sitesProvider.determineService(e),l=this.urlUtils.extractUrlParams(n.url),s=this.prepareForSSOLogin(e,r,t,i,o);return!!l.id&&(s+="&oauthsso="+l.id,this.appProvider.isLinux()?this.utils.openInApp(s):(this.utils.openInBrowser(s),navigator.app&&navigator.app.exitApp()),!0)},e.prototype.openBrowserForSSOLogin=function(e,n,t,i,o,r){var l=this.prepareForSSOLogin(e,t,i,o,r);if(this.isSSOEmbeddedBrowser(n)){var s={clearsessioncache:"yes",closebuttoncaption:this.translate.instant("core.login.cancel")};this.utils.openInApp(l,s)}else this.utils.openInBrowser(l),navigator.app&&navigator.app.exitApp()},e.prototype.openChangePassword=function(e,n){var t=this;this.domUtils.showAlert(this.translate.instant("core.notice"),n,void 0,3e3).then(function(n){var i=n.didDismiss.subscribe(function(){i&&i.unsubscribe(),t.utils.openInApp(e+"/login/change_password.php")})})},e.prototype.openForgottenPassword=function(e){this.utils.openInApp(e+"/login/forgot_password.php")},e.prototype.openInAppForEdit=function(e,n,t,i){var o=this;if(e&&e===this.sitesProvider.getCurrentSiteId()){var r=this.sitesProvider.getCurrentSite(),l=r&&r.getURL();r&&l&&(this.isOpenEditAlertShown||this.waitingForBrowser||(this.isOpenEditAlertShown=!0,i&&r.invalidateWsCache(),t=this.translate.instant(t)+"<br>"+this.translate.instant("core.redirectingtosite"),r.openInAppWithAutoLogin(l+n,void 0,t).then(function(){o.waitingForBrowser=!0}).finally(function(){o.isOpenEditAlertShown=!1})))}},e.prototype.prepareForSSOLogin=function(e,n,t,i,l){n=n||o.a.wsextservice,t=t||e+"/local/mobile/launch.php";var s=1e3*Math.random(),a=t+"?service="+n;return a+="&passport="+s,a+="&urlscheme="+o.a.customurlscheme,this.configProvider.set(r.a.LOGIN_LAUNCH_DATA,JSON.stringify({siteUrl:e,passport:s,pageName:i||"",pageParams:l||{}})),a},e.prototype.redirect=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.isLoggedIn()?t&&t!=this.sitesProvider.getCurrentSiteId()?this.sitePluginsProvider.hasSitePluginsLoaded?(this.appProvider.storeRedirect(t,e,n),this.sitesProvider.logout()):this.sitesProvider.logout().then(function(){i.loadSiteAndPage(e,n,t)}):this.loadPageInMainMenu(e,n):t?this.loadSiteAndPage(e,n,t):this.appProvider.getRootNavController().setRoot("CoreLoginSitesPage")},e.prototype.requestPasswordReset=function(e,n,t){var i={};return n&&(i.username=n),t&&(i.email=t),this.wsProvider.callAjax("core_auth_request_password_reset",i,{siteUrl:e})},e.prototype.sessionExpired=function(e){var n=this,t=e&&e.siteId,i=this.sitesProvider.getCurrentSite(),o=i&&i.getURL();i&&o&&(t&&t!==i.getId()||this.sitesProvider.checkSite(o).then(function(o){if(o.warning&&n.domUtils.showErrorModal(o.warning,!0,4e3),n.isSSOLoginNeeded(o.code))n.appProvider.isSSOAuthenticationOngoing()||n.isSSOConfirmShown||n.waitingForBrowser||(n.isSSOConfirmShown=!0,(n.shouldShowSSOConfirm(o.code)?n.domUtils.showConfirm(n.translate.instant("core.login."+(i.isLoggedOut()?"loggedoutssodescription":"reconnectssodescription"))):Promise.resolve()).then(function(){n.waitingForBrowser=!0,n.openBrowserForSSOLogin(o.siteUrl,o.code,o.service,o.config&&o.config.launchurl,e.pageName,e.params)}).catch(function(){n.sitesProvider.logout()}).finally(function(){n.isSSOConfirmShown=!1}));else{var r=i.getInfo();if(void 0!==r&&void 0!==r.username){var l=n.appProvider.getRootNavController(),s=l.getActive();if(s&&s.component&&"CoreLoginReconnectPage"==s.component.name)return;l.setRoot("CoreLoginReconnectPage",{infoSiteUrl:r.siteurl,siteUrl:o.siteUrl,siteId:t,pageName:e.pageName,pageParams:e.params,siteConfig:o.config})}}}).catch(function(e){i.isLoggedOut()&&(n.domUtils.showErrorModalDefault(e,"core.networkerrormsg",!0),n.sitesProvider.logout())}))},e.prototype.shouldShowSSOConfirm=function(e){return!(this.isSSOEmbeddedBrowser(e)||o.a.skipssoconfirmation&&"false"!==String(o.a.skipssoconfirmation))},e.prototype.showLegacyNoticeModal=function(e){var n=this,t=this.platform.is("android"),i=this.platform.is("ios"),o=this.appProvider.isWindows(),r=this.appProvider.isLinux(),l=[{text:this.translate.instant("core.ok"),role:"cancel"}];(t||i||o||r)&&l.push({text:this.translate.instant("core.download"),handler:function(){var e;e=o?"https://download.moodle.org/desktop/download.php?platform=windows&version=342":r?"https://download.moodle.org/desktop/download.php?platform=linux&version=342&arch="+(n.appProvider.is64Bits()?"64":"32"):t?"market://details?id=com.moodle.classic":"itms-apps://itunes.apple.com/app/id1403448117",n.utils.openInBrowser(e)}});var s=this.alertCtrl.create({message:e,buttons:l});s.present().then(function(){if(!t&&!i){var e=s.pageRef().nativeElement.querySelector(".alert-message");n.domUtils.treatAnchors(e)}})},e.prototype.showNotConfirmedModal=function(e,n,t,i){var o,r=this,l=this.translate.instant("core.login.mustconfirm");o=n?this.translate.instant("core.login.emailconfirmsent",{$a:n}):this.translate.instant("core.login.emailconfirmsentnoemail");var s;if(t&&i){var a=this.domUtils.showModalLoading();s=this.wsProvider.callAjax("core_auth_resend_confirmation_email",{},{siteUrl:e}).catch(function(e){return Promise.resolve(e&&"invalidparameter"===e.errorcode)}).finally(function(){a.dismiss()})}else s=Promise.resolve(!1);s.then(function(n){if(n){var s=r.translate.instant("core.login.resendemail"),a=r.translate.instant("core.close");r.domUtils.showConfirm(o,l,s,a).then(function(){var n=r.domUtils.showModalLoading("core.sending",!0);r.wsProvider.callAjax("core_auth_resend_confirmation_email",{username:t,password:i},{siteUrl:e}).then(function(e){var n=r.translate.instant("core.login.emailconfirmsentsuccess");r.domUtils.showAlert(r.translate.instant("core.success"),n)}).catch(function(e){r.domUtils.showErrorModal(e)}).finally(function(){n.dismiss()})}).catch(function(){})}else r.domUtils.showAlert(l,o)})},e.prototype.sitePolicyNotAgreed=function(e){if((e=e||this.sitesProvider.getCurrentSiteId())&&e==this.sitesProvider.getCurrentSiteId()&&this.sitesProvider.wsAvailableInCurrentSite("core_user_agree_site_policy")){var n=this.appProvider.getRootNavController(),t=n.getActive();t&&t.component&&"CoreLoginSitePolicyPage"==t.component.name||n.setRoot("CoreLoginSitePolicyPage",{siteId:e})}},e.prototype.treatUserTokenError=function(e,n,t,i){"forcepasswordchangenotice"==n.errorcode?this.openChangePassword(e,this.textUtils.getErrorMessageFromError(n)):"usernotconfirmed"==n.errorcode?this.showNotConfirmedModal(e,void 0,t,i):"legacymoodleversion"==n.errorcode?this.showLegacyNoticeModal(this.textUtils.getErrorMessageFromError(n)):this.domUtils.showErrorModal(n)},e.prototype.validateBrowserSSOLogin=function(e){var n=this,t=e.split(":::");return this.configProvider.get(r.a.LOGIN_LAUNCH_DATA).then(function(e){if(null===(e=n.textUtils.parseJSON(e,null)))return Promise.reject(null);var i=e.passport,o=e.siteUrl;n.configProvider.delete(r.a.LOGIN_LAUNCH_DATA);var s=l.Md5.hashAsciiStr(o+i);return s!=t[0]&&(o=-1!=o.indexOf("https://")?o.replace("https://","http://"):o.replace("http://","https://"),s=l.Md5.hashAsciiStr(o+i)),s==t[0]?(n.logger.debug("Signature validated"),{siteUrl:o,token:t[1],privateToken:t[2],pageName:e.pageName,pageParams:e.pageParams}):(n.logger.debug("Invalid signature in the URL request yours: "+t[0]+" mine: "+s+" for passport "+i),Promise.reject(n.translate.instant("core.unexpectederror")))})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(262);var i=function(){function e(e,n,t,i,o,r){this.sitesProvider=n,this.utils=t,this.filepoolProvider=i,this.feedbackOffline=o,this.appProvider=r,this.ROOT_CACHE_KEY=this.ROOT_CACHE_KEY+"",this.logger=e.getInstance("AddonModFeedbackProvider")}return n=e,e.prototype.checkDependencyItem=function(e,n){var t=e.find(function(e){return e.id==n.dependitem});if(!t)return!0;switch(t.typ){case"label":return!1;case"multichoice":case"multichoicerated":return this.compareDependItemMultichoice(t,n.dependvalue)}return n.dependvalue==t.rawValue},e.prototype.compareDependItemMultichoice=function(e,t){var i,o,r=e.presentation.split(n.MULTICHOICE_TYPE_SEP)||[],l=r.length>0&&r[0]?r[0]:"r";o=(o=(o=r[1]||"").split(n.MULTICHOICE_ADJUST_SEP)[0]||"").split(n.LINE_SEP)||[],"c"===l?void 0===e.rawValue?i=[""]:(e.rawValue=""+e.rawValue,i=e.rawValue.split(n.LINE_SEP)):i=[e.rawValue];for(var s=0;s<o.length;s++)for(var a in i)if(i[a]==s+1){var u=o[s];if("multichoicerated"==e.typ&&(u=u.split(n.MULTICHOICERATED_VALUE_SEP)[1]||""),u.trim()==t)return!0;if(1==i.length)return!1}return!1},e.prototype.fillValues=function(e,t,i,o,r){var l=this;return this.getCurrentValues(e,i,o,r).then(function(n){return 0==n.length?l.processPageOnline(e,0,{},void 0,r).then(function(){return l.getCurrentValues(e,i,o,r)}).catch(function(){}):n}).then(function(e){var n={};e.forEach(function(e){n[e.item]=e.value}),t.forEach(function(e){e.hasvalue&&void 0!==n[e.id]&&(e.rawValue=n[e.id])})}).catch(function(){}).then(function(){return l.feedbackOffline.getFeedbackResponses(e,r).then(function(e){var i={};return(e=e.reduce(function(e,n){var t=l.utils.objectToArrayOfObjects(n.responses,"id","value");return e.concat(t)},[]).map(function(e){var n=e.id.split("_");return e.typ=n[0],e.item=parseInt(n[1],0),e})).forEach(function(e){void 0===i[e.item]&&(i[e.item]=[]),i[e.item].push(e.value)}),t.forEach(function(e){e.hasvalue&&void 0!==i[e.id]&&("multichoice"==e.typ&&"c"==e.presentation.split(n.MULTICHOICE_TYPE_SEP)[0]?(i[e.id]=i[e.id].filter(function(e){return e>0}),e.rawValue=i[e.id].join(n.LINE_SEP)):e.rawValue=i[e.id][0])}),t})}).catch(function(){return t})},e.prototype.getAllNonRespondents=function(e,n,t,i){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),void 0===i&&(i={page:0,users:[]}),this.getNonRespondents(e,n,i.page,t).then(function(r){return i.users.length<r.total&&(i.users=i.users.concat(r.users)),i.users.length<r.total?(i.page++,o.getAllNonRespondents(e,n,t,i)):(i.total=r.total,i)})},e.prototype.getAllResponsesAnalysis=function(e,n,t,i){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),void 0===i&&(i={page:0,attempts:[],anonattempts:[]}),this.getResponsesAnalysis(e,n,i.page,t).then(function(r){return i.anonattempts.length<r.totalanonattempts&&(i.anonattempts=i.anonattempts.concat(r.anonattempts)),i.attempts.length<r.totalattempts&&(i.attempts=i.attempts.concat(r.attempts)),i.anonattempts.length<r.totalanonattempts||i.attempts.length<r.totalattempts?(i.page++,o.getAllResponsesAnalysis(e,n,t,i)):(i.totalattempts=r.totalattempts,i.totalanonattempts=r.totalanonattempts,i)})},e.prototype.getAnalysis=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={feedbackid:e},r={cacheKey:i.getAnalysisDataCacheKey(e,n)};return n&&(o.groupid=n),t.read("mod_feedback_get_analysis",o,r)})},e.prototype.getAnalysisDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getAnalysisDataPrefixCacheKey(e)+n},e.prototype.getAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":analysis:"},e.prototype.getAttempt=function(e,n,t,i){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),void 0===i&&(i={page:0,attemptsLoaded:0,anonAttemptsLoaded:0}),this.getResponsesAnalysis(e,0,i.page,t).then(function(r){var l;return(l=r.attempts.find(function(e){return n==e.id}))?l:(l=r.anonattempts.find(function(e){return n==e.id}))?l:(i.anonAttemptsLoaded<r.totalanonattempts&&(i.anonAttemptsLoaded+=r.anonattempts.length),i.attemptsLoaded<r.totalattempts&&(i.attemptsLoaded+=r.attempts.length),i.anonAttemptsLoaded<r.totalanonattempts||i.attemptsLoaded<r.totalattempts?(i.page++,o.getAttempt(e,n,t,i)):Promise.reject(null))})},e.prototype.getCompletedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completed:"},e.prototype.getCurrentCompletedTimeModified=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={feedbackid:e},o={cacheKey:t.getCurrentCompletedTimeModifiedDataCacheKey(e)};return n.read("mod_feedback_get_current_completed_tmp",i,o).then(function(e){return e&&void 0!==e.feedback&&void 0!==e.feedback.timemodified?e.feedback.timemodified:0}).catch(function(){return 0})})},e.prototype.getCurrentCompletedTimeModifiedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completedtime:"},e.prototype.getCurrentValues=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={feedbackid:e},l={cacheKey:o.getCurrentValuesDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_feedback_get_unfinished_responses",r,l).then(function(e){return e&&void 0!==e.responses?e.responses:Promise.reject(null)})})},e.prototype.getCurrentValuesDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":currentvalues"},e.prototype.getFeedbackAccessInformation=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={feedbackid:e},l={cacheKey:o.getFeedbackAccessInformationDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_feedback_get_feedback_access_information",r,l)})},e.prototype.getFeedbackAccessInformationDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":access"},e.prototype.getFeedbackCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedback:"+e},e.prototype.getFeedbackDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getFeedbackDataByKey=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){var l={courseids:[e]},s={cacheKey:r.getFeedbackCacheKey(e)};return o&&(s.omitExpires=!0),i.read("mod_feedback_get_feedbacks_by_courses",l,s).then(function(e){if(e&&e.feedbacks){var i=e.feedbacks.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getFeedback=function(e,n,t,i){return this.getFeedbackDataByKey(e,"coursemodule",n,t,i)},e.prototype.getFeedbackById=function(e,n,t,i){return this.getFeedbackDataByKey(e,"id",n,t,i)},e.prototype.getItems=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={feedbackid:e},o={cacheKey:t.getItemsDataCacheKey(e)};return n.read("mod_feedback_get_items",i,o)})},e.prototype.getItemsDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":items"},e.prototype.getNonRespondents=function(e,n,t,i){var o=this;return void 0===n&&(n=0),void 0===t&&(t=0),this.sitesProvider.getSite(i).then(function(i){var r={feedbackid:e,groupid:n,page:t},l={cacheKey:o.getNonRespondentsDataCacheKey(e,n)};return i.read("mod_feedback_get_non_respondents",r,l)})},e.prototype.getNonRespondentsDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getNonRespondentsDataPrefixCacheKey(e)+n},e.prototype.getNonRespondentsDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":nonrespondents:"},e.prototype.getPageItems=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_feedback_get_page_items",{feedbackid:e,page:n})})},e.prototype.getPageItemsWithValues=function(e,n,t,i,o){var r=this;return void 0===t&&(t=!1),void 0===i&&(i=!1),o=o||this.sitesProvider.getCurrentSiteId(),this.getPageItems(e,n,o).then(function(n){return r.fillValues(e,n.items,t,i,o).then(function(e){return n.items=e,n})}).catch(function(){return r.getItems(e,o).then(function(l){return r.fillValues(e,l.items,t,i,o).then(function(e){var t=0,i=[],o=e.filter(function(e){return!(t>n)&&("pagebreak"==e.typ?(t++,!1):t<n?(i.push(e),!1):e&&e.dependitem>0&&i.length>0?r.checkDependencyItem(i,e):e)});return l.hasprevpage=n>0,l.hasnextpage=t>n,l.items=o,l})})})},e.prototype.getPageJumpTo=function(e,n,t,i){var o=this;return this.getPageItemsWithValues(e,n,!0,!1,i).then(function(r){return r.items.length>0?n:!!(1==t&&r.hasnextpage||-1==t&&r.hasprevpage)&&o.getPageJumpTo(e,n+t,t,i)})},e.prototype.getResponsesAnalysis=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={feedbackid:e,groupid:n||0,page:t||0},l={cacheKey:o.getResponsesAnalysisDataCacheKey(e,n)};return i.read("mod_feedback_get_responses_analysis",r,l)})},e.prototype.getResponsesAnalysisDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getResponsesAnalysisDataPrefixCacheKey(e)+n},e.prototype.getResponsesAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":responsesanalysis:"},e.prototype.getResumePage=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={feedbackid:e},l={cacheKey:o.getResumePageDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_feedback_launch_feedback",r,l).then(function(e){return e&&void 0!==e.gopage?e.gopage>0?e.gopage:0:Promise.reject(null)})})},e.prototype.getResumePageDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":launch"},e.prototype.invalidateAllFeedbackData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getFeedbackDataPrefixCacheKey(e))})},e.prototype.invalidateAnalysisData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAnalysisDataPrefixCacheKey(e))})},e.prototype.invalidateContent=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.getFeedback(n,e,t).then(function(e){var o=[];return o.push(i.invalidateFeedbackData(n,t)),o.push(i.invalidateAllFeedbackData(e.id,t)),Promise.all(o)})),o.push(this.invalidateFiles(e,t)),this.utils.allPromises(o)},e.prototype.invalidateCurrentValuesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCurrentValuesDataCacheKey(e))})},e.prototype.invalidateFeedbackAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFeedbackAccessInformationDataCacheKey(e))})},e.prototype.invalidateFeedbackData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFeedbackCacheKey(e))})},e.prototype.invalidateFiles=function(e,t){return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.invalidateNonRespondentsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getNonRespondentsDataPrefixCacheKey(e))})},e.prototype.invalidateResponsesAnalysisData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getResponsesAnalysisDataPrefixCacheKey(e))})},e.prototype.invalidateResumePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getResumePageDataCacheKey(e))})},e.prototype.isCompleted=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={feedbackid:e},o={cacheKey:t.getCompletedDataCacheKey(e)};return t.utils.promiseWorks(n.read("mod_feedback_get_last_completed",i,o))})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_feedback_get_feedbacks_by_courses")&&e.wsAvailable("mod_feedback_get_feedback_access_information")})},e.prototype.logView=function(e,n){void 0===n&&(n=!1);var t={feedbackid:e,moduleviewed:n?1:0};return this.sitesProvider.getCurrentSite().write("mod_feedback_view_feedback",t)},e.prototype.processPage=function(e,n,t,i,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.feedbackOffline.saveResponses(e,n,t,r,l).then(function(){var t={jumpto:n,completed:!1,offline:!0},r=0;return i?n>0&&(r=-1):o||(r=1),0===r?t:s.getPageItemsWithValues(e,n,!0,!1,l).then(function(i){return 1!=r||i.hasnextpage?s.getPageJumpTo(e,n+r,r,l).then(function(e){return!1===e?-1==r?t.jumpto=0:t.completed=!0:t.jumpto=e,t}):(t.completed=!0,t)})})};return this.appProvider.isOnline()?this.feedbackOffline.deleteFeedbackPageResponses(e,n,l).then(function(){return s.processPageOnline(e,n,t,i,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()})}):a()},e.prototype.processPageOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={feedbackid:e,page:n,responses:r.utils.objectToArrayOfObjects(t,"name","value"),goprevious:i?1:0};return o.write("mod_feedback_process_page",l).catch(function(e){return Promise.reject(r.utils.createFakeWSError(e))}).then(function(n){return r.invalidateCurrentValuesData(e,o.getId()).then(function(){return r.getCurrentValues(e,!1,!1,o.getId())}).catch(function(){}).then(function(){return n})})})},e.COMPONENT="mmaModFeedback",e.FORM_SUBMITTED="addon_mod_feedback_form_submitted",e.LINE_SEP="|",e.MULTICHOICE_TYPE_SEP=">>>>>",e.MULTICHOICE_ADJUST_SEP="<<<<<",e.MULTICHOICE_HIDENOSELECT="h",e.MULTICHOICERATED_VALUE_SEP="####",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){}return e.app_id="br.mil.eb.ebaula",e.appname="EBAula App",e.desktopappname="EBAula App",e.versioncode=3600,e.versionname="3.6.0",e.cache_expiration_time=3e5,e.default_lang="pt-br",e.languages={ar:"",bg:"",ca:"Catal",cs:"etina",da:"Dansk",de:"Deutsch","de-du":"Deutsch - Du",el:"",en:"English","en-us":"English - United States",es:"Espaol","es-mx":"Espaol - Mxico",eu:"Euskara",fa:"",fi:"Suomi",fr:"Franais",he:"",hr:"Hrvatski",hu:"magyar",id:"Indonesian",it:"Italiano",ja:"",km:"",kn:"",ko:"",lt:"Lietuvi",mr:"",nl:"Nederlands",no:"Norsk - bokml",pl:"Polski",pt:"Portugus - Portugal","pt-br":"Portugus - Brasil",ro:"Romn",ru:"","sr-cr":"","sr-lt":"Srpski",sv:"Svenska",tg:"",tr:"Trke",uk:"","zh-cn":"","zh-tw":""},e.wsservice="moodle_mobile_app",e.wsextservice="local_mobile",e.demo_sites={student:{url:"https://school.demo.moodle.net",username:"student",password:"moodle"},teacher:{url:"https://school.demo.moodle.net",username:"teacher",password:"moodle"}},e.gcmpn="694767596569",e.customurlscheme="moodlemobile",e.siteurl="http://www.ebaula.eb.mil.br/ebaula/",e.multisitesdisplay="",e.skipssoconfirmation=!1,e.forcedefaultlanguage=!1,e.privacypolicy="https://moodle.org/mod/page/view.php?id=8148",e.compilationtime=1548424747192,e.lastcommit="7628b755d62f366f1ded4ecb8a3cb8c098ac158a",e}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CoreCompileProvider});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__angular_platform_browser_dynamic__=__webpack_require__(543),__WEBPACK_IMPORTED_MODULE_3_ionic_angular__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_5__providers_logger__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_6__app_app_module__=__webpack_require__(722),__WEBPACK_IMPORTED_MODULE_7__core_block_block_module__=__webpack_require__(544),__WEBPACK_IMPORTED_MODULE_8__core_contentlinks_contentlinks_module__=__webpack_require__(546),__WEBPACK_IMPORTED_MODULE_9__core_course_course_module__=__webpack_require__(547),__WEBPACK_IMPORTED_MODULE_10__core_courses_courses_module__=__webpack_require__(549),__WEBPACK_IMPORTED_MODULE_11__core_fileuploader_fileuploader_module__=__webpack_require__(550),__WEBPACK_IMPORTED_MODULE_12__core_grades_grades_module__=__webpack_require__(551),__WEBPACK_IMPORTED_MODULE_13__core_login_login_module__=__webpack_require__(552),__WEBPACK_IMPORTED_MODULE_14__core_mainmenu_mainmenu_module__=__webpack_require__(553),__WEBPACK_IMPORTED_MODULE_15__core_question_question_module__=__webpack_require__(554),__WEBPACK_IMPORTED_MODULE_16__core_sharedfiles_sharedfiles_module__=__webpack_require__(557),__WEBPACK_IMPORTED_MODULE_17__core_sitehome_sitehome_module__=__webpack_require__(558),__WEBPACK_IMPORTED_MODULE_18__core_user_user_module__=__webpack_require__(559),__WEBPACK_IMPORTED_MODULE_19__core_emulator_emulator_module__=__webpack_require__(560),__WEBPACK_IMPORTED_MODULE_20__core_siteplugins_providers_siteplugins__=__webpack_require__(57),__WEBPACK_IMPORTED_MODULE_21__angular_platform_browser__=__webpack_require__(75),__WEBPACK_IMPORTED_MODULE_22__angular_forms__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_23__angular_http__=__webpack_require__(217),__WEBPACK_IMPORTED_MODULE_24__angular_common_http__=__webpack_require__(242),__WEBPACK_IMPORTED_MODULE_25__configconstants__=__webpack_require__(137),__WEBPACK_IMPORTED_MODULE_26__core_constants__=__webpack_require__(40),__WEBPACK_IMPORTED_MODULE_27_moment__=__webpack_require__(14),__WEBPACK_IMPORTED_MODULE_27_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27_moment__),__WEBPACK_IMPORTED_MODULE_28_ts_md5_dist_md5__=__webpack_require__(180),__WEBPACK_IMPORTED_MODULE_28_ts_md5_dist_md5___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_28_ts_md5_dist_md5__),__WEBPACK_IMPORTED_MODULE_29__classes_base_sync__=__webpack_require__(126),__WEBPACK_IMPORTED_MODULE_30__classes_cache__=__webpack_require__(990),__WEBPACK_IMPORTED_MODULE_31__classes_delegate__=__webpack_require__(102),__WEBPACK_IMPORTED_MODULE_32__core_contentlinks_classes_base_handler__=__webpack_require__(59),__WEBPACK_IMPORTED_MODULE_33__core_contentlinks_classes_module_grade_handler__=__webpack_require__(417),__WEBPACK_IMPORTED_MODULE_34__core_contentlinks_classes_module_index_handler__=__webpack_require__(88),__WEBPACK_IMPORTED_MODULE_35__core_course_classes_activity_prefetch_handler__=__webpack_require__(140),__WEBPACK_IMPORTED_MODULE_36__core_course_classes_resource_prefetch_handler__=__webpack_require__(273),__WEBPACK_IMPORTED_MODULE_37__components_components_module__=__webpack_require__(29),__WEBPACK_IMPORTED_MODULE_38__directives_directives_module__=__webpack_require__(30),__WEBPACK_IMPORTED_MODULE_39__pipes_pipes_module__=__webpack_require__(106),__WEBPACK_IMPORTED_MODULE_40__core_course_components_components_module__=__webpack_require__(66),__WEBPACK_IMPORTED_MODULE_41__core_course_directives_directives_module__=__webpack_require__(1809),__WEBPACK_IMPORTED_MODULE_42__core_courses_components_components_module__=__webpack_require__(249),__WEBPACK_IMPORTED_MODULE_43__core_siteplugins_directives_directives_module__=__webpack_require__(1810),__WEBPACK_IMPORTED_MODULE_44__core_sitehome_components_components_module__=__webpack_require__(1375),__WEBPACK_IMPORTED_MODULE_45__core_user_components_components_module__=__webpack_require__(445),__WEBPACK_IMPORTED_MODULE_46__core_question_components_components_module__=__webpack_require__(1381),__WEBPACK_IMPORTED_MODULE_47__core_block_components_components_module__=__webpack_require__(683),__WEBPACK_IMPORTED_MODULE_48__core_course_components_unsupported_module_unsupported_module__=__webpack_require__(360),__WEBPACK_IMPORTED_MODULE_49__core_course_formats_singleactivity_components_singleactivity__=__webpack_require__(412),__WEBPACK_IMPORTED_MODULE_50__core_siteplugins_components_module_index_module_index__=__webpack_require__(357),__WEBPACK_IMPORTED_MODULE_51__core_siteplugins_components_course_option_course_option__=__webpack_require__(418),__WEBPACK_IMPORTED_MODULE_52__core_siteplugins_components_course_format_course_format__=__webpack_require__(419),__WEBPACK_IMPORTED_MODULE_53__core_siteplugins_components_question_question__=__webpack_require__(420),__WEBPACK_IMPORTED_MODULE_54__core_siteplugins_components_question_behaviour_question_behaviour__=__webpack_require__(421),__WEBPACK_IMPORTED_MODULE_55__core_siteplugins_components_user_profile_field_user_profile_field__=__webpack_require__(422),__WEBPACK_IMPORTED_MODULE_56__core_siteplugins_components_quiz_access_rule_quiz_access_rule__=__webpack_require__(423),__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_assign_feedback_assign_feedback__=__webpack_require__(424),__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_assign_submission_assign_submission__=__webpack_require__(425),__WEBPACK_IMPORTED_MODULE_59__addon_badges_badges_module__=__webpack_require__(567),__WEBPACK_IMPORTED_MODULE_60__addon_calendar_calendar_module__=__webpack_require__(568),__WEBPACK_IMPORTED_MODULE_61__addon_competency_competency_module__=__webpack_require__(569),__WEBPACK_IMPORTED_MODULE_62__addon_files_files_module__=__webpack_require__(570),__WEBPACK_IMPORTED_MODULE_63__addon_messageoutput_messageoutput_module__=__webpack_require__(571),__WEBPACK_IMPORTED_MODULE_64__addon_messages_messages_module__=__webpack_require__(572),__WEBPACK_IMPORTED_MODULE_65__addon_mod_assign_assign_module__=__webpack_require__(575),__WEBPACK_IMPORTED_MODULE_66__addon_mod_book_book_module__=__webpack_require__(586),__WEBPACK_IMPORTED_MODULE_67__addon_mod_chat_chat_module__=__webpack_require__(587),__WEBPACK_IMPORTED_MODULE_68__addon_mod_choice_choice_module__=__webpack_require__(588),__WEBPACK_IMPORTED_MODULE_69__addon_mod_feedback_feedback_module__=__webpack_require__(589),__WEBPACK_IMPORTED_MODULE_70__addon_mod_folder_folder_module__=__webpack_require__(590),__WEBPACK_IMPORTED_MODULE_71__addon_mod_forum_forum_module__=__webpack_require__(591),__WEBPACK_IMPORTED_MODULE_72__addon_mod_glossary_glossary_module__=__webpack_require__(592),__WEBPACK_IMPORTED_MODULE_73__addon_mod_imscp_imscp_module__=__webpack_require__(594),__WEBPACK_IMPORTED_MODULE_74__addon_mod_lesson_lesson_module__=__webpack_require__(596),__WEBPACK_IMPORTED_MODULE_75__addon_mod_lti_lti_module__=__webpack_require__(597),__WEBPACK_IMPORTED_MODULE_76__addon_mod_page_page_module__=__webpack_require__(598),__WEBPACK_IMPORTED_MODULE_77__addon_mod_quiz_quiz_module__=__webpack_require__(599),__WEBPACK_IMPORTED_MODULE_78__addon_mod_resource_resource_module__=__webpack_require__(603),__WEBPACK_IMPORTED_MODULE_79__addon_mod_scorm_scorm_module__=__webpack_require__(604),__WEBPACK_IMPORTED_MODULE_80__addon_mod_survey_survey_module__=__webpack_require__(605),__WEBPACK_IMPORTED_MODULE_81__addon_mod_url_url_module__=__webpack_require__(606),__WEBPACK_IMPORTED_MODULE_82__addon_mod_wiki_wiki_module__=__webpack_require__(607),__WEBPACK_IMPORTED_MODULE_83__addon_mod_workshop_workshop_module__=__webpack_require__(609),__WEBPACK_IMPORTED_MODULE_84__addon_notes_notes_module__=__webpack_require__(614),__WEBPACK_IMPORTED_MODULE_85__addon_notifications_notifications_module__=__webpack_require__(616),__WEBPACK_IMPORTED_MODULE_86__addon_pushnotifications_pushnotifications_module__=__webpack_require__(617),__WEBPACK_IMPORTED_MODULE_87__addon_remotethemes_remotethemes_module__=__webpack_require__(618),__WEBPACK_IMPORTED_MODULE_88__addon_mod_assign_components_components_module__=__webpack_require__(1362),__WEBPACK_IMPORTED_MODULE_89__addon_mod_workshop_components_components_module__=__webpack_require__(446),CoreCompileProvider=function(){function CoreCompileProvider(e,n,t){this.injector=e,this.OTHER_PROVIDERS=[__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__.b,__WEBPACK_IMPORTED_MODULE_23__angular_http__.d,__WEBPACK_IMPORTED_MODULE_24__angular_common_http__.c,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.g,__WEBPACK_IMPORTED_MODULE_21__angular_platform_browser__.c,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.a,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.b,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.e,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.f,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.h,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.k,__WEBPACK_IMPORTED_MODULE_22__angular_forms__.d],this.IMPORTS=[__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.d,__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__.a.forChild(),__WEBPACK_IMPORTED_MODULE_37__components_components_module__.a,__WEBPACK_IMPORTED_MODULE_38__directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_39__pipes_pipes_module__.a,__WEBPACK_IMPORTED_MODULE_40__core_course_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_42__core_courses_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_44__core_sitehome_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_45__core_user_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_41__core_course_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_43__core_siteplugins_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_46__core_question_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_88__addon_mod_assign_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_89__addon_mod_workshop_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_47__core_block_components_components_module__.a],this.logger=n.getInstance("CoreCompileProvider"),this.compiler=t.createCompiler()}return CoreCompileProvider.prototype.createAndCompileComponent=function(e,n,t){void 0===t&&(t=[]);var i=Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__.l)({template:e})(n),o=this.IMPORTS.concat(t),r=Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__.z)({imports:o,declarations:[i]})(function(){return function(){}}());try{return this.compiler.compileModuleAndAllComponentsAsync(r).then(function(e){for(var n in e.componentFactories){var t=e.componentFactories[n];if(t.componentType==i)return t}})}catch(e){return Promise.reject({message:"Template has some errors and cannot be displayed.",debuginfo:e})}},CoreCompileProvider.prototype.evalInContext=function(javascript){return eval(javascript)},CoreCompileProvider.prototype.executeJavascript=function(e,n){try{return this.evalInContext.call(e,n)}catch(e){this.logger.error("Error evaluating javascript",e)}},CoreCompileProvider.prototype.injectLibraries=function(e,n){void 0===n&&(n=[]);var t=__WEBPACK_IMPORTED_MODULE_6__app_app_module__.b.concat(__WEBPACK_IMPORTED_MODULE_8__core_contentlinks_contentlinks_module__.a).concat(__WEBPACK_IMPORTED_MODULE_9__core_course_course_module__.a).concat(__WEBPACK_IMPORTED_MODULE_10__core_courses_courses_module__.a).concat(__WEBPACK_IMPORTED_MODULE_11__core_fileuploader_fileuploader_module__.a).concat(__WEBPACK_IMPORTED_MODULE_12__core_grades_grades_module__.a).concat(__WEBPACK_IMPORTED_MODULE_13__core_login_login_module__.a).concat(__WEBPACK_IMPORTED_MODULE_14__core_mainmenu_mainmenu_module__.a).concat(__WEBPACK_IMPORTED_MODULE_16__core_sharedfiles_sharedfiles_module__.a).concat(__WEBPACK_IMPORTED_MODULE_17__core_sitehome_sitehome_module__.a).concat([__WEBPACK_IMPORTED_MODULE_20__core_siteplugins_providers_siteplugins__.a]).concat(__WEBPACK_IMPORTED_MODULE_18__core_user_user_module__.a).concat(__WEBPACK_IMPORTED_MODULE_15__core_question_question_module__.a).concat(__WEBPACK_IMPORTED_MODULE_19__core_emulator_emulator_module__.b).concat(this.OTHER_PROVIDERS).concat(n).concat(__WEBPACK_IMPORTED_MODULE_59__addon_badges_badges_module__.a).concat(__WEBPACK_IMPORTED_MODULE_60__addon_calendar_calendar_module__.a).concat(__WEBPACK_IMPORTED_MODULE_61__addon_competency_competency_module__.a).concat(__WEBPACK_IMPORTED_MODULE_62__addon_files_files_module__.a).concat(__WEBPACK_IMPORTED_MODULE_63__addon_messageoutput_messageoutput_module__.a).concat(__WEBPACK_IMPORTED_MODULE_64__addon_messages_messages_module__.a).concat(__WEBPACK_IMPORTED_MODULE_65__addon_mod_assign_assign_module__.a).concat(__WEBPACK_IMPORTED_MODULE_66__addon_mod_book_book_module__.a).concat(__WEBPACK_IMPORTED_MODULE_67__addon_mod_chat_chat_module__.a).concat(__WEBPACK_IMPORTED_MODULE_68__addon_mod_choice_choice_module__.a).concat(__WEBPACK_IMPORTED_MODULE_69__addon_mod_feedback_feedback_module__.a).concat(__WEBPACK_IMPORTED_MODULE_70__addon_mod_folder_folder_module__.a).concat(__WEBPACK_IMPORTED_MODULE_71__addon_mod_forum_forum_module__.a).concat(__WEBPACK_IMPORTED_MODULE_72__addon_mod_glossary_glossary_module__.a).concat(__WEBPACK_IMPORTED_MODULE_73__addon_mod_imscp_imscp_module__.a).concat(__WEBPACK_IMPORTED_MODULE_74__addon_mod_lesson_lesson_module__.a).concat(__WEBPACK_IMPORTED_MODULE_75__addon_mod_lti_lti_module__.a).concat(__WEBPACK_IMPORTED_MODULE_76__addon_mod_page_page_module__.a).concat(__WEBPACK_IMPORTED_MODULE_77__addon_mod_quiz_quiz_module__.a).concat(__WEBPACK_IMPORTED_MODULE_78__addon_mod_resource_resource_module__.a).concat(__WEBPACK_IMPORTED_MODULE_79__addon_mod_scorm_scorm_module__.a).concat(__WEBPACK_IMPORTED_MODULE_80__addon_mod_survey_survey_module__.a).concat(__WEBPACK_IMPORTED_MODULE_81__addon_mod_url_url_module__.a).concat(__WEBPACK_IMPORTED_MODULE_82__addon_mod_wiki_wiki_module__.a).concat(__WEBPACK_IMPORTED_MODULE_83__addon_mod_workshop_workshop_module__.a).concat(__WEBPACK_IMPORTED_MODULE_84__addon_notes_notes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_85__addon_notifications_notifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_86__addon_pushnotifications_pushnotifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_87__addon_remotethemes_remotethemes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_7__core_block_block_module__.a);for(var i in t){var o=t[i];if("function"==typeof o&&o.name)try{e[o.name]=this.injector.get(o)}catch(e){this.logger.warn("Error injecting provider",o.name,e)}}e.CoreCompileProvider=this,e.injector=this.injector,e.Validators=__WEBPACK_IMPORTED_MODULE_22__angular_forms__.u,e.CoreConfigConstants=__WEBPACK_IMPORTED_MODULE_25__configconstants__.a,e.CoreConstants=__WEBPACK_IMPORTED_MODULE_26__core_constants__.a,e.moment=__WEBPACK_IMPORTED_MODULE_27_moment__,e.Md5=__WEBPACK_IMPORTED_MODULE_28_ts_md5_dist_md5__.Md5,e.CoreSyncBaseProvider=__WEBPACK_IMPORTED_MODULE_29__classes_base_sync__.a,e.CoreCache=__WEBPACK_IMPORTED_MODULE_30__classes_cache__.a,e.CoreDelegate=__WEBPACK_IMPORTED_MODULE_31__classes_delegate__.a,e.CoreContentLinksHandlerBase=__WEBPACK_IMPORTED_MODULE_32__core_contentlinks_classes_base_handler__.a,e.CoreContentLinksModuleGradeHandler=__WEBPACK_IMPORTED_MODULE_33__core_contentlinks_classes_module_grade_handler__.a,e.CoreContentLinksModuleIndexHandler=__WEBPACK_IMPORTED_MODULE_34__core_contentlinks_classes_module_index_handler__.a,e.CoreCourseActivityPrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_35__core_course_classes_activity_prefetch_handler__.a,e.CoreCourseResourcePrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_36__core_course_classes_resource_prefetch_handler__.a,e.CoreCourseUnsupportedModuleComponent=__WEBPACK_IMPORTED_MODULE_48__core_course_components_unsupported_module_unsupported_module__.a,e.CoreCourseFormatSingleActivityComponent=__WEBPACK_IMPORTED_MODULE_49__core_course_formats_singleactivity_components_singleactivity__.a,e.CoreSitePluginsModuleIndexComponent=__WEBPACK_IMPORTED_MODULE_50__core_siteplugins_components_module_index_module_index__.a,e.CoreSitePluginsCourseOptionComponent=__WEBPACK_IMPORTED_MODULE_51__core_siteplugins_components_course_option_course_option__.a,e.CoreSitePluginsCourseFormatComponent=__WEBPACK_IMPORTED_MODULE_52__core_siteplugins_components_course_format_course_format__.a,e.CoreSitePluginsQuestionComponent=__WEBPACK_IMPORTED_MODULE_53__core_siteplugins_components_question_question__.a,e.CoreSitePluginsQuestionBehaviourComponent=__WEBPACK_IMPORTED_MODULE_54__core_siteplugins_components_question_behaviour_question_behaviour__.a,e.CoreSitePluginsUserProfileFieldComponent=__WEBPACK_IMPORTED_MODULE_55__core_siteplugins_components_user_profile_field_user_profile_field__.a,e.CoreSitePluginsQuizAccessRuleComponent=__WEBPACK_IMPORTED_MODULE_56__core_siteplugins_components_quiz_access_rule_quiz_access_rule__.a,e.CoreSitePluginsAssignFeedbackComponent=__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_assign_feedback_assign_feedback__.a,e.CoreSitePluginsAssignSubmissionComponent=__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_assign_submission_assign_submission__.a},CoreCompileProvider.prototype.instantiateDynamicComponent=function(e,n,t){return t=t||this.injector,this.createAndCompileComponent(e,n).then(function(e){if(e)return e.create(t,void 0,void 0,t.get(__WEBPACK_IMPORTED_MODULE_1__angular_core__.B))})},CoreCompileProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return d});var i=t(0),o=t(1),r=t(2),l=t(16),s=t(53),a=t(13),u=t(190),c=t(10),d=function(e){function n(n,t,i){void 0===i&&(i="CoreCourseModuleMainResourceComponent");var d=e.call(this,n,i)||this;d.content=t,d.sitesProvider=n.get(r.a),d.courseProvider=n.get(l.a),d.appProvider=n.get(c.a),d.eventsProvider=n.get(a.a),d.modulePrefetchDelegate=n.get(s.a);var f=n.get(u.a),p=n.get(o.D);return d.onlineObserver=f.onchange().subscribe(function(e){p.run(function(){d.isOnline=e})}),d}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.hasOffline=!1,this.syncIcon="spinner",this.siteId=this.sitesProvider.getCurrentSiteId(),this.moduleName=this.courseProvider.translateModuleName(this.moduleName),this.syncEventName&&(this.syncObserver=this.eventsProvider.on(this.syncEventName,function(e){n.autoSyncEventReceived(e)},this.siteId))},n.prototype.isRefreshSyncNeeded=function(e){return!1},n.prototype.autoSyncEventReceived=function(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)},n.prototype.refreshContent=function(e,n){var t=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner",this.syncIcon="spinner";var i;try{i=this.invalidateContent()}catch(e){this.logger.error(e),i=Promise.resolve()}return i.catch(function(){}).then(function(){return t.loadContent(!0,e,n)}).finally(function(){t.refreshIcon="refresh",t.syncIcon="sync"})},n.prototype.showLoadingAndFetch=function(e,n){var t=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.loadContent(!1,e,n).finally(function(){t.refreshIcon="refresh",t.syncIcon="sync"})},n.prototype.showLoadingAndRefresh=function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.refreshContent(e,n)},n.prototype.fetchContent=function(e,n,t){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),Promise.resolve()},n.prototype.loadContent=function(e,n,t){var i=this;if(void 0===n&&(n=!1),void 0===t&&(t=!1),this.isOnline=this.appProvider.isOnline(),!this.module)return Promise.resolve();var o;try{o=this.fetchContent(e,n,t)}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(t){if(!e)return i.refreshContent(n);i.domUtils.showErrorModalDefault(t,i.fetchContentDefaultError,!0)}).finally(function(){i.loaded=!0,i.refreshIcon="refresh",i.syncIcon="sync"})},n.prototype.showStatus=function(e,n){},n.prototype.setStatusListener=function(){var e=this;void 0===this.statusObserver&&(this.statusObserver=this.eventsProvider.on(a.a.PACKAGE_STATUS_CHANGED,function(n){if(n.componentId===e.module.id&&n.component===e.component){var t=e.currentStatus;e.currentStatus=n.status,e.showStatus(e.currentStatus,t)}},this.siteId),this.modulePrefetchDelegate.getModuleStatus(this.module,this.courseId).then(function(n){e.currentStatus=n,e.showStatus(n)}))},n.prototype.sync=function(){return Promise.resolve(!0)},n.prototype.hasSyncSucceed=function(e){return!0},n.prototype.syncActivity=function(e){var n=this;return void 0===e&&(e=!1),this.sync().then(function(e){return e.warnings&&e.warnings.length&&n.domUtils.showErrorModal(e.warnings[0]),n.hasSyncSucceed(e)}).catch(function(t){return e&&n.domUtils.showErrorModalDefault(t,"core.errorsync",!0),!1})},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.syncObserver&&this.syncObserver.off(),this.statusObserver&&this.statusObserver.off()},n}(t(244).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(40),o=t(992),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.download=function(e,n,t){return this.prefetch(e,n,!1,t)},n.prototype.prefetch=function(e,n,t,i){return Promise.resolve()},n.prototype.prefetchPackage=function(e,n,t,i,o){for(var r=this,l=[],s=5;s<arguments.length;s++)l[s-5]=arguments[s];if(o=o||this.sitesProvider.getCurrentSiteId(),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));if(this.isDownloading(e.id,o))return this.getOngoingDownload(e.id,o);var a=this.setDownloading(e.id,o).then(function(){return Promise.all([r.courseProvider.getModuleBasicInfo(e.id,o),r.courseProvider.getModule(e.id,n,void 0,!1,!0,o)])}).then(function(){return i.apply(i,[e,n,t,o].concat(l))}).then(function(n){return"string"!=typeof n&&(n=""),r.setDownloaded(e.id,o,n)}).catch(function(n){return r.setPreviousStatusAndReject(e.id,n,o)});return this.addOngoingDownload(e.id,a,o)},n.prototype.setDownloaded=function(e,n,t){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(n,i.a.DOWNLOADED,this.component,e,t)},n.prototype.setDownloading=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(n,i.a.DOWNLOADING,this.component,e)},n.prototype.setPreviousStatusAndReject=function(e,n,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.setPackagePreviousStatus(t,this.component,e).then(function(){return Promise.reject(n)})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(9),t(324),t(4),t(10),t(175);var i=t(13),o=(t(6),t(11),t(3),t(40)),r=t(156),l=(t.n(r),function(){function e(e,n,t,o,r,l,s,a,u,c){var d=this;this.localNotifications=n,this.platform=t,this.appProvider=o,this.utils=r,this.configProvider=l,this.textUtils=s,this.translate=a,this.alertCtrl=u,this.SITES_TABLE="notification_sites",this.COMPONENTS_TABLE="notification_components",this.TRIGGERED_TABLE="notifications_triggered",this.tablesSchema=[{name:this.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.COMPONENTS_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.TRIGGERED_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"at",type:"INTEGER",notNull:!0}]}],this.codes={},this.codeRequestsQueue={},this.observables={},this.currentNotification={title:"",texts:[],ids:[],timeouts:[]},this.logger=e.getInstance("CoreLocalNotificationsProvider"),this.appDB=o.getDB(),this.appDB.createTablesFromSchema(this.tablesSchema),t.ready().then(function(){n.on("trigger",function(e,n){d.trigger(e)}),n.on("click",function(e,n){if(e&&e.data){d.logger.debug("Notification clicked: ",e.data);var t=s.parseJSON(e.data);d.notifyClick(t)}})}),c.on(i.a.SITE_DELETED,function(e){e&&d.cancelSiteNotifications(e.id)})}return e.prototype.cancel=function(e,n,t){var i=this;return this.getUniqueNotificationId(e,n,t).then(function(e){return i.localNotifications.cancel(e)})},e.prototype.cancelSiteNotifications=function(e){var n=this;return this.isAvailable()?e?this.localNotifications.getAllScheduled().then(function(t){var i=[];return t.forEach(function(t){"string"==typeof t.data&&(t.data=n.textUtils.parseJSON(t.data)),"object"==typeof t.data&&t.data.siteId===e&&i.push(t.id)}),n.localNotifications.cancel(i)}):Promise.reject(null):Promise.resolve()},e.prototype.getCode=function(e,n){var t=this,i=e+"#"+n;return void 0!==this.codes[i]?Promise.resolve(this.codes[i]):this.appDB.getRecord(e,{id:n}).then(function(e){return t.codes[i]=e.code,e.code}).catch(function(){return t.appDB.getRecords(e,void 0,"code DESC").then(function(o){var r=0;return o.length>0&&(r=o[0].code+1),t.appDB.insertRecord(e,{id:n,code:r}).then(function(){return t.codes[i]=r,r})})})},e.prototype.getComponentCode=function(e){return this.requestCode(this.COMPONENTS_TABLE,e)},e.prototype.getSiteCode=function(e){return this.requestCode(this.SITES_TABLE,e)},e.prototype.getUniqueNotificationId=function(e,n,t){var i=this;return t&&n?this.getSiteCode(t).then(function(t){return i.getComponentCode(n).then(function(n){return(1e8*t+1e7*n+e)%2147483647})}):Promise.reject(null)},e.prototype.isAvailable=function(){var e=window;return this.appProvider.isDesktop()||!!(e.plugin&&e.plugin.notification&&e.plugin.notification.local)},e.prototype.isTriggered=function(e){var n=this;return this.appDB.getRecord(this.TRIGGERED_TABLE,{id:e.id}).then(function(n){return n.at===e.at.getTime()/1e3}).catch(function(){return n.localNotifications.isTriggered(e.id)})},e.prototype.notifyClick=function(e){var n=e.component;n&&this.observables[n]&&this.observables[n].next(e)},e.prototype.processNextRequest=function(){var e,n=this,t=Object.keys(this.codeRequestsQueue)[0];void 0!==t&&("object"==typeof(e=this.codeRequestsQueue[t])&&void 0!==e.table&&void 0!==e.id?this.getCode(e.table,e.id).then(function(n){e.promises.forEach(function(e){e.resolve(n)})}).catch(function(n){e.promises.forEach(function(e){e.reject(n)})}):Promise.resolve()).finally(function(){delete n.codeRequestsQueue[t],n.processNextRequest()})},e.prototype.registerClick=function(e,n){var t=this;return this.logger.debug("Register observer '"+e+"' for notification click."),void 0===this.observables[e]&&(this.observables[e]=new r.Subject),this.observables[e].subscribe(n),{off:function(){t.observables[e].unsubscribe(n)}}},e.prototype.removeTriggered=function(e){return this.appDB.deleteRecords(this.TRIGGERED_TABLE,{id:e})},e.prototype.requestCode=function(e,n){var t=this.utils.promiseDefer(),i=e+"#"+n,o=0==Object.keys(this.codeRequestsQueue).length;return void 0!==this.codeRequestsQueue[i]?this.codeRequestsQueue[i].promises.push(t):this.codeRequestsQueue[i]={table:e,id:n,promises:[t]},o&&this.processNextRequest(),t.promise},e.prototype.rescheduleAll=function(){var e=this;return this.localNotifications.getAllScheduled().then(function(n){var t=[];return n.forEach(function(n){n.at=new Date(1e3*n.at),n.data=n.data?e.textUtils.parseJSON(n.data,{}):{},t.push(e.scheduleNotification(n))}),Promise.all(t)})},e.prototype.schedule=function(e,n,t){var i=this;return this.getUniqueNotificationId(e.id,n,t).then(function(o){return e.id=o,e.data=e.data||{},e.data.component=n,e.data.siteId=t,i.platform.is("android")&&(e.icon=e.icon||"res://icon",e.smallIcon=e.smallIcon||"res://icon",e.led=e.led||"FF9900",e.ledOnTime=e.ledOnTime||1e3,e.ledOffTime=e.ledOffTime||1e3),i.scheduleNotification(e)})},e.prototype.scheduleNotification=function(e){var n=this;return this.isTriggered(e).then(function(t){return n.localNotifications.cancel(e.id).finally(function(){if(!t)return n.configProvider.get(o.a.SETTINGS_NOTIFICATION_SOUND,!0).then(function(t){t?delete e.sound:e.sound=null,n.removeTriggered(e.id),n.localNotifications.schedule(e)})})})},e.prototype.showNotificationPopover=function(e){var n=this;if(e&&e.title&&e.text){var t=function(e){if(void 0===e&&(e=!1),!e&&n.alertNotification&&n.currentNotification.ids.length>1){n.currentNotification.texts.shift(),n.currentNotification.ids.shift(),clearTimeout(n.currentNotification.timeouts.shift());var t="<p>"+n.currentNotification.texts.join("</p><p>")+"</p>";n.alertNotification.setMessage(t)}else n.alertNotification&&!e&&n.alertNotification.dismiss(),n.alertNotification=null,n.currentNotification.title="",n.currentNotification.texts=[],n.currentNotification.ids=[],n.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),n.currentNotification.timeouts=[]};if(this.alertNotification&&this.currentNotification.title==e.title){if(-1!=this.currentNotification.ids.indexOf(e.id))return;this.currentNotification.texts.push(e.text),this.currentNotification.ids.push(e.id),this.currentNotification.texts.length>3&&(this.currentNotification.texts.shift(),this.currentNotification.ids.shift(),clearTimeout(this.currentNotification.timeouts.shift()))}else this.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),this.currentNotification.timeouts=[],this.currentNotification.title=e.title,this.currentNotification.texts=[e.text],this.currentNotification.ids=[e.id];var i="<p>"+this.currentNotification.texts.join("</p><p>")+"</p>";this.alertNotification?(this.alertNotification.setTitle(this.currentNotification.title),this.alertNotification.setMessage(i)):this.alertNotification=this.alertCtrl.create({title:this.currentNotification.title,message:i,cssClass:"core-inapp-notification",enableBackdropDismiss:!1,buttons:[{text:this.translate.instant("core.dismiss"),role:"cancel",handler:function(){t(!0)}}]}),this.alertNotification.present(),this.currentNotification.timeouts.push(setTimeout(function(){t()},4e3))}},e.prototype.trigger=function(e){var n={id:e.id,at:parseInt(e.at,10)};return this.appDB.insertRecord(this.TRIGGERED_TABLE,n)},e.prototype.updateComponentName=function(e,n){return this.appDB.updateRecords(this.COMPONENTS_TABLE,{id:this.COMPONENTS_TABLE+"#"+n},{id:this.COMPONENTS_TABLE+"#"+e})},e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(152),o=(t(256),function(){function e(e,t,i,o,r,l,s){this.sitesProvider=t,this.utils=i,this.translate=o,this.textUtils=r,this.domUtils=l,this.lessonOfflineProvider=s,this.tablesSchema={name:n.PASSWORD_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]},this.ROOT_CACHE_KEY="mmaModLesson:",this.logger=e.getInstance("AddonModLessonProvider"),this.sitesProvider.createTableFromSchema(this.tablesSchema)}return n=e,e.prototype.addAnswerAndResponseToFeedback=function(e,n,t,i,o){return e+='<tr><td class="cell c0 lastcol">'+(t?n:this.textUtils.cleanTags(n))+"</td></tr>",i&&i.trim()?e+='<tr><td class="cell c0 lastcol '+o+'"><em>'+this.translate.instant("addon.mod_lesson.response")+"</em>: <br/>"+i+"</td></tr>":e+='<tr><td class="cell c0 lastcol"></td></tr>',e},e.prototype.addMessage=function(e,n,t){e.push({message:this.translate.instant(n,t)})},e.prototype.addResultValueEolPage=function(e,n,t,i){var o="";if(i){o=this.translate.instant("addon.mod_lesson."+n,"boolean"!=typeof t?{$a:t}:void 0)}e.data[n]={name:n,value:t,message:o}},e.prototype.answerPageIsContent=function(e){if(e.qtype==this.translate.instant("addon.mod_lesson.branchtable"))return!0;if(e.answerdata&&!this.answerPageIsQuestion(e)&&e.answerdata.answers&&e.answerdata.answers[0]){return!!this.domUtils.convertToElement(e.answerdata.answers[0][0]).querySelector('input[type="button"]')}return!1},e.prototype.answerPageIsQuestion=function(e){if(!e.answerdata)return!1;if(e.answerdata.score)return!0;if(e.answerdata.answers)for(var n=0;n<e.answerdata.answers.length;n++){if(e.answerdata.answers[n][1])return!0}return!1},e.prototype.calculateOfflineData=function(e,n,t,i,o,r){n=n||{};var l,s=i||n.reviewmode,a=[],u="";return n.canmanage||(e.ongoing&&!s&&a.push(this.getOngoingScoreMessage(e,n,t,i,o,r).then(function(e){u=e})),e.progressbar&&a.push(this.calculateProgress(e.id,n,t,i,o,r).then(function(e){l=e}))),Promise.all(a).then(function(){return{reviewmode:s,progress:l,ongoingscore:u}})},e.prototype.calculateProgress=function(e,n,t,i,o,r){var l=this;if(r=r||this.sitesProvider.getCurrentSiteId(),i)return Promise.resolve(100);var s,a=n.attemptscount;return(o?Promise.resolve():this.getPages(e,t,!0,!1,r).then(function(e){o=l.createPagesIndex(e)})).then(function(){return l.getPagesIdsWithQuestionAttempts(e,a,!1,r)}).then(function(n){return s=n,l.getContentPagesViewedIds(e,a,r)}).then(function(e){var t={},i=n.firstpageid;for(s=l.utils.mergeArraysWithoutDuplicates(s,e);i;)i=l.validPageAndView(o,o[i],t,s);return 100*l.textUtils.roundToDecimals(s.length/Object.keys(t).length,2)})},e.prototype.checkAnswer=function(e,t,i,o,r){var l={answerid:0,noanswer:!1,correctanswer:!1,isessayquestion:!1,response:"",newpageid:0,studentanswer:"",userresponse:null,feedback:"",nodefaultresponse:!1,inmediatejump:!1};switch(t.page.qtype){case n.LESSON_PAGE_BRANCHTABLE:l.inmediatejump=!0,l.newpageid=this.getNewPageId(t.page.id,i.jumpto,o);break;case n.LESSON_PAGE_ESSAY:this.checkAnswerEssay(t,i,l);break;case n.LESSON_PAGE_MATCHING:this.checkAnswerMatching(t,i,l);break;case n.LESSON_PAGE_MULTICHOICE:this.checkAnswerMultichoice(e,t,i,r,l);break;case n.LESSON_PAGE_NUMERICAL:this.checkAnswerNumerical(e,t,i,r,l);break;case n.LESSON_PAGE_SHORTANSWER:this.checkAnswerShort(e,t,i,r,l);break;case n.LESSON_PAGE_TRUEFALSE:this.checkAnswerTruefalse(e,t,i,r,l)}return l},e.prototype.checkAnswerEssay=function(e,n,t){var i;if(t.isessayquestion=!0,!n)return t.inmediatejump=!0,void(t.newpageid=e.page.id);(i=void 0!==n["answer[text]"]?n["answer[text]"]:"object"==typeof n.answer?n.answer.text:n.answer)&&""!==i.trim()?(e.answers.forEach(function(e){t.answerid=e.id,t.newpageid=e.jumpto}),t.userresponse={sent:0,graded:0,score:0,answer:i,answerformat:1,response:"",responseformat:1},t.studentanswerformat=1,t.studentanswer=i):t.noanswer=!0},e.prototype.checkAnswerMatching=function(e,n,t){if(!n)return t.inmediatejump=!0,void(t.newpageid=e.page.id);var i=this.getUserResponseMatching(n),o=this.utils.clone(e.answers),r=o.shift(),l=o.shift(),s={};o.forEach(function(e){""===e.answer&&""===e.response||(s[e.id]=e)});var a=[],u=0;t.studentanswer="",t.studentanswerformat=1;for(var c in i){var d=i[c];if(!d)return void(t.noanswer=!0);if(d=this.textUtils.decodeHTML(d),a.push(d),void 0!==s[c]){var f=s[c];t.studentanswer+="<br />"+f.answer+" = "+d,f.response&&f.response.trim()==d.trim()&&u++}}t.userresponse=a.join(","),u==Object.keys(s).length?(t.correctanswer=!0,t.response=r.answer,t.answerid=r.id,t.newpageid=r.jumpto):(t.correctanswer=!1,t.response=l.answer,t.answerid=l.id,t.newpageid=l.jumpto)},e.prototype.checkAnswerMultichoice=function(e,t,i,o,r){var l=this;if(!i)return r.inmediatejump=!0,void(r.newpageid=t.page.id);var s=this.getUsedAnswersMultichoice(t);if(t.page.qoption){var a=this.getUserResponseMultichoice(i);if(!a||!Array.isArray(a))return void(r.noanswer=!0);r.userresponse=a.join(",");var u,c,d=[],f=[],p=0,h=0,m=0,_=0;r.studentanswer="",r.studentanswerformat=1,s.forEach(function(e){for(var n in a){if(a[n]==e.id){d.push(e.answer),f.push(e.response);break}}}),r.studentanswer=d.join(n.MULTIANSWER_DELIMITER),s.forEach(function(n){var i=l.isAnswerCorrect(e,t.page.id,n,o);a.forEach(function(e){e==n.id&&(i?p++:(void 0===c&&(c=n.jumpto),_||(_=n.id)))}),i&&(h++,void 0===u&&(u=n.jumpto),m||(m=n.id))}),a.length==h&&p==h?(r.correctanswer=!0,r.response=f.join(n.MULTIANSWER_DELIMITER),r.newpageid=u,r.answerid=m):(r.correctanswer=!1,r.response=f.join(n.MULTIANSWER_DELIMITER),r.newpageid=c,r.answerid=_)}else{if(void 0===i.answerid||!i.answerid&&0!==Number(i.answerid))return void(r.noanswer=!0);r.answerid=i.answerid;for(var g in t.answers){var v=t.answers[g];if(v.id==i.answerid){r.correctanswer=this.isAnswerCorrect(e,t.page.id,v,o),r.newpageid=v.jumpto,r.response=v.response,r.userresponse=r.studentanswer=v.answer;break}}}},e.prototype.checkAnswerNumerical=function(e,n,t,i,o){var r=parseFloat(t.answer);if(o.response="",o.newpageid=0,t.answer&&!isNaN(r)){o.useranswer=r,o.studentanswer=o.userresponse=o.useranswer;for(var l in n.answers){var s=n.answers[l],a=void 0,u=void 0;if(s.answer&&-1!=s.answer.indexOf(":")){var c=s.answer.split(":");u=parseFloat(c[0]),a=parseFloat(c[1])}else a=u=parseFloat(s.answer);if(o.useranswer>=u&&o.useranswer<=a){o.newpageid=s.jumpto,o.response=s.response,o.correctanswer=this.isAnswerCorrect(e,n.page.id,s,i),o.answerid=s.id;break}}}else o.noanswer=!0},e.prototype.checkAnswerShort=function(e,n,t,i,o){var r=!(!t.answer||!t.answer.trim)&&t.answer.trim();if(r){for(var l in n.answers){var s=n.answers[l],a=n.page.qoption,u=s.answer,c=!1,d=void 0;if(a?(d="","/i"==u.substr(-2)&&(u=u.substr(0,u.length-2),d="i")):(u=u.replace("*","#####"),u=(u=this.textUtils.escapeForRegex(u)).replace("#####",".*")),this.isAnswerCorrect(e,n.page.id,s,i))a?r.match(new RegExp("^"+u+"$",d))&&(c=!0):r.match(new RegExp("^"+u+"$","i"))&&(c=!0),c&&(o.correctanswer=!0);else if(a){switch(u.substr(0,2)){case"--":u=u.substr(2),r.match(new RegExp("^"+u+"$",d))||(c=!0);break;case"++":u=u.substr(2);var f=r.match(new RegExp(u,"g"+d));if(f){c=!0;for(var p=f[0].length,h=[],m=[],_=0;_<p;_++)h.push(f[0][_]),m.push('<span class="incorrect matches">'+f[0][_]+"</span>");r=r.replace(h,m)}break;default:r.match(new RegExp("^"+u+"$",d))&&(c=!0)}o.correctanswer=!1}else r.match(new RegExp("^"+u+"$","i"))&&(c=!0);if(c){o.newpageid=s.jumpto,o.response=s.response,o.answerid=s.id;break}}o.userresponse=r,o.studentanswer=this.textUtils.s(r)}else o.noanswer=!0},e.prototype.checkAnswerTruefalse=function(e,n,t,i,o){if(t.answerid){o.answerid=t.answerid;for(var r in n.answers){var l=n.answers[r];if(l.id==t.answerid){o.correctanswer=this.isAnswerCorrect(e,n.page.id,l,i),o.newpageid=l.jumpto,o.response=l.response,o.studentanswer=o.userresponse=l.answer;break}}}else o.noanswer=!0},e.prototype.createPagesIndex=function(e){var n={};return e.forEach(function(e){n[e.page.id]=e.page}),n},e.prototype.finishRetake=function(e,n,t,o,r,l,s,a){var u=this;if(l){var c=s.attemptscount;return this.lessonOfflineProvider.finishRetake(e.id,n,c,!0,o,a).then(function(){return u.lessonGrade(e,c,t,r,void 0,a).catch(function(){return{}})}).then(function(n){var l,c={data:{},messages:[],warnings:[]},d=[],f=!0;return u.addResultValueEolPage(c,"offline",!0),u.addResultValueEolPage(c,"gradeinfo",n),e.custom&&!s.canmanage&&n.nquestions<e.minquestions&&(f=!1,u.addMessage(c.messages,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:n.nquestions,minquestions:e.minquestions}})),s.canmanage?e.grade!=i.a.TYPE_NONE&&u.addResultValueEolPage(c,"displayofgrade",!0,!0):f&&(d.push(u.calculateProgress(e.id,s,t,r,void 0,a).then(function(e){u.addResultValueEolPage(c,"progresscompleted",e)})),n.attempts?(e.custom||(u.addResultValueEolPage(c,"numberofpagesviewed",n.nquestions,!0),e.minquestions&&n.nquestions<e.minquestions&&u.addResultValueEolPage(c,"youshouldview",e.minquestions,!0),u.addResultValueEolPage(c,"numberofcorrectanswers",n.earned,!0)),l={score:n.earned,grade:n.total},n.nmanual?(l.tempmaxgrade=n.total-n.manualpoints,l.essayquestions=n.nmanual,u.addResultValueEolPage(c,"displayscorewithessays",l,!0)):u.addResultValueEolPage(c,"displayscorewithoutessays",l,!0),e.grade!=i.a.TYPE_NONE&&(l={grade:u.textUtils.roundToDecimals(n.grade*e.grade/100,1),total:e.grade},u.addResultValueEolPage(c,"yourcurrentgradeisoutof",l,!0))):e.timelimit?o&&u.addResultValueEolPage(c,"eolstudentoutoftimenoanswers",!0,!0):u.addResultValueEolPage(c,"welldone",!0,!0)),e.modattempts&&s.canmanage&&u.addResultValueEolPage(c,"modattemptsnoteacher",!0,!0),f&&u.addResultValueEolPage(c,"gradelesson",1),c})}return this.finishRetakeOnline(e.id,t,o,r,a)},e.prototype.finishRetakeOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={lessonid:e,outoftime:t?1:0,review:i?1:0};return"string"==typeof n&&(l.password=n),o.write("mod_lesson_finish_attempt",l).then(function(e){var n={};return e.data.forEach(function(e){e.value&&"string"==typeof e.value&&"1"!==e.value&&(e.value=r.textUtils.parseJSON(e.value)),n[e.name]=e}),e.data=n,e})})},e.prototype.getAccessInformation=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={lessonid:e},l={cacheKey:o.getAccessInformationCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_lesson_get_lesson_access_information",r,l)})},e.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInfo:"+e},e.prototype.getContentPagesViewed=function(e,t,i){var o=[],r=n.TYPE_STRUCTURE,l={online:[],offline:[]};return o.push(this.getContentPagesViewedOnline(e,t,!1,!1,i).then(function(e){l.online=e})),o.push(this.lessonOfflineProvider.getRetakeAttemptsForType(e,t,r,i).catch(function(){return[]}).then(function(e){l.offline=e})),Promise.all(o).then(function(){return l})},e.prototype.getContentPagesViewedCacheKey=function(e,n){return this.getContentPagesViewedCommonCacheKey(e)+":"+n},e.prototype.getContentPagesViewedCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"contentPagesViewed:"+e},e.prototype.getContentPagesViewedIds=function(e,n,t){return this.getContentPagesViewed(e,n,t).then(function(e){var n={};return e.online.concat(e.offline).forEach(function(e){n[e.pageid]||(n[e.pageid]=!0)}),Object.keys(n).map(function(e){return Number(e)})})},e.prototype.getContentPagesViewedOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={lessonid:e,lessonattempt:n},s={cacheKey:r.getContentPagesViewedCacheKey(e,n)};return t?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_lesson_get_content_pages_viewed",l,s).then(function(e){return e.pages})})},e.prototype.getLastContentPageViewed=function(e,n,t){return this.getContentPagesViewed(e,n,t).then(function(e){var n,t=0;return e.online.forEach(function(e){e.timeseen>t&&(n=e,t=e.timeseen)}),e.offline.forEach(function(e){e.timemodified>t&&(n=e,t=e.timemodified)}),n}).catch(function(){})},e.prototype.getLastPageSeen=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o;return this.lessonOfflineProvider.getLastQuestionPageAttempt(e,n,t).then(function(r){return r&&(o=r.newpageid),i.getLastContentPageViewed(e,n,t).then(function(e){return e&&(r?e.timemodified>r.timemodified&&(o=e.newpageid||e.pageid):o=e.newpageid||e.pageid),o})})},e.prototype.getLesson=function(e,n,t,i){return this.getLessonByField(e,"coursemodule",n,t,i)},e.prototype.getLessonByField=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={courseids:[e]},s={cacheKey:r.getLessonDataCacheKey(e)};return i&&(s.omitExpires=!0),o.read("mod_lesson_get_lessons_by_courses",l,s).then(function(e){if(e&&e.lessons){var i=e.lessons.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getLessonById=function(e,n,t,i){return this.getLessonByField(e,"id",n,t,i)},e.prototype.getLessonDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"lesson:"+e},e.prototype.getLessonWithPassword=function(e,n,t,i,o,r){var l=this;return void 0===t&&(t=!0),this.sitesProvider.getSite(r).then(function(r){var s={lessonid:e},a={cacheKey:l.getLessonWithPasswordCacheKey(e)};return"string"==typeof n&&(s.password=n),i?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_lesson_get_lesson",s,a).then(function(n){return void 0===n.lesson.ongoing&&(l.removeStoredPassword(e,r.id),t)?l.invalidateLessonWithPassword(e,r.id).catch(function(){}).then(function(){return Promise.reject(l.translate.instant("addon.mod_lesson.loginfail"))}):n.lesson})})},e.prototype.getLessonWithPasswordCacheKey=function(e){return this.ROOT_CACHE_KEY+"lessonWithPswrd:"+e},e.prototype.getNewPageId=function(e,n,t){return t&&t[e]&&t[e][n]?t[e][n].calculatedjump:n||e},e.prototype.getOngoingScoreMessage=function(e,n,t,i,o,r){var l=this;if(n.canmanage)return Promise.resolve(this.translate.instant("addon.mod_lesson.teacherongoingwarning"));var s=n.attemptscount;return i&&s--,this.lessonGrade(e,s,t,i,o,r).then(function(n){var t={};return e.custom?(t.score=n.earned,t.currenthigh=n.total,l.translate.instant("addon.mod_lesson.ongoingcustom",{$a:t})):(t.correct=n.earned,t.viewed=n.attempts,l.translate.instant("addon.mod_lesson.ongoingnormal",{$a:t}))})},e.prototype.getPageAnswers=function(e,n,t,i,o){return this.getPageData(e,n,t,i,!0,!0,!1,void 0,void 0,o).then(function(e){return e.answers})},e.prototype.getPagesAnswers=function(e,n,t,i,o){var r=this,l={},s=[];return n.forEach(function(n){s.push(r.getPageAnswers(e,n,t,i,o).then(function(e){e.forEach(function(e){e.pageid=n,l[e.id]=e})}))}),Promise.all(s).then(function(){return l})},e.prototype.getPageData=function(e,n,t,i,o,r,l,s,a,u){var c=this;return this.sitesProvider.getSite(u).then(function(d){var f={lessonid:e.id,pageid:Number(n),review:i?1:0,returncontents:o?1:0},p={cacheKey:c.getPageDataCacheKey(e.id,n)};return"string"==typeof t&&(f.password=t),r?p.omitExpires=!0:l&&(p.getFromCache=!1,p.emergencyCache=!1),i&&(p.getFromCache=!1,p.saveToCache=!1,p.emergencyCache=!1),d.read("mod_lesson_get_page_data",f,p).then(function(n){return r&&s&&n.page?c.calculateOfflineData(e,s,t,i,void 0,u).then(function(o){return Object.assign(n,o),c.getPageViewMessages(e,s,n.page,i,a,t,u)}).then(function(e){return n.messages=e,n}):n})})},e.prototype.getPageDataCacheKey=function(e,n){return this.getPageDataCommonCacheKey(e)+":"+n},e.prototype.getPageDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"pageData:"+e},e.prototype.getPages=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={lessonid:e},s={cacheKey:r.getPagesCacheKey(e)};return"string"==typeof n&&(l.password=n),t?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_lesson_get_pages",l,s).then(function(e){return e.pages})})},e.prototype.getPagesCacheKey=function(e){return this.ROOT_CACHE_KEY+"pages:"+e},e.prototype.getPagesPossibleJumps=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={lessonid:e},l={cacheKey:o.getPagesPossibleJumpsCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_lesson_get_pages_possible_jumps",r,l).then(function(e){if(e.jumps){var n={};return e.jumps.forEach(function(e){void 0===n[e.pageid]&&(n[e.pageid]={}),n[e.pageid][e.jumpto]=e}),n}return Promise.reject(null)})})},e.prototype.getPagesPossibleJumpsCacheKey=function(e){return this.ROOT_CACHE_KEY+"pagesJumps:"+e},e.prototype.getPageProcessMessages=function(e,n,t,i,o){var r=[];return n.canmanage&&(this.lessonDisplayTeacherWarning(o)&&this.addMessage(r,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}}),e.timelimit&&this.addMessage(r,"addon.mod_lesson.teachertimerwarning")),t.attemptsremaining>0&&e.review&&!i&&this.addMessage(r,"addon.mod_lesson.attemptsremaining",{$a:t.attemptsremaining}),r},e.prototype.getPagesIdsWithQuestionAttempts=function(e,n,t,i,o){return this.getQuestionsAttempts(e,n,t,void 0,i,o).then(function(e){var n={};return e.online.concat(e.offline).forEach(function(e){n[e.pageid]||(n[e.pageid]=!0)}),Object.keys(n).map(function(e){return Number(e)})})},e.prototype.getPageViewMessages=function(e,t,o,r,l,s,a){var u=this,c=[],d=Promise.resolve();if(t.canmanage)e.timelimit&&this.addMessage(c,"addon.mod_lesson.teachertimerwarning"),this.lessonDisplayTeacherWarning(l)&&this.addMessage(c,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}});else if(o.qtype==n.LESSON_PAGE_BRANCHTABLE&&e.minquestions){d=this.lessonGrade(e,t.attemptscount,s,r,void 0,a).then(function(n){n.attempts&&(n.nquestions<e.minquestions&&u.addMessage(c,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:n.nquestions,minquestions:e.minquestions}}),r||e.retake||(u.addMessage(c,"addon.mod_lesson.numberofcorrectanswers",{$a:n.earned}),e.grade!=i.a.TYPE_NONE&&u.addMessage(c,"addon.mod_lesson.yourcurrentgradeisoutof",{$a:{grade:u.textUtils.roundToDecimals(n.grade*e.grade/100,1),total:e.grade}})))}).catch(function(){})}return d.then(function(){return c})},e.prototype.getQuestionsAttempts=function(e,n,t,i,o,r){var l=[],s={online:[],offline:[]};return l.push(this.getQuestionsAttemptsOnline(e,n,t,i,!1,!1,o,r).then(function(e){s.online=e})),l.push(this.lessonOfflineProvider.getQuestionsAttempts(e,n,t,i,o).catch(function(){return[]}).then(function(e){s.offline=e})),Promise.all(l).then(function(){return s})},e.prototype.getQuestionsAttemptsCacheKey=function(e,n,t){return this.getQuestionsAttemptsCommonCacheKey(e)+":"+t+":"+n},e.prototype.getQuestionsAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"questionsAttempts:"+e},e.prototype.getQuestionsAttemptsOnline=function(e,n,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId();var u={lessonid:e,attempt:n,userid:s},c={cacheKey:a.getQuestionsAttemptsCacheKey(e,n,s)};return o?c.omitExpires=!0:r&&(c.getFromCache=!1,c.emergencyCache=!1),l.read("mod_lesson_get_questions_attempts",u,c).then(function(e){return i||t?e.attempts.filter(function(e){return!(t&&!e.correct)&&(!i||e.pageid==i)}):e.attempts})})},e.prototype.getRetakesOverview=function(e,n,t,i,o){var r=this;return n=n||0,this.sitesProvider.getSite(o).then(function(o){var l={lessonid:e,groupid:n},s={cacheKey:r.getRetakesOverviewCacheKey(e,n)};return t?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_lesson_get_attempts_overview",l,s).then(function(e){return e.data})})},e.prototype.getRetakesOverviewCacheKey=function(e,n){return this.getRetakesOverviewCommonCacheKey(e)+":"+n},e.prototype.getRetakesOverviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"retakesOverview:"+e},e.prototype.getStoredPassword=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.PASSWORD_TABLE,{lessonid:e}).then(function(e){return e.password})})},e.prototype.getSubpagesOf=function(e,n,t){var i=[];for(n=e[n].nextpageid,t=t||[];n&&-1==t.indexOf(e[n].qtype);)i.push(e[n]),n=e[n].nextpageid;return i},e.prototype.getTimers=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){o=o||i.getUserId();var l={lessonid:e,userid:o},s={cacheKey:r.getTimersCacheKey(e,o)};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_lesson_get_user_timers",l,s).then(function(e){return e.timers})})},e.prototype.getTimersCacheKey=function(e,n){return this.getTimersCommonCacheKey(e)+":"+n},e.prototype.getTimersCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"timers:"+e},e.prototype.getUsedAnswersMultichoice=function(e){return this.utils.clone(e.answers).filter(function(e){return""!==e.answer})},e.prototype.getUserResponseMatching=function(e){if(e.response)return e.response;var n={};for(var t in e){var i=t.match(/^response\[(\d+)\]/);i&&i.length>1&&(n[i[1]]=e[t])}return n},e.prototype.getUserResponseMultichoice=function(e){if(e.answer)return Array.isArray(e.answer)?e.answer.map(function(e){return parseInt(e,10)}):e.answer;var n=[];for(var t in e){var i=t.match(/^answer\[(\d+)\]/);i&&i.length>1&&n.push(parseInt(i[1],10))}return n},e.prototype.getUserRetake=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){t=t||r.getUserId();var s={lessonid:e,userid:t,lessonattempt:n},a={cacheKey:l.getUserRetakeCacheKey(e,t,n)};return i?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_lesson_get_user_attempt",s,a)})},e.prototype.getUserRetakeCacheKey=function(e,n,t){return this.getUserRetakeUserCacheKey(e,n)+":"+t},e.prototype.getUserRetakeUserCacheKey=function(e,n){return this.getUserRetakeLessonCacheKey(e)+":"+n},e.prototype.getUserRetakeLessonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userRetake:"+e},e.prototype.getPreventAccessReason=function(e,n){var t;if(e&&e.preventaccessreasons)for(var i=0;i<e.preventaccessreasons.length;i++){var o=e.preventaccessreasons[i];if("lessonopen"==o.reason||"lessonclosed"==o.reason)return o;"passwordprotectedlesson"==o.reason?n||(t=o):t||(t=o)}return t},e.prototype.jumptoIsCorrect=function(e,t,i){if(!t)return!1;if(t==n.LESSON_NEXTPAGE)return!0;if(t==n.LESSON_UNSEENBRANCHPAGE)return!0;if(t==n.LESSON_RANDOMPAGE)return!0;if(t==n.LESSON_CLUSTERJUMP)return!0;if(t==n.LESSON_EOL)return!0;for(var o=i[e].nextpageid;o;){if(t==o)return!0;o=i[o].nextpageid}return!1},e.prototype.invalidateAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAccessInformationCacheKey(e))})},e.prototype.invalidateContentPagesViewed=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getContentPagesViewedCommonCacheKey(e))})},e.prototype.invalidateContentPagesViewedForRetake=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getContentPagesViewedCacheKey(e,n))})},e.prototype.invalidateLessonData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLessonDataCacheKey(e))})},e.prototype.invalidateLessonWithPassword=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLessonWithPasswordCacheKey(e))})},e.prototype.invalidatePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getPageDataCommonCacheKey(e))})},e.prototype.invalidatePageDataForPage=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getPageDataCacheKey(e,n))})},e.prototype.invalidatePages=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPagesCacheKey(e))})},e.prototype.invalidatePagesPossibleJumps=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPagesPossibleJumpsCacheKey(e))})},e.prototype.invalidateQuestionsAttempts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getQuestionsAttemptsCommonCacheKey(e))})},e.prototype.invalidateQuestionsAttemptsForRetake=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.invalidateWsCacheForKey(o.getQuestionsAttemptsCacheKey(e,n,i))})},e.prototype.invalidateRetakesOverview=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getRetakesOverviewCommonCacheKey(e))})},e.prototype.invalidateRetakesOverviewForGroup=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getRetakesOverviewCacheKey(e,n))})},e.prototype.invalidateTimers=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getTimersCommonCacheKey(e))})},e.prototype.invalidateTimersForUser=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getTimersCacheKey(e,t))})},e.prototype.invalidateUserRetake=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.invalidateWsCacheForKey(o.getUserRetakeCacheKey(e,t,n))})},e.prototype.invalidateUserRetakesForLesson=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserRetakeLessonCacheKey(e))})},e.prototype.invalidateUserRetakesForUser=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKeyStartingWith(i.getUserRetakeUserCacheKey(e,n))})},e.prototype.isAnswerCorrect=function(e,n,t,i){return e.custom?t.score>0:this.jumptoIsCorrect(n,t.jumpto,i)},e.prototype.isLessonOffline=function(e){return!!e.allowofflineattempts},e.prototype.isPasswordProtected=function(e){if(e&&e.preventaccessreasons)for(var n=0;n<e.preventaccessreasons.length;n++){if("passwordprotectedlesson"==e.preventaccessreasons[n].reason)return!0}return!1},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_lesson_get_lesson_access_information")})},e.prototype.isQuestionPage=function(e){return e==n.TYPE_QUESTION},e.prototype.launchRetake=function(e,n,t,i,o){return this.sitesProvider.getSite(o).then(function(o){var r={lessonid:e,review:i?1:0};return"string"==typeof n&&(r.password=n),"number"==typeof t&&(r.pageid=t),o.write("mod_lesson_launch_attempt",r)})},e.prototype.leftDuringTimed=function(e){return e&&e.lastpageseen&&e.lastpageseen!=n.LESSON_EOL&&e.leftduringtimedsession},e.prototype.lessonDisplayTeacherWarning=function(e){if(!e)return!1;for(var t in e)for(var i in e[t]){var o=Number(i);if(o==n.LESSON_CLUSTERJUMP||o==n.LESSON_UNSEENBRANCHPAGE)return!0}return!1},e.prototype.lessonGrade=function(e,t,i,o,r,l,s){var a=this,u=0,c=0,d=0,f=0,p=0,h=0,m=0;return this.getQuestionsAttempts(e.id,t,!1,void 0,l,s).then(function(t){var s=t.online.concat(t.offline);if(s.length){var f={};return(r?Promise.resolve():a.getPages(e.id,i,!0,!1,l).then(function(e){r=a.createPagesIndex(e)})).then(function(){var n=[];s.forEach(function(e){f[e.pageid]||(f[e.pageid]=[],n.push(e.pageid)),f[e.pageid].push(e)});for(var t in f){var r=f[t].sort(function(e,n){return(e.timeseen||e.timemodified)-(n.timeseen||n.timemodified)});f[t]=r.slice(0,e.maxattempts)}return a.getPagesAnswers(e,n,i,o,l)}).then(function(t){p=Object.keys(f).length;for(var i in f){var o=f[i],l=o[o.length-1];e.custom?r[l.pageid].qtype==n.LESSON_PAGE_ESSAY?(l.useranswer&&void 0!==l.useranswer.score&&(m+=l.useranswer.score),c++,d+=t[l.answerid].score):l.answerid&&(m+=t[l.answerid].score):(o.forEach(function(e){m+=e.correct?1:0}),r[l.pageid].qtype==n.LESSON_PAGE_ESSAY&&(c++,d++)),u+=o.length}if(e.custom){var s={};for(var a in t){var _=t[a];void 0===s[_.pageid]?s[_.pageid]=_.score:s[_.pageid]<_.score&&(s[_.pageid]=_.score)}for(var i in s)h+=s[i]}else h=e.minquestions&&p<e.minquestions?u+(e.minquestions-p):u})}}).then(function(){return h&&(f=a.textUtils.roundToDecimals(100*m/h,5)),{nquestions:p,attempts:u,total:h,earned:m,grade:f,nmanual:c,manualpoints:d}})},e.prototype.logViewLesson=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){var i={lessonid:e};return"string"==typeof n&&(i.password=n),t.write("mod_lesson_view_lesson",i).then(function(e){return e.status?e:Promise.reject(null)})})},e.prototype.processPage=function(e,n,t,i,o,r,l,s,a,u){var c=this;u=u||this.sitesProvider.getCurrentSiteId();var d,f,p=t.page.id;return l?this.getPages(e.id,o,!0,!1,u).then(function(o){return f=c.createPagesIndex(o),t.answers.length?c.recordAttempt(e,n,t,i,r,s,a,f,u):{nodefaultresponse:!0,newpageid:i.newpageid}}).then(function(n){return d=n,d.newpageid=c.getNewPageId(t.page.id,d.newpageid,a),c.calculateOfflineData(e,s,o,r,f,u)}).then(function(n){return d.warnings=[],d.displaymenu=t.displaymenu,d.messages=c.getPageProcessMessages(e,s,d,r,a),Object.assign(d,n),d}):this.processPageOnline(e.id,p,i,o,r,u)},e.prototype.processPageOnline=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={lessonid:e,pageid:n,data:l.utils.objectToArrayOfObjects(t,"name","value",!0),review:o?1:0};return"string"==typeof i&&(s.password=i),r.write("mod_lesson_process_page",s)})},e.prototype.recordAttempt=function(e,t,i,o,r,l,s,a,u){var c=this,d=this.checkAnswer(e,i,o,s,a),f=l.attemptscount;if(d.inmediatejump)return i.page.qtype==n.LESSON_PAGE_BRANCHTABLE?this.lessonOfflineProvider.processPage(e.id,t,f,i.page,o,d.newpageid,d.answerid,!1,d.userresponse,u).then(function(){return d}):Promise.resolve(d);var p,h=Promise.resolve(),m=!1;return d.attemptsremaining=0,d.maxattemptsreached=!1,d.noanswer?(d.newpageid=i.page.id,d.feedback=this.translate.instant("addon.mod_lesson.noanswer")):(l.canmanage||(h=this.getQuestionsAttempts(e.id,f,!1,i.page.id,u).then(function(l){if((p=l.online.length+l.offline.length)>=e.maxattempts)return d.maxattemptsreached=!0,d.feedback=c.translate.instant("addon.mod_lesson.maximumnumberofattemptsreached"),d.newpageid=n.LESSON_NEXTPAGE,void(m=!0);var a;if(!r&&(e.retake||!e.retake&&!f)){var h=c.getNewPageId(i.page.id,d.newpageid,s);a=c.lessonOfflineProvider.processPage(e.id,t,f,i.page,o,h,d.answerid,d.correctanswer,d.userresponse,u),p++}return d.correctanswer||d.newpageid||(p>=e.maxattempts?(e.maxattempts>1&&(d.maxattemptsreached=!0),d.newpageid=n.LESSON_NEXTPAGE):e.maxattempts>1&&(d.attemptsremaining=e.maxattempts-p)),a})),h=h.then(function(){if(!m&&(d.response||(e.feedback||d.noanswer||e.review&&!d.correctanswer&&!d.isessayquestion?d.response=c.translate.instant(d.isessayquestion?"addon.mod_lesson.defaultessayresponse":d.correctanswer?"addon.mod_lesson.thatsthecorrectanswer":"addon.mod_lesson.thatsthewronganswer"):d.nodefaultresponse=!0),d.response)){var t=void 0;!e.review||d.correctanswer||d.isessayquestion?(d.feedback="",t=Promise.resolve()):(t=void 0===p?c.getQuestionsAttempts(e.id,f,!1,i.page.id,u).then(function(e){p=e.online.length+e.offline.length}):Promise.resolve()).then(function(){d.feedback='<div class="box feedback">'+c.translate.instant("addon.mod_lesson."+(1==p?"firstwrong":"secondpluswrong"))+"</div>"});var o="response";return d.correctanswer?o+=" correct":d.isessayquestion||(o+=" incorrect"),t.then(function(){if(d.feedback+='<div class="box generalbox boxaligncenter p-y-1">'+i.page.contents+"</div>",d.feedback+='<div class="correctanswer generalbox"><em>'+c.translate.instant("addon.mod_lesson.youranswer")+'</em> : <div class="studentanswer m-t-2 m-b-2"><table class="generaltable"><tbody>',i.page.qoption)for(var e=d.studentanswer?d.studentanswer.split(n.MULTIANSWER_DELIMITER):[],t=d.response?d.response.split(n.MULTIANSWER_DELIMITER):[],r=0;r<e.length;r++)d.feedback=c.addAnswerAndResponseToFeedback(d.feedback,e[r],d.studentanswerformat,t[r],o);else d.feedback=c.addAnswerAndResponseToFeedback(d.feedback,d.studentanswer,d.studentanswerformat,d.response,o);d.feedback+="</tbody></table></div></div>"})}})),h.then(function(){return d})},e.prototype.removeStoredPassword=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.PASSWORD_TABLE,{lessonid:e})})},e.prototype.storePassword=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={lessonid:e,password:t,timemodified:Date.now()};return i.getDb().insertRecord(n.PASSWORD_TABLE,o)})},e.prototype.validPageAndView=function(e,t,i,o){if(t.qtype!=n.LESSON_PAGE_ENDOFCLUSTER&&t.qtype!=n.LESSON_PAGE_ENDOFBRANCH&&(i[t.id]=1),t.qtype==n.LESSON_PAGE_CLUSTER){this.getSubpagesOf(e,t.id,[n.LESSON_PAGE_ENDOFCLUSTER]).forEach(function(e){var n=o.indexOf(e.id);-1!=n&&(delete o[n],-1==o.indexOf(t.id)&&o.push(t.id))})}return t.nextpageid},e.COMPONENT="mmaModLesson",e.LESSON_THISPAGE=0,e.LESSON_UNSEENPAGE=1,e.LESSON_UNANSWEREDPAGE=2,e.LESSON_NEXTPAGE=-1,e.LESSON_EOL=-9,e.LESSON_UNSEENBRANCHPAGE=-50,e.LESSON_RANDOMPAGE=-60,e.LESSON_RANDOMBRANCH=-70,e.LESSON_CLUSTERJUMP=-80,e.TYPE_QUESTION=0,e.TYPE_STRUCTURE=1,e.LESSON_PAGE_SHORTANSWER=1,e.LESSON_PAGE_TRUEFALSE=2,e.LESSON_PAGE_MULTICHOICE=3,e.LESSON_PAGE_MATCHING=5,e.LESSON_PAGE_NUMERICAL=8,e.LESSON_PAGE_ESSAY=10,e.LESSON_PAGE_BRANCHTABLE=20,e.LESSON_PAGE_ENDOFBRANCH=21,e.LESSON_PAGE_CLUSTER=30,e.LESSON_PAGE_ENDOFCLUSTER=31,e.MULTIANSWER_DELIMITER="@^#|",e.PASSWORD_TABLE="addon_mod_lesson_password",e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.coursesProvider=t,this.utils=i,this.ROOT_CACHE_KEY="mmaCourseCompletion:",this.logger=e.getInstance("AddonCourseCompletionProvider")}return e.prototype.canMarkSelfCompleted=function(e,n){var t=!1,i=!1;return this.sitesProvider.getCurrentSiteUserId()==e&&(n.completions.forEach(function(e){1===e.type&&(t=!0,i=e.complete)}),t&&!i)},e.prototype.getCompletedStatusText=function(e){if(e.completed)return"addon.coursecompletion.completed";var n=!1;return e.completions.forEach(function(e){(e.timecompleted||e.complete)&&(n=!0)}),n?"addon.coursecompletion.inprogress":"addon.coursecompletion.notyetstarted"},e.prototype.getCompletion=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){n=n||i.getUserId(),t=t||{},o.logger.debug("Get completion for course "+e+" and user "+n);var r={courseid:e,userid:n};return t.cacheKey=o.getCompletionCacheKey(e,n),i.read("core_completion_get_course_completion_status",r,t).then(function(e){return e.completionstatus?e.completionstatus:Promise.reject(null)})})},e.prototype.getCompletionCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"view:"+e+":"+n},e.prototype.invalidateCourseCompletion=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCompletionCacheKey(e,n))},e.prototype.isPluginViewEnabled=function(){return this.sitesProvider.isLoggedIn()},e.prototype.isPluginViewEnabledForCourse=function(e,n){return void 0===n&&(n=!0),e?this.coursesProvider.getUserCourse(e,n).then(function(e){if(e){if(void 0!==e.enablecompletion&&0==e.enablecompletion)return!1;if(void 0!==e.completionhascriteria&&0==e.completionhascriteria)return!1}return!0}):Promise.reject(null)},e.prototype.isPluginViewEnabledForUser=function(e,n){var t=this,i=this.sitesProvider.getCurrentSiteUserId();return(n&&n!=i?Promise.reject(null):this.coursesProvider.getUserCourse(e,!0).then(function(e){return!(!e||void 0===e.completionhascriteria)||Promise.reject(null)})).catch(function(){var i={emergencyCache:0};return t.getCompletion(e,n,i).then(function(){return!0}).catch(function(o){return!t.utils.isWebServiceError(o)&&(i.omitExpires=!0,t.getCompletion(e,n,i).then(function(){return!0}).catch(function(){return!1}))})})},e.prototype.markCourseAsSelfCompleted=function(e){var n={courseid:e};return this.sitesProvider.getCurrentSite().write("core_completion_mark_course_self_completed",n).then(function(e){if(!e.status)return Promise.reject(null)})},e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(346);var i=function(){function e(e,t,i,o,r,l,s,a,u){this.sitesProvider=t,this.appProvider=i,this.userProvider=o,this.messagesOffline=r,this.utils=l,this.timeUtils=s,this.emulatorHelper=a,this.eventsProvider=u,this.ROOT_CACHE_KEY="mmaMessages:",this.LIMIT_MESSAGES=n.LIMIT_MESSAGES,this.logger=e.getInstance("AddonMessagesProvider")}return n=e,e.prototype.addContact=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("core_message_create_contacts",{userids:[e]}).then(function(){return t.invalidateAllContactsCache(n.getUserId(),n.getId())})})},e.prototype.blockContact=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o;if(t.wsAvailable("core_message_block_user")){var r={userid:t.getUserId(),blockeduserid:e};o=t.write("core_message_block_user",r)}else{o=t.write("core_message_block_contacts",r={userids:[e]})}return o.then(function(){return i.invalidateAllMemberInfo(e,t).finally(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,userBlocked:!0},t.id)})})})},e.prototype.confirmContactRequest=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={userid:e,requesteduserid:t.getUserId()};return t.write("core_message_confirm_contact_request",o).then(function(){return i.utils.allPromises([i.invalidateAllMemberInfo(e,t),i.invalidateContactsCache(t.id),i.invalidateUserContacts(t.id),i.refreshContactRequestsCount(t.id)]).finally(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestConfirmed:!0},t.id)})})})},e.prototype.createContactRequest=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={userid:t.getUserId(),requesteduserid:e};return t.write("core_message_create_contact_request",o).then(function(){return i.invalidateAllMemberInfo(e,t).finally(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestCreated:!0},t.id)})})})},e.prototype.declineContactRequest=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={userid:e,requesteduserid:t.getUserId()};return t.write("core_message_decline_contact_request",o).then(function(){return i.utils.allPromises([i.invalidateAllMemberInfo(e,t),i.refreshContactRequestsCount(t.id)]).finally(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRequestDeclined:!0},t.id)})})})},e.prototype.deleteConversation=function(e,n,t){return this.deleteConversations([e],n,t)},e.prototype.deleteConversations=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();return n.write("core_message_delete_conversations_by_id",{userid:t,conversationids:e}).then(function(){var t=[];return e.forEach(function(e){t.push(i.messagesOffline.deleteConversationMessages(e,n.getId()).catch(function(){}))}),Promise.all(t)})})},e.prototype.deleteMessage=function(e){return e.id?this.deleteMessageOnline(e.id,e.read):e.conversationid?this.messagesOffline.deleteConversationMessage(e.conversationid,e.text,e.timecreated):this.messagesOffline.deleteMessage(e.touserid,e.smallmessage,e.timecreated)},e.prototype.deleteMessageOnline=function(e,n,t){var i=this,o={messageid:e,userid:t||this.sitesProvider.getCurrentSiteUserId()};return void 0!==n&&(o.read=n),this.sitesProvider.getCurrentSite().write("core_message_delete_message",o).then(function(){return i.invalidateDiscussionCache(t)})},e.prototype.formatConversation=function(e,t){var i=e.messages.length,o=i?e.messages[i-1]:null;if(e.lastmessage=o?o.text:null,e.lastmessagedate=o?o.timecreated:null,e.sentfromcurrentuser=o?o.useridfrom==t:null,e.type==n.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL){var r=e.members.reduce(function(e,n){return e||n.id==t||(e=n),e},null);e.name=e.name?e.name:r.fullname,e.imageurl=e.imageurl?e.imageurl:r.profileimageurl,e.userid=r.id,e.showonlinestatus=r.showonlinestatus,e.isonline=r.isonline,e.isblocked=r.isblocked,e.otherUser=r}return e},e.prototype.getCacheKeyForBlockedContacts=function(e){return this.ROOT_CACHE_KEY+"blockedContacts:"+e},e.prototype.getCacheKeyForContacts=function(){return this.ROOT_CACHE_KEY+"contacts"},e.prototype.getCacheKeyForUserContacts=function(){return this.ROOT_CACHE_KEY+"userContacts"},e.prototype.getCacheKeyForContactRequests=function(){return this.ROOT_CACHE_KEY+"contactRequests"},e.prototype.getCacheKeyForContactRequestsCount=function(){return this.ROOT_CACHE_KEY+"contactRequestsCount"},e.prototype.getCacheKeyForDiscussion=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},e.prototype.getCacheKeyForMessageCount=function(e){return this.ROOT_CACHE_KEY+"count:"+e},e.prototype.getCacheKeyForUnreadConversationCounts=function(){return this.ROOT_CACHE_KEY+"unreadConversationCounts"},e.prototype.getCacheKeyForDiscussions=function(){return this.ROOT_CACHE_KEY+"discussions"},e.prototype.getCacheKeyForConversation=function(e,n){return this.ROOT_CACHE_KEY+"conversation:"+e+":"+n},e.prototype.getCacheKeyForConversationBetweenUsers=function(e,n){return this.ROOT_CACHE_KEY+"conversationBetweenUsers:"+e+":"+n},e.prototype.getCacheKeyForConversationMembers=function(e,n){return this.ROOT_CACHE_KEY+"conversationMembers:"+e+":"+n},e.prototype.getCacheKeyForConversationMessages=function(e,n){return this.ROOT_CACHE_KEY+"conversationMessages:"+e+":"+n},e.prototype.getCacheKeyForConversations=function(e,n,t){return this.getCommonCacheKeyForUserConversations(e)+":"+n+":"+t},e.prototype.getCacheKeyForConversationCounts=function(){return this.ROOT_CACHE_KEY+"conversationCounts"},e.prototype.getCacheKeyForMemberInfo=function(e,n){return this.ROOT_CACHE_KEY+"memberInfo:"+e+":"+n},e.prototype.getCommonCacheKeyForUserConversations=function(e){return this.getRootCacheKeyForConversations()+e},e.prototype.getRootCacheKeyForConversations=function(){return this.ROOT_CACHE_KEY+"conversations:"},e.prototype.getAllContacts=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.getContacts(e).then(function(t){return n.getBlockedContacts(e).then(function(e){return t.blocked=e.users,n.storeUsersFromAllContacts(t),t}).catch(function(){return t.blocked=[],n.storeUsersFromAllContacts(t),t})})},e.prototype.getBlockedContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=e.getUserId(),i={userid:t},o={cacheKey:n.getCacheKeyForBlockedContacts(t)};return e.read("core_message_get_blocked_users",i,o)})},e.prototype.getContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getCacheKeyForContacts()};return e.read("core_message_get_contacts",void 0,t).then(function(e){var n={},t=function(t){n[t]||(n[t]=[]),e[t].forEach(function(e){e.id>0&&n[t].push(e)})};for(var i in e)t(i);return n})})},e.prototype.getUserContacts=function(e,t,i){var o=this;return void 0===e&&(e=0),void 0===t&&(t=n.LIMIT_CONTACTS),this.sitesProvider.getSite(i).then(function(n){var i={userid:n.getUserId(),limitfrom:e,limitnum:t<=0?0:t+1},r={cacheKey:o.getCacheKeyForUserContacts()};return n.read("core_message_get_user_contacts",i,r).then(function(e){return e&&e.length?(o.userProvider.storeUsers(e,n.id),t<=0?{contacts:e,canLoadMore:!1}:{contacts:e.slice(0,t),canLoadMore:e.length>t}):{contacts:[],canLoadMore:!1}})})},e.prototype.getContactRequests=function(e,t,i){var o=this;return void 0===e&&(e=0),void 0===t&&(t=n.LIMIT_CONTACTS),this.sitesProvider.getSite(i).then(function(n){var i={userid:n.getUserId(),limitfrom:e,limitnum:t<=0?0:t+1},r={cacheKey:o.getCacheKeyForContactRequests()};return n.read("core_message_get_contact_requests",i,r).then(function(e){return e&&e.length?(o.userProvider.storeUsers(e,n.id),t<=0?{requests:e,canLoadMore:!1}:{requests:e.slice(0,t),canLoadMore:e.length>t}):{requests:[],canLoadMore:!1}})})},e.prototype.getContactRequestsCount=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var i={userid:e.getUserId()},o={cacheKey:t.getCacheKeyForContactRequestsCount(),typeExpected:"number"};return e.read("core_message_get_received_contact_requests_count",i,o).then(function(i){return t.eventsProvider.trigger(n.CONTACT_REQUESTS_COUNT_EVENT,{count:i},e.id),i})})},e.prototype.getConversation=function(e,n,t,i,o,r,l,s,a,u){var c=this;return void 0===i&&(i=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===l&&(l=2),void 0===s&&(s=!0),this.sitesProvider.getSite(a).then(function(a){u=u||a.getUserId();var d={cacheKey:c.getCacheKeyForConversation(u,e)};return a.read("core_message_get_conversation",{userid:u,conversationid:e,includecontactrequests:n?1:0,includeprivacyinfo:t?1:0,messageoffset:i,messagelimit:o,memberoffset:r,memberlimit:l,newestmessagesfirst:s?1:0},d).then(function(e){return c.formatConversation(e,u)})})},e.prototype.getConversationBetweenUsers=function(e,n,t,i,o,r,l,s,a,u,c){var d=this;return void 0===i&&(i=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===l&&(l=2),void 0===s&&(s=!0),this.sitesProvider.getSite(a).then(function(a){u=u||a.getUserId();var f={cacheKey:d.getCacheKeyForConversationBetweenUsers(u,e),omitExpires:!!c};return a.read("core_message_get_conversation_between_users",{userid:u,otheruserid:e,includecontactrequests:n?1:0,includeprivacyinfo:t?1:0,messageoffset:i,messagelimit:o,memberoffset:r,memberlimit:l,newestmessagesfirst:s?1:0},f).then(function(e){return d.formatConversation(e,u)})})},e.prototype.getConversationMembers=function(e,n,t,i,o,r){var l=this;return void 0===n&&(n=0),this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId(),void 0!==t&&null!==t||(t=l.LIMIT_MESSAGES);var s={cacheKey:l.getCacheKeyForConversationMembers(r,e)};return o.read("core_message_get_conversation_members",{userid:r,conversationid:e,limitfrom:n,limitnum:t<1?t:t+1,includecontactrequests:i?1:0,includeprivacyinfo:1},s).then(function(e){var n={};return t<1?(n.canLoadMore=!1,n.members=e):(n.canLoadMore=e.length>t,n.members=e.slice(0,t)),n})})},e.prototype.getConversationMessages=function(e,n,t,i,o,r,l,s){var a=this;return void 0===t&&(t=0),void 0===o&&(o=!0),void 0===r&&(r=0),this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId(),void 0!==i&&null!==i||(i=a.LIMIT_MESSAGES);var u={cacheKey:a.getCacheKeyForConversationMessages(s,e)},c={currentuserid:s,convid:e,limitfrom:t,limitnum:i<1?i:i+1,newest:o?1:0,timefrom:r};return t>0&&(u.getFromCache=!1,u.saveToCache=!1,u.emergencyCache=!1),l.read("core_message_get_conversation_messages",c,u).then(function(o){return i<1?(o.canLoadMore=!1,o.messages=o.messages):(o.canLoadMore=o.messages.length>i,o.messages=o.messages.slice(0,i)),o.messages.forEach(function(e){e.timecreated=e.timecreated?1e3*e.timecreated:0}),a.appProvider.isDesktop()&&c.useridto==s&&0===t&&a.storeLastReceivedMessageIfNeeded(e,o.messages[0],l.getId()),n?o:a.messagesOffline.getConversationMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.useridfrom=s}),o.messages=o.messages.concat(e),o})})})},e.prototype.getConversations=function(e,n,t,i,o){var r=this;return void 0===t&&(t=0),this.sitesProvider.getSite(i).then(function(i){o=o||i.getUserId();var l={cacheKey:r.getCacheKeyForConversations(o,e,n)},s={userid:o,limitfrom:t,limitnum:r.LIMIT_MESSAGES+1};return void 0!==e&&null!=e&&(s.type=e),void 0!==n&&null!=n&&(s.favourites=n?1:0),i.read("core_message_get_conversations",s,l).then(function(e){return{conversations:e.conversations.slice(0,r.LIMIT_MESSAGES).map(function(e){return r.formatConversation(e,o)}),canLoadMore:e.conversations.length>r.LIMIT_MESSAGES}})})},e.prototype.getConversationCounts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var i={cacheKey:t.getCacheKeyForConversationCounts()};return e.read("core_message_get_conversation_counts",{},i).then(function(e){return{favourites:e.favourites,individual:e.types[n.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:e.types[n.MESSAGE_CONVERSATION_TYPE_GROUP]}})})},e.prototype.getDiscussion=function(e,n,t,i,o,r,l,s){var a=this;return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===l&&(l=!0),this.sitesProvider.getSite(s).then(function(u){var c,d,f={},p={cacheKey:a.getCacheKeyForDiscussion(e)},h={useridto:u.getUserId(),useridfrom:e,limitnum:a.LIMIT_MESSAGES};return(t>0||i>0||o>0||r>0)&&(p.getFromCache=!1,p.saveToCache=!1,p.emergencyCache=!1),a.getRecentMessages(h,p,t,i,l,u.getId()).then(function(n){return f.messages=n,h.useridto=e,h.useridfrom=u.getUserId(),c=n.length>0,a.getRecentMessages(h,p,o,r,l,s)}).then(function(t){return f.messages=f.messages.concat(t),d=t.length>0,f.messages.length>a.LIMIT_MESSAGES?(f.canLoadMore=!0,f.messages=a.sortMessages(f.messages),f.messages=f.messages.slice(-a.LIMIT_MESSAGES)):f.canLoadMore=!(f.messages.length!=a.LIMIT_MESSAGES||c&&d),n?f:a.messagesOffline.getMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.text=e.smallmessage}),f.messages=f.messages.concat(e),f})})})},e.prototype.getDiscussions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={},i=e.getUserId(),o={useridto:i,useridfrom:0,limitnum:n.LIMIT_MESSAGES},r={cacheKey:n.getCacheKeyForDiscussions()},l=function(e,n,o){void 0===t[n]&&(t[n]={fullname:o,profileimageurl:""},e.timeread||e.pending||e.useridfrom==i||(t[n].unread=!0));var r=t[n].message;(void 0===r||!r.pending&&e.pending||r.pending==e.pending&&(r.timecreated<e.timecreated||r.timecreated==e.timecreated&&r.id<e.id))&&(t[n].message={id:e.id,user:n,message:e.text,timecreated:e.timecreated,pending:!!e.pending})};return n.getRecentMessages(o,r,void 0,void 0,void 0,e.getId()).then(function(e){return e.forEach(function(e){l(e,e.useridfrom,e.userfromfullname)}),o.useridfrom=o.useridto,o.useridto=0,n.getRecentMessages(o,r)}).then(function(t){return t.forEach(function(e){l(e,e.useridto,e.usertofullname)}),n.messagesOffline.getAllMessages(e.getId())}).then(function(i){return i.forEach(function(e){e.pending=!0,e.text=e.smallmessage,l(e,e.touserid,"")}),n.getDiscussionsUserImg(t,e.getId()).then(function(e){return n.storeUsersFromDiscussions(e),e})})})},e.prototype.getDiscussionsUserImg=function(e,n){var t=[],i=function(i){e[i].profileimageurl||t.push(o.userProvider.getProfile(e[i].message.user,0,!0,n).then(function(n){e[i].profileimageurl=n.profileimageurl}).catch(function(){}))},o=this;for(var r in e)i(r);return Promise.all(t).then(function(){return e})},e.prototype.getMemberInfo=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var o={cacheKey:i.getCacheKeyForMemberInfo(t,e)};return n.read("core_message_get_member_info",{referenceuserid:t,userids:[e],includecontactrequests:1,includeprivacyinfo:1},o).then(function(e){return!e||e.length<1?Promise.reject(null):e[0]})})},e.prototype.getMessagePreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"messagePreferences"},e.prototype.getMessagePreferences=function(e){var n=this;return this.logger.debug("Get message preferences"),this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getMessagePreferencesCacheKey()};return e.read("core_message_get_user_message_preferences",{},t).then(function(e){return e.preferences?(e.preferences.blocknoncontacts=e.blocknoncontacts,e.preferences):Promise.reject(null)})})},e.prototype.getMessages=function(e,n,t,i){var o=this;return void 0===t&&(t=!0),e.type="conversations",e.newestfirst=1,this.sitesProvider.getSite(i).then(function(i){var r=i.getUserId();return i.read("core_message_get_messages",e,n).then(function(n){return n.messages.forEach(function(n){n.read=0==e.read?0:1,n.timecreated=n.timecreated?1e3*n.timecreated:0,n.timeread=n.timeread?1e3*n.timeread:0}),t&&o.appProvider.isDesktop()&&!e.read&&e.useridto==r&&0===e.limitfrom&&o.storeLastReceivedMessageIfNeeded(e.useridfrom,n.messages[0],i.getId()),n})})},e.prototype.getRecentMessages=function(e,n,t,i,o,r){var l=this;return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=!0),t=t||0,i=i||0,e.read=0,e.limitfrom=t,this.getMessages(e,n,o,r).then(function(t){var s=t.messages;return s?s.length>=e.limitnum?s:(e.limitnum=e.limitnum-s.length,e.read=1,e.limitfrom=i,l.getMessages(e,n,o,r).then(function(e){return e.messages&&(s=s.concat(e.messages)),s}).catch(function(){return s})):Promise.reject(null)})},e.prototype.getUnreadConversationCounts=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(i){var o;if(t.isGroupMessagingEnabled()){var r={cacheKey:t.getCacheKeyForUnreadConversationCounts()};o=i.read("core_message_get_unread_conversation_counts",{},r).then(function(e){return{favourites:e.favourites,individual:e.types[n.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:e.types[n.MESSAGE_CONVERSATION_TYPE_GROUP]}})}else if(t.isMessageCountEnabled()){var l={useridto:i.getUserId()};r={cacheKey:t.getCacheKeyForMessageCount(i.getUserId()),typeExpected:"number"};o=i.read("core_message_get_unread_conversations_count",l,r).then(function(e){return{favourites:0,individual:e,group:0}})}else{l={read:0,limitfrom:0,limitnum:t.LIMIT_MESSAGES+1,useridto:i.getUserId(),useridfrom:0};o=t.getMessages(l,void 0,!1,e).then(function(e){var n={};e.messages.forEach(function(e){n[e.useridto]=1});var i=Object.keys(n).length;return{favourites:0,individual:i,group:0,orMore:i>t.LIMIT_MESSAGES}})}return o.then(function(e){return t.eventsProvider.trigger(n.UNREAD_CONVERSATION_COUNTS_EVENT,e,i.id),e})})},e.prototype.getUnreadReceivedMessages=function(e,n,t,i){var o=this;return void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(r){var l={read:0,limitfrom:0,limitnum:o.LIMIT_MESSAGES,useridto:r.getUserId(),useridfrom:0},s={};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),o.getMessages(l,s,e,i)})},e.prototype.invalidateAllContactsCache=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.invalidateContactsCache(n).then(function(){return t.invalidateBlockedContactsCache(e,n)})},e.prototype.invalidateBlockedContactsCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCacheKeyForBlockedContacts(e))})},e.prototype.invalidateContactsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContacts())})},e.prototype.invalidateUserContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForUserContacts())})},e.prototype.invalidateContactRequestsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContactRequests())})},e.prototype.invalidateContactRequestsCountCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContactRequestsCount())})},e.prototype.invalidateConversation=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCacheKeyForConversation(t,e))})},e.prototype.invalidateConversationBetweenUsers=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCacheKeyForConversationBetweenUsers(t,e))})},e.prototype.invalidateConversationMembers=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCacheKeyForConversationMembers(t,e))})},e.prototype.invalidateConversationMessages=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCacheKeyForConversationMessages(t,e))})},e.prototype.invalidateConversations=function(e,n){var t=this;return this.sitesProvider.getSite(e).then(function(e){return n=n||e.getUserId(),e.invalidateWsCacheForKeyStartingWith(t.getCommonCacheKeyForUserConversations(n))})},e.prototype.invalidateConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForConversationCounts())})},e.prototype.invalidateDiscussionCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCacheKeyForDiscussion(e))})},e.prototype.invalidateDiscussionsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=[];return t.push(e.invalidateWsCacheForKey(n.getCacheKeyForDiscussions())),t.push(n.invalidateContactsCache(e.getId())),Promise.all(t)})},e.prototype.invalidateMemberInfo=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCacheKeyForMemberInfo(t,e))})},e.prototype.invalidateMessagePreferences=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getMessagePreferencesCacheKey())})},e.prototype.invalidateAllMemberInfo=function(e,n){var t=this;return this.utils.allPromises([this.invalidateMemberInfo(e,n.id),this.invalidateUserContacts(n.id),this.invalidateContactRequestsCache(n.id),this.invalidateConversations(n.id),this.getConversationBetweenUsers(e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,n.id,void 0,!0).then(function(e){return t.utils.allPromises([t.invalidateConversation(e.id),t.invalidateConversationMembers(e.id,n.id)])}).catch(function(){})])},e.prototype.invalidateUnreadConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isGroupMessagingEnabled()?e.invalidateWsCacheForKey(n.getCacheKeyForUnreadConversationCounts()):n.isMessageCountEnabled()?e.invalidateWsCacheForKey(n.getCacheKeyForMessageCount(e.getUserId())):void 0})},e.prototype.isBlocked=function(e,n){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,n).then(function(e){return e.isblocked}):this.getBlockedContacts(n).then(function(n){return!(!n.users||n.users.length<1)&&n.users.some(function(n){return e==n.id})})},e.prototype.isContact=function(e,n){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,n).then(function(e){return e.iscontact}):this.getContacts(n).then(function(n){return["online","offline"].some(function(t){return!!(n[t]&&n[t].length>0)&&n[t].some(function(n){return e==n.id})})})},e.prototype.isGroupMessagingEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_conversations")},e.prototype.isGroupMessagingEnabledInSite=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_message_get_conversations")}).catch(function(){return!1})},e.prototype.isMarkAllMessagesReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_messages_as_read")},e.prototype.isMessageCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_unread_conversations_count")},e.prototype.isMessagePreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_message_preferences")},e.prototype.isMessagingEnabledForSite=function(e){return this.isPluginEnabled(e).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("messaging")})},e.prototype.isSearchMessagesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_data_for_messagearea_search_messages")},e.prototype.markMessageRead=function(e){var n={messageid:e,timeread:this.timeUtils.timestamp()};return this.sitesProvider.getCurrentSite().write("core_message_mark_message_read",n)},e.prototype.markAllConversationMessagesRead=function(e){var n={userid:this.sitesProvider.getCurrentSiteUserId(),conversationid:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_conversation_messages_as_read",n,{responseExpected:!1})},e.prototype.markAllMessagesRead=function(e){var n={useridto:this.sitesProvider.getCurrentSiteUserId(),useridfrom:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_messages_as_read",n,{typeExpected:"boolean"})},e.prototype.refreshContactRequestsCount=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateContactRequestsCountCache(e).then(function(){return n.getContactRequestsCount(e)})},e.prototype.refreshUnreadConversationCounts=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateUnreadConversationCounts(e).then(function(){return n.getUnreadConversationCounts(e)})},e.prototype.removeContact=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("core_message_delete_contacts",{userids:[e]},{responseExpected:!1}).then(function(){return i.isGroupMessagingEnabled()?i.utils.allPromises([i.invalidateUserContacts(t.id),i.invalidateAllMemberInfo(e,t)]).then(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,contactRemoved:!0},t.id)}):i.invalidateContactsCache(t.id)})})},e.prototype.searchContacts=function(e,n,t){var i=this;return void 0===n&&(n=100),this.sitesProvider.getSite(t).then(function(t){return t.read("core_message_search_contacts",{searchtext:e,onlymycourses:0},{getFromCache:!1}).then(function(e){return n&&e.length>n&&(e=e.splice(0,n)),i.userProvider.storeUsers(e),e})})},e.prototype.searchMessages=function(e,t,i,o,r){var l=this;return void 0===i&&(i=0),void 0===o&&(o=n.LIMIT_SEARCH),this.sitesProvider.getSite(r).then(function(n){var r={userid:t||n.getUserId(),search:e,limitfrom:i,limitnum:o<=0?0:o+1};return n.read("core_message_data_for_messagearea_search_messages",r,{getFromCache:!1}).then(function(e){return e.contacts&&e.contacts.length?(e.contacts.forEach(function(e){e.id=e.userid}),l.userProvider.storeUsers(e.contacts,n.id),o<=0?{messages:e.contacts,canLoadMore:!1}:{messages:e.contacts.slice(0,o),canLoadMore:e.contacts.length>o}):{messages:[],canLoadMore:!1}})})},e.prototype.searchUsers=function(e,t,i,o){var r=this;return void 0===t&&(t=0),void 0===i&&(i=n.LIMIT_SEARCH),this.sitesProvider.getSite(o).then(function(n){var o={userid:n.getUserId(),search:e,limitfrom:t,limitnum:i<=0?0:i+1};return n.read("core_message_message_search_users",o,{getFromCache:!1}).then(function(e){var t=e.contacts||[],o=e.noncontacts||[];return r.userProvider.storeUsers(t,n.id),r.userProvider.storeUsers(o,n.id),i<=0?{contacts:t,nonContacts:o,canLoadMoreContacts:!1,canLoadMoreNonContacts:!1}:{contacts:t.slice(0,i),nonContacts:o.slice(0,i),canLoadMoreContacts:t.length>i,canLoadMoreNonContacts:o.length>i}})})},e.prototype.sendMessage=function(e,n,t){var i=this,o=function(){return i.messagesOffline.saveMessage(e,n,t).then(function(e){return{sent:!1,message:e}})};return t=t||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasMessages(e,t).catch(function(){return!0}).then(function(t){return t?o():i.sendMessageOnline(e,n).then(function(e){return{sent:!0,message:e}}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):o()})}):o()},e.prototype.sendMessageOnline=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();return this.sendMessagesOnline([{touserid:e,text:n,textformat:1}],t).then(function(n){return n&&n[0]&&-1===n[0].msgid?Promise.reject(i.utils.createFakeWSError(n[0].errormessage)):i.invalidateDiscussionCache(e,t).catch(function(){}).then(function(){return n[0]})})},e.prototype.sendMessagesOnline=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_message_send_instant_messages",{messages:e})})},e.prototype.sendMessageToConversation=function(e,n,t){var i=this,o=function(){return i.messagesOffline.saveConversationMessage(e,n,t).then(function(e){return{sent:!1,message:e}})};return t=t||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasConversationMessages(e.id,t).catch(function(){return!0}).then(function(t){return t?o():i.sendMessageToConversationOnline(e.id,n).then(function(e){return{sent:!0,message:e}}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):o()})}):o()},e.prototype.sendMessageToConversationOnline=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();return this.sendMessagesToConversationOnline(e,[{text:n,textformat:1}],t).then(function(n){return i.invalidateConversationMessages(e,t).catch(function(){}).then(function(){return n[0]})})},e.prototype.sendMessagesToConversationOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){var i={conversationid:e,messages:n.map(function(e){return{text:e.text,textformat:void 0!==e.textformat?e.textformat:1}})};return t.write("core_message_send_messages_to_conversation",i)})},e.prototype.setFavouriteConversation=function(e,n,t,i){return this.setFavouriteConversations([e],n,t,i)},e.prototype.setFavouriteConversations=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){i=i||t.getUserId();return t.write(n?"core_message_set_favourite_conversations":"core_message_unset_favourite_conversations",{userid:i,conversations:e}).then(function(){var n=[];return e.forEach(function(e){n.push(o.invalidateConversation(e,t.getId(),i))}),Promise.all(n).catch(function(){})})})},e.prototype.sortConversations=function(e){return e.sort(function(e,n){var t=parseInt(e.lastmessagedate,10),i=parseInt(n.lastmessagedate,10);return t==i&&e.id?e.id<=n.id?1:-1:t<=i?1:-1})},e.prototype.sortMessages=function(e){return e.sort(function(e,n){if(e.pending&&!n.pending)return 1;if(!e.pending&&n.pending)return-1;var t=parseInt(e.timecreated,10),i=parseInt(n.timecreated,10);return t==i&&e.id?e.id>=n.id?1:-1:t>=i?1:-1})},e.prototype.storeLastReceivedMessageIfNeeded=function(e,t,i){var o=this,r=n.PUSH_SIMULATION_COMPONENT;return this.emulatorHelper.getLastReceivedNotification(r,i).then(function(n){if((!(e>0)||t&&n)&&!(t&&n&&t.timecreated<=n.timecreated))return o.emulatorHelper.storeLastReceivedNotification(r,t,i)})},e.prototype.storeUsersFromAllContacts=function(e){for(var n in e)this.userProvider.storeUsers(e[n])},e.prototype.storeUsersFromDiscussions=function(e,n){var t=[];for(var i in e)t.push({id:i,fullname:e[i].fullname,profileimageurl:e[i].profileimageurl});this.userProvider.storeUsers(t,n)},e.prototype.unblockContact=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o;if(t.wsAvailable("core_message_unblock_user")){var r={userid:t.getUserId(),unblockeduserid:e};o=t.write("core_message_unblock_user",r)}else{o=t.write("core_message_unblock_contacts",r={userids:[e]},{responseExpected:!1})}return o.then(function(){return i.invalidateAllMemberInfo(e,t).finally(function(){i.eventsProvider.trigger(n.MEMBER_INFO_CHANGED_EVENT,{userId:e,userUnblocked:!0},t.id)})})})},e.NEW_MESSAGE_EVENT="addon_messages_new_message_event",e.READ_CHANGED_EVENT="addon_messages_read_changed_event",e.OPEN_CONVERSATION_EVENT="addon_messages_open_conversation_event",e.SPLIT_VIEW_LOAD_EVENT="addon_messages_split_view_load_event",e.UPDATE_CONVERSATION_LIST_EVENT="addon_messages_update_conversation_list_event",e.MEMBER_INFO_CHANGED_EVENT="addon_messages_member_changed_event",e.UNREAD_CONVERSATION_COUNTS_EVENT="addon_messages_unread_conversation_counts_event",e.CONTACT_REQUESTS_COUNT_EVENT="addon_messages_contact_requests_count_event",e.POLL_INTERVAL=1e4,e.PUSH_SIMULATION_COMPONENT="AddonMessagesPushSimulation",e.MESSAGE_PRIVACY_COURSEMEMBER=0,e.MESSAGE_PRIVACY_ONLYCONTACTS=1,e.MESSAGE_PRIVACY_SITE=2,e.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL=1,e.MESSAGE_CONVERSATION_TYPE_GROUP=2,e.LIMIT_CONTACTS=50,e.LIMIT_MESSAGES=50,e.LIMIT_INITIAL_USER_SEARCH=3,e.LIMIT_SEARCH=50,e.NOTIFICATION_PREFERENCES_KEY="message_provider_moodle_instantmessage",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var i=t(14),o=(t.n(i),t(388),t(9),t(175),t(137)),r=function(){function e(e,n,t,i){var r=this;this.translate=e,this.configProvider=n,this.globalization=i,this.fallbackLanguage="en",this.defaultLanguage=o.a.default_lang||"en",this.customStrings={},this.sitePluginsStrings={},e.setDefaultLang(this.fallbackLanguage),e.use(this.defaultLanguage),t.ready().then(function(){r.getCurrentLanguage().then(function(e){r.changeCurrentLanguage(e)})}),e.onLangChange.subscribe(function(e){t.setLang(e.lang,!0),t.setDir(r.translate.instant("core.thisdirection"),!0)})}return e.prototype.addSitePluginsStrings=function(e,n,t){this.sitePluginsStrings[e]||(this.sitePluginsStrings[e]={});for(var i in n){var o=t+i,r=n[i];this.customStrings[e]&&this.customStrings[e][o]||(r=(r=(r=r.replace(/\$a->/gm,"$a.")).replace(/{([^ ]+)}/gm,"{{$1}}")).replace(/{{{([^ ]+)}}}/gm,"{{$1}}"),this.loadString(this.sitePluginsStrings,e,o,r))}},e.prototype.changeCurrentLanguage=function(e){var n=this,t=[];return t.push(new Promise(function(t,i){var o=n.translate.use(e).subscribe(function(i){var r=n.translate.instant("core.parentlanguage");if(""!=r&&"core.parentlanguage"!=r&&r!=e)var l=n.translate.use(r).subscribe(function(e){i=Object.assign(e,i),t(i),setTimeout(function(){l.unsubscribe()})},function(e){t(i),setTimeout(function(){l.unsubscribe()})});else t(i);setTimeout(function(){o.unsubscribe()})},function(e){i(e),setTimeout(function(){o.unsubscribe()})})})),t.push(this.configProvider.set("current_language",e)),i.locale("en"==e?"en-gb":e),this.currentLanguage=e,Promise.all(t).finally(function(){(n.loadLangStrings(n.customStrings,e)||n.loadLangStrings(n.sitePluginsStrings,e))&&n.translate.onLangChange.emit({lang:e,translations:n.translate.translations[e]})})},e.prototype.clearCustomStrings=function(){this.unloadStrings(this.customStrings),this.customStrings={},this.customStringsRaw=""},e.prototype.clearSitePluginsStrings=function(){this.unloadStrings(this.sitePluginsStrings),this.sitePluginsStrings={}},e.prototype.getAllCustomStrings=function(){return this.customStrings},e.prototype.getAllSitePluginsStrings=function(){return this.sitePluginsStrings},e.prototype.getCurrentLanguage=function(){var e=this;return void 0!==this.currentLanguage?Promise.resolve(this.currentLanguage):this.configProvider.get("current_language").then(function(e){return e}).catch(function(){if(o.a.default_lang&&o.a.forcedefaultlanguage)return o.a.default_lang;try{return e.globalization.getPreferredLanguage().then(function(n){var t=n.value.toLowerCase();return t.indexOf("-")>-1&&o.a.languages&&void 0===o.a.languages[t]&&(t=t.substr(0,t.indexOf("-"))),void 0===o.a.languages[t]?e.defaultLanguage:t}).catch(function(){return e.defaultLanguage})}catch(n){return Promise.resolve(e.defaultLanguage)}}).then(function(n){return e.currentLanguage=n,n})},e.prototype.getDefaultLanguage=function(){return this.defaultLanguage},e.prototype.getFallbackLanguage=function(){return this.fallbackLanguage},e.prototype.getTranslationTable=function(e){var n=this;return new Promise(function(t,i){var o=n.translate.getTranslation(e).subscribe(function(e){t(e),o.unsubscribe()},function(e){i(e),o.unsubscribe()})})},e.prototype.loadCustomStrings=function(e){var n=this;if(e!=this.customStringsRaw&&(this.clearCustomStrings(),e)){e.split(/(?:\r\n|\r|\n)/).forEach(function(e){var t,i=e.split("|");if(!(i.length<3)){n.customStrings[t=i[2]]||(n.customStrings[t]={});var o=i[0].replace(/^mm\.core/,"core").replace(/^mm\./,"core.").replace(/^mma\./,"addon.").replace(/^core\.sidemenu/,"core.mainmenu").replace(/^addon\.grades/,"core.grades").replace(/^addon\.participants/,"core.user");n.loadString(n.customStrings,t,o,i[1])}}),this.customStringsRaw=e}},e.prototype.loadLangStrings=function(e,n){var t=!1;if(e[n])for(var i in e[n]){var o=e[n][i];o.applied||(o.original=this.translate.translations[n][i],this.translate.translations[n][i]=o.value,o.applied=!0,t=!0)}return t},e.prototype.loadString=function(e,n,t,i){this.translate.translations[n]?(e[n][t]={original:this.translate.translations[n][t],value:i,applied:!0},this.translate.translations[n][t]=i):e[n][t]={value:i,applied:!1}},e.prototype.unloadStrings=function(e){for(var n in e)if(this.translate.translations[n]){var t=e[n];for(var i in t){var o=t[i];o.original?this.translate.translations[n][i]=o.original:delete this.translate.translations[n][i]}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(9),t(4),function(){function e(e,n,t,o,r,l){var s=this;this.content=n,this.domUtils=t,this.appProvider=o,this.selectedIndex=0,this.hideUntil=!0,this.parentScrollable=!1,this.ionChange=new i.r,this.tabs=[],this.maxSlides=3,this.slidesShown=this.maxSlides,this.numTabsShown=0,this.direction="ltr",this.initialized=!1,this.afterViewInitTriggered=!1,this.tabsShown=!0,this.isDestroyed=!1,this.isCurrentView=!0,this.shouldSlideToInitial=!1,this.hasSliddenToInitial=!1,this.selectHistory=[],this.tabBarElement=e.nativeElement,this.direction=r.isRTL?"rtl":"ltr",this.languageChangedSubscription=l.onLangChange.subscribe(function(e){setTimeout(function(){s.direction=r.isRTL?"rtl":"ltr"})})}return e.prototype.ngOnInit=function(){this.originalTabsContainer=this.originalTabsRef.nativeElement,this.topTabsElement=this.topTabs.nativeElement},e.prototype.ngAfterViewInit=function(){this.isDestroyed||(this.afterViewInitTriggered=!0,!this.initialized&&this.hideUntil&&this.initializeTabs(),this.resizeFunction=this.calculateSlides.bind(this),window.addEventListener("resize",this.resizeFunction))},e.prototype.ngOnChanges=function(e){var n=this;!this.initialized&&this.hideUntil&&this.afterViewInitTriggered&&setTimeout(function(){n.initializeTabs()})},e.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.calculateSlides(),this.registerBackButtonAction()},e.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){if(e.selectHistory.length>1){var n=e.selectHistory[e.selectHistory.length-2];return e.selectHistory=e.selectHistory.filter(function(t){return e.selected!=t&&n!=t}),e.selectTab(n),!0}return e.selected!=e.firstSelectedTab&&(e.selectHistory=[],e.selectTab(e.firstSelectedTab),!0)},750)},e.prototype.ionViewDidLeave=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction(),this.isCurrentView=!1},e.prototype.addTab=function(e){var n=this;-1==this.getIndex(e)&&(this.tabs.push(e),this.sortTabs(),this.calculateSlides(),this.initialized&&this.tabs.length>1&&0==this.tabBarHeight&&setTimeout(function(){n.calculateTabBarHeight()},50))},e.prototype.calculateSlides=function(){var e=this;this.isCurrentView&&this.tabsShown&&this.initialized&&setTimeout(function(){e.calculateMaxSlides(),e.updateSlides()})},e.prototype.calculateTabBarHeight=function(){this.tabBarHeight=this.topTabsElement.offsetHeight,this.originalTabsContainer.style.paddingBottom=this.tabBarHeight+"px"},e.prototype.getIndex=function(e){for(var n=0;n<this.tabs.length;n++){var t=this.tabs[n];if(t===e||void 0!==t.id&&t.id===e.id)return n}return-1},e.prototype.getSelected=function(){return this.tabs[this.selected]},e.prototype.initializeTabs=function(){var e=this.selectedIndex||0,n=this.tabs[e];if(n&&n.enabled&&n.show||(n=this.tabs.find(function(n,t){return!(!n.enabled||!n.show)&&(e=t,!0)})),n&&(this.firstSelectedTab=e,this.selectTab(e)),this.calculateTabBarHeight(),this.content)if(this.parentScrollable)this.originalTabsContainer.classList.add("no-scroll");else{var t=this.content.getScrollElement();t&&t.classList.add("no-scroll")}this.initialized=!0,this.calculateSlides()},e.prototype.slideChanged=function(){var e=this.slides.getActiveIndex();this.slidesShown>=this.numTabsShown?(this.showPrevButton=!1,this.showNextButton=!1):void 0!==e?(this.showPrevButton=e>0,this.showNextButton=e<this.numTabsShown-this.slidesShown):(this.showPrevButton=!1,this.showNextButton=this.numTabsShown>this.slidesShown),this.shouldSlideToInitial&&e!=this.selected&&(this.shouldSlideToInitial=!1)},e.prototype.updateSlides=function(){var e=this;this.numTabsShown=this.tabs.reduce(function(e,n){return n.show?e+1:e},0),this.slidesShown=Math.min(this.maxSlides,this.numTabsShown),this.slideChanged(),setTimeout(function(){e.calculateTabBarHeight(),e.slides.update(),e.slides.resize(),!e.hasSliddenToInitial&&e.selected&&e.selected>=e.slidesShown?(e.hasSliddenToInitial=!0,e.shouldSlideToInitial=!0,setTimeout(function(){e.shouldSlideToInitial&&(e.slides.slideTo(e.selected,0),e.shouldSlideToInitial=!1)},400)):e.selected&&(e.hasSliddenToInitial=!0)})},e.prototype.calculateMaxSlides=function(){if(this.slides){var e=this.domUtils.getElementWidth(this.slides.getNativeElement())||this.slides.renderedWidth;if(e)return void(this.maxSlides=Math.floor(e/100))}this.maxSlides=3},e.prototype.slideNext=function(){this.showNextButton&&this.slides.slideNext()},e.prototype.slidePrev=function(){this.showPrevButton&&this.slides.slidePrev()},e.prototype.showHideTabs=function(e){this.tabBarHeight&&(this.tabsShown&&e.target.scrollTop-this.tabBarHeight>this.tabBarHeight?(this.tabBarElement.classList.add("tabs-hidden"),this.tabsShown=!1):!this.tabsShown&&e.target.scrollTop<this.tabBarHeight&&(this.tabBarElement.classList.remove("tabs-hidden"),this.tabsShown=!0,this.calculateSlides()))},e.prototype.removeTab=function(e){var n=this.getIndex(e);this.tabs.splice(n,1),this.calculateSlides()},e.prototype.selectTab=function(e){if(e!=this.selected){(e<0||e>=this.tabs.length)&&(e=0);var n=this.getSelected(),t=this.tabs[e];t.enabled&&t.show&&(n&&n.unselectTab(),this.selected&&this.slides.slideTo(e),this.selectHistory.push(e),this.selected=e,t.selectTab(),this.ionChange.emit(t))}},e.prototype.sortTabs=function(){var e=this;if(this.originalTabsContainer){var n=[];this.tabs.forEach(function(t,i){var o=Array.prototype.indexOf.call(e.originalTabsContainer.children,t.element);-1!=o&&(n[o]=t)}),this.tabs=n}},e.prototype.tabVisibilityChanged=function(){this.calculateSlides()},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(163);var i=function(){function e(e,n,t,i,o){this.appProvider=e,this.filepoolProvider=n,this.sitesProvider=t,this.utils=i,this.workshopOffline=o,this.ROOT_CACHE_KEY="mmaModWorkshop:"}return n=e,e.prototype.getWorkshopDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"workshop:"+e},e.prototype.getWorkshopDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},e.prototype.getWorkshopAccessInformationDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":access"},e.prototype.getUserPlanDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":userplan"},e.prototype.getSubmissionsDataCacheKey=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=0),this.getWorkshopDataPrefixCacheKey(e)+":submissions:"+n+":"+t},e.prototype.getSubmissionDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":submission:"+n},e.prototype.getGradesDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":grades"},e.prototype.getGradesReportDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getWorkshopDataPrefixCacheKey(e)+":report:"+n},e.prototype.getSubmissionAssessmentsDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":assessments:"+n},e.prototype.getReviewerAssessmentsDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getWorkshopDataPrefixCacheKey(e)+":reviewerassessments:"+n},e.prototype.getAssessmentDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":assessment:"+n},e.prototype.getAssessmentFormDataCacheKey=function(e,n,t){return void 0===t&&(t="assessment"),this.getWorkshopDataPrefixCacheKey(e)+":assessmentsform:"+n+":"+t},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_workshop_get_workshops_by_courses")&&e.wsAvailable("mod_workshop_get_workshop_access_information")})},e.prototype.getWorkshopByKey=function(e,t,i,o,r){var l=this;return void 0===r&&(r=!1),this.sitesProvider.getSite(o).then(function(o){var s={courseids:[e]},a={cacheKey:l.getWorkshopDataCacheKey(e)};return r&&(a.omitExpires=!0),o.read("mod_workshop_get_workshops_by_courses",s,a).then(function(e){if(e&&e.workshops){var n=e.workshops.find(function(e){return e[t]==i});if(n)return n}return Promise.reject(null)}).then(function(e){return void 0===e.submissiontypetext&&(e.nattachments>0?(e.submissiontypetext=n.SUBMISSION_TYPE_AVAILABLE,e.submissiontypefile=n.SUBMISSION_TYPE_AVAILABLE):(e.submissiontypetext=n.SUBMISSION_TYPE_REQUIRED,e.submissiontypefile=n.SUBMISSION_TYPE_DISABLED)),e})})},e.prototype.getWorkshop=function(e,n,t,i){return void 0===i&&(i=!1),this.getWorkshopByKey(e,"coursemodule",n,t,i)},e.prototype.getWorkshopById=function(e,n,t,i){return void 0===i&&(i=!1),this.getWorkshopByKey(e,"id",n,t,i)},e.prototype.invalidateWorkshopData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWorkshopDataCacheKey(e))})},e.prototype.invalidateWorkshopWSData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getWorkshopDataPrefixCacheKey(e))})},e.prototype.getWorkshopAccessInformation=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e},l={cacheKey:o.getWorkshopAccessInformationDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=0,l.emergencyCache=0),i.read("mod_workshop_get_workshop_access_information",r,l)})},e.prototype.invalidateWorkshopAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWorkshopAccessInformationDataCacheKey(e))})},e.prototype.getUserPlanPhases=function(e,n,t,i){var o=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e},l={cacheKey:o.getUserPlanDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=0,l.emergencyCache=0),i.read("mod_workshop_get_user_plan",r,l).then(function(e){return e&&e.userplan&&e.userplan.phases?o.utils.arrayToObject(e.userplan.phases,"code"):Promise.reject(null)})})},e.prototype.invalidateUserPlanPhasesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserPlanDataCacheKey(e))})},e.prototype.getSubmissions=function(e,n,t,i,o,r){var l=this;return void 0===n&&(n=0),void 0===t&&(t=0),void 0===i&&(i=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var s={workshopid:e,userid:n,groupid:t},a={cacheKey:l.getSubmissionsDataCacheKey(e,n,t)};return i?a.omitExpires=!0:o&&(a.getFromCache=0,a.emergencyCache=0),r.read("mod_workshop_get_submissions",s,a).then(function(e){return e&&e.submissions?e.submissions:Promise.reject(null)})})},e.prototype.invalidateSubmissionsData=function(e,n,t,i){var o=this;return void 0===n&&(n=0),void 0===t&&(t=0),this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(o.getSubmissionsDataCacheKey(e,n,t))})},e.prototype.getSubmission=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={submissionid:n},r={cacheKey:i.getSubmissionDataCacheKey(e,n)};return t.read("mod_workshop_get_submission",o,r).then(function(e){return e&&e.submission?e.submission:Promise.reject(null)})})},e.prototype.invalidateSubmissionData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getSubmissionDataCacheKey(e,n))})},e.prototype.getGrades=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={workshopid:e},o={cacheKey:t.getGradesDataCacheKey(e)};return n.read("mod_workshop_get_grades",i,o)})},e.prototype.invalidateGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getGradesDataCacheKey(e))})},e.prototype.getGradesReport=function(e,t,i,o,r,l,s){var a=this;return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=!1),void 0===l&&(l=!1),this.sitesProvider.getSite(s).then(function(s){var u={workshopid:e,groupid:t,page:i,perpage:o||n.PER_PAGE},c={cacheKey:a.getGradesReportDataCacheKey(e,t)};return r?c.omitExpires=!0:l&&(c.getFromCache=0,c.emergencyCache=0),s.read("mod_workshop_get_grades_report",u,c).then(function(e){return e&&e.report?e.report:Promise.reject(null)})})},e.prototype.fetchAllGradeReports=function(e,t,i,o,r,l){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===r&&(r=!1),l=l||this.sitesProvider.getCurrentSiteId(),i=i||n.PER_PAGE,this.fetchGradeReportsRecursive(e,t,i,o,r,[],0,l)},e.prototype.fetchGradeReportsRecursive=function(e,n,t,i,o,r,l,s){var a=this;return this.getGradesReport(e,n,l,t,i,o,s).then(function(u){Array.prototype.push.apply(r,u.grades);return(l+1)*t<u.totalcount?a.fetchGradeReportsRecursive(e,n,t,i,o,r,l+1,s):r})},e.prototype.invalidateGradeReportData=function(e,n,t){var i=this;return void 0===n&&(n=0),this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getGradesReportDataCacheKey(e,n))})},e.prototype.getSubmissionAssessments=function(e,n,t,i,o){var r=this;return void 0===t&&(t=!1),void 0===i&&(i=!1),this.sitesProvider.getSite(o).then(function(o){var l={submissionid:n},s={cacheKey:r.getSubmissionAssessmentsDataCacheKey(e,n)};return t?s.omitExpires=!0:i&&(s.getFromCache=0,s.emergencyCache=0),o.read("mod_workshop_get_submission_assessments",l,s).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},e.prototype.invalidateSubmissionAssesmentsData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getSubmissionAssessmentsDataCacheKey(e,n))})},e.prototype.addSubmission=function(e,n,t,i,o,r,l,s){var a=this;void 0===s&&(s=!1),r=r||this.sitesProvider.getCurrentSiteId();var u=function(){return a.workshopOffline.saveSubmission(e,n,t,i,{},l,"add",r).then(function(){return!1})};return(l?this.workshopOffline.deleteSubmissionAction(e,l,"add",r):Promise.resolve()).then(function(){return!a.appProvider.isOnline()&&s?u():a.addSubmissionOnline(e,t,i,o,r).catch(function(e){return s&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.addSubmissionOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_workshop_add_submission",{workshopid:e,title:n,content:t,attachmentsid:i||0}).then(function(e){return e&&e.submissionid?e.submissionid:Promise.reject(r.utils.createFakeWSError(""))})})},e.prototype.updateSubmission=function(e,n,t,i,o,r,l,s){var a=this;void 0===s&&(s=!1),l=l||this.sitesProvider.getCurrentSiteId();var u=function(){return a.workshopOffline.saveSubmission(e,t,i,o,r,n,"update",l).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,n,"update",l).then(function(){return!a.appProvider.isOnline()&&s?u():a.updateSubmissionOnline(n,i,o,r,l).catch(function(e){return s&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},e.prototype.updateSubmissionOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_workshop_update_submission",{submissionid:e,title:n,content:t,attachmentsid:i||0}).then(function(n){return n&&n.status?Promise.resolve(e):Promise.reject(r.utils.createFakeWSError(""))})})},e.prototype.deleteSubmission=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=function(){return o.workshopOffline.saveSubmission(e,t,"","",0,n,"delete",i).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,n,"delete",i).then(function(){return o.appProvider.isOnline()?o.deleteSubmissionOnline(n,i).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()}):r()})},e.prototype.deleteSubmissionOnline=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_workshop_delete_submission",{submissionid:e}).then(function(n){return n&&n.status?Promise.resolve(e):Promise.reject(t.utils.createFakeWSError(""))})})},e.prototype.getReviewerAssessments=function(e,n,t,i,o){var r=this;return void 0===t&&(t=!1),void 0===i&&(i=!1),this.sitesProvider.getSite(o).then(function(o){var l={workshopid:e},s={cacheKey:r.getReviewerAssessmentsDataCacheKey(e,n)};return n&&(l.userid=n),t?s.omitExpires=!0:i&&(s.getFromCache=0,s.emergencyCache=0),o.read("mod_workshop_get_reviewer_assessments",l,s).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},e.prototype.invalidateReviewerAssesmentsData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getReviewerAssessmentsDataCacheKey(e,n))})},e.prototype.getAssessment=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={assessmentid:n},r={cacheKey:i.getAssessmentDataCacheKey(e,n)};return t.read("mod_workshop_get_assessment",o,r).then(function(e){return e&&e.assessment?e.assessment:Promise.reject(null)})})},e.prototype.invalidateAssessmentData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getAssessmentDataCacheKey(e,n))})},e.prototype.getAssessmentForm=function(e,n,t,i,o,r){var l=this;return void 0===t&&(t="assessment"),void 0===i&&(i=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var s={assessmentid:n,mode:t||"assessment"},a={cacheKey:l.getAssessmentFormDataCacheKey(e,n,t)};return i?a.omitExpires=!0:o&&(a.getFromCache=0,a.emergencyCache=0),r.read("mod_workshop_get_assessment_form_definition",s,a).then(function(e){return e?(e.fields=l.parseFields(e.fields),e.options=l.utils.objectToKeyValueMap(e.options,"name","value"),e.current=l.parseFields(e.current),e):Promise.reject(null)})})},e.prototype.parseFields=function(e){var n=[];return e.forEach(function(e){var t=e.name.split("_"),i=t[0],o=t[3],r=t[6]||!1;parseInt(o,10)==o&&(n[o]||(n[o]={number:parseInt(o,10)+1}),r&&parseInt(r,10)==r?(n[o].fields||(n[o].fields=[]),n[o].fields[r]||(n[o].fields[r]={number:parseInt(r,10)+1}),n[o].fields[r][i]=e.value):n[o][i]=e.value)}),n},e.prototype.invalidateAssessmentFormData=function(e,n,t,i){var o=this;return void 0===t&&(t="assessment"),this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(o.getAssessmentFormDataCacheKey(e,n,t))})},e.prototype.updateAssessment=function(e,n,t,i,o,r){var l=this;void 0===r&&(r=!1),o=o||this.sitesProvider.getCurrentSiteId();var s=function(){return l.workshopOffline.saveAssessment(e,n,t,i,o).then(function(){return!1})};return this.workshopOffline.deleteAssessment(e,n,o).then(function(){return!l.appProvider.isOnline()&&r?s():l.updateAssessmentOnline(n,i,o).catch(function(e){return r&&!l.utils.isWebServiceError(e)?s():Promise.reject(e)})})},e.prototype.updateAssessmentOnline=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={assessmentid:e,data:i.utils.objectToArrayOfObjects(n,"name","value")};return t.write("mod_workshop_update_assessment",o).then(function(e){return e&&e.status?e.rawgrade:Promise.reject(i.utils.createFakeWSError(""))})})},e.prototype.evaluateSubmission=function(e,n,t,i,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.workshopOffline.saveEvaluateSubmission(e,n,t,i,o,r,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateSubmission(e,n,l).then(function(){return s.appProvider.isOnline()?s.evaluateSubmissionOnline(n,i,o,r,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()}):a()})},e.prototype.evaluateSubmissionOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_workshop_evaluate_submission",{submissionid:e,feedbacktext:n||"",feedbackformat:1,published:t?1:0,gradeover:i}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(r.utils.createFakeWSError(""))})})},e.prototype.evaluateAssessment=function(e,n,t,i,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.workshopOffline.saveEvaluateAssessment(e,n,t,i,o,r,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateAssessment(e,n,l).then(function(){return s.appProvider.isOnline()?s.evaluateAssessmentOnline(n,i,o,r,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()}):a()})},e.prototype.evaluateAssessmentOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_workshop_evaluate_assessment",{assessmentid:e,feedbacktext:n||"",feedbackformat:1,weight:t,gradinggradeover:i}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(r.utils.createFakeWSError(""))})})},e.prototype.invalidateContent=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getWorkshop(n,e,t,!0).then(function(e){return i.invalidateContentById(e.id,n,t)})},e.prototype.invalidateContentById=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var i=[this.invalidateWorkshopData(n,t),this.invalidateWorkshopWSData(e,t)];return Promise.all(i)},e.prototype.invalidateFiles=function(e,t){return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.logView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_workshop_view_workshop",{workshopid:e})})},e.prototype.logViewSubmission=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_workshop_view_submission",{submissionid:e})})},e.COMPONENT="mmaModWorkshop",e.PER_PAGE=10,e.PHASE_SETUP=10,e.PHASE_SUBMISSION=20,e.PHASE_ASSESSMENT=30,e.PHASE_EVALUATION=40,e.PHASE_CLOSED=50,e.SUBMISSION_TYPE_DISABLED=0,e.SUBMISSION_TYPE_AVAILABLE=1,e.SUBMISSION_TYPE_REQUIRED=2,e.SUBMISSION_CHANGED="addon_mod_workshop_submission_changed",e.ASSESSMENT_SAVED="addon_mod_workshop_assessment_saved",e.ASSESSMENT_INVALIDATED="addon_mod_workshop_assessment_invalidated",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(128),t(236);var i=function(){function e(e,n,t,i,o,r,l,s,a,u,c,d){this.sitesProvider=n,this.utils=t,this.translate=i,this.textUtils=o,this.gradesHelper=r,this.questionDelegate=l,this.filepoolProvider=s,this.timeUtils=a,this.accessRulesDelegate=u,this.quizOfflineProvider=c,this.domUtils=d,this.ROOT_CACHE_KEY="mmaModQuiz:",this.logger=e.getInstance("AddonModQuizProvider")}return n=e,e.prototype.formatGrade=function(e,n){return void 0===e||-1==e||null===e?this.translate.instant("addon.mod_quiz.notyetgraded"):this.utils.formatFloat(this.textUtils.roundToDecimals(e,n))},e.prototype.getAllQuestionsData=function(e,n,t,i,o,r,l){var s=this,a=[],u={},c=this.isNavigationSequential(e);return i||(i=this.getPagesFromLayout(n.layout)),i.forEach(function(e){c&&e<n.currentpage||a.push(s.getAttemptData(n.id,e,t,o,r,l).then(function(e){e.questions.forEach(function(e){u[e.slot]=e})}))}),Promise.all(a).then(function(){return u})},e.prototype.getAttemptAccessInformationCacheKey=function(e,n){return this.getAttemptAccessInformationCommonCacheKey(e)+":"+n},e.prototype.getAttemptAccessInformationCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptAccessInformation:"+e},e.prototype.getAttemptAccessInformation=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={quizid:e,attemptid:n},s={cacheKey:r.getAttemptAccessInformationCacheKey(e,n)};return t?s.omitExpires=!0:i&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_quiz_get_attempt_access_information",l,s)})},e.prototype.getAttemptDataCacheKey=function(e,n){return this.getAttemptDataCommonCacheKey(e)+":"+n},e.prototype.getAttemptDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptData:"+e},e.prototype.getAttemptData=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={attemptid:e,page:n,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value",!0)},a={cacheKey:l.getAttemptDataCacheKey(e,n)};return i?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_quiz_get_attempt_data",s,a)})},e.prototype.getAttemptDueDate=function(e,t){var i=[];if(e.timelimit&&i.push(parseInt(t.timestart,10)+parseInt(e.timelimit,10)),e.timeclose&&i.push(parseInt(e.timeclose,10)),!i.length)return 0;var o=Math.min.apply(null,i);if(!o)return 0;switch(t.state){case n.ATTEMPT_IN_PROGRESS:return 1e3*o;case n.ATTEMPT_OVERDUE:return 1e3*(o+parseInt(e.graceperiod,10));default:return this.logger.warn("Unexpected state when getting due date: "+t.state),0}},e.prototype.getAttemptDueDateWarning=function(e,t){var i=this.getAttemptDueDate(e,t);return t.state===n.ATTEMPT_OVERDUE?this.translate.instant("addon.mod_quiz.overduemustbesubmittedby",{$a:this.timeUtils.userDate(i)}):i?this.translate.instant("addon.mod_quiz.mustbesubmittedby",{$a:this.timeUtils.userDate(i)}):void 0},e.prototype.getAttemptReadableState=function(e,t){if(t.finishedOffline)return[this.translate.instant("addon.mod_quiz.finishnotsynced")];switch(t.state){case n.ATTEMPT_IN_PROGRESS:return[this.translate.instant("addon.mod_quiz.stateinprogress")];case n.ATTEMPT_OVERDUE:var i=[],o=this.getAttemptDueDate(e,t);return i.push(this.translate.instant("addon.mod_quiz.stateoverdue")),o&&i.push(this.translate.instant("addon.mod_quiz.stateoverduedetails",{$a:this.timeUtils.userDate(o)})),i;case n.ATTEMPT_FINISHED:return[this.translate.instant("addon.mod_quiz.statefinished"),this.translate.instant("addon.mod_quiz.statefinisheddetails",{$a:this.timeUtils.userDate(1e3*t.timefinish)})];case n.ATTEMPT_ABANDONED:return[this.translate.instant("addon.mod_quiz.stateabandoned")];default:return[]}},e.prototype.getAttemptReadableStateName=function(e){switch(e){case n.ATTEMPT_IN_PROGRESS:return this.translate.instant("addon.mod_quiz.stateinprogress");case n.ATTEMPT_OVERDUE:return this.translate.instant("addon.mod_quiz.stateoverdue");case n.ATTEMPT_FINISHED:return this.translate.instant("addon.mod_quiz.statefinished");case n.ATTEMPT_ABANDONED:return this.translate.instant("addon.mod_quiz.stateabandoned");default:return""}},e.prototype.getAttemptReviewCacheKey=function(e,n){return this.getAttemptReviewCommonCacheKey(e)+":"+n},e.prototype.getAttemptReviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptReview:"+e},e.prototype.getAttemptReview=function(e,n,t,i){var o=this;return void 0===n&&(n=-1),this.sitesProvider.getSite(i).then(function(i){var r={attemptid:e,page:n},l={cacheKey:o.getAttemptReviewCacheKey(e,n)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_quiz_get_attempt_review",r,l)})},e.prototype.getAttemptSummaryCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptSummary:"+e},e.prototype.getAttemptSummary=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={attemptid:e,preflightdata:l.utils.objectToArrayOfObjects(n,"name","value",!0)},a={cacheKey:l.getAttemptSummaryCacheKey(e)};return t?a.omitExpires=!0:i&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_quiz_get_attempt_summary",s,a).then(function(n){return n&&n.questions?t&&o?l.quizOfflineProvider.loadQuestionsLocalStates(e,n.questions,r.getId()):n.questions:Promise.reject(null)})})},e.prototype.getCombinedReviewOptionsCacheKey=function(e,n){return this.getCombinedReviewOptionsCommonCacheKey(e)+":"+n},e.prototype.getCombinedReviewOptionsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"combinedReviewOptions:"+e},e.prototype.getCombinedReviewOptions=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){i=i||t.getUserId();var r={quizid:e,userid:i},l={cacheKey:o.getCombinedReviewOptionsCacheKey(e,i)};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_quiz_get_combined_review_options",r,l).then(function(e){return e&&e.someoptions&&e.alloptions?(e.someoptions=o.utils.objectToKeyValueMap(e.someoptions,"name","value"),e.alloptions=o.utils.objectToKeyValueMap(e.alloptions,"name","value"),e):Promise.reject(null)})})},e.prototype.getFeedbackForGradeCacheKey=function(e,n){return this.getFeedbackForGradeCommonCacheKey(e)+":"+n},e.prototype.getFeedbackForGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedbackForGrade:"+e},e.prototype.getFeedbackForGrade=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={quizid:e,grade:n},l={cacheKey:o.getFeedbackForGradeCacheKey(e,n)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_quiz_get_quiz_feedback_for_grade",r,l)})},e.prototype.getGradeDecimals=function(e){return void 0===e.questiondecimalpoints&&(e.questiondecimalpoints=-1),-1==e.questiondecimalpoints?e.decimalpoints:e.questiondecimalpoints},e.prototype.getGradeFromGradebook=function(e,n,t,i,o){return this.gradesHelper.getGradeModuleItems(e,n,o,null,i,t).then(function(e){return e.shift()})},e.prototype.getLastFinishedAttemptFromList=function(e){if(e&&e.length)for(var n=e.length-1;n>=0;n--){var t=e[n];if(this.isAttemptFinished(t.state))return t}},e.prototype.getPreventSubmitMessages=function(e){var n=this,t=[];return e.forEach(function(e){var i=n.questionDelegate.getPreventSubmitMessage(e);i&&(i=n.translate.instant(i),t.push(n.translate.instant("core.question.questionmessage",{$a:e.slot,$b:i})))}),t},e.prototype.getQuizDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"quiz:"+e},e.prototype.getQuizByField=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={courseids:[e]},s={cacheKey:r.getQuizDataCacheKey(e)};return i&&(s.omitExpires=!0),o.read("mod_quiz_get_quizzes_by_courses",l,s).then(function(e){if(e&&e.quizzes)for(var i in e.quizzes){var o=e.quizzes[i];if(o[n]==t)return o}return Promise.reject(null)})})},e.prototype.getQuiz=function(e,n,t,i){return this.getQuizByField(e,"coursemodule",n,t,i)},e.prototype.getQuizById=function(e,n,t,i){return this.getQuizByField(e,"id",n,t,i)},e.prototype.getQuizAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizAccessInformation:"+e},e.prototype.getQuizAccessInformation=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={quizid:e},l={cacheKey:o.getQuizAccessInformationCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_quiz_get_quiz_access_information",r,l)})},e.prototype.getQuizGradeMethod=function(e){switch("string"==typeof e&&(e=parseInt(e,10)),e){case n.GRADEHIGHEST:return this.translate.instant("addon.mod_quiz.gradehighest");case n.GRADEAVERAGE:return this.translate.instant("addon.mod_quiz.gradeaverage");case n.ATTEMPTFIRST:return this.translate.instant("addon.mod_quiz.attemptfirst");case n.ATTEMPTLAST:return this.translate.instant("addon.mod_quiz.attemptlast");default:return""}},e.prototype.getQuizRequiredQtypesCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizRequiredQtypes:"+e},e.prototype.getQuizRequiredQtypes=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={quizid:e},r={cacheKey:i.getQuizRequiredQtypesCacheKey(e)};return n&&(r.getFromCache=!1,r.emergencyCache=!1),t.read("mod_quiz_get_quiz_required_qtypes",o,r).then(function(e){return e&&e.questiontypes?e.questiontypes:Promise.reject(null)})})},e.prototype.getPagesFromLayout=function(e){for(var n=e.split(","),t=[],i=0,o=0;o<n.length;o++)"0"==n[o]&&(t.push(i),i++);return t},e.prototype.getPagesFromLayoutAndQuestions=function(e,n){for(var t=e.split(","),i=[],o=0,r=!1,l=0;l<t.length;l++){var s=Number(t[l]);0==s?(o++,r=!1):!r&&n[s]&&(i.push(o),r=!0)}return i},e.prototype.getUnsupportedQuestions=function(e){var n=this,t=[];return e.forEach(function(e){"random"==e||n.questionDelegate.isQuestionSupported(e)||t.push(e)}),t},e.prototype.getUnsupportedRules=function(e){var n=this,t=[];return e.forEach(function(e){n.accessRulesDelegate.isAccessRuleSupported(e)||t.push(e)}),t},e.prototype.getUserAttemptsCacheKey=function(e,n){return this.getUserAttemptsCommonCacheKey(e)+":"+n},e.prototype.getUserAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userAttempts:"+e},e.prototype.getUserAttempts=function(e,n,t,i,o,r,l){var s=this;return void 0===n&&(n="all"),void 0===t&&(t=!0),this.sitesProvider.getSite(r).then(function(r){l=l||r.getUserId();var a={quizid:e,userid:l,status:n,includepreviews:t?1:0},u={cacheKey:s.getUserAttemptsCacheKey(e,l)};return i?u.omitExpires=!0:o&&(u.getFromCache=!1,u.emergencyCache=!1),r.read("mod_quiz_get_user_attempts",a,u).then(function(e){return e&&e.attempts?e.attempts:Promise.reject(null)})})},e.prototype.getUserBestGradeCacheKey=function(e,n){return this.getUserBestGradeCommonCacheKey(e)+":"+n},e.prototype.getUserBestGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userBestGrade:"+e},e.prototype.getUserBestGrade=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){i=i||t.getUserId();var r={quizid:e,userid:i},l={cacheKey:o.getUserBestGradeCacheKey(e,i)};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_quiz_get_user_best_grade",r,l)})},e.prototype.invalidateAllQuizData=function(e,n,t,i,o){i=i||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateAttemptAccessInformation(e,i)),r.push(this.invalidateCombinedReviewOptionsForUser(e,i,o)),r.push(this.invalidateFeedback(e,i)),r.push(this.invalidateQuizAccessInformation(e,i)),r.push(this.invalidateQuizRequiredQtypes(e,i)),r.push(this.invalidateUserAttemptsForUser(e,i,o)),r.push(this.invalidateUserBestGradeForUser(e,i,o)),t&&(r.push(this.invalidateAttemptData(t,i)),r.push(this.invalidateAttemptReview(t,i)),r.push(this.invalidateAttemptSummary(t,i))),n&&r.push(this.invalidateGradeFromGradebook(n,i,o)),Promise.all(r)},e.prototype.invalidateAttemptAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptAccessInformationCommonCacheKey(e))})},e.prototype.invalidateAttemptAccessInformationForAttempt=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getAttemptAccessInformationCacheKey(e,n))})},e.prototype.invalidateAttemptData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptDataCommonCacheKey(e))})},e.prototype.invalidateAttemptDataForPage=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getAttemptDataCacheKey(e,n))})},e.prototype.invalidateAttemptReview=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptReviewCommonCacheKey(e))})},e.prototype.invalidateAttemptReviewForPage=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getAttemptReviewCacheKey(e,n))})},e.prototype.invalidateAttemptSummary=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAttemptSummaryCacheKey(e))})},e.prototype.invalidateCombinedReviewOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCombinedReviewOptionsCommonCacheKey(e))})},e.prototype.invalidateCombinedReviewOptionsForUser=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getCombinedReviewOptionsCacheKey(e,t))})},e.prototype.invalidateContent=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getQuiz(n,e,!1,t).then(function(e){return i.getUserAttempts(e.id,"all",!0,!1,!1,t).then(function(o){return i.invalidateAllQuizData(e.id,n,o.length?o[o.length-1].id:void 0,t)})})},e.prototype.invalidateFeedback=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getFeedbackForGradeCommonCacheKey(e))})},e.prototype.invalidateFeedbackForGrade=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getFeedbackForGradeCacheKey(e,n))})},e.prototype.invalidateFiles=function(e){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),n.COMPONENT,e)},e.prototype.invalidateGradeFromGradebook=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(o){return t=t||o.getUserId(),i.gradesHelper.invalidateGradeModuleItems(e,t,null,n)})},e.prototype.invalidateQuizAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizAccessInformationCacheKey(e))})},e.prototype.invalidateQuizRequiredQtypes=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizRequiredQtypesCacheKey(e))})},e.prototype.invalidateUserAttempts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserAttemptsCommonCacheKey(e))})},e.prototype.invalidateUserAttemptsForUser=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getUserAttemptsCacheKey(e,t))})},e.prototype.invalidateUserBestGrade=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserBestGradeCommonCacheKey(e))})},e.prototype.invalidateUserBestGradeForUser=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getUserBestGradeCacheKey(e,t))})},e.prototype.invalidateQuizData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizDataCacheKey(e))})},e.prototype.isAttemptFinished=function(e){return e==n.ATTEMPT_FINISHED||e==n.ATTEMPT_ABANDONED},e.prototype.isAttemptFinishedOffline=function(e,n){return this.quizOfflineProvider.getAttemptById(e,n).then(function(e){return!!e.finished}).catch(function(){return!1})},e.prototype.isAttemptTimeNearlyOver=function(e,t){if(t.state!=n.ATTEMPT_IN_PROGRESS)return!0;var i=this.getAttemptDueDate(e,t),o=e.autosaveperiod||0;return i>0&&Date.now()+o>=i},e.prototype.isLastAttemptOfflineUnfinished=function(e,n,t){return this.quizOfflineProvider.getQuizAttempts(e.id,n,t).then(function(e){var n=e.pop();return n&&!n.finished}).catch(function(){return!1})},e.prototype.isNavigationSequential=function(e){return"sequential"==e.navmethod},e.prototype.isPluginEnabled=function(e){return!0},e.prototype.isQuestionBlocked=function(e){return!!this.domUtils.convertToElement(e.html).querySelector(".mod_quiz-blocked_question_warning")},e.prototype.isQuizOffline=function(e){return!!e.allowofflineattempts&&!this.sitesProvider.getCurrentSite().isOfflineDisabled()},e.prototype.loadFinishedOfflineData=function(e,n){if(e.length){var t=e[e.length-1];return this.isAttemptFinishedOffline(t.id,n).then(function(e){t.finishedOffline=e})}return Promise.resolve()},e.prototype.logViewAttempt=function(e,n,t,i){void 0===n&&(n=0),void 0===t&&(t={});var o={attemptid:e,page:n,preflightdata:this.utils.objectToArrayOfObjects(t,"name","value",!0)},r=[];return r.push(this.sitesProvider.getCurrentSite().write("mod_quiz_view_attempt",o)),i&&r.push(this.quizOfflineProvider.setAttemptCurrentPage(e,n)),Promise.all(r)},e.prototype.logViewAttemptReview=function(e){var n={attemptid:e};return this.sitesProvider.getCurrentSite().write("mod_quiz_view_attempt_review",n)},e.prototype.logViewAttemptSummary=function(e,n){var t={attemptid:e,preflightdata:this.utils.objectToArrayOfObjects(n,"name","value",!0)};return this.sitesProvider.getCurrentSite().write("mod_quiz_view_attempt_summary",t)},e.prototype.logViewQuiz=function(e){var n={quizid:e};return this.sitesProvider.getCurrentSite().write("mod_quiz_view_quiz",n)},e.prototype.processAttempt=function(e,n,t,i,o,r,l,s){return l?this.processAttemptOffline(e,n,t,i,o,s):this.processAttemptOnline(n.id,t,i,o,r,s)},e.prototype.processAttemptOnline=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={attemptid:e,data:l.utils.objectToArrayOfObjects(n,"name","value"),finishattempt:i?1:0,timeup:o?1:0,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value")};return r.write("mod_quiz_process_attempt",s).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.state?e.state:Promise.reject(null)})})},e.prototype.processAttemptOffline=function(e,n,t,i,o,r){var l=this;return this.getAttemptSummary(n.id,i,!0,!1,!0,r).then(function(i){var s=l.utils.arrayToObject(i,"slot");return l.quizOfflineProvider.processAttempt(e,n,s,t,o,r)})},e.prototype.quizHasGrades=function(e){return e.grade>=5e-6&&e.sumgrades>=5e-6},e.prototype.rescaleGrade=function(e,n,t){void 0===t&&(t=!0);var i,o=parseFloat(e);return isNaN(o)||(i=n.sumgrades>=5e-6?o*n.grade/n.sumgrades:0),"question"===t?this.formatGrade(i,this.getGradeDecimals(n)):t?this.formatGrade(i,n.decimalpoints):null===i?null:void 0!==i?String(i):void 0},e.prototype.saveAttempt=function(e,n,t,i,o,r){try{return o?this.processAttemptOffline(e,n,t,i,!1,r):this.saveAttemptOnline(n.id,t,i,r)}catch(e){return this.logger.error(e),Promise.reject(null)}},e.prototype.saveAttemptOnline=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={attemptid:e,data:o.utils.objectToArrayOfObjects(n,"name","value"),preflightdata:o.utils.objectToArrayOfObjects(t,"name","value")};return i.write("mod_quiz_save_attempt",r).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.status?void 0:Promise.reject(null)})})},e.prototype.shouldShowTimeLeft=function(e,t,i){var o=this.timeUtils.timestamp();return t.state==n.ATTEMPT_IN_PROGRESS&&this.accessRulesDelegate.shouldShowTimeLeft(e,t,i,o)},e.prototype.startAttempt=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={quizid:e,preflightdata:o.utils.objectToArrayOfObjects(n,"name","value",!0),forcenew:t?1:0};return i.write("mod_quiz_start_attempt",r).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.attempt?e.attempt:Promise.reject(null)})})},e.COMPONENT="mmaModQuiz",e.ATTEMPT_FINISHED_EVENT="addon_mod_quiz_attempt_finished",e.GRADEHIGHEST=1,e.GRADEAVERAGE=2,e.ATTEMPTFIRST=3,e.ATTEMPTLAST=4,e.QUESTION_OPTIONS_MAX_ONLY=1,e.QUESTION_OPTIONS_MARK_AND_MAX=2,e.ATTEMPT_IN_PROGRESS="inprogress",e.ATTEMPT_OVERDUE="overdue",e.ATTEMPT_FINISHED="finished",e.ATTEMPT_ABANDONED="abandoned",e.QUIZ_SHOW_TIME_BEFORE_DEADLINE=3600,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t){this.sitesProvider=n,this.coursesProvider=t,this.ROOT_CACHE_KEY="mmGrades:",this.logger=e.getInstance("CoreGradesProvider")}return e.prototype.getCourseGradesCacheKey=function(e,n){return this.getCourseGradesPrefixCacheKey(e)+n},e.prototype.getCourseGradesItemsCacheKey=function(e,n,t){return t=t||0,this.getCourseGradesPrefixCacheKey(e)+n+":"+t},e.prototype.getCourseGradesPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"items:"+e+":"},e.prototype.getCoursesGradesCacheKey=function(){return this.ROOT_CACHE_KEY+"coursesgrades"},e.prototype.getGradeItems=function(e,n,t,i,o){var r=this;return void 0===o&&(o=!1),i=i||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(i).then(function(l){return n=n||l.getUserId(),r.isGradeItemsAvalaible(i).then(function(l){return l?r.getCourseGradesItems(e,n,t,i,o).catch(function(){return r.getCourseGradesTable(e,n,i,o)}):r.getCourseGradesTable(e,n,i,o)})})},e.prototype.getCourseGradesItems=function(e,n,t,i,o){var r=this;return void 0===o&&(o=!1),this.sitesProvider.getSite(i).then(function(i){n=n||i.getUserId(),t=t||0,r.logger.debug("Get grades for course '"+e+"' and user '"+n+"'");var l={courseid:e,userid:n,groupid:t},s={cacheKey:r.getCourseGradesItemsCacheKey(e,n,t)};return o&&(s.getFromCache=0,s.emergencyCache=0),i.read("gradereport_user_get_grade_items",l,s).then(function(e){return e&&e.usergrades&&e.usergrades[0]?e.usergrades[0].gradeitems:Promise.reject(null)})})},e.prototype.getCourseGradesTable=function(e,n,t,i){var o=this;return void 0===i&&(i=!1),this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId(),o.logger.debug("Get grades for course '"+e+"' and user '"+n+"'");var r={courseid:e,userid:n},l={cacheKey:o.getCourseGradesCacheKey(e,n)};return i&&(l.getFromCache=0,l.emergencyCache=0),t.read("gradereport_user_get_grades_table",r,l).then(function(e){return e&&e.tables&&e.tables[0]?e.tables[0]:Promise.reject(null)})})},e.prototype.getCoursesGrades=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){n.logger.debug("Get course grades");var t={cacheKey:n.getCoursesGradesCacheKey()};return e.read("gradereport_overview_get_course_grades",void 0,t).then(function(e){return e&&e.grades?e.grades:Promise.reject(null)})})},e.prototype.invalidateAllCourseGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCourseGradesPrefixCacheKey(e))})},e.prototype.invalidateCourseGradesData=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(i.getCourseGradesCacheKey(e,n))})},e.prototype.invalidateCoursesGradesData=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCoursesGradesCacheKey())})},e.prototype.invalidateCourseGradesItemsData=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.invalidateWsCacheForKey(o.getCourseGradesItemsCacheKey(e,n,t))})},e.prototype.isCourseGradesEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){if(!e.wsAvailable("gradereport_overview_get_course_grades"))return!1;return-1!==(e.getStoredConfig("mygradesurl")||"").indexOf("/grade/report/overview/")})},e.prototype.isPluginEnabledForCourse=function(e,n){return e?this.coursesProvider.getUserCourse(e,!0,n).then(function(e){return!(e&&void 0!==e.showgrades&&0==e.showgrades)}):Promise.reject(null)},e.prototype.isGradeItemsAvalaible=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("gradereport_user_get_grade_items")})},e.prototype.logCourseGradesView=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),this.sitesProvider.getCurrentSite().write("gradereport_user_view_grade_report",{courseid:e,userid:n})},e.prototype.logCoursesGradesView=function(e){return e||(e=this.sitesProvider.getCurrentSiteHomeId()),this.sitesProvider.getCurrentSite().write("gradereport_overview_view_grade_report",{courseid:e})},e.TYPE_NONE=0,e.TYPE_VALUE=1,e.TYPE_SCALE=2,e.TYPE_TEXT=3,e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(2);var i=function(){function e(e){this.sitesProvider=e,this.files={}}return e.prototype.addFile=function(e,n,t,i){i=i||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,n,i),this.files[i][e][n].push(t)},e.prototype.clearFiles=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId(),this.files[t]&&this.files[t][e]&&this.files[t][e][n]&&(this.files[t][e][n]=[])},e.prototype.getFiles=function(e,n,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.files[t]&&this.files[t][e]&&this.files[t][e][n]?this.files[t][e][n]:[]},e.prototype.initFileArea=function(e,n,t){this.files[t]||(this.files[t]={}),this.files[t][e]||(this.files[t][e]={}),this.files[t][e][n]||(this.files[t][e][n]=[])},e.prototype.removeFile=function(e,n,t,i){if(i=i||this.sitesProvider.getCurrentSiteId(),this.files[i]&&this.files[i][e]&&this.files[i][e][n]){var o=this.files[i][e][n].indexOf(t);-1!=o&&this.files[i][e][n].splice(o,1)}},e.prototype.removeFileByIndex=function(e,n,t,i){i=i||this.sitesProvider.getCurrentSiteId(),this.files[i]&&this.files[i][e]&&this.files[i][e][n]&&t>=0&&t<this.files[i][e][n].length&&this.files[i][e][n].splice(t,1)},e.prototype.setFiles=function(e,n,t,i){i=i||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,n,i),this.files[i][e][n]=t},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(6),t(3);var i=function(){function e(e,n,t){this.utils=t,this.initProcesses={},this.logger=e.getInstance("CoreInitDelegate")}return n=e,e.prototype.executeInitProcesses=function(){var e=this,n=[];void 0===this.readiness&&this.initReadiness();for(var t in this.initProcesses)n.push(this.initProcesses[t]);n.sort(function(e,n){return n.priority-e.priority}),n=n.map(function(n){return{context:e,func:e.prepareProcess,params:[n],blocking:!!n.blocking}}),this.utils.executeOrderedPromises(n).finally(this.readiness.resolve)},e.prototype.initReadiness=function(){var e=this;this.readiness=this.utils.promiseDefer(),this.readiness.promise.then(function(){return e.readiness.resolved=!0})},e.prototype.isReady=function(){return this.readiness.resolved},e.prototype.prepareProcess=function(e){var n;this.logger.debug("Executing init process '"+e.name+"'");try{n=e.load()}catch(n){return void this.logger.error("Error while calling the init process '"+e.name+"'. "+n)}return n},e.prototype.ready=function(){return void 0===this.readiness&&this.initReadiness(),this.readiness.promise},e.prototype.registerProcess=function(e){void 0===e.priority&&(e.priority=n.DEFAULT_PRIORITY),void 0===this.initProcesses[e.name]?(this.logger.log("Registering process '"+e.name+"'."),this.initProcesses[e.name]=e):this.logger.log("Process '"+e.name+"' already registered.")},e.DEFAULT_PRIORITY=100,e.MAX_RECOMMENDED_PRIORITY=600,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(57),t(156)),l=(t.n(r),function(){function e(e,n,t,i){this.domUtils=e,this.sitePluginsProvider=n,this.navCtrl=t,this.onContentLoaded=new o.r,this.onLoadingContent=new o.r,this.invalidateObservable=new r.Subject,this.differ=i.find([]).create()}return e.prototype.ngOnInit=function(){this.fetchContent()},e.prototype.ngDoCheck=function(){if(this.data&&this.jsData){this.differ.diff(this.data)&&(this.jsData=Object.assign(this.jsData,this.data))}},e.prototype.fetchContent=function(e){var n=this;return this.onLoadingContent.emit(e),this.forceCompile=!1,this.sitePluginsProvider.getContent(this.component,this.method,this.args,this.preSets).then(function(t){n.content=t.templates.length?t.templates[0].html:"",n.javascript=t.javascript,n.otherData=t.otherdata,n.data=n.data||{},n.forceCompile=!0,n.jsData=Object.assign(n.data,n.sitePluginsProvider.createDataForJS(n.initResult,t)),n.jsData.openContent=n.openContent.bind(n),n.jsData.refreshContent=n.refreshContent.bind(n),n.jsData.updateContent=n.updateContent.bind(n),n.onContentLoaded.emit(e)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errorloadingcontent",!0)}).finally(function(){n.dataLoaded=!0})},e.prototype.openContent=function(e,n,t,i,o,r){!0===o&&(o=this.data),this.navCtrl.push("CoreSitePluginsPluginPage",{title:e,component:t||this.component,method:i||this.method,args:n,initResult:this.initResult,jsData:o,preSets:r})},e.prototype.refreshContent=function(e){var n=this;return void 0===e&&(e=!0),e&&(this.dataLoaded=!1),this.invalidateObservable.next(),this.sitePluginsProvider.invalidateContent(this.component,this.method,this.args).finally(function(){return n.fetchContent(!0)})},e.prototype.updateContent=function(e,n,t,i){this.component=n||this.component,this.method=t||this.method,this.args=e,this.dataLoaded=!1,i&&Object.assign(this.data,i),this.fetchContent()},e=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],e)}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(1),o=t(23),r=function(){function e(e){this.fb=e,this.gotoEntry=new i.r}return e.prototype.addControl=function(e,n){this.form&&("search"==this.mode&&this.form.addControl(e,this.fb.control(this.search[e]||null)),"edit"==this.mode&&this.form.addControl(e,this.fb.control(n,this.field.required?o.u.required:null)))},e.prototype.ngOnInit=function(){this.init()},e.prototype.init=function(){},e.prototype.isShowOrListMode=function(){return"list"==this.mode||"show"==this.mode},e.prototype.ngOnChanges=function(e){this.isShowOrListMode()&&e.value&&this.updateValue(e.value.currentValue)},e.prototype.updateValue=function(e){this.value=e},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(162),t(164);var i=t(72),o=(t(122),function(){function e(e,n,t,i,o,r,l,s,a,u){this.sitesProvider=n,this.fileProvider=t,this.assignProvider=i,this.utils=o,this.assignOffline=r,this.feedbackDelegate=l,this.submissionDelegate=s,this.fileUploaderProvider=a,this.groupsProvider=u,this.logger=e.getInstance("AddonModAssignHelperProvider")}return e.prototype.canEditSubmissionOffline=function(e,n){if(!n)return Promise.resolve(!1);if(n.status==i.a.SUBMISSION_STATUS_NEW||n.status==i.a.SUBMISSION_STATUS_REOPENED)return Promise.resolve(!0);for(var t=[],o=!0,r=0;r<n.plugins.length;r++){t.push(this.submissionDelegate.canPluginEditOffline(e,n,n.plugins[r]).then(function(e){e||(o=!1)}))}return Promise.all(t).then(function(){return o})},e.prototype.clearSubmissionPluginTmpData=function(e,n,t){var i=this;n.plugins.forEach(function(o){i.submissionDelegate.clearTmpData(e,n,o,t)})},e.prototype.copyPreviousAttempt=function(e,n){var t=this,i={},o=[];return n.plugins.forEach(function(n){o.push(t.submissionDelegate.copyPluginSubmissionData(e,n,i))}),Promise.all(o).then(function(){if(Object.keys(i).length)return t.assignProvider.saveSubmissionOnline(e.id,i)})},e.prototype.deleteStoredSubmissionFiles=function(e,n,t,i){var o=this;return this.assignOffline.getSubmissionPluginFolder(e,n,t,i).then(function(e){return o.fileProvider.removeDir(e)})},e.prototype.discardFeedbackPluginData=function(e,n,t,i){var o=this,r=[];return t.plugins.forEach(function(t){r.push(o.feedbackDelegate.discardPluginFeedbackData(e,n,t,i))}),Promise.all(r)},e.prototype.getParticipants=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.assignProvider.listParticipants(e.id,void 0,n).then(function(i){return i&&i.length>0?i:t.groupsProvider.getActivityAllowedGroupsIfEnabled(e.cmid,void 0,n).then(function(i){var o=[],r={};return i.forEach(function(i){o.push(t.assignProvider.listParticipants(e.id,i.id,n).then(function(e){e.forEach(function(e){r[e.id]=e})}))}),Promise.all(o).then(function(){return t.utils.objectToArray(r)})})})},e.prototype.getPluginConfig=function(e,n,t){var i={};return e.configs.forEach(function(e){e.subtype==n&&e.plugin==t&&(i[e.name]=e.value)}),i},e.prototype.getPluginsEnabled=function(e,n){var t=[];return e.configs.forEach(function(e){e.subtype==n&&"enabled"==e.name&&1===parseInt(e.value,10)&&t.push({type:e.plugin})}),t},e.prototype.getStoredSubmissionFiles=function(e,n,t,i){var o=this;return this.assignOffline.getSubmissionPluginFolder(e,n,t,i).then(function(e){return o.fileProvider.getDirectoryContents(e)})},e.prototype.getSubmissionSizeForCopy=function(e,n){var t=this,i=[],o=0;return n.plugins.forEach(function(n){i.push(t.submissionDelegate.getPluginSizeForCopy(e,n).then(function(e){o+=e}))}),Promise.all(i).then(function(){return o})},e.prototype.getSubmissionSizeForEdit=function(e,n,t){var i=this,o=[],r=0;return n.plugins.forEach(function(l){o.push(i.submissionDelegate.getPluginSizeForEdit(e,n,l,t).then(function(e){r+=e}))}),Promise.all(o).then(function(){return r})},e.prototype.hasFeedbackDataChanged=function(e,n,t){var i=this,o=[],r=!1;return t.plugins.forEach(function(l){o.push(i.prepareFeedbackPluginData(e.id,n,t).then(function(t){return i.feedbackDelegate.hasPluginDataChanged(e,n,l,t,n).then(function(e){e&&(r=!0)})}).catch(function(){}))}),this.utils.allPromises(o).then(function(){return r})},e.prototype.hasSubmissionDataChanged=function(e,n,t){var i=this,o=[],r=!1;return n.plugins.forEach(function(l){o.push(i.submissionDelegate.hasPluginDataChanged(e,n,l,t).then(function(e){e&&(r=!0)}).catch(function(){}))}),this.utils.allPromises(o).then(function(){return r})},e.prototype.prepareFeedbackPluginData=function(e,n,t,i){var o=this,r={},l=[];return t.plugins.forEach(function(t){l.push(o.feedbackDelegate.preparePluginFeedbackData(e,n,t,r,i))}),Promise.all(l).then(function(){return r})},e.prototype.prepareSubmissionPluginData=function(e,n,t,i){var o=this,r={},l=[];return n.plugins.forEach(function(s){l.push(o.submissionDelegate.preparePluginSubmissionData(e,n,s,t,r,i))}),Promise.all(l).then(function(){return r})},e.prototype.storeSubmissionFiles=function(e,n,t,i,o){var r=this;return this.assignOffline.getSubmissionPluginFolder(e,n,i,o).then(function(e){return r.fileUploaderProvider.storeFilesToUpload(e,t)})},e.prototype.uploadFile=function(e,n,t,o){return this.fileUploaderProvider.uploadOrReuploadFile(n,t,i.a.COMPONENT,e,o)},e.prototype.uploadFiles=function(e,n,t){return this.fileUploaderProvider.uploadOrReuploadFiles(n,i.a.COMPONENT,e,t)},e.prototype.uploadOrStoreFiles=function(e,n,t,i,o,r){return i?this.storeSubmissionFiles(e,n,t,o,r):this.uploadFiles(e,t,r)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(152);var i=function(){function e(e,n,t,i,o,r,l,s,a){this.coursesProvider=n,this.gradesProvider=t,this.sitesProvider=i,this.textUtils=o,this.courseProvider=r,this.domUtils=l,this.urlUtils=s,this.utils=a,this.logger=e.getInstance("CoreGradesHelperProvider")}return e.prototype.formatGradeRow=function(e){var n={};for(var t in e)if(void 0!==e[t].content&&null!==e[t].content){var i=String(e[t].content);"itemname"==t?(this.setRowIcon(n,i),n.link=this.getModuleLink(i),n.rowclass+=e[t].class.indexOf("hidden")>=0?" hidden":"",n.rowclass+=e[t].class.indexOf("dimmed_text")>=0?" dimmed_text":"",i=i.replace(/<\/span>/gi,"\n"),i=this.textUtils.cleanTags(i)):i=this.textUtils.replaceNewLines(i,"<br>"),"&nbsp;"==i&&(i=""),n[t]=i.trim()}return n},e.prototype.formatGradeRowForTable=function(e){var n={};for(var t in e)if(void 0!==e[t].content&&null!==e[t].content){var i=String(e[t].content);"itemname"==t?(this.setRowIcon(n,i),n.rowclass=e[t].class.indexOf("leveleven")<0?"odd":"even",n.rowclass+=e[t].class.indexOf("hidden")>=0?" hidden":"",n.rowclass+=e[t].class.indexOf("dimmed_text")>=0?" dimmed_text":"",i=i.replace(/<\/span>/gi,"\n"),i=this.textUtils.cleanTags(i),n.id=parseInt(e[t].id.split("_")[1],10),n.colspan=e[t].colspan,n.rowspan=e.leader&&e.leader.rowspan||1,t="gradeitem"):i=this.textUtils.replaceNewLines(i,"<br>"),"&nbsp;"==i&&(i=""),n[t]=i.trim()}return n},e.prototype.formatGradeItem=function(e){for(var n in e){var t=n.indexOf("formatted");t>0&&(e[n.substr(0,t)]=e[n])}return e},e.prototype.formatGradesTable=function(e){var n=this,t=e.maxdepth,i={columns:[],rows:[]},o={gradeitem:!0,weight:!1,grade:!1,range:!1,percentage:!1,lettergrade:!1,rank:!1,average:!1,feedback:!1,contributiontocoursetotal:!1};i.rows=e.tabledata.map(function(e){return n.formatGradeRowForTable(e)});var r=i.rows.find(function(e){return"leader"!=e.itemtype&&(void 0!==e.grade||void 0!==e.percentage)});r&&void 0!==r.grade?o.grade=!0:r&&void 0!==r.percentage?o.percentage=!0:(r=i.rows.find(function(e){return"leader"!=e.itemtype}),o.grade=!0);for(var l in o)void 0!==r[l]&&i.columns.push({name:l,colspan:"gradeitem"==l?t:1,hiddenPhone:!o[l]});return i},e.prototype.getGradesCourseData=function(e){return this.coursesProvider.getUserCourses(!0).then(function(n){var t={};return n.forEach(function(e){t[e.id]=e}),e.forEach(function(e){void 0!==t[e.courseid]&&(e.courseFullName=t[e.courseid].fullname)}),e})},e.prototype.getGradeItem=function(e,n,t,i,o){var r=this;return void 0===o&&(o=!1),this.gradesProvider.getCourseGradesTable(e,t,i,o).then(function(e){return e?r.getGradesTableRow(e,n):Promise.reject(null)})},e.prototype.getGradeLabelFromValue=function(e,n){if(n=Number(n),!e||!n||n<=0)return"";for(var t in e)if(e[t].value==n)return e[t].label;return""},e.prototype.getGradeModuleItems=function(e,n,t,i,o,r){var l=this;return void 0===r&&(r=!1),this.gradesProvider.getGradeItems(e,t,i,o,r).then(function(e){return e?void 0!==e.tabledata?l.getModuleGradesTableRows(e,n):e.filter(function(e){return e.cmid==n}).map(function(e){return l.formatGradeItem(e)}):Promise.reject(null)})},e.prototype.getGradeValueFromLabel=function(e,n){if(!e||!n)return 0;for(var t in e)if(e[t].label==n)return e[t].value<0?0:e[t].value;return 0},e.prototype.getModuleLink=function(e){var n=this.domUtils.toDom(e)[0],t=!!n.attributes.href&&n.attributes.href.value;return!(!t||t.indexOf("/mod/")<0)&&t},e.prototype.getGradesTableRow=function(e,n){if(e.tabledata){var t=e.tabledata.find(function(e){return e.itemname&&e.itemname.id&&"row"==e.itemname.id.substr(0,3)&&parseInt(e.itemname.id.split("_")[1],10)==n});if(t)return this.formatGradeRow(t)}return""},e.prototype.getModuleGradesTableRows=function(e,n){var t=this;if(e.tabledata){var i=/href="([^"]*\/mod\/[^"|^\/]*\/[^"|^\.]*\.php[^"]*)/;return e.tabledata.filter(function(e){if(e.itemname&&e.itemname.content){var o=e.itemname.content.match(i);if(o&&o.length){var r=t.urlUtils.extractUrlParams(o[1]);return r&&r.id==n}}return!1}).map(function(e){return t.formatGradeRow(e)})}return[]},e.prototype.invalidateGradeModuleItems=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(i).then(function(r){return n=n||r.getUserId(),o.gradesProvider.isGradeItemsAvalaible(i).then(function(r){return r?o.gradesProvider.invalidateCourseGradesItemsData(e,n,t,i):o.gradesProvider.invalidateCourseGradesData(e,n,i)})})},e.prototype.setRowIcon=function(e,n){if((n=n.replace("%2F","/").replace("%2f","/")).indexOf("/agg_mean")>-1)e.itemtype="agg_mean",e.image="assets/img/grades/agg_mean.png";else if(n.indexOf("/agg_sum")>-1)e.itemtype="agg_sum",e.image="assets/img/grades/agg_sum.png";else if(n.indexOf("/outcomes")>-1||n.indexOf("fa-tasks")>-1)e.itemtype="outcome",e.icon="fa-tasks";else if(n.indexOf("i/folder")>-1||n.indexOf("fa-folder")>-1)e.itemtype="category",e.icon="fa-folder";else if(n.indexOf("/manual_item")>-1||n.indexOf("fa-square-o")>-1)e.itemtype="manual",e.icon="fa-square-o";else if(n.indexOf("/mod/")>-1){var t=n.match(/mod\/([^\/]*)\//);void 0!==t[1]&&(e.itemtype="mod",e.itemmodule=t[1],e.image=this.courseProvider.getModuleIconSrc(t[1],this.domUtils.convertToElement(n).querySelector("img").getAttribute("src")))}else if(n.indexOf("src=")>-1){var i=n.match(/src="([^"]*)"/);e.image=i[1]}return e},e.prototype.makeGradesMenu=function(e,n,t,i,o){var r=this;if(void 0===t&&(t=""),void 0===i&&(i=""),e<0)return o?Promise.resolve(this.utils.makeMenuFromList(o,t,void 0,i)):this.courseProvider.getModuleBasicGradeInfo(n).then(function(e){return e.scale?r.utils.makeMenuFromList(e.scale,t,void 0,i):[]});if(e>0){var l=[];t&&l.push({label:t,value:i});for(var s=e;s>=0;s--)l.push({label:s+" / "+e,value:s});return Promise.resolve(l)}return Promise.resolve([])},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(537),function(e){function n(n,t,i,o){var r=e.call(this,"AddonModAssignFeedbackDelegate",n,t,i)||this;return r.defaultHandler=o,r.handlerNameProperty="type",r}return Object(i.__extends)(n,e),n.prototype.discardPluginFeedbackData=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"discardDraft",[e,n,i]))},n.prototype.getComponentForPlugin=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n]))},n.prototype.getPluginDraftData=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getDraft",[e,n,i]))},n.prototype.getPluginFiles=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getPluginFiles",[e,n,t,i]))},n.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},n.prototype.hasPluginDataChanged=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDataChanged",[e,n,t,i,o]))},n.prototype.hasPluginDraftData=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDraftData",[e,n,i]))},n.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},n.prototype.prefetch=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prefetch",[e,n,t,i]))},n.prototype.preparePluginFeedbackData=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareFeedbackData",[e,n,t,i,o]))},n.prototype.saveFeedbackDraft=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"saveDraft",[e,n,t,i,o]))},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o){this.fileProvider=e,this.sitesProvider=t,this.textUtils=i,this.timeUtils=o,this.tablesSchema=[{name:n.SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"content",type:"TEXT"},{name:"attachmentsid",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","submissionid","action"]},{name:n.ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"inputdata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","assessmentid"]},{name:n.EVALUATE_SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"published",type:"INTEGER"},{name:"gradeover",type:"TEXT"}],primaryKeys:["workshopid","submissionid"]},{name:n.EVALUATE_ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"weight",type:"INTEGER"},{name:"gradinggradeover",type:"TEXT"}],primaryKeys:["workshopid","assessmentid"]}],this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.getAllWorkshops=function(e){var n=[this.getAllSubmissions(e),this.getAllAssessments(e),this.getAllEvaluateSubmissions(e),this.getAllEvaluateAssessments(e)];return Promise.all(n).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){n[e.workshopid]=!0})}),Object.keys(n).map(function(e){return parseInt(e,10)})})},e.prototype.hasWorkshopOfflineData=function(e,n){var t=[this.getSubmissions(e,n),this.getAssessments(e,n),this.getEvaluateSubmissions(e,n),this.getEvaluateAssessments(e,n)];return Promise.all(t).then(function(e){return e.some(function(e){return e&&e.length})}).catch(function(){return!1})},e.prototype.deleteSubmissionAction=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:e,submissionid:t,action:i};return o.getDb().deleteRecords(n.SUBMISSIONS_TABLE,r)})},e.prototype.deleteAllSubmissionActions=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={workshopid:e,submissionid:t};return i.getDb().deleteRecords(n.SUBMISSIONS_TABLE,o)})},e.prototype.getAllSubmissions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.SUBMISSIONS_TABLE).then(function(e){return e.forEach(t.parseSubmissionRecord.bind(t)),e})})},e.prototype.getSubmissions=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={workshopid:e};return t.getDb().getRecords(n.SUBMISSIONS_TABLE,o).then(function(e){return e.forEach(i.parseSubmissionRecord.bind(i)),e})})},e.prototype.getSubmissionActions=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e,submissionid:t};return i.getDb().getRecords(n.SUBMISSIONS_TABLE,r).then(function(e){return e.forEach(o.parseSubmissionRecord.bind(o)),e})})},e.prototype.getSubmissionAction=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={workshopid:e,submissionid:t,action:i};return o.getDb().getRecord(n.SUBMISSIONS_TABLE,l).then(function(e){return r.parseSubmissionRecord(e),e})})},e.prototype.saveSubmission=function(e,t,i,o,r,l,s,a){var u=this;return this.sitesProvider.getSite(a).then(function(a){var c=u.timeUtils.timestamp(),d={workshopid:e,courseid:t,title:i,content:o,attachmentsid:JSON.stringify(r),action:s,submissionid:l||-c,timemodified:c};return a.getDb().insertRecord(n.SUBMISSIONS_TABLE,d)})},e.prototype.parseSubmissionRecord=function(e){e.attachmentsid=this.textUtils.parseJSON(e.attachmentsid)},e.prototype.deleteAssessment=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={workshopid:e,assessmentid:t};return i.getDb().deleteRecords(n.ASSESSMENTS_TABLE,o)})},e.prototype.getAllAssessments=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.ASSESSMENTS_TABLE).then(function(e){return e.forEach(t.parseAssessmentRecord.bind(t)),e})})},e.prototype.getAssessments=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={workshopid:e};return t.getDb().getRecords(n.ASSESSMENTS_TABLE,o).then(function(e){return e.forEach(i.parseAssessmentRecord.bind(i)),e})})},e.prototype.getAssessment=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e,assessmentid:t};return i.getDb().getRecord(n.ASSESSMENTS_TABLE,r).then(function(e){return o.parseAssessmentRecord(e),e})})},e.prototype.saveAssessment=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={workshopid:e,courseid:i,inputdata:JSON.stringify(o),assessmentid:t,timemodified:l.timeUtils.timestamp()};return r.getDb().insertRecord(n.ASSESSMENTS_TABLE,s)})},e.prototype.parseAssessmentRecord=function(e){e.inputdata=this.textUtils.parseJSON(e.inputdata)},e.prototype.deleteEvaluateSubmission=function(e,t,i){var o={workshopid:e,submissionid:t};return this.sitesProvider.getSite(i).then(function(e){return e.getDb().deleteRecords(n.EVALUATE_SUBMISSIONS_TABLE,o)})},e.prototype.getAllEvaluateSubmissions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.EVALUATE_SUBMISSIONS_TABLE).then(function(e){return e.forEach(t.parseEvaluateSubmissionRecord.bind(t)),e})})},e.prototype.getEvaluateSubmissions=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={workshopid:e};return t.getDb().getRecords(n.EVALUATE_SUBMISSIONS_TABLE,o).then(function(e){return e.forEach(i.parseEvaluateSubmissionRecord.bind(i)),e})})},e.prototype.getEvaluateSubmission=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e,submissionid:t};return i.getDb().getRecord(n.EVALUATE_SUBMISSIONS_TABLE,r).then(function(e){return o.parseEvaluateSubmissionRecord(e),e})})},e.prototype.saveEvaluateSubmission=function(e,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={workshopid:e,courseid:i,submissionid:t,timemodified:a.timeUtils.timestamp(),feedbacktext:o,published:Number(r),gradeover:JSON.stringify(l)};return s.getDb().insertRecord(n.EVALUATE_SUBMISSIONS_TABLE,u)})},e.prototype.parseEvaluateSubmissionRecord=function(e){e.published=Boolean(e.published),e.gradeover=this.textUtils.parseJSON(e.gradeover)},e.prototype.deleteEvaluateAssessment=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={workshopid:e,assessmentid:t};return i.getDb().deleteRecords(n.EVALUATE_ASSESSMENTS_TABLE,o)})},e.prototype.getAllEvaluateAssessments=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.EVALUATE_ASSESSMENTS_TABLE).then(function(e){return e.forEach(t.parseEvaluateAssessmentRecord.bind(t)),e})})},e.prototype.getEvaluateAssessments=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o={workshopid:e};return t.getDb().getRecords(n.EVALUATE_ASSESSMENTS_TABLE,o).then(function(e){return e.forEach(i.parseEvaluateAssessmentRecord.bind(i)),e})})},e.prototype.getEvaluateAssessment=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={workshopid:e,assessmentid:t};return i.getDb().getRecord(n.EVALUATE_ASSESSMENTS_TABLE,r).then(function(e){return o.parseEvaluateAssessmentRecord(e),e})})},e.prototype.saveEvaluateAssessment=function(e,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={workshopid:e,courseid:i,assessmentid:t,timemodified:a.timeUtils.timestamp(),feedbacktext:o,weight:r,gradinggradeover:JSON.stringify(l)};return s.getDb().insertRecord(n.EVALUATE_ASSESSMENTS_TABLE,u)})},e.prototype.parseEvaluateAssessmentRecord=function(e){e.gradinggradeover=this.textUtils.parseJSON(e.gradinggradeover)},e.prototype.getWorkshopFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(i,"offlineworkshop/"+e+"/")})},e.prototype.getSubmissionFolder=function(e,n,t,i){var o=this;return this.getWorkshopFolder(e,i).then(function(e){return o.textUtils.concatenatePaths(e+="submission/",t?"update_"+n:"add")})},e.prototype.getAssessmentFolder=function(e,n,t){var i=this;return this.getWorkshopFolder(e,t).then(function(e){return e+="assessment/",i.textUtils.concatenatePaths(e,String(n))})},e.SUBMISSIONS_TABLE="addon_mod_workshop_submissions",e.ASSESSMENTS_TABLE="addon_mod_workshop_assessments",e.EVALUATE_SUBMISSIONS_TABLE="addon_mod_workshop_evaluate_submissions",e.EVALUATE_ASSESSMENTS_TABLE="addon_mod_workshop_evaluate_assessments",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(541),function(e){function n(n,t,i,o){var r=e.call(this,"AddonModAssignSubmissionDelegate",n,t,i)||this;return r.defaultHandler=o,r.handlerNameProperty="type",r}return Object(i.__extends)(n,e),n.prototype.canPluginEditOffline=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"canEditOffline",[e,n,t]))},n.prototype.clearTmpData=function(e,n,t,i){return this.executeFunctionOnEnabled(t.type,"clearTmpData",[e,n,t,i])},n.prototype.copyPluginSubmissionData=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"copySubmissionData",[e,n,t,i,o]))},n.prototype.deletePluginOfflineData=function(e,n,t,i,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"deleteOfflineData",[e,n,t,i,o]))},n.prototype.getComponentForPlugin=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n,t]))},n.prototype.getPluginFiles=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getPluginFiles",[e,n,t,i]))},n.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},n.prototype.getPluginSizeForCopy=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getSizeForCopy",[e,n]))},n.prototype.getPluginSizeForEdit=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getSizeForEdit",[e,n,t,i]))},n.prototype.hasPluginDataChanged=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDataChanged",[e,n,t,i]))},n.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},n.prototype.isPluginSupportedForEdit=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e,"isEnabledForEdit"))},n.prototype.prefetch=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prefetch",[e,n,t,i]))},n.prototype.preparePluginSubmissionData=function(e,n,t,i,o,r,l,s){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareSubmissionData",[e,n,t,i,o,r,l,s]))},n.prototype.preparePluginSyncData=function(e,n,t,i,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareSyncData",[e,n,t,i,o,r]))},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=(t(545),function(e){function n(n,t,i,o){var r=e.call(this,"CoreBlockDelegate",n,t,i)||this;return r.defaultHandler=o,r.handlerNameProperty="blockName",r.featurePrefix="CoreBlockDelegate_",r}return Object(i.__extends)(n,e),n.prototype.getBlockDisplayData=function(e,n,t,i){return Promise.resolve(this.executeFunctionOnEnabled(n.name,"getDisplayData",[e,n]))},n.prototype.hasSupportedBlock=function(e){var n=this;return!!(e=e||[]).find(function(e){return n.isBlockSupported(e.name)})},n.prototype.isBlockSupported=function(e){return this.hasHandler(e,!0)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(207);var i=function(){function e(e,n,t,i,o,r,l,s){this.appProvider=e,this.sitesProvider=n,this.groupsProvider=t,this.filepoolProvider=i,this.userProvider=o,this.translate=r,this.utils=l,this.forumOffline=s,this.ROOT_CACHE_KEY="mmaModForum:"}return n=e,e.prototype.getCanAddDiscussionCacheKey=function(e,n){return this.getCommonCanAddDiscussionCacheKey(e)+":"+n},e.prototype.getCommonCanAddDiscussionCacheKey=function(e){return this.ROOT_CACHE_KEY+"canadddiscussion:"+e},e.prototype.getForumDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"forum:"+e},e.prototype.getDiscussionPostsCacheKey=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},e.prototype.getDiscussionsListCacheKey=function(e){return this.ROOT_CACHE_KEY+"discussions:"+e},e.prototype.addNewDiscussion=function(e,n,t,i,o,r,l,s,a,u){var c=this;s=s||this.sitesProvider.getCurrentSiteId();var d=function(){return c.forumOffline.addNewDiscussion(e,n,t,i,o,r,l,a,s).then(function(){return!1})};return(a?this.forumOffline.deleteNewDiscussion(e,a,s):Promise.resolve()).then(function(){return!c.appProvider.isOnline()&&u?d():c.addNewDiscussionOnline(e,i,o,r,l,s).then(function(e){return e}).catch(function(e){return!u||c.utils.isWebServiceError(e)?Promise.reject(e):d()})})},e.prototype.addNewDiscussionOnline=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={forumid:e,subject:n,message:t,options:l.utils.objectToArrayOfObjects(i,"name","value")};return o&&(s.groupid=o),r.write("mod_forum_add_discussion",s).then(function(e){return e&&e.discussionid?e.discussionid:Promise.reject(l.utils.createFakeWSError(""))})})},e.prototype.canAddDiscussion=function(e,n,t){var i={forumid:e,groupid:n},o={cacheKey:this.getCanAddDiscussionCacheKey(e,n)};return this.sitesProvider.getSite(t).then(function(e){return e.read("mod_forum_can_add_discussion",i,o).then(function(e){return e?(void 0===e.canpindiscussions&&(e.canpindiscussions=!1),void 0===e.cancreateattachment&&(e.cancreateattachment=!0),e):Promise.reject(null)})})},e.prototype.canAddDiscussionToAll=function(e){return this.canAddDiscussion(e,-1)},e.prototype.extractStartingPost=function(e){for(var n=e.length-1;n>=0;n--)if(0==e[n].parent)return e.splice(n,1).pop()},e.prototype.isAllParticipantsFixed=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan(["3.1.5","3.2.2"])},e.prototype.formatDiscussionsGroups=function(e,n){var t=this;return n=this.utils.clone(n),this.groupsProvider.getActivityAllowedGroups(e).then(function(e){var i=t.translate.instant("core.allparticipants"),o={};return e.forEach(function(e){o[e.id]=e}),n.forEach(function(e){if(-1===e.groupid)e.groupname=i;else{var n=o[e.groupid];n&&(e.groupname=n.name)}}),n}).catch(function(){return n})},e.prototype.getCourseForums=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseids:[e]},o={cacheKey:t.getForumDataCacheKey(e)};return n.read("mod_forum_get_forums_by_courses",i,o)})},e.prototype.getForum=function(e,n,t){return this.getCourseForums(e,t).then(function(e){var t=e.find(function(e){return e.cmid==n});return t||Promise.reject(null)})},e.prototype.getForumById=function(e,n,t){return this.getCourseForums(e,t).then(function(e){var t=e.find(function(e){return e.id==n});return t||Promise.reject(null)})},e.prototype.getDiscussionPosts=function(e,n){var t=this,i={discussionid:e},o={cacheKey:this.getDiscussionPostsCacheKey(e)};return this.sitesProvider.getSite(n).then(function(e){return e.read("mod_forum_get_forum_discussion_posts",i,o).then(function(e){return e?(t.storeUserData(e.posts),e.posts):Promise.reject(null)})})},e.prototype.sortDiscussionPosts=function(e,n){e.sort(function(e,t){return e=parseInt(e.created,10),t=parseInt(t.created,10),"ASC"==n?e-t:t-e})},e.prototype.getDiscussions=function(e,t,i,o){var r=this;return void 0===t&&(t=0),this.sitesProvider.getSite(o).then(function(o){var l={forumid:e,sortby:"timemodified",sortdirection:"DESC",page:t,perpage:n.DISCUSSIONS_PER_PAGE},s={cacheKey:r.getDiscussionsListCacheKey(e)};return i&&(s.omitExpires=!0),o.read("mod_forum_get_forum_discussions_paginated",l,s).then(function(e){return e?(r.storeUserData(e.discussions),Promise.resolve({discussions:e.discussions,canLoadMore:e.discussions.length>=n.DISCUSSIONS_PER_PAGE})):Promise.reject(null)})})},e.prototype.getDiscussionsInPages=function(e,n,t,i,o){var r=this;void 0===t&&(t=-1),i=i||0;var l={discussions:[],error:!1};if(!t)return Promise.resolve(l);var s=function(i){return r.getDiscussions(e,i,n,o).then(function(e){return l.discussions=l.discussions.concat(e.discussions),t--,e.canLoadMore&&0!==t?s(i+1):l}).catch(function(){return l.error=!0,l})};return s(i)},e.prototype.invalidateCanAddDiscussion=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCommonCanAddDiscussionCacheKey(e))})},e.prototype.invalidateContent=function(e,n){var t=this;return this.getForum(n,e).then(function(e){return t.getDiscussionsInPages(e.id,!0).then(function(i){var o=[];return o.push(t.invalidateForumData(n)),o.push(t.invalidateDiscussionsList(e.id)),o.push(t.invalidateCanAddDiscussion(e.id)),i.discussions.forEach(function(e){o.push(t.invalidateDiscussionPosts(e.discussion))}),t.utils.allPromises(o)})})},e.prototype.invalidateDiscussionPosts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDiscussionPostsCacheKey(e))})},e.prototype.invalidateDiscussionsList=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDiscussionsListCacheKey(e))})},e.prototype.invalidateFiles=function(e){var t=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.invalidateForumData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getForumDataCacheKey(e))},e.prototype.logView=function(e){var n={forumid:e};return this.sitesProvider.getCurrentSite().write("mod_forum_view_forum",n)},e.prototype.logDiscussionView=function(e){var n={discussionid:e};return this.sitesProvider.getCurrentSite().write("mod_forum_view_forum_discussion",n)},e.prototype.replyPost=function(e,n,t,i,o,r,l,s,a,u){var c=this;a=a||this.sitesProvider.getCurrentSiteId();var d=function(){return t?c.forumOffline.replyPost(e,n,t,i,o,r,l,s,a).then(function(){return!1}):Promise.reject(c.translate.instant("core.networkerrormsg"))};return!this.appProvider.isOnline()&&u?d():this.forumOffline.deleteReply(e,a).then(function(){return c.replyPostOnline(e,r,l,s,a).then(function(){return!0}).catch(function(e){return u&&!c.utils.isWebServiceError(e)?d():Promise.reject(e)})})},e.prototype.replyPostOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={postid:e,subject:n,message:t,options:r.utils.objectToArrayOfObjects(i,"name","value")};return o.write("mod_forum_add_discussion_post",l).then(function(e){return e&&e.postid?e.postid:Promise.reject(r.utils.createFakeWSError(""))})})},e.prototype.storeUserData=function(e){var n={};e.forEach(function(e){var t=parseInt(e.userid);isNaN(t)||n[t]||(n[t]={id:t,fullname:e.userfullname,profileimageurl:e.userpictureurl});var i=parseInt(e.usermodified);isNaN(i)||n[i]||(n[i]={id:i,fullname:e.usermodifiedfullname,profileimageurl:e.usermodifiedpictureurl})}),this.userProvider.storeUsers(this.utils.objectToArray(n))},e.COMPONENT="mmaModForum",e.DISCUSSIONS_PER_PAGE=10,e.NEW_DISCUSSION_EVENT="addon_mod_forum_new_discussion",e.REPLY_DISCUSSION_EVENT="addon_mod_forum_reply_discussion",e.VIEW_DISCUSSION_EVENT="addon_mod_forum_view_discussion",e.MARK_READ_EVENT="addon_mod_forum_mark_read",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.sitesProvider=e,this.ROOT_CACHE_KEY="mmComments:"}return e.prototype.getCommentsCacheKey=function(e,n,t,i,o,r){return void 0===o&&(o=""),void 0===r&&(r=0),this.getCommentsPrefixCacheKey(e,n)+":"+t+":"+i+":"+o+":"+r},e.prototype.getCommentsPrefixCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"comments:"+e+":"+n},e.prototype.getComments=function(e,n,t,i,o,r,l){var s=this;return void 0===o&&(o=""),void 0===r&&(r=0),this.sitesProvider.getSite(l).then(function(l){var a={contextlevel:e,instanceid:n,component:t,itemid:i,area:o,page:r},u={cacheKey:s.getCommentsCacheKey(e,n,t,i,o,r)};return l.read("core_comment_get_comments",a,u).then(function(e){return e.comments?e.comments:Promise.reject(null)})})},e.prototype.invalidateCommentsData=function(e,n,t,i,o,r,l){var s=this;return void 0===o&&(o=""),void 0===r&&(r=0),this.sitesProvider.getSite(l).then(function(l){return l.invalidateWsCacheForKey(s.getCommentsCacheKey(e,n,t,i,o,r))})},e.prototype.invalidateCommentsByInstance=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(i.getCommentsPrefixCacheKey(e,n))})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),t(138),function(){function e(e,n,t,i,r,l,s){this.compileProvider=e,this.cdr=n,this.navCtrl=i,this.domUtils=l,this.utils=s,this.extraImports=[],this.extraProviders=[],this.created=new o.r,this.element=t.nativeElement,this.differ=r.find([]).create()}return e.prototype.ngDoCheck=function(){if(this.componentInstance){var e=this.differ.diff(this.jsData);e&&(this.setInputData(),this.componentInstance.ngOnChanges&&this.componentInstance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},e.prototype.ngOnChanges=function(e){var n=this;(e.text||e.javascript||e.forceCompile&&this.utils.isTrueOrOne(this.forceCompile))&&this.text&&this.compileProvider.createAndCompileComponent(this.text,this.getComponentClass(),this.extraImports).then(function(e){n.componentRef&&n.componentRef.destroy(),e&&(n.componentRef=n.container.createComponent(e),n.created.emit(n.componentRef.instance)),n.loaded=!0}).catch(function(e){n.domUtils.showErrorModal(e),n.loaded=!0})},e.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},e.prototype.getComponentClass=function(){var e=this;return function(){function n(){e.componentInstance=this,this.dataObject={},this.dataArray=[],e.compileProvider.injectLibraries(this,e.extraProviders),this.ChangeDetectorRef=e.cdr,this.NavController=e.navCtrl,this.componentContainer=e.element,e.setInputData()}return n.prototype.ngOnInit=function(){e.javascript&&e.compileProvider.executeJavascript(this,e.javascript)},n.prototype.ngAfterContentInit=function(){},n.prototype.ngAfterViewInit=function(){},n.prototype.ngOnDestroy=function(){},n}()},e.prototype.setInputData=function(){if(this.componentInstance)for(var e in this.jsData)this.componentInstance[e]=this.jsData[e]},e=Object(i.__decorate)([Object(i.__param)(3,Object(o.E)())],e)}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var i=t(5),o=t(11),r=t(123),l=function(){function e(e,n,t){this.injector=t,this.logger=e.getInstance(n),this.questionHelper=t.get(r.a),this.domUtils=t.get(i.a),this.textUtils=t.get(o.a)}return e.prototype.initCalculatedComponent=function(){var e=this.initInputTextComponent();if(e){var n={},t=e.querySelector("select[name*=unit]"),i=t&&Array.from(t.querySelectorAll("option"));if(t&&i&&i.length){n.id=t.id,n.name=t.name,n.disabled=t.disabled,n.options=[];for(var o in i){var r=i[o];if(void 0===r.value)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var l={value:r.value,label:r.innerHTML};r.selected&&(n.selected=l.value),n.options.push(l)}n.selected||(n.selected=n.options[0].value);var s=e.querySelector('label[for="'+t.id+'"]');n.accessibilityLabel=s&&s.innerHTML,this.question.select=n;var a=e.querySelector('input[type="text"][name*=answer]');return this.question.selectFirst=e.innerHTML.indexOf(a.outerHTML)>e.innerHTML.indexOf(t.outerHTML),e}var u=Array.from(e.querySelectorAll('input[type="radio"]'));if(!u.length)return e;this.question.options=[];for(var o in u){var c=u[o],d=e.querySelector('label[for="'+(l={id:c.id,name:c.name,value:c.value,checked:c.checked,disabled:c.disabled}).id+'"]');if(this.question.optionsName=l.name,!d||(l.text=d.innerText,void 0===l.name||void 0===l.value||void 0===l.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,l.name),this.questionHelper.showComponentError(this.onAbort);c.checked&&(this.question.unit=l.value),this.question.options.push(l)}var f=e.querySelector('input[type="text"][name*=answer]');this.question.optionsFirst=e.innerHTML.indexOf(f.outerHTML)>e.innerHTML.indexOf(u[0].outerHTML)}},e.prototype.initComponent=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html);return this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),void 0===this.question.text?(this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort)):e},e.prototype.initEssayComponent=function(){var e=this.initComponent();if(e){var n=e.querySelector("textarea[name*=_answer]");if(this.question.allowsAttachments=!!e.querySelector("div[id*=filemanager]"),this.question.isMonospaced=!!e.querySelector(".qtype_essay_monospaced"),this.question.isPlainText=this.question.isMonospaced||!!e.querySelector(".qtype_essay_plain"),this.question.hasDraftFiles=this.questionHelper.hasDraftFileUrls(e.innerHTML),n){var t=e.querySelector('input[type="hidden"][name*=answerformat]'),i=n.innerHTML;this.question.textarea={id:n.id,name:n.name,text:i?this.textUtils.decodeHTML(i):""},t&&(this.question.formatInput={name:t.name,value:t.value})}else this.question.answer=this.domUtils.getContentsOfElement(e,".qtype_essay_response"),this.question.attachments=this.questionHelper.getQuestionAttachmentsFromHtml(this.domUtils.getContentsOfElement(e,".attachments"))}},e.prototype.initOriginalTextComponent=function(e){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var n=this.domUtils.convertToElement(this.question.html),t=n.querySelector(e);if(!t)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.domUtils.removeElement(t,"input[name*=sequencecheck]"),this.domUtils.removeElement(t,".validationerror"),this.questionHelper.replaceCorrectnessClasses(n),this.questionHelper.replaceFeedbackClasses(n),this.questionHelper.treatCorrectnessIcons(n),this.question.text=t.innerHTML},e.prototype.initInputTextComponent=function(){var e=this.initComponent();if(e){var n=e.querySelector('input[type="text"][name*=answer]');if(!n)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.input={id:n.id,name:n.name,value:n.value,readOnly:n.readOnly},this.question.input.correctClass=n.classList.contains("incorrect")?"core-question-incorrect":n.classList.contains("correct")?"core-question-correct":n.classList.contains("partiallycorrect")?"core-question-partiallycorrect":""}return e},e.prototype.initMatchComponent=function(){var e=this.initComponent();if(e){var n=Array.from(e.querySelectorAll("table.answer tr"));if(!n||!n.length)return this.logger.warn("Aborting because couldn't find any row.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.rows=[];for(var t in n){var i=n[t],o={},r=Array.from(i.querySelectorAll("td"));if(!r||r.length<2)return this.logger.warn("Aborting because couldn't the right columns.",this.question.name),this.questionHelper.showComponentError(this.onAbort);o.text=r[0].innerHTML;var l=r[1].querySelector("select"),s=Array.from(r[1].querySelectorAll("option"));if(!l||!s||!s.length)return this.logger.warn("Aborting because couldn't find select or options.",this.question.name),this.questionHelper.showComponentError(this.onAbort);o.id=l.id,o.name=l.name,o.disabled=l.disabled,o.selected=!1,o.options=[],r[1].className.indexOf("incorrect")>=0?o.isCorrect=0:r[1].className.indexOf("correct")>=0&&(o.isCorrect=1);for(var a in s){var u=s[a];if(void 0===u.value)return this.logger.warn("Aborting because couldn't find the value of an option.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var c={value:u.value,label:u.innerHTML,selected:u.selected};c.selected&&(o.selected=c.value),o.options.push(c)}var d=r[1].querySelector("label.accesshide");o.accessibilityLabel=d&&d.innerHTML,this.question.rows.push(o)}this.question.loaded=!0}return e},e.prototype.initMultichoiceComponent=function(){var e=this.initComponent();if(e){this.question.prompt=this.domUtils.getContentsOfElement(e,".prompt");var n=Array.from(e.querySelectorAll('input[type="radio"]'));if(!(n&&n.length||(this.question.multi=!0,(n=Array.from(e.querySelectorAll('input[type="checkbox"]')))&&n.length)))return this.logger.warn("Aborting because of no radio and checkbox found.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.options=[];for(var t in n){var i=n[t],o={id:i.id,name:i.name,value:i.value,checked:i.checked,disabled:i.disabled},r=i.parentElement;this.question.optionsName=o.name;var l=e.querySelector('label[for="'+o.id+'"]');if(!l||(o.text=l.innerHTML,void 0===o.name||void 0===o.value||void 0===o.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,o.name),this.questionHelper.showComponentError(this.onAbort);if(i.checked&&(this.question.multi||(this.question.singleChoiceModel=o.value),r)){r&&r.className.indexOf("incorrect")>=0?o.isCorrect=0:r&&r.className.indexOf("correct")>=0&&(o.isCorrect=1);var s=r.querySelector(".specificfeedback");s&&(o.feedback=s.innerHTML)}this.question.options.push(o)}}return e},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(1),o=t(40),r=function(){function e(e,n,t,o,r,l,s,a,u){this.sitesProvider=e,this.utils=n,this.domUtils=t,this.filepoolProvider=o,this.appProvider=r,this.fileHelper=l,this.mimeUtils=s,this.eventsProvider=a,this.textUtils=u,this.canDownload=!0,this.showSize=!0,this.showTime=!0,this.onDelete=new i.r}return e.prototype.ngOnInit=function(){var e=this;this.canDelete=this.utils.isTrueOrOne(this.canDelete),this.alwaysDownload=this.utils.isTrueOrOne(this.alwaysDownload),this.canDownload=this.utils.isTrueOrOne(this.canDownload),this.fileUrl=this.fileHelper.getFileUrl(this.file),this.timemodified=this.fileHelper.getFileTimemodified(this.file),this.siteId=this.sitesProvider.getCurrentSiteId(),this.fileSize=this.file.filesize,this.fileName=this.file.filename,this.utils.isTrueOrOne(this.showSize)&&this.fileSize>=0&&(this.fileSizeReadable=this.textUtils.bytesToSize(this.fileSize,2)),this.showTime=this.utils.isTrueOrOne(this.showTime)&&this.timemodified>0,this.file.isexternalfile&&(this.alwaysDownload=!0),this.fileIcon=this.mimeUtils.getFileIcon(this.file.filename),this.canDownload&&(this.calculateState(),this.filepoolProvider.getFileEventNameByUrl(this.siteId,this.fileUrl).then(function(n){e.observer=e.eventsProvider.on(n,function(){e.calculateState()})}))},e.prototype.calculateState=function(){var e=this;return this.filepoolProvider.getFileStateByUrl(this.siteId,this.fileUrl,this.timemodified).then(function(n){var t=e.sitesProvider.getCurrentSite().canDownloadFiles();e.state=n,e.isDownloaded=n===o.a.DOWNLOADED||n===o.a.OUTDATED,e.isDownloading=t&&n===o.a.DOWNLOADING,e.showDownload=t&&(n===o.a.NOT_DOWNLOADED||n===o.a.OUTDATED||e.alwaysDownload&&n===o.a.DOWNLOADED)})},e.prototype.openFile=function(){var e=this;return this.fileHelper.downloadAndOpenFile(this.file,this.component,this.componentId,this.state,function(n){n&&n.calculating&&(e.isDownloading=!0)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)})},e.prototype.download=function(e,n){var t=this;e.preventDefault(),e.stopPropagation();this.isDownloading&&!n||(this.canDownload?this.appProvider.isOnline()||n&&(!n||this.isDownloaded)?n?this.openFile().catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}):(this.fileSize?this.domUtils.confirmDownloadSize({size:this.fileSize,total:!0}):Promise.resolve()).then(function(){return t.filepoolProvider.invalidateFileByUrl(t.siteId,t.fileUrl).finally(function(){t.isDownloading=!0,t.filepoolProvider.addToQueueByUrl(t.siteId,t.fileUrl,t.component,t.componentId,t.timemodified,void 0,void 0,0,t.file).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0),t.calculateState()})})}).catch(function(){}):this.domUtils.showErrorModal("core.networkerrormsg",!0):this.file.toURL?this.utils.openFile(this.file.toURL()):this.fileUrl&&(0===this.fileUrl.indexOf("http")?this.utils.openOnlineFile(this.fileUrl):this.utils.openFile(this.fileUrl)))},e.prototype.delete=function(e){e.preventDefault(),e.stopPropagation(),this.canDelete&&this.onDelete.emit()},e.prototype.ngOnDestroy=function(){this.observer&&this.observer.off()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(150),o=(t(163),t(194),function(){function e(e,n,t,i,o,r,l,s,a){this.translate=e,this.fileProvider=n,this.uploaderProvider=t,this.sitesProvider=i,this.textUtils=o,this.utils=r,this.workshopProvider=l,this.workshopOffline=s,this.strategyDelegate=a}return e.prototype.getTask=function(e,n){for(var t in e)if(e[t].code==n)return e[t];return!1},e.prototype.isTaskDone=function(e,n){var t=this.getTask(e,n);return!t||t.completed},e.prototype.canSubmit=function(e,n,t){var o=e.useexamples&&e.examplesmode==i.a.EXAMPLES_BEFORE_SUBMISSION,r=n.canmanageexamples||e.examplesmode==i.a.EXAMPLES_VOLUNTARY||this.isTaskDone(t,"examples");return e.phase>i.a.PHASE_SETUP&&n.cansubmit&&(!o||r)},e.prototype.canAssess=function(e,n){return!(e.useexamples&&e.examplesmode==i.a.EXAMPLES_BEFORE_ASSESSMENT)||n.canmanageexamples},e.prototype.getUserSubmission=function(e,n){var t=this;return void 0===n&&(n=0),this.workshopProvider.getSubmissions(e).then(function(e){n=n||t.sitesProvider.getCurrentSiteUserId();for(var i in e)if(e[i].authorid==n)return e[i];return!1})},e.prototype.getSubmissionById=function(e,n,t){var i=this;return this.workshopProvider.getSubmission(e,n,t).catch(function(){return i.workshopProvider.getSubmissions(e,void 0,void 0,void 0,void 0,t).then(function(e){for(var t in e)if(e[t].id==n)return e[t];return!1})})},e.prototype.getReviewerAssessmentById=function(e,n,t,i){var o=this;return void 0===t&&(t=0),this.workshopProvider.getAssessment(e,n,i).catch(function(){return o.workshopProvider.getReviewerAssessments(e,t,void 0,void 0,i).then(function(e){for(var t in e)if(e[t].id==n)return e[t];return!1})}).then(function(t){return!!t&&o.workshopProvider.getAssessmentForm(e,n,void 0,void 0,void 0,i).then(function(e){return t.form=e,t})})},e.prototype.getReviewerAssessments=function(e,n,t,i,o){var r=this;return void 0===n&&(n=0),void 0===t&&(t=!1),void 0===i&&(i=!1),o=o||this.sitesProvider.getCurrentSiteId(),this.workshopProvider.getReviewerAssessments(e,n,t,i,o).then(function(n){var t=n.map(function(n){return r.getSubmissionById(e,n.submissionid,o).then(function(e){n.submission=e})});return Promise.all(t).then(function(){return n})})},e.prototype.deleteSubmissionStoredFiles=function(e,n,t,i){var o=this;return this.workshopOffline.getSubmissionFolder(e,n,t,i).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},e.prototype.storeSubmissionFiles=function(e,n,t,i,o){var r=this;return this.workshopOffline.getSubmissionFolder(e,n,t,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,i)})},e.prototype.uploadOrStoreSubmissionFiles=function(e,n,t,o,r,l){return r?this.storeSubmissionFiles(e,n,o,t,l):this.uploaderProvider.uploadOrReuploadFiles(t,i.a.COMPONENT,e,l)},e.prototype.getStoredSubmissionFiles=function(e,n,t,i){var o=this;return this.workshopOffline.getSubmissionFolder(e,n,t,i).then(function(e){return o.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.getSubmissionFilesFromOfflineFilesObject=function(e,n,t,i,o){var r=this;return this.workshopOffline.getSubmissionFolder(n,t,i,o).then(function(n){return r.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,n)})},e.prototype.deleteAssessmentStoredFiles=function(e,n,t){var i=this;return this.workshopOffline.getAssessmentFolder(e,n,t).then(function(e){return i.fileProvider.removeDir(e).catch(function(){})})},e.prototype.storeAssessmentFiles=function(e,n,t,i){var o=this;return this.workshopOffline.getAssessmentFolder(e,n,i).then(function(e){return o.uploaderProvider.storeFilesToUpload(e,t)})},e.prototype.uploadOrStoreAssessmentFiles=function(e,n,t,o,r){return o?this.storeAssessmentFiles(e,n,t,r):this.uploaderProvider.uploadOrReuploadFiles(t,i.a.COMPONENT,e,r)},e.prototype.getStoredAssessmentFiles=function(e,n,t){var i=this;return this.workshopOffline.getAssessmentFolder(e,n,t).then(function(e){return i.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.getAssessmentFilesFromOfflineFilesObject=function(e,n,t,i){var o=this;return this.workshopOffline.getAssessmentFolder(n,t,i).then(function(n){return o.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,n)})},e.prototype.filterSubmissionActions=function(e,n){return e.filter(function(e){return n?e.submissionid==n:e.submissionid<0})},e.prototype.applyOfflineData=function(e,n){n.length&&!e&&(e={});var t,i=!0,o=!1;if(n.forEach(function(n){switch(n.action){case"add":e.id=n.submissionid,i=!1;case"update":e.title=n.title,e.content=n.content,e.title=n.title,e.courseid=n.courseid,e.submissionmodified=parseInt(n.timemodified,10)/1e3,e.offline=!0,o=n.attachmentsid,t=n.workshopid;break;case"delete":e.deleted=!0,e.submissionmodified=parseInt(n.timemodified,10)/1e3}}),n.length){if(o)return this.getSubmissionFilesFromOfflineFilesObject(o,t,e.id,i).then(function(n){return e.attachmentfiles=n,e});e.attachmentfiles=[]}return Promise.resolve(e)},e.prototype.prepareAssessmentData=function(e,n,t,i,o,r){return 2!=e.overallfeedbackmode||t?this.strategyDelegate.prepareAssessmentData(e.strategy,n,o).then(function(e){return e.feedbackauthor=t,e.feedbackauthorattachmentsid=r||0,e.nodims=o.dimenssionscount,e}):Promise.reject({feedbackauthor:this.translate.instant("core.err_required")})},e.prototype.realGradeValueHelper=function(e,n,t){return null==e?null:0==n?"0":(e=this.textUtils.roundToDecimals(n*e/100,t),this.utils.formatFloat(e))},e.prototype.realGradeValue=function(e,n){return n.grade=this.realGradeValueHelper(n.grade,e.grade,e.gradedecimals),n.gradinggrade=this.realGradeValueHelper(n.gradinggrade,e.gradinggrade,e.gradedecimals),n.gradinggradeover=this.realGradeValueHelper(n.gradinggradeover,e.gradinggrade,e.gradedecimals),n},e.prototype.showGrade=function(e){return void 0!==e&&null!==e},e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(10);var i=function(){function e(e){this.TABLE_NAME="core_config",this.tableSchema={name:this.TABLE_NAME,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]},this.appDB=e.getDB(),this.appDB.createTableFromSchema(this.tableSchema)}return e.prototype.delete=function(e){return this.appDB.deleteRecords(this.TABLE_NAME,{name:e})},e.prototype.get=function(e,n){return this.appDB.getRecord(this.TABLE_NAME,{name:e}).then(function(e){return e.value}).catch(function(e){return void 0!==n?n:Promise.reject(e)})},e.prototype.set=function(e,n){return this.appDB.insertRecord(this.TABLE_NAME,{name:e,value:n})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(539),function(e){function n(n,t,i,o){var r=e.call(this,"CoreCoursesCourseFormatDelegate",n,t,i)||this;return r.sitesProvider=t,r.defaultHandler=o,r.featurePrefix="CoreCourseFormatDelegate_",r.handlerNameProperty="format",r}return Object(i.__extends)(n,e),n.prototype.canViewAllSections=function(e){return this.executeFunctionOnEnabled(e.format,"canViewAllSections",[e])},n.prototype.displayEnableDownload=function(e){return this.executeFunctionOnEnabled(e.format,"displayEnableDownload",[e])},n.prototype.displayRefresher=function(e,n){return this.executeFunctionOnEnabled(e.format,"displayRefresher",[e,n])},n.prototype.displaySectionSelector=function(e){return this.executeFunctionOnEnabled(e.format,"displaySectionSelector",[e])},n.prototype.getAllSectionsComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getAllSectionsComponent",[e,n])).catch(function(e){t.logger.error("Error getting all sections component",e)})},n.prototype.getCourseFormatComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getCourseFormatComponent",[e,n])).catch(function(e){t.logger.error("Error getting course format component",e)})},n.prototype.getCourseSummaryComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getCourseSummaryComponent",[e,n])).catch(function(e){t.logger.error("Error getting course summary component",e)})},n.prototype.getCourseTitle=function(e,n){return this.executeFunctionOnEnabled(e.format,"getCourseTitle",[e,n])},n.prototype.getCurrentSection=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"getCurrentSection",[e,n])).catch(function(){return n[0]})},n.prototype.getSectionSelectorComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getSectionSelectorComponent",[e,n])).catch(function(e){t.logger.error("Error getting section selector component",e)})},n.prototype.getSingleSectionComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getSingleSectionComponent",[e,n])).catch(function(e){t.logger.error("Error getting single section component",e)})},n.prototype.invalidateData=function(e,n){return this.executeFunctionOnEnabled(e.format,"invalidateData",[e,n])},n.prototype.openCourse=function(e,n){return this.executeFunctionOnEnabled(n.format,"openCourse",[e,n])},n.prototype.shouldRefreshWhenCompletionChanges=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"shouldRefreshWhenCompletionChanges",[e]))},n}(t(102).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(13),r=t(102),l=t(156),s=(t.n(l),function(e){function n(n,t,i){var r=e.call(this,"CoreMainMenuDelegate",n,t,i)||this;return r.loggerProvider=n,r.sitesProvider=t,r.eventsProvider=i,r.loaded=!1,r.siteHandlers=new l.BehaviorSubject([]),r.featurePrefix="CoreMainMenuDelegate_",i.on(o.a.LOGOUT,r.clearSiteHandlers.bind(r)),r}return Object(i.__extends)(n,e),n.prototype.areHandlersLoaded=function(){return this.loaded},n.prototype.clearSiteHandlers=function(){this.loaded=!1,this.siteHandlers.next([])},n.prototype.getHandlers=function(){return this.siteHandlers},n.prototype.updateData=function(){var e=[];for(var n in this.enabledHandlers){var t=this.enabledHandlers[n],i=t.getDisplayData();e.push({name:n,data:i,priority:t.priority})}e.sort(function(e,n){return n.priority-e.priority});var o=e.map(function(e){return e.data.name=e.name,e.data.priority=e.priority,e.data});this.loaded=!0,this.siteHandlers.next(o)},n}(r.a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(51);var i=function(){function e(e,n,t){this.coursesProvider=e,this.utils=n,this.courseCompletionProvider=t}return e.prototype.loadCourseExtraInfo=function(e,n){n?(e.displayname=n.displayname,e.courseImage=!(!n.overviewfiles||!n.overviewfiles[0])&&n.overviewfiles[0].fileurl):(delete e.displayname,e.courseImage=!1)},e.prototype.loadCoursesExtraInfo=function(e){var n=this;if(e[0]&&void 0!==e[0].overviewfiles&&void 0!==e[0].displayname)return e.forEach(function(e){n.loadCourseExtraInfo(e,e)}),Promise.resolve();if(!e.length||!this.coursesProvider.isGetCoursesByFieldAvailable())return Promise.resolve();var t=e.map(function(e){return e.id}).join(",");return this.coursesProvider.getCoursesByField("ids",t).then(function(t){t=n.utils.arrayToObject(t,"id"),e.forEach(function(e){n.loadCourseExtraInfo(e,t[e.id])})})},e.prototype.getUserCoursesWithOptions=function(e,n,t){var i=this;return void 0===e&&(e="fullname"),void 0===n&&(n=0),this.coursesProvider.getUserCourses().then(function(o){var r=[],l=o.map(function(e){return e.id});return i.coursesProvider.canGetAdminAndNavOptions()&&r.push(i.coursesProvider.getCoursesAdminAndNavOptions(l).then(function(e){o.forEach(function(n){n.navOptions=e.navOptions[n.id],n.admOptions=e.admOptions[n.id]})})),r.push(i.loadCoursesExtraInfo(o)),Promise.all(r).then(function(){if(o.length<=0)return[];switch(t){case"isfavourite":o=o.filter(function(e){return!!e.isfavourite})}switch(e){case"fullname":o.sort(function(e,n){var t=e.fullname.toLowerCase(),i=n.fullname.toLowerCase();return t.localeCompare(i)});break;case"lastaccess":o.sort(function(e,n){return n.lastaccess-e.lastaccess});break;case"timemodified":o.sort(function(e,n){return n.timemodified-e.timemodified})}return o=n>0?o.slice(0,n):o,Promise.all(o.map(function(e){return void 0!==e.completed?Promise.resolve(e):void 0!==e.enablecompletion&&0==e.enablecompletion?Promise.resolve(e):i.courseCompletionProvider.getCompletion(e.id).catch(function(){}).then(function(n){return e.completed=n&&n.completed,e})}))})})},e}()},,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9);var i=t(45),o=function(){function e(e,n,t,o,r){var l=this;this.navCtrl=e,this.sitesProvider=n,this.utils=t,this.appProvider=o,this.linkProfile=!0,this.checkOnline=!1,this.timetoshowusers=3e5,this.myUser=!1,this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.pictureObs=r.on(i.a.PROFILE_PICTURE_UPDATED,function(e){e.userId==l.userId&&(l.profileUrl=e.picture)},this.sitesProvider.getCurrentSiteId())}return e.prototype.ngOnInit=function(){this.setFields()},e.prototype.ngOnChanges=function(e){e&&this.setFields()},e.prototype.setFields=function(){var e=this.profileUrl||this.user&&(this.user.profileimageurl||this.user.userprofileimageurl||this.user.userpictureurl||this.user.profileimageurlsmall);"string"==typeof e&&(this.profileUrl=e),this.fullname=this.fullname||this.user&&(this.user.fullname||this.user.userfullname),this.userId=this.userId||this.user&&(this.user.userid||this.user.id),this.courseId=this.courseId||this.user&&this.user.courseid,this.myUser=this.userId&&this.userId==this.currentUserId},e.prototype.isOnline=function(){if(this.myUser||this.utils.isFalseOrZero(this.user.isonline))return!1;if(this.user.lastaccess){var e=(new Date).getTime()-this.timetoshowusers;return 1e3*this.user.lastaccess>=e}return this.user.isonline&&this.appProvider.isOnline()},e.prototype.gotoProfile=function(e){this.linkProfile&&this.userId&&(e.preventDefault(),e.stopPropagation(),this.navCtrl.push("CoreUserProfilePage",{userId:this.userId,courseId:this.courseId}))},e.prototype.ngOnDestroy=function(){this.pictureObs&&this.pictureObs.off()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),function(){function e(e,n,t,i,o,r,l){this.factoryResolver=n,this.navCtrl=i,this.cdr=o,this.element=r,this.domUtils=l,this.logger=e.getInstance("CoreDynamicComponent"),this.differ=t.find([]).create()}return Object.defineProperty(e.prototype,"dynamicComponent",{set:function(e){this.container=e,this.createComponent()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.createComponent()},e.prototype.ngOnChanges=function(e){e.component&&!this.component?(this.lastComponent=void 0,this.instance=void 0,this.container&&this.container.clear()):!e.component||this.instance&&this.component==this.lastComponent||this.createComponent()},e.prototype.ngDoCheck=function(){if(this.instance){var e=this.differ.diff(this.data);e&&(this.setInputData(),this.instance.ngOnChanges&&this.instance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},e.prototype.callComponentFunction=function(e,n){if(this.instance&&"function"==typeof this.instance[e])return this.instance[e].apply(this.instance,n)},e.prototype.createComponent=function(){if(this.lastComponent=this.component,!this.component||!this.container)return!1;if(this.instance)return!0;if(this.component instanceof o.o)this.container.insert(this.component.hostView),this.instance=this.component.instance,this.instance.ChangeDetectorRef=this.cdr,this.instance.NavController=this.navCtrl,this.instance.componentContainer=this.element.nativeElement;else try{var e=this.factoryResolver.resolveComponentFactory(this.component),n=this.container.createComponent(e);this.instance=n.instance}catch(e){return this.logger.error("Error creating component",e),!1}return this.setInputData(),!0},e.prototype.setInputData=function(){for(var e in this.data)this.instance[e]=this.data[e]},e=Object(i.__decorate)([Object(i.__param)(3,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(137)),l=(t(35),function(){function e(e,n,t,i,o,r,l,s,a){this.domUtils=n,this.utils=t,this.sitesProvider=i,this.urlUtils=o,this.contentLinksHelper=r,this.navCtrl=l,this.content=s,this.svComponent=a,this.autoLogin="check",this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.inApp=this.utils.isTrueOrOne(this.inApp);var n=this.navCtrl;!this.svComponent||this.navCtrl&&this.navCtrl!==this.svComponent.getDetailsNav()||(n=this.svComponent.getMasterNav()),this.element.addEventListener("click",function(t){if(!t.defaultPrevented){var i=e.element.getAttribute("href");i&&(t.preventDefault(),t.stopPropagation(),e.utils.isTrueOrOne(e.capture)?e.contentLinksHelper.handleLink(i,void 0,n).then(function(n){n||e.navigate(i)}):e.navigate(i))}})},e.prototype.navigate=function(e){var n=this,t=r.a.customurlscheme+"://link=";0===e.indexOf("cdvfile://")||0===e.indexOf("file://")||0===e.indexOf("filesystem:")?this.utils.openFile(e).catch(function(e){n.domUtils.showErrorModal(e)}):"#"==e.charAt(0)?"/"==(e=e.substr(1)).charAt(0)||this.domUtils.scrollToElementBySelector(this.content,"#"+e+", [name='"+e+"']"):0===e.indexOf(t)?(e=t+encodeURIComponent(e.replace(t,"")),this.utils.openInBrowser(e)):this.sitesProvider.isLoggedIn()?(this.urlUtils.isAbsoluteURL(e)||(e="/"==e.charAt(0)?this.sitesProvider.getCurrentSite().getURL()+e:this.sitesProvider.getCurrentSite().getURL()+"/"+e),"yes"==this.autoLogin?this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLogin(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(e):"no"==this.autoLogin?this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e):this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLoginIfSameSite(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)):this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e)},e=Object(i.__decorate)([Object(i.__param)(6,Object(o.E)()),Object(i.__param)(7,Object(o.E)()),Object(i.__param)(8,Object(o.E)())],e)}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=function(e){function n(n,t,i){var o=e.call(this,"CoreUserProfileFieldDelegate",n,t,i)||this;return o.loggerProvider=n,o.sitesProvider=t,o.eventsProvider=i,o.handlerNameProperty="type",o}return Object(i.__extends)(n,e),n.prototype.getComponent=function(e,n,t){var i,o=this,r=n.type||n.datatype;return i=t?this.executeFunction(r,"getComponent",[e]):this.executeFunctionOnEnabled(r,"getComponent",[e]),Promise.resolve(i).catch(function(e){o.logger.error("Error getting component for field",r,e)})},n.prototype.getDataForField=function(e,n,t,i){var o=e.type||e.datatype,r=this.getHandler(o,!n);if(r){var l="profile_field_"+e.shortname;if(r.getData)return Promise.resolve(r.getData(e,n,t,i));if(e.shortname&&void 0!==i[l])return Promise.resolve({type:o,name:l,value:i[l]})}return Promise.reject(null)},n.prototype.getDataForFields=function(e,n,t,i){var o=this;void 0===n&&(n=!1),void 0===t&&(t="");var r=[],l=[];return e?(e.forEach(function(e){l.push(o.getDataForField(e,n,t,i).then(function(e){e&&r.push(e)}).catch(function(){}))}),Promise.all(l).then(function(){return r})):Promise.resolve([])},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(230);var i=function(){function e(e,n,t,i,o,r,l){this.appProvider=e,this.sitesProvider=n,this.filepoolProvider=t,this.translate=i,this.textUtils=o,this.utils=r,this.glossaryOffline=l,this.ROOT_CACHE_KEY="mmaModGlossary:"}return n=e,e.prototype.getCourseGlossariesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseGlossaries:"+e},e.prototype.getCourseGlossaries=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={courseids:[e]},o={cacheKey:t.getCourseGlossariesCacheKey(e)};return n.read("mod_glossary_get_glossaries_by_courses",i,o).then(function(e){return e.glossaries})})},e.prototype.invalidateCourseGlossaries=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i=t.getCourseGlossariesCacheKey(e);return n.invalidateWsCacheForKey(i)})},e.prototype.getEntriesByAuthorCacheKey=function(e,n,t,i){return this.ROOT_CACHE_KEY+"entriesByAuthor:"+e+":"+n+":"+t+":"+i},e.prototype.getEntriesByAuthor=function(e,n,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={id:e,letter:n,field:t,sort:i,from:o,limit:r},c={cacheKey:a.getEntriesByAuthorCacheKey(e,n,t,i),omitExpires:l};return s.read("mod_glossary_get_entries_by_author",u,c)})},e.prototype.invalidateEntriesByAuthor=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l=r.getEntriesByAuthorCacheKey(e,n,t,i);return o.invalidateWsCacheForKey(l)})},e.prototype.getEntriesByCategory=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={id:e,categoryid:n,from:t,limit:i},a={cacheKey:l.getEntriesByCategoryCacheKey(e,n),omitExpires:o};return r.read("mod_glossary_get_entries_by_category",s,a)})},e.prototype.invalidateEntriesByCategory=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o=i.getEntriesByCategoryCacheKey(e,n);return t.invalidateWsCacheForKey(o)})},e.prototype.getEntriesByCategoryCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"entriesByCategory:"+e+":"+n},e.prototype.getEntriesByDateCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"entriesByDate:"+e+":"+n+":"+t},e.prototype.getEntriesByDate=function(e,n,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={id:e,order:n,sort:t,from:i,limit:o},u={cacheKey:s.getEntriesByDateCacheKey(e,n,t),omitExpires:r};return l.read("mod_glossary_get_entries_by_date",a,u)})},e.prototype.invalidateEntriesByDate=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r=o.getEntriesByDateCacheKey(e,n,t);return i.invalidateWsCacheForKey(r)})},e.prototype.getEntriesByLetterCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"entriesByLetter:"+e+":"+n},e.prototype.getEntriesByLetter=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={id:e,letter:n,from:t,limit:i},a={cacheKey:l.getEntriesByLetterCacheKey(e,n),omitExpires:o};return r.read("mod_glossary_get_entries_by_letter",s,a)})},e.prototype.invalidateEntriesByLetter=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){var o=i.getEntriesByLetterCacheKey(e,n);return t.invalidateWsCacheForKey(o)})},e.prototype.getEntriesBySearchCacheKey=function(e,n,t,i,o){return this.ROOT_CACHE_KEY+"entriesBySearch:"+e+":"+t+":"+i+":"+o+":"+n},e.prototype.getEntriesBySearch=function(e,n,t,i,o,r,l,s,a){var u=this;return this.sitesProvider.getSite(a).then(function(a){var c={id:e,query:n,fullsearch:t,order:i,sort:o,from:r,limit:l},d={cacheKey:u.getEntriesBySearchCacheKey(e,n,t,i,o),omitExpires:s};return a.read("mod_glossary_get_entries_by_search",c,d)})},e.prototype.invalidateEntriesBySearch=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s=l.getEntriesBySearchCacheKey(e,n,t,i,o);return r.invalidateWsCacheForKey(s)})},e.prototype.getCategoriesCacheKey=function(e){return this.ROOT_CACHE_KEY+"categories:"+e},e.prototype.getAllCategories=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return i.getCategories(e,0,n.LIMIT_CATEGORIES,[],t)})},e.prototype.getCategories=function(e,n,t,i,o){var r=this,l={id:e,from:n,limit:t},s={cacheKey:this.getCategoriesCacheKey(e)};return o.read("mod_glossary_get_categories",l,s).then(function(l){i=i.concat(l.categories);return n+t<l.count?(n+=t,r.getCategories(e,n,t,i,o)):i})},e.prototype.invalidateCategories=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCategoriesCacheKey(e))})},e.prototype.getEntryCacheKey=function(e){return this.ROOT_CACHE_KEY+"getEntry:"+e},e.prototype.getEntry=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={id:e},o={cacheKey:t.getEntryCacheKey(e)};return n.read("mod_glossary_get_entry_by_id",i,o).then(function(e){return e&&e.entry?e.entry:Promise.reject(null)})})},e.prototype.fetchEntries=function(e,t,i,o,r,l){void 0===i&&(i=0),void 0===r&&(r=!1),o=o||n.LIMIT_ENTRIES,l=l||this.sitesProvider.getCurrentSiteId();var s=t.slice();return s.push(i),s.push(o),s.push(r),s.push(l),e.apply(this,s)},e.prototype.fetchAllEntries=function(e,t,i,o){var r=this;void 0===i&&(i=!1),o=o||this.sitesProvider.getCurrentSiteId();var l=[],s=n.LIMIT_ENTRIES,a=function(){return r.fetchEntries(e,t,l.length,s,i,o).then(function(e){return Array.prototype.push.apply(l,e.entries),l.length<e.count?a():l})};return a()},e.prototype.invalidateEntry=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getEntryCacheKey(e))})},e.prototype.invalidateEntries=function(e,n){var t=this,i=[];return e.forEach(function(e){i.push(t.getEntryCacheKey(e.id))}),this.sitesProvider.getSite(n).then(function(e){return e.invalidateMultipleWsCacheForKey(i)})},e.prototype.invalidateContent=function(e,n){var t=this;return this.getGlossary(n,e).then(function(e){return t.invalidateGlossaryEntries(e).finally(function(){return t.utils.allPromises([t.invalidateCourseGlossaries(n),t.invalidateCategories(e.id)])})})},e.prototype.invalidateGlossaryEntries=function(e,t){var i=this,o=[];return t||o.push(this.fetchAllEntries(this.getEntriesByLetter,[e.id,"ALL"],!0).then(function(e){return i.invalidateEntries(e)})),e.browsemodes.forEach(function(t){switch(t){case"letter":o.push(i.invalidateEntriesByLetter(e.id,"ALL"));break;case"cat":o.push(i.invalidateEntriesByCategory(e.id,n.SHOW_ALL_CATERGORIES));break;case"date":o.push(i.invalidateEntriesByDate(e.id,"CREATION","DESC")),o.push(i.invalidateEntriesByDate(e.id,"UPDATE","DESC"));break;case"author":o.push(i.invalidateEntriesByAuthor(e.id,"ALL","LASTNAME","ASC"))}}),this.utils.allPromises(o)},e.prototype.invalidateFiles=function(e,t){return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.getGlossary=function(e,n,t){return this.getCourseGlossaries(e,t).then(function(e){var t=e.find(function(e){return e.coursemodule==n});return t||Promise.reject(null)})},e.prototype.getGlossaryById=function(e,n,t){return this.getCourseGlossaries(e,t).then(function(e){var t=e.find(function(e){return e.id==n});return t||Promise.reject(null)})},e.prototype.addEntry=function(e,n,t,i,o,r,l,s,a,u,c){var d=this;s=s||this.sitesProvider.getCurrentSiteId();var f=function(){return(c?d.isConceptUsed(e,n,a&&a.timecreated,s):Promise.resolve(!1)).then(function(u){return u?Promise.reject(d.translate.instant("addon.mod_glossary.errconceptalreadyexists")):d.glossaryOffline.addNewEntry(e,n,t,i,r,o,l,s,void 0,a).then(function(){return!1})})};if(!this.appProvider.isOnline()&&u)return f();return(a?this.glossaryOffline.deleteNewEntry(e,a.concept,a.timecreated,s):Promise.resolve()).then(function(){return d.addEntryOnline(e,n,t,o,r,s).then(function(e){return e}).catch(function(e){return u&&!d.utils.isWebServiceError(e)?f():Promise.reject(e)})})},e.prototype.addEntryOnline=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={glossaryid:e,concept:n,definition:t,definitionformat:1,options:l.utils.objectToArrayOfObjects(i||{},"name","value")};return o&&s.options.push({name:"attachmentsid",value:o}),r.isVersionGreaterEqualThan("3.2.2")||(s.definition=l.textUtils.cleanTags(s.definition)),r.write("mod_glossary_add_entry",s).then(function(e){return e&&e.entryid?e.entryid:Promise.reject(l.utils.createFakeWSError(""))})})},e.prototype.isConceptUsed=function(e,n,t,i){var o=this;return this.glossaryOffline.isConceptUsed(e,n,t,i).then(function(t){return!!t||o.fetchAllEntries(o.getEntriesByLetter,[e,"ALL"],!0,i).then(function(e){return e.some(function(e){return e.concept==n})})}).catch(function(){return!1})},e.prototype.isPluginEnabledForEditing=function(){return this.sitesProvider.getCurrentSite().wsAvailable("mod_glossary_add_entry")},e.prototype.logView=function(e,n){var t={id:e,mode:n};return this.sitesProvider.getCurrentSite().write("mod_glossary_view_glossary",t)},e.prototype.logEntryView=function(e){var n={id:e};return this.sitesProvider.getCurrentSite().write("mod_glossary_view_entry",n)},e.COMPONENT="mmaModGlossary",e.LIMIT_ENTRIES=25,e.LIMIT_CATEGORIES=10,e.SHOW_ALL_CATERGORIES=0,e.SHOW_NOT_CATEGORISED=-1,e.ADD_ENTRY_EVENT="addon_mod_glossary_add_entry",e;var n}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AddonModScormProvider});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__ngx_translate_core__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3__providers_filepool__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_4__providers_logger__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_5__providers_sites__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6__providers_sync__=__webpack_require__(86),__WEBPACK_IMPORTED_MODULE_7__providers_ws__=__webpack_require__(198),__WEBPACK_IMPORTED_MODULE_8__providers_utils_text__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_9__providers_utils_time__=__webpack_require__(25),__WEBPACK_IMPORTED_MODULE_10__providers_utils_utils__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_11__scorm_offline__=__webpack_require__(237),__WEBPACK_IMPORTED_MODULE_12__core_constants__=__webpack_require__(40),AddonModScormProvider=function(){function AddonModScormProvider(e,n,t,i,o,r,l,s,a,u){this.translate=n,this.sitesProvider=t,this.wsProvider=i,this.textUtils=o,this.utils=r,this.filepoolProvider=l,this.scormOfflineProvider=s,this.timeUtils=a,this.syncProvider=u,this.VALID_STATUSES=["notattempted","passed","completed","failed","incomplete","browsed","suspend"],this.STATUSES={passed:"passed",completed:"completed",failed:"failed",incomplete:"incomplete",browsed:"browsed","not attempted":"notattempted",p:"passed",c:"completed",f:"failed",i:"incomplete",b:"browsed",n:"notattempted"},this.ROOT_CACHE_KEY="mmaModScorm:",this.logger=e.getInstance("AddonModScormProvider")}return AddonModScormProvider_1=AddonModScormProvider,AddonModScormProvider.prototype.calculateScormGrade=function(e,n){if(!n||!Object.keys(n).length)return-1;switch(e.whatgrade){case AddonModScormProvider_1.FIRSTATTEMPT:return n[1]?n[1].grade:-1;case AddonModScormProvider_1.LASTATTEMPT:var t=0;return Object.keys(n).forEach(function(e){t=Math.max(Number(e),t)}),t>0?n[t].grade:-1;case AddonModScormProvider_1.HIGHESTATTEMPT:var i=0;for(var o in n)i=Math.max(n[o].grade,i);return i;case AddonModScormProvider_1.AVERAGEATTEMPT:var r=0,l=0;for(var o in n)r+=n[o].grade,l++;return Math.round(r/l);default:return-1}},AddonModScormProvider.prototype.calculateScormSize=function(e){return e.packagesize?Promise.resolve(e.packagesize):this.wsProvider.getRemoteFileSize(this.getPackageUrl(e))},AddonModScormProvider.prototype.countAttemptsLeft=function(e,n){return 0==e.maxattempt?Number.MAX_VALUE:(n=Number(n),isNaN(n)?-1:e.maxattempt-n)},AddonModScormProvider.prototype.determineAttemptAndMode=function(e,n,t,i,o){if(n==AddonModScormProvider_1.MODEBROWSE){if(!e.hidebrowse)return 0==t&&(t=1,i=!0),{mode:n,attempt:t,newAttempt:i};n=AddonModScormProvider_1.MODENORMAL}return e.forcenewattempt==AddonModScormProvider_1.SCORM_FORCEATTEMPT_ALWAYS?{mode:AddonModScormProvider_1.MODENORMAL,attempt:t+1,newAttempt:!0}:(0==t?i=!0:o?i=!1:e.forcenewattempt&&(i=!0),i&&(0==e.maxattempt||t<e.maxattempt)?(t++,n=AddonModScormProvider_1.MODENORMAL):n=o?AddonModScormProvider_1.MODENORMAL:AddonModScormProvider_1.MODEREVIEW,{mode:n,attempt:t,newAttempt:i})},AddonModScormProvider.prototype.displayTocInPlayer=function(e){return 3!==e.hidetoc},AddonModScormProvider.prototype.evalPrerequisites=function(prerequisites,trackData){var _this=this,stack=[];prerequisites=prerequisites.replace(/&amp;/gi,"&"),prerequisites=prerequisites.replace(/(&|\||\(|\)|\~)/gi,"\t$1\t"),prerequisites=prerequisites.replace(/&/gi,"&&"),prerequisites=prerequisites.replace(/\|/gi,"||");var elements=prerequisites.trim().split("\t");return elements.forEach(function(e){if(e=e.trim()){if(!e.match(/^(&&|\|\||\(|\))$/gi)){var n=/^(\d+)\*\{(.+)\}$/,t=/^(.+)(\=|\<\>)(.+)$/,i=void 0;if(n.test(e)){var o=(i=e.match(n))[1],r=0;i[2].split(",").forEach(function(e){e=e.trim(),void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status||r++}),e=r>=o?"true":"false"}else if("~"==e)e="!";else if(t.test(e))if(i=e.match(t),e=i[1].trim(),void 0!==trackData[e]){var l=i[3].trim().replace(/(\'|\")/gi);void 0!==_this.STATUSES[l]&&(l=_this.STATUSES[l]),e="('"+trackData[e].status+"' "+("<>"==i[2]?"!=":"==")+" '"+l+"')"}else e="false";else e=void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status?"false":"true"}stack.push(" "+e+" ")}}),eval(stack.join("")+";")},AddonModScormProvider.prototype.formatGrade=function(e,n){return void 0===n||-1==n?this.translate.instant("core.none"):e.grademethod!==AddonModScormProvider_1.GRADESCOES&&e.maxgrade>0?(n=n/e.maxgrade*100,this.translate.instant("core.percentagenumber",{$a:this.textUtils.roundToDecimals(n,2)})):String(n)},AddonModScormProvider.prototype.formatTocToArray=function(e,n){var t=this;if(void 0===n&&(n=0),!e||!e.length)return[];var i=[];return e.forEach(function(e){e.level=n,i.push(e),i=i.concat(t.formatTocToArray(e.children,n+1))}),i},AddonModScormProvider.prototype.getAttemptCount=function(e,n,t,i,o){var r=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(i).then(function(l){o=o||l.getUserId();var s={lastAttempt:{number:0,offline:!1}},a=[];return a.push(r.getAttemptCountOnline(e,n,t,i,o).then(function(e){s.online=[];for(var n=1;n<=e;n++)s.online.push(n);e>s.lastAttempt.number&&(s.lastAttempt.number=e,s.lastAttempt.offline=!1)})),a.push(r.scormOfflineProvider.getAttempts(e,i,o).then(function(e){s.offline=e.map(function(e){return e.attempt>=s.lastAttempt.number&&(s.lastAttempt.number=e.attempt,s.lastAttempt.offline=!0),e.attempt})})),Promise.all(a).then(function(){var e=s.online.length;return s.offline.forEach(function(n){-1==s.online.indexOf(n)&&e++}),s.total=e,s})})},AddonModScormProvider.prototype.getAttemptCountCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"attemptcount:"+e+":"+n},AddonModScormProvider.prototype.getAttemptCountOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){o=o||i.getUserId();var l={scormid:e,userid:o,ignoremissingcompletion:n?1:0},s={cacheKey:r.getAttemptCountCacheKey(e,o)};return t&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("mod_scorm_get_scorm_attempt_count",l,s).then(function(e){return e&&void 0!==e.attemptscount?e.attemptscount:Promise.reject(null)})})},AddonModScormProvider.prototype.getAttemptGrade=function(e,n,t,i){var o={scos:0,values:0,max:0,sum:0};return this.getScormUserData(e.id,n,void 0,t,!1,i).then(function(n){for(var t in n){var i=n[t].userdata;if("completed"!=i.status&&"passed"!=i.status||o.scos++,i.score_raw||void 0!==e.scormtype&&"sco"==e.scormtype&&void 0!==i.score_raw){var r=parseFloat(i.score_raw);o.values++,o.sum+=r,o.max=Math.max(r,o.max)}}var l=0;switch(e.grademethod){case AddonModScormProvider_1.GRADEHIGHEST:l=o.max;break;case AddonModScormProvider_1.GRADEAVERAGE:l=o.values>0?o.sum/o.values:0;break;case AddonModScormProvider_1.GRADESUM:l=o.sum;break;case AddonModScormProvider_1.GRADESCOES:l=o.scos;break;default:l=o.max}return l})},AddonModScormProvider.prototype.getOrganizations=function(e,n){return this.getScos(e,void 0,!1,n).then(function(e){var n=[];return e.forEach(function(e){""==e.organization&&"/"==e.parent&&""==e.scormtype&&n.push({identifier:e.identifier,title:e.title,sortorder:e.sortorder})}),n})},AddonModScormProvider.prototype.getOrganizationToc=function(e,n,t,i,o){return this.getScosWithData(e,n,t,i,!1,o).then(function(e){var n={},i=[];return e.forEach(function(o,r){o.children=[],n[o.identifier]=r,"/"!==o.parent&&(o.parent==t?i.push(o):e[n[o.parent]].children.push(o))}),i})},AddonModScormProvider.prototype.getPackageUrl=function(e){return e.packageurl?e.packageurl:e.reference?e.reference:""},AddonModScormProvider.prototype.getScormUserData=function(e,n,t,i,o,r){var l=this;if(r=r||this.sitesProvider.getCurrentSiteId(),i){return(t?Promise.resolve(t):this.getScos(e,void 0,void 0,r)).then(function(t){return l.scormOfflineProvider.getScormUserData(e,n,t,r)})}return this.getScormUserDataOnline(e,n,o,r)},AddonModScormProvider.prototype.getScormUserDataCacheKey=function(e,n){return this.getScormUserDataCommonCacheKey(e)+":"+n},AddonModScormProvider.prototype.getScormUserDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userdata:"+e},AddonModScormProvider.prototype.getScormUserDataOnline=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={scormid:e,attempt:n},l={cacheKey:o.getScormUserDataCacheKey(e,n)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_scorm_get_scorm_user_data",r,l).then(function(e){if(e&&e.data){var n={};return e.data.forEach(function(e){e.defaultdata=o.utils.objectToKeyValueMap(e.defaultdata,"element","value"),e.userdata=o.utils.objectToKeyValueMap(e.userdata,"element","value"),n[e.scoid]=e}),n}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScosCacheKey=function(e){return this.ROOT_CACHE_KEY+"scos:"+e},AddonModScormProvider.prototype.getScos=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(i).then(function(i){var r={scormid:e},l={cacheKey:o.getScosCacheKey(e)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_scorm_get_scorm_scoes",r,l).then(function(e){return e&&e.scoes?n?e.scoes.filter(function(e){return e.organization==n}):e.scoes:Promise.reject(null)})})},AddonModScormProvider.prototype.getScosWithData=function(e,n,t,i,o,r){var l=this;return this.getScos(e,t,o,r).then(function(t){return l.getScormUserData(e,n,t,i,o,r).then(function(e){var n={};return t.forEach(function(t){n[t.identifier]=e[t.id].userdata}),t.forEach(function(t){var i=e[t.id].userdata;i&&(t.isvisible=void 0===i.isvisible||i.isvisible&&"false"!==i.isvisible,t.prereq=void 0===i.prerequisites||l.evalPrerequisites(i.prerequisites,n),t.status=void 0===i.status||""===i.status?"notattempted":i.status,t.exitvar=void 0===i.exitvar?"cmi.core.exit":i.exitvar,t.exitvalue=i[t.exitvar])}),t})})},AddonModScormProvider.prototype.getScoSrc=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o,r=n.launch;if(n.extradata&&n.extradata.length)for(var l=0;l<n.extradata.length;l++){var s=n.extradata[l];if("parameters"==s.element){o=s.value;break}}if(o){var a=r.indexOf("?")>-1?"&":"?";"?"==o.charAt(0)&&(o=o.substr(1)),r+=a+o}return this.isExternalLink(r)?Promise.resolve(r):this.filepoolProvider.getPackageDirUrlByUrl(t,e.moduleurl).then(function(e){return i.textUtils.concatenatePaths(e,r)})},AddonModScormProvider.prototype.getScormFolder=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.getPackageDirPathByUrl(n,e)},AddonModScormProvider.prototype.getScormFileList=function(e){var n=[];return this.isScormUnsupported(e)||e.warningMessage||n.push({fileurl:this.getPackageUrl(e),filepath:"/",filename:e.reference,filesize:e.packagesize,type:"file",timemodified:0}),n},AddonModScormProvider.prototype.getScoStatusIcon=function(e,n){var t,i="",o="";return"sco"==e.scormtype?(this.VALID_STATUSES.indexOf(t=e.status)<0&&(t="notattempted"),n||(n=this.isStatusIncomplete(t)),n&&"suspend"==e.exitvalue?(i="suspend",o="suspended"):(i=e.status,o=e.status)):(i="asset",o=e.status&&"notattempted"!=e.status?"assetlaunched":"asset"),{url:"assets/img/scorm/"+i+".gif",description:this.translate.instant("addon.mod_scorm."+o)}},AddonModScormProvider.prototype.getScormDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"scorm:"+e},AddonModScormProvider.prototype.getScormByField=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={courseids:[e]},a={cacheKey:l.getScormDataCacheKey(e)};return o&&(a.omitExpires=!0),r.read("mod_scorm_get_scorms_by_courses",s,a).then(function(e){if(e&&e.scorms){var o=e.scorms.find(function(e){return e[n]==t});if(o){if(void 0===o.timeopen)for(var r in e.warnings){var l=e.warnings[r];if(l.itemid===o.id){o.warningMessage=l.message;break}}return o.moduleurl=i,o}}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScorm=function(e,n,t,i,o){return this.getScormByField(e,"coursemodule",n,t,i,o)},AddonModScormProvider.prototype.getScormById=function(e,n,t,i,o){return this.getScormByField(e,"id",n,t,i,o)},AddonModScormProvider.prototype.getScormGradeMethod=function(e){if(1==e.maxattempt)switch(parseInt(e.grademethod,10)){case AddonModScormProvider_1.GRADEHIGHEST:return this.translate.instant("addon.mod_scorm.gradehighest");case AddonModScormProvider_1.GRADEAVERAGE:return this.translate.instant("addon.mod_scorm.gradeaverage");case AddonModScormProvider_1.GRADESUM:return this.translate.instant("addon.mod_scorm.gradesum");case AddonModScormProvider_1.GRADESCOES:return this.translate.instant("addon.mod_scorm.gradescoes");default:return""}else switch(parseInt(e.whatgrade,10)){case AddonModScormProvider_1.HIGHESTATTEMPT:return this.translate.instant("addon.mod_scorm.highestattempt");case AddonModScormProvider_1.AVERAGEATTEMPT:return this.translate.instant("addon.mod_scorm.averageattempt");case AddonModScormProvider_1.FIRSTATTEMPT:return this.translate.instant("addon.mod_scorm.firstattempt");case AddonModScormProvider_1.LASTATTEMPT:return this.translate.instant("addon.mod_scorm.lastattempt");default:return""}},AddonModScormProvider.prototype.invalidateAllScormData=function(e,n,t){var i=[];return i.push(this.invalidateAttemptCount(e,n,t)),i.push(this.invalidateScos(e,n)),i.push(this.invalidateScormUserData(e,n)),Promise.all(i)},AddonModScormProvider.prototype.invalidateAttemptCount=function(e,n,t){var i=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(i.getAttemptCountCacheKey(e,t))})},AddonModScormProvider.prototype.invalidateContent=function(e,n,t,i){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getScorm(n,e,void 0,!1,t).then(function(n){var r=[];return r.push(o.invalidateAllScormData(n.id,t,i)),r.push(o.filepoolProvider.invalidateFilesByComponent(t,AddonModScormProvider_1.COMPONENT,e,!0)),Promise.all(r)})},AddonModScormProvider.prototype.invalidateScormData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getScormDataCacheKey(e))})},AddonModScormProvider.prototype.invalidateScormUserData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getScormUserDataCommonCacheKey(e))})},AddonModScormProvider.prototype.invalidateScos=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getScosCacheKey(e))})},AddonModScormProvider.prototype.isAttemptIncomplete=function(e,n,t,i,o){var r=this;return this.getScosWithData(e,n,void 0,t,i,o).then(function(e){for(var n in e){var t=e[n];if(t.isvisible&&t.launch&&r.isStatusIncomplete(t.status))return!0}return!1})},AddonModScormProvider.prototype.isExternalLink=function(e){return!!(e=e.toLowerCase()).match(/https?:\/\//)||"www."==e.substr(0,4)},AddonModScormProvider.prototype.isScormClosed=function(e){var n=this.timeUtils.timestamp();return e.timeclose>0&&n>e.timeclose},AddonModScormProvider.prototype.isScormDownloadable=function(e){return void 0!==e.protectpackagedownloads&&!1===e.protectpackagedownloads},AddonModScormProvider.prototype.isScormOpen=function(e){var n=this.timeUtils.timestamp();return!(e.timeopen>0&&e.timeopen>n)},AddonModScormProvider.prototype.isScormUnsupported=function(e){return this.isScormValidVersion(e)?this.isScormDownloadable(e)?this.isValidPackageUrl(this.getPackageUrl(e))?void 0:"addon.mod_scorm.errorpackagefile":"addon.mod_scorm.errornotdownloadable":"addon.mod_scorm.errorinvalidversion"},AddonModScormProvider.prototype.isScormValidVersion=function(e){return"SCORM_1.2"==e.version},AddonModScormProvider.prototype.isStatusIncomplete=function(e){return!e||"notattempted"==e||"incomplete"==e||"browsed"==e},AddonModScormProvider.prototype.isValidPackageUrl=function(e){return!!e&&!(e.indexOf("imsmanifest.xml")>-1)},AddonModScormProvider.prototype.logLaunchSco=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_scorm_launch_sco",{scormid:e,scoid:n}).then(function(e){if(!e||!e.status)return Promise.reject(null)})})},AddonModScormProvider.prototype.logView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_scorm_view_scorm",{scormid:e}).then(function(e){if(!e||!e.status)return Promise.reject(null)})})},AddonModScormProvider.prototype.saveTracks=function(e,n,t,i,o,r,l){var s=this;if(l=l||this.sitesProvider.getCurrentSiteId(),o){return(r?Promise.resolve(r):this.getScormUserData(i.id,n,void 0,o,!1,l)).then(function(o){return s.scormOfflineProvider.saveTracks(i,e,n,t,o,l)})}return this.saveTracksOnline(i.id,e,n,t,l).then(function(){s.updateUserDataAfterSave(i.id,n,t,l)})},AddonModScormProvider.prototype.saveTracksOnline=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){if(!i||!i.length)return Promise.resolve();var l={scoid:n,attempt:t,tracks:i};return r.syncProvider.blockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",o.id),o.write("mod_scorm_insert_scorm_tracks",l).then(function(e){return e&&e.trackids?e.trackids:Promise.reject(null)}).finally(function(){r.syncProvider.unblockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",o.id)})})},AddonModScormProvider.prototype.saveTracksSync=function(e,n,t,i,o,r){if(o)return this.scormOfflineProvider.saveTracksSync(i,e,n,t,r);var l=this.saveTracksSyncOnline(e,n,t);return l&&this.updateUserDataAfterSave(i.id,n,t),l},AddonModScormProvider.prototype.saveTracksSyncOnline=function(e,n,t){var i,o={scoid:e,attempt:n,tracks:t},r=this.sitesProvider.getCurrentSite(),l={siteUrl:r.getURL(),wsToken:r.getToken()},s="mod_scorm_insert_scorm_tracks";if(!t||!t.length)return!0;if(!r.wsAvailable(s,!1)){if(!r.wsAvailable(__WEBPACK_IMPORTED_MODULE_12__core_constants__.a.WS_PREFIX+s,!1))return this.logger.error('WS function "'+s+'" is not available, even in compatibility mode.'),!1;s=__WEBPACK_IMPORTED_MODULE_12__core_constants__.a.WS_PREFIX+s}return!(!(i=this.wsProvider.syncCall(s,o,l))||i.error||!i.trackids)},AddonModScormProvider.prototype.shouldDownloadMainFile=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var i=AddonModScormProvider_1.COMPONENT;return void 0===n?this.filepoolProvider.getPackageData(t,i,e.coursemodule).then(function(n){return!(n.status==__WEBPACK_IMPORTED_MODULE_12__core_constants__.a.OUTDATED||n.status==__WEBPACK_IMPORTED_MODULE_12__core_constants__.a.DOWNLOADING&&n.previous==__WEBPACK_IMPORTED_MODULE_12__core_constants__.a.OUTDATED)||n.extra!=e.sha1hash}).catch(function(){return!0}):n?this.filepoolProvider.getPackageExtra(t,i,e.coursemodule).then(function(n){return e.sha1hash!=n}).catch(function(){return!0}):Promise.resolve(!0)},AddonModScormProvider.prototype.updateUserDataAfterSave=function(e,n,t,i){if(!t||!t.length)return Promise.resolve();for(var o=!1,r=0,l=t.length;r<l;r++){var s=t[r];if(s.element&&s.element.indexOf(".")>-1){o=!0;break}}return o?this.getScormUserDataOnline(e,n,!0,i):Promise.resolve()},AddonModScormProvider.COMPONENT="mmaModScorm",AddonModScormProvider.GRADESCOES=0,AddonModScormProvider.GRADEHIGHEST=1,AddonModScormProvider.GRADEAVERAGE=2,AddonModScormProvider.GRADESUM=3,AddonModScormProvider.HIGHESTATTEMPT=0,AddonModScormProvider.AVERAGEATTEMPT=1,AddonModScormProvider.FIRSTATTEMPT=2,AddonModScormProvider.LASTATTEMPT=3,AddonModScormProvider.MODEBROWSE="browse",AddonModScormProvider.MODENORMAL="normal",AddonModScormProvider.MODEREVIEW="review",AddonModScormProvider.SCORM_FORCEATTEMPT_NO=0,AddonModScormProvider.SCORM_FORCEATTEMPT_ONCOMPLETE=1,AddonModScormProvider.SCORM_FORCEATTEMPT_ALWAYS=2,AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT="addon_mod_scorm_launch_next_sco",AddonModScormProvider.LAUNCH_PREV_SCO_EVENT="addon_mod_scorm_launch_prev_sco",AddonModScormProvider.UPDATE_TOC_EVENT="addon_mod_scorm_update_toc",AddonModScormProvider.GO_OFFLINE_EVENT="addon_mod_scorm_go_offline",AddonModScormProvider;var AddonModScormProvider_1}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=function(e){function n(n,t,i){var o=e.call(this,"AddonWorkshopAssessmentStrategyDelegate",n,t,i)||this;return o.loggerProvider=n,o.sitesProvider=t,o.eventsProvider=i,o.handlerNameProperty="strategyName",o}return Object(i.__extends)(n,e),n.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},n.prototype.getComponentForPlugin=function(e,n){return this.executeFunctionOnEnabled(n,"getComponent",[e])},n.prototype.getOriginalValues=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e,"getOriginalValues",[n,t])||[])},n.prototype.hasDataChanged=function(e,n,t){return this.executeFunctionOnEnabled(e.strategy,"hasDataChanged",[n,t])||!1},n.prototype.prepareAssessmentData=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e,"prepareAssessmentData",[n,t]))},n}(o.a)},function(e,n,t){"use strict";function i(e){return o._42(0,[o._37(402653184,1,{container:0}),(e()(),o._16(1,0,null,null,2,"core-loading",[],null,null,null,r.b,r.a)),o._15(2,638976,null,0,l.a,[s.a,o.p,a.a,u.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._16(3,16777216,[[1,3],["dynamicComponent",1]],0,0,null,null,null,null,null,null,null))],function(e,n){e(n,2,0,n.component.loaded)},null)}t.d(n,"a",function(){return c}),n.b=i;var o=t(1),r=t(49),l=t(48),s=t(19),a=t(13),u=t(3),c=(t(138),o._14({encapsulation:2,styles:[],data:{}}))},,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4),t(400),t(10),t(6),t(65),t(11);var i=t(40),o=t(180),r=(t.n(o),t(402)),l=function(){function e(e,n,t,i,o,r,l,s,a){this.http=e,this.translate=n,this.appProvider=t,this.textUtils=i,this.fileProvider=r,this.fileTransfer=l,this.commonHttp=s,this.mimeUtils=a,this.mimeTypeCache={},this.ongoingCalls={},this.retryCalls=[],this.retryTimeout=0,this.logger=o.getInstance("CoreWSProvider")}return e.prototype.addToRetryQueue=function(e,n,t,i){var o={method:e,siteUrl:n,ajaxData:t,preSets:i,deferred:{}};return o.deferred.promise=new Promise(function(e,n){o.deferred.resolve=e,o.deferred.reject=n}),this.retryCalls.push(o),o.deferred.promise},e.prototype.call=function(e,n,t){var i;if(!t)return Promise.reject(this.createFakeWSError("core.unexpectederror",!0));if(!this.appProvider.isOnline())return Promise.reject(this.createFakeWSError("core.networkerrormsg",!0));t.typeExpected=t.typeExpected||"object",void 0===t.responseExpected&&(t.responseExpected=!0),(n=Object.assign({},n)).wsfunction=e,n.wstoken=t.wsToken,i=t.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json";var o=this.getPromiseHttp("post",t.siteUrl,n);return o||(this.retryCalls.length>0?(this.logger.warn("Calls locked, trying later..."),o=this.addToRetryQueue(e,i,n,t)):o=this.performPost(e,i,n,t)),o},e.prototype.callAjax=function(e,n,t){function o(e,n){return void 0===n&&(n=e.errorcode?"invalidrecord"==e.errorcode?-1:1:0),e.available=n,Promise.reject(e)}var r,l=this;if(void 0===t.siteUrl)return o(this.createFakeWSError("core.unexpectederror",!0));if(!this.appProvider.isOnline())return o(this.createFakeWSError("core.networkerrormsg",!0));void 0===t.responseExpected&&(t.responseExpected=!0),r=[{index:0,methodname:e,args:this.convertValuesToString(n)}];return this.http.post(t.siteUrl+"/lib/ajax/service.php",JSON.stringify(r)).timeout(i.a.WS_TIMEOUT).toPromise().then(function(e){return e||t.responseExpected||(e=[{}]),e&&"object"==typeof e?e.error?o(e):(e=e[0]).error?o(e.exception):e.data:o(l.createFakeWSError("core.serverconnection",!0))},function(e){var n=404==e.status?-1:0;return o(l.createFakeWSError("core.serverconnection",!0),n)})},e.prototype.convertValuesToString=function(e,n){var t;t=Array.isArray(e)||"object"!=typeof e?[]:{};for(var i in e)if("object"==typeof e[i])t[i]=this.convertValuesToString(e[i],n);else if("string"==typeof e[i]){if(t[i]=n?this.textUtils.stripUnicode(e[i]):e[i],n&&e[i]!=t[i]&&0==t[i].trim().length)throw new Error}else t[i]=e[i]+"";return t},e.prototype.createFakeWSError=function(e,n){return n&&(e=this.translate.instant(e)),{message:e}},e.prototype.downloadFile=function(e,n,t,i){var o=this;if(this.logger.debug("Downloading file",e,n,t),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var r=n+".tmp";return this.fileProvider.createFile(r).then(function(l){var s=o.fileTransfer.create();return s.onProgress(i),s.download(e,l.toURL(),!0).then(function(){var i;if(t){var l=o.mimeUtils.getFileExtension(n);i=l&&"gdoc"!=l&&"gsheet"!=l&&"gslides"!=l&&"gdraw"!=l&&"php"!=l?Promise.resolve(l):o.getRemoteFileMimeType(e).then(function(t){if(t){var i=o.mimeUtils.getExtension(t,e);if(i&&(!l||"application/json"!=t))return l&&(n=o.mimeUtils.removeExtension(n)),n+="."+i,i}return l})}else i=Promise.resolve("");return i.then(function(t){return o.fileProvider.moveFile(r,n).then(function(i){return i.extension=t,i.path=n,o.logger.debug("Success downloading file "+e+" to "+n+" with extension "+t),i})})})}).catch(function(t){return o.logger.error("Error downloading "+e+" to "+n,t),Promise.reject(t)})},e.prototype.getPromiseHttp=function(e,n,t){var i=this.getQueueItemId(e,n,t);return void 0!==this.ongoingCalls[i]&&this.ongoingCalls[i]},e.prototype.getRemoteFileMimeType=function(e,n){var t=this;return this.mimeTypeCache[e]&&!n?Promise.resolve(this.mimeTypeCache[e]):this.performHead(e).then(function(n){var i=n.headers.get("Content-Type");return i&&(i=i.split(";")[0]),t.mimeTypeCache[e]=i,i||""}).catch(function(){return""})},e.prototype.getRemoteFileSize=function(e){return this.performHead(e).then(function(e){var n=parseInt(e.headers.get("Content-Length"),10);return n||-1}).catch(function(){return-1})},e.prototype.getQueueItemId=function(e,n,t){return t&&(n+="###"+r.a.serialize(t)),e+"#"+o.Md5.hashAsciiStr(n)},e.prototype.performHead=function(e){var n=this.getPromiseHttp("head",e);return n||(n=this.commonHttp.head(e).timeout(i.a.WS_TIMEOUT).toPromise(),n=this.setPromiseHttp(n,"head",e)),n},e.prototype.performPost=function(e,n,t,o){var r=this,l={};"number"!=o.typeExpected&&"boolean"!=o.typeExpected&&"string"!=o.typeExpected||(l.responseType="text");var s=this.http.post(n,t,l).timeout(i.a.WS_TIMEOUT).toPromise();return s=s.then(function(n){if(n||o.responseExpected||(n={}),!n)return Promise.reject(r.createFakeWSError("core.serverconnection",!0));if(typeof n!=o.typeExpected){if("string"!=typeof n)return r.logger.warn('Response of type "'+typeof n+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("number"==o.typeExpected){if(n=Number(n),isNaN(n))return r.logger.warn('Response expected type "'+o.typeExpected+'" cannot be parsed to number'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0))}else{if("boolean"!=o.typeExpected)return r.logger.warn('Response of type "'+typeof n+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("true"===n)n=!0;else{if("false"!==n)return r.logger.warn('Response expected type "'+o.typeExpected+'" is not true or false'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));n=!1}}}return void 0!==n.exception?("tool_mobile_get_content"==e&&r.logger.error("Error calling WS",e,n),Promise.reject(n)):void 0!==n.debuginfo?Promise.reject(r.createFakeWSError("Error. "+n.message)):n},function(i){if(429==i.status){var l=r.addToRetryQueue(e,n,t,o);return 0==r.retryTimeout?(r.retryTimeout=parseInt(i.headers.get("Retry-After"),10)||5,r.logger.warn(i.statusText+". Retrying in "+r.retryTimeout+" seconds. "+r.retryCalls.length+" calls left."),setTimeout(function(){r.logger.warn("Retrying now with "+r.retryCalls.length+" calls to process."),r.retryTimeout=0,r.processRetryQueue()},1e3*r.retryTimeout)):r.logger.warn("Calls locked, trying later..."),l}return Promise.reject(r.createFakeWSError("core.serverconnection",!0))}),s=this.setPromiseHttp(s,"post",o.siteUrl,t)},e.prototype.processRetryQueue=function(){var e=this;if(this.retryCalls.length>0&&0==this.retryTimeout){var n=this.retryCalls.shift();setTimeout(function(){n.deferred.resolve(e.performPost(n.method,n.siteUrl,n.ajaxData,n.preSets)),e.processRetryQueue()},200)}else this.logger.warn("Retry queue has stopped with "+this.retryCalls.length+" calls and "+this.retryTimeout+" timeout secs.")},e.prototype.setPromiseHttp=function(e,n,t,o){var r,l=this,s=this.getQueueItemId(n,t,o);return this.ongoingCalls[s]=e,r=setTimeout(function(){delete l.ongoingCalls[s]},i.a.WS_TIMEOUT),e.finally(function(){delete l.ongoingCalls[s],clearTimeout(r)})},e.prototype.syncCall=function(e,n,t){var i,o,l={error:!0,message:""};if(!t)return l.message=this.translate.instant("core.unexpectederror"),l;if(!this.appProvider.isOnline())return l.message=this.translate.instant("core.networkerrormsg"),l;t.typeExpected=t.typeExpected||"object",void 0===t.responseExpected&&(t.responseExpected=!0);try{n=this.convertValuesToString(n,t.cleanUnicode)}catch(e){return l.message=this.translate.instant("core.unicodenotsupportedcleanerror"),l}n.wsfunction=e,n.wstoken=t.wsToken,i=t.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json",n=r.a.serialize(n),(o=new window.XMLHttpRequest).open("post",i,!1),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.send(n),n="response"in o?o.response:o.responseText;var s=Math.max(1223===o.status?204:o.status,0);return s<200||s>=300?(l.message=n,l):((n=this.textUtils.parseJSON(n))&&n.data||t.responseExpected||(n={}),n?typeof n!=t.typeExpected&&(this.logger.warn('Response of type "'+typeof n+'" received, expecting "'+t.typeExpected+'"'),l.message=this.translate.instant("core.errorinvalidresponse")):l.message=this.translate.instant("core.serverconnection"),void 0===n.exception&&void 0===n.debuginfo||(l.message=n.message),""!==l.message?l:n)},e.prototype.uploadFile=function(e,n,t,i){var o=this;if(this.logger.debug("Trying to upload file: "+e),!e||!n||!t)return Promise.reject(null);if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var r=t.siteUrl+"/webservice/upload.php",l=this.fileTransfer.create();return l.onProgress(i),n.httpMethod="POST",n.params={token:t.wsToken,filearea:n.fileArea||"draft",itemid:n.itemId||0},n.chunkedMode=!1,n.headers={Connection:"close"},l.upload(e,r,n,!0).then(function(n){var t=o.textUtils.parseJSON(n.response,null,o.logger.error.bind(o.logger,"Error parsing response from upload"));return null===t?Promise.reject(o.translate.instant("core.errorinvalidresponse")):t?"object"!=typeof t?(o.logger.warn('Upload file: Response of type "'+typeof t+'" received, expecting "object"'),Promise.reject(o.translate.instant("core.errorinvalidresponse"))):void 0!==t.exception?Promise.reject(t.message):t&&void 0!==t.error?Promise.reject(t.error):t[0]&&void 0!==t[0].error?Promise.reject(t[0].error):(o.logger.debug("Successfully uploaded file",e),t[0]):Promise.reject(o.translate.instant("core.serverconnection"))}).catch(function(n){return o.logger.error("Error while uploading file",e,n),Promise.reject(o.translate.instant("core.errorinvalidresponse"))})},e}()},,,,,function(e,n,t){"use strict";function i(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),u._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.fileSizeReadable)})}function o(e){return u._42(0,[(e()(),u._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),u._40(1,null,["",""])),u._34(2,1)],null,function(e,n){var t=n.component;e(n,1,0,u._41(n,1,0,e(n,2,0,u._29(n.parent,0),1e3*t.timemodified)))})}function r(e){return u._42(0,[(e()(),u._16(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.download(t)&&i}return i},c.b,c.a)),u._15(1,1097728,[[2,4]],0,d.a,[[8,""],f.a,u.p,u.K],{color:[0,"color"],clear:[1,"clear"]},null),u._32(131072,p.a,[h.a,u.i]),(e()(),u._40(-1,0,["\n            "])),(e()(),u._16(4,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),u._15(5,147456,null,0,m.a,[f.a,u.p,u.K],{name:[0,"name"]},null),(e()(),u._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,5,0,t.isDownloaded?"refresh":"cloud-download")},function(e,n){e(n,0,0,u._41(n,0,0,u._29(n,2).transform("core.download")));e(n,4,0,u._29(n,5)._hidden)})}function l(e){return u._42(0,[(e()(),u._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.delete(t)&&i}return i},c.b,c.a)),u._15(1,1097728,[[2,4]],0,d.a,[[8,""],f.a,u.p,u.K],{color:[0,"color"],clear:[1,"clear"]},null),u._32(131072,p.a,[h.a,u.i]),(e()(),u._40(-1,0,["\n            "])),(e()(),u._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._15(5,147456,null,0,m.a,[f.a,u.p,u.K],{name:[0,"name"]},null),(e()(),u._40(-1,0,["\n        "]))],function(e,n){e(n,1,0,"danger","");e(n,5,0,"trash")},function(e,n){e(n,0,0,u._41(n,0,0,u._29(n,2).transform("core.delete")));e(n,4,0,u._29(n,5)._hidden)})}function s(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"ion-spinner",[["item-end",""]],[[2,"spinner-paused",null]],null,null,_.b,_.a)),u._15(1,114688,null,0,g.a,[f.a,u.p,u.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,u._29(n,1)._paused)})}function a(e){return u._42(0,[u._32(0,v.a,[y.a,b.a]),(e()(),u._16(1,0,null,null,29,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.download(t,!0)&&i}return i},P.b,P.a)),u._15(2,1097728,null,3,E.a,[C.a,f.a,u.p,u.K,[2,I.a]],null,null),u._37(335544320,1,{contentLabel:0}),u._37(603979776,2,{_buttons:1}),u._37(603979776,3,{_icons:1}),u._15(6,16384,null,0,S.a,[],null,null),(e()(),u._40(-1,2,["\n    "])),(e()(),u._16(8,0,null,0,0,"img",[["alt",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),u._40(-1,2,["\n    "])),(e()(),u._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),u._40(11,null,["",""])),(e()(),u._40(-1,2,["\n    "])),(e()(),u._11(16777216,null,2,1,null,i)),u._15(14,16384,null,0,w.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,2,["\n    "])),(e()(),u._11(16777216,null,2,1,null,o)),u._15(17,16384,null,0,w.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,2,["\n    "])),(e()(),u._16(19,0,null,4,7,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),u._40(-1,null,["\n        "])),(e()(),u._11(16777216,null,null,1,null,r)),u._15(22,16384,null,0,w.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n        "])),(e()(),u._11(16777216,null,null,1,null,l)),u._15(25,16384,null,0,w.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n    "])),(e()(),u._40(-1,2,["\n    "])),(e()(),u._11(16777216,null,4,1,null,s)),u._15(29,16384,null,0,w.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,2,["\n"])),(e()(),u._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,14,0,t.fileSizeReadable);e(n,17,0,t.showTime);e(n,22,0,!t.isDownloading&&t.showDownload);e(n,25,0,!t.isDownloading&&t.canDelete);e(n,29,0,t.isDownloading)},function(e,n){var t=n.component;e(n,8,0,t.fileIcon);e(n,11,0,t.fileName)})}t.d(n,"a",function(){return A}),n.b=a;var u=t(1),c=t(46),d=t(43),f=t(7),p=t(27),h=t(19),m=t(47),_=t(112),g=t(95),v=t(223),y=t(6),b=t(25),P=t(31),E=t(21),C=t(20),I=t(28),S=t(33),w=t(8),A=u._14({encapsulation:2,styles:[],data:{}})},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmaCompetency:",this.logger=e.getInstance("AddonCompetencyProvider")}return n=e,e.prototype.getLearningPlansCacheKey=function(e){return this.ROOT_CACHE_KEY+"userplans:"+e},e.prototype.getLearningPlanCacheKey=function(e){return this.ROOT_CACHE_KEY+"learningplan:"+e},e.prototype.getCompetencyInPlanCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"plancompetency:"+e+":"+n},e.prototype.getCompetencyInCourseCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"coursecompetency:"+t+":"+e+":"+n},e.prototype.getCompetencySummaryCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"competencysummary:"+n+":"+e},e.prototype.getCourseCompetenciesCacheKey=function(e){return this.ROOT_CACHE_KEY+"coursecompetencies:"+e},e.prototype.isPluginForCourseEnabled=function(e,n){return this.sitesProvider.isLoggedIn()?this.getCourseCompetencies(e,0,n).catch(function(){return!1}):Promise.resolve(!1)},e.prototype.getLearningPlans=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){e=e||n.getUserId(),t.logger.debug("Get plans for user "+e);var i={userid:e},o={cacheKey:t.getLearningPlansCacheKey(e)};return n.read("tool_lp_data_for_plans_page",i,o).then(function(e){return e.plans?e.plans:Promise.reject(null)})})},e.prototype.getLearningPlan=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){t.logger.debug("Get plan "+e);var i={planid:e},o={cacheKey:t.getLearningPlanCacheKey(e)};return n.read("tool_lp_data_for_plan_page",i,o).then(function(e){return e.plan?e:Promise.reject(null)})})},e.prototype.getCompetencyInPlan=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){i.logger.debug("Get competency "+n+" in plan "+e);var o={planid:e,competencyid:n},r={cacheKey:i.getCompetencyInPlanCacheKey(e,n)};return t.read("tool_lp_data_for_user_competency_summary_in_plan",o,r).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},e.prototype.getCompetencyInCourse=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){t=t||i.getUserId(),r.logger.debug("Get competency "+n+" in course "+e);var l={courseid:e,competencyid:n,userid:t},s={cacheKey:r.getCompetencyInCourseCacheKey(e,n,t)};return o&&(s.getFromCache=!1,s.emergencyCache=!1),i.read("tool_lp_data_for_user_competency_summary_in_course",l,s).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},e.prototype.getCompetencySummary=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId(),o.logger.debug("Get competency "+e+" summary for user"+n);var r={competencyid:e,userid:n},l={cacheKey:o.getCompetencySummaryCacheKey(e,n)};return i&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("tool_lp_data_for_user_competency_summary",r,l).then(function(e){return e.competency?e.competency:Promise.reject(null)})})},e.prototype.getCourseCompetencies=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(n){o.logger.debug("Get course competencies for course "+e);var t={courseid:e},r={cacheKey:o.getCourseCompetenciesCacheKey(e)};return i&&(r.getFromCache=!1,r.emergencyCache=!1),n.read("tool_lp_data_for_course_competencies_page",t,r).then(function(e){return e.competencies?e:Promise.reject(null)})}).then(function(i){if(!n||n==o.sitesProvider.getCurrentSiteUserId())return i;var r=i.competencies.map(function(i){return o.getCompetencyInCourse(e,i.competency.id,n,t)});return Promise.all(r).then(function(e){return e.forEach(function(e,n){i.competencies[n].usercompetencycourse=e.usercompetencysummary.usercompetencycourse}),i})})},e.prototype.invalidateLearningPlans=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return e=e||n.getUserId(),n.invalidateWsCacheForKey(t.getLearningPlansCacheKey(e))})},e.prototype.invalidateLearningPlan=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLearningPlanCacheKey(e))})},e.prototype.invalidateCompetencyInPlan=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getCompetencyInPlanCacheKey(e,n))})},e.prototype.invalidateCompetencyInCourse=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return t=t||i.getUserId(),i.invalidateWsCacheForKey(o.getCompetencyInCourseCacheKey(e,n,t))})},e.prototype.invalidateCompetencySummary=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(i.getCompetencySummaryCacheKey(e,n))})},e.prototype.invalidateCourseCompetencies=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(n){return n.invalidateWsCacheForKey(i.getCourseCompetenciesCacheKey(e))}).then(function(){if(n&&n!=i.sitesProvider.getCurrentSiteUserId())return i.getCourseCompetencies(e,0,t).then(function(o){var r=o.competencies.map(function(o){return i.invalidateCompetencyInCourse(e,o.competency.id,n,t)});return Promise.all(r)})})},e.prototype.logCompetencyInPlanView=function(e,t,i,o,r){return e&&t?this.sitesProvider.getSite(r).then(function(r){o=o||r.getUserId();var l={planid:e,competencyid:t,userid:o},s={typeExpected:"boolean"};return r.write(i==n.STATUS_COMPLETE?"core_competency_user_competency_plan_viewed":"core_competency_user_competency_viewed_in_plan",l,s)}):Promise.reject(null)},e.prototype.logCompetencyInCourseView=function(e,n,t,i){return e&&n?this.sitesProvider.getSite(i).then(function(i){t=t||i.getUserId();return i.write("core_competency_user_competency_viewed_in_course",{courseid:e,competencyid:n,userid:t},{typeExpected:"boolean"})}):Promise.reject(null)},e.prototype.logCompetencyView=function(e,n){return e?this.sitesProvider.getSite(n).then(function(n){return n.write("core_competency_competency_viewed",{id:e},{typeExpected:"boolean"})}):Promise.reject(null)},e.STATUS_DRAFT=0,e.STATUS_ACTIVE=1,e.STATUS_COMPLETE=2,e.STATUS_WAITING_FOR_REVIEW=3,e.STATUS_IN_REVIEW=4,e.REVIEW_STATUS_IDLE=0,e.REVIEW_STATUS_WAITING_FOR_REVIEW=1,e.REVIEW_STATUS_IN_REVIEW=2,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.courseProvider=t,this.forumProvider=i,this.logger=e.getInstance("CoreSiteHomeProvider")}return e.prototype.getNewsForum=function(e){return this.forumProvider.getCourseForums(e).then(function(e){for(var n=0;n<e.length;n++)if("news"==e[n].type)return e[n];return Promise.reject(null)})},e.prototype.invalidateNewsForum=function(e){return this.forumProvider.invalidateForumData(e)},e.prototype.isAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){if(n.isDisabledInSite(e))return!1;var t=e.getSiteHomeId();return n.logger.debug("Using WS call to check if site home is available."),n.courseProvider.getSections(t,!1,!0,{emergencyCache:!1},e.id).then(function(e){if(!e||!e.length)return Promise.reject(null);for(var n=0;n<e.length;n++){var t=e[n];if(t.summary||t.modules&&t.modules.length)return!0}return Promise.reject(null)}).catch(function(){var n=e.getStoredConfig();if(n&&n.frontpageloggedin){if(n.frontpageloggedin.split(",").length>0)return!0}return!1})}).catch(function(){return!1})},e.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDisabledInSite(e)})},e.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreSiteHome")},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i){this.fileProvider=e,this.sitesProvider=t,this.textUtils=i,this.tablesSchema=[{name:n.DISCUSSIONS_TABLE,columns:[{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["forumid","userid","timecreated"]},{name:n.REPLIES_TABLE,columns:[{name:"postid",type:"INTEGER"},{name:"discussionid",type:"INTEGER"},{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["postid","userid"]}],this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteNewDiscussion=function(e,t,i,o){return this.sitesProvider.getSite(i).then(function(i){var r={forumid:e,userid:o||i.getUserId(),timecreated:t};return i.getDb().deleteRecords(n.DISCUSSIONS_TABLE,r)})},e.prototype.getNewDiscussion=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){var l={forumid:e,userid:o||i.getUserId(),timecreated:t};return i.getDb().getRecord(n.DISCUSSIONS_TABLE,l).then(function(e){return e.options=r.textUtils.parseJSON(e.options),e})})},e.prototype.getAllNewDiscussions=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.DISCUSSIONS_TABLE).then(t.parseRecordOptions.bind(t))})},e.prototype.hasNewDiscussions=function(e,n,t){return this.getNewDiscussions(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getNewDiscussions=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={forumid:e,userid:i||t.getUserId()};return t.getDb().getRecords(n.DISCUSSIONS_TABLE,r).then(o.parseRecordOptions.bind(o))})},e.prototype.addNewDiscussion=function(e,t,i,o,r,l,s,a,u,c){return this.sitesProvider.getSite(u).then(function(u){var d={forumid:e,name:t,courseid:i,subject:o,message:r,options:JSON.stringify(l||{}),groupid:s||-1,userid:c||u.getUserId(),timecreated:a||(new Date).getTime()};return u.getDb().insertRecord(n.DISCUSSIONS_TABLE,d)})},e.prototype.deleteReply=function(e,t,i){return this.sitesProvider.getSite(t).then(function(t){var o={postid:e,userid:i||t.getUserId()};return t.getDb().deleteRecords(n.REPLIES_TABLE,o)})},e.prototype.getAllReplies=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.REPLIES_TABLE).then(t.parseRecordOptions.bind(t))})},e.prototype.hasForumReplies=function(e,n,t){return this.getForumReplies(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getForumReplies=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={forumid:e,userid:i||t.getUserId()};return t.getDb().getRecords(n.REPLIES_TABLE,r).then(o.parseRecordOptions.bind(o))})},e.prototype.hasDiscussionReplies=function(e,n,t){return this.getDiscussionReplies(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getDiscussionReplies=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={discussionid:e,userid:i||t.getUserId()};return t.getDb().getRecords(n.REPLIES_TABLE,r).then(o.parseRecordOptions.bind(o))})},e.prototype.replyPost=function(e,t,i,o,r,l,s,a,u,c){return this.sitesProvider.getSite(u).then(function(u){var d={postid:e,discussionid:t,forumid:i,name:o,courseid:r,subject:l,message:s,options:JSON.stringify(a||{}),userid:c||u.getUserId(),timecreated:(new Date).getTime()};return u.getDb().insertRecord(n.REPLIES_TABLE,d)})},e.prototype.getForumFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(i,"offlineforum/"+e)})},e.prototype.getNewDiscussionFolder=function(e,n,t){var i=this;return this.getForumFolder(e,t).then(function(e){return i.textUtils.concatenatePaths(e,"newdisc_"+n)})},e.prototype.getReplyFolder=function(e,n,t,i){var o=this;return this.getForumFolder(e,t).then(function(e){return o.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),o.textUtils.concatenatePaths(e,"reply_"+n+"_"+i)})})},e.prototype.parseRecordOptions=function(e){var n=this;return e.forEach(function(e){e.options=n.textUtils.parseJSON(e.options)}),e},e.DISCUSSIONS_TABLE="addon_mod_forum_discussions",e.REPLIES_TABLE="addon_mod_forum_replies",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o){this.sitesProvider=t,this.textUtils=i,this.fileProvider=o,this.tablesSchema=[{name:n.DATA_ENTRY_TABLE,columns:[{name:"dataid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"entryid",type:"INTEGER"},{name:"fields",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["dataid","entryid"]}],this.logger=e.getInstance("AddonModDataOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteAllEntryActions=function(e,n,t){var i=this;return this.getEntryActions(e,n,t).then(function(o){var r=[];return o.forEach(function(o){r.push(i.deleteEntry(e,n,o.action,t))}),Promise.all(r)})},e.prototype.deleteEntry=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(n.DATA_ENTRY_TABLE,{dataid:e,entryid:t,action:i})})},e.prototype.getAllEntries=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(n.DATA_ENTRY_TABLE)}).then(function(e){return e.map(t.parseRecord.bind(t))})},e.prototype.getDatabaseEntries=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.DATA_ENTRY_TABLE,{dataid:e})}).then(function(e){return e.map(i.parseRecord.bind(i))})},e.prototype.getEntry=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(n.DATA_ENTRY_TABLE,{dataid:e,entryid:t,action:i})}).then(function(e){return r.parseRecord(e)})},e.prototype.getEntryActions=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().getRecords(n.DATA_ENTRY_TABLE,{dataid:e,entryid:t})}).then(function(e){return e.map(o.parseRecord.bind(o))})},e.prototype.hasOfflineData=function(e,n){return this.getDatabaseEntries(e,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.getDatabaseFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(i,"offlinedatabase/"+e)})},e.prototype.getEntryFieldFolder=function(e,n,t,i){var o=this;return this.getDatabaseFolder(e,i).then(function(e){return o.textUtils.concatenatePaths(e,n+"_"+t)})},e.prototype.parseRecord=function(e){return e.fields=this.textUtils.parseJSON(e.fields),e},e.prototype.saveEntry=function(e,t,i,o,r,l,s,a){return this.sitesProvider.getSite(a).then(function(a){s=s||(new Date).getTime();var u={dataid:e,courseid:o,groupid:r,action:i,entryid:t=void 0===t||null===t?-s:t,fields:JSON.stringify(l||[]),timemodified:s};return a.getDb().insertRecord(n.DATA_ENTRY_TABLE,u)})},e.DATA_ENTRY_TABLE="addon_mod_data_entry",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(13),o=(t(257),function(){function e(e,n,t,o,r,l,s,a){var u=this;this.sitesProvider=n,this.appProvider=t,this.filepoolProvider=o,this.utils=r,this.translate=l,this.wikiOffline=s,this.ROOT_CACHE_KEY="mmaModWiki:",this.subwikiListsCache={},this.logger=e.getInstance("AddonModWikiProvider"),a.on(i.a.LOGIN,function(){u.clearSubwikiList()})}return n=e,e.prototype.clearSubwikiList=function(e){void 0===e?this.subwikiListsCache={}:delete this.subwikiListsCache[e]},e.prototype.editPage=function(e,n,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={pageid:e,content:n};return t&&(o.section=t),i.write("mod_wiki_edit_page",o).then(function(e){return e.pageid||Promise.reject(null)})})},e.prototype.getPageContents=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={pageid:e},l={cacheKey:o.getPageContentsCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_wiki_get_page_contents",r,l).then(function(e){return e.page||Promise.reject(null)})})},e.prototype.getPageContentsCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},e.prototype.getPageForEditing=function(e,n,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={pageid:e};return n&&(o.section=n),t&&i.isVersionGreaterEqualThan("3.2")&&(o.lockonly=1),i.write("mod_wiki_get_page_for_editing",o).then(function(e){return e.pagesection||Promise.reject(null)})})},e.prototype.getSubwikiFiles=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={wikiid:e,groupid:n=n||-1,userid:t=t||0},a={cacheKey:l.getSubwikiFilesCacheKey(e,n,t)};return i?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("mod_wiki_get_subwiki_files",s,a).then(function(e){return e.files||Promise.reject(null)})})},e.prototype.getSubwikiFilesCacheKey=function(e,n,t){return this.getSubwikiFilesCacheKeyPrefix(e)+":"+n+":"+t},e.prototype.getSubwikiFilesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikifiles:"+e},e.prototype.getSubwikiList=function(e){return this.subwikiListsCache[e]},e.prototype.getSubwikiPages=function(e,n,t,i,o,r,l,s,a){var u=this;return void 0===i&&(i="title"),void 0===o&&(o="ASC"),this.sitesProvider.getSite(a).then(function(a){var c={wikiid:e,groupid:n=n||-1,userid:t=t||0,options:{sortby:i=i||"title",sortdirection:o=o||"ASC",includecontent:(r=r||!1)?1:0}},d={cacheKey:u.getSubwikiPagesCacheKey(e,n,t)};return l?d.omitExpires=!0:s&&(d.getFromCache=!1,d.emergencyCache=!1),a.read("mod_wiki_get_subwiki_pages",c,d).then(function(e){return e.pages||Promise.reject(null)})})},e.prototype.getSubwikiPagesCacheKey=function(e,n,t){return this.getSubwikiPagesCacheKeyPrefix(e)+":"+n+":"+t},e.prototype.getSubwikiPagesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikipages:"+e},e.prototype.getSubwikis=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={wikiid:e},l={cacheKey:o.getSubwikisCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),i.read("mod_wiki_get_subwikis",r,l).then(function(e){return e.subwikis||Promise.reject(null)})})},e.prototype.getSubwikisCacheKey=function(e){return this.ROOT_CACHE_KEY+"subwikis:"+e},e.prototype.getWiki=function(e,n,t,i){return this.getWikiByField(e,"coursemodule",n,t,i)},e.prototype.getWikiByField=function(e,n,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){var o={courseids:[e]},l={cacheKey:r.getWikiDataCacheKey(e)};return i.read("mod_wiki_get_wikis_by_courses",o,l).then(function(e){if(e.wikis){var i=e.wikis.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getWikiById=function(e,n,t,i){return this.getWikiByField(e,"id",n,t,i)},e.prototype.getWikiDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"wiki:"+e},e.prototype.getWikiFileList=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=[];return this.getSubwikis(e.id,n,t,i).then(function(e){var l=[];return e.forEach(function(e){l.push(o.getSubwikiFiles(e.wikiid,e.groupid,e.userid,n,t,i).then(function(e){r=r.concat(e)}))}),Promise.all(l).then(function(){return r})})},e.prototype.getWikiPageList=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=[];return this.getSubwikis(e.id,n,t,i).then(function(e){var l=[];return e.forEach(function(e){l.push(o.getSubwikiPages(e.wikiid,e.groupid,e.userid,void 0,void 0,void 0,n,t,i).then(function(e){r=r.concat(e)}))}),Promise.all(l).then(function(){return r})})},e.prototype.invalidateContent=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getWiki(n,e,!1,t).then(function(e){var o=[];return o.push(i.invalidateWikiData(n,t)),o.push(i.invalidateSubwikis(e.id,t)),o.push(i.invalidateSubwikiPages(e.id,t)),o.push(i.invalidateSubwikiFiles(e.id,t)),Promise.all(o)})},e.prototype.invalidateFiles=function(e,t){return this.filepoolProvider.invalidateFilesByComponent(t,n.COMPONENT,e)},e.prototype.invalidatePage=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPageContentsCacheKey(e))})},e.prototype.invalidateSubwikiFiles=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubwikiFilesCacheKeyPrefix(e))})},e.prototype.invalidateSubwikiPages=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubwikiPagesCacheKeyPrefix(e))})},e.prototype.invalidateSubwikis=function(e,n){var t=this;return this.clearSubwikiList(e),this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSubwikisCacheKey(e))})},e.prototype.invalidateWikiData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWikiDataCacheKey(e))})},e.prototype.isTitleUsed=function(e,n,t,i,o,r){var l=this;return this.getSubwikis(e,i,o,r).then(function(e){return e.find(function(e){return e.id==n})||Promise.reject(null)}).then(function(n){return l.getSubwikiPages(e,n.groupid,n.userid,void 0,void 0,!1,i,o,r)}).then(function(e){return!!e.find(function(e){return e.title==t})}).catch(function(){return!1})},e.prototype.logPageView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_wiki_view_page",{pageid:e})})},e.prototype.logView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_wiki_view_wiki",{wikiid:e})})},e.prototype.newPage=function(e,n,t,i,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return(i?s.isTitleUsed(i,t,e,!0,!1,l).catch(function(){return!1}).then(function(e){if(e)return Promise.reject(s.translate.instant("addon.mod_wiki.pageexists"))}):Promise.resolve()).then(function(){return s.wikiOffline.saveNewPage(e,n,t,i,o,r,l).then(function(){return-1})})};return this.appProvider.isOnline()?this.wikiOffline.deleteNewPage(e,t,i,o,r,l).then(function(){return s.newPageOnline(e,n,t,i,o,r,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()})}):a()},e.prototype.newPageOnline=function(e,n,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={title:e,content:n,contentformat:"html"};return t=s.wikiOffline.convertToPositiveNumber(t),i=s.wikiOffline.convertToPositiveNumber(i),t&&t>0?a.subwikiid=t:i&&(a.wikiid=i,a.userid=s.wikiOffline.convertToPositiveNumber(o),a.groupid=s.wikiOffline.convertToPositiveNumber(r)),l.write("mod_wiki_new_page",a).then(function(e){return e.pageid||Promise.reject(null)})})},e.prototype.setSubwikiList=function(e,n,t,i,o,r){this.subwikiListsCache[e]={count:t,subwikiSelected:i,userSelected:o,groupSelected:r,subwikis:n}},e.prototype.sortPagesByTitle=function(e,n){return e.sort(function(e,t){var i=e.title>=t.title?1:-1;return n&&(i=-i),i})},e.prototype.wikiHasSubwiki=function(e,n,t,i,o){return this.getSubwikis(e,t,i,o).then(function(e){return!!e.find(function(e){return e.id==n})}).catch(function(){return!1})},e.COMPONENT="mmaModWiki",e.PAGE_CREATED_EVENT="addon_mod_wiki_page_created",e.RENEW_LOCK_TIME=3e4,e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i,o){this.sitesProvider=n,this.courseProvider=t,this.utils=i,this.filepoolProvider=o,this.ROOT_CACHE_KEY="mmaModPage:",this.logger=e.getInstance("AddonModPageProvider")}return n=e,e.prototype.getPageData=function(e,n,t){return this.getPageByKey(e,"coursemodule",n,t)},e.prototype.getPageByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getPageCacheKey(e)};return i.read("mod_page_get_pages_by_courses",r,l).then(function(e){if(e&&e.pages){var i=e.pages.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getPageCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},e.prototype.invalidateContent=function(e,t,i){var o=[];return o.push(this.invalidatePageData(t,i)),o.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),o.push(this.courseProvider.invalidateModule(e,i)),this.utils.allPromises(o)},e.prototype.invalidatePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPageCacheKey(e))})},e.prototype.isGetPageWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_page_get_pages_by_courses")},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e){var n={pageid:e};return this.sitesProvider.getCurrentSite().write("mod_page_view_page",n)},e.COMPONENT="mmaModPage",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i,o){this.sitesProvider=n,this.courseProvider=t,this.filepoolProvider=i,this.utils=o,this.ROOT_CACHE_KEY="mmaModResource:",this.logger=e.getInstance("AddonModResourceProvider")}return n=e,e.prototype.getResourceCacheKey=function(e){return this.ROOT_CACHE_KEY+"resource:"+e},e.prototype.getResourceDataByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getResourceCacheKey(e)};return i.read("mod_resource_get_resources_by_courses",r,l).then(function(e){if(e&&e.resources){var i=e.resources.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getResourceData=function(e,n,t){return this.getResourceDataByKey(e,"coursemodule",n,t)},e.prototype.invalidateContent=function(e,t,i){i=i||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.invalidateResourceData(t,i)),o.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),o.push(this.courseProvider.invalidateModule(e,i,"resource")),this.utils.allPromises(o)},e.prototype.invalidateResourceData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getResourceCacheKey(e))})},e.prototype.isGetResourceWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_resource_get_resources_by_courses")},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e){var n={resourceid:e};return this.sitesProvider.getCurrentSite().write("mod_resource_view_resource",n)},e.COMPONENT="mmaModResource",e;var n}()},,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){this.name="CoreBlockBase",this.blockName="base"}return e.prototype.isEnabled=function(){return!0},e.prototype.getDisplayData=function(e,n,t,i){},e}()},,,function(e,n,t){"use strict";function i(e){return s._42(0,[(e()(),s._16(0,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoProfile(t)&&i}return i},null,null)),s._15(1,4210688,null,0,a.a,[s.p,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a],{siteId:[0,"siteId"]},null),s._33(2,{$a:0}),s._32(131072,g.a,[v.a,s.i])],function(e,n){e(n,1,0,n.component.siteId||null)},function(e,n){var t=n.component;e(n,0,0,t.profileUrl,s._41(n,0,1,s._29(n,3).transform("core.pictureof",e(n,2,0,t.fullname))))})}function o(e){return s._42(0,[(e()(),s._16(0,0,null,null,2,"img",[["role","presentation"],["src","assets/img/user-avatar.png"]],[[8,"alt",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoProfile(t)&&i}return i},null,null)),s._33(1,{$a:0}),s._32(131072,g.a,[v.a,s.i])],null,function(e,n){var t=n.component;e(n,0,0,s._41(n,0,0,s._29(n,2).transform("core.pictureof",e(n,1,0,t.fullname))))})}function r(e){return s._42(0,[(e()(),s._16(0,0,null,null,0,"span",[["class","contact-status online"]],null,null,null,null,null))],null,null)}function l(e){return s._42(0,[(e()(),s._11(16777216,null,null,1,null,i)),s._15(1,16384,null,0,y.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n"])),(e()(),s._11(16777216,null,null,1,null,o)),s._15(4,16384,null,0,y.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n"])),(e()(),s._11(16777216,null,null,1,null,r)),s._15(7,16384,null,0,y.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,null,["\n"])),s._28(null,0)],function(e,n){var t=n.component;e(n,1,0,t.profileUrl);e(n,4,0,!t.profileUrl);e(n,7,0,t.checkOnline&&t.isOnline())},null)}t.d(n,"a",function(){return b}),n.b=l;var s=t(1),a=t(226),u=t(6),c=t(17),d=t(15),f=t(2),p=t(5),h=t(26),m=t(10),_=t(3),g=t(27),v=t(19),y=t(8),b=s._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.timeUtils=n,this.logger=e.getInstance("CoreFormatDatePipe")}return e.prototype.transform=function(e,n,t){if(e=e||Date.now(),n=n||"strftimedaydatetime","string"==typeof e){var i=parseInt(e,10);if(isNaN(i))return this.logger.error("Invalid value received",e),e;e=i}return 0!=n.indexOf("strf")&&0!=n.indexOf("df")||(n="core."+n),void 0===t&&(t=0!=n.indexOf("core.df")),this.timeUtils.userDate(e,n,t)},e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n,t,i,o,r,l,s,a){this.filepoolProvider=t,this.platform=i,this.sitesProvider=o,this.domUtils=r,this.urlUtils=l,this.appProvider=s,this.utils=a,this.element=e.nativeElement||e,this.logger=n.getInstance("CoreExternalContentDirective")}return e.prototype.ngAfterViewInit=function(){var e,n,t=this,i=this.sitesProvider.getCurrentSite(),o=this.siteId||i&&i.getId(),r=this.element.tagName;if(this.handleInlineStyles(o).catch(function(e){t.logger.error("Error treating inline styles.",t.element)}),"A"===r)e="href",n="href";else if("IMG"===r)e="src",n="src";else{if("AUDIO"!==r&&"VIDEO"!==r&&"SOURCE"!==r&&"TRACK"!==r)return;if(e="src",n="target-src","VIDEO"===r){var l=this.element.poster;l&&this.handleExternalContent("poster",l,o).catch(function(){})}}var s=this.element.getAttribute(n)||this.element.getAttribute(e);this.handleExternalContent(e,s,o).catch(function(){})},e.prototype.addSource=function(e){if("SOURCE"===this.element.tagName){var n=document.createElement("source"),t=this.element.getAttribute("type");n.setAttribute("src",e),t&&(this.platform.is("android")&&"video/quicktime"==t?n.setAttribute("type","video/mp4"):n.setAttribute("type",t)),this.element.parentNode.insertBefore(n,this.element)}},e.prototype.handleExternalContent=function(e,n,t){var i=this,o=this.element.tagName;if("VIDEO"==o&&"poster"!=e){var r=this.element;r.textTracks&&(r.textTracks.onaddtrack=function(e){var n=e.track;n&&(n.oncuechange=function(){var e=i.platform.is("tablet")||i.platform.is("android")?90:80;Array.from(n.cues).forEach(function(n){n.snapToLines=!1,n.line=e,n.size=100}),n.oncuechange=null})})}return n&&n.match(/^https?:\/\//i)&&("A"!==o||this.urlUtils.isDownloadableUrl(n))?this.sitesProvider.getSite(t).then(function(r){if(!r.canDownloadFiles()&&i.urlUtils.isPluginFileUrl(n))return i.element.parentElement.removeChild(i.element),Promise.reject(null);var l="IMG"==o||"TRACK"==o||"poster"==e;return("src"===e&&"SOURCE"!==o&&"TRACK"!==o&&"VIDEO"!==o&&"AUDIO"!==o?i.filepoolProvider.getSrcByUrl(t,n,i.component,i.componentId,0,!0,l):i.filepoolProvider.getUrlByUrl(t,n,i.component,i.componentId,0,!0,l)).then(function(r){if(r.match(/^https?:\/\//i)&&(r+="#moodlemobile-embedded"),i.logger.debug("Using URL "+r+" for "+n),"SOURCE"===o?i.addSource(r):i.element.setAttribute(e,r),0===r.indexOf("http")&&"poster"!=e&&("VIDEO"==o||"AUDIO"==o||"A"==o||"SOURCE"==o)){var l="A"==o?"click":"play",s=i.element;if("SOURCE"==o&&!(s=i.domUtils.closest(i.element,"video,audio")))return;s.addEventListener(l,function(){i.appProvider.isWifi()&&i.filepoolProvider.getUrlByUrl(t,n,i.component,i.componentId,0,!1)})}})}):(this.logger.debug("Ignoring non-downloadable URL: "+n),"SOURCE"===o&&this.addSource(n),Promise.reject(null))},e.prototype.handleInlineStyles=function(e){var n=this,t=this.element.getAttribute("style");if(!t)return Promise.resolve();var i=t.match(/https?:\/\/[^"'\) ;]*/g);if(!i||!i.length)return Promise.resolve();var o=[];return(i=this.utils.uniqueArray(i)).forEach(function(i){o.push(n.filepoolProvider.getUrlByUrl(e,i,n.component,n.componentId,0,!0,!0).then(function(e){n.logger.debug("Using URL "+e+" for "+i+" in inline styles"),t=t.replace(new RegExp(i,"gi"),e)}))}),this.utils.allPromises(o).then(function(){n.element.setAttribute("style",t)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(13)),l=function(){function e(e,n,t,i,r,l,s,a,u){this.domUtils=e,this.urlUtils=n,this.sitesProvider=t,this.filepoolProvider=i,this.content=r,this.events=s,this.utils=a,this.platform=u,this.placeholder="",this.name="core-rich-text-editor",this.kbHeight=0,this.minHeight=200,this.rteEnabled=!1,this.editorSupported=!0,this.contentChanged=new o.r,this.element=l.nativeElement}return e.prototype.ngAfterContentInit=function(){var e=this;this.domUtils.isRichTextEditorEnabled().then(function(n){e.rteEnabled=!!n}),this.editorSupported=this.domUtils.isRichTextEditorSupported(),this.editorElement=this.editor.nativeElement,this.setContent(this.control.value),this.editorElement.onchange=this.onChange.bind(this),this.editorElement.onkeyup=this.onChange.bind(this),this.editorElement.onpaste=this.onChange.bind(this),this.editorElement.oninput=this.onChange.bind(this),this.editorElement.onkeydown=this.moveCursor.bind(this),this.valueChangeSubscription=this.control.valueChanges.subscribe(function(n){e.setContent(n)}),document.execCommand("DefaultParagraphSeparator",!1,"p"),this.resizeFunction=this.maximizeEditorSize.bind(this),window.addEventListener("resize",this.resizeFunction);var n=0;this.initHeightInterval=setInterval(function(){e.maximizeEditorSize().then(function(t){(n>=5||0!=t)&&clearInterval(e.initHeightInterval),n++})},750),this.keyboardObs=this.events.on(r.a.KEYBOARD_CHANGE,function(n){e.kbHeight=n,e.maximizeEditorSize()})},e.prototype.maximizeEditorSize=function(){var e=this;this.content.resize();var n=this.utils.promiseDefer();return setTimeout(function(){e.domUtils.getContentHeight(e.content)-e.kbHeight<=0?n.resolve(0):setTimeout(function(){var t;e.platform.is("ios")&&e.kbHeight>0?(t=window.innerHeight-e.getSurroundingHeight(e.element),e.element.getBoundingClientRect().top<40&&window.scrollTo(window.scrollX,window.scrollY-40)):t=e.domUtils.getContentHeight(e.content)-e.kbHeight-e.getSurroundingHeight(e.element),e.element.style.height=t>e.minHeight?e.domUtils.formatPixelsSize(t):"",n.resolve(t)},100)},100),n.promise},e.prototype.getSurroundingHeight=function(e){for(var n=0;e.parentNode&&"ION-CONTENT"!=e.parentNode.tagName;){var t=e.parentNode;if(e.tagName&&"CORE-LOADING"!=e.tagName)for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];o.tagName&&o!=e&&(n+=this.domUtils.getElementHeight(o,!1,!0,!0))}e=t}var r=getComputedStyle(e);if(n+=this.domUtils.getComputedStyleMeasure(r,"paddingTop")+this.domUtils.getComputedStyleMeasure(r,"paddingBottom"),e&&e.parentNode&&"ION-CONTENT"==e.parentNode.tagName){var l=getComputedStyle(e);n-=this.domUtils.getComputedStyleMeasure(l,"paddingTop")+this.domUtils.getComputedStyleMeasure(l,"paddingBottom")}return n},e.prototype.onChange=function(e){this.rteEnabled?this.isNullOrWhiteSpace(this.editorElement.innerText)?this.clearText():(this.restoreExternalContent(),this.control.setValue(this.editorElement.innerHTML,{emitEvent:!1}),this.control.markAsDirty(),this.textarea.value=this.editorElement.innerHTML,this.treatExternalContent()):this.isNullOrWhiteSpace(this.textarea.value)?this.clearText():(this.control.setValue(this.textarea.value,{emitEvent:!1}),this.control.markAsDirty()),this.contentChanged.emit(this.control.value)},e.prototype.moveCursor=function(e){if(this.rteEnabled&&("ArrowLeft"==e.key||"ArrowRight"==e.key)){e.preventDefault(),e.stopPropagation();var n="ArrowLeft"==e.key?-1:1,t=this.getCurrentCursorPosition(this.editorElement);this.setCurrentCursorPosition(this.editorElement,t+n)}},e.prototype.getCurrentCursorPosition=function(e){var n,t=window.getSelection(),i=-1;if(t.focusNode&&e.contains(t.focusNode))for(n=t.focusNode,i=t.focusOffset;n&&!n.isSameNode(e);)if(n.previousSibling)i+=(n=n.previousSibling).textContent.length;else if(null===(n=n.parentNode))break;return i},e.prototype.setCurrentCursorPosition=function(e,n){var t=function(e,n,i){if(0===i.count)n.setEnd(e,0);else if(e&&i.count>0)if(e.hasChildNodes())for(var o=0;o<e.childNodes.length&&(n=t(e.childNodes[o],n,i),0!==i.count);o++);else e.textContent.length<i.count?i.count-=e.textContent.length:(n.setEnd(e,i.count),i.count=0);return n},i=document.createRange();if(void 0===n)i.selectNode(e),i.selectNodeContents(e);else{if(n<0||n>e.textContent.length)return;i.selectNode(e),i.setStart(e,0),i=t(e,i,{count:n})}if(i){var o=window.getSelection();i.collapse(!1),o.removeAllRanges(),o.addRange(i)}},e.prototype.toggleEditor=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.setContent(this.control.value),this.rteEnabled=!this.rteEnabled,setTimeout(function(){n.rteEnabled?n.editorElement.focus():n.textarea.setFocus()})},e.prototype.treatExternalContent=function(){var e=this;if(this.sitesProvider.isLoggedIn()){var n=Array.from(this.editorElement.querySelectorAll("img")),t=this.sitesProvider.getCurrentSiteId(),i=this.sitesProvider.getCurrentSite().canDownloadFiles();n.forEach(function(n){if(!n.getAttribute("data-original-src")){var o=n.src;if(o&&e.urlUtils.isDownloadableUrl(o)&&(i||!e.urlUtils.isPluginFileUrl(o)))return e.filepoolProvider.getSrcByUrl(t,o,e.component,e.componentId).then(function(e){n.getAttribute("data-original-src")||(n.setAttribute("data-original-src",n.src),n.setAttribute("src",e))})}})}},e.prototype.restoreExternalContent=function(){Array.from(this.editorElement.querySelectorAll("img")).forEach(function(e){var n=e.getAttribute("data-original-src");n&&(e.setAttribute("src",n),e.removeAttribute("data-original-src"))})},e.prototype.isNullOrWhiteSpace=function(e){return null==e||void 0===e||(e=e.replace(/[\n\r]/g,""),0===(e=e.split(" ").join("")).length)},e.prototype.setContent=function(e){this.isNullOrWhiteSpace(e)?(this.editorElement.innerHTML="<p></p>",this.textarea.value=""):(this.editorElement.innerHTML=e,this.textarea.value=e,this.treatExternalContent())},e.prototype.clearText=function(){var e=this;this.setContent(null),this.control.setValue(null,{emitEvent:!1}),setTimeout(function(){e.rteEnabled&&e.setCurrentCursorPosition(e.editorElement)},1)},e.prototype.buttonAction=function(e,n){if(e.preventDefault(),e.stopPropagation(),n)if(n.includes("|")){var t=n.split("|")[1];n=n.split("|")[0],document.execCommand(n,!1,t)}else document.execCommand(n,!1)},e.prototype.ngOnDestroy=function(){this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe(),window.removeEventListener("resize",this.resizeFunction),clearInterval(this.initHeightInterval),this.keyboardObs&&this.keyboardObs.off()},e=Object(i.__decorate)([Object(i.__param)(4,Object(o.E)())],e)}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(156),o=(t.n(i),function(){function e(e){this.observables={},this.counterHandlers={},this.logger=e.getInstance("AddonPushNotificationsDelegate"),this.observables.click=new i.Subject,this.observables.receive=new i.Subject}return e.prototype.clicked=function(e){this.observables.click.next(e)},e.prototype.received=function(e){this.observables.receive.next(e)},e.prototype.on=function(e){if(void 0===this.observables[e]){var n=Object.keys(this.observables).join(", ");return this.logger.warn("'"+e+"' event name is not allowed. Use one of the following: '"+n+"'."),new i.Subject}return this.observables[e]},e.prototype.registerCounterHandler=function(e){void 0===this.counterHandlers[e]?(this.logger.debug("Registered handler '"+e+"' as badge counter handler."),this.counterHandlers[e]=e):this.logger.log("Handler '"+e+"' as badge counter handler already registered.")},e.prototype.isCounterHandlerRegistered=function(e){return void 0!==this.counterHandlers[e]},e.prototype.getCounterHandlers=function(){return this.counterHandlers},e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o){this.fileProvider=e,this.sitesProvider=t,this.textUtils=i,this.utils=o,this.tablesSchema=[{name:n.ENTRIES_TABLE,columns:[{name:"glossaryid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"concept",type:"TEXT"},{name:"definition",type:"TEXT"},{name:"definitionformat",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"options",type:"TEXT"},{name:"attachments",type:"TEXT"}],primaryKeys:["glossaryid","concept","timecreated"]}],this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteNewEntry=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){var r={glossaryid:e,concept:t,timecreated:i};return o.getDb().deleteRecords(n.ENTRIES_TABLE,r)})},e.prototype.getAllNewEntries=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.ENTRIES_TABLE).then(function(e){return e.map(t.parseRecord.bind(t))})})},e.prototype.getNewEntry=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l={glossaryid:e,concept:t,timecreated:i};return o.getDb().getRecord(n.ENTRIES_TABLE,l).then(r.parseRecord.bind(r))})},e.prototype.getGlossaryNewEntries=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={glossaryid:e,userId:i||t.getUserId()};return t.getDb().getRecords(n.ENTRIES_TABLE,r).then(function(e){return e.map(o.parseRecord.bind(o))})})},e.prototype.isConceptUsed=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(l){var s={glossaryid:e,concept:t};return l.getDb().getRecords(n.ENTRIES_TABLE,s).then(function(n){return!!n.length&&(n.length>1||!i||r.utils.promiseFails(r.getNewEntry(e,t,i,o)))})}).catch(function(){return!1})},e.prototype.addNewEntry=function(e,t,i,o,r,l,s,a,u,c){var d=this;return this.sitesProvider.getSite(a).then(function(a){var f={glossaryid:e,courseid:o,concept:t,definition:i,definitionformat:"html",options:JSON.stringify(r),attachments:JSON.stringify(l),userid:u||a.getUserId(),timecreated:s||(new Date).getTime()};return(c?d.deleteNewEntry(e,c.concept,c.timecreated,a.getId()):Promise.resolve()).then(function(){return a.getDb().insertRecord(n.ENTRIES_TABLE,f).then(function(){return!1})})})},e.prototype.getGlossaryFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(i,"offlineglossary/"+e)})},e.prototype.getEntryFolder=function(e,n,t,i){var o=this;return this.getGlossaryFolder(e,i).then(function(e){return o.textUtils.concatenatePaths(e,"newentry_"+n+"_"+t)})},e.prototype.parseRecord=function(e){return e.options=this.textUtils.parseJSON(e.options),e.attachments=this.textUtils.parseJSON(e.attachments),e},e.ENTRIES_TABLE="addon_mod_glossary_entrues",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(151),l=(t(236),t(299),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p,h){var m=e.call(this,"AddonModQuizSyncProvider",n,t,i,o,r,l,u)||this;return m.eventsProvider=a,m.quizProvider=c,m.quizOfflineProvider=d,m.prefetchHandler=f,m.questionProvider=p,m.questionDelegate=h,m.componentTranslate=s.translateModuleName("quiz"),m}return Object(i.__extends)(n,e),t=n,n.prototype.finishSync=function(e,n,t,i,o,r,l,s,a){var u=this;return this.quizProvider.invalidateAllQuizData(n.id,t,o,e).catch(function(){}).then(function(){if(s&&o)return u.quizOfflineProvider.removeAttemptAndAnswers(o,e)}).then(function(){if(a)return u.prefetchHandler.prefetchQuizAndLastAttempt(n,!1,e)}).then(function(){return u.setSyncTime(n.id,e).catch(function(){})}).then(function(){return!(!l||u.quizProvider.isAttemptFinished(l.state))&&u.quizProvider.getUserAttempts(n.id,"all",!0,!1,!1,e).then(function(e){for(var n in e){var t=e[n];if(t.id==l.id)return u.quizProvider.isAttemptFinished(t.state)}return!1})}).then(function(e){return{warnings:i,attemptFinished:e}})},n.prototype.hasDataToSync=function(e,n){return this.quizOfflineProvider.getQuizAttempts(e,n).then(function(e){return!!e.length}).catch(function(){return!1})},n.prototype.syncAllQuizzes=function(e){return this.syncOnSites("all quizzes",this.syncAllQuizzesFunc.bind(this),[],e)},n.prototype.syncAllQuizzesFunc=function(e){var n=this;return this.quizOfflineProvider.getAllAttempts(e).then(function(i){var o=[],l=[],s=[];return i.forEach(function(e){-1==l.indexOf(e.quizid)&&(l.push(e.quizid),o.push({id:e.quizid,courseid:e.courseid}))}),o.forEach(function(i){n.syncProvider.isBlocked(r.a.COMPONENT,i.id,e)||s.push(n.quizProvider.getQuizById(i.courseid,i.id,!1,e).then(function(i){return n.syncQuizIfNeeded(i,!1,e).then(function(t){return t&&t.warnings&&t.warnings.length?n.setSyncWarnings(i.id,t.warnings,e).then(function(){return t}):t}).then(function(o){void 0!==o&&n.eventsProvider.trigger(t.AUTO_SYNCED,{quizId:i.id,attemptFinished:o.attemptFinished,warnings:o.warnings},e)})}))}),Promise.all(s)})},n.prototype.syncQuizIfNeeded=function(e,n,t){var i=this;return this.isSyncNeeded(e.id,t).then(function(o){if(o)return i.syncQuiz(e,n,t)})},n.prototype.syncQuiz=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o,l,s=[],a=e.course;return this.isSyncing(e.id,t)?this.getOngoingSync(e.id,t):this.syncProvider.isBlocked(r.a.COMPONENT,e.id,t)?(this.logger.debug("Cannot sync quiz "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync quiz "+e.id+" in site "+t),o=this.quizOfflineProvider.getQuizAttempts(e.id,t).then(function(o){if(!o.length)return i.finishSync(t,e,a,s);var r=o.pop();return i.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,t).then(function(o){var u,c=o.length?o[o.length-1].id:void 0;for(var d in o){var f=o[d];if(f.id==r.id){u=f;break}}return!u||i.quizProvider.isAttemptFinished(u.state)?(s.push(i.translate.instant("addon.mod_quiz.warningattemptfinished")),i.finishSync(t,e,a,s,r.id,r,u,!0)):i.quizOfflineProvider.getAttemptAnswers(r.id,t).then(function(o){if(!o.length)return i.finishSync(t,e,a,s,c,r,u,!0);var d,f=i.questionProvider.convertAnswersArrayToObject(o),p=i.quizOfflineProvider.classifyAnswersInQuestions(f);return i.quizProvider.getQuizAccessInformation(e.id,!1,!0,t).then(function(o){return i.prefetchHandler.getPreflightData(e,o,u,n,"core.settings.synchronization",t)}).then(function(n){l=n;var o=i.quizProvider.getPagesFromLayoutAndQuestions(u.layout,p);return i.quizProvider.getAllQuestionsData(e,u,l,o,!1,!0,t)}).then(function(e){return i.validateQuestions(u.id,e,p,t)}).then(function(n){var o=i.quizOfflineProvider.extractAnswersFromQuestions(p);return d=r.finished&&!n,n&&s.push(i.translate.instant(r.finished?"addon.mod_quiz.warningdatadiscardedfromfinished":"addon.mod_quiz.warningdatadiscarded")),i.quizProvider.processAttempt(e,u,o,l,d,!1,!1,t)}).then(function(){if(!d)return i.quizProvider.logViewAttempt(u.id,r.currentpage,l,!1).catch(function(){})}).then(function(){return i.finishSync(t,e,a,s,c,r,u,!0,!0)})})})}),this.addOngoingSync(e.id,o,t))},n.prototype.validateQuestions=function(e,n,t,i){var o=[],r=!1;for(var l in t){var s=t[l],a=n[l];a&&this.questionDelegate.validateSequenceCheck(a,s.answers[":sequencecheck"])?s.answers[":sequencecheck"]=a.sequencecheck:(r=!0,o.push(this.quizOfflineProvider.removeQuestionAndAnswers(e,Number(l),i)),delete t[l])}return Promise.all(o).then(function(){return r})},n.AUTO_SYNCED="addon_mod_quiz_autom_synced",n;var t}(o.a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(427);var i=function(){function e(e,n,t,i,o,r,l){this.sitesProvider=n,this.appProvider=t,this.utils=i,this.translate=o,this.userProvider=r,this.notesOffline=l,this.ROOT_CACHE_KEY="mmaNotes:",this.logger=e.getInstance("AddonNotesProvider")}return e.prototype.addNote=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l=function(){return r.notesOffline.saveNote(e,n,t,i,o).then(function(){return!1})};return this.appProvider.isOnline()?this.addNoteOnline(e,n,t,i,o).then(function(){return!0}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()},e.prototype.addNoteOnline=function(e,n,t,i,o){var r=this;return this.addNotesOnline([{courseid:n,format:1,publishstate:t,text:i,userid:e}],o).then(function(e){return e&&e[0]&&-1===e[0].noteid?Promise.reject(r.utils.createFakeWSError(e[0].errormessage)):r.invalidateNotes(n,o).catch(function(){})})},e.prototype.addNotesOnline=function(e,n){return e&&e.length?this.sitesProvider.getSite(n).then(function(n){return n.write("core_notes_create_notes",{notes:e})}):Promise.resolve()},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("enablenotes")})},e.prototype.isPluginAddNoteEnabledForCourse=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.utils.promiseWorks(n.read("core_notes_create_notes",{notes:[{userid:-1,publishstate:"personal",courseid:e,text:"",format:1}]}))})},e.prototype.isPluginViewNotesEnabledForCourse=function(e,n){return this.utils.promiseWorks(this.getNotes(e,!1,!0,n))},e.prototype.getNotesCacheKey=function(e){return this.ROOT_CACHE_KEY+"notes:"+e},e.prototype.getNotes=function(e,n,t,i){var o=this;return this.logger.debug("Get notes for course "+e),this.sitesProvider.getSite(i).then(function(r){var l={courseid:e},s={cacheKey:o.getNotesCacheKey(e)};return n&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("core_notes_get_course_notes",l,s).then(function(n){return t?n:o.notesOffline.getNotesForCourse(e,i).then(function(e){return e.forEach(function(e){var t=e.publishstate+"notes";n[t]||(n[t]=[]),e.offline=!0,n[t].unshift(e)}),n})})})},e.prototype.getNotesUserData=function(e,n){var t=this,i=e.map(function(e){return t.userProvider.getProfile(e.userid,e.courseid,!0).then(function(n){e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl||null}).catch(function(){e.userfullname=t.translate.instant("addon.notes.userwithid",{id:e.userid})})});return Promise.all(i).then(function(){return e})},e.prototype.invalidateNotes=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getNotesCacheKey(e))})},e.prototype.logView=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_notes_view_notes",{courseid:e,userid:0})})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i,o,r,l,s,a){this.sitesProvider=n,this.textUtils=t,this.fileProvider=i,this.filepoolProvider=o,this.http=r,this.utils=l,this.courseProvider=s,this.domUtils=a,this.ROOT_CACHE_KEY="mmaModBook:",this.logger=e.getInstance("AddonModBookProvider")}return n=e,e.prototype.getBook=function(e,n,t){return this.getBookByField(e,"coursemodule",n,t)},e.prototype.getBookByField=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getBookDataCacheKey(e)};return i.read("mod_book_get_books_by_courses",r,l).then(function(e){if(e&&e.books)for(var i in e.books){var o=e.books[i];if(o[n]==t)return o}return Promise.reject(null)})})},e.prototype.getBookDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"book:"+e},e.prototype.getChapterContent=function(e,t,i){var o=this,r=e[t]?e[t].indexUrl:void 0,l=this.sitesProvider.getCurrentSiteId();return r?this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(l,r,!1,n.COMPONENT,i).then(function(n){return o.http.get(n).toPromise().then(function(n){var i=n.text();return"string"!=typeof i?Promise.reject(null):o.domUtils.restoreSourcesInHtml(i,e[t].paths)})}):Promise.resolve(this.sitesProvider.getCurrentSite().fixPluginfileURL(r)):(this.logger.debug("Could not locate the index chapter"),Promise.reject(null))},e.prototype.getContentsMap=function(e){var n=this,t={};return e?(e.forEach(function(e){if(n.isFileDownloadable(e)){var i=void 0,o=void 0,r=void 0,l=void 0;(o=e.filepath.match(/\/(\d+)\//))&&o[1]&&(r=e.filepath=="/"+(i=o[1])+"/",t[i]=t[i]||{paths:{}},"index.html"==e.filename&&r?t[i].indexUrl=e.fileurl:(l=r?e.fileurl.split("mod_book/chapter"+e.filepath)[1]||e.filename:e.filepath.replace("/"+i+"/","")+e.filename,t[i].paths[n.textUtils.decodeURIComponent(l)]=e.fileurl))}}),t):t},e.prototype.getFirstChapter=function(e){if(e&&e.length)return e[0].id},e.prototype.getNextChapter=function(e,n){for(var t="0",i=0;i<e.length;i++)if(e[i].id==n&&void 0!==e[i+1]){t=e[i+1].id;break}return t},e.prototype.getPreviousChapter=function(e,n){for(var t="0",i=0;i<e.length&&e[i].id!=n;i++)t=e[i].id;return t},e.prototype.getToc=function(e){return e&&e.length?this.textUtils.parseJSON(e[0].content,[]):[]},e.prototype.getTocList=function(e){var n=[];return this.getToc(e).forEach(function(e){var t=e.href.replace("/index.html","");n.push({id:t,title:e.title,level:e.level}),e.subitems&&e.subitems.forEach(function(e){t=e.href.replace("/index.html",""),n.push({id:t,title:e.title,level:e.level})})}),n},e.prototype.invalidateBookData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getBookDataCacheKey(e))})},e.prototype.invalidateContent=function(e,t,i){i=i||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.invalidateBookData(t,i)),o.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),o.push(this.courseProvider.invalidateModule(e,i)),this.utils.allPromises(o)},e.prototype.isFileDownloadable=function(e){return"file"===e.type},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e,n){var t={bookid:e,chapterid:n};return this.sitesProvider.getCurrentSite().write("mod_book_view_book",t)},e.COMPONENT="mmaModBook",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i,o,r){this.appProvider=e,this.courseProvider=n,this.filepoolProvider=t,this.sitesProvider=i,this.textUtils=o,this.utils=r,this.ROOT_CACHE_KEY="mmaModImscp:"}return n=e,e.prototype.getToc=function(e){return e&&e.length?JSON.parse(e[0].content):[]},e.prototype.createItemList=function(e){var n=[];return this.getToc(e).forEach(function(e){n.push({href:e.href,title:e.title,level:e.level}),e.subitems.forEach(function(e){n.push({href:e.href,title:e.title,level:e.level})})}),n},e.prototype.getPreviousItem=function(e,n){var t=this.getItemPosition(e,n);if(-1!=t)for(var i=t-1;i>=0;i--)if(e[i]&&e[i].href)return e[i].href;return""},e.prototype.getNextItem=function(e,n){var t=this.getItemPosition(e,n);if(-1!=t)for(var i=t+1;i<e.length;i++)if(e[i]&&e[i].href)return e[i].href;return""},e.prototype.getItemPosition=function(e,n){for(var t=0;t<e.length;t++)if(e[t].href==n)return t;return-1},e.prototype.checkSpecialFiles=function(e){return"imsmanifest.xml"==e},e.prototype.getImscpDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"imscp:"+e},e.prototype.getImscpByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getImscpDataCacheKey(e)};return i.read("mod_imscp_get_imscps_by_courses",r,l).then(function(e){if(e&&e.imscps){var i=e.imscps.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getImscp=function(e,n,t){return this.getImscpByKey(e,"coursemodule",n,t)},e.prototype.getFileUrlFromContents=function(e,n){var t,i=this;return e.forEach(function(e){if("file"==e.type&&!t){var o=i.textUtils.concatenatePaths(e.filepath,e.filename),r="/"===o.charAt(0)?o.substr(1):"/"+o;o!==n&&r!==n||(t=e.fileurl)}}),t},e.prototype.getIframeSrc=function(e,n){var t=this;if(!n){var i=this.getToc(e.contents);if(!i.length)return Promise.reject(null);n=i[0].href}var o=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirUrlByUrl(o,e.url).then(function(e){return t.textUtils.concatenatePaths(e,n)}).catch(function(){if(t.appProvider.isOnline()){var i=t.getFileUrlFromContents(e.contents,n);if(i)return t.sitesProvider.getSite(o).then(function(e){return e.fixPluginfileURL(i)})}return Promise.reject(null)})},e.prototype.invalidateContent=function(e,t,i){i=i||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.invalidateImscpData(t,i)),o.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),o.push(this.courseProvider.invalidateModule(e,i)),this.utils.allPromises(o)},e.prototype.invalidateImscpData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getImscpDataCacheKey(e))})},e.prototype.isFileDownloadable=function(e){return"file"===e.type&&!this.checkSpecialFiles(e.filename)},e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},e.prototype.logView=function(e){var n={imscpid:e};return this.sitesProvider.getCurrentSite().write("mod_imscp_view_imscp",n)},e.COMPONENT="mmaModImscp",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(151),o=function(){function e(e,t,i,o,r,l,s){this.sitesProvider=t,this.timeUtils=i,this.questionProvider=o,this.translate=r,this.utils=l,this.behaviourDelegate=s,this.tablesSchema=[{name:n.ATTEMPTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"attempt",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"quizid",type:"INTEGER"},{name:"currentpage",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"finished",type:"INTEGER"}]}],this.logger=e.getInstance("AddonModQuizOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.classifyAnswersInQuestions=function(e){var n={};for(var t in e){var i=this.questionProvider.getQuestionSlotFromName(t),o=this.questionProvider.removeQuestionPrefix(t);n[i]||(n[i]={answers:{},prefix:t.substr(0,t.indexOf(o))}),n[i].answers[o]=e[t]}return n},e.prototype.extractAnswersFromQuestions=function(e){var n={};for(var t in e){var i=e[t];for(var o in i.answers)n[i.prefix+o]=i.answers[o]}return n},e.prototype.getAllAttempts=function(e){return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.ATTEMPTS_TABLE)})},e.prototype.getAttemptAnswers=function(e,n){return this.questionProvider.getAttemptAnswers(i.a.COMPONENT,e,n)},e.prototype.getAttemptById=function(e,t){return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(n.ATTEMPTS_TABLE,{id:e})})},e.prototype.getQuizAttempts=function(e,t,i){return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().getRecords(n.ATTEMPTS_TABLE,{quizid:e,userid:i})})},e.prototype.loadQuestionsLocalStates=function(e,n,t){var o=this,r=[];return n.forEach(function(n){r.push(o.questionProvider.getQuestion(i.a.COMPONENT,e,n.slot,t).then(function(e){var t=o.questionProvider.getState(e.state);n.state=e.state,n.status=o.translate.instant("core.question."+t.status)}).catch(function(){}))}),Promise.all(r).then(function(){return n})},e.prototype.processAttempt=function(e,t,i,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a,u=this.timeUtils.timestamp();return this.sitesProvider.getSiteDb(l).then(function(n){return a=n,s.getAttemptById(t.id,l).catch(function(){return{quizid:e.id,userid:t.userid,id:t.id,courseid:e.course,timecreated:u,attempt:t.attempt,currentpage:t.currentpage}})}).then(function(e){return e.timemodified=u,e.finished=r?1:0,a.insertRecord(n.ATTEMPTS_TABLE,e)}).then(function(){return s.saveAnswers(e,t,i,o,u,l)})},e.prototype.removeAttemptAndAnswers=function(e,t){t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.questionProvider.removeAttemptAnswers(i.a.COMPONENT,e,t)),o.push(this.questionProvider.removeAttemptQuestions(i.a.COMPONENT,e,t)),o.push(this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(n.ATTEMPTS_TABLE,{id:e})})),Promise.all(o)},e.prototype.removeQuestionAndAnswers=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.questionProvider.removeQuestion(i.a.COMPONENT,e,n,t)),o.push(this.questionProvider.removeQuestionAnswers(i.a.COMPONENT,e,n,t)),Promise.all(o)},e.prototype.saveAnswers=function(e,n,t,o,r,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId(),r=r||this.timeUtils.timestamp();var a={},u={},c=[];for(var d in o){var f=this.questionProvider.getQuestionSlotFromName(d),p=this.questionProvider.removeQuestionPrefix(d);t[f]&&(a[f]||(a[f]=t[f],a[f].answers={}),a[f].answers[p]=o[d])}var h=function(t){var o=a[t];c.push(m.behaviourDelegate.determineNewState(e.preferredbehaviour,i.a.COMPONENT,n.id,o,l).then(function(e){e&&e.name!=o.state&&(u[o.slot]=e.name)}))},m=this;for(var f in a)h(f);return Promise.all(c).then(function(){return s.questionProvider.saveAnswers(i.a.COMPONENT,e.id,n.id,n.userid,o,r,l)}).then(function(){c=[];for(var t in u){c.push(s.questionProvider.saveQuestion(i.a.COMPONENT,e.id,n.id,n.userid,a[t],u[t],l))}return s.utils.allPromises(c).catch(function(e){s.logger.error("Error saving question state",e)})})},e.prototype.setAttemptCurrentPage=function(e,t,i){return this.sitesProvider.getSiteDb(i).then(function(i){return i.updateRecords(n.ATTEMPTS_TABLE,{currentpage:t},{id:e})})},e.ATTEMPTS_TABLE="addon_mod_quiz_attempts",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(193),o=function(){function e(e,t,i,o,r,l,s){this.sitesProvider=t,this.timeUtils=i,this.syncProvider=o,this.utils=r,this.textUtils=l,this.userProvider=s,this.tablesSchema=[{name:n.ATTEMPTS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"snapshot",type:"TEXT"}],primaryKeys:["scormid","userid","attempt"]},{name:n.TRACKS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"scoid",type:"INTEGER",notNull:!0},{name:"element",type:"TEXT",notNull:!0},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"synced",type:"INTEGER"}],primaryKeys:["scormid","userid","attempt","scoid","element"]}],this.logger=e.getInstance("AddonModScormOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.changeAttemptNumber=function(e,t,o,r,l){var s=this;return this.sitesProvider.getSite(r).then(function(r){l=l||r.getUserId(),s.logger.debug("Change attempt number from "+t+" to "+o+" in SCORM "+e);var a=r.getDb(),u={scormid:e,userid:l,attempt:t},c={scormid:e,userid:l,attempt:o},d={attempt:o,timemodified:s.timeUtils.timestamp()};return s.syncProvider.blockOperation(i.a.COMPONENT,e,"changeAttemptNumber",r.id),a.updateRecords(n.ATTEMPTS_TABLE,d,u).then(function(){return d={attempt:o,synced:0},a.updateRecords(n.TRACKS_TABLE,d,u).catch(function(e){return a.updateRecords(n.ATTEMPTS_TABLE,{attempt:t},c).then(function(){return Promise.reject(e)})})}).finally(function(){s.syncProvider.unblockOperation(i.a.COMPONENT,e,"changeAttemptNumber",r.id)})})},e.prototype.createNewAttempt=function(e,t,o,r,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId(),a.logger.debug("Creating new offline attempt "+t+" in SCORM "+e.id),a.syncProvider.blockOperation(i.a.COMPONENT,e.id,"createNewAttempt",l.id);var u=l.getDb(),c={scormid:e.id,userid:s,attempt:t,courseid:e.course,timecreated:a.timeUtils.timestamp(),timemodified:a.timeUtils.timestamp(),snapshot:null};return r&&(c.snapshot=JSON.stringify(a.removeDefaultData(r))),u.insertRecord(n.ATTEMPTS_TABLE,c).then(function(){var n=[];for(var i in o){var r=o[i],u=[];for(var c in r.userdata)u.push({element:c,value:r.userdata[c]});n.push(a.saveTracks(e,r.scoid,t,u,o,l.id,s))}return Promise.all(n)}).finally(function(){a.syncProvider.unblockOperation(i.a.COMPONENT,e.id,"createNewAttempt",l.id)})})},e.prototype.deleteAttempt=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){o=o||i.getUserId(),r.logger.debug("Delete offline attempt "+t+" in SCORM "+e);var l=[],s=i.getDb();return l.push(s.deleteRecords(n.ATTEMPTS_TABLE,{scormid:e,userid:o,attempt:t})),l.push(s.deleteRecords(n.TRACKS_TABLE,{scormid:e,userid:o,attempt:t})),Promise.all(l)})},e.prototype.formatInteractions=function(e){var n={};n.score_raw="",n.status="",n.total_time="00:00:00",n.session_time="00:00:00";for(var t in e){var i=e[t];if("score_raw"==t||"status"==t||"total_time"==t||"session_time"==t)return;switch(n[t]=i,t){case"cmi.core.lesson_status":case"cmi.completion_status":"not attempted"==i&&(i="notattempted"),n.status=i;break;case"cmi.core.score.raw":case"cmi.score.raw":n.score_raw=this.textUtils.roundToDecimals(i,2);break;case"cmi.core.session_time":case"cmi.session_time":n.session_time=i;break;case"cmi.core.total_time":case"cmi.total_time":n.total_time=i}}return n},e.prototype.getAllAttempts=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.ATTEMPTS_TABLE)}).then(function(e){return e.forEach(function(e){e.snapshot=t.textUtils.parseJSON(e.snapshot)}),e})},e.prototype.getAttempt=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(i).then(function(i){return o=o||i.getUserId(),i.getDb().getRecord(n.ATTEMPTS_TABLE,{scormid:e,userid:o,attempt:t})}).then(function(e){return e.snapshot=r.textUtils.parseJSON(e.snapshot),e})},e.prototype.getAttemptCreationTime=function(e,n,t,i){return this.getAttempt(e,n,t,i).catch(function(){return{}}).then(function(e){return e.timecreated})},e.prototype.getAttempts=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().getRecords(n.ATTEMPTS_TABLE,{scormid:e,userid:i})}).then(function(e){return e.forEach(function(e){e.snapshot=o.textUtils.parseJSON(e.snapshot)}),e})},e.prototype.getAttemptSnapshot=function(e,n,t,i){return this.getAttempt(e,n,t,i).catch(function(){return{}}).then(function(e){return e.snapshot})},e.prototype.getLaunchUrlsFromScos=function(e){var n={};return e.forEach(function(e){n[e.id]=e.launch}),n},e.prototype.getScormStoredData=function(e,t,i,o,r,l){var s=this;return i&&o?Promise.resolve([]):this.sitesProvider.getSite(r).then(function(r){l=l||r.getUserId();var s={scormid:e,userid:l,attempt:t};return i?s.synced=0:o&&(s.synced=1),r.getDb().getRecords(n.TRACKS_TABLE,s)}).then(function(e){return e.forEach(function(e){e.value=s.textUtils.parseJSON(e.value)}),e})},e.prototype.getScormUserData=function(e,n,t,i,o){var r=this,l="",s="";return this.sitesProvider.getSite(i).then(function(e){if((o=o||e.getUserId())!=e.getUserId())return r.userProvider.getProfile(o).then(function(e){l=e.fullname,s=e.username||""}).catch(function(){});l=e.getInfo().fullname,s=e.getInfo().username}).then(function(){return r.getScormStoredData(e,n,!1,!1,i,o).then(function(e){var n={},i=r.getLaunchUrlsFromScos(t);e.forEach(function(e){var t=e.scoid;n[t]||(n[t]={scoid:t,userdata:{userid:o,scoid:t,timemodified:0}}),n[t].userdata[e.element]=e.value,e.timemodified>n[t].userdata.timemodified&&(n[t].userdata.timemodified=e.timemodified)});for(var a in n){(u=n[a]).userdata=r.formatInteractions(u.userdata)}t.forEach(function(e){n[e.id]||(n[e.id]={scoid:e.id,userdata:{status:"",score_raw:""}})});for(var a in n){var u;(u=n[a]).defaultdata={},u.defaultdata["cmi.core.student_id"]=s,u.defaultdata["cmi.core.student_name"]=l,u.defaultdata["cmi.core.lesson_mode"]="normal",u.defaultdata["cmi.core.credit"]="credit",u.defaultdata["cmi.core.entry"]=""===u.userdata.status?"ab-initio":"suspend"===u.userdata["cmi.core.exit"]?"resume":"",u.defaultdata["cmi.student_data.mastery_score"]=r.scormIsset(u.userdata,"masteryscore"),u.defaultdata["cmi.student_data.max_time_allowed"]=r.scormIsset(u.userdata,"max_time_allowed"),u.defaultdata["cmi.student_data.time_limit_action"]=r.scormIsset(u.userdata,"time_limit_action"),u.defaultdata["cmi.core.total_time"]=r.scormIsset(u.userdata,"cmi.core.total_time","00:00:00"),u.defaultdata["cmi.launch_data"]=i[u.scoid],u.defaultdata["cmi.core.lesson_location"]=r.scormIsset(u.userdata,"cmi.core.lesson_location"),u.defaultdata["cmi.core.lesson_status"]=r.scormIsset(u.userdata,"cmi.core.lesson_status"),u.defaultdata["cmi.core.score.raw"]=r.scormIsset(u.userdata,"cmi.core.score.raw"),u.defaultdata["cmi.core.score.max"]=r.scormIsset(u.userdata,"cmi.core.score.max"),u.defaultdata["cmi.core.score.min"]=r.scormIsset(u.userdata,"cmi.core.score.min"),u.defaultdata["cmi.core.exit"]=r.scormIsset(u.userdata,"cmi.core.exit"),u.defaultdata["cmi.suspend_data"]=r.scormIsset(u.userdata,"cmi.suspend_data"),u.defaultdata["cmi.comments"]=r.scormIsset(u.userdata,"cmi.comments"),u.defaultdata["cmi.student_preference.language"]=r.scormIsset(u.userdata,"cmi.student_preference.language"),u.defaultdata["cmi.student_preference.audio"]=r.scormIsset(u.userdata,"cmi.student_preference.audio","0"),u.defaultdata["cmi.student_preference.speed"]=r.scormIsset(u.userdata,"cmi.student_preference.speed","0"),u.defaultdata["cmi.student_preference.text"]=r.scormIsset(u.userdata,"cmi.student_preference.text","0"),u.userdata.student_id=s,u.userdata.student_name=l,u.userdata.mode=u.defaultdata["cmi.core.lesson_mode"],u.userdata.credit=u.defaultdata["cmi.core.credit"],u.userdata.entry=u.defaultdata["cmi.core.entry"]}return n})})},e.prototype.insertTrack=function(e,n,t,i,o,r,l,s,a){var u=this;return this.sitesProvider.getSite(s).then(function(s){a=a||s.getUserId();var c=[],d=(l=l||{}).userdata||{},f=s.getDb(),p=!1;return r&&("cmi.core.lesson_status"==i&&"incomplete"==o&&d["cmi.core.score.raw"]&&(o="completed"),"cmi.core.score.raw"==i&&"incomplete"==d["cmi.core.lesson_status"]&&(p=!0,c.push(u.insertTrackToDB(f,a,e,n,t,"cmi.core.lesson_status","completed")))),Promise.all(c).then(function(){if(!d[i]||"x.start.time"!=i){var r=u.insertTrackToDB(f,a,e,n,t,i,o);return r.catch(function(i){return p?(r=u.insertTrackToDB(f,a,e,n,t,"cmi.core.lesson_status","incomplete")).then(function(){return Promise.reject(i)}):Promise.reject(null)})}})})},e.prototype.insertTrackToDB=function(e,t,i,o,r,l,s,a){var u={userid:t,scormid:i,scoid:o,attempt:r,element:l,value:void 0===s?null:JSON.stringify(s),timemodified:this.timeUtils.timestamp(),synced:0};return a?(e.insertRecord(n.TRACKS_TABLE,u),!0):e.insertRecord(n.TRACKS_TABLE,u)},e.prototype.insertTrackSync=function(e,n,t,i,o,r,l,s){if(l=l||{},s=s||this.sitesProvider.getCurrentSiteUserId(),!this.sitesProvider.isLoggedIn())return!1;var a=l.userdata||{},u=this.sitesProvider.getCurrentSite().getDb(),c=!1;return!(r&&("cmi.core.lesson_status"==i&&"incomplete"==o&&a["cmi.core.score.raw"]&&(o="completed"),"cmi.core.score.raw"==i&&"incomplete"==a["cmi.core.lesson_status"]&&(c=!0,!this.insertTrackToDB(u,s,e,n,t,"cmi.core.lesson_status","completed",!0))))&&(a[i]&&"x.start.time"==i?void 0:!!this.insertTrackToDB(u,s,e,n,t,i,o,!0)||(c&&this.insertTrackToDB(u,s,e,n,t,"cmi.core.lesson_status","incomplete",!0),!1))},e.prototype.markAsSynced=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(o).then(function(o){return r=r||o.getUserId(),l.logger.debug("Mark SCO "+i+" as synced for attempt "+t+" in SCORM "+e),o.getDb().updateRecords(n.TRACKS_TABLE,{synced:1},{scormid:e,userid:r,attempt:t,scoid:i,synced:0})})},e.prototype.removeDefaultData=function(e){var n=this.utils.clone(e);for(var t in n)delete n[t].defaultdata;return n},e.prototype.saveTracks=function(e,n,t,o,r,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(u){s=s||u.getUserId(),a.syncProvider.blockOperation(i.a.COMPONENT,e.id,"saveTracksOffline",l);var c=[];return o.forEach(function(i){c.push(a.insertTrack(e.id,n,t,i.element,i.value,e.forcecompleted,r[n],l,s))}),Promise.all(c).finally(function(){a.syncProvider.unblockOperation(i.a.COMPONENT,e.id,"saveTracksOffline",l)})})},e.prototype.saveTracksSync=function(e,n,t,i,o,r){var l=this;r=r||this.sitesProvider.getCurrentSiteUserId();var s=!0;return i.forEach(function(i){l.insertTrackSync(e.id,n,t,i.element,i.value,e.forcecompleted,o[n],r)||(s=!1)}),s},e.prototype.scormIsset=function(e,n,t){return void 0===t&&(t=""),void 0!==e[n]?e[n]:t},e.prototype.setAttemptSnapshot=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId(),l.logger.debug("Set snapshot for attempt "+t+" in SCORM "+e);var s={timemodified:l.timeUtils.timestamp(),snapshot:JSON.stringify(l.removeDefaultData(i))};return o.getDb().updateRecords(n.ATTEMPTS_TABLE,s,{scormid:e,userid:r,attempt:t})})},e.ATTEMPTS_TABLE="addon_mod_scorm_offline_attempts",e.TRACKS_TABLE="addon_mod_scorm_offline_scos_tracks",e;var n}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6);var i=function(){function e(e){this.handlers={},this.logger=e.getInstance("CorePluginFileDelegate")}return e.prototype.getPluginHandler=function(e){if(void 0!==this.handlers[e])return this.handlers[e]},e.prototype.getComponentRevisionRegExp=function(e){var n=this.getPluginHandler(e[1]);if(n&&n.getComponentRevisionRegExp)return n.getComponentRevisionRegExp(e)},e.prototype.registerHandler=function(e){return void 0!==this.handlers[e.component]?(this.logger.log("Handler '"+e.component+"' already registered"),!1):(this.logger.log("Registered handler '"+e.component+"'"),this.handlers[e.component]=e,!0)},e.prototype.removeRevisionFromUrl=function(e,n){var t=this.getPluginHandler(n[1]);if(t&&t.getComponentRevisionRegExp&&t.getComponentRevisionReplace){var i=t.getComponentRevisionRegExp(n);if(i)return e.replace(i,t.getComponentRevisionReplace(n))}return e},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return d});t(0);var i=t(1),o=t(4),r=t(6),l=t(5),s=t(11),a=t(41),u=t(56),c=t(1387),d=function(){function e(e,n){void 0===n&&(n="CoreCourseModuleMainResourceComponent"),this.fetchContentDefaultError="core.course.errorgetmodule",this.textUtils=e.get(s.a),this.courseHelper=e.get(a.a),this.translate=e.get(o.b),this.domUtils=e.get(l.a),this.moduleDelegate=e.get(u.a),this.courseSectionPage=e.get(c.a,null),this.dataRetrieved=new i.r;var t=e.get(r.a);this.logger=t.getInstance(n)}return e.prototype.ngOnInit=function(){this.description=this.module.description,this.componentId=this.module.id,this.externalUrl=this.module.url,this.loaded=!1,this.refreshIcon="spinner"},e.prototype.doRefresh=function(e,n,t){var i=this;if(void 0===t&&(t=!1),this.loaded&&this.module){return(this.courseSectionPage&&!this.moduleDelegate.displayRefresherInSingleActivity(this.module.modname)?this.courseSectionPage.doRefresh():Promise.resolve()).finally(function(){return i.refreshContent(!0,t).finally(function(){e&&e.complete(),n&&n()})})}return Promise.resolve()},e.prototype.refreshContent=function(e,n){var t=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner";var i;try{i=this.invalidateContent()}catch(e){this.logger.error(e),i=Promise.resolve()}return i.catch(function(){}).then(function(){return t.loadContent(!0)}).finally(function(){t.refreshIcon="refresh"})},e.prototype.invalidateContent=function(){return Promise.resolve()},e.prototype.fetchContent=function(e){return Promise.resolve()},e.prototype.loadContent=function(e){var n=this;if(!this.module)return Promise.resolve();var t;try{t=this.fetchContent(e)}catch(e){this.logger.error(e),t=Promise.resolve()}return t.catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError,!0)}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},e.prototype.fillContextMenu=function(e){void 0===e&&(e=!1),this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},e.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id)},e.prototype.prefetch=function(){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId)},e.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.contextMenuStatusObserver&&this.contextMenuStatusObserver.off()},e.prototype.ionViewDidEnter=function(){this.isCurrentView=!0},e.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e,n){this.sitePluginsProvider=e,this.utils=n,this.content="",this.jsData={}}return e.prototype.componentCreated=function(e){e&&this.handlerSchema&&this.handlerSchema.methodJSResult&&this.handlerSchema.methodJSResult.componentInit&&this.handlerSchema.methodJSResult.componentInit.apply(e)},e.prototype.getHandlerData=function(e){var n=this.sitePluginsProvider.getSitePluginHandler(e);this.handlerSchema=n&&n.handlerSchema,this.handlerSchema&&(this.handlerSchema.methodTemplates&&this.handlerSchema.methodTemplates.length&&(this.content=n.handlerSchema.methodTemplates[0].html,this.jsData.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(n.handlerSchema.methodTemplates,"id","html")),this.handlerSchema.methodOtherdata&&(this.jsData.CONTENT_OTHERDATA=this.handlerSchema.methodOtherdata),this.handlerSchema.methodJSResult&&(this.jsData.CONTENT_JS_RESULT=this.handlerSchema.methodJSResult))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(6),o=t(5),r=function(){function e(e,n){void 0===n&&(n="AddonBlockComponent"),this.domUtils=e.get(o.a);var t=e.get(i.a);this.logger=t.getInstance(n)}return e.prototype.ngOnInit=function(){this.loaded=!1,this.loadContent()},e.prototype.doRefresh=function(e,n,t){return void 0===t&&(t=!1),this.loaded?this.refreshContent(t).finally(function(){e&&e.complete(),n&&n()}):Promise.resolve()},e.prototype.refreshContent=function(e){var n=this;void 0===e&&(e=!1);var t;try{t=this.invalidateContent()}catch(e){this.logger.error(e),t=Promise.resolve()}return t.catch(function(){}).then(function(){return n.loadContent(!0,e)})},e.prototype.invalidateContent=function(){return Promise.resolve()},e.prototype.loadContent=function(e,n){var t=this;void 0===n&&(n=!1);var i;try{i=this.fetchContent(e)}catch(e){this.logger.error(e),i=Promise.resolve()}return i.catch(function(e){t.domUtils.showErrorModalDefault(e,t.fetchContentDefaultError,!0)}).finally(function(){t.loaded=!0})},e.prototype.fetchContent=function(e){return Promise.resolve()},e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(261),t(1363),t(566);var i=function(){return function(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4),t(115),t(208);var i=t(96),o=function(){function e(e,n,t,i,o,r,l){this.sitesProvider=e,this.dataProvider=n,this.translate=t,this.fieldsDelegate=i,this.dataOffline=o,this.fileUploaderProvider=r,this.textUtils=l}return e.prototype.applyOfflineActions=function(e,n,t){var i=this,o=[];return n.forEach(function(n){switch(n.action){case"approve":e.approved=!0;break;case"disapprove":e.approved=!1;break;case"delete":e.deleted=!0;break;case"add":case"edit":var r={};n.fields.forEach(function(e){void 0===r[e.fieldid]&&(r[e.fieldid]={}),e.subfield?r[e.fieldid][e.subfield]=i.textUtils.parseJSON(e.value):r[e.fieldid][""]=i.textUtils.parseJSON(e.value)}),t.forEach(function(n){i.fieldsDelegate.hasFiles(n)?o.push(i.getStoredFiles(e.dataid,e.id,n.id).then(function(t){e.contents[n.id]=i.fieldsDelegate.overrideData(n,e.contents[n.id],r[n.id],t)})):e.contents[n.id]=i.fieldsDelegate.overrideData(n,e.contents[n.id],r[n.id])})}}),Promise.all(o).then(function(){return e})},e.prototype.displayShowFields=function(e,n,t,i,o){if(!e)return"";var r,l;n.forEach(function(n){r=(r="[["+n.name+"]]").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),r=new RegExp(r,"gi"),e=e.replace(r,l='<addon-mod-data-field-plugin [field]="fields['+n.id+']" [value]="entries['+t.id+"].contents["+n.id+']" mode="'+i+'" [database]="data" (gotoEntry)="gotoEntry('+t.id+')"></addon-mod-data-field-plugin>')});for(var s in o)r=new RegExp("##"+s+"##","gi"),o[s]?(l="moreurl"==s?this.sitesProvider.getCurrentSite().getURL()+"/mod/data/view.php?d={{data.id}}&rid="+t.id:"approvalstatus"==s?this.translate.instant("addon.mod_data."+(t.approved?"approved":"notapproved")):'<addon-mod-data-action action="'+s+'" [entry]="entries['+t.id+']" mode="'+i+'" [database]="data"></addon-mod-data-action>',e=e.replace(r,l)):e=e.replace(r,"");return e},e.prototype.getActions=function(e,n,t){return{more:!0,moreurl:!0,user:!0,userpicture:!0,timeadded:!0,timemodified:!0,edit:t.canmanageentry&&!t.deleted,delete:t.canmanageentry,approve:e.approval&&n.canapprove&&!t.approved&&!t.deleted,disapprove:e.approval&&n.canapprove&&t.approved&&!t.deleted,approvalstatus:e.approval,comments:e.comments,delcheck:!1,export:!1}},e.prototype.getAllEntriesIds=function(e,n,t,i,o){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.dataProvider.fetchAllEntries(e,n,void 0,void 0,void 0,t,i,o).then(function(e){return e.map(function(e){return e.id})})},e.prototype.getDefaultTemplate=function(e,n){var t=[];return"list"==e&&t.push("##delcheck##<br />"),t.push('<div class="defaulttemplate">','<table class="mod-data-default-template ##approvalstatus##">',"<tbody>"),n.forEach(function(e){t.push('<tr class="">','<td class="template-field cell c0" style="">',e.name,": </td>",'<td class="template-token cell c1 lastcol" style="">[[',e.name,"]]</td>","</tr>")}),"list"==e?t.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##more##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"single"==e?t.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"asearch"==e&&t.push('<tr class="searchcontrols">','<td class="template-field cell c0" style="">Author first name: </td>','<td class="template-token cell c1 lastcol" style="">##firstname##</td>',"</tr>",'<tr class="searchcontrols lastrow">','<td class="template-field cell c0" style="">Author surname: </td>','<td class="template-token cell c1 lastcol" style="">##lastname##</td>',"</tr>"),t.push("</tbody>","</table>","</div>"),"list"==e&&t.push("<hr />"),t.join("")},e.prototype.getEditDataFromForm=function(e,n,t,i,o,r,l){var s=this;if(void 0===r&&(r=!1),!e)return Promise.resolve({});l=l||this.sitesProvider.getCurrentSiteId();var a=[],u=[];return n.forEach(function(n){u.push(Promise.resolve(s.fieldsDelegate.getFieldEditData(n,e,o[n.id])).then(function(e){if(e){var n=[];return e.forEach(function(e){var o;o=t&&e.files?s.uploadOrStoreFiles(t,0,i,e.fieldid,e.files,r,l).then(function(n){delete e.files,e.value=n}):Promise.resolve(),n.push(o.then(function(){e.value&&(e.value=JSON.stringify(e.value)),void 0===e.subfield&&(e.subfield=""),a.push(e)}))}),Promise.all(n)}}))}),Promise.all(u).then(function(){return a})},e.prototype.getEditTmpFiles=function(e,n,t,i){var o=this;if(!e)return Promise.resolve([]);var r=n.map(function(n){return Promise.resolve(o.fieldsDelegate.getFieldEditFiles(n,e,i[n.id]))});return Promise.all(r).then(function(e){return e.reduce(function(e,n){return e.concat(n)},[])})},e.prototype.getEntry=function(e,n,t,i){return n>0?this.dataProvider.getEntry(e.id,n,i):this.sitesProvider.getSite(i).then(function(n){var i=t.find(function(e){return"add"==e.action});if(i){var o=n.getInfo();return{entry:{id:i.entryid,canmanageentry:!0,approved:!e.approval||e.manageapproved,dataid:i.dataid,groupid:i.groupid,timecreated:-i.entryid,timemodified:-i.entryid,userid:o.userid,fullname:o.fullname,contents:{}}}}})},e.prototype.getPageInfoByEntry=function(e,n,t,i,o,r){return void 0===i&&(i=!1),void 0===o&&(o=!1),this.getAllEntriesIds(e,t,i,o,r).then(function(e){var t=e.findIndex(function(e){return e==n});return t>=0&&{previousId:e[t-1]||!1,nextId:e[t+1]||!1,entryId:n,page:t+1,numEntries:e.length}})},e.prototype.getPageInfoByPage=function(e,n,t,i,o,r){return void 0===i&&(i=!1),void 0===o&&(o=!1),this.getAllEntriesIds(e,t,i,o,r).then(function(e){var t=n-1,i=e[t];return!!i&&{previousId:e[t-1]||null,nextId:e[t+1]||null,entryId:i,page:n,numEntries:e.length}})},e.prototype.getStoredFiles=function(e,n,t,i){var o=this;return this.dataOffline.getEntryFieldFolder(e,n,t,i).then(function(e){return o.fileUploaderProvider.getStoredFiles(e).catch(function(){return[]})})},e.prototype.hasEditDataChanged=function(e,n,t,i){var o=this,r=n.map(function(n){return o.fieldsDelegate.hasFieldDataChanged(n,e,i[n.id])});return Promise.all(r).then(function(){return!1}).catch(function(){return!0})},e.prototype.prefixCSS=function(e,n){if(!e)return"";var t=/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm;return e=e.replace(t,""),t=/([^]*?)({[^]*?}|,)/g,e.replace(t,n+" $1 $2")},e.prototype.storeFiles=function(e,n,t,i,o){var r=this;return this.dataOffline.getEntryFieldFolder(e,n,t,o).then(function(e){return r.fileUploaderProvider.storeFilesToUpload(e,i)})},e.prototype.uploadOrStoreFiles=function(e,n,t,o,r,l,s){return void 0===n&&(n=0),r.length?l?this.storeFiles(e,t,o,r,s):this.fileUploaderProvider.uploadOrReuploadFiles(r,i.a.COMPONENT,n,s):Promise.resolve(0)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(166),o=(t(207),function(){function e(e,n,t,i){this.fileProvider=e,this.uploaderProvider=n,this.userProvider=t,this.forumOffline=i}return e.prototype.convertOfflineReplyToOnline=function(e,n){var t={attachments:[],canreply:!1,children:[],created:e.timecreated,discussion:e.discussionid,id:!1,mailed:0,mailnow:0,message:e.message,messageformat:1,messagetrust:0,modified:!1,parent:e.postid,postread:!1,subject:e.subject,totalscore:0,userid:e.userid},i=[];return e.options&&e.options.attachmentsid&&(t.attachments=e.options.attachmentsid.online||[],e.options.attachmentsid.offline&&i.push(this.getReplyStoredFiles(e.forumid,t.parent,n,t.userid).then(function(e){t.attachments=t.attachments.concat(e)}))),i.push(this.userProvider.getProfile(e.userid,e.courseid,!0).then(function(e){t.userfullname=e.fullname,t.userpictureurl=e.profileimageurl}).catch(function(){})),Promise.all(i).then(function(){return t.attachment=t.attachments.length>0?1:0,t})},e.prototype.deleteNewDiscussionStoredFiles=function(e,n,t){var i=this;return this.forumOffline.getNewDiscussionFolder(e,n,t).then(function(e){return i.fileProvider.removeDir(e).catch(function(){})})},e.prototype.deleteReplyStoredFiles=function(e,n,t,i){var o=this;return this.forumOffline.getReplyFolder(e,n,t,i).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},e.prototype.getNewDiscussionStoredFiles=function(e,n,t){var i=this;return this.forumOffline.getNewDiscussionFolder(e,n,t).then(function(e){return i.uploaderProvider.getStoredFiles(e)})},e.prototype.getReplyStoredFiles=function(e,n,t,i){var o=this;return this.forumOffline.getReplyFolder(e,n,t,i).then(function(e){return o.uploaderProvider.getStoredFiles(e)})},e.prototype.hasPostDataChanged=function(e,n){return!(!n||null==n.subject)&&(e.subject!=n.subject||e.message!=n.message||this.uploaderProvider.areFileListDifferent(e.files,n.files))},e.prototype.storeNewDiscussionFiles=function(e,n,t,i){var o=this;return this.forumOffline.getNewDiscussionFolder(e,n,i).then(function(e){return o.uploaderProvider.storeFilesToUpload(e,t)})},e.prototype.storeReplyFiles=function(e,n,t,i,o){var r=this;return this.forumOffline.getReplyFolder(e,n,i,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,t)})},e.prototype.uploadOrStoreNewDiscussionFiles=function(e,n,t,o,r){return o?this.storeNewDiscussionFiles(e,n,t,r):this.uploaderProvider.uploadOrReuploadFiles(t,i.a.COMPONENT,e,r)},e.prototype.uploadOrStoreReplyFiles=function(e,n,t,o,r,l){return o?this.storeReplyFiles(e,n,t,r,l):this.uploaderProvider.uploadOrReuploadFiles(t,i.a.COMPONENT,e,r)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(166),l=(t(252),t(207),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p,h){var m=e.call(this,"AddonModForumSyncProvider",r,l,t,s,a,n,u)||this;return m.eventsProvider=o,m.uploaderProvider=c,m.utils=d,m.forumProvider=f,m.forumHelper=p,m.forumOffline=h,m.componentTranslate=i.translateModuleName("forum"),m}return Object(i.__extends)(n,e),t=n,n.prototype.syncAllForums=function(e){return this.syncOnSites("all forums",this.syncAllForumsFunc.bind(this),[],e)},n.prototype.syncAllForumsFunc=function(e){var n=this,i=[];return i.push(this.forumOffline.getAllNewDiscussions(e).then(function(i){var o={};return i.forEach(function(i){void 0===o[i.forumid]&&(o[i.forumid]=n.syncForumDiscussionsIfNeeded(i.forumid,i.userid,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{forumId:i.forumid,userId:i.userid,warnings:o.warnings},e)}))}),Promise.all(n.utils.objectToArray(o))})),i.push(this.forumOffline.getAllReplies(e).then(function(i){var o={};return i.forEach(function(i){void 0===o[i.discussionid]&&(o[i.discussionid]=n.syncDiscussionRepliesIfNeeded(i.discussionid,i.userid,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{forumId:i.forumid,discussionId:i.discussionid,userId:i.userid,warnings:o.warnings},e)}))}),Promise.all(n.utils.objectToArray(o))})),Promise.all(i)},n.prototype.syncForumDiscussionsIfNeeded=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getForumSyncId(e,n);return this.isSyncNeeded(o,t).then(function(o){if(o)return i.syncForumDiscussions(e,n,t)})},n.prototype.syncForumDiscussions=function(e,n,t){var i=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var o=this.getForumSyncId(e,n);if(this.isSyncing(o,t))return this.getOngoingSync(o,t);if(this.syncProvider.isBlocked(r.a.COMPONENT,o,t))return this.logger.debug("Cannot sync forum "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum "+e+" for user "+n);var l={warnings:[],updated:!1},s=this.forumOffline.getNewDiscussions(e,t,n).catch(function(){return[]}).then(function(o){if(o.length){if(!i.appProvider.isOnline())return Promise.reject(null);var r=[];return o.forEach(function(o){o.options=o.options||{};var s=i.uploadAttachments(e,o,!0,t,n).then(function(n){return o.options.attachmentsid=n,i.forumProvider.addNewDiscussionOnline(e,o.subject,o.message,o.options,o.groupid,t)});r.push(s.then(function(){return l.updated=!0,i.deleteNewDiscussion(e,o.timecreated,t,n)}).catch(function(r){return i.utils.isWebServiceError(r)?(l.updated=!0,i.deleteNewDiscussion(e,o.timecreated,t,n).then(function(){l.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:o.name,error:i.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(r)}}).then(function(){if(l.updated){var n=[i.forumProvider.invalidateDiscussionsList(e,t),i.forumProvider.invalidateCanAddDiscussion(e,t)];return Promise.all(n).catch(function(){})}}).then(function(){return i.setSyncTime(o,t).catch(function(){})}).then(function(){return l});return this.addOngoingSync(o,s,t)},n.prototype.syncForumReplies=function(e,n,t){var i=this;return this.forumOffline.getForumReplies(e,t,n).catch(function(){return[]}).then(function(e){if(!e.length)return{warnings:[],updated:!1};if(!i.appProvider.isOnline())return Promise.reject(null);var o={};return e.forEach(function(e){void 0===o[e.discussionid]&&(o[e.discussionid]=i.syncDiscussionReplies(e.discussionid,n,t))}),Promise.all(i.utils.objectToArray(o)).then(function(e){return e.reduce(function(e,n){return{warnings:e.warnings.concat(n.warnings),updated:e.updated||n.updated}},{warnings:[],updated:!1})})})},n.prototype.syncDiscussionRepliesIfNeeded=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getDiscussionSyncId(e,n);return this.isSyncNeeded(o,t).then(function(o){if(o)return i.syncDiscussionReplies(e,n,t)})},n.prototype.syncDiscussionReplies=function(e,n,t){var i=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var o=this.getDiscussionSyncId(e,n);if(this.isSyncing(o,t))return this.getOngoingSync(o,t);if(this.syncProvider.isBlocked(r.a.COMPONENT,o,t))return this.logger.debug("Cannot sync forum discussion "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum discussion "+e+" for user "+n);var l,s={warnings:[],updated:!1},a=this.forumOffline.getDiscussionReplies(e,t,n).catch(function(){return[]}).then(function(e){if(e.length){if(!i.appProvider.isOnline())return Promise.reject(null);var o=[];return e.forEach(function(e){l=e.forumid,e.options=e.options||{};var r=i.uploadAttachments(l,e,!1,t,n).then(function(n){return e.options.attachmentsid=n,i.forumProvider.replyPostOnline(e.postid,e.subject,e.message,e.options,t)});o.push(r.then(function(){return s.updated=!0,i.deleteReply(l,e.postid,t,n)}).catch(function(o){return i.utils.isWebServiceError(o)?(s.updated=!0,i.deleteReply(l,e.postid,t,n).then(function(){s.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:i.textUtils.getErrorMessageFromError(o)}))})):Promise.reject(o)}))}),Promise.all(o)}}).then(function(){var n=[];return l&&n.push(i.forumProvider.invalidateDiscussionsList(l,t)),n.push(i.forumProvider.invalidateDiscussionPosts(e,t)),i.utils.allPromises(n).catch(function(){})}).then(function(){return i.setSyncTime(o,t).catch(function(){})}).then(function(){return s});return this.addOngoingSync(o,a,t)},n.prototype.deleteNewDiscussion=function(e,n,t,i){var o=[];return o.push(this.forumOffline.deleteNewDiscussion(e,n,t,i)),o.push(this.forumHelper.deleteNewDiscussionStoredFiles(e,n,t).catch(function(){})),Promise.all(o)},n.prototype.deleteReply=function(e,n,t,i){var o=[];return o.push(this.forumOffline.deleteReply(n,t,i)),o.push(this.forumHelper.deleteReplyStoredFiles(e,n,t,i).catch(function(){})),Promise.all(o)},n.prototype.uploadAttachments=function(e,n,t,i,o){var l=this,s=n&&n.options&&n.options.attachmentsid;if(s){var a=s.online||[],u=void 0;return s.offline?(u=t?this.forumHelper.getNewDiscussionStoredFiles(e,n.timecreated,i):this.forumHelper.getReplyStoredFiles(e,n.postid,i,o)).then(function(e){a=a.concat(e)}).catch(function(){}):u=Promise.resolve(),u.then(function(){return l.uploaderProvider.uploadOrReuploadFiles(a,r.a.COMPONENT,e,i)})}return Promise.resolve()},n.prototype.getForumSyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"forum#"+e+"#"+n},n.prototype.getDiscussionSyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"discussion#"+e+"#"+n},n.AUTO_SYNCED="addon_mod_forum_autom_synced",n.MANUAL_SYNCED="addon_mod_forum_manual_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(4),function(){function e(e,n,t,o,r,l,s){this.mimeUtils=e,this.utils=n,this.translate=t,this.textUtils=o,this.fileProvider=r,this.domUtils=l,this.timeUtils=s,this.newFileName="",this.onDelete=new i.r,this.onRename=new i.r,this.onClick=new i.r}return e.prototype.ngOnInit=function(){var e=this;this.manage=this.utils.isTrueOrOne(this.manage),this.relativePath=this.fileProvider.removeBasePath(this.file.toURL()),this.relativePath||(this.relativePath=this.file.fullPath),this.loadFileBasicData(),this.fileProvider.getMetadata(this.file).then(function(n){n.size>=0&&(e.size=e.textUtils.bytesToSize(n.size,2)),e.timemodified=e.timeUtils.userDate(n.modificationTime,"core.strftimedatetimeshort")})},e.prototype.loadFileBasicData=function(){this.fileName=this.file.name,this.fileIcon=this.mimeUtils.getFileIcon(this.file.name),this.fileExtension=this.mimeUtils.getFileExtension(this.file.name)},e.prototype.fileClicked=function(e){this.editMode||(e.preventDefault(),e.stopPropagation(),this.utils.isTrueOrOne(this.overrideClick)&&this.onClick.observers.length?this.onClick.emit():this.utils.openFile(this.file.toURL()))},e.prototype.activateEdit=function(e){e.preventDefault(),e.stopPropagation(),this.editMode=!0,this.newFileName=this.file.name},e.prototype.changeName=function(e,n){var t=this;if(n.preventDefault(),n.stopPropagation(),e!=this.file.name){var i=this.domUtils.showModalLoading(),o=this.fileProvider.getFileAndDirectoryFromPath(this.relativePath),r=this.textUtils.concatenatePaths(o.directory,e);this.fileProvider.getFile(r).then(function(){t.domUtils.showErrorModal("core.errorfileexistssamename",!0)}).catch(function(){return t.fileProvider.moveFile(t.relativePath,r).then(function(e){t.editMode=!1,t.file=e,t.loadFileBasicData(),t.onRename.emit({file:t.file})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errorrenamefile",!0)})}).finally(function(){i.dismiss()})}else this.editMode=!1},e.prototype.deleteFile=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.domUtils.showConfirm(this.translate.instant("core.confirmdeletefile")).then(function(){var e=n.domUtils.showModalLoading();return n.fileProvider.removeFile(n.relativePath).then(function(){n.onDelete.emit()}).finally(function(){e.dismiss()})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordeletefile",!0)})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e,n,t,o){this.iframeUtils=n,this.domUtils=t,this.sanitizer=o,this.loaded=new i.r,this.IFRAME_TIMEOUT=15e3,this.logger=e.getInstance("CoreIframe"),this.loaded=new i.r}return e.prototype.ngOnInit=function(){var e=this,n=this.iframe&&this.iframe.nativeElement;this.iframeWidth=this.domUtils.formatPixelsSize(this.iframeWidth)||"100%",this.iframeHeight=this.domUtils.formatPixelsSize(this.iframeHeight)||"100%",this.loading=!this.src||!!this.src.match(/^https?:\/\//i),this.iframeUtils.treatFrame(n),this.loading&&(n.addEventListener("load",function(){e.loading=!1,e.loaded.emit(n)}),n.addEventListener("error",function(){e.loading=!1,e.domUtils.showErrorModal("core.errorloadingcontent",!0)}),setTimeout(function(){e.loading=!1},this.IFRAME_TIMEOUT))},e.prototype.ngOnChanges=function(e){e.src&&(this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.src.currentValue))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(143),o=function(){function e(e,t,i,o,r){this.sitesProvider=t,this.timeUtils=i,this.textUtils=o,this.utils=r,this.tablesSchema=[{name:n.RETAKES_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"finished",type:"INTEGER"},{name:"outoftime",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"lastquestionpage",type:"INTEGER"}]},{name:n.PAGE_ATTEMPTS_TABLE,columns:[{name:"lessonid",type:"INTEGER",notNull:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"pageid",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"type",type:"INTEGER"},{name:"newpageid",type:"INTEGER"},{name:"correct",type:"INTEGER"},{name:"answerid",type:"INTEGER"},{name:"useranswer",type:"TEXT"}],primaryKeys:["lessonid","retake","pageid","timemodified"]}],this.logger=e.getInstance("AddonModLessonOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteAttempt=function(e,t,i,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:t,pageid:i,timemodified:o})})},e.prototype.deleteRetake=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.RETAKES_TABLE,{lessonid:e})})},e.prototype.deleteRetakeAttemptsForPage=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:t,pageid:i})})},e.prototype.finishRetake=function(e,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return s.getRetakeWithFallback(e,t,i,l.id).then(function(e){return e.finished=o?1:0,e.outoftime=r?1:0,e.timemodified=s.timeUtils.timestamp(),l.getDb().insertRecord(n.RETAKES_TABLE,e)})})},e.prototype.getAllAttempts=function(e){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.PAGE_ATTEMPTS_TABLE)}).then(function(e){return t.parsePageAttempts(e)})},e.prototype.getAllLessonsWithData=function(e){var n=this,t=[],i={};return t.push(this.getAllAttempts(e).then(function(e){n.getLessonsFromEntries(i,e)}).catch(function(){})),t.push(this.getAllRetakes(e).then(function(e){n.getLessonsFromEntries(i,e)}).catch(function(){})),Promise.all(t).then(function(){return n.utils.objectToArray(i)})},e.prototype.getAllRetakes=function(e){return this.sitesProvider.getSiteDb(e).then(function(e){return e.getAllRecords(n.RETAKES_TABLE)})},e.prototype.getLastQuestionPageAttempt=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getRetakeWithFallback(e,0,n,t).then(function(o){if(o.lastquestionpage)return i.getRetakeAttemptsForPage(e,n,o.lastquestionpage,t).then(function(e){return e.reduce(function(e,n){return e.timemodified>n.timemodified?e:n})})}).catch(function(){})},e.prototype.getLessonAttempts=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e})}).then(function(e){return i.parsePageAttempts(e)})},e.prototype.getLessonsFromEntries=function(e,n){n.forEach(function(n){e[n.lessonid]||(e[n.lessonid]={id:n.lessonid,courseId:n.courseid})})},e.prototype.getQuestionsAttempts=function(e,n,t,o,r){return(o?this.getRetakeAttemptsForPage(e,n,o,r):this.getRetakeAttemptsForType(e,n,i.a.TYPE_QUESTION,r)).then(function(e){return t?e.filter(function(e){return!!e.correct}):e})},e.prototype.getRetake=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.RETAKES_TABLE,{lessonid:e})})},e.prototype.getRetakeAttempts=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().getRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:t})}).then(function(e){return o.parsePageAttempts(e)})},e.prototype.getRetakeAttemptsForPage=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:t,pageid:i})}).then(function(e){return r.parsePageAttempts(e)})},e.prototype.getRetakeAttemptsForType=function(e,t,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(n.PAGE_ATTEMPTS_TABLE,{lessonid:e,retake:t,type:i})}).then(function(e){return r.parsePageAttempts(e)})},e.prototype.getRetakeWithFallback=function(e,n,t,i){return this.getRetake(e,i).then(function(e){return e.retake!=t?Promise.reject(null):e}).catch(function(){return{lessonid:e,retake:t,courseid:n,finished:0}})},e.prototype.hasFinishedRetake=function(e,n){return this.getRetake(e,n).then(function(e){return!!e.finished}).catch(function(){return!1})},e.prototype.hasOfflineData=function(e,n){var t=[],i=!1;return t.push(this.getRetake(e,n).then(function(){i=!0}).catch(function(){})),t.push(this.getLessonAttempts(e,n).then(function(e){i=i||!!e.length}).catch(function(){})),Promise.all(t).then(function(){return i})},e.prototype.hasRetakeAttempts=function(e,n,t){return this.getRetakeAttempts(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},e.prototype.parsePageAttempt=function(e){return e.data=this.textUtils.parseJSON(e.data),e.useranswer=this.textUtils.parseJSON(e.useranswer),e},e.prototype.parsePageAttempts=function(e){var n=this;return e.forEach(function(e){n.parsePageAttempt(e)}),e},e.prototype.processPage=function(e,t,o,r,l,s,a,u,c,d){var f=this;return this.sitesProvider.getSite(d).then(function(i){var d={lessonid:e,retake:o,pageid:r.id,timemodified:f.timeUtils.timestamp(),courseid:t,data:l?JSON.stringify(l):null,type:r.type,newpageid:s,correct:u?1:0,answerid:Number(a),useranswer:c?JSON.stringify(c):null};return i.getDb().insertRecord(n.PAGE_ATTEMPTS_TABLE,d)}).then(function(){if(r.type==i.a.TYPE_QUESTION)return f.setLastQuestionPageAttempted(e,t,o,r.id,d)})},e.prototype.setLastQuestionPageAttempted=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){return l.getRetakeWithFallback(e,t,i,r.id).then(function(e){return e.lastquestionpage=o,e.timemodified=l.timeUtils.timestamp(),r.getDb().insertRecord(n.RETAKES_TABLE,e)})})},e.RETAKES_TABLE="addon_mod_lesson_retakes",e.PAGE_ATTEMPTS_TABLE="addon_mod_lesson_page_attempts",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t){this.sitesProvider=t,this.tablesSchema=[{name:n.NEW_PAGES_TABLE,columns:[{name:"wikiid",type:"INTEGER"},{name:"subwikiid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"cachedcontent",type:"TEXT"},{name:"contentformat",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"caneditpage",type:"INTEGER"}],primaryKeys:["wikiid","subwikiid","userid","groupid","title"]}],this.logger=e.getInstance("AddonModWikiOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.convertToPositiveNumber=function(e){return(e=parseInt(e,10))>0?e:0},e.prototype.deleteNewPage=function(e,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return t=s.convertToPositiveNumber(t),i=s.convertToPositiveNumber(i),o=s.convertToPositiveNumber(o),r=s.convertToPositiveNumber(r),l.getDb().deleteRecords(n.NEW_PAGES_TABLE,{subwikiid:t,wikiid:i,userid:o,groupid:r,title:e})})},e.prototype.getAllNewPages=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(n.NEW_PAGES_TABLE)})},e.prototype.getNewPage=function(e,t,i,o,r,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return t=s.convertToPositiveNumber(t),i=s.convertToPositiveNumber(i),o=s.convertToPositiveNumber(o),r=s.convertToPositiveNumber(r),l.getDb().getRecord(n.NEW_PAGES_TABLE,{subwikiid:t,wikiid:i,userid:o,groupid:r,title:e})})},e.prototype.getSubwikiNewPages=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){return e=l.convertToPositiveNumber(e),t=l.convertToPositiveNumber(t),i=l.convertToPositiveNumber(i),o=l.convertToPositiveNumber(o),r.getDb().getRecords(n.NEW_PAGES_TABLE,{subwikiid:e,wikiid:t,userid:i,groupid:o})})},e.prototype.getSubwikisNewPages=function(e,n){var t=this,i=[],o=[];return e.forEach(function(e){i.push(t.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid,n).then(function(e){o=o.concat(e)}))}),Promise.all(i).then(function(){return o})},e.prototype.saveNewPage=function(e,t,i,o,r,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u=(new Date).getTime(),c={title:e,cachedcontent:t,subwikiid:a.convertToPositiveNumber(i),wikiid:a.convertToPositiveNumber(o),userid:a.convertToPositiveNumber(r),groupid:a.convertToPositiveNumber(l),contentformat:"html",timecreated:u,timemodified:u,caneditpage:1};return s.getDb().insertRecord(n.NEW_PAGES_TABLE,c)})},e.prototype.subwikisHaveOfflineData=function(e,n){return this.getSubwikisNewPages(e,n).then(function(e){return!!e.length}).catch(function(){return!1})},e.NEW_PAGES_TABLE="addon_mod_wiki_new_pages_store",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(259);var i=function(){function e(e,n,t,i,o){this.sitesProvider=e,this.appProvider=n,this.filepoolProvider=t,this.utils=i,this.choiceOffline=o,this.ROOT_CACHE_KEY="mmaModChoice:"}return n=e,e.prototype.canStudentSeeResults=function(e,t){var i=(new Date).getTime();return e.showresults===n.RESULTS_ALWAYS||e.showresults===n.RESULTS_AFTER_CLOSE&&0!==e.timeclose&&e.timeclose<=i||e.showresults===n.RESULTS_AFTER_ANSWER&&t},e.prototype.deleteResponses=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId(),i=i||[];var l=function(){return r.choiceOffline.saveResponse(e,n,t,i,!0,o).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,o).then(function(){return r.deleteResponsesOnline(e,i,o).then(function(){return!0}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.deleteResponsesOnline=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_choice_delete_choice_responses",{choiceid:e,responses:n}).then(function(n){if(!n||!1===n.status)return Promise.reject(i.utils.createFakeWSError(""));var o=[i.invalidateOptions(e,t.id),i.invalidateResults(e,t.id)];return Promise.all(o).catch(function(){})})})},e.prototype.getChoiceDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"choice:"+e},e.prototype.getChoiceOptionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"options:"+e},e.prototype.getChoiceResultsCacheKey=function(e){return this.ROOT_CACHE_KEY+"results:"+e},e.prototype.getChoiceByDataKey=function(e,n,t,i,o){var r=this;return void 0===o&&(o=!1),this.sitesProvider.getSite(e).then(function(e){var l={courseids:[n]},s={cacheKey:r.getChoiceDataCacheKey(n),omitExpires:o};return e.read("mod_choice_get_choices_by_courses",l,s).then(function(e){if(e&&e.choices){var n=e.choices.find(function(e){return e[t]==i});if(n)return n}return Promise.reject(null)})})},e.prototype.getChoice=function(e,n,t,i){return void 0===i&&(i=!1),this.getChoiceByDataKey(t,e,"coursemodule",n,i)},e.prototype.getChoiceById=function(e,n,t,i){return void 0===i&&(i=!1),this.getChoiceByDataKey(t,e,"id",n,i)},e.prototype.getOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={choiceid:e},o={cacheKey:t.getChoiceOptionsCacheKey(e)};return n.read("mod_choice_get_choice_options",i,o).then(function(e){return e.options?e.options:Promise.reject(null)})})},e.prototype.getResults=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={choiceid:e},o={cacheKey:t.getChoiceResultsCacheKey(e)};return n.read("mod_choice_get_choice_results",i,o).then(function(e){return e.options?e.options:Promise.reject(null)})})},e.prototype.invalidateChoiceData=function(e,n){var t=this;return this.sitesProvider.getSite(null).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceDataCacheKey(e))})},e.prototype.invalidateContent=function(e,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getChoice(t,e).then(function(e){return Promise.all([o.invalidateChoiceData(t),o.invalidateOptions(e.id),o.invalidateResults(e.id)])})),r.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),this.utils.allPromises(r)},e.prototype.invalidateOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceOptionsCacheKey(e))})},e.prototype.invalidateResults=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceResultsCacheKey(e))})},e.prototype.logView=function(e){var n={choiceid:e};return this.sitesProvider.getCurrentSite().write("mod_choice_view_choice",n)},e.prototype.submitResponse=function(e,n,t,i,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l=function(){return r.choiceOffline.saveResponse(e,n,t,i,!1,o).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,o).then(function(){return r.submitResponseOnline(e,i,o).then(function(){return!0}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.submitResponseOnline=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(o){return o.write("mod_choice_submit_choice_response",{choiceid:e,responses:n}).then(function(){var n=[i.invalidateOptions(e,t),i.invalidateResults(e,t)];return Promise.all(n).catch(function(){})})})},e.COMPONENT="mmaModChoice",e.RESULTS_NOT=0,e.RESULTS_AFTER_ANSWER=1,e.RESULTS_AFTER_CLOSE=2,e.RESULTS_ALWAYS=3,e.PUBLISH_ANONYMOUS=!1,e.PUBLISH_NAMES=!0,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.sitesProvider=e,this.tablesSchema=[{name:n.CHOICE_TABLE,columns:[{name:"choiceid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"deleting",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["choiceid","userid"]}],this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteResponse=function(e,t,i){return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().deleteRecords(n.CHOICE_TABLE,{choiceid:e,userid:i})})},e.prototype.getResponses=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.CHOICE_TABLE).then(function(e){return e.forEach(function(e){e.responses=JSON.parse(e.responses)}),e})})},e.prototype.hasResponse=function(e,n,t){return this.getResponse(e,n,t).then(function(e){return!!e.choiceid}).catch(function(e){return!1})},e.prototype.getResponse=function(e,t,i){return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().getRecord(n.CHOICE_TABLE,{choiceid:e,userid:i}).then(function(e){return e.responses=JSON.parse(e.responses),e})})},e.prototype.saveResponse=function(e,t,i,o,r,l,s){return this.sitesProvider.getSite(l).then(function(l){var a={choiceid:e,name:t,courseid:i,userid:s||l.getUserId(),responses:JSON.stringify(o),deleting:r?1:0,timecreated:(new Date).getTime()};return l.getDb().insertRecord(n.CHOICE_TABLE,a)})},e.CHOICE_TABLE="addon_mod_choice_responses",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(126),r=(t(259),t(258),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,"AddonModChoiceSyncProvider",t,n,i,d,u,s,f)||this;return p.sitesProvider=n,p.appProvider=i,p.choiceOffline=o,p.eventsProvider=r,p.choiceProvider=l,p.utils=a,p.textUtils=u,p.componentTranslate=c.translateModuleName("choice"),p}return Object(i.__extends)(n,e),t=n,n.prototype.getSyncId=function(e,n){return e+"#"+n},n.prototype.syncAllChoices=function(e){return this.syncOnSites("choices",this.syncAllChoicesFunc.bind(this),void 0,e)},n.prototype.syncAllChoicesFunc=function(e){var n=this;return this.choiceOffline.getResponses(e).then(function(i){var o=[];i.forEach(function(i){o.push(n.syncChoiceIfNeeded(i.choiceid,i.userid,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{choiceId:i.choiceid,userId:i.userid,warnings:o.warnings},e)}))})})},n.prototype.syncChoiceIfNeeded=function(e,n,t){var i=this,o=this.getSyncId(e,n);return this.isSyncNeeded(o,t).then(function(o){if(o)return i.syncChoice(e,n,t)})},n.prototype.syncChoice=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getSyncId(e,n);if(this.isSyncing(o,t))return this.getOngoingSync(o,t);this.logger.debug("Try to sync choice '"+e+"' for user '"+n+"'");var r,l={warnings:[],updated:!1},s=this.choiceOffline.getResponse(e,t,n).catch(function(){return{}}).then(function(o){if(o.choiceid){if(!i.appProvider.isOnline())return Promise.reject(null);r=o.courseid;return(o.deleting?i.choiceProvider.deleteResponsesOnline(e,o.responses,t):i.choiceProvider.submitResponseOnline(e,o.responses,t)).then(function(){return l.updated=!0,i.choiceOffline.deleteResponse(e,t,n)}).catch(function(r){return i.utils.isWebServiceError(r)?(l.updated=!0,i.choiceOffline.deleteResponse(e,t,n).then(function(){l.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:o.name,error:i.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)})}}).then(function(){if(r){var n=[i.choiceProvider.invalidateChoiceData(r),e?i.choiceProvider.invalidateOptions(e):Promise.resolve(),e?i.choiceProvider.invalidateResults(e):Promise.resolve()];return Promise.all(n).then(function(){return i.choiceProvider.getChoiceById(r,e,t)}).catch(function(){})}}).then(function(){return i.setSyncTime(o,t)}).then(function(){return l});return this.addOngoingSync(o,s,t)},n.AUTO_SYNCED="addon_mod_choice_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(13)),l=t(51),s=t(566),a=function(){function e(e,n,t,i,o,r,l,s,a){this.navCtrl=e,this.courseHelper=n,this.domUtils=t,this.courseProvider=i,this.eventsProvider=o,this.sitesProvider=r,this.coursesProvider=l,this.popoverCtrl=s,this.userProvider=a,this.showAll=!1,this.showDownload=!0,this.prefetchCourseData={prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.showSpinner=!1,this.isDestroyed=!1}return e.prototype.ngOnInit=function(){var e=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCourseEnabled&&this.initPrefetchCourse(),this.courseOptionMenuEnabled=this.showAll&&void 0!==this.course.isfavourite,this.siteUpdatedObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){var n=e.downloadCourseEnabled;e.downloadCourseEnabled=!e.coursesProvider.isDownloadCourseDisabledInSite(),!n&&e.downloadCourseEnabled&&e.initPrefetchCourse()},this.sitesProvider.getCurrentSiteId())},e.prototype.initPrefetchCourse=function(){var e=this;void 0===this.courseStatusObserver&&(this.courseStatusObserver=this.eventsProvider.on(r.a.COURSE_STATUS_CHANGED,function(n){n.courseId==e.course.id&&e.updateCourseStatus(n.status)},this.sitesProvider.getCurrentSiteId()),this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(n){if(e.prefetchCourseData.prefetchCourseIcon=n.icon,e.prefetchCourseData.title=n.title,"spinner"==n.icon){var t=e.courseHelper.getCourseDownloadPromise(e.course.id);t?t.catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id)}}))},e.prototype.openCourse=function(e){this.courseHelper.openCourse(this.navCtrl,e)},e.prototype.prefetchCourse=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"core.course.errordownloadingcourse",!0)})},e.prototype.updateCourseStatus=function(e){var n=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=n.icon,this.prefetchCourseData.title=n.title},e.prototype.showCourseOptionsMenu=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=this.popoverCtrl.create(s.a,{course:this.course,prefetch:this.prefetchCourseData});t.onDidDismiss(function(t){if(t)switch(t){case"download":"spinner"!=n.prefetchCourseData.prefetchCourseIcon&&n.prefetchCourse(e);break;case"hide":n.setCourseHidden(!0);break;case"show":n.setCourseHidden(!1);break;case"favourite":n.setCourseFavourite(!0);break;case"unfavourite":n.setCourseFavourite(!1)}}),t.present({ev:e})},e.prototype.setCourseHidden=function(e){var n=this;this.showSpinner=!0,this.userProvider.updateUserPreference("block_myoverview_hidden_course_"+this.course.id,e?1:null).then(function(){n.course.hidden=e,n.eventsProvider.trigger(l.a.EVENT_MY_COURSES_UPDATED,{course:n.course},n.sitesProvider.getCurrentSiteId())}).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"Error changing course visibility.")}).finally(function(){n.showSpinner=!1})},e.prototype.setCourseFavourite=function(e){var n=this;this.showSpinner=!0,this.coursesProvider.setFavouriteCourse(this.course.id,e).then(function(){n.course.isfavourite=e,n.eventsProvider.trigger(l.a.EVENT_MY_COURSES_UPDATED,{course:n.course},n.sitesProvider.getCurrentSiteId())}).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"Error changing course favourite attribute.")}).finally(function(){n.showSpinner=!1})},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.siteUpdatedObserver&&this.siteUpdatedObserver.off(),this.courseStatusObserver&&this.courseStatusObserver.off()},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.E)())],e)}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o){this.sitesProvider=t,this.textUtils=i,this.timeUtils=o,this.tablesSchema=[{name:n.FEEDBACK_TABLE,columns:[{name:"feedbackid",type:"INTEGER"},{name:"page",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["feedbackid","page"]}],this.logger=e.getInstance("AddonModFeedbackOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteFeedbackPageResponses=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(n.FEEDBACK_TABLE,{feedbackid:e,page:t})})},e.prototype.getAllFeedbackResponses=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(n.FEEDBACK_TABLE).then(function(e){return e.forEach(function(e){e.responses=t.textUtils.parseJSON(e.responses)}),e})})},e.prototype.getFeedbackResponses=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.FEEDBACK_TABLE,{feedbackid:e})}).then(function(e){return e.forEach(function(e){e.responses=i.textUtils.parseJSON(e.responses)}),e})},e.prototype.getFeedbackPageResponses=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return i.getDb().getRecord(n.FEEDBACK_TABLE,{feedbackid:e,page:t})}).then(function(e){return e.responses=o.textUtils.parseJSON(e.responses),e})},e.prototype.hasFeedbackOfflineData=function(e,n){return this.getFeedbackResponses(e,n).then(function(e){return!!e.length})},e.prototype.saveResponses=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s={feedbackid:e,page:t,courseid:o,responses:JSON.stringify(i),timemodified:l.timeUtils.timestamp()};return r.getDb().insertRecord(n.FEEDBACK_TABLE,s)})},e.FEEDBACK_TABLE="addon_mod_feedback_answers",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(211),o=function(){function e(e,n,t,i,o,r,l,s,a,u){this.courseProvider=e,this.domUtils=n,this.resourceProvider=t,this.courseHelper=i,this.textUtils=o,this.mimetypeUtils=r,this.fileProvider=l,this.appProvider=s,this.filepoolProvider=a,this.sitesProvider=u,this.DISPLAY_AUTO=0,this.DISPLAY_EMBED=1}return e.prototype.getEmbeddedHtml=function(e,n){var t=this;return this.courseHelper.downloadModuleWithMainFileIfNeeded(e,n,i.a.COMPONENT,e.id,e.contents).then(function(n){var i=e.contents[0],o=t.mimetypeUtils.getFileExtension(i.filename),r=t.mimetypeUtils.getExtensionType(o),l=t.mimetypeUtils.getMimeType(o);return"image"==r?'<img src="'+n.path+'"></img>':"audio"==r||"video"==r?"<"+r+' controls title="'+i.filename+'"" src="'+n.path+'"><source src="'+n.path+'" type="'+l+'"></'+r+">":""})},e.prototype.getIframeSrc=function(e){var n=this;if(!e.contents.length)return Promise.reject(null);var t=e.contents[0],i=t.filename;return"/"!==t.filepath&&(i=t.filepath.substr(1)+i),this.filepoolProvider.getPackageDirUrlByUrl(this.sitesProvider.getCurrentSiteId(),e.url).then(function(e){return n.textUtils.concatenatePaths(e,i)}).catch(function(){return n.appProvider.isOnline()&&t.fileurl?Promise.resolve(n.sitesProvider.getCurrentSite().fixPluginfileURL(t.fileurl)):Promise.reject(null)})},e.prototype.isDisplayedEmbedded=function(e,n){if(!e.contents.length||!this.fileProvider.isAvailable()||this.isNextcloudFile(e))return!1;var t=this.mimetypeUtils.getFileExtension(e.contents[0].filename);return(n==this.DISPLAY_EMBED||n==this.DISPLAY_AUTO)&&this.mimetypeUtils.canBeEmbedded(t)},e.prototype.isDisplayedInIframe=function(e){if(!e.contents.length||!this.fileProvider.isAvailable())return!1;var n=this.mimetypeUtils.getFileExtension(e.contents[0].filename);return"text/html"==this.mimetypeUtils.getMimeType(n)},e.prototype.isNextcloudFile=function(e){return e.contents&&e.contents[0]&&"nextcloud"==e.contents[0].repositorytype},e.prototype.openModuleFile=function(e,n){var t=this,o=this.domUtils.showModalLoading();return this.courseHelper.downloadModuleAndOpenFile(e,n,i.a.COMPONENT,e.id,e.contents).then(function(){t.resourceProvider.logView(e.instance).then(function(){t.courseProvider.checkModuleCompletion(n,e.completiondata)}).catch(function(){})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_resource.errorwhileloadingthecontent",!0)}).finally(function(){o.dismiss()})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(265);var i=function(){function e(e,n,t,i,o,r){this.sitesProvider=n,this.appProvider=t,this.filepoolProvider=i,this.utils=o,this.surveyOffline=r,this.ROOT_CACHE_KEY="mmaModSurvey:",this.logger=e.getInstance("AddonModSurveyProvider")}return n=e,e.prototype.getQuestions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={surveyid:e},o={cacheKey:t.getQuestionsCacheKey(e)};return n.read("mod_survey_get_questions",i,o).then(function(e){return e.questions?e.questions:Promise.reject(null)})})},e.prototype.getQuestionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"questions:"+e},e.prototype.getSurveyCacheKey=function(e){return this.ROOT_CACHE_KEY+"survey:"+e},e.prototype.getSurveyDataByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getSurveyCacheKey(e)};return i.read("mod_survey_get_surveys_by_courses",r,l).then(function(e){if(e&&e.surveys){var i=e.surveys.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getSurvey=function(e,n,t){return this.getSurveyDataByKey(e,"coursemodule",n,t)},e.prototype.getSurveyById=function(e,n,t){return this.getSurveyDataByKey(e,"id",n,t)},e.prototype.invalidateContent=function(e,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getSurvey(t,e).then(function(e){var n=[];return n.push(o.invalidateSurveyData(t,i)),n.push(o.invalidateQuestions(e.id,i)),Promise.all(n)})),r.push(this.filepoolProvider.invalidateFilesByComponent(i,n.COMPONENT,e)),this.utils.allPromises(r)},e.prototype.invalidateQuestions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuestionsCacheKey(e))})},e.prototype.invalidateSurveyData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSurveyCacheKey(e))})},e.prototype.logView=function(e){var n={surveyid:e};return this.sitesProvider.getCurrentSite().write("mod_survey_view_survey",n)},e.prototype.submitAnswers=function(e,n,t,i,o){var r=this,l=function(){return r.surveyOffline.saveAnswers(e,n,t,i,o).then(function(){return!1})};return o=o||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.surveyOffline.deleteSurveyAnswers(e,o).then(function(){return r.submitAnswersOnline(e,i,o).then(function(){return!0}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},e.prototype.submitAnswersOnline=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_survey_submit_answers",{surveyid:e,answers:n}).then(function(e){if(!e.status)return Promise.reject(i.utils.createFakeWSError(""))})})},e.COMPONENT="mmaModSurvey",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i){this.sitesProvider=t,this.textUtils=i,this.tablesSchema=[{name:n.SURVEY_TABLE,columns:[{name:"surveyid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"answers",type:"TEXT"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["surveyid","userid"]}],this.logger=e.getInstance("AddonModSurveyOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteSurveyAnswers=function(e,t,i){return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().deleteRecords(n.SURVEY_TABLE,{surveyid:e,userid:i})})},e.prototype.getAllData=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(n.SURVEY_TABLE).then(function(e){return e.forEach(function(e){e.answers=t.textUtils.parseJSON(e.answers)}),e})})},e.prototype.getSurveyAnswers=function(e,n,t){return this.getSurveyData(e,n,t).then(function(e){return e.answers||[]}).catch(function(){return[]})},e.prototype.getSurveyData=function(e,t,i){var o=this;return this.sitesProvider.getSite(t).then(function(t){return i=i||t.getUserId(),t.getDb().getRecord(n.SURVEY_TABLE,{surveyid:e,userid:i})}).then(function(e){return e.answers=o.textUtils.parseJSON(e.answers),e})},e.prototype.hasAnswers=function(e,n,t){return this.getSurveyAnswers(e,n,t).then(function(e){return!!e.length})},e.prototype.saveAnswers=function(e,t,i,o,r,l){return this.sitesProvider.getSite(r).then(function(r){l=l||r.getUserId();var s={surveyid:e,name:t,courseid:i,userid:l,answers:JSON.stringify(o),timecreated:(new Date).getTime()};return r.getDb().insertRecord(n.SURVEY_TABLE,s)})},e.SURVEY_TABLE="addon_mod_survey_answers",e;var n}()},,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(270),t(324);var i=t(154),o=t(988),r=(t(327),t(40)),l=function(){function e(e,n,t,o,r,l,s,a,u,c){this.file=e,this.fileProvider=n,this.utils=t,this.sitesProvider=r,this.localNotif=l,this.captureHelper=s,this.timeUtils=a,this.appProvider=u,this.localNotifProvider=c,this.name="CoreEmulator",this.priority=i.a.MAX_RECOMMENDED_PRIORITY+500,this.blocking=!0,this.LAST_RECEIVED_NOTIFICATION_TABLE="core_emulator_last_received_notification",this.tablesSchema=[{name:this.LAST_RECEIVED_NOTIFICATION_TABLE,columns:[{name:"component",type:"TEXT"},{name:"id",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["component"]}],this.logger=o.getInstance("CoreEmulatorHelper"),r.createTablesFromSchema(this.tablesSchema)}return e.prototype.load=function(){var e=this,n=[];return n.push(this.file.load().then(function(n){e.fileProvider.setHTMLBasePath(n)})),n.push(this.localNotif.load()),n.push(this.captureHelper.load()),window.FileTransferError=o.a,this.utils.allPromises(n)},e.prototype.checkNewNotifications=function(e,n,t,i){var o=this;if(!this.appProvider.isDesktop()||!this.localNotifProvider.isAvailable())return Promise.resolve(null);if(!this.appProvider.isOnline())return this.logger.debug("Cannot check push notifications because device is offline."),Promise.reject(null);return(i?Promise.resolve([i]):this.sitesProvider.getSitesIds()).then(function(i){var r=i.map(function(i){return o.checkNewNotificationsForSite(e,n,t,i)});return Promise.all(r)})},e.prototype.checkNewNotificationsForSite=function(e,n,t,i){var o=this;return this.getLastReceivedNotification(e,i).then(function(l){return n(i).then(function(n){if(l&&n.length){var s=n[0];if(!(s.id==l.id||s.timecreated<=l.timecreated||o.timeUtils.timestamp()-s.timecreated>r.a.SECONDS_DAY))return t(s).then(function(n){var t={id:1,at:new Date,title:n.title,text:n.text,data:{notif:s,site:i}};return o.localNotifProvider.schedule(t,e,i)})}})})},e.prototype.getLastReceivedNotification=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.LAST_RECEIVED_NOTIFICATION_TABLE,{component:e})}).catch(function(){return!1})},e.prototype.storeLastReceivedNotification=function(e,n,t){var i=this;return n||(n={id:-1,timecreated:0}),this.sitesProvider.getSite(t).then(function(t){var o={component:e,id:n.id,timecreated:n.timecreated};return t.getDb().insertRecord(i.LAST_RECEIVED_NOTIFICATION_TABLE,o)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(992),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.download=function(e,n,t){return this.downloadOrPrefetch(e,n,!1,t)},n.prototype.downloadOrPrefetch=function(e,n,t,i){var o=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var r=this.sitesProvider.getCurrentSiteId();if(this.isDownloading(e.id,r))return this.getOngoingDownload(e.id,r);var l=this.courseProvider.getModuleBasicInfo(e.id,r).then(function(){return o.loadContents(e,n,!0)}).then(function(){return o.getIntroFiles(e,n)}).then(function(n){var l=t?o.filepoolProvider.prefetchPackage.bind(o.filepoolProvider):o.filepoolProvider.downloadPackage.bind(o.filepoolProvider),s=o.getContentDownloadableFiles(e),a=[];if(i)a.push(o.filepoolProvider.downloadOrPrefetchFiles(r,n,t,!1,o.component,e.id)),a.push(l(r,s,o.component,e.id,void 0,i));else{var u=n.concat(s);a.push(l(r,u,o.component,e.id))}return Promise.all(a)});return this.addOngoingDownload(e.id,l,r)},n.prototype.getFiles=function(e,n,t){var i=this;return this.loadContents(e,n).then(function(){return i.getIntroFiles(e,n).then(function(n){return n.concat(i.getContentDownloadableFiles(e))})})},n.prototype.invalidateContent=function(e,n){var t=[],i=this.sitesProvider.getCurrentSiteId();return t.push(this.courseProvider.invalidateModule(e)),t.push(this.filepoolProvider.invalidateFilesByComponent(i,this.component,e)),Promise.all(t)},n.prototype.loadContents=function(e,n,t){return this.courseProvider.loadModuleContents(e,n,void 0,!1,t)},n.prototype.prefetch=function(e,n,t,i){return this.downloadOrPrefetch(e,n,!0,i)},n}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(14),o=(t.n(i),function(){function e(e){this.sitesProvider=e,this.ROOT_CACHE_KEY="myoverview:"}return n=e,e.prototype.getActionEventsByCourse=function(e,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var l=i().subtract(14,"days").unix(),s={timesortfrom:l,courseid:e,limitnum:n.EVENTS_LIMIT_PER_COURSE},a={cacheKey:r.getActionEventsByCourseCacheKey(e)};return t&&(s.aftereventid=t),o.read("core_calendar_get_action_events_by_course",s,a).then(function(e){return e&&e.events?r.treatCourseEvents(e,l):Promise.reject(null)})})},e.prototype.getActionEventsByCourseCacheKey=function(e){return this.getActionEventsByCoursesCacheKey()+":"+e},e.prototype.getActionEventsByCourses=function(e,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=i().subtract(14,"days").unix(),l={timesortfrom:r,courseids:e,limitnum:n.EVENTS_LIMIT_PER_COURSE},s={cacheKey:o.getActionEventsByCoursesCacheKey()};return t.read("core_calendar_get_action_events_by_courses",l,s).then(function(e){if(e&&e.groupedbycourse){var n={};return e.groupedbycourse.forEach(function(e){n[e.courseid]=o.treatCourseEvents(e,r)}),n}return Promise.reject(null)})})},e.prototype.getActionEventsByCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"bycourse"},e.prototype.getActionEventsByTimesort=function(e,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=i().subtract(14,"days").unix(),l={timesortfrom:r,limitnum:n.EVENTS_LIMIT},s={cacheKey:o.getActionEventsByTimesortCacheKey(e,l.limitnum),getCacheUsingCacheKey:!0,uniqueCacheKey:!0};return e&&(l.aftereventid=e),t.read("core_calendar_get_action_events_by_timesort",l,s).then(function(e){if(e&&e.events){var n=e.events.length>=l.limitnum?e.lastid:void 0;return e=e.events.filter(function(e){return e.timesort>=r}),{events:e,canLoadMore:n}}return Promise.reject(null)})})},e.prototype.getActionEventsByTimesortPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"bytimesort:"},e.prototype.getActionEventsByTimesortCacheKey=function(e,n){return e=e||0,n=n||0,this.getActionEventsByTimesortPrefixCacheKey()+e+":"+n},e.prototype.invalidateActionEventsByCourses=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getActionEventsByCoursesCacheKey())})},e.prototype.invalidateActionEventsByTimesort=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getActionEventsByTimesortPrefixCacheKey())})},e.prototype.isAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_calendar_get_action_events_by_courses")&&e.wsAvailable("core_calendar_get_action_events_by_timesort")})},e.prototype.treatCourseEvents=function(e,t){var i=e.events.length>=n.EVENTS_LIMIT_PER_COURSE?e.lastid:void 0;return e.events=e.events.filter(function(e){return e.timesort>=t}),{events:e.events,canLoadMore:i}},e.EVENTS_LIMIT=20,e.EVENTS_LIMIT_PER_COURSE=10,e;var n}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(){this.error=!1,this.position="bottom",this.loadingMore=!1,this.action=new i.r}return e.prototype.loadMore=function(e){this.loadingMore||(e&&(this.infiniteScroll=e),this.loadingMore=!0,this.action.emit(this.complete.bind(this)))},e.prototype.complete=function(){this.loadingMore=!1,this.infiniteScroll&&this.infiniteScroll.complete(),this.infiniteScroll=void 0},e}()},function(e,n,t){"use strict";function i(e){return o._42(0,[o._37(402653184,1,{editor:0}),o._37(402653184,2,{textarea:0}),o._37(402653184,3,{decorate:0}),(e()(),o._16(3,0,null,null,76,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(5,0,[[1,0],["editor",1]],null,1,"div",[["class","core-rte-editor"],["contenteditable","true"],["tappable",""]],[[1,"data-placeholder-text",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(9,0,[[3,0],["decorate",1]],null,69,"div",[["class","core-rte-toolbar"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(11,0,null,null,66,"div",[["class","core-rte-buttons"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(13,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"bold")&&i}return i},null,null)),o._15(14,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(15,0,null,null,1,"core-icon",[["name","fa-bold"]],null,null,null,l.b,l.a)),o._15(16,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(18,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"italic")&&i}return i},null,null)),o._15(19,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(20,0,null,null,1,"core-icon",[["name","fa-italic"]],null,null,null,l.b,l.a)),o._15(21,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(23,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"underline")&&i}return i},null,null)),o._15(24,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(25,0,null,null,1,"core-icon",[["name","fa-underline"]],null,null,null,l.b,l.a)),o._15(26,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(28,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"strikeThrough")&&i}return i},null,null)),o._15(29,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(30,0,null,null,1,"core-icon",[["name","fa-strikethrough"]],null,null,null,l.b,l.a)),o._15(31,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(33,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"formatBlock|<p>")&&i}return i},null,null)),o._15(34,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(35,0,null,null,1,"core-icon",[["name","fa-paragraph"]],null,null,null,l.b,l.a)),o._15(36,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(38,0,null,null,4,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"formatBlock|<h1>")&&i}return i},null,null)),o._15(39,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(40,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,l.b,l.a)),o._15(41,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["1"])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(44,0,null,null,4,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"formatBlock|<h2>")&&i}return i},null,null)),o._15(45,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(46,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,l.b,l.a)),o._15(47,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["2"])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(50,0,null,null,4,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"formatBlock|<h3>")&&i}return i},null,null)),o._15(51,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(52,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,l.b,l.a)),o._15(53,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["3"])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(56,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"insertUnorderedList")&&i}return i},null,null)),o._15(57,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(58,0,null,null,1,"core-icon",[["name","fa-list-ul"]],null,null,null,l.b,l.a)),o._15(59,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(61,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"insertOrderedList")&&i}return i},null,null)),o._15(62,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(63,0,null,null,1,"core-icon",[["name","fa-list-ol"]],null,null,null,l.b,l.a)),o._15(64,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(66,0,null,null,3,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.buttonAction(t,"removeFormat")&&i}return i},null,null)),o._15(67,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(68,0,null,null,1,"core-icon",[["name","fa-eraser"]],null,null,null,l.b,l.a)),o._15(69,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(71,0,null,null,5,"button",[],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.toggleEditor(t)&&i}return i},null,null)),o._15(72,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(73,0,null,null,1,"core-icon",[["name","fa-code"]],null,null,null,l.b,l.a)),o._15(74,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(75,null,[" ",""])),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._16(81,0,null,null,17,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(83,0,null,null,1,"ion-textarea",[["class","core-textarea"],["ngControl","control"]],[[1,"name",0]],[[null,"ionChange"]],function(e,n,t){var i=!0;if("ionChange"===n){i=!1!==e.component.onChange(t)&&i}return i},c.b,c.a)),o._15(84,5423104,[[2,4],["textarea",4]],0,d.a,[f.a,p.a,h.a,m.a,o.p,o.K,[2,_.a],[2,g.a],[2,v.m],y.a],{placeholder:[0,"placeholder"]},{ionChange:"ionChange"}),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(86,0,null,null,11,"div",[["class","core-rte-toolbar"]],[[8,"hidden",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(88,0,[[3,0],["decorate",1]],null,8,"div",[["class","core-rte-buttons"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(90,0,null,null,5,"button",[["tappable",""]],null,[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.toggleEditor(t)&&i}return i},null,null)),o._15(91,81920,null,0,r.a,[o.p],null,{onClick:"onClick"}),(e()(),o._16(92,0,null,null,1,"core-icon",[["name","fa-pencil-square-o"]],null,null,null,l.b,l.a)),o._15(93,245760,null,0,s.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(94,null,[" ",""])),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n\n\n"]))],function(e,n){var t=n.component;e(n,14,0);e(n,16,0,"fa-bold"),e(n,19,0);e(n,21,0,"fa-italic"),e(n,24,0);e(n,26,0,"fa-underline"),e(n,29,0);e(n,31,0,"fa-strikethrough"),e(n,34,0);e(n,36,0,"fa-paragraph"),e(n,39,0);e(n,41,0,"fa-header"),e(n,45,0);e(n,47,0,"fa-header"),e(n,51,0);e(n,53,0,"fa-header"),e(n,57,0);e(n,59,0,"fa-list-ul"),e(n,62,0);e(n,64,0,"fa-list-ol"),e(n,67,0);e(n,69,0,"fa-eraser"),e(n,72,0);e(n,74,0,"fa-code");e(n,84,0,t.placeholder),e(n,91,0);e(n,93,0,"fa-pencil-square-o")},function(e,n){var t=n.component;e(n,3,0,!t.rteEnabled);e(n,5,0,t.placeholder);e(n,75,0,o._41(n,75,0,o._29(n,76).transform("core.viewcode")));e(n,81,0,t.rteEnabled);e(n,83,0,t.name);e(n,86,0,!t.editorSupported);e(n,94,0,o._41(n,94,0,o._29(n,95).transform("core.vieweditor")))})}t.d(n,"a",function(){return b}),n.b=i;var o=t(1),r=t(352),l=t(131),s=t(121),a=t(27),u=t(19),c=t(94),d=t(79),f=t(7),p=t(15),h=t(20),m=t(34),_=t(24),g=t(21),v=t(23),y=t(32),b=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(135),o=(t(4),function(){function e(e,n,t,i,o){this.feedbackProvider=e,this.userProvider=n,this.textUtils=t,this.translate=i,this.timeUtils=o,this.MODE_RESPONSETIME=1,this.MODE_COURSE=2,this.MODE_CATEGORY=3}return e.prototype.getPageView=function(e,n,t,i,o){for(var r,l,s=o.getActive();!s.isFirst()&&s.name.startsWith(i)&&(l=s.getNavParams(),(r=l.get(t)?l.get(t):l.get("module").instance)&&r==n);){if(s.name==e)return s;s=o.getPrevious(s)}return null},e.prototype.getNonRespondents=function(e,n,t){var i=this;return this.feedbackProvider.getNonRespondents(e,n,t).then(function(e){return i.addImageProfileToAttempts(e.users).then(function(n){return e.users=n,e})})},e.prototype.getPageItemsResponses=function(e){var n={};return e.forEach(function(e){var t=!1;if(e.hasError=!1,"captcha"==e.typ){var i=e.value||"";t=!!i,n[e.typ+"_"+e.id]=1,n["g-recaptcha-response"]=i,n.recaptcha_element="dummyvalue",e.isEmpty=!(!e.required||t)}else if(e.hasvalue){var o,r,l=e.typ+"_"+e.id;"multichoice"==e.typ&&"c"==e.subtype?(n[o=l+"[0]"]=0,e.choices.forEach(function(e,i){o=l+"["+(i+1)+"]",r=e.checked?e.value:0,!t&&r&&(t=!0),n[o]=r})):(o="multichoice"==e.typ&&"r"!=e.subtype?l+"[0]":l,"multichoice"==e.typ||"multichoicerated"==e.typ?r=e.value||0:"numeric"==e.typ?""!=(r=e.value||0==e.value?e.value:"")&&(""!=e.rangefrom&&r<e.rangefrom||""!=e.rangeto&&r>e.rangeto)&&(e.hasError=!0):r=e.value||0==e.value?e.value:"",t=!!r,n[o]=r),e.isEmpty=!(!e.required||t)}}),n},e.prototype.getResponsesAnalysis=function(e,n,t){var i=this;return this.feedbackProvider.getResponsesAnalysis(e,n,t).then(function(e){return i.addImageProfileToAttempts(e.attempts).then(function(n){return e.attempts=n,e})})},e.prototype.addImageProfileToAttempts=function(e){var n=this,t=e.map(function(e){return n.userProvider.getProfile(e.userid,e.courseid,!0).then(function(n){e.profileimageurl=n.profileimageurl}).catch(function(){})});return Promise.all(t).then(function(){return e})},e.prototype.openFeature=function(e,n,t,i,o){void 0===o&&(o=0);var r=e&&"analysis"!=e?"AddonModFeedback"+e+"Page":"AddonModFeedbackIndexPage",l={module:t,moduleId:t.id,courseId:i,feedbackId:t.instance,group:o};if("AddonModFeedbackIndexPage"==r){l.tab="analysis"==e?"analysis":"overview";var s=this.getPageView(r,t.instance,"feedbackId","AddonModFeedback",n);if(s)return n.popTo(s)}return n.push(r,l)},e.prototype.getItemFormLabel=function(e){return e.template="label",e.name="",e.presentation=this.textUtils.replacePluginfileUrls(e.presentation,e.itemfiles),e},e.prototype.getItemFormInfo=function(e){e.template="label";var n=parseInt(e.presentation,10);if(n==this.MODE_COURSE||n==this.MODE_CATEGORY)e.presentation=e.otherdata,e.value=void 0!==e.rawValue?e.rawValue:e.otherdata;else{if(n!=this.MODE_RESPONSETIME)return!1;e.value="__CURRENT__TIMESTAMP__";var t=void 0!==e.rawValue?1e3*e.rawValue:(new Date).getTime();e.presentation=this.timeUtils.userDate(t)}return e},e.prototype.getItemFormNumeric=function(e){e.template="numeric";var n=e.presentation.split(i.a.LINE_SEP)||[];return e.rangefrom=n.length>0?parseInt(n[0],10)||"":"",e.rangeto=n.length>1?parseInt(n[1],10)||"":"",e.value=void 0!==e.rawValue?parseFloat(e.rawValue):"",e},e.prototype.getItemFormTextfield=function(e){return e.template="textfield",e.length=e.presentation.split(i.a.LINE_SEP)[1]||255,e.value=void 0!==e.rawValue?e.rawValue:"",e},e.prototype.getItemFormTextarea=function(e){return e.template="textarea",e.value=void 0!==e.rawValue?e.rawValue:"",e},e.prototype.getItemFormMultichoice=function(e){var n=e.presentation.split(i.a.MULTICHOICE_TYPE_SEP)||[];if(e.subtype=n.length>0&&n[0]?n[0]:"r",e.template="multichoice-"+e.subtype,e.presentation=n.length>1?n[1]:"","d"!=e.subtype&&(n=e.presentation.split(i.a.MULTICHOICE_ADJUST_SEP)||[],e.presentation=n.length>0?n[0]:""),e.choices=e.presentation.split(i.a.LINE_SEP)||[],e.choices=e.choices.map(function(e,n){var t=e.split(i.a.MULTICHOICERATED_VALUE_SEP)||[""];return e=1==t.length?t[0]:"("+t[0]+") "+t[1],{value:n+1,label:e}}),"r"===e.subtype&&-1==e.options.search(i.a.MULTICHOICE_HIDENOSELECT))e.choices.unshift({value:0,label:this.translate.instant("addon.mod_feedback.not_selected")}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("d"===e.subtype)e.choices.unshift({value:0,label:""}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("c"===e.subtype)if(void 0===e.rawValue)e.value="";else{e.rawValue=""+e.rawValue;var t=e.rawValue.split(i.a.LINE_SEP);e.choices.forEach(function(e){for(var n in t)if(e.value==t[n])return void(e.checked=!0)})}else e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):"";return e},e.prototype.getItemFormCaptcha=function(e){var n=this.textUtils.parseJSON(e.otherdata);return n&&n.length>3&&(e.captcha={recaptchapublickey:n[3]}),e.template="captcha",e.value="",e},e.prototype.getItemForm=function(e,n){switch(e.typ){case"label":return this.getItemFormLabel(e);case"info":return this.getItemFormInfo(e);case"numeric":return this.getItemFormNumeric(e);case"textfield":return this.getItemFormTextfield(e);case"textarea":return this.getItemFormTextarea(e);case"multichoice":case"multichoicerated":return this.getItemFormMultichoice(e);case"pagebreak":if(!n)return!1;break;case"captcha":return this.getItemFormCaptcha(e);default:return!1}return e},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(4);var i=t(151),o=(t(236),t(128),function(){function e(e,n,t,i,o,r,l){this.domUtils=e,this.translate=n,this.utils=t,this.accessRuleDelegate=i,this.quizProvider=o,this.modalCtrl=r,this.quizOfflineProvider=l}return e.prototype.getAndCheckPreflightData=function(e,n,t,i,o,r,l,s,a){var u=this,c=n.activerulenames,d=!1;return this.accessRuleDelegate.isPreflightCheckRequired(c,e,i,r,s).then(function(o){if(d=o,o)return u.getPreflightData(e,n,i,r,l,s).then(function(e){Object.assign(t,e)})}).then(function(){return u.accessRuleDelegate.getFixedPreflightData(c,e,t,i,r,s)}).then(function(){return u.validatePreflightData(e,n,t,i,o,r,s).catch(function(c){return r?Promise.reject(c):a&&!d?Promise.reject(c):(setTimeout(function(){u.domUtils.showErrorModalDefault(c,"core.error",!0)},100),u.getAndCheckPreflightData(e,n,t,i,o,r,l,s,!0))})})},e.prototype.getPreflightData=function(e,n,t,i,o,r){var l=this,s=[];if(n.activerulenames.forEach(function(e){l.accessRuleDelegate.isAccessRuleSupported(e)||s.push(e)}),s.length)return Promise.reject(this.translate.instant("addon.mod_quiz.errorrulesnotsupported")+" "+JSON.stringify(s));var a=this.modalCtrl.create("AddonModQuizPreflightModalPage",{title:o,quiz:e,attempt:t,prefetch:!!i,siteId:r,rules:n.activerulenames});return a.present(),new Promise(function(e,n){a.onDidDismiss(function(t){void 0!==t?e(t):n(l.domUtils.createCanceledError())})})},e.prototype.getQuestionMarkFromHtml=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(n,".grade")},e.prototype.setAttemptCalculatedData=function(e,n,t,o){n.rescaledGrade=this.quizProvider.rescaleGrade(n.sumgrades,e,!1),n.finished=this.quizProvider.isAttemptFinished(n.state),n.readableState=this.quizProvider.getAttemptReadableState(e,n),n.readableMark=e.showMarkColumn&&n.finished?this.quizProvider.formatGrade(n.sumgrades,e.decimalpoints):"",e.showGradeColumn&&n.finished?(n.readableGrade=this.quizProvider.formatGrade(n.rescaledGrade,e.decimalpoints),n.highlightGrade=t&&!n.preview&&n.state==i.a.ATTEMPT_FINISHED&&n.readableGrade==o):n.readableGrade=""},e.prototype.setQuizCalculatedData=function(e,n){e.sumGradesFormatted=this.quizProvider.formatGrade(e.sumgrades,e.decimalpoints),e.gradeFormatted=this.quizProvider.formatGrade(e.grade,e.decimalpoints),e.showAttemptColumn=1!=e.attempts,e.showGradeColumn=n.someoptions.marks>=i.a.QUESTION_OPTIONS_MARK_AND_MAX&&this.quizProvider.quizHasGrades(e),e.showMarkColumn=e.showGradeColumn&&e.grade!=e.sumgrades,e.showFeedbackColumn=e.hasfeedback&&n.alloptions.overallfeedback},e.prototype.validatePreflightData=function(e,n,t,o,r,l,s){var a,u=this,c=n.activerulenames;if(o)if(o.state==i.a.ATTEMPT_OVERDUE||o.finishedOffline)a=this.quizProvider.getAttemptSummary(o.id,t,r,!0,!1,s);else{a=this.quizProvider.getAttemptData(o.id,o.currentpage,t,r,!0,s).then(function(){if(r)return u.quizOfflineProvider.getAttemptById(o.id).then(function(e){o.currentpage=e.currentpage}).catch(function(){})})}else a=this.quizProvider.startAttempt(e.id,t,!1,s).then(function(e){o=e});return a.then(function(){return u.accessRuleDelegate.notifyPreflightCheckPassed(c,e,o,t,l,s),o}).catch(function(n){return u.utils.isWebServiceError(n)&&u.accessRuleDelegate.notifyPreflightCheckFailed(c,e,o,t,l,s),Promise.reject(n)})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e,n,t,i,o,r){this.appProvider=e,this.domUtils=n,this.textUtils=t,this.fileUploaderProvider=i,this.translate=o,this.fileUploaderHelper=r}return e.prototype.ngOnInit=function(){this.maxSize=Number(this.maxSize),this.maxSize=!isNaN(this.maxSize)&&this.maxSize>0?this.maxSize:-1,this.maxSizeReadable=-1==this.maxSize?this.translate.instant("core.unknown"):this.textUtils.bytesToSize(this.maxSize,2),void 0===this.maxSubmissions||this.maxSubmissions<0?(this.maxSubmissionsReadable=this.translate.instant("core.unknown"),this.unlimitedFiles=!0):this.maxSubmissionsReadable=String(this.maxSubmissions),this.acceptedTypes&&this.acceptedTypes.trim()&&(this.fileTypes=this.fileUploaderProvider.prepareFiletypeList(this.acceptedTypes))},e.prototype.add=function(){var e=this,n=this.allowOffline&&"false"!==this.allowOffline;if(n||this.appProvider.isOnline()){this.fileUploaderHelper.selectFile(this.maxSize,n,void 0,this.fileTypes&&this.fileTypes.mimetypes).then(function(n){e.files.push(n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error selecting file.")})}else this.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0)},e.prototype.delete=function(e,n){var t=this;(n?this.domUtils.showConfirm(this.translate.instant("core.confirmdeletefile")):Promise.resolve()).then(function(){t.files.splice(e,1)}).catch(function(){})},e.prototype.renamed=function(e,n){this.files[e]=n.file},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.sanitizer=e,this.textSupplied=!1}return e.prototype.ngOnChanges=function(e){e.text&&void 0!==e.text.currentValue&&(this.textSupplied=!0),e.progress&&("string"==typeof this.progress&&(this.progress=parseInt(this.progress,10)),(this.progress<0||isNaN(this.progress))&&(this.progress=-1),-1!=this.progress&&(this.progress=Math.floor(this.progress),this.textSupplied||(this.text=String(this.progress)),this.width=this.sanitizer.bypassSecurityTrustStyle(this.progress+"%")))},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmaBadges:",this.logger=e.getInstance("AddonBadgesProvider")}return e.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return!!e.canUseAdvancedFeature("enablebadges")&&!!e.wsAvailable("core_course_get_user_navigation_options")})},e.prototype.getBadgesCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"badges:"+e+":"+n},e.prototype.getUserBadges=function(e,n,t){var i=this;return this.logger.debug("Get badges for course "+e),this.sitesProvider.getSite(t).then(function(t){var o={courseid:e,userid:n},r={cacheKey:i.getBadgesCacheKey(e,n)};return t.read("core_badges_get_user_badges",o,r).then(function(e){return e&&e.badges?e.badges:Promise.reject(null)})})},e.prototype.invalidateUserBadges=function(e,n,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(i.getBadgesCacheKey(e,n))})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i,o,r,l){this.appProvider=n,this.sitesProvider=t,this.timeUtils=i,this.userProvider=o,this.emulatorHelper=r,this.messageProvider=l,this.ROOT_CACHE_KEY="mmaNotifications:",this.logger=e.getInstance("AddonNotificationsProvider")}return n=e,e.prototype.formatNotificationsData=function(e){var n=this,t=e.map(function(e){e.mobiletext=e.contexturl&&e.contexturl.indexOf("/mod/forum/")>=0?e.smallmessage:e.fullmessage;var t=e.fullmessagehtml.match(/course\/view\.php\?id=([^"]*)/);return t&&t[1]&&(e.courseid=t[1]),e.useridfrom>0?n.userProvider.getProfile(e.useridfrom,e.courseid,!0).then(function(n){return e.profileimageurlfrom=n.profileimageurl,e}).catch(function(){}):Promise.resolve(e)});return Promise.all(t)},e.prototype.getNotificationPreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"notificationPreferences"},e.prototype.getNotificationPreferences=function(e){var n=this;return this.logger.debug("Get notification preferences"),this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getNotificationPreferencesCacheKey()};return e.read("core_message_get_user_notification_preferences",{},t).then(function(e){return e.preferences})})},e.prototype.getNotificationsCacheKey=function(){return this.ROOT_CACHE_KEY+"list"},e.prototype.getNotifications=function(e,t,i,o,r,l,s){var a=this;return void 0===i&&(i=0),void 0===o&&(o=!0),i=i||n.LIST_LIMIT,this.logger.debug("Get "+(e?"read":"unread")+" notifications from "+t+". Limit: "+i),this.sitesProvider.getSite(s).then(function(u){var c={useridto:u.getUserId(),useridfrom:0,type:"notifications",read:e?1:0,newestfirst:1,limitfrom:t,limitnum:i},d={cacheKey:a.getNotificationsCacheKey(),omitExpires:r,getFromCache:r||!l,emergencyCache:r||!l};return u.read("core_message_get_messages",c,d).then(function(i){if(i.messages){var r=i.messages;return a.formatNotificationsData(r).then(function(){return a.appProvider.isDesktop()&&o&&!e&&0===t&&a.emulatorHelper.storeLastReceivedNotification(n.PUSH_SIMULATION_COMPONENT,r[0],s),r})}return Promise.reject(null)})})},e.prototype.getReadNotifications=function(e,n,t,i,o,r){return void 0===t&&(t=!0),this.getNotifications(!0,e,n,t,i,o,r)},e.prototype.getUnreadNotifications=function(e,n,t,i,o,r){return void 0===t&&(t=!0),this.getNotifications(!1,e,n,t,i,o,r)},e.prototype.getUnreadNotificationsCount=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(o){if(o.wsAvailable("message_popup_get_unread_popup_notification_count")){e=e||o.getUserId();return o.read("message_popup_get_unread_popup_notification_count",{useridto:e},{getFromCache:!1,emergencyCache:!1,saveToCache:!1,typeExpected:"number"}).catch(function(){return 0})}return i.getUnreadNotifications(0,n.LIST_LIMIT+1,!1,!1,!1,t).then(function(e){return e.length>n.LIST_LIMIT?n.LIST_LIMIT+"+":e.length}).catch(function(){return 0})})},e.prototype.markAllNotificationsAsRead=function(){var e={useridto:this.sitesProvider.getCurrentSiteUserId()};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_notifications_as_read",e)},e.prototype.markNotificationRead=function(e){var n=this.sitesProvider.getCurrentSite();if(n.wsAvailable("core_message_mark_notification_read")){var t={notificationid:e,timeread:this.timeUtils.timestamp()};return n.write("core_message_mark_notification_read",t)}return this.messageProvider.markMessageRead(e)},e.prototype.invalidateNotificationPreferences=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getNotificationPreferencesCacheKey())})},e.prototype.invalidateNotificationsList=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getNotificationsCacheKey())})},e.prototype.isMarkAllNotificationsAsReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_notifications_as_read")},e.prototype.isPreciseNotificationCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_popup_get_unread_popup_notification_count")},e.prototype.isNotificationPreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_notification_preferences")},e.READ_CHANGED_EVENT="addon_notifications_read_changed_event",e.READ_CRON_EVENT="addon_notifications_read_cron_event",e.PUSH_SIMULATION_COMPONENT="AddonNotificationsPushSimulation",e.LIST_LIMIT=20,e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(126),r=(t(262),t(135)),l=(t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,"AddonModFeedbackSyncProvider",t,n,i,d,u,s,f)||this;return p.sitesProvider=n,p.loggerProvider=t,p.appProvider=i,p.feedbackOffline=o,p.eventsProvider=r,p.feedbackProvider=l,p.translate=s,p.utils=a,p.textUtils=u,p.componentTranslate=c.translateModuleName("feedback"),p}return Object(i.__extends)(n,e),t=n,n.prototype.syncAllFeedbacks=function(e){return this.syncOnSites("all feedbacks",this.syncAllFeedbacksFunc.bind(this),void 0,e)},n.prototype.syncAllFeedbacksFunc=function(e){var n=this;return this.feedbackOffline.getAllFeedbackResponses(e).then(function(i){var o={},r=function(r){var l=i[r];if(void 0!==o[l.feedbackid])return"continue";o[l.feedbackid]=n.syncFeedbackIfNeeded(l.feedbackid,e).then(function(i){i&&i.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{feedbackId:l.feedbackid,userId:l.userid,warnings:i.warnings},e)})};for(var l in i)r(l);return Promise.all(n.utils.objectToArray(o))})},n.prototype.syncFeedbackIfNeeded=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncNeeded(e,n).then(function(i){if(i)return t.syncFeedback(e,n)})},n.prototype.syncFeedback=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var i=e;if(this.isSyncing(i,n))return this.getOngoingSync(i,n);if(this.syncProvider.isBlocked(r.a.COMPONENT,i,n))return this.logger.debug("Cannot sync feedback '"+i+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));var o,l,s={warnings:[],updated:!1};this.logger.debug("Try to sync feedback '"+e+"' in site "+n+"'");var a=this.feedbackOffline.getFeedbackResponses(e,n).catch(function(){return[]}).then(function(i){if(i.length)return t.appProvider.isOnline()?(o=i[0].courseid,t.feedbackProvider.getFeedbackById(o,e,n).then(function(n){return!(l=n).multiple_submit&&t.feedbackProvider.isCompleted(e)}).then(function(o){if(o){var r=[];return i.forEach(function(i){r.push(t.feedbackOffline.deleteFeedbackPageResponses(e,i.page,n))}),s.updated=!0,s.warnings.push(t.translate.instant("core.warningofflinedatadeleted",{component:t.componentTranslate,name:l.name,error:t.translate.instant("addon.mod_feedback.this_feedback_is_already_submitted")})),Promise.all(r)}return t.feedbackProvider.getCurrentCompletedTimeModified(e,n).then(function(e){return i.sort(function(e,n){return e.page-n.page}),i=i.map(function(i){return{func:t.processPage.bind(t),params:[l,i,n,e,s],blocking:!0}}),t.utils.executeOrderedPromises(i)})})):Promise.reject(null)}).then(function(){if(s.updated)return t.feedbackProvider.invalidateAllFeedbackData(e,n).catch(function(){})}).then(function(){return t.setSyncTime(i,n)}).then(function(){return s});return this.addOngoingSync(i,a,n)},n.prototype.processPage=function(e,n,t,i,o){var r=this;return i>n.timemodified?this.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t):this.feedbackProvider.processPageOnline(e.id,n.page,n.responses,!1,t).then(function(){return o.updated=!0,r.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t)}).catch(function(i){return i&&i.wserror?(o.updated=!0,r.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t).then(function(){o.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:e.name,error:r.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)})},n.AUTO_SYNCED="addon_mod_feedback_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(143),l=(t(256),t(296),function(e){function n(n,i,o,r,l,s,a,u,c,d,f,p,h,m){var _=e.call(this,"AddonModLessonSyncProvider",n,i,o,r,l,s,p)||this;return _.eventsProvider=u,_.lessonProvider=c,_.lessonOfflineProvider=d,_.prefetchHandler=f,_.utils=h,_.urlUtils=m,_.tablesSchema={name:t.RETAKES_FINISHED_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER"},{name:"pageid",type:"INTEGER"},{name:"timefinished",type:"INTEGER"}]},_.componentTranslate=a.translateModuleName("lesson"),_.sitesProvider.createTableFromSchema(_.tablesSchema),_}return Object(i.__extends)(n,e),t=n,n.prototype.deleteRetakeFinishedInSync=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},n.prototype.getRetakeFinishedInSync=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},n.prototype.hasDataToSync=function(e,n,t){var i=[],o=!1;return i.push(this.lessonOfflineProvider.hasRetakeAttempts(e,n,t).then(function(e){o=o||e}).catch(function(){})),i.push(this.lessonOfflineProvider.hasFinishedRetake(e,t).then(function(e){o=o||e})),Promise.all(i).then(function(){return o})},n.prototype.setRetakeFinishedInSync=function(e,n,i,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().insertRecord(t.RETAKES_FINISHED_TABLE,{lessonid:e,retake:Number(n),pageid:Number(i),timefinished:r.timeUtils.timestamp()})})},n.prototype.syncAllLessons=function(e){return this.syncOnSites("all lessons",this.syncAllLessonsFunc.bind(this),[],e)},n.prototype.syncAllLessonsFunc=function(e){var n=this;return this.lessonOfflineProvider.getAllLessonsWithData(e).then(function(i){var o=[];return i.forEach(function(i){o.push(n.syncLessonIfNeeded(i.id,!1,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{lessonId:i.id,warnings:o.warnings},e)}))}),Promise.all(o)})},n.prototype.syncLessonIfNeeded=function(e,n,t){var i=this;return this.isSyncNeeded(e,t).then(function(o){if(o)return i.syncLesson(e,n,!1,t)})},n.prototype.syncLesson=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var l,s,a,u,c,d={warnings:[],updated:!1};return this.isSyncing(e,i)?this.getOngoingSync(e,i):!t&&this.syncProvider.isBlocked(r.a.COMPONENT,e,i)?(this.logger.debug("Cannot sync lesson "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync lesson "+e+" in site "+i),l=this.lessonOfflineProvider.getLessonAttempts(e,i).then(function(t){if(t.length)return o.appProvider.isOnline()?(a=t[0].courseid,o.lessonProvider.getLessonById(a,e,!1,i).then(function(t){return s=t,o.prefetchHandler.getLessonPassword(e,!1,!0,n,i)}).then(function(e){var n=t.length,r=[];return c=e.accessInfo,u=e.password,s=e.lesson||s,(t=t.filter(function(e){return e.retake==c.attemptscount||(r.push(o.lessonOfflineProvider.deleteAttempt(s.id,e.retake,e.pageid,e.timemodified,i).catch(function(){})),!1)})).length!=n&&d.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:s.name,error:o.translate.instant("addon.mod_lesson.warningretakefinished")})),Promise.all(r)}).then(function(){if(t.length)return t.sort(function(e,n){return e.timemodified-n.timemodified}),t=t.map(function(e){return{func:o.sendAttempt.bind(o),params:[s,u,e,d,i],blocking:!0}}),o.utils.executeOrderedPromises(t)})):Promise.reject(null)}).then(function(){return o.lessonOfflineProvider.getRetake(e,i).then(function(r){if(!r.finished)return o.lessonOfflineProvider.deleteRetake(e,i);if(!o.appProvider.isOnline())return Promise.reject(null);return a=r.courseid||a,(s?Promise.resolve():o.lessonProvider.getLessonById(a,e,!1,i).then(function(t){return s=t,o.prefetchHandler.getLessonPassword(e,!1,!0,n,i)}).then(function(e){c=e.accessInfo,u=e.password,s=e.lesson||s})).then(function(){return r.retake!=c.attemptscount?(d.warnings.length||d.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:s.name,error:o.translate.instant("addon.mod_lesson.warningretakefinished")})),o.lessonOfflineProvider.deleteRetake(e,i)):o.lessonProvider.finishRetakeOnline(e,u,!1,!1,i).then(function(n){if(d.updated=!0,!t&&n.data&&n.data.reviewlesson){var l=o.urlUtils.extractUrlParams(n.data.reviewlesson.value);l&&l.pageid&&o.setRetakeFinishedInSync(e,r.retake,l.pageid,i)}return o.lessonOfflineProvider.deleteRetake(e,i)}).catch(function(n){return n&&o.utils.isWebServiceError(n)?(d.updated=!0,o.lessonOfflineProvider.deleteRetake(e,i).then(function(){d.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:s.name,error:o.textUtils.getErrorMessageFromError(n)}))})):Promise.reject(n)})})},function(){})}).then(function(){if(d.updated&&a){var n=[];return n.push(o.lessonProvider.invalidateAccessInformation(e,i)),n.push(o.lessonProvider.invalidateContentPagesViewed(e,i)),n.push(o.lessonProvider.invalidateQuestionsAttempts(e,i)),n.push(o.lessonProvider.invalidatePagesPossibleJumps(e,i)),n.push(o.lessonProvider.invalidateTimers(e,i)),o.utils.allPromises(n).catch(function(){}).then(function(){return o.lessonProvider.getAccessInformation(e,!1,!1,i).then(function(n){var t=[],r=n.attemptscount;return t.push(o.lessonProvider.getContentPagesViewedOnline(e,r,!1,!1,i)),t.push(o.lessonProvider.getQuestionsAttemptsOnline(e,r,!1,void 0,!1,!1,i)),Promise.all(t)}).catch(function(){})})}}).then(function(){return o.setSyncTime(e,i).catch(function(){})}).then(function(){return d}),this.addOngoingSync(e,l,i))},n.prototype.sendAttempt=function(e,n,t,i,o){var r=this;return this.lessonProvider.processPageOnline(e.id,t.pageid,t.data,n,!1,o).then(function(){return i.updated=!0,r.lessonOfflineProvider.deleteAttempt(e.id,t.retake,t.pageid,t.timemodified,o)}).catch(function(n){return n&&r.utils.isWebServiceError(n)?(i.updated=!0,r.lessonOfflineProvider.deleteAttempt(e.id,t.retake,t.pageid,t.timemodified,o).then(function(){i.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:e.name,error:r.textUtils.getErrorMessageFromError(n)}))})):Promise.reject(n)})},n.AUTO_SYNCED="addon_mod_lesson_autom_synced",n.RETAKES_FINISHED_TABLE="addon_mod_lesson_retakes_finished_sync",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(193),l=(t(237),t(300),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p){var h=e.call(this,"AddonModScormSyncProvider",n,t,i,o,r,l,u)||this;return h.eventsProvider=a,h.scormProvider=c,h.scormOfflineProvider=d,h.prefetchHandler=f,h.utils=p,h.componentTranslate=s.translateModuleName("scorm"),h}return Object(i.__extends)(n,e),t=n,n.prototype.addToNewOrDelete=function(e,n,t,i,o,r,l,s,a){var u=this;return n==t?(i.push(n),Promise.resolve()):this.scormOfflineProvider.getAttemptCreationTime(e,n,a).then(function(t){if(t>r){if(l)return u.logger.debug("Try to delete attempt "+n+" because it cannot be created as a new attempt."),u.scormOfflineProvider.deleteAttempt(e,n,a).then(function(){s.push(u.translate.instant("addon.mod_scorm.warningofflinedatadeleted",{number:n}))}).catch(function(){});o[t]=n}else i.push(n)})},n.prototype.canRetrySync=function(e,n,t,i){var o=this;return this.scormProvider.getScormUserData(e,n,void 0,!1,t!=n,i).then(function(t){return o.scormOfflineProvider.getAttemptSnapshot(e,n,i).then(function(e){if(!e||!Object.keys(e).length||!o.snapshotEquals(e,t))return Promise.reject(null)})})},n.prototype.createNewAttemptsAtEnd=function(e,n,t,i){var o=this,r=Object.keys(n).sort(),l=[];return r.length?(r.forEach(function(r,s){l.push(o.scormOfflineProvider.changeAttemptNumber(e,n[r],t+s+1,i))}),this.utils.allPromises(l)):Promise.resolve()},n.prototype.finishSync=function(e,n,t,i,o,r,l){var s=this;return(l?this.scormProvider.invalidateAllScormData(n.id,e).catch(function(){}).then(function(){return s.prefetchHandler.fetchWSData(n,e)}):Promise.resolve()).then(function(){return s.setSyncTime(n.id,e).catch(function(){})}).then(function(){return!!r&&s.scormProvider.getAttemptCount(n.id,void 0,!1,e).then(function(t){return t.online.length>r.online.length||!o&&i>0&&s.scormProvider.isAttemptIncomplete(n.id,i,!1,!0,e).then(function(e){return!e})})}).then(function(e){return{warnings:t,attemptFinished:e,updated:l}})},n.prototype.getOfflineAttemptData=function(e,n,t){var i=this;return this.scormProvider.isAttemptIncomplete(e,n,!0,!1,t).then(function(o){return i.scormOfflineProvider.getAttemptCreationTime(e,n,t).then(function(e){return{incomplete:o,timecreated:e}})})},n.prototype.moveNewAttempts=function(e,n,t,i,o,r){var l=this;if(!n.length)return Promise.resolve();var s,a=Promise.resolve();return(o=o.sort(function(e,n){return Number(e)<=Number(n)?1:-1})).forEach(function(t){t>i&&(a=a.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,t,t+n.length,r).then(function(){s=t})}))}),a.then(function(){var i=[],o=[];return(n=n.sort(function(e,n){return Number(e)>=Number(n)?1:-1})).forEach(function(n,s){o.push(l.scormOfflineProvider.changeAttemptNumber(e,n,t+s+1,r).then(function(){i.push(n)}))}),Promise.all(o).catch(function(s){return o=[],i.forEach(function(i){var s=t+n.indexOf(i)+1;o.push(l.scormOfflineProvider.changeAttemptNumber(e,s,i,r))}),l.utils.allPromises(o).then(function(){return Promise.reject(s)})})}).catch(function(t){if(!s)return Promise.reject(t);for(var i=[],a=Promise.resolve(),u=s;-1!=o.indexOf(u);u++)i.push(u);return i.forEach(function(t){a=a.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,t+n.length,t,r)})}),a.then(function(){return Promise.reject(t)})})},n.prototype.saveSyncSnapshot=function(e,n,t){var i=this;return this.scormProvider.getScormUserData(e,n,void 0,!1,!0,t).then(function(o){return i.scormOfflineProvider.setAttemptSnapshot(e,n,o,t)},function(){return i.scormProvider.getScormUserData(e,n,void 0,!1,!1,t).catch(function(){return{}}).then(function(o){return i.scormOfflineProvider.getScormStoredData(e,n,!1,!0,t).then(function(r){return r.forEach(function(e){o[e.scoid]||(o[e.scoid]={scoid:e.scoid,userdata:{}}),o[e.scoid].userdata[e.element]=e.value}),i.scormOfflineProvider.setAttemptSnapshot(e,n,o,t)})})})},n.prototype.snapshotEquals=function(e,n){for(var t in n){var i=n[t],o=e[t];for(var r in i.userdata)if(r.indexOf(".")>-1&&(!o||i.userdata[r]!==o.userdata[r]))return!1}for(var t in e){i=n[t],o=e[t];for(var r in o.userdata)if(r.indexOf(".")>-1&&(!i||i.userdata[r]!==o.userdata[r]))return!1}return!0},n.prototype.syncAllScorms=function(e){return this.syncOnSites("all SCORMs",this.syncAllScormsFunc.bind(this),[],e)},n.prototype.syncAllScormsFunc=function(e){var n=this;return this.scormOfflineProvider.getAllAttempts(e).then(function(i){var o=[],l=[],s=[];return i.forEach(function(e){-1==l.indexOf(e.scormid)&&(l.push(e.scormid),o.push({id:e.scormid,courseId:e.courseid}))}),o.forEach(function(i){n.syncProvider.isBlocked(r.a.COMPONENT,i.id,e)||s.push(n.scormProvider.getScormById(i.courseId,i.id,"",!1,e).then(function(i){return n.syncScormIfNeeded(i,e).then(function(o){void 0!==o&&n.eventsProvider.trigger(t.AUTO_SYNCED,{scormId:i.id,attemptFinished:o.attemptFinished,warnings:o.warnings,updated:o.updated},e)})}))}),Promise.all(s)})},n.prototype.syncAttempt=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Try to sync attempt "+n+" in SCORM "+e+" and site "+t),this.scormOfflineProvider.getScormStoredData(e,n,!0,!1,t).then(function(o){var r={},l=[],s=!1;o.forEach(function(e){e.element.indexOf(".")>-1&&(r[e.scoid]||(r[e.scoid]=[]),r[e.scoid].push({element:e.element,value:e.value}))});var a=function(o){var a=Number(o);l.push(i.scormProvider.saveTracksOnline(e,a,n,r[a],t).then(function(){return i.scormOfflineProvider.markAsSynced(e,n,a,t).catch(function(){}).then(function(){s=!0})}))};for(var u in r)a(u);return i.utils.allPromises(l).then(function(){return i.scormOfflineProvider.deleteAttempt(e,n,t).catch(function(){return i.scormOfflineProvider.deleteAttempt(e,n,t).catch(function(){i.logger.error("After sync: error deleting attempt "+n+" in SCORM "+e)})})}).catch(function(o){return s?(i.logger.error("Error synchronizing some SCOs for attempt "+n+" in SCORM "+e+". Saving snapshot."),i.saveSyncSnapshot(e,n,t).then(function(){return Promise.reject(o)})):(i.logger.error("Error synchronizing attempt "+n+" in SCORM "+e),Promise.reject(o))})})},n.prototype.syncScormIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e.id,n).then(function(i){if(i)return t.syncScorm(e,n)})},n.prototype.syncScorm=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var i,o,l=[],s=0,a=!1;return this.isSyncing(e.id,n)?this.getOngoingSync(e.id,n):this.syncProvider.isBlocked(r.a.COMPONENT,e.id,n)?(this.logger.debug("Cannot sync SCORM "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync SCORM "+e.id+" in site "+n),i=this.scormProvider.getAttemptCount(e.id,!1,!0,n).then(function(i){if(!i.offline||!i.offline.length)return t.finishSync(n,e,l,s,a);o=i;var r=[];i.online.forEach(function(e){s=Math.max(s,e),i.offline.indexOf(e)>-1&&r.push(e)});return(s>0?t.scormProvider.isAttemptIncomplete(e.id,s,!1,!0,n):Promise.resolve(!1)).then(function(u){if(a=!u,r.length||u)return r.length?t.treatCollisions(e.id,r,s,i.offline,n).then(function(i){return l=l.concat(i),t.scormOfflineProvider.getAttempts(e.id,n).then(function(i){var r=[],c=!1;return i=i.map(function(e){return e.attempt}),u&&i.indexOf(s)>-1&&(u=!1),i.forEach(function(i){!u||i<=s?(0==e.maxattempt||i<=e.maxattempt)&&r.push(t.syncAttempt(e.id,i,n)):c=!0}),Promise.all(r).then(function(){return c&&l.push(t.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),t.finishSync(n,e,l,s,a,o,!0)})})}):(l.push(t.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),t.finishSync(n,e,l,s,a,o,!1));var c=[];return i.offline.forEach(function(i){(0==e.maxattempt||i<=e.maxattempt)&&c.push(t.syncAttempt(e.id,i,n))}),Promise.all(c).then(function(){return t.finishSync(n,e,l,s,a,o,!0)})})}),this.addOngoingSync(e.id,i,n))},n.prototype.treatCollisions=function(e,n,t,i,o){var r=this,l=[],s=[],a={},u=Math.max.apply(Math,n),c=Math.max.apply(Math,i);return this.getOfflineAttemptData(e,c,o).then(function(d){var f=[];return n.forEach(function(n){f.push(r.scormOfflineProvider.getScormStoredData(e,n,!1,!0,o).then(function(i){return i&&i.length?r.scormOfflineProvider.getScormStoredData(e,n,!0,!1,o).then(function(i){var u=!1;for(var f in i){if(i[f].element.indexOf(".")>-1){u=!0;break}}return u?r.canRetrySync(e,n,t,o).catch(function(){return r.addToNewOrDelete(e,n,c,s,a,d.timecreated,d.incomplete,l,o)}):r.scormOfflineProvider.deleteAttempt(e,n,o).catch(function(){})}):r.scormOfflineProvider.getAttemptSnapshot(e,n,o).then(function(i){if(i&&Object.keys(i).length){return r.scormProvider.getScormUserData(e,n,void 0,!1,t!=n,o).then(function(t){if(!r.snapshotEquals(i,t))return r.addToNewOrDelete(e,n,c,s,a,d.timecreated,d.incomplete,l,o)})}s.push(n)})}))}),Promise.all(f).then(function(){return r.moveNewAttempts(e,s,t,u,i,o).then(function(){return c+=s.length,r.createNewAttemptsAtEnd(e,a,c,o).then(function(){return l})})})})},n.AUTO_SYNCED="addon_mod_scorm_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(209),l=(t(257),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p){var h=e.call(this,"AddonModWikiSyncProvider",n,t,i,o,r,l,p)||this;return h.eventsProvider=a,h.wikiProvider=u,h.wikiOfflineProvider=c,h.utils=d,h.groupsProvider=f,h.componentTranslate=s.translateModuleName("wiki"),h}return Object(i.__extends)(n,e),t=n,n.prototype.getSubwikiBlockId=function(e,n,t,i){return(e=this.wikiOfflineProvider.convertToPositiveNumber(e))&&e>0?String(e):(n=this.wikiOfflineProvider.convertToPositiveNumber(n))?(t=this.wikiOfflineProvider.convertToPositiveNumber(t),i=this.wikiOfflineProvider.convertToPositiveNumber(i),n+":"+t+":"+i):void 0},n.prototype.syncAllWikis=function(e){return this.syncOnSites("all wikis",this.syncAllWikisFunc.bind(this),[],e)},n.prototype.syncAllWikisFunc=function(e){var n=this;return this.wikiOfflineProvider.getAllNewPages(e).then(function(i){var o=[],r={};i.forEach(function(e){var t=n.getSubwikiBlockId(e.subwikiid,e.wikiid,e.userid,e.groupid);r[t]=e});var l=function(i){var l=r[i];o.push(n.syncSubwikiIfNeeded(l.subwikiid,l.wikiid,l.userid,l.groupid,e).then(function(i){i&&i.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{siteId:e,subwikiId:l.subwikiid,wikiId:l.wikiid,userId:l.userid,groupId:l.groupid,created:i.created,discarded:i.discarded,warnings:i.warnings})}))};for(var s in r)l(s);return Promise.all(o)})},n.prototype.syncSubwikiIfNeeded=function(e,n,t,i,o){var r=this,l=this.getSubwikiBlockId(e,n,t,i);return this.isSyncNeeded(l,o).then(function(l){if(l)return r.syncSubwiki(e,n,t,i,o)})},n.prototype.syncSubwiki=function(e,n,t,i,o){var l=this;o=o||this.sitesProvider.getCurrentSiteId();var s={warnings:[],updated:!1,created:[],discarded:[]},a=this.getSubwikiBlockId(e,n,t,i);if(this.isSyncing(a,o))return this.getOngoingSync(a,o);if(this.syncProvider.isBlocked(r.a.COMPONENT,a,o))return this.logger.debug("Cannot sync subwiki "+a+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync subwiki "+a);var u=this.wikiOfflineProvider.getSubwikiNewPages(e,n,t,i,o).catch(function(){return[]}).then(function(r){if(r&&r.length){if(!l.appProvider.isOnline())return Promise.reject(l.translate.instant("core.networkerrormsg"));var a=[];return r.forEach(function(r){a.push(l.wikiProvider.newPageOnline(r.title,r.cachedcontent,e,n,t,i,o).then(function(a){return s.updated=!0,s.created.push({pageId:a,title:r.title}),l.wikiOfflineProvider.deleteNewPage(r.title,e,n,t,i,o)}).catch(function(a){return l.utils.isWebServiceError(a)?l.wikiOfflineProvider.deleteNewPage(r.title,e,n,t,i,o).then(function(){s.updated=!0;var e=l.translate.instant("core.warningofflinedatadeleted",{component:l.translate.instant("addon.mod_wiki.wikipage"),name:r.title,error:l.textUtils.getErrorMessageFromError(a)});s.discarded.push({title:r.title,warning:e}),s.warnings.push(e)}):Promise.reject(a)}))}),Promise.all(a)}}).then(function(){return l.setSyncTime(a,o).catch(function(){})}).then(function(){return s});return this.addOngoingSync(a,u,o)},n.prototype.syncWiki=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getSubwikis(e).then(function(r){var l=[],s={warnings:[],updated:!1,subwikis:{},siteId:i};return r.forEach(function(e){l.push(o.syncSubwiki(e.id,e.wikiid,e.userid,e.groupid,i).then(function(n){n&&n.updated&&(s.warnings=s.warnings.concat(n.warnings),s.updated=!0,s.subwikis[e.id]={created:n.created,discarded:n.discarded})}))}),Promise.all(l).then(function(){var i=[];return s.updated&&(e&&(i.push(o.wikiProvider.invalidateSubwikis(e)),i.push(o.wikiProvider.invalidateSubwikiPages(e)),i.push(o.wikiProvider.invalidateSubwikiFiles(e))),n&&i.push(o.wikiProvider.invalidateWikiData(n)),t&&(i.push(o.groupsProvider.invalidateActivityAllowedGroups(t)),i.push(o.groupsProvider.invalidateActivityGroupMode(t)))),Promise.all(i).catch(function(){}).then(function(){return s})})})},n.AUTO_SYNCED="addon_mod_wiki_autom_synced",n.MANUAL_SYNCED="addon_mod_wiki_manual_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(150),l=(t(173),t(163),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p){var h=e.call(this,"AddonModWorkshopSyncProvider",r,l,t,s,a,n,u)||this;return h.eventsProvider=o,h.utils=c,h.workshopProvider=d,h.workshopHelper=f,h.workshopOffline=p,h.componentTranslate=i.translateModuleName("workshop"),h}return Object(i.__extends)(n,e),t=n,n.prototype.hasDataToSync=function(e,n){return this.workshopOffline.hasWorkshopOfflineData(e,n)},n.prototype.syncAllWorkshops=function(e){return this.syncOnSites("all workshops",this.syncAllWorkshopsFunc.bind(this),[],e)},n.prototype.syncAllWorkshopsFunc=function(e){var n=this;return this.workshopOffline.getAllWorkshops(e).then(function(i){var o=[];return i.forEach(function(i){o.push(n.syncWorkshopIfNeeded(i,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{workshopId:i,warnings:o.warnings},e)}))}),Promise.all(o)})},n.prototype.syncWorkshopIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(i){if(i)return t.syncWorkshop(e,n)})},n.prototype.syncWorkshop=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);if(this.syncProvider.isBlocked(r.a.COMPONENT,e,n))return this.logger.debug("Cannot sync workshop "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync workshop "+e);var i=[];i.push(this.workshopOffline.getSubmissions(e,n).catch(function(){return[]})),i.push(this.workshopOffline.getAssessments(e,n).catch(function(){return[]})),i.push(this.workshopOffline.getEvaluateSubmissions(e,n).catch(function(){return[]})),i.push(this.workshopOffline.getEvaluateAssessments(e,n).catch(function(){return[]}));var o={warnings:[],updated:!1},l=Promise.all(i).then(function(i){var r;for(var l in i)if(i[l].length>0&&i[l][0].courseid){r=i[l][0].courseid;break}if(r)return t.appProvider.isOnline()?t.workshopProvider.getWorkshopById(r,e,n).then(function(e){var r=i[1],l=i[2],s=i[3],a=[],u={};return i[0].forEach(function(e){void 0===u[e.submissionid]&&(u[e.submissionid]=[]),u[e.submissionid].push(e)}),Object.keys(u).forEach(function(i){a.push(t.syncSubmission(e,u[i],o,n).then(function(){o.updated=!0}))}),r.forEach(function(i){a.push(t.syncAssessment(e,i,o,n).then(function(){o.updated=!0}))}),l.forEach(function(i){a.push(t.syncEvaluateSubmission(e,i,o,n).then(function(){o.updated=!0}))}),s.forEach(function(i){a.push(t.syncEvaluateAssessment(e,i,o,n).then(function(){o.updated=!0}))}),Promise.all(a)}).then(function(){if(o.updated)return t.workshopProvider.invalidateContentById(e,r,n).catch(function(){})}):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n).catch(function(){})}).then(function(){return o});return this.addOngoingSync(e,l,n)},n.prototype.syncSubmission=function(e,n,t,i){var o,l=this,s=!1,a=null,u=(n=n.sort(function(e,n){return e.timemodified-n.timemodified}))[0].submissionid;return u>0?(s=!0,a=this.workshopProvider.getSubmission(e.id,u,i).then(function(e){return e.timemodified}).catch(function(){return-1})):a=Promise.resolve(0),a.then(function(a){if(a<0||a>=n[0].timemodified)return t.updated=!0,o=l.translate.instant("addon.mod_workshop.warningsubmissionmodified"),l.workshopOffline.deleteAllSubmissionActions(e.id,u,i);var c=Promise.resolve();return n.forEach(function(n){c=c.then(function(){u=n.submissionid>0?n.submissionid:u;return(n.attachmentsid?l.workshopHelper.getSubmissionFilesFromOfflineFilesObject(n.attachmentsid,e.id,u,s,i).then(function(n){return l.workshopHelper.uploadOrStoreSubmissionFiles(e.id,u,n,s,!1,i)}):l.workshopHelper.uploadOrStoreSubmissionFiles(e.id,u,[],s,!1,i)).then(function(t){switch(e.submissiontypefile==r.a.SUBMISSION_TYPE_DISABLED&&(t=null),n.action){case"add":return l.workshopProvider.addSubmissionOnline(e.id,n.title,n.content,t,i).then(function(e){u=e});case"update":return l.workshopProvider.updateSubmissionOnline(u,n.title,n.content,t,i);case"delete":return l.workshopProvider.deleteSubmissionOnline(u,i);default:return Promise.resolve()}}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);o=l.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,l.workshopOffline.deleteSubmissionAction(n.workshopid,n.submissionid,n.action,i)})})}),c.then(function(){if(o){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:o});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})})},n.prototype.syncAssessment=function(e,n,t,i){var o,r=this,l=n.assessmentid;return this.workshopProvider.getAssessment(e.id,l,i).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){if(s<0||s>=n.timemodified)return t.updated=!0,o=r.translate.instant("addon.mod_workshop.warningassessmentmodified"),r.workshopOffline.deleteAssessment(e.id,l,i);var a=n.inputdata;return(a.feedbackauthorattachmentsid?r.workshopHelper.getAssessmentFilesFromOfflineFilesObject(a.feedbackauthorattachmentsid,e.id,l,i).then(function(n){return r.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,n,!1,i)}):r.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,[],!1,i)).then(function(e){return a.feedbackauthorattachmentsid=e||0,r.workshopProvider.updateAssessmentOnline(l,a,i)}).catch(function(e){if(!e||!r.utils.isWebServiceError(e))return Promise.reject(e);o=r.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,r.workshopOffline.deleteAssessment(e.id,l,i)})}).then(function(){if(o){var n=r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:e.name,error:o});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},n.prototype.syncEvaluateSubmission=function(e,n,t,i){var o,r=this,l=n.submissionid;return this.workshopProvider.getSubmission(e.id,l,i).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){return s<0||s>=n.timemodified?(t.updated=!0,o=r.translate.instant("addon.mod_workshop.warningsubmissionmodified"),r.workshopOffline.deleteEvaluateSubmission(e.id,l,i)):r.workshopProvider.evaluateSubmissionOnline(l,n.feedbacktext,n.published,n.gradeover,i).catch(function(e){if(!e||!r.utils.isWebServiceError(e))return Promise.reject(e);o=r.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,r.workshopOffline.deleteEvaluateSubmission(e.id,l,i)})}).then(function(){if(o){var n=r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:e.name,error:o});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},n.prototype.syncEvaluateAssessment=function(e,n,t,i){var o,r=this,l=n.assessmentid;return this.workshopProvider.getAssessment(e.id,l,i).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){return s<0||s>=n.timemodified?(t.updated=!0,o=r.translate.instant("addon.mod_workshop.warningassessmentmodified"),r.workshopOffline.deleteEvaluateAssessment(e.id,l,i)):r.workshopProvider.evaluateAssessmentOnline(l,n.feedbacktext,n.weight,n.gradinggradeover,i).catch(function(e){if(!e||!r.utils.isWebServiceError(e))return Promise.reject(e);o=r.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,r.workshopOffline.deleteEvaluateAssessment(e.id,l,i)})}).then(function(){if(o){var n=r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:e.name,error:o});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},n.AUTO_SYNCED="addon_mod_workshop_autom_synced",n.MANUAL_SYNCED="addon_mod_workshop_manual_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.content=n,this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.content&&(this.content.getNativeElement().classList.add("has-fab"),this.content.getFixedElement().appendChild(this.element))},e.prototype.ngOnDestroy=function(){this.content&&this.content.getNativeElement().classList.remove("has-fab")},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(102),r=t(13),l=function(e){function n(n,t,i,o){var l=e.call(this,"CoreSettingsDelegate",n,t,i)||this;return l.loggerProvider=n,l.sitesProvider=t,l.eventsProvider=i,l.utils=o,l.siteHandlers=[],i.on(r.a.LOGOUT,l.clearSiteHandlers.bind(l)),l}return Object(i.__extends)(n,e),n.prototype.clearSiteHandlers=function(){this.siteHandlers=[]},n.prototype.getHandlers=function(){return this.siteHandlers},n.prototype.updateData=function(){var e=[];for(var n in this.enabledHandlers){var t=this.enabledHandlers[n],i=t.getDisplayData();e.push({data:i,priority:t.priority})}e.sort(function(e,n){return n.priority-e.priority}),this.siteHandlers=e.map(function(e){return e.data})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(126),r=(t(208),t(96)),l=(t(251),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p){var h=e.call(this,"AddonModDataSyncProvider",t,n,i,c,d,s,f)||this;return h.sitesProvider=n,h.loggerProvider=t,h.appProvider=i,h.dataOffline=o,h.eventsProvider=r,h.dataProvider=l,h.translate=s,h.utils=a,h.textUtils=d,h.dataHelper=p,h.componentTranslate=u.translateModuleName("data"),h}return Object(i.__extends)(n,e),t=n,n.prototype.hasDataToSync=function(e,n){return this.dataOffline.hasOfflineData(e,n)},n.prototype.syncAllDatabases=function(e){return this.syncOnSites("all databases",this.syncAllDatabasesFunc.bind(this),void 0,e)},n.prototype.syncAllDatabasesFunc=function(e){var n=this;return this.dataOffline.getAllEntries(e).then(function(i){var o={};return i.forEach(function(i){void 0===o[i.dataid]&&(o[i.dataid]=n.syncDatabaseIfNeeded(i.dataid,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{dataId:i.dataid,warnings:o.warnings},e)}))}),Promise.all(n.utils.objectToArray(o))})},n.prototype.syncDatabaseIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(i){if(i)return t.syncDatabase(e,n)})},n.prototype.syncDatabase=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);if(this.syncProvider.isBlocked(r.a.COMPONENT,e,n))return this.logger.debug("Cannot sync database '"+e+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync data '"+e+"' in site "+n+"'");var i,o,l={warnings:[],updated:!1},s=this.dataOffline.getDatabaseEntries(e,n).catch(function(){return[]}).then(function(r){if(r.length)return t.appProvider.isOnline()?(i=r[0].courseid,t.dataProvider.getDatabaseById(i,e,n).then(function(e){o=e;var i={};r.forEach(function(e){void 0===i[e.entryid]&&(i[e.entryid]=[]),i[e.entryid].push(e)});var s=t.utils.objectToArray(i).map(function(e){return t.syncEntry(o,e,l,n)});return Promise.all(s)}).then(function(){if(l.updated)return t.dataProvider.invalidateContent(o.cmid,i,n).catch(function(){})})):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n)}).then(function(){return l});return this.addOngoingSync(e,s,n)},n.prototype.syncEntry=function(e,n,i,o){var r,l,s,a=this,u=0,c=!1,d=[];return n=n.sort(function(e,n){return e.timemodified-n.timemodified}),(u=n[0].entryid)>0?l=this.dataProvider.getEntry(e.id,u,o).then(function(e){return e.entry.timemodified}).catch(function(){return-1}):(s=u,l=Promise.resolve(0)),l.then(function(t){return t<0||t>=n[0].timemodified?(i.updated=!0,r=a.translate.instant("addon.mod_data.warningsubmissionmodified"),a.dataOffline.deleteAllEntryActions(e.id,u,o)):(n.forEach(function(n){var t,l=[];u=n.entryid>0?n.entryid:u,n.fields&&n.fields.forEach(function(e){var t=a.textUtils.parseJSON(e.value);if(t.online||t.offline){var i=t.online||[],r=t.offline?a.dataHelper.getStoredFiles(n.dataid,u,e.fieldid):Promise.resolve([]);l.push(r.then(function(t){return i=i.concat(t),a.dataHelper.uploadOrStoreFiles(n.dataid,0,u,e.fieldid,i,!1,o).then(function(n){e.value=JSON.stringify(n)})}))}}),t=Promise.all(l).then(function(){switch(n.action){case"add":return a.dataProvider.addEntryOnline(n.dataid,n.fields,e.groupid,o).then(function(e){u=e.newentryid});case"edit":return a.dataProvider.editEntryOnline(u,n.fields,o);case"approve":return a.dataProvider.approveEntryOnline(u,!0,o);case"disapprove":return a.dataProvider.approveEntryOnline(u,!1,o);case"delete":return a.dataProvider.deleteEntryOnline(u,o).then(function(){c=!0})}}),d.push(t.catch(function(e){if(!e||!e.wserror)return Promise.reject(e);r=a.textUtils.getErrorMessageFromError(e)}).then(function(){return i.updated=!0,a.dataOffline.deleteEntry(n.dataid,n.entryid,n.action,o)}))}),Promise.all(d))}).then(function(){if(r){var n=a.translate.instant("core.warningofflinedatadeleted",{component:a.componentTranslate,name:e.name,error:r});-1==i.warnings.indexOf(n)&&i.warnings.push(n)}a.eventsProvider.trigger(t.AUTO_SYNCED,{dataId:e.id,entryId:u,offlineEntryId:s,warnings:i.warnings,deleted:c},o)})},n.AUTO_SYNCED="addon_mod_data_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t,i){this.sitesProvider=n,this.courseProvider=t,this.utils=i,this.ROOT_CACHE_KEY="mmaModFolder:",this.logger=e.getInstance("AddonModFolderProvider")}return e.prototype.getFolder=function(e,n,t){return this.getFolderByKey(e,"coursemodule",n,t)},e.prototype.getFolderByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getFolderCacheKey(e)};return i.read("mod_folder_get_folders_by_courses",r,l).then(function(e){if(e&&e.folders){var i=e.folders.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getFolderCacheKey=function(e){return this.ROOT_CACHE_KEY+"folder:"+e},e.prototype.invalidateContent=function(e,n,t){var i=[];return i.push(this.invalidateFolderData(n,t)),i.push(this.courseProvider.invalidateModule(e,t)),this.utils.allPromises(i)},e.prototype.invalidateFolderData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFolderCacheKey(e))})},e.prototype.isGetFolderWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_folder_get_folders_by_courses")},e.prototype.logView=function(e){var n={folderid:e};return this.sitesProvider.getCurrentSite().write("mod_folder_view_folder",n)},e.COMPONENT="mmaModFolder",e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(192),l=(t(465),t(230),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p,h){var m=e.call(this,"AddonModGlossarySyncProvider",r,l,t,s,a,n,u)||this;return m.eventsProvider=o,m.uploaderProvider=c,m.utils=d,m.glossaryProvider=f,m.glossaryHelper=p,m.glossaryOffline=h,m.componentTranslate=i.translateModuleName("glossary"),m}return Object(i.__extends)(n,e),t=n,n.prototype.syncAllGlossaries=function(e){return this.syncOnSites("all glossaries",this.syncAllGlossariesFunc.bind(this),[],e)},n.prototype.syncAllGlossariesFunc=function(e){var n=this;return this.glossaryOffline.getAllNewEntries(e).then(function(i){var o={},r=function(r){var l=i[r];if(void 0!==o[l.glossaryid])return"continue";o[l.glossaryid]=n.syncGlossaryEntriesIfNeeded(l.glossaryid,l.userid,e).then(function(i){i&&i.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{glossaryId:l.glossaryid,userId:l.userid,warnings:i.warnings},e)})};for(var l in i)r(l);return Promise.all(n.utils.objectToArray(o))})},n.prototype.syncGlossaryEntriesIfNeeded=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getGlossarySyncId(e,n);return this.isSyncNeeded(o,t).then(function(o){if(o)return i.syncGlossaryEntries(e,n,t)})},n.prototype.syncGlossaryEntries=function(e,n,t){var i=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var o=this.getGlossarySyncId(e,n);if(this.isSyncing(o,t))return this.getOngoingSync(o,t);if(this.syncProvider.isBlocked(r.a.COMPONENT,o,t))return this.logger.debug("Cannot sync glossary "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync glossary "+e+" for user "+n);var l,s={warnings:[],updated:!1},a=this.glossaryOffline.getGlossaryNewEntries(e,t,n).catch(function(){return[]}).then(function(n){if(n.length){if(!i.appProvider.isOnline())return Promise.reject(null);var o=[];return n.forEach(function(n){var r;l=n.courseid,r=i.uploadAttachments(e,n,t).then(function(o){return i.glossaryProvider.addEntryOnline(e,n.concept,n.definition,n.options,o,t)}),o.push(r.then(function(){return s.updated=!0,i.deleteAddEntry(e,n.concept,n.timecreated,t)}).catch(function(o){return i.utils.isWebServiceError(o)?(s.updated=!0,i.deleteAddEntry(e,n.concept,n.timecreated,t).then(function(){s.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:n.concept,error:i.textUtils.getErrorMessageFromError(o)}))})):Promise.reject(o)}))}),Promise.all(o)}}).then(function(){if(s.updated&&l)return i.glossaryProvider.getGlossaryById(l,e).then(function(e){return i.glossaryProvider.invalidateGlossaryEntries(e,!0)}).catch(function(){})}).then(function(){return i.setSyncTime(o,t).catch(function(){})}).then(function(){return s});return this.addOngoingSync(o,a,t)},n.prototype.deleteAddEntry=function(e,n,t,i){var o=[];return o.push(this.glossaryOffline.deleteNewEntry(e,n,t,i)),o.push(this.glossaryHelper.deleteStoredFiles(e,n,t,i).catch(function(){})),Promise.all(o)},n.prototype.uploadAttachments=function(e,n,t){var i=this;if(n.attachments){var o=n.attachments.online||[];return(n.attachments.offline?this.glossaryHelper.getStoredFiles(e,n.concept,n.timecreated,t).then(function(e){o=o.concat(e)}).catch(function(){}):Promise.resolve(0)).then(function(){return i.uploaderProvider.uploadOrReuploadFiles(o,r.a.COMPONENT,e,t)})}return Promise.resolve(0)},n.prototype.getGlossarySyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"glossary#"+e+"#"+n},n.AUTO_SYNCED="addon_mod_glossary_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(9),t(4),t(140)),r=t(143),l=function(e){function n(n,t,i,o,l,s,a,u,c,d){var f=e.call(this,n,t,i,o,l,s,a)||this;return f.modalCtrl=u,f.groupsProvider=c,f.lessonProvider=d,f.name="AddonModLesson",f.modName="lesson",f.component=r.a.COMPONENT,f.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^pages$|^answers$|^questionattempts$|^pagesviewed$/,f}return Object(i.__extends)(n,e),n.prototype.askUserPassword=function(e){var n=this,t=this.modalCtrl.create("AddonModLessonPasswordModalPage");return t.present(),new Promise(function(e,i){t.onDidDismiss(function(t){void 0!==t?e(t):i(n.domUtils.createCanceledError())})})},n.prototype.getDownloadSize=function(e,n,t){var i,o,r,l=this,s=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!1,s).then(function(e){return i=e,l.getLessonPassword(i.id,!1,!0,t,s)}).then(function(n){o=n.password;var t=(i=n.lesson||i).mediafiles||[];return t=t.concat(l.getIntroFilesFromInstance(e,i)),r=l.utils.sumFileSizes(t),l.lessonProvider.getPages(i.id,o,!1,!1,s)}).then(function(e){return e.forEach(function(e){r.size+=e.filessizetotal}),r})},n.prototype.getLessonPassword=function(e,n,t,i,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getAccessInformation(e,n,t,o).then(function(l){if(l.preventaccessreasons&&l.preventaccessreasons.length){return 1==l.preventaccessreasons.length&&r.lessonProvider.isPasswordProtected(l)?r.lessonProvider.getStoredPassword(e).catch(function(){}).then(function(i){return i?r.validatePassword(e,l,i,n,t,o):Promise.reject(null)}).catch(function(){return i?r.askUserPassword(l).then(function(i){return r.validatePassword(e,l,i,n,t,o)}):Promise.reject(l.preventaccessreasons[0].message)}):Promise.reject(l.preventaccessreasons[0].message)}return{accessInfo:l}})},n.prototype.invalidateContent=function(e,n){var t=[];return t.push(this.lessonProvider.invalidateLessonData(n)),t.push(this.courseProvider.invalidateModule(e)),t.push(this.groupsProvider.invalidateActivityAllowedGroups(e)),Promise.all(t)},n.prototype.invalidateModule=function(e,n){var t=this,i=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!1,i).then(function(e){var o=[];return o.push(t.lessonProvider.invalidateLessonData(n,i)),o.push(t.lessonProvider.invalidateAccessInformation(e.id,i)),Promise.all(o)})},n.prototype.isDownloadable=function(e,n){var t=this,i=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!1,i).then(function(e){return!!t.lessonProvider.isLessonOffline(e)&&t.lessonProvider.getAccessInformation(e.id,!1,!1,i).then(function(e){return!e.preventaccessreasons||!e.preventaccessreasons.length||1==e.preventaccessreasons.length&&t.lessonProvider.isPasswordProtected(e)})})},n.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchLesson.bind(this))},n.prototype.prefetchLesson=function(e,n,t,i){var o,l,s,a=this;return this.lessonProvider.getLesson(n,e.id,!1,i).then(function(e){return o=e,a.getLessonPassword(o.id,!1,!0,t,i)}).then(function(n){if(l=n.password,o=n.lesson||o,s=n.accessInfo,!a.lessonProvider.leftDuringTimed(s))return a.lessonProvider.launchRetake(o.id,l,void 0,!1,i).then(function(){var n=[];return n.push(a.filepoolProvider.updatePackageDownloadTime(i,a.component,e.id).catch(function(){})),n.push(a.lessonProvider.getAccessInformation(o.id,!1,!0,i).then(function(e){s=e})),Promise.all(n)})}).then(function(){var n=[],t=s.attemptscount,u=o.mediafiles||[];return u=u.concat(a.getIntroFilesFromInstance(e,o)),n.push(a.filepoolProvider.addFilesToQueue(i,u,a.component,e.id)),n.push(a.lessonProvider.getPages(o.id,l,!1,!0,i).then(function(n){var t=[],s=!1;return n.forEach(function(n){if(!s)for(var u=0;u<n.jumps.length;u++)if(n.jumps[u]==r.a.LESSON_RANDOMBRANCH){s=!0;break}t.push(a.lessonProvider.getPageData(o,n.page.id,l,!1,!0,!1,!0,void 0,void 0,i).then(function(n){var t=n.contentfiles||[];return n.answers.forEach(function(e){e.answerfiles&&e.answerfiles.length&&(t=t.concat(e.answerfiles)),e.responsefiles&&e.responsefiles.length&&(t=t.concat(e.responsefiles))}),a.filepoolProvider.addFilesToQueue(i,t,a.component,e.id)}))}),t.push(a.lessonProvider.getPagesPossibleJumps(o.id,!1,!0,i).catch(function(e){return s?Promise.reject(a.translate.instant("addon.mod_lesson.errorprefetchrandombranch")):Promise.reject(e)})),Promise.all(t)})),n.push(a.lessonProvider.getTimers(o.id,!1,!0,i).catch(function(){})),n.push(a.lessonProvider.getContentPagesViewedOnline(o.id,t,!1,!0,i)),n.push(a.lessonProvider.getQuestionsAttemptsOnline(o.id,t,!1,void 0,!1,!0,i)),s.canviewreports&&n.push(a.groupsProvider.getActivityAllowedGroupsIfEnabled(e.id,void 0,i).then(function(e){var n=[];return e.forEach(function(e){n.push(a.lessonProvider.getRetakesOverview(o.id,e.id,!1,!0,i))}),n.push(a.lessonProvider.getRetakesOverview(o.id,0,!1,!0,i).then(function(e){if(e&&e.students){var n=[];return e.students.forEach(function(e){if(e.attempts&&e.attempts.length){var t=e.attempts[e.attempts.length-1];t&&n.push(a.lessonProvider.getUserRetake(o.id,t.try,e.id,!1,!0,i))}}),Promise.all(n)}})),Promise.all(n)})),Promise.all(n)})},n.prototype.validatePassword=function(e,n,t,i,o,r){var l=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getLessonWithPassword(e,t,!0,i,o,r).then(function(e){return l.lessonProvider.storePassword(e.id,t,r).then(function(){return{password:t,lesson:e,accessInfo:n}})})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e,n,t,i,o,r,l){this.fileProvider=e,this.sitesProvider=n,this.textUtils=t,this.urlUtils=i,this.utils=o,this.translate=r,this.appProvider=l,this.ROOT_CACHE_KEY="mmaModLti:",this.LAUNCHER_FILE_NAME="lti_launcher.html"}return e.prototype.deleteLauncher=function(){return this.fileProvider.removeFile(this.LAUNCHER_FILE_NAME)},e.prototype.generateLauncher=function(e,n){var t=this;if(!this.fileProvider.isAvailable())return Promise.resolve(e);var i='<form action="'+e+'" name="ltiLaunchForm" method="post" encType="application/x-www-form-urlencoded">\n';return n.forEach(function(e){i+="ext_submit"==e.name?'    <input type="submit"':'    <input type="hidden" name="'+t.textUtils.escapeHTML(e.name)+'"',i+=' value="'+t.textUtils.escapeHTML(e.value)+'"/>\n'}),i+="</form>\n",i+='<script type="text/javascript"> \n    window.onload = function() { \n        document.ltiLaunchForm.submit(); \n    }; \n<\/script> \n',this.fileProvider.writeFile(this.LAUNCHER_FILE_NAME,i).then(function(e){return t.appProvider.isDesktop()?e.toInternalURL():e.toURL()})},e.prototype.getLti=function(e,n){var t={courseids:[e]},i={cacheKey:this.getLtiCacheKey(e)};return this.sitesProvider.getCurrentSite().read("mod_lti_get_ltis_by_courses",t,i).then(function(e){if(e.ltis){var t=e.ltis.find(function(e){return e.coursemodule==n});if(t)return t}return Promise.reject(null)})},e.prototype.getLtiCacheKey=function(e){return this.ROOT_CACHE_KEY+"lti:"+e},e.prototype.getLtiLaunchData=function(e){var n={toolid:e},t={getFromCache:!1,saveToCache:!0,emergencyCache:!0,cacheKey:this.getLtiLaunchDataCacheKey(e)};return this.sitesProvider.getCurrentSite().read("mod_lti_get_tool_launch_data",n,t).then(function(e){return e.endpoint?e:Promise.reject(null)})},e.prototype.getLtiLaunchDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"launch:"+e},e.prototype.invalidateLti=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiCacheKey(e))},e.prototype.invalidateLtiLaunchData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiLaunchDataCacheKey(e))},e.prototype.launch=function(e,n){var t=this;return this.urlUtils.isHttpURL(e)?this.generateLauncher(e,n).then(function(e){t.utils.openInApp(e)}):Promise.reject(this.translate.instant("addon.mod_lti.errorinvalidlaunchurl"))},e.prototype.logView=function(e){var n={ltiid:e};return this.sitesProvider.getCurrentSite().write("mod_lti_view_lti",n)},e.COMPONENT="mmaModLti",e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(210),o=function(){function e(e,n,t,i,o,r,l){this.domUtils=n,this.filepoolProvider=t,this.fileProvider=i,this.textUtils=o,this.http=r,this.sitesProvider=l,this.logger=e.getInstance("AddonModPageHelperProvider")}return e.prototype.getPageHtml=function(e,n){var t,o,r=this,l={};return e.forEach(function(e){var n=e.fileurl;if(r.isMainPage(e))t=n;else{var i=e.filename;"/"!==e.filepath&&(i=e.filepath.substr(1)+i),l[r.textUtils.decodeURIComponent(i)]=n}}),t?o=this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(this.sitesProvider.getCurrentSiteId(),t,!1,i.a.COMPONENT,n):Promise.resolve(this.sitesProvider.getCurrentSite().fixPluginfileURL(t)):(this.logger.debug("Could not locate the index page"),o=Promise.reject(null)),o.then(function(e){return r.http.get(e).toPromise().then(function(e){var n=e.text();return"string"!=typeof n?Promise.reject(null):r.domUtils.restoreSourcesInHtml(n,l)})})},e.prototype.isMainPage=function(e){var n=e.filename||"",t=e.fileurl||"",i="/mod_page/content/index.html",o=encodeURIComponent(i);return"index.html"===n&&(t.indexOf(i)>0||t.indexOf(o)>0)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=(t(4),t(140)),r=t(151),l=(t(279),t(128),t(231)),s=t(40),a=function(e){function n(n,t,i,o,l,s,a,u,c,d,f,p,h){var m=e.call(this,n,t,i,o,l,s,a)||this;return m.injector=u,m.quizProvider=c,m.textUtils=d,m.quizHelper=f,m.accessRuleDelegate=p,m.questionHelper=h,m.name="AddonModQuiz",m.modName="quiz",m.component=r.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^questions$|^attempts$/,m}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e,n,t){var i=this;return this.quizProvider.getQuiz(n,e.id).then(function(n){var t=i.getIntroFilesFromInstance(e,n);return i.quizProvider.getUserAttempts(n.id,"all",!0,!1,!0).then(function(e){return i.getAttemptsFeedbackFiles(n,e).then(function(e){return t.concat(e)})})}).catch(function(){return[]})},n.prototype.getAttemptsFeedbackFiles=function(e,n){var t=this,i=[],o=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2"),r=[];return n.forEach(function(n){if(t.quizProvider.isAttemptFinished(n.state)){var l=t.quizProvider.rescaleGrade(n.sumgrades,e,!1);void 0!==l&&i.push(t.quizProvider.getFeedbackForGrade(e.id,Number(l),!0).then(function(e){o&&e.feedbackinlinefiles&&e.feedbackinlinefiles.length?r=r.concat(e.feedbackinlinefiles):e.feedbacktext&&!o&&(r=r.concat(t.domUtils.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.feedbacktext)))}))}}),Promise.all(i).then(function(){return r})},n.prototype.getPreflightData=function(e,n,t,i,o,r){var l,s=this,a={};if(i)l=this.quizHelper.getAndCheckPreflightData(e,n,a,t,!1,!0,o,r);else{l=this.accessRuleDelegate.getFixedPreflightData(n.activerulenames,e,a,t,!0,r).then(function(){if(!t)return s.quizProvider.startAttempt(e.id,a,!1,r)})}return l.then(function(){return a})},n.prototype.invalidateContent=function(e,n){return this.quizProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.quizProvider.invalidateQuizData(n)),t.push(this.quizProvider.invalidateUserAttemptsForUser(e.instance)),Promise.all(t)},n.prototype.isDownloadable=function(e,n){var t=this;if(this.sitesProvider.getCurrentSite().isOfflineDisabled())return!1;var i=this.sitesProvider.getCurrentSiteId();return this.quizProvider.getQuiz(n,e.id,!1,i).then(function(e){return 1===e.allowofflineattempts&&0!==e.hasquestions&&t.quizProvider.getUserAttempts(e.id,void 0,!0,!1,!1,i).then(function(n){var i=!n.length||t.quizProvider.isAttemptFinished(n[n.length-1].state);return 0===e.attempts||e.attempts>n.length||!i})})},n.prototype.isEnabled=function(){return this.quizProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchQuiz.bind(this))},n.prototype.prefetchQuiz=function(e,n,t,i){var o,s,a,u,c,d=this,f=!1;return this.quizProvider.getQuiz(n,e.id,!1,i).then(function(n){var t=[],l=d.getIntroFilesFromInstance(e,s=n);return t.push(d.quizProvider.getQuizAccessInformation(s.id,!1,!0,i).then(function(e){a=e})),t.push(d.quizProvider.getQuizRequiredQtypes(s.id,!0,i)),t.push(d.quizProvider.getUserAttempts(s.id,"all",!0,!1,!0,i).then(function(n){return o=n,d.getAttemptsFeedbackFiles(s,o).then(function(n){return d.filepoolProvider.addFilesToQueue(i,n,r.a.COMPONENT,e.id)})})),t.push(d.quizProvider.getAttemptAccessInformation(s.id,0,!1,!0,i).then(function(e){u=e})),t.push(d.filepoolProvider.addFilesToQueue(i,l,r.a.COMPONENT,e.id)),Promise.all(t)}).then(function(){var e=o[o.length-1];if(!e||d.quizProvider.isAttemptFinished(e.state)){if(u.preventnewattemptreasons.length)return Promise.reject(d.textUtils.buildMessage(u.preventnewattemptreasons));f=!0,e=void 0}return d.getPreflightData(s,a,e,t,"core.download",i)}).then(function(t){c=t;var l=[];return f&&(l.push(d.quizProvider.getUserAttempts(s.id,"all",!0,!1,!0,i).then(function(n){return o=n,d.getAttemptsFeedbackFiles(s,o).then(function(n){return d.filepoolProvider.addFilesToQueue(i,n,r.a.COMPONENT,e.id)})})),l.push(d.filepoolProvider.updatePackageDownloadTime(i,r.a.COMPONENT,e.id).catch(function(){}))),l.push(d.quizProvider.getCombinedReviewOptions(s.id,!0,i)),l.push(d.quizProvider.getUserBestGrade(s.id,!0,i)),l.push(d.quizProvider.getGradeFromGradebook(n,e.id,!0,i).then(function(e){if(void 0!==e.graderaw)return d.quizProvider.getFeedbackForGrade(s.id,e.graderaw,!0,i)}).catch(function(){})),l.push(d.quizProvider.getAttemptAccessInformation(s.id,0,!1,!0,i)),Promise.all(l)}).then(function(){var e=[];return o.forEach(function(n){e.push(d.prefetchAttempt(s,n,c,i))}),Promise.all(e)}).then(function(){d.syncProvider||(d.syncProvider=d.injector.get(l.a)),d.syncProvider.hasDataToSync(s.id,i).then(function(e){e||d.syncProvider.setSyncTime(s.id,i)})})},n.prototype.prefetchAttempt=function(e,n,t,i){var o=this,l=this.quizProvider.getPagesFromLayout(n.layout),s=[],a=this.quizProvider.isNavigationSequential(e);if(this.quizProvider.isAttemptFinished(n.state)){var u=this.quizProvider.rescaleGrade(n.sumgrades,e,!1);void 0!==u&&s.push(this.quizProvider.getFeedbackForGrade(e.id,Number(u),!0,i)),l.forEach(function(e){s.push(o.quizProvider.getAttemptReview(n.id,e,!0,i).catch(function(){}))}),s.push(this.quizProvider.getAttemptReview(n.id,-1,!0,i).then(function(n){var t=[];return n.questions.forEach(function(n){t.push(o.questionHelper.prefetchQuestionFiles(n,o.component,e.coursemodule,i))}),Promise.all(t)},function(){}))}else s.push(this.quizProvider.getAttemptAccessInformation(e.id,n.id,!1,!0,i)),s.push(this.quizProvider.getAttemptSummary(n.id,t,!1,!0,!1,i)),n.state==r.a.ATTEMPT_IN_PROGRESS&&l.forEach(function(r){a&&r<n.currentpage||s.push(o.quizProvider.getAttemptData(n.id,r,t,!1,!0,i).then(function(n){var t=[];return n.questions.forEach(function(n){t.push(o.questionHelper.prefetchQuestionFiles(n,o.component,e.coursemodule,i))}),Promise.all(t)}))});return Promise.all(s)},n.prototype.prefetchQuizAndLastAttempt=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o,r,l,a,u=[];return u.push(this.quizProvider.getQuizAccessInformation(e.id,!1,!0,t).then(function(e){r=e})),u.push(this.quizProvider.getQuizRequiredQtypes(e.id,!0,t)),u.push(this.quizProvider.getCombinedReviewOptions(e.id,!0,t)),u.push(this.quizProvider.getUserBestGrade(e.id,!0,t)),u.push(this.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,t).then(function(e){o=e})),u.push(this.quizProvider.getGradeFromGradebook(e.course,e.coursemodule,!0,t).then(function(n){if(void 0!==n.graderaw)return i.quizProvider.getFeedbackForGrade(e.id,n.graderaw,!0,t)}).catch(function(){})),u.push(this.quizProvider.getAttemptAccessInformation(e.id,0,!1,!0,t)),Promise.all(u).then(function(){if(a=o[o.length-1])return i.getPreflightData(e,r,a,n,"core.download",t)}).then(function(n){if(l=n,a)return i.prefetchAttempt(e,a,l,t)}).then(function(){return i.filepoolProvider.getPackageStatus(t,i.component,e.coursemodule)}).then(function(n){if(n!==s.a.NOT_DOWNLOADED){var o=!a||i.quizProvider.isAttemptFinished(a.state);return i.filepoolProvider.storePackageStatus(t,o?s.a.NOT_DOWNLOADED:s.a.DOWNLOADED,i.component,e.coursemodule)}})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(193),l=function(e){function n(n,t,i,o,l,s,a,u,c,d){var f=e.call(this,n,t,i,o,l,s,a)||this;return f.fileProvider=u,f.textUtils=c,f.scormProvider=d,f.name="AddonModScorm",f.modName="scorm",f.component=r.a.COMPONENT,f.updatesNames=/^configuration$|^.*files$|^tracks$/,f}return Object(i.__extends)(n,e),n.prototype.download=function(e,n,t,i){var o=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,n,!0,this.downloadOrPrefetchScorm.bind(this),o,!1,i)},n.prototype.downloadOrPrefetchScorm=function(e,n,t,i,o,r){var l,s=this;return this.scormProvider.getScorm(n,e.id,e.url,!1,i).then(function(n){var t=[],a=s.getIntroFilesFromInstance(e,l=n);return t.push(s.fetchWSData(l,i).catch(function(){})),t.push(s.downloadOrPrefetchMainFileIfNeeded(l,o,r,i)),t.push(s.filepoolProvider.downloadOrPrefetchFiles(i,a,o,!1,s.component,e.id).catch(function(){})),Promise.all(t)}).then(function(){return l.sha1hash})},n.prototype.downloadOrPrefetchMainFile=function(e,n,t,i){var o,r=this,l=this.scormProvider.getPackageUrl(e);return this.scormProvider.getScormFolder(e.moduleurl).then(function(s){return o=s,t&&t({message:"core.downloading"}),n?r.filepoolProvider.addToQueueByUrl(i,l,r.component,e.coursemodule,void 0,void 0,r.downloadProgress.bind(r,!0,t)):r.filepoolProvider.downloadUrl(i,l,!0,r.component,e.coursemodule,void 0,r.downloadProgress.bind(r,!0,t))}).then(function(){return r.fileProvider.removeDir(o).catch(function(){})}).then(function(){return r.filepoolProvider.getFilePathByUrl(i,l)}).then(function(e){return t&&t({message:"core.unzipping"}),r.fileProvider.unzipFile(e,o,r.downloadProgress.bind(r,!1,t)).then(function(){return r.filepoolProvider.removeFileByUrl(i,l).catch(function(){})})})},n.prototype.downloadOrPrefetchMainFileIfNeeded=function(e,n,t,i){var o=this;i=i||this.sitesProvider.getCurrentSiteId();var r=this.scormProvider.isScormUnsupported(e);return r?Promise.reject(this.translate.instant(r)):this.scormProvider.shouldDownloadMainFile(e,void 0,i).then(function(r){if(r)return o.downloadOrPrefetchMainFile(e,n,t,i)})},n.prototype.downloadProgress=function(e,n,t){n&&t&&t.loaded&&n({downloading:e,progress:t})},n.prototype.fetchWSData=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.scormProvider.getAttemptCountOnline(e.id,void 0,!0,n).catch(function(){return 0}).then(function(i){if(i>0){for(var o=[],r=function(r){o.push(t.scormProvider.getScormUserDataOnline(e.id,r,!0,n).catch(function(e){if(r==i)return Promise.reject(e)}))},l=1;l<=i;l++)r(l);return Promise.all(o)}return t.scormProvider.getScormUserDataOnline(e.id,0,!0,n)})),i.push(this.scormProvider.getScos(e.id,void 0,!0,n)),Promise.all(i)},n.prototype.getDownloadSize=function(e,n,t){var i=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return i.scormProvider.isScormUnsupported(e)?{size:-1,total:!1}:e.packagesize?{size:e.packagesize,total:!0}:i.scormProvider.calculateScormSize(e).then(function(e){return{size:e,total:!0}})})},n.prototype.getDownloadedSize=function(e,n){var t=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return t.scormProvider.getScormFolder(e.moduleurl)}).then(function(e){return t.fileProvider.getDirectorySize(e)})},n.prototype.getFiles=function(e,n,t){var i=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return i.scormProvider.getScormFileList(e)}).catch(function(){return[]})},n.prototype.invalidateContent=function(e,n){return this.scormProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){return this.scormProvider.invalidateScormData(n)},n.prototype.isDownloadable=function(e,n){var t=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return!e.warningMessage&&!t.scormProvider.isScormUnsupported(e)})},n.prototype.prefetch=function(e,n,t,i,o){var r=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,n,t,this.downloadOrPrefetchScorm.bind(this),r,!0,o)},n.prototype.removeFiles=function(e,n){var t,i=this,o=this.sitesProvider.getCurrentSiteId();return this.scormProvider.getScorm(n,e.id,e.url,!1,o).then(function(e){return t=e,i.scormProvider.getScormFolder(t.moduleurl)}).then(function(e){var n=[];return n.push(i.fileProvider.removeDir(e).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),n.push(i.filepoolProvider.removeFileByUrl(o,i.scormProvider.getPackageUrl(t)).catch(function(){})),Promise.all(n)})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e){this.translate=e}return e.prototype.commaStringToArray=function(e){return"string"==typeof e?e.length>0?e.split(","):[]:e},e.prototype.getParentQuestions=function(e){var n={};return e.forEach(function(e){0===e.parent&&(n[e.id]=e)}),n},e.prototype.formatQuestions=function(e){var n=this,t=this.translate.instant("addon.mod_survey.ipreferthat"),i=this.translate.instant("addon.mod_survey.ifoundthat"),o=this.translate.instant("core.choose"),r=[],l=this.getParentQuestions(e),s=1;return e.forEach(function(e){var a=Object.assign({},e),u=l[a.parent];if(a.multi=n.commaStringToArray(a.multi),a.options=n.commaStringToArray(a.options),u){if(a.required=!0,1!==u.type&&2!==u.type){var c=Object.assign({},a);return a.text=t+" "+a.text,a.name="qP"+a.id,a.num=s++,r.push(a),c.text=i+" "+c.text,c.name="q"+a.id,c.num=s++,void r.push(c)}a.name="q"+(2==u.type?"P":"")+a.id,a.num=s++}else a.multi&&0===a.multi.length&&(a.name="q"+a.id,a.num=s++,a.type>0&&a.options.unshift(o));r.push(a)}),r},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(126),r=(t(265),t(264),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,"AddonModSurveySyncProvider",n,t,i,o,r,l,f)||this;return p.surveyOffline=a,p.eventsProvider=u,p.surveyProvider=c,p.utils=d,p.componentTranslate=s.translateModuleName("survey"),p}return Object(i.__extends)(n,e),t=n,n.prototype.getSyncId=function(e,n){return e+"#"+n},n.prototype.syncAllSurveys=function(e){return this.syncOnSites("all surveys",this.syncAllSurveysFunc.bind(this),void 0,e)},n.prototype.syncAllSurveysFunc=function(e){var n=this;return this.surveyOffline.getAllData(e).then(function(i){var o=i.map(function(i){return n.syncSurveyIfNeeded(i.surveyid,i.userid,e).then(function(o){o&&o.answersSent&&n.eventsProvider.trigger(t.AUTO_SYNCED,{surveyId:i.surveyid,userId:i.userid,warnings:o.warnings},e)})});return Promise.all(o)})},n.prototype.syncSurveyIfNeeded=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getSyncId(e,n);return this.isSyncNeeded(o,t).then(function(o){if(o)return i.syncSurvey(e,n,t)})},n.prototype.syncSurvey=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getSyncId(e,n);if(this.isSyncing(o,t))return this.getOngoingSync(o,t);this.logger.debug("Try to sync survey '"+e+"' for user '"+n+"'");var r,l={warnings:[],answersSent:!1},s=this.surveyOffline.getSurveyData(e,t,n).catch(function(){return{}}).then(function(o){if(o.answers&&o.answers.length)return i.appProvider.isOnline()?(r=o.courseid,i.surveyProvider.submitAnswersOnline(e,o.answers,t).then(function(){return l.answersSent=!0,i.surveyOffline.deleteSurveyAnswers(e,t,n)}).catch(function(r){return i.utils.isWebServiceError(r)?(l.answersSent=!0,i.surveyOffline.deleteSurveyAnswers(e,t,n).then(function(){l.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:o.name,error:i.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)})):Promise.reject(null)}).then(function(){if(r)return i.surveyProvider.invalidateSurveyData(r,t).then(function(){return i.surveyProvider.getSurveyById(r,e,t)}).catch(function(){})}).then(function(){return i.setSyncTime(o,t)}).then(function(){return l});return this.addOngoingSync(o,s,t)},n.AUTO_SYNCED="addon_mod_survey_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(40),o=function(){function e(e,n,t,i,o){this.sitesProvider=n,this.courseProvider=t,this.utils=i,this.mimeUtils=o,this.ROOT_CACHE_KEY="mmaModUrl:",this.logger=e.getInstance("AddonModUrlProvider")}return e.prototype.getFinalDisplayType=function(e){if(!e)return-1;var n=this.mimeUtils.guessExtensionFromUrl(e.externalurl);if(e.display==i.a.RESOURCELIB_DISPLAY_EMBED&&"pdf"==n)return i.a.RESOURCELIB_DISPLAY_DOWNLOAD;if(e.display!=i.a.RESOURCELIB_DISPLAY_AUTO)return e.display;var t=this.sitesProvider.getCurrentSite();if(t&&t.containsUrl(e.externalurl)&&-1==e.externalurl.indexOf("file.php")&&-1!=e.externalurl.indexOf(".php"))return i.a.RESOURCELIB_DISPLAY_OPEN;var o=this.mimeUtils.getMimeType(n);return(-1!=e.externalurl.indexOf(".php")||"/"===e.externalurl.substr(-1)||-1!=e.externalurl.indexOf("//")&&2==e.externalurl.match(/\//g).length)&&(o="text/html"),-1!=["application/zip","application/x-tar","application/g-zip","application/pdf","text/html"].indexOf(o)?i.a.RESOURCELIB_DISPLAY_DOWNLOAD:this.mimeUtils.canBeEmbedded(n)?i.a.RESOURCELIB_DISPLAY_EMBED:i.a.RESOURCELIB_DISPLAY_OPEN},e.prototype.getUrlCacheKey=function(e){return this.ROOT_CACHE_KEY+"url:"+e},e.prototype.getUrlDataByKey=function(e,n,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={courseids:[e]},l={cacheKey:o.getUrlCacheKey(e)};return i.read("mod_url_get_urls_by_courses",r,l).then(function(e){if(e&&e.urls){var i=e.urls.find(function(e){return e[n]==t});if(i)return i}return Promise.reject(null)})})},e.prototype.getUrl=function(e,n,t){return this.getUrlDataByKey(e,"coursemodule",n,t)},e.prototype.guessIcon=function(e){var n=(e=e||"").match(/\//g),t=this.mimeUtils.getFileExtension(e);if(!n||n.length<3||"/"===e.substr(-1)||"php"==t)return"";var i=this.mimeUtils.getFileIcon(e);return i===this.mimeUtils.getFileIconForType("unknown")||i===this.mimeUtils.getFileIconForType("html")?"":i},e.prototype.invalidateContent=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.invalidateUrlData(n,t)),i.push(this.courseProvider.invalidateModule(e,t,"url")),this.utils.allPromises(i)},e.prototype.invalidateUrlData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUrlCacheKey(e))})},e.prototype.isGetUrlWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_url_get_urls_by_courses")},e.prototype.logView=function(e){var n={urlid:e};return this.sitesProvider.getCurrentSite().write("mod_url_view_url",n)},e.COMPONENT="mmaModUrl",e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t){this.sitesProvider=e,this.domUtils=n,this.contentLinksHelper=t}return e.prototype.open=function(e){var n=this,t=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(e).then(function(t){if(!t)return n.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)}).finally(function(){t.dismiss()})},e}()},,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.sitesProvider=e,this.tablesSchema=[{name:n.MANUAL_COMPLETION_TABLE,columns:[{name:"cmid",type:"INTEGER",primaryKey:!0},{name:"completed",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"coursename",type:"TEXT"},{name:"timecompleted",type:"INTEGER"}]}],this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteManualCompletion=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.MANUAL_COMPLETION_TABLE,{cmid:e})})},e.prototype.getAllManualCompletions=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.MANUAL_COMPLETION_TABLE)})},e.prototype.getCourseManualCompletions=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.MANUAL_COMPLETION_TABLE,{courseid:e})})},e.prototype.getManualCompletion=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.MANUAL_COMPLETION_TABLE,{cmid:e})})},e.prototype.markCompletedManually=function(e,t,i,o,r){return this.sitesProvider.getSite(r).then(function(r){var l={cmid:e,completed:t,courseid:i,coursename:o||"",timecompleted:Date.now()};return r.getDb().insertRecord(n.MANUAL_COMPLETION_TABLE,l)}).then(function(){return{status:!0,offline:!0}})},e.MANUAL_COMPLETION_TABLE="course_manual_completion",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n,t){this.utils=e,this.mimeUtils=n,this.modalCtrl=t,this.possibleAudioMimeTypes={"audio/webm":"weba","audio/ogg":"ogg"},this.possibleVideoMimeTypes={"video/webm;codecs=vp9":"webm","video/webm;codecs=vp8":"webm","video/ogg":"ogv"},this.win=window}return e.prototype.captureMedia=function(e,n){n=n||{};try{var t=this.utils.promiseDefer(),i={type:e},o=void 0,r=void 0;if("video"==e)o=this.getMimeTypeAndExtension(e,n.mimetypes),i.mimetype=o.mimetype,i.extension=o.extension;else if("audio"==e)o=this.getMimeTypeAndExtension(e,n.mimetypes),i.mimetype=o.mimetype,i.extension=o.extension;else if("image"==e){if(void 0!==n.sourceType&&1!=n.sourceType)return Promise.reject("This source type is not supported in desktop.");1==n.cameraDirection&&(i.facingMode="user"),1==n.encodingType?(i.mimetype="image/png",i.extension="png"):(i.mimetype="image/jpeg",i.extension="jpeg"),n.quality>=0&&n.quality<=100&&(i.quality=n.quality/100),0==n.destinationType&&(i.returnDataUrl=!0)}return n.duration&&(i.maxTime=1e3*n.duration),(r=this.modalCtrl.create("CoreEmulatorCaptureMediaPage",i)).present(),r.onDidDismiss(function(e,n){"success"==n?t.resolve(e):t.reject(e)}),t.promise}catch(e){return Promise.reject(e.toString())}},e.prototype.getMimeTypeAndExtension=function(e,n){var t={};if(n&&n.length)for(var i=0;i<n.length;i++){var o=n[i],r=o.match(new RegExp("^"+e+"/"));if(r&&r.length&&this.win.MediaRecorder.isTypeSupported(o)){t.mimetype=o;break}}return t.mimetype?t.extension=this.mimeUtils.getExtension(t.mimetype):"video"==e?(t.mimetype=this.videoMimeType,t.extension=this.possibleVideoMimeTypes[t.mimetype]):"audio"==e&&(t.mimetype=this.audioMimeType,t.extension=this.possibleAudioMimeTypes[t.mimetype]),t},e.prototype.initGetUserMedia=function(){var e=this,n=navigator;if(void 0===n.mediaDevices&&(n.mediaDevices={}),!n.mediaDevices.getUserMedia){if(n.getUserMedia=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,!n.getUserMedia)return!1;navigator.mediaDevices.getUserMedia=function(t){var i=e.utils.promiseDefer();return n.getUserMedia(t,i.resolve,i.reject),i.promise}}return!0},e.prototype.initMimeTypes=function(){for(var e in this.possibleVideoMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.videoMimeType=e;break}for(var e in this.possibleAudioMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.audioMimeType=e;break}},e.prototype.load=function(){return void 0!==this.win.MediaRecorder&&this.initGetUserMedia()&&this.initMimeTypes(),Promise.resolve()},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(126),r=(t(427),t(233),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,"AddonNotesSync",n,t,i,o,r,l,f)||this;return p.notesOffline=s,p.utils=a,p.eventsProvider=u,p.notesProvider=c,p.coursesProvider=d,p}return Object(i.__extends)(n,e),t=n,n.prototype.syncAllNotes=function(e){return this.syncOnSites("all notes",this.syncAllNotesFunc.bind(this),[],e)},n.prototype.syncAllNotesFunc=function(e){var n=this;return this.notesOffline.getAllNotes(e).then(function(i){var o=[];i.forEach(function(e){-1==o.indexOf(e.courseid)&&o.push(e.courseid)});var r=o.map(function(i){return n.syncNotesIfNeeded(i,e).then(function(o){void 0!==o&&n.eventsProvider.trigger(t.AUTO_SYNCED,{courseId:i,warnings:o},e)})});return Promise.all(r)})},n.prototype.syncNotesIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(i){if(i)return t.syncNotes(e,n)})},n.prototype.syncNotes=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);this.logger.debug("Try to sync notes for course "+e);var i=[],o=this.notesOffline.getNotesForCourse(e,n).then(function(o){if(o.length){if(!t.appProvider.isOnline())return Promise.reject(t.translate.instant("core.networkerrormsg"));var r=[],l=o.map(function(e){return{userid:e.userid,publishstate:e.publishstate,courseid:e.courseid,text:e.content,format:e.format}});return t.notesProvider.addNotesOnline(l,n).then(function(i){return i.forEach(function(e){-1===e.noteid&&-1==r.indexOf(e.errormessage)&&r.push(e.errormessage)}),t.notesProvider.invalidateNotes(e,n).then(function(){return t.notesProvider.getNotes(e,!1,!0,n)}).catch(function(){})}).catch(function(e){if(!t.utils.isWebServiceError(e))return Promise.reject(e);r.push(e)}).then(function(){var e=o.map(function(e){return t.notesOffline.deleteNote(e.userid,e.content,e.created,n)});return Promise.all(e)}).then(function(){if(r&&r.length)return t.coursesProvider.getUserCourse(e,!0,n).catch(function(){return{}}).then(function(n){r.forEach(function(o){i.push(t.translate.instant("addon.notes.warningnotenotsent",{course:n.fullname?n.fullname:e,error:o}))})})})}}).then(function(){return i});return this.addOngoingSync(e,o,n)},n.AUTO_SYNCED="addon_notes_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(641),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldTextHandler",this.type="text"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||""}]},e.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t){return e.call(this,n,"AddonQtypeMultichoiceComponent",t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initMultichoiceComponent()},n}(t(171).a)},,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(205),o=function(){function e(e,n,t){this.sitesProvider=e,this.userProvider=n,this.translate=t}return e.prototype.getProfile=function(e){return e&&e!=this.sitesProvider.getCurrentSiteUserId()?this.userProvider.getProfile(e,null,!0).then(function(e){return e.profileimageurl=e.profileimageurl||!0,e}):Promise.resolve(!1)},e.prototype.getCompetencyStatusName=function(e){var n;switch(e){case i.a.REVIEW_STATUS_IDLE:n="idle";break;case i.a.REVIEW_STATUS_IN_REVIEW:n="inreview";break;case i.a.REVIEW_STATUS_WAITING_FOR_REVIEW:n="waitingforreview";break;default:return String(e)}return this.translate.instant("addon.competency.usercompetencystatus_"+n)},e.prototype.getPlanStatusName=function(e){var n;switch(e){case i.a.STATUS_DRAFT:n="draft";break;case i.a.STATUS_ACTIVE:n="active";break;case i.a.STATUS_COMPLETE:n="complete";break;case i.a.STATUS_WAITING_FOR_REVIEW:n="waitingforreview";break;case i.a.STATUS_IN_REVIEW:n="inreview";break;default:return String(e)}return this.translate.instant("addon.competency.planstatus"+n)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(126)),r=t(72),l=(t(122),t(164),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p,h){var m=e.call(this,"AddonModAssignSyncProvider",n,t,i,o,r,l,h)||this;return m.courseProvider=s,m.eventsProvider=a,m.assignProvider=u,m.assignOfflineProvider=c,m.utils=d,m.submissionDelegate=f,m.gradesHelper=p,m.componentTranslate=s.translateModuleName("assign"),m}return Object(i.__extends)(n,e),t=n,n.prototype.getSelectedScaleId=function(e,n){var t=e.split(",");(t=t.map(function(e){return e.trim()})).unshift("");var i=e.indexOf(n)||0;return i<0?0:i},n.prototype.hasDataToSync=function(e,n){return this.assignOfflineProvider.hasAssignOfflineData(e,n)},n.prototype.syncAllAssignments=function(e){return this.syncOnSites("all assignments",this.syncAllAssignmentsFunc.bind(this),[],e)},n.prototype.syncAllAssignmentsFunc=function(e){var n=this;return this.assignOfflineProvider.getAllAssigns(e).then(function(i){var o=[];return i.forEach(function(i){o.push(n.syncAssignIfNeeded(i,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{assignId:i,warnings:o.warnings},e)}))}),Promise.all(o)})},n.prototype.syncAssignIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(i){if(i)return t.syncAssign(e,n)})},n.prototype.syncAssign=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var i,o,l,s=[],a={warnings:[],updated:!1};return this.isSyncing(e,n)?this.getOngoingSync(e,n):this.syncProvider.isBlocked(r.a.COMPONENT,e,n)?(this.logger.debug("Cannot sync assign "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync assign "+e+" in site "+n),s.push(this.assignOfflineProvider.getAssignSubmissions(e,n).catch(function(){return[]})),s.push(this.assignOfflineProvider.getAssignSubmissionsGrade(e,n).catch(function(){return[]})),l=Promise.all(s).then(function(r){var l=r[0],s=r[1];if(l.length||s.length)return t.appProvider.isOnline()?(o=l.length>0?l[0].courseid:s[0].courseid,t.assignProvider.getAssignmentById(o,e,n).then(function(e){i=e;var r=[];return l.forEach(function(e){r.push(t.syncSubmission(i,e,a.warnings,n).then(function(){a.updated=!0}))}),s.forEach(function(e){r.push(t.syncSubmissionGrade(i,e,a.warnings,o,n).then(function(){a.updated=!0}))}),Promise.all(r)}).then(function(){if(a.updated)return t.assignProvider.invalidateContent(i.cmid,o,n).catch(function(){})})):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n).catch(function(){})}).then(function(){return a}),this.addOngoingSync(e,l,n))},n.prototype.syncSubmission=function(e,n,t,i){var o,r,l=this,s=n.userid,a={};return this.assignProvider.getSubmissionStatus(e.id,s,!1,!0,!0,i).then(function(t){var u=[];if((r=l.assignProvider.getSubmissionObjectFromAttempt(e,t.lastattempt)).timemodified==n.onlinetimemodified)return r.plugins.forEach(function(t){u.push(l.submissionDelegate.preparePluginSyncData(e,r,t,n,a,i))}),Promise.all(u).then(function(){return(Object.keys(a).length?l.assignProvider.saveSubmissionOnline(e.id,a,i):Promise.resolve()).then(function(){if(e.submissiondrafts&&n.submitted)return l.assignProvider.submitForGradingOnline(e.id,n.submissionstatement,i)}).then(function(){l.assignProvider.getSubmissionStatus(e.id,s,!1,!0,!0,i)})}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);o=l.textUtils.getErrorMessageFromError(e)});o=l.translate.instant("addon.mod_assign.warningsubmissionmodified")}).then(function(){return l.assignOfflineProvider.deleteSubmission(e.id,s,i).then(function(){var t=[];return r.plugins.forEach(function(o){t.push(l.submissionDelegate.deletePluginOfflineData(e,r,o,n,i))}),Promise.all(t)})}).then(function(){if(o){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:o});-1==t.indexOf(n)&&t.push(n)}})},n.prototype.syncSubmissionGrade=function(e,n,t,i,o){var r,l=this,s=n.userid;return this.assignProvider.getSubmissionStatus(e.id,s,!1,!0,!0,o).then(function(t){if(!((t.feedback&&(t.feedback.gradeddate||t.feedback.grade.timemodified))>n.timemodified))return l.gradesHelper.getGradeModuleItems(i,e.cmid,s,void 0,o,!0).then(function(t){return l.courseProvider.getModuleBasicGradeInfo(e.cmid,o).then(function(e){t.forEach(function(t){t.gradedategraded>=n.timemodified&&(t.outcomeid||t.scaleid?t.outcomeid&&l.assignProvider.isOutcomesEditEnabled()&&e.outcomes&&e.outcomes.forEach(function(e,i){e.scale&&t.itemnumber==i&&(n.outcomes[t.itemnumber]=l.getSelectedScaleId(e.scale,e.selected))}):n.grade=e&&e.scale?l.getSelectedScaleId(e.scale,t.gradeformatted):parseFloat(t.gradeformatted)||null)})})}).then(function(){return l.assignProvider.submitGradingFormOnline(e.id,s,n.grade,n.attemptnumber,n.addattempt,n.workflowstate,n.applytoall,n.outcomes,n.plugindata,o).then(function(){l.assignProvider.getSubmissionStatus(e.id,s,!1,!0,!0,o)}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);r=l.textUtils.getErrorMessageFromError(e)})});r=l.translate.instant("addon.mod_assign.warningsubmissiongrademodified")}).then(function(){return l.assignOfflineProvider.deleteSubmissionGrade(e.id,s,o)}).then(function(){if(r){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:r});-1==t.indexOf(n)&&t.push(n)}})},n.AUTO_SYNCED="addon_mod_assign_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),function(){function e(e,n,t,i){this.domUtils=n,this.utils=t,this.navCtrl=i,this.coreAutoFocus=!0,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;if(this.navCtrl.isTransitioning())var n=this.navCtrl.viewDidEnter.subscribe(function(){e.autoFocus(),n.unsubscribe()});else this.autoFocus()},e.prototype.autoFocus=function(){var e=this;this.utils.isTrueOrOne(this.coreAutoFocus)&&setTimeout(function(){var n=e.element;"ION-INPUT"==e.element.tagName?n=e.element.querySelector("input")||n:"ION-TEXTAREA"==e.element.tagName&&(n=e.element.querySelector("textarea")||n),e.domUtils.focusElement(n)},200)},e=Object(i.__decorate)([Object(i.__param)(3,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(14),o=(t.n(i),function(){function e(e,n,t){this.translate=n,this.timeUtils=t,this.logger=e.getInstance("CoreDateDayOrTimePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return i(1e3*e).calendar(null,{sameDay:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimetime")),lastDay:this.translate.instant("core.dflastweekdate"),lastWeek:this.translate.instant("core.dflastweekdate"),sameElse:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedatefullshort"))})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(40),o=function(){function e(e,t,i,o,r,l,s,a){this.sitesProvider=t,this.groupsProvider=i,this.coursesProvider=o,this.timeUtils=r,this.localNotificationsProvider=l,this.configProvider=s,this.translate=a,this.ROOT_CACHE_KEY="mmaCalendar:",this.tablesSchema=[{name:n.EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"notificationtime",type:"INTEGER"},{name:"name",type:"TEXT",notNull:!0},{name:"description",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"eventtype",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timestart",type:"INTEGER"},{name:"timeduration",type:"INTEGER"},{name:"categoryid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"instance",type:"INTEGER"},{name:"modulename",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"repeatid",type:"INTEGER"},{name:"visible",type:"INTEGER"},{name:"uuid",type:"TEXT"},{name:"sequence",type:"INTEGER"},{name:"subscriptionid",type:"INTEGER"}]}],this.logger=e.getInstance("AddonCalendarProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.cleanExpiredEvents=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){return(t.localNotificationsProvider.isAvailable()?e.getDb().getRecordsSelect(n.EVENTS_TABLE,"timestart < ?",[t.timeUtils.timestamp()]).then(function(i){i.forEach(function(i){return t.localNotificationsProvider.cancel(i.id,n.COMPONENT,e.getId())})}).catch(function(){}):Promise.resolve()).then(function(){return e.getDb().deleteRecordsSelect(n.EVENTS_TABLE,"timestart < ?",[t.timeUtils.timestamp()])})})},e.prototype.getAllEventsFromLocalDb=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getAllRecords(n.EVENTS_TABLE)})},e.prototype.getDefaultNotificationTime=function(e){e=e||this.sitesProvider.getCurrentSiteId();return this.configProvider.get(n.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+e,n.DEFAULT_NOTIFICATION_TIME)},e.prototype.getEvent=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={cacheKey:t.getEventCacheKey(e)};return n.read("core_calendar_get_calendar_events",{options:{userevents:0,siteevents:0},events:{eventids:[e]}},i).then(function(n){return n.events.find(function(n){return n.id==e})||t.getEventFromLocalDb(e)}).catch(function(){return t.getEventFromLocalDb(e)})})},e.prototype.getEventById=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={cacheKey:t.getEventCacheKey(e)};return n.read("core_calendar_get_calendar_event_by_id",{eventid:e},i).then(function(e){return e.event})})},e.prototype.getEventCacheKey=function(e){return this.ROOT_CACHE_KEY+"events:"+e},e.prototype.getEventFromLocalDb=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.EVENTS_TABLE,{id:e})})},e.prototype.getEventNotificationTime=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getEventNotificationTimeOption(e,n).then(function(e){return-1==e?t.getDefaultNotificationTime(n):e})},e.prototype.getEventNotificationTimeOption=function(e,n){return this.getEventFromLocalDb(e,n).then(function(e){return e.notificationtime||-1}).catch(function(){return-1})},e.prototype.getEventsList=function(e,t,o){var r=this;return void 0===e&&(e=0),void 0===t&&(t=n.DAYS_INTERVAL),this.sitesProvider.getSite(o).then(function(n){o=n.getId();var l,s,a=[];return a.push(r.coursesProvider.getUserCourses(!1,o).then(function(e){(l=e).push({id:n.getSiteHomeId()})})),a.push(r.groupsProvider.getAllUserGroups(o).then(function(e){s=e})),Promise.all(a).then(function(){var a=r.timeUtils.timestamp()+i.a.SECONDS_DAY*e,u={options:{userevents:1,siteevents:1,timestart:a,timeend:a+i.a.SECONDS_DAY*t},events:{courseids:[],groupids:[]}};u.events.courseids=l.map(function(e){return e.id}),u.events.groupids=s.map(function(e){return e.id});var c={cacheKey:r.getEventsListCacheKey(e,t),getCacheUsingCacheKey:!0};return n.read("core_calendar_get_calendar_events",u,c).then(function(e){return r.storeEventsInLocalDB(e.events,o),e.events})})})},e.prototype.getEventsListPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"events:"},e.prototype.getEventsListCacheKey=function(e,n){return this.getEventsListPrefixCacheKey()+e+":"+n},e.prototype.invalidateEventsList=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){e=t.getId();var i=[];return i.push(n.coursesProvider.invalidateUserCourses(e)),i.push(n.groupsProvider.invalidateAllUserGroups(e)),i.push(t.invalidateWsCacheForKeyStartingWith(n.getEventsListPrefixCacheKey())),Promise.all(i)})},e.prototype.invalidateEvent=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getEventCacheKey(e))})},e.prototype.isCalendarDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonCalendar")},e.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isCalendarDisabledInSite(e)})},e.prototype.isGetEventByIdAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_calendar_get_calendar_event_by_id")},e.prototype.scheduleAllSitesEventsNotifications=function(){var e=this,n=this.localNotificationsProvider.isAvailable();return this.sitesProvider.getSitesIds().then(function(t){var i=[];return t.forEach(function(t){i.push(e.cleanExpiredEvents(t).then(function(){if(n)return e.isDisabled(t).then(function(n){if(!n)return e.getEventsList(void 0,void 0,t).then(function(n){return e.scheduleEventsNotifications(n,t)})})}))}),Promise.all(i)})},e.prototype.scheduleEventNotification=function(e,t,i){var o=this;if(this.localNotificationsProvider.isAvailable()){if(i=i||this.sitesProvider.getCurrentSiteId(),0===t)return this.localNotificationsProvider.cancel(e.id,n.COMPONENT,i);return(-1==t?this.getDefaultNotificationTime(i):Promise.resolve(t)).then(function(t){if(1e3*(e.timestart+e.timeduration)<=(new Date).getTime())return Promise.resolve();var r=new Date(1e3*(e.timestart-60*t)),l={id:e.id,title:e.name,text:o.timeUtils.userDate(1e3*e.timestart,"core.strftimedaydatetime",!0),at:r,channelParams:{channelID:"notifications",channelName:o.translate.instant("addon.notifications.notifications"),importance:4},data:{eventid:e.id,siteid:i}};return o.localNotificationsProvider.schedule(l,n.COMPONENT,i)})}return Promise.resolve()},e.prototype.scheduleEventsNotifications=function(e,n){var t=this,i=[];return this.localNotificationsProvider.isAvailable()&&(n=n||this.sitesProvider.getCurrentSiteId(),e.forEach(function(e){i.push(t.getEventNotificationTime(e.id,n).then(function(i){return t.scheduleEventNotification(e,i,n)}))})),Promise.all(i)},e.prototype.setDefaultNotificationTime=function(e,t){t=t||this.sitesProvider.getCurrentSiteId();return this.configProvider.set(n.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+t,e)},e.prototype.storeEventInLocalDb=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().insertRecord(n.EVENTS_TABLE,e)})},e.prototype.storeEventsInLocalDB=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(o){t=o.getId();var r=[],l=o.getDb();return e.forEach(function(e){r.push(i.getEventFromLocalDb(e.id,t).catch(function(){return{}}).then(function(t){return l.insertRecord(n.EVENTS_TABLE,{id:e.id,name:e.name,description:e.description,format:e.format,eventtype:e.eventtype,courseid:e.courseid,timestart:e.timestart,timeduration:e.timeduration,categoryid:e.categoryid,groupid:e.groupid,userid:e.userid,instance:e.instance,modulename:e.modulename,timemodified:e.timemodified,repeatid:e.repeatid,visible:e.visible,uuid:e.uuid,sequence:e.sequence,subscriptionid:e.subscriptionid,notificationtime:t.notificationtime||-1})}))}),Promise.all(r)})},e.prototype.updateNotificationTime=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){return o.sitesProvider.isLoggedIn()?i.getDb().updateRecords(n.EVENTS_TABLE,{notificationtime:t},{id:e.id}).then(function(){return o.scheduleEventNotification(e,t)}):Promise.reject(null)})},e.DAYS_INTERVAL=30,e.COMPONENT="AddonCalendarEvents",e.DEFAULT_NOTIFICATION_TIME_CHANGED="AddonCalendarDefaultNotificationTimeChangedEvent",e.DEFAULT_NOTIFICATION_TIME_SETTING="mmaCalendarDefaultNotifTime",e.DEFAULT_NOTIFICATION_TIME=60,e.EVENTS_TABLE="addon_calendar_events",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n,t,i){this.utils=n,this.domUtils=t,this.platform=i,this.selector="",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.shown=this.utils.isTrueOrOne(this.initialShown),this.selector='input[name="'+this.name+'"]',this.setData()},e.prototype.ngAfterViewInit=function(){this.searchInput()},e.prototype.searchInput=function(){this.input=this.element.querySelector(this.selector),this.input&&(this.input.type=this.shown?"text":"password",this.input.getAttribute("autocorrect")||this.input.setAttribute("autocorrect","off"),this.input.getAttribute("autocapitalize")||this.input.setAttribute("autocapitalize","none"))},e.prototype.setData=function(){this.label=this.shown?"core.hide":"core.show",this.iconName=this.shown?"eye-off":"eye",this.input&&(this.input.type=this.shown?"text":"password")},e.prototype.toggle=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=document.activeElement===this.input;this.shown=!this.shown,this.setData(),t&&this.platform.is("android")&&setTimeout(function(){n.domUtils.focusElement(n.input)},400)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=e,this.userProvider=n}return e.prototype.getChat=function(e,n,t){void 0===t&&(t=!1);var i={courseids:[e]},o={getFromCache:!t&&void 0};return this.sitesProvider.getCurrentSite().read("mod_chat_get_chats_by_courses",i,o).then(function(e){if(e.chats){var t=e.chats.find(function(e){return e.coursemodule==n});if(t)return t}return Promise.reject(null)})},e.prototype.loginUser=function(e){var n={chatid:e};return this.sitesProvider.getCurrentSite().write("mod_chat_login_user",n).then(function(e){return e.chatsid?e.chatsid:Promise.reject(null)})},e.prototype.logView=function(e){var n={chatid:e};return this.sitesProvider.getCurrentSite().write("mod_chat_view_chat",n)},e.prototype.sendMessage=function(e,n,t){var i={chatsid:e,messagetext:n,beepid:t};return this.sitesProvider.getCurrentSite().write("mod_chat_send_chat_message",i).then(function(e){return e.messageid?e.messageid:Promise.reject(null)})},e.prototype.getLatestMessages=function(e,n){var t={chatsid:e,chatlasttime:n};return this.sitesProvider.getCurrentSite().write("mod_chat_get_chat_latest_messages",t)},e.prototype.getMessagesUserData=function(e,n){var t=this,i=e.map(function(e){return t.userProvider.getProfile(e.userid,n,!0).then(function(n){e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl}).catch(function(){e.userfullname=e.userid})});return Promise.all(i).then(function(){return e})},e.prototype.getChatUsers=function(e){var n={chatsid:e};return this.sitesProvider.getCurrentSite().read("mod_chat_get_chat_users",n,{getFromCache:!1})},e.COMPONENT="mmaModChat",e.POLL_INTERVAL=4e3,e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4),t(536),t(411),t(451),t(228);var i=t(40),o=t(137),r=function(){function e(e,t,i,o,r,l,s,a,u,c,d,f,p,h){this.appProvider=t,this.initDelegate=i,this.pushNotificationsDelegate=o,this.sitesProvider=r,this.badge=l,this.localNotificationsProvider=s,this.utils=a,this.textUtils=u,this.push=c,this.configProvider=d,this.device=f,this.zone=p,this.translate=h,this.tablesSchema=[{name:n.BADGE_TABLE,columns:[{name:"siteid",type:"TEXT"},{name:"addon",type:"TEXT"},{name:"number",type:"INTEGER"}],primaryKeys:["siteid","addon"]}],this.logger=e.getInstance("AddonPushNotificationsProvider"),this.appDB=t.getDB(),this.appDB.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.cleanSiteCounters=function(e){var t=this;return this.appDB.deleteRecords(n.BADGE_TABLE,{siteid:e}).finally(function(){t.updateAppCounter()})},e.prototype.getOptions=function(){return this.configProvider.get(i.a.SETTINGS_NOTIFICATION_SOUND,!0).then(function(e){return{android:{senderID:o.a.gcmpn,sound:!!e},ios:{alert:"true",badge:!0,sound:!!e},windows:{sound:!!e}}})},e.prototype.getPushId=function(){return this.pushID},e.prototype.getSiteCounter=function(e){return this.getAddonBadge(e)},e.prototype.notificationClicked=function(e){var n=this;this.initDelegate.ready().then(function(){n.pushNotificationsDelegate.clicked(e)})},e.prototype.onMessageReceived=function(e){var t=this,i=e?e.additionalData:{};this.sitesProvider.getSite(i.site).then(function(){if(t.utils.isTrueOrOne(i.foreground)){if(t.localNotificationsProvider.isAvailable()){var o={id:1,at:new Date,channelParams:{channelID:"notifications",channelName:t.translate.instant("addon.notifications.notifications"),importance:4},data:{notif:i.notif,site:i.site},title:"",text:""},r=[];r.push(t.textUtils.formatText(e.title,!0,!0).then(function(e){o.title=e}).catch(function(){o.title=e.title})),r.push(t.textUtils.formatText(e.message,!0,!0).then(function(e){o.text=e}).catch(function(){o.text=e.message})),Promise.all(r).then(function(){t.localNotificationsProvider.schedule(o,n.COMPONENT,i.site)})}t.initDelegate.ready().then(function(){i.title=e.title,i.message=e.message,t.pushNotificationsDelegate.received(i)})}else i.title=e.title,i.message=e.message,t.notificationClicked(i)})},e.prototype.unregisterDeviceOnMoodle=function(e){if(!e||!this.appProvider.isMobile())return Promise.reject(null);this.logger.debug("Unregister device on Moodle: '"+e.id+"'");return e.write("core_user_remove_user_device",{appid:o.a.app_id,uuid:this.device.uuid}).then(function(e){if(!e||!e.removed)return Promise.reject(null)})},e.prototype.updateAddonCounter=function(e,n,t){var i=this;return this.pushNotificationsDelegate.isCounterHandlerRegistered(e)?(t=t||this.sitesProvider.getCurrentSiteId(),this.saveAddonBadge(n,t,e).then(function(){return i.updateSiteCounter(t).then(function(){return n})})):Promise.resolve(0)},e.prototype.updateAppCounter=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.getAddonBadge(n))}),Promise.all(t).then(function(n){var t=n.reduce(function(e,n){return e+parseInt(n,10)},0);return e.appProvider.isDesktop()||e.appProvider.isMobile()?e.badge.set(t).then(function(){return t}):t})})},e.prototype.updateSiteCounter=function(e){var n=this,t=this.pushNotificationsDelegate.getCounterHandlers(),i=[];for(var o in t)i.push(this.getAddonBadge(e,t[o]));return Promise.all(i).then(function(t){var i=!1,o=t.reduce(function(e,n){return n!=parseInt(n,10)&&(i=!0,n=parseInt(n,10)),e+n},0);return o=i&&o>0?o+"+":o,n.saveAddonBadge(o,e)}).then(function(e){return n.updateAppCounter().then(function(){return e})})},e.prototype.registerDevice=function(){var e=this;try{return this.getOptions().then(function(n){var t=e.push.init(n);t.on("notification").subscribe(function(n){e.zone.run(function(){e.logger.log("Received a notification",n),e.onMessageReceived(n)})}),t.on("registration").subscribe(function(n){e.zone.run(function(){e.pushID=n.registrationId,e.sitesProvider.isLoggedIn()&&e.registerDeviceOnMoodle().catch(function(n){e.logger.warn("Can't register device",n)})})}),t.on("error").subscribe(function(n){e.zone.run(function(){e.logger.warn("Error with Push plugin",n)})})})}catch(e){this.logger.warn(e)}return Promise.reject(null)},e.prototype.registerDeviceOnMoodle=function(){if(this.logger.debug("Register device on Moodle."),!this.sitesProvider.isLoggedIn()||!this.pushID||!this.appProvider.isMobile())return Promise.reject(null);var e={appid:o.a.app_id,name:this.device.manufacturer||"",model:this.device.model,platform:this.device.platform,version:this.device.version,pushid:this.pushID,uuid:this.device.uuid};return this.sitesProvider.getCurrentSite().write("core_user_add_user_device",e)},e.prototype.getAddonBadge=function(e,t){return void 0===t&&(t="site"),this.appDB.getRecord(n.BADGE_TABLE,{siteid:e,addon:t}).then(function(e){return e&&e.number||0}).catch(function(){return 0})},e.prototype.saveAddonBadge=function(e,t,i){void 0===i&&(i="site"),t=t||this.sitesProvider.getCurrentSiteId();return this.appDB.insertRecord(n.BADGE_TABLE,{siteid:t,addon:i,number:e}).then(function(){return e})},e.COMPONENT="AddonPushNotificationsProvider",e.BADGE_TABLE="addon_pushnotifications_badge",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i,o){this.sitesProvider=t,this.appProvider=i,this.textUtils=o,this.tablesSchema=[{name:n.MESSAGES_TABLE,columns:[{name:"touserid",type:"INTEGER"},{name:"useridfrom",type:"INTEGER"},{name:"smallmessage",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"}],primaryKeys:["touserid","smallmessage","timecreated"]},{name:n.CONVERSATION_MESSAGES_TABLE,columns:[{name:"conversationid",type:"INTEGER"},{name:"text",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"},{name:"conversation",type:"TEXT"}],primaryKeys:["conversationid","text","timecreated"]}],this.logger=e.getInstance("AddonMessagesOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteConversationMessage=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(n.CONVERSATION_MESSAGES_TABLE,{conversationid:e,text:t,timecreated:i})})},e.prototype.deleteConversationMessages=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.CONVERSATION_MESSAGES_TABLE,{conversationid:e})})},e.prototype.deleteMessage=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(n.MESSAGES_TABLE,{touserid:e,smallmessage:t,timecreated:i})})},e.prototype.getAllDeviceOfflineMessages=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var i=[];return i.push(e.getDb().getRecords(n.MESSAGES_TABLE,{deviceoffline:1})),i.push(e.getDb().getRecords(n.CONVERSATION_MESSAGES_TABLE,{deviceoffline:1})),Promise.all(i).then(function(e){return e[1]=t.parseConversationMessages(e[1]),e[0].concat(e[1])})})},e.prototype.getAllMessages=function(e){var t=this;return this.sitesProvider.getSite(e).then(function(e){var i=[];return i.push(e.getDb().getAllRecords(n.MESSAGES_TABLE)),i.push(e.getDb().getAllRecords(n.CONVERSATION_MESSAGES_TABLE)),Promise.all(i).then(function(e){return e[1]=t.parseConversationMessages(e[1]),e[0].concat(e[1])})})},e.prototype.getConversationMessages=function(e,t){var i=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.CONVERSATION_MESSAGES_TABLE,{conversationid:e}).then(function(e){return i.parseConversationMessages(e)})})},e.prototype.getMessages=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.MESSAGES_TABLE,{touserid:e})})},e.prototype.hasConversationMessages=function(e,n){return this.getConversationMessages(e,n).then(function(e){return!!e.length})},e.prototype.hasMessages=function(e,n){return this.getMessages(e,n).then(function(e){return!!e.length})},e.prototype.parseConversationMessages=function(e){var n=this;return e?(e.forEach(function(e){e.conversation&&(e.conversation=n.textUtils.parseJSON(e.conversation,{}))}),e):[]},e.prototype.saveConversationMessage=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={conversationid:e.id,text:t,timecreated:Date.now(),deviceoffline:o.appProvider.isOnline()?0:1,conversation:JSON.stringify({name:e.name||"",subname:e.subname||"",imageurl:e.imageurl||"",isfavourite:e.isfavourite?1:0,type:e.type})};return i.getDb().insertRecord(n.CONVERSATION_MESSAGES_TABLE,r).then(function(){return r})})},e.prototype.saveMessage=function(e,t,i){var o=this;return this.sitesProvider.getSite(i).then(function(i){var r={touserid:e,useridfrom:i.getUserId(),smallmessage:t,timecreated:(new Date).getTime(),deviceoffline:o.appProvider.isOnline()?0:1};return i.getDb().insertRecord(n.MESSAGES_TABLE,r).then(function(){return r})})},e.prototype.setMessagesDeviceOffline=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o=i.getDb(),r=[],l={deviceoffline:t?1:0};return e.forEach(function(e){r.push(e.conversationid?o.updateRecords(n.CONVERSATION_MESSAGES_TABLE,l,{conversationid:e.conversationid,text:e.text,timecreated:e.timecreated}):o.updateRecords(n.MESSAGES_TABLE,l,{touserid:e.touserid,smallmessage:e.smallmessage,timecreated:e.timecreated}))}),Promise.all(r)})},e.MESSAGES_TABLE="addon_messages_offline_messages",e.CONVERSATION_MESSAGES_TABLE="addon_messages_offline_conversation_messages",e;var n}()},function(e,n,t){"use strict";function i(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.fileName)})}function o(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.size)})}function r(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.timemodified)})}function l(e){return d._42(0,[(e()(),d._16(0,0,null,null,6,"ion-input",[["autocapitalize","none"],["autocorrect","off"],["name","filename"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"ngModelChange"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==t.stopPropagation()&&i}if("ngModelChange"===n){i=!1!==(o.newFileName=t)&&i}return i},f.b,f.a)),d._15(1,671744,null,0,p.q,[[2,p.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),d._35(2048,null,p.m,null,[p.q]),d._15(3,16384,null,0,p.n,[p.m],null,null),d._15(4,5423104,null,0,h.a,[m.a,_.a,g.a,v.a,d.p,d.K,[2,y.a],[2,b.a],[2,p.m],P.a],{type:[0,"type"],autocorrect:[1,"autocorrect"],placeholder:[2,"placeholder"]},null),d._32(131072,E.a,[C.a,d.i]),d._15(6,81920,null,0,I.a,[d.p,S.a,w.a,[2,A.a]],null,null)],function(e,n){e(n,1,0,"filename",n.component.newFileName);e(n,4,0,"text","off",d._41(n,4,2,d._29(n,5).transform("core.filename"))),e(n,6,0)},function(e,n){e(n,0,0,d._29(n,3).ngClassUntouched,d._29(n,3).ngClassTouched,d._29(n,3).ngClassPristine,d._29(n,3).ngClassDirty,d._29(n,3).ngClassValid,d._29(n,3).ngClassInvalid,d._29(n,3).ngClassPending)})}function s(e){return d._42(0,[(e()(),d._16(0,0,null,null,7,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.activateEdit(t)&&i}return i},T.b,T.a)),d._15(1,1097728,[[2,4]],0,O.a,[[8,""],m.a,d.p,d.K],{color:[0,"color"],clear:[1,"clear"]},null),d._15(2,81920,null,0,k.a,[d.p],null,{onClick:"onClick"}),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,0,["\n                "])),(e()(),d._16(5,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(6,147456,null,0,D.a,[m.a,d.p,d.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),d._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark",""),e(n,2,0);e(n,6,0,"create","md-create")},function(e,n){e(n,0,0,d._41(n,0,0,d._29(n,3).transform("core.edit")));e(n,5,0,d._29(n,6)._hidden)})}function a(e){return d._42(0,[(e()(),d._16(0,0,null,null,6,"button",[["clear",""],["color","success"],["icon-only",""],["ion-button",""],["type","submit"]],[[1,"aria-label",0]],null,null,T.b,T.a)),d._15(1,1097728,[[2,4]],0,O.a,[[8,""],m.a,d.p,d.K],{color:[0,"color"],clear:[1,"clear"]},null),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,0,["\n                "])),(e()(),d._16(4,0,null,0,1,"ion-icon",[["ios","md-checkmark"],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(5,147456,null,0,D.a,[m.a,d.p,d.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),d._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"success","");e(n,5,0,"checkmark","md-checkmark")},function(e,n){e(n,0,0,d._41(n,0,0,d._29(n,2).transform("core.save")));e(n,4,0,d._29(n,5)._hidden)})}function u(e){return d._42(0,[(e()(),d._16(0,0,null,null,15,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),d._40(-1,null,["\n            "])),(e()(),d._11(16777216,null,null,1,null,s)),d._15(3,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n            "])),(e()(),d._11(16777216,null,null,1,null,a)),d._15(6,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n            "])),(e()(),d._16(8,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.deleteFile(t)&&i}return i},T.b,T.a)),d._15(9,1097728,[[2,4]],0,O.a,[[8,""],m.a,d.p,d.K],{color:[0,"color"],clear:[1,"clear"]},null),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,0,["\n                "])),(e()(),d._16(12,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(13,147456,null,0,D.a,[m.a,d.p,d.K],{name:[0,"name"]},null),(e()(),d._40(-1,0,["\n            "])),(e()(),d._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,!t.editMode);e(n,6,0,t.editMode);e(n,9,0,"danger","");e(n,13,0,"trash")},function(e,n){e(n,8,0,d._41(n,8,0,d._29(n,10).transform("core.delete")));e(n,12,0,d._29(n,13)._hidden)})}function c(e){return d._42(0,[(e()(),d._16(0,0,null,null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;if("submit"===n){i=!1!==d._29(e,2).onSubmit(t)&&i}if("reset"===n){i=!1!==d._29(e,2).onReset()&&i}if("ngSubmit"===n){i=!1!==o.changeName(o.newFileName,t)&&i}return i},null,null)),d._15(1,16384,null,0,p.w,[],null,null),d._15(2,4210688,null,0,p.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),d._35(2048,null,p.b,null,[p.p]),d._15(4,16384,null,0,p.o,[p.b],null,null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._16(6,0,null,null,26,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["stacked",""],["text-wrap",""]],[[2,"item-input",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.fileClicked(t)&&i}return i},M.b,M.a)),d._15(7,1097728,null,3,b.a,[g.a,m.a,d.p,d.K,[2,U.a]],null,null),d._37(335544320,1,{contentLabel:0}),d._37(603979776,2,{_buttons:1}),d._37(603979776,3,{_icons:1}),d._15(11,16384,null,0,N.a,[],null,null),(e()(),d._40(-1,2,["\n        "])),(e()(),d._16(13,0,null,0,0,"img",[["item-start",""],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),d._40(-1,2,["\n\n        "])),(e()(),d._40(-1,2,["\n        "])),(e()(),d._11(16777216,null,2,1,null,i)),d._15(17,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n        "])),(e()(),d._40(-1,2,["\n        "])),(e()(),d._11(16777216,null,2,1,null,o)),d._15(21,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n        "])),(e()(),d._11(16777216,null,2,1,null,r)),d._15(24,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n\n        "])),(e()(),d._40(-1,2,["\n        "])),(e()(),d._11(16777216,null,3,1,null,l)),d._15(28,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n\n        "])),(e()(),d._11(16777216,null,4,1,null,u)),d._15(31,16384,null,0,x.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._40(-1,null,["\n"])),(e()(),d._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,17,0,!t.editMode);e(n,21,0,t.size&&!t.editMode);e(n,24,0,t.timemodified&&!t.editMode);e(n,28,0,t.editMode);e(n,31,0,t.manage)},function(e,n){var t=n.component;e(n,0,0,d._29(n,4).ngClassUntouched,d._29(n,4).ngClassTouched,d._29(n,4).ngClassPristine,d._29(n,4).ngClassDirty,d._29(n,4).ngClassValid,d._29(n,4).ngClassInvalid,d._29(n,4).ngClassPending);e(n,6,0,t.editMode);e(n,13,0,t.fileIcon,d._19(1,"",t.fileExtension,""))})}t.d(n,"a",function(){return R}),n.b=c;var d=t(1),f=t(94),p=t(23),h=t(79),m=t(7),_=t(15),g=t(20),v=t(34),y=t(24),b=t(21),P=t(32),E=t(27),C=t(19),I=t(340),S=t(5),w=t(3),A=t(22),T=t(46),O=t(43),k=t(352),D=t(47),x=t(8),M=t(31),U=t(28),N=t(33),R=d._14({encapsulation:2,styles:[],data:{}})},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.element=e,this.height=0,this.onResize=new i.r}return e.prototype.onInput=function(){this.resize()},e.prototype.onChange=function(){var e=this;setTimeout(function(){e.resize()},300)},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.resize()},300)},e.prototype.resize=function(e){var n=this.element.nativeElement;"ION-TEXTAREA"==n.tagName&&(n=n.firstElementChild),n.style.height="1px",n.style.height=n.scrollHeight+"px",this.height!=n.scrollHeight&&(this.height=n.scrollHeight,this.onResize.emit())},e}()},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,l.b,l.a)),r._15(1,114688,null,0,s.a,[a.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function o(e){return r._42(0,[r._37(402653184,1,{iframe:0}),(e()(),r._16(1,0,null,null,11,"div",[],[[2,"core-loading-container",null]],null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,[[1,0],["iframe",1]],null,2,"iframe",[["class","core-iframe"]],[[8,"hidden",0],[8,"src",5]],null,null,null,null)),r._15(4,278528,null,0,u.n,[r.w,r.p,r.L],{ngStyle:[0,"ngStyle"]},null),r._33(5,{width:0,height:1}),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(7,0,null,null,4,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(10,16384,null,0,u.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,e(n,5,0,t.iframeWidth,t.iframeHeight));e(n,10,0,t.loading)},function(e,n){var t=n.component;e(n,1,0,t.loading);e(n,3,0,t.loading,t.safeUrl)})}t.d(n,"a",function(){return c}),n.b=o;var r=t(1),l=t(112),s=t(95),a=t(7),u=t(8),c=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(193),t(237);var i=function(){function e(e,n,t,i,o,r){this.sitesProvider=e,this.translate=n,this.domUtils=t,this.utils=i,this.scormProvider=o,this.scormOfflineProvider=r,this.elementsToIgnore=["status","score_raw","total_time","session_time","student_id","student_name","credit","mode","entry"]}return e.prototype.confirmDownload=function(e,n){var t=this;return this.scormProvider.shouldDownloadMainFile(e,n).then(function(n){if(n){return(e.packagesize?Promise.resolve(e.packagesize):t.scormProvider.calculateScormSize(e).then(function(n){return e.packagesize=n,n})).then(function(e){return t.domUtils.confirmDownloadSize({size:e,total:!0})})}})},e.prototype.convertAttemptToOffline=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e.id,n,void 0,!1,!1,t).then(function(o){return i.scormOfflineProvider.getScormUserData(e.id,n,void 0,t).catch(function(){}).then(function(r){var l=i.utils.clone(o),s=function(e){var n=l[e];if(i.elementsToIgnore.forEach(function(e){delete n.userdata[e]}),r&&r[n.scoid]&&r[n.scoid].userdata){var t={};for(var o in n.userdata)r[n.scoid].userdata[o]||(t[o]=n.userdata[o]);n.userdata=t}};for(var a in l)s(a);return i.scormOfflineProvider.createNewAttempt(e,n,l,o,t)})}).catch(function(){return Promise.reject(i.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},e.prototype.createOfflineAttempt=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.searchOnlineAttemptUserData(e.id,t,i).then(function(t){for(var r in t){var l=t[r],s={};for(var a in l.userdata)-1==a.indexOf(".")&&-1==o.elementsToIgnore.indexOf(a)&&(s[a]=l.userdata[a]);l.userdata=s}return o.scormOfflineProvider.createNewAttempt(e,n,t,void 0,i)}).catch(function(){return Promise.reject(o.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},e.prototype.determineAttemptToContinue=function(e,n,t){var i,o=this;if(n.online.length&&(i=Math.max.apply(Math,n.online)),i){var r=n.offline.indexOf(i)>-1;return this.scormProvider.isAttemptIncomplete(e.id,i,r,!1,t).then(function(t){return t?{number:i,offline:r}:o.getLastBeforeMax(e,n)})}return Promise.resolve(this.getLastBeforeMax(e,n))},e.prototype.getFirstSco=function(e,n,t,i,o,r){var l=this;return(t&&t.length?Promise.resolve(t):this.scormProvider.getScosWithData(e,n,i,o,!1,r)).then(function(e){for(var n=0;n<e.length;n++){var t=e[n];if(t.isvisible&&t.prereq&&t.launch&&l.scormProvider.isStatusIncomplete(t.status))return t}})},e.prototype.getLastBeforeMax=function(e,n){return 0!=e.maxattempt&&n.lastAttempt.number>e.maxattempt?{number:e.maxattempt,offline:n.offline.indexOf(e.maxattempt)>-1}:{number:n.lastAttempt.number,offline:n.lastAttempt.offline}},e.prototype.getNextScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n){for(var i=t+1;i<e.length;i++)if(e[i].isvisible&&e[i].prereq&&e[i].launch)return e[i];break}},e.prototype.getPreviousScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n){for(var i=t-1;i>=0;i--)if(e[i].isvisible&&e[i].prereq&&e[i].launch)return e[i];break}},e.prototype.getScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n)return e[t]},e.prototype.searchOnlineAttemptUserData=function(e,n,t){var i=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e,n,void 0,!1,!1,t).catch(function(){return n>0?i.searchOnlineAttemptUserData(e,n-1,t):Promise.reject(null)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.onClick=new i.r,this.element=e.nativeElement}return e.prototype.ngOnInit=function(){for(var e=this,n=0,t="all"==this.suppressEvents||void 0===this.suppressEvents||null===this.suppressEvents?["click","mousedown","touchdown","touchmove","touchstart"]:"string"==typeof this.suppressEvents?[this.suppressEvents]:Array.isArray(this.suppressEvents)?this.suppressEvents:[];n<t.length;n++){this.element.addEventListener(t[n],this.stopBubble.bind(this))}this.element.addEventListener("mouseup",function(n){e.onClick.emit(n)}),this.element.addEventListener("touchend",function(n){e.stopBubble(n),e.onClick.emit(n)})},e.prototype.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=e,this.mimeUtils=n,this.ROOT_CACHE_KEY="mmaFiles:"}return e.prototype.canGetPrivateFilesInfo=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_user_get_private_files_info")},e.prototype.canViewPrivateFiles=function(){return this.sitesProvider.getCurrentSite().canAccessMyFiles()&&!this.isPrivateFilesDisabledInSite()},e.prototype.canViewSiteFiles=function(){return!this.isSiteFilesDisabledInSite()},e.prototype.canUploadFiles=function(){var e=this.sitesProvider.getCurrentSite();return e.canAccessMyFiles()&&e.canUploadFiles()&&!this.isUploadDisabledInSite()},e.prototype.getFiles=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={cacheKey:t.getFilesListCacheKey(e)};return n.read("core_files_get_files",e,i)}).then(function(e){var n=[];return e.files&&e.files.forEach(function(e){e.isdir&&(e.link={contextid:e.contextid||"",component:e.component||"",filearea:e.filearea||"",itemid:e.itemid||0,filepath:e.filepath||"",filename:e.filename||""},e.component&&(e.link.filename="")),e.imgPath=e.isdir?t.mimeUtils.getFolderIcon():t.mimeUtils.getFileIcon(e.filename),n.push(e)}),n})},e.prototype.getFilesListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+(e.component?"my":"site")+":"+e.contextid+":"+e.filepath},e.prototype.getPrivateFiles=function(){return this.getFiles(this.getPrivateFilesRootParams())},e.prototype.getPrivateFilesRootParams=function(){return{contextid:-1,component:"user",filearea:"private",contextlevel:"user",instanceid:this.sitesProvider.getCurrentSite().getUserId(),itemid:0,filepath:"",filename:""}},e.prototype.getPrivateFilesInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={userid:e=e||n.getUserId()},o={cacheKey:t.getPrivateFilesInfoCacheKey(e)};return n.read("core_user_get_private_files_info",i,o)})},e.prototype.getPrivateFilesInfoCacheKey=function(e){return this.getPrivateFilesInfoCommonCacheKey()+":"+e},e.prototype.getPrivateFilesInfoCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"privateInfo"},e.prototype.getSiteFiles=function(){return this.getFiles(this.getSiteFilesRootParams())},e.prototype.getSiteFilesRootParams=function(){return{contextid:0,component:"",filearea:"",itemid:0,filepath:"",filename:""}},e.prototype.invalidateDirectory=function(e,n,t){var i,o=this;return n?i=n:"site"===e?i=this.getSiteFilesRootParams():"my"===e&&(i=this.getPrivateFilesRootParams()),this.sitesProvider.getSite(t).then(function(e){return e.invalidateWsCacheForKey(o.getFilesListCacheKey(i))})},e.prototype.invalidatePrivateFilesInfo=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getPrivateFilesInfoCommonCacheKey())})},e.prototype.invalidatePrivateFilesInfoForUser=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return e=e||n.getUserId(),n.invalidateWsCacheForKey(t.getPrivateFilesInfoCacheKey(e))})},e.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDisabledInSite(e)})},e.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonFiles")},e.prototype.isPluginEnabled=function(){return this.canViewPrivateFiles()||this.canViewSiteFiles()||this.canUploadFiles()},e.prototype.isPrivateFilesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isPrivateFilesDisabledInSite(e)})},e.prototype.isPrivateFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesPrivateFiles")},e.prototype.isSiteFilesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isSiteFilesDisabledInSite(e)})},e.prototype.isSiteFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesSiteFiles")},e.prototype.isUploadDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isUploadDisabledInSite(e)})},e.prototype.isUploadDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesUpload")},e.prototype.moveFromDraftToPrivate=function(e,n){var t={draftid:e},i={responseExpected:!1};return this.sitesProvider.getSite(n).then(function(e){return e.write("core_user_add_user_private_files",t,i)})},e.prototype.versionCanUploadFiles=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.isVersionGreaterEqualThan("3.1.1")})},e.PRIVATE_FILES_COMPONENT="mmaFilesMy",e.SITE_FILES_COMPONENT="mmaFilesSite",e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(57);var i=function(){function e(e,n,t,i,o,r){this.sitePluginsProvider=e,this.courseHelper=n,this.prefetchDelegate=t,this.textUtils=i,this.translate=o,this.utils=r,this.displayOpenInBrowser=!0,this.displayDescription=!0,this.displayRefresh=!0,this.displayPrefetch=!0,this.displaySize=!0,this.isDestroyed=!1}return e.prototype.ngOnInit=function(){if(this.refreshIcon="spinner",this.module){var e=this.sitePluginsProvider.getSitePluginHandler(this.module.modname);e&&(this.component=e.plugin.component,this.method=e.handlerSchema.method,this.args={courseid:this.courseId,cmid:this.module.id},this.initResult=e.initResult,this.jsData={module:this.module,courseId:this.courseId},this.displayOpenInBrowser=!this.utils.isFalseOrZero(e.handlerSchema.displayopeninbrowser),this.displayDescription=!this.utils.isFalseOrZero(e.handlerSchema.displaydescription),this.displayRefresh=!this.utils.isFalseOrZero(e.handlerSchema.displayrefresh),this.displayPrefetch=!this.utils.isFalseOrZero(e.handlerSchema.displayprefetch),this.displaySize=!this.utils.isFalseOrZero(e.handlerSchema.displaysize)),this.description=this.module.description,this.externalUrl=this.module.url}},e.prototype.doRefresh=function(e,n){return this.content?(this.refreshIcon="spinner",Promise.resolve(this.content.refreshContent(!1)).finally(function(){e&&e.complete(),n&&n()})):(e&&e.complete(),n&&n(),Promise.resolve())},e.prototype.contentLoaded=function(e){this.refreshIcon="refresh",this.prefetchDelegate.getPrefetchHandlerFor(this.module)&&this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},e.prototype.contentLoading=function(e){this.refreshIcon="spinner"},e.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id)},e.prototype.prefetch=function(){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId)},e.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.statusObserver&&this.statusObserver.off()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(102),r=function(e){function n(n,t,i){var o=e.call(this,"AddonMessageOutputDelegate",n,t,i)||this;return o.loggerProvider=n,o.sitesProvider=t,o.eventsProvider=i,o.handlerNameProperty="processorName",o}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e){return this.executeFunctionOnEnabled(e.name,"getDisplayData",e)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.textUtils=e,this.action=new i.r}return e.prototype.showInfo=function(){this.textUtils.expandText(this.title,this.info,this.component,this.componentId)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(16),t(56);var i=function(){function e(e,n){this.courseProvider=e,this.moduleDelegate=n}return e.prototype.ngOnInit=function(){this.isDisabledInSite=this.moduleDelegate.isModuleDisabledInSite(this.module.modname),this.isSupportedByTheApp=this.moduleDelegate.hasHandler(this.module.modname),this.moduleName=this.courseProvider.translateModuleName(this.module.modname)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(126),r=(t(325),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d){var f=e.call(this,"CoreCourseSyncProvider",t,n,i,c,u,s,d)||this;return f.sitesProvider=n,f.appProvider=i,f.courseOffline=o,f.eventsProvider=r,f.courseProvider=l,f.utils=a,f.textUtils=u,f}return Object(i.__extends)(n,e),t=n,n.prototype.syncAllCourses=function(e){return this.syncOnSites("courses",this.syncAllCoursesFunc.bind(this),void 0,e)},n.prototype.syncAllCoursesFunc=function(e){var n=this;return this.courseOffline.getAllManualCompletions(e).then(function(i){var o=[];i.forEach(function(i){o.push(n.syncCourseIfNeeded(i.courseid,e).then(function(o){o&&o.updated&&n.eventsProvider.trigger(t.AUTO_SYNCED,{courseId:i.courseid,warnings:o.warnings},e)}))})})},n.prototype.syncCourseIfNeeded=function(e,n){return this.syncCourse(e,n)},n.prototype.syncCourse=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);this.logger.debug("Try to sync course '"+e+"'");var i={warnings:[],updated:!1},o=this.courseOffline.getCourseManualCompletions(e,n).catch(function(){return[]}).then(function(o){if(o&&o.length)return t.appProvider.isOnline()?t.courseProvider.getActivitiesCompletionStatus(e,n,void 0,!1,!0,!1).then(function(r){var l=[];return o.forEach(function(o){var s=r[o.cmid];l.push(s&&1e3*s.timecompleted>o.timecompleted?t.courseOffline.deleteManualCompletion(o.cmid,n).then(function(){s.state!=o.completed&&i.warnings.push(t.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:o.coursename||e,error:t.translate.instant("core.course.warningmanualcompletionmodified")}))}):t.courseProvider.markCompletedManuallyOnline(o.cmid,o.completed,n).then(function(){return i.updated=!0,t.courseOffline.deleteManualCompletion(o.cmid,n)}).catch(function(r){return t.utils.isWebServiceError(r)?(i.updated=!0,t.courseOffline.deleteManualCompletion(o.cmid,n).then(function(){i.warnings.push(t.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:o.coursename||e,error:t.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(l)}):Promise.reject(null)}).then(function(){if(i.updated)return t.courseProvider.invalidateSections(e,n).then(function(){return t.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")?t.courseProvider.getSections(e,!1,!0,void 0,n):t.courseProvider.getActivitiesCompletionStatus(e,n)}).catch(function(){})}).then(function(){return t.setSyncTime(e,n)}).then(function(){return i});return this.addOngoingSync(e,o,n)},n.AUTO_SYNCED="core_course_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(273)),r=t(234),l=function(e){function n(n,t,i,o,l,s,a,u){var c=e.call(this,n,t,i,o,l,s,a)||this;return c.bookProvider=u,c.name="AddonModBook",c.modName="book",c.component=r.a.COMPONENT,c.updatesNames=/^configuration$|^.*files$|^entries$/,c}return Object(i.__extends)(n,e),n.prototype.downloadOrPrefetch=function(n,t,i,o){var r=[];return r.push(e.prototype.downloadOrPrefetch.call(this,n,t,i)),r.push(this.bookProvider.getBook(t,n.id).catch(function(){})),Promise.all(r)},n.prototype.getIntroFiles=function(e,n){var t=this;return this.bookProvider.getBook(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.bookProvider.invalidateContent(e,n)},n.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(168);var i=function(){function e(e,n,t){this.navCtrl=n,this.commentsProvider=t,this.area="",this.page=0,this.commentsLoaded=!1}return e.prototype.ngOnInit=function(){this.fetchData()},e.prototype.ngOnChanges=function(e){e&&this.fetchData()},e.prototype.fetchData=function(){var e=this;this.commentsLoaded=!1,this.commentsProvider.getComments(this.contextLevel,this.instanceId,this.component,this.itemId,this.area,this.page).then(function(n){e.commentsCount=n&&n.length?n.length:0}).catch(function(){e.commentsCount=-1}).finally(function(){e.commentsLoaded=!0})},e.prototype.openComments=function(){this.commentsCount>0&&this.navCtrl.push("CoreCommentsViewerPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,component:this.component,itemId:this.itemId,area:this.area,page:this.page,title:this.title})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.courseProvider=e}return e.prototype.formatContents=function(e){var n=[],t=[],i=this.courseProvider.getModuleIconSrc("folder");return e.forEach(function(e){if("/"!==e.filepath){var o=t,r=e.filepath,l="";"/"===r.substr(0,1)&&(r=r.substr(1)),"/"===r.substr(r.length-1)&&(r=r.slice(0,-1)),r.split("/").forEach(function(e){l=l+"/"+e;var n=o.find(function(n){return n.name===e});if(n)o=n.contents;else{var t={name:e,fileicon:i,contents:[],filepath:l,type:"folder"};o.push(t),o=t.contents}}),o.push(e)}else n.push(e)}),t.concat(n)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=(t(4),t(140)),r=t(68),l=t(166),s=function(e){function n(n,t,i,o,r,s,a,u,c,d){var f=e.call(this,n,t,i,o,r,s,a)||this;return f.groupsProvider=u,f.userProvider=c,f.forumProvider=d,f.name="AddonModForum",f.modName="forum",f.component=l.a.COMPONENT,f.updatesNames=/^configuration$|^.*files$|^discussions$/,f}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e,n,t){var i=this;return this.forumProvider.getForum(n,e.id).then(function(n){var t=i.getIntroFilesFromInstance(e,n);return i.getPostsForPrefetch(n.id).then(function(e){return t.concat(i.getPostsFiles(e))})}).catch(function(){return[]})},n.prototype.getPostsFiles=function(e){var n=this,t=[],i=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return e.forEach(function(e){e.attachments&&e.attachments.length&&(t=t.concat(e.attachments)),i&&e.messageinlinefiles&&e.messageinlinefiles.length?t=t.concat(e.messageinlinefiles):e.message&&!i&&(t=t.concat(n.domUtils.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.message)))}),t},n.prototype.getPostsForPrefetch=function(e){var n=this;return this.forumProvider.getDiscussionsInPages(e,!1,2).then(function(e){if(e.error)return Promise.reject(null);var t=[],i=[];return e.discussions.forEach(function(e){t.push(n.forumProvider.getDiscussionPosts(e.discussion).then(function(e){i=i.concat(e)}))}),Promise.all(t).then(function(){return i})})},n.prototype.invalidateContent=function(e,n){return this.forumProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.forumProvider.invalidateForumData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchForum.bind(this))},n.prototype.prefetchForum=function(e,n,t,i){var o=this;return this.forumProvider.getForum(n,e.id).then(function(t){return o.getPostsForPrefetch(t.id).then(function(r){var l=[],s=r.map(function(e){return e.userid}).filter(function(e){return!!e});l.push(o.userProvider.prefetchProfiles(s).catch(function(){}));var a=o.getIntroFilesFromInstance(e,t).concat(o.getPostsFiles(r));return l.push(o.filepoolProvider.addFilesToQueue(i,a,o.component,e.id)),l.push(o.prefetchGroupsInfo(t,n,t.cancreatediscussions)),Promise.all(l)})})},n.prototype.prefetchGroupsInfo=function(e,n,t){var i=this;return this.groupsProvider.getActivityGroupMode(e.cmid).then(function(n){return n!==r.a.SEPARATEGROUPS&&n!==r.a.VISIBLEGROUPS?i.forumProvider.canAddDiscussionToAll(e.id).catch(function(){}):i.groupsProvider.getActivityAllowedGroups(e.cmid).then(function(o){return n===r.a.SEPARATEGROUPS?i.forumProvider.canAddDiscussionToAll(e.id).catch(function(){}):t?i.forumProvider.canAddDiscussionToAll(e.id).catch(function(){return{status:!1}}).then(function(n){if(!n.status){var t=[];return o.forEach(function(n){t.push(i.forumProvider.canAddDiscussion(e.id,n.id).catch(function(){}))}),Promise.all(t)}}):void 0})}).catch(function(e){if(t)return Promise.reject(e)})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(273)),r=t(235),l=function(e){function n(n,t,i,o,l,s,a,u){var c=e.call(this,n,t,i,o,l,s,a)||this;return c.imscpProvider=u,c.name="AddonModImscp",c.modName="imscp",c.component=r.a.COMPONENT,c}return Object(i.__extends)(n,e),n.prototype.downloadOrPrefetch=function(n,t,i,o){var r=this,l=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirPathByUrl(l,n.url).then(function(o){var s=[];return s.push(e.prototype.downloadOrPrefetch.call(r,n,t,i,o)),s.push(r.imscpProvider.getImscp(t,n.id,l)),Promise.all(s)})},n.prototype.getIntroFiles=function(e,n){var t=this;return this.imscpProvider.getImscp(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.imscpProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.imscpProvider.invalidateImscpData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},n.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},n.prototype.isFileDownloadable=function(e){return this.imscpProvider.isFileDownloadable(e)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(273)),r=t(210),l=(t(298),function(e){function n(n,t,i,o,l,s,a,u,c){var d=e.call(this,n,t,i,o,l,s,a)||this;return d.pageProvider=u,d.pageHelper=c,d.name="AddonModPage",d.modName="page",d.component=r.a.COMPONENT,d.updatesNames=/^configuration$|^.*files$/,d}return Object(i.__extends)(n,e),n.prototype.downloadOrPrefetch=function(n,t,i,o){var r=[];return r.push(e.prototype.downloadOrPrefetch.call(this,n,t,i)),this.pageProvider.isGetPageWSAvailable()&&r.push(this.pageProvider.getPageData(t,n.id)),Promise.all(r)},n.prototype.invalidateContent=function(e,n){return this.pageProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.pageProvider.invalidatePageData(n)),t.push(this.courseProvider.invalidateModule(e.id)),this.utils.allPromises(t)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=(t(4),t(273)),r=t(211),l=(t(263),t(40)),s=function(e){function n(n,t,i,o,l,s,a,u,c){var d=e.call(this,n,t,i,o,l,s,a)||this;return d.resourceProvider=u,d.resourceHelper=c,d.name="AddonModResource",d.modName="resource",d.component=r.a.COMPONENT,d}return Object(i.__extends)(n,e),n.prototype.determineStatus=function(e,n,t){if(n==l.a.DOWNLOADED&&e&&e.contents){var i=e.contents[0];if(i&&i.isexternalfile)return l.a.OUTDATED}return n},n.prototype.downloadOrPrefetch=function(n,t,i,o){var r=this;return(this.resourceHelper.isDisplayedInIframe(n)?this.filepoolProvider.getPackageDirPathByUrl(this.sitesProvider.getCurrentSiteId(),n.url):Promise.resolve()).then(function(o){var l=[];return l.push(e.prototype.downloadOrPrefetch.call(r,n,t,i,o)),r.resourceProvider.isGetResourceWSAvailable()&&l.push(r.resourceProvider.getResourceData(t,n.id)),Promise.all(l)})},n.prototype.invalidateContent=function(e,n){return this.resourceProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.resourceProvider.invalidateResourceData(n)),t.push(this.courseProvider.invalidateModule(e.id,void 0,this.modName)),Promise.all(t)},n.prototype.isDownloadable=function(e,n){var t=this;return this.loadContents(e,n,!1).then(function(){return!t.resourceHelper.isNextcloudFile(e)})},n.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},n}(o.a)},function(e,n,t){"use strict";function i(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"img",[["alt",""],["core-external-content",""]],[[8,"src",4]],null,null,null,null)),h._15(1,4210688,null,0,m.a,[h.p,_.a,g.a,v.a,y.a,b.a,P.a,E.a,C.a],null,null)],null,function(e,n){e(n,0,0,n.component.course.courseImage)})}function o(e){return h._42(0,[(e()(),h._16(0,0,null,null,2,"p",[["class","core-course-shortname"]],null,null,null,null,null)),(e()(),h._16(1,0,null,null,1,"core-format-text",[],null,null,null,null,null)),h._15(2,540672,null,0,I.a,[h.p,y.a,b.a,S.a,w.a,v.a,C.a,P.a,_.a,g.a,E.a,A.a,[2,T.a],[2,O.a],[2,k.a],D.a,x.a],{text:[0,"text"]},null)],function(e,n){e(n,2,0,n.component.course.shortname)},null)}function r(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"core-icon",[["name","fa-star"]],null,null,null,M.b,M.a)),h._15(1,245760,null,0,U.a,[h.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"fa-star")},null)}function l(e){return h._42(0,[(e()(),h._16(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.prefetchCourse(t)&&i}return i},N.b,N.a)),h._15(1,1097728,[[2,4]],0,R.a,[[8,""],F.a,h.p,h.K],{color:[0,"color"],clear:[1,"clear"]},null),h._32(131072,L.a,[w.a,h.i]),(e()(),h._40(-1,0,["\n                "])),(e()(),h._16(4,0,null,0,1,"core-icon",[],null,null,null,M.b,M.a)),h._15(5,245760,null,0,U.a,[h.p],{name:[0,"name"]},null),(e()(),h._40(-1,0,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,5,0,t.prefetchCourseData.prefetchCourseIcon)},function(e,n){var t=n.component;e(n,0,0,h._41(n,0,0,h._29(n,2).transform(t.prefetchCourseData.title)))})}function s(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,H.b,H.a)),h._15(1,114688,null,0,K.a,[F.a,h.p,h.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,h._29(n,1)._paused)})}function a(e){return h._42(0,[(e()(),h._16(0,0,null,null,9,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),h._40(-1,null,["\n            "])),(e()(),h._40(-1,null,["\n            "])),(e()(),h._11(16777216,null,null,1,null,l)),h._15(4,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n            "])),(e()(),h._40(-1,null,["\n            "])),(e()(),h._11(16777216,null,null,1,null,s)),h._15(8,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,"spinner"!=t.prefetchCourseData.prefetchCourseIcon);e(n,8,0,"spinner"==t.prefetchCourseData.prefetchCourseIcon)},null)}function u(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,H.b,H.a)),h._15(1,114688,null,0,K.a,[F.a,h.p,h.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,h._29(n,1)._paused)})}function c(e){return h._42(0,[(e()(),h._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showCourseOptionsMenu(t)&&i}return i},N.b,N.a)),h._15(1,1097728,[[2,4]],0,R.a,[[8,""],F.a,h.p,h.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),h._40(-1,0,["\n                "])),(e()(),h._16(3,0,null,0,1,"core-icon",[["name","more"]],null,null,null,M.b,M.a)),h._15(4,245760,null,0,U.a,[h.p],{name:[0,"name"]},null),(e()(),h._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark","");e(n,4,0,"more")},null)}function d(e){return h._42(0,[(e()(),h._16(0,0,null,null,9,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),h._40(-1,null,["\n            "])),(e()(),h._40(-1,null,["\n            "])),(e()(),h._11(16777216,null,null,1,null,u)),h._15(4,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n\n            "])),(e()(),h._40(-1,null,["\n            "])),(e()(),h._11(16777216,null,null,1,null,c)),h._15(8,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.downloadCourseEnabled&&"spinner"==t.prefetchCourseData.prefetchCourseIcon||t.showSpinner);e(n,8,0,!t.showSpinner)},null)}function f(e){return h._42(0,[(e()(),h._16(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,q.b,q.a)),h._15(1,1097728,null,3,B.a,[j.a,F.a,h.p,h.K,[2,G.a]],null,null),h._37(335544320,4,{contentLabel:0}),h._37(603979776,5,{_buttons:1}),h._37(603979776,6,{_icons:1}),h._15(5,16384,null,0,z.a,[],null,null),(e()(),h._40(-1,2,["\n        "])),(e()(),h._16(7,0,null,2,1,"core-progress-bar",[],null,null,null,V.b,V.a)),h._15(8,573440,null,0,$.a,[Q.c],{progress:[0,"progress"]},null),(e()(),h._40(-1,2,["\n    "]))],function(e,n){e(n,8,0,n.component.course.progress)},null)}function p(e){return h._42(0,[(e()(),h._16(0,0,null,null,42,"ion-card",[],[[1,"course-color",0]],null,null,null,null)),h._15(1,16384,null,0,Y.a,[F.a,h.p,h.K],null,null),(e()(),h._40(-1,null,["\n    "])),(e()(),h._16(3,0,null,null,4,"div",[["class","core-course-thumb"]],[[2,"core-course-color-img",null]],[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.openCourse(o.course)&&i}return i},null,null)),(e()(),h._40(-1,null,["\n        "])),(e()(),h._11(16777216,null,null,1,null,i)),h._15(6,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n    "])),(e()(),h._40(-1,null,["\n    "])),(e()(),h._16(9,0,null,null,27,"ion-item",[["class","core-course-link item item-block"],["detail-none",""],["tappable",""],["text-wrap",""]],[[8,"title",0],[2,"item-disabled",null],[2,"core-course-more-than-title",null]],[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.openCourse(o.course)&&i}return i},q.b,q.a)),h._15(10,1097728,null,3,B.a,[j.a,F.a,h.p,h.K,[2,G.a]],null,null),h._37(335544320,1,{contentLabel:0}),h._37(603979776,2,{_buttons:1}),h._37(603979776,3,{_icons:1}),h._15(14,16384,null,0,z.a,[],null,null),(e()(),h._40(-1,2,["\n        "])),(e()(),h._16(16,0,null,2,13,"div",[["class","core-course-title"]],[[2,"core-course-with-buttons",null]],null,null,null,null)),(e()(),h._40(-1,null,["\n            "])),(e()(),h._11(16777216,null,null,1,null,o)),h._15(19,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n            "])),(e()(),h._16(21,0,null,null,7,"h2",[],null,null,null,null,null)),(e()(),h._40(-1,null,["\n                "])),(e()(),h._11(16777216,null,null,1,null,r)),h._15(24,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                "])),(e()(),h._16(26,0,null,null,1,"core-format-text",[],null,null,null,null,null)),h._15(27,540672,null,0,I.a,[h.p,y.a,b.a,S.a,w.a,v.a,C.a,P.a,_.a,g.a,E.a,A.a,[2,T.a],[2,O.a],[2,k.a],D.a,x.a],{text:[0,"text"]},null),(e()(),h._40(-1,null,["\n            "])),(e()(),h._40(-1,null,["\n        "])),(e()(),h._40(-1,2,["\n\n        "])),(e()(),h._11(16777216,null,2,1,null,a)),h._15(32,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,2,["\n\n        "])),(e()(),h._11(16777216,null,2,1,null,d)),h._15(35,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,2,["\n    "])),(e()(),h._40(-1,null,["\n    "])),(e()(),h._11(16777216,null,null,1,null,f)),h._15(39,16384,null,0,W.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n    "])),h._28(null,0),(e()(),h._40(-1,null,["\n"])),(e()(),h._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,6,0,t.course.courseImage);e(n,19,0,t.course.displayname&&t.course.shortname&&t.course.fullname!=t.course.displayname);e(n,24,0,t.course.isfavourite);e(n,27,0,t.course.fullname);e(n,32,0,t.downloadCourseEnabled&&!t.courseOptionMenuEnabled&&t.showDownload);e(n,35,0,t.courseOptionMenuEnabled);e(n,39,0,t.showAll&&null!=t.course.progress&&t.course.progress>=0)},function(e,n){var t=n.component;e(n,0,0,t.course.id%10);e(n,3,0,t.course.courseImage);e(n,9,0,t.course.displayname||t.course.fullname,0==t.course.visible,null!=t.course.progress&&t.course.progress>=0);e(n,16,0,t.courseOptionMenuEnabled||t.downloadCourseEnabled&&t.showDownload)})}t.d(n,"a",function(){return X}),n.b=p;var h=t(1),m=t(226),_=t(6),g=t(17),v=t(15),y=t(2),b=t(5),P=t(26),E=t(10),C=t(3),I=t(42),S=t(11),w=t(19),A=t(18),T=t(22),O=t(24),k=t(35),D=t(38),x=t(13),M=t(131),U=t(121),N=t(46),R=t(43),F=t(7),L=t(27),H=t(112),K=t(95),W=t(8),q=t(31),B=t(21),j=t(20),G=t(28),z=t(33),V=t(448),$=t(282),Q=t(75),Y=t(87),X=(t(41),t(16),t(51),t(45),h._14({encapsulation:2,styles:[],data:{}}))},,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t(0),t(1),t(507),t(9);var i=function(){function e(e,n,t){this.name=e,this.sqlite=n,this.platform=t,this.init()}return e.prototype.buildCreateTableSql=function(e,n,t,i,o,r){var l=[],s="CREATE TABLE IF NOT EXISTS "+e+" (";for(var a in n){var u=n[a],c=u.name||"";u.type&&(c+=" "+u.type),u.primaryKey&&(c+=" PRIMARY KEY",u.autoIncrement&&(c+=" AUTOINCREMENT")),u.notNull&&(c+=" NOT NULL"),u.unique&&(c+=" UNIQUE"),u.check&&(c+=" CHECK ("+u.check+")"),void 0!==u.default&&(c+=" DEFAULT "+u.default),l.push(c)}if(s+=l.join(", "),t&&t.length&&(s+=", PRIMARY KEY ("+t.join(", ")+")"),i&&i.length)for(var a in i){var d=i[a];d&&d.length&&(s+=", UNIQUE ("+d.join(", ")+")")}r&&(s+=", CHECK ("+r+")");for(var a in o){var f=o[a];if(!f.columns||f.columns.length)return;s+=", FOREIGN KEY ("+f.columns.join(", ")+") REFERENCES "+f.table+" ",f.foreignColumns&&f.foreignColumns.length&&(s+="("+f.foreignColumns.join(", ")+")"),f.actions&&(s+=" "+f.actions)}return s+")"},e.prototype.close=function(){var e=this;return this.ready().then(function(){return e.db.close()})},e.prototype.countRecords=function(e,n){var t=this.whereClause(n);return this.countRecordsSelect(e,t[0],t[1])},e.prototype.countRecordsSelect=function(e,n,t,i){return void 0===n&&(n=""),void 0===i&&(i="COUNT('x')"),n&&(n="WHERE "+n),this.countRecordsSql("SELECT "+i+" FROM "+e+" "+n,t)},e.prototype.countRecordsSql=function(e,n){return this.getFieldSql(e,n).then(function(e){return"number"!=typeof e||e<0?0:e})},e.prototype.createTable=function(e,n,t,i,o,r){var l=this.buildCreateTableSql(e,n,t,i,o,r);return this.execute(l)},e.prototype.createTableFromSchema=function(e){return this.createTable(e.name,e.columns,e.primaryKeys,e.uniqueKeys,e.foreignKeys,e.tableCheck)},e.prototype.createTablesFromSchema=function(e){var n=this,t=[];return e.forEach(function(e){t.push(n.createTableFromSchema(e))}),Promise.all(t)},e.prototype.deleteRecords=function(e,n){if(null===n||void 0===n)return this.execute("DELETE FROM "+e);var t=this.whereClause(n);return this.deleteRecordsSelect(e,t[0],t[1])},e.prototype.deleteRecordsList=function(e,n,t){var i=this.whereClauseList(n,t);return this.deleteRecordsSelect(e,i[0],i[1])},e.prototype.deleteRecordsSelect=function(e,n,t){return void 0===n&&(n=""),n&&(n="WHERE "+n),this.execute("DELETE FROM "+e+" "+n,t)},e.prototype.execute=function(e,n){var t=this;return this.ready().then(function(){return t.db.executeSql(e,n)})},e.prototype.executeBatch=function(e){var n=this;return this.ready().then(function(){return n.db.sqlBatch(e)})},e.prototype.formatDataToInsert=function(e){if(e)for(var n in e){void 0===e[n]&&delete e[n]}},e.prototype.getAllRecords=function(e){return this.getRecords(e)},e.prototype.getField=function(e,n,t){var i=this.whereClause(t);return this.getFieldSelect(e,n,i[0],i[1])},e.prototype.getFieldSelect=function(e,n,t,i){return void 0===t&&(t=""),t&&(t="WHERE "+t),this.getFieldSql("SELECT "+n+" FROM "+e+" "+t,i)},e.prototype.getFieldSql=function(e,n){return this.getRecordSql(e,n).then(function(e){return e?e[Object.keys(e)[0]]:Promise.reject(null)})},e.prototype.getInOrEqual=function(e,n,t){void 0===n&&(n=!0);var i,o;if(void 0===t&&(t=!1),Array.isArray(e)&&!e.length&&!1===t)return["",[]];if(Array.isArray(e)&&!e.length){if(null===t)return i=n?" IS NULL":" IS NOT NULL",[i,[]];e=[t]}return Array.isArray(e)&&1!=e.length?(i=(n?"":"NOT ")+"IN ("+",?".repeat(e.length).substr(1)+")",o=e):(i=n?"= ?":"<> ?",o=Array.isArray(e)?e:[e]),[i,o]},e.prototype.getName=function(){return this.name},e.prototype.getRecord=function(e,n,t){void 0===t&&(t="*");var i=this.whereClause(n);return this.getRecordSelect(e,i[0],i[1],t)},e.prototype.getRecordSelect=function(e,n,t,i){return void 0===n&&(n=""),void 0===t&&(t=[]),void 0===i&&(i="*"),n&&(n=" WHERE "+n),this.getRecordSql("SELECT "+i+" FROM "+e+" "+n,t)},e.prototype.getRecordSql=function(e,n){return this.getRecordsSql(e,n,0,1).then(function(e){return e&&e.length?e[0]:Promise.reject(null)})},e.prototype.getRecords=function(e,n,t,i,o,r){void 0===t&&(t=""),void 0===i&&(i="*"),void 0===o&&(o=0),void 0===r&&(r=0);var l=this.whereClause(n);return this.getRecordsSelect(e,l[0],l[1],t,i,o,r)},e.prototype.getRecordsList=function(e,n,t,i,o,r,l){void 0===i&&(i=""),void 0===o&&(o="*"),void 0===r&&(r=0),void 0===l&&(l=0);var s=this.whereClauseList(n,t);return this.getRecordsSelect(e,s[0],s[1],i,o,r,l)},e.prototype.getRecordsSelect=function(e,n,t,i,o,r,l){void 0===n&&(n=""),void 0===t&&(t=[]),void 0===i&&(i=""),void 0===o&&(o="*"),void 0===r&&(r=0),void 0===l&&(l=0),n&&(n=" WHERE "+n),i&&(i=" ORDER BY "+i);return this.getRecordsSql("SELECT "+o+" FROM "+e+" "+n+" "+i,t,r,l)},e.prototype.getRecordsSql=function(e,n,t,i){var o=this.normaliseLimitFromNum(t,i);return(o[0]||o[1])&&(o[1]<1&&(o[1]=Number.MAX_VALUE),e+=" LIMIT "+o[0]+", "+o[1]),this.execute(e,n).then(function(e){for(var n=[],t=0;t<e.rows.length;t++)n.push(e.rows.item(t));return n})},e.prototype.getSqlInsertQuery=function(e,n){this.formatDataToInsert(n);var t=Object.keys(n);return["INSERT OR REPLACE INTO "+e+" ("+t.join(",")+") VALUES ("+",?".repeat(t.length).substr(1)+")",t.map(function(e){return n[e]})]},e.prototype.init=function(){var e=this;this.promise=this.platform.ready().then(function(){return e.sqlite.create({name:e.name,location:"default"})}).then(function(n){e.db=n})},e.prototype.insertRecord=function(e,n){var t=this.getSqlInsertQuery(e,n);return this.execute(t[0],t[1]).then(function(e){return e.insertId})},e.prototype.insertRecords=function(e,n){var t=this;if(!Array.isArray(n))return Promise.reject(null);var i=[];return n.forEach(function(n){i.push(t.getSqlInsertQuery(e,n))}),this.executeBatch(i)},e.prototype.normaliseLimitFromNum=function(e,n){return void 0!==e&&null!==e&&""!==e&&-1!==e||(e=0),void 0!==n&&null!==n&&""!==n&&-1!==n||(n=0),e=parseInt(e,10),n=parseInt(n,10),e=Math.max(0,e),n=Math.max(0,n),[e,n]},e.prototype.open=function(){var e=this;return this.ready().then(function(){return e.db.open()})},e.prototype.ready=function(){return this.promise},e.prototype.recordExists=function(e,n){return this.getRecord(e,n).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.recordExistsSelect=function(e,n,t){return void 0===n&&(n=""),void 0===t&&(t=[]),this.getRecordSelect(e,n,t).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.recordExistsSql=function(e,n){return this.getRecordSql(e,n).then(function(e){if(!e)return Promise.reject(null)})},e.prototype.updateRecords=function(e,n,t){if(this.formatDataToInsert(n),!n||!Object.keys(n).length)return Promise.resolve();var i,o,r=this.whereClause(t),l=[];for(var s in n)l.push(s+" = ?");return i="UPDATE "+e+" SET "+l.join(", ")+" WHERE "+r[0],o=Object.keys(n).map(function(e){return n[e]}).concat(r[1]),this.execute(i,o)},e.prototype.updateRecordsWhere=function(e,n,t,i){if(!n||!Object.keys(n).length)return Promise.resolve();var o,r,l=[];for(var s in n)l.push(s+" = ?");return o="UPDATE "+e+" SET "+l.join(", "),t&&(o+=" WHERE "+t),r=Object.keys(n).map(function(e){return n[e]}),t&&i&&(r=r.concat(i)),this.execute(o,r)},e.prototype.whereClause=function(e){if(void 0===e&&(e={}),!e||!Object.keys(e).length)return["1 = 1",[]];var n=[],t=[];for(var i in e){var o=e[i];void 0===o||null===o?n.push(i+" IS NULL"):(n.push(i+" = ?"),t.push(o))}return[n.join(" AND "),t]},e.prototype.whereClauseList=function(e,n){if(!n||!n.length)return["1 = 2",[]];var t=[],i="";if(n.forEach(function(n){"boolean"==typeof n&&(n=Number(n)),void 0===n||null===n?i=e+" IS NULL":t.push(n)}),t&&t.length)if(""!==i&&(i+=" OR "),1==t.length)i=i+e+" = ?";else{var o=",?".repeat(t.length).substr(1);i=i+e+" IN ("+o+")"}return[i,t]},e}(),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),r=function(e){function n(n){var t=e.call(this,n,null,null)||this;return t.name=n,t}return o(n,e),n.prototype.close=function(){return Promise.resolve()},n.prototype.emptyDatabase=function(){var e=this;return new Promise(function(n,t){e.db.transaction(function(e){e.executeSql("SELECT * FROM sqlite_master\n                            WHERE name NOT LIKE 'sqlite\\_%' escape '\\' AND name NOT LIKE '\\_%' escape '\\'",[],function(e,i){if(i.rows.length<=0)n();else{for(var o=[],r=function(n){o.push(new Promise(function(t,o){var r=JSON.stringify(i.rows.item(n).name);e.executeSql("DROP TABLE "+r,[],t,o)}))},l=0;l<i.rows.length;l++)r(l);Promise.all(o).then(n,t)}},t)})})},n.prototype.execute=function(e,n){var t=this;return new Promise(function(i,o){t.db.transaction(function(t){t.executeSql(e,n,function(e,n){i(n)},function(t,i){console.error(e,n,i),o(i)})})})},n.prototype.executeBatch=function(e){var n=this;return new Promise(function(t,i){n.db.transaction(function(n){var o=[];e.forEach(function(e){o.push(new Promise(function(t,i){var o,r;Array.isArray(e)?(o=e[0],r=e[1]):(o=e,r=null),n.executeSql(o,r,function(e,n){t(n)},function(e,n){console.error(o,r,n),i(n)})}))}),Promise.all(o).then(t,i)})})},n.prototype.init=function(){this.db=window.openDatabase(this.name,"1.0",this.name,524288e3),this.promise=Promise.resolve()},n.prototype.open=function(){return Promise.resolve()},n}(i);t.d(n,"a",function(){return l});var l=function(){function e(e,n){this.sqlite=e,this.platform=n,this.dbInstances={}}return e.prototype.getDB=function(e,n){return(void 0===this.dbInstances[e]||n)&&(this.dbInstances[e]=this.platform.is("cordova")?new i(e,this.sqlite,this.platform):new r(e)),this.dbInstances[e]},e.prototype.deleteDB=function(e){var n=this;return(void 0!==this.dbInstances[e]?this.dbInstances[e].close():Promise.resolve()).then(function(){var t=n.dbInstances[e];return delete n.dbInstances[e],n.platform.is("cordova")?n.sqlite.deleteDatabase({name:e,location:"default"}):t.emptyDatabase()})},e}()},,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){}return n=e,e.prototype.intercept=function(e,t){var i=e.clone({headers:e.headers.set("Content-Type","application/x-www-form-urlencoded"),body:"object"==typeof e.body&&"[object File]"!=String(e.body)?n.serialize(e.body):e.body});return t.handle(i)},e.serialize=function(e,n){var t,i="";for(var o in e){var r=e[o];if(r instanceof Array)for(var l=0;l<r.length;++l)(t={})[o+"["+l+"]"]=r[l],i+=this.serialize(t)+"&";else if(r instanceof Object)for(var s in r)(t={})[o+"["+s+"]"]=r[s],i+=this.serialize(t)+"&";else(n||void 0!==r&&null!==r)&&(i+=encodeURIComponent(o)+"="+encodeURIComponent(r)+"&")}return i.length?i.substr(0,i.length-1):i},e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1715),o=(t.n(i),function(){function e(){this.labels=[],this.height=300}return n=e,e.prototype.ngOnInit=function(){var e={};e=void 0===this.legend?{display:!1,labels:{generateLabels:function(e){var n=e.data;if(n.labels.length&&n.labels.length){var t=n.datasets[0];return n.labels.map(function(e,n){return{text:e+": "+t.data[n],fillStyle:t.backgroundColor[n]}})}return[]}}}:Object.assign({},this.legend),"bar"==this.type&&this.data.length>=5&&(this.type="horizontalBar");var n=this.canvas.nativeElement.getContext("2d");this.chart=new i.Chart(n,{type:this.type,data:{labels:this.labels,datasets:[{data:this.data,backgroundColor:this.getRandomColors(this.data.length)}]},options:{legend:e}})},e.prototype.ngOnChanges=function(){this.chart&&(this.chart.data.datasets[0]={data:this.data,backgroundColor:this.getRandomColors(this.data.length)},this.chart.data.labels=this.labels,this.chart.update())},e.prototype.getRandomColors=function(e){for(;n.backgroundColors.length<e;){var t=Math.floor(255*Math.random()),i=Math.floor(255*Math.random()),o=Math.floor(255*Math.random());n.backgroundColors.push("rgba("+t+", "+i+", "+o+", 0.6)")}return n.backgroundColors.slice(0,e)},e.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=!1)},e.backgroundColors=["rgba(0,100,210, 0.6)","rgba(203,61,77, 0.6)","rgba(0,121,130, 0.6)","rgba(249,128,18, 0.6)","rgba(94,129,0, 0.6)","rgba(251,173,26, 0.6)"],e;var n}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(13),r=function(e){function n(n,t,i){var r=e.call(this,"CoreFileUploaderDelegate",n,t,i)||this;return r.sitesProvider=t,r.eventsProvider=i,i.on(o.a.LOGOUT,r.clearSiteHandlers.bind(r)),r}return Object(i.__extends)(n,e),n.prototype.clearSiteHandlers=function(){this.enabledHandlers={}},n.prototype.getHandlers=function(e){var n=[];for(var t in this.enabledHandlers){var i=this.enabledHandlers[t],o=void 0;if(e){if(!i.getSupportedMimetypes)continue;if(!(o=i.getSupportedMimetypes(e)).length)continue}var r=i.getData();r.priority=i.priority,r.mimetypes=o,n.push(r)}return n},n}(t(102).a)},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(56);var i=t(360),o=(t(188),function(){function e(e,n){this.moduleDelegate=e,this.injector=n,this.data={}}return e.prototype.ngOnChanges=function(e){var n=this;if(this.course&&this.sections&&this.sections.length){var t=this.sections[0]&&this.sections[0].modules&&this.sections[0].modules[0];t&&!this.componentClass&&this.moduleDelegate.getMainComponent(this.injector,this.course,t).then(function(e){n.componentClass=e||i.a}),this.data.courseId=this.course.id,this.data.module=t}},e.prototype.doRefresh=function(e,n,t){return t?Promise.resolve():Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,n]))},e.prototype.ionViewDidEnter=function(){this.dynamicComponent.callComponentFunction("ionViewDidEnter")},e.prototype.ionViewDidLeave=function(){this.dynamicComponent.callComponentFunction("ionViewDidLeave")},e}())},,function(e,n){e.exports=require("fs")},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(59),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),r=function(e){function n(n,t,i,o,r){var l=e.call(this)||this;return l.courseHelper=n,l.domUtils=t,l.sitesProvider=i,l.addon=o,l.modName=r,l.useModNameToGetModule=!1,l.pattern=new RegExp("/mod/"+r+"/grade.php.*([&?]id=\\d+)"),l.featureName="CoreCourseModuleDelegate_"+o,l}return o(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,r){var l=o.domUtils.showModalLoading();o.sitesProvider.getSite(e).then(function(l){t.userid&&t.userid!=l.getUserId()?o.canReview?o.goToReview(n,t,i,e,r):l.openInBrowserWithAutoLogin(n):o.courseHelper.navigateToModule(parseInt(t.id,10),e,i,void 0,o.useModNameToGetModule?o.modName:void 0)}).finally(function(){l.dismiss()})}}]},n.prototype.goToReview=function(e,n,t,i,o){return Promise.resolve()},n}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(57);var i=function(){function e(e){this.sitePluginsProvider=e}return e.prototype.ngOnInit=function(){if(this.handlerUniqueName){var e=this.sitePluginsProvider.getSitePluginHandler(this.handlerUniqueName);e&&(this.component=e.plugin.component,this.method=e.handlerSchema.method,this.args={courseid:this.courseId},this.initResult=e.initResult)}},e.prototype.refreshData=function(e){this.content.refreshContent(!1).finally(function(){e.complete()})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(57),t(454);var i=function(){function e(e){this.sitePluginsProvider=e}return e.prototype.ngOnChanges=function(){if(this.course&&this.course.format){if(!this.component){var e=this.sitePluginsProvider.getSitePluginHandler(this.course.format);e&&(this.component=e.plugin.component,this.method=e.handlerSchema.method,this.args={courseid:this.course.id,downloadenabled:this.downloadEnabled},this.initResult=e.initResult)}this.data={course:this.course,sections:this.sections,downloadEnabled:this.downloadEnabled,initialSectionId:this.initialSectionId,initialSectionNumber:this.initialSectionNumber,moduleId:this.moduleId,completionChanged:this.completionChanged,coreCourseFormatComponent:this.coreCourseFormatComponent}}},e.prototype.doRefresh=function(e,n,t){return Promise.resolve(this.content.refreshContent(t))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(57),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData("qtype_"+this.question.type)},n}(t(245).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(57),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData("qbehaviour_"+this.question.preferredBehaviour)},n}(t(245).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=(t(57),t(245)),r=function(e){function n(n,t){var i=e.call(this,n,t)||this;return i.edit=!1,i.disabled=!1,i.signup=!1,i}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.field=this.field,this.jsData.signup=this.signup,this.jsData.edit=this.edit,this.jsData.disabled=this.disabled,this.jsData.form=this.form,this.jsData.registerAuth=this.registerAuth,this.field&&this.getHandlerData("profilefield_"+(this.field.type||this.field.datatype))},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=(t(57),t(245)),r=function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.rule=this.rule,this.jsData.quiz=this.quiz,this.jsData.attempt=this.attempt,this.jsData.prefetch=this.prefetch,this.jsData.siteId=this.siteId,this.jsData.form=this.form,this.rule&&this.getHandlerData(this.rule)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(57),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.userId=this.userId,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.canEdit=this.canEdit,this.plugin&&this.getHandlerData("assignfeedback_"+this.plugin.type)},n.prototype.invalidate=function(){return Promise.resolve()},n}(t(245).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(57),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.allowOffline=this.allowOffline,this.plugin&&this.getHandlerData("assignsubmission_"+this.plugin.type)},n.prototype.invalidate=function(){return Promise.resolve()},n}(t(245).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,t,i){this.sitesProvider=t,this.timeUtils=i,this.tablesSchema=[{name:n.NOTES_TABLE,columns:[{name:"userid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"publishstate",type:"TEXT"},{name:"content",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"created",type:"INTEGER"},{name:"lastmodified",type:"INTEGER"}],primaryKeys:["userid","content","created"]}],this.logger=e.getInstance("AddonNotesOfflineProvider"),this.sitesProvider.createTablesFromSchema(this.tablesSchema)}return n=e,e.prototype.deleteNote=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(n.NOTES_TABLE,{userid:e,content:t,created:i})})},e.prototype.getAllNotes=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.getDb().getRecords(n.NOTES_TABLE)})},e.prototype.getNote=function(e,t,i,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(n.NOTES_TABLE,{userid:e,content:t,created:i})})},e.prototype.getNotesForCourse=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.NOTES_TABLE,{courseid:e})})},e.prototype.getNotesForUser=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.NOTES_TABLE,{userid:e})})},e.prototype.getNotesWithPublishState=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(n.NOTES_TABLE,{publishstate:e})})},e.prototype.hasNotesForCourse=function(e,n){return this.getNotesForCourse(e,n).then(function(e){return!!e.length})},e.prototype.hasNotesForUser=function(e,n){return this.getNotesForUser(e,n).then(function(e){return!!e.length})},e.prototype.hasNotesWithPublishState=function(e,n){return this.getNotesWithPublishState(e,n).then(function(e){return!!e.length})},e.prototype.saveNote=function(e,t,i,o,r){var l=this;return this.sitesProvider.getSite(r).then(function(r){var s=l.timeUtils.timestamp(),a={userid:e,courseid:t,publishstate:i,content:o,format:1,created:s,lastmodified:s};return r.getDb().insertRecord(n.NOTES_TABLE,a).then(function(){return a})})},e.NOTES_TABLE="addon_notes_offline_notes",e;var n}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n,t){this.sitesProvider=e,this.courseProvider=n,this.domUtils=t,this.ROOT_CACHE_KEY="AddonBlockRecentlyAccessedItems:"}return e.prototype.getRecentItemsCacheKey=function(){return this.ROOT_CACHE_KEY+":recentitems"},e.prototype.getRecentItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getRecentItemsCacheKey()};return e.read("block_recentlyaccesseditems_get_recent_items",void 0,t).then(function(e){return e.map(function(e){var t=e.icon&&n.domUtils.getHTMLElementAttribute(e.icon,"src");return e.iconUrl=n.courseProvider.getModuleIconSrc(e.modname,t),e})})})},e.prototype.invalidateRecentItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getRecentItemsCacheKey())})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(432),o=function(){function e(e,n){this.utils=e,this.domUtils=n,this.name="AddonQtypeCalculated",this.type="qtype_calculated"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return 0!==this.isGradableResponse(e,n)&&this.validateUnits(n.answer)?this.requiresUnits(e)?this.isValidValue(n.unit)?1:0:-1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){var t=this.isValidValue(n.answer);return t&&this.requiresUnits(e)&&(t=this.isValidValue(n.unit)),t?1:0},e.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")&&this.utils.sameAtKeyMissingIsBlank(n,t,"unit")},e.prototype.isValidValue=function(e){return!!e||"0"===e||0===e},e.prototype.requiresUnits=function(e){var n=this.domUtils.convertToElement(e.html);return!(!n.querySelector("select[name*=unit]")&&!n.querySelector('input[type="radio"]'))},e.prototype.validateUnits=function(e){if(!e)return!1;var n="[+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[-+]?\\d+)?";return e=e.replace(" ",""),e=e.replace(/(?:e|E|(?:x|\*|)10(?:\^|\*\*))([+-]?\d+)/,"e$1"),null!==(e=-1!=e.indexOf(".")||e.split(",").length-1>1?e.replace(",",""):e.replace(",",".")).match(new RegExp("^"+n))&&null!==e.match(new RegExp(n+"$"))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t){return e.call(this,n,"AddonQtypeCalculatedComponent",t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initCalculatedComponent()},n}(t(171).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t){return e.call(this,n,"AddonQtypeMatchComponent",t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initMatchComponent()},n}(t(171).a)},,,,function(e,n,t){"use strict";function i(e){return o._42(0,[o._37(402653184,1,{detailNav:0}),o._37(402653184,2,{menu:0}),(e()(),o._16(2,0,null,null,17,"ion-split-pane",[],null,[[null,"ionChange"]],function(e,n,t){var i=!0;if("ionChange"===n){i=!1!==e.component.onSplitPaneChanged(t._visible)&&i}return i},null,null)),o._15(3,4341760,null,1,r.b,[o.D,l.a,s.a,o.p,o.K],{when:[0,"when"]},{ionChange:"ionChange"}),o._37(603979776,3,{_setchildren:1}),o._35(2048,[[3,4]],r.a,null,[r.b]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(7,0,null,null,7,"ion-menu",[["class","core-avoid-header"],["role","navigation"],["type","push"]],null,null,null,a.b,a.a)),o._15(8,245760,[[2,4],["menu",4]],2,u.a,[c.a,o.p,s.a,l.a,o.K,d.a,f.l,p.a,h.a],{content:[0,"content"],type:[1,"type"],side:[2,"side"]},null),o._37(335544320,4,{menuContent:0}),o._37(335544320,5,{menuNav:0}),o._35(2048,[[3,4]],r.a,null,[u.a]),(e()(),o._40(-1,0,["\n        "])),o._28(0,0),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(16,0,null,null,2,"ion-nav",[["class","core-avoid-header"],["main",""]],null,null,null,m.b,m.a)),o._15(17,4374528,[[1,4],["detailNav",4]],0,_.a,[[2,g.a],[2,v.a],h.a,s.a,l.a,o.p,o.D,o.K,o.n,f.l,y.a,[2,b.a],p.a,o.q],{root:[0,"root"]},null),o._35(2048,[[3,4]],r.a,null,[_.a]),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.when);e(n,8,0,o._29(n,17),"push",t.side);e(n,17,0,t.detailPage)},null)}t.d(n,"a",function(){return P}),n.b=i;var o=t(1),r=t(197),l=t(15),s=t(7),a=t(1761),u=t(384),c=t(182),d=t(107),f=t(39),p=t(32),h=t(34),m=t(987),_=t(269),g=t(37),v=t(22),y=t(178),b=t(52),P=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t(0),t(1),t(8),t(9),t(4),t(29),t(30),t(106),t(66),t(478),t(23),t(96),t(115),t(188),t(13),t(208),t(2),t(45),t(438),t(443);t.d(n,"a",function(){return i});var i=function(){return function(){}}()},function(e,n,t){"use strict";function i(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadMore()&&i}return i},h.b,h.a)),p._15(1,1097728,null,0,m.a,[[8,""],_.a,p.p,p.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._40(2,0,["\n            ","\n        "])),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,p._41(n,2,0,p._29(n,3).transform("core.loadmore")))})}function o(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadMore()&&i}return i},h.b,h.a)),p._15(1,1097728,null,0,m.a,[[8,""],_.a,p.p,p.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._40(2,0,["\n            ","\n        "])),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,p._41(n,2,0,p._29(n,3).transform("core.tryagain")))})}function r(e){return p._42(0,[(e()(),p._16(0,0,null,null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,i)),p._15(3,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,o)),p._15(6,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.error);e(n,6,0,t.error)},null)}function l(e){return p._42(0,[(e()(),p._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._40(-1,null,["\n    "])),(e()(),p._11(16777216,null,null,1,null,r)),p._15(3,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.enabled||t.error)},null)}function s(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadMore()&&i}return i},h.b,h.a)),p._15(1,1097728,null,0,m.a,[[8,""],_.a,p.p,p.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._40(2,0,["\n            ","\n        "])),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,p._41(n,2,0,p._29(n,3).transform("core.loadmore")))})}function a(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadMore()&&i}return i},h.b,h.a)),p._15(1,1097728,null,0,m.a,[[8,""],_.a,p.p,p.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),p._40(2,0,["\n            ","\n        "])),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,p._41(n,2,0,p._29(n,3).transform("core.tryagain")))})}function u(e){return p._42(0,[(e()(),p._16(0,0,null,null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,s)),p._15(3,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,a)),p._15(6,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.error);e(n,6,0,t.error)},null)}function c(e){return p._42(0,[(e()(),p._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),p._40(-1,null,["\n    "])),(e()(),p._11(16777216,null,null,1,null,u)),p._15(3,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.enabled||t.error)},null)}function d(e){return p._42(0,[(e()(),p._16(0,0,null,null,4,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),p._40(-1,null,["\n    "])),(e()(),p._16(2,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,b.b,b.a)),p._15(3,114688,null,0,P.a,[_.a,p.p,p.K],null,null),(e()(),p._40(-1,null,["\n"]))],function(e,n){e(n,3,0)},function(e,n){e(n,2,0,p._29(n,3)._paused)})}function f(e){return p._42(0,[(e()(),p._11(16777216,null,null,1,null,l)),p._15(1,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n\n"])),(e()(),p._16(3,0,null,null,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(e,n,t){var i=!0;if("ionInfinite"===n){i=!1!==e.component.loadMore(t)&&i}return i},null,null)),p._15(4,1196032,null,0,E.a,[C.a,p.D,p.p,I.a],{enabled:[0,"enabled"],position:[1,"position"]},{ionInfinite:"ionInfinite"}),(e()(),p._40(-1,null,["\n    "])),(e()(),p._16(6,0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,S.b,S.a)),p._15(7,114688,null,0,w.a,[E.a,_.a],null,null),(e()(),p._40(-1,null,["\n"])),(e()(),p._40(-1,null,["\n\n"])),(e()(),p._11(16777216,null,null,1,null,c)),p._15(11,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n\n"])),(e()(),p._11(16777216,null,null,1,null,d)),p._15(14,16384,null,0,y.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.loadingMore&&"top"!=t.position);e(n,4,0,t.enabled&&!t.error&&!t.loadingMore,t.position),e(n,7,0);e(n,11,0,!t.loadingMore&&"top"==t.position);e(n,14,0,t.loadingMore)},function(e,n){e(n,6,0,p._29(n,7).inf.state)})}t.d(n,"a",function(){return A}),n.b=f;var p=t(1),h=t(46),m=t(43),_=t(7),g=t(27),v=t(19),y=t(8),b=t(112),P=t(95),E=t(312),C=t(24),I=t(32),S=t(1762),w=t(381),A=p._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function i(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(1,147456,null,0,f.a,[p.a,d.p,d.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,0,0,d._29(n,1)._hidden)})}function o(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"core-icon",[],null,null,null,h.b,h.a)),d._15(1,245760,null,0,m.a,[d.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.parent.parent.context.$implicit.icon)},null)}function r(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.title)})}function l(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"ion-badge",[["class","tab-badge"]],null,null,null,null,null)),d._15(1,16384,null,0,_.a,[p.a,d.p,d.K],{color:[0,"color"]},null),(e()(),d._40(2,null,["",""]))],function(e,n){e(n,1,0,n.parent.parent.context.$implicit.badgeStyle)},function(e,n){e(n,2,0,n.parent.parent.context.$implicit.badge)})}function s(e){return d._42(0,[(e()(),d._16(0,0,null,null,14,"ion-slide",[],null,null,null,g.b,g.a)),d._15(1,180224,null,0,v.a,[d.p,d.K,y.a],null,null),(e()(),d._40(-1,0,["\n                            "])),(e()(),d._16(3,0,null,0,10,"a",[["class","tab-slide"]],[[1,"aria-selected",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.selectTab(e.parent.context.index)&&i}return i},null,null)),(e()(),d._40(-1,null,["\n                                "])),(e()(),d._11(16777216,null,null,1,null,o)),d._15(6,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n                                "])),(e()(),d._11(16777216,null,null,1,null,r)),d._15(9,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n                                "])),(e()(),d._11(16777216,null,null,1,null,l)),d._15(12,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n                            "])),(e()(),d._40(-1,0,["\n                        "]))],function(e,n){e(n,6,0,n.parent.context.$implicit.icon);e(n,9,0,n.parent.context.$implicit.title);e(n,12,0,n.parent.context.$implicit.badge)},function(e,n){e(n,3,0,n.component.selected==n.parent.context.index)})}function a(e){return d._42(0,[(e()(),d._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),d._40(-1,null,["\n                        "])),(e()(),d._11(16777216,null,null,1,null,s)),d._15(3,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.show)},null)}function u(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(1,147456,null,0,f.a,[p.a,d.p,d.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,0,0,d._29(n,1)._hidden)})}function c(e){return d._42(0,[d._37(402653184,1,{originalTabsRef:0}),d._37(402653184,2,{topTabs:0}),d._37(402653184,3,{slides:0}),(e()(),d._16(3,0,null,null,39,"core-loading",[["class","core-loading-center"]],null,null,null,P.b,P.a)),d._15(4,638976,null,0,E.a,[C.a,d.p,I.a,S.a],{hideUntil:[0,"hideUntil"]},null),(e()(),d._40(-1,0,["\n    "])),(e()(),d._16(6,0,[[2,0],["topTabs",1]],0,30,"div",[["class","core-tabs-bar"]],[[8,"hidden",0]],null,null,null,null)),(e()(),d._40(-1,null,["\n        "])),(e()(),d._16(8,0,null,null,27,"ion-row",[["class","row"]],null,null,null,null,null)),d._15(9,16384,null,0,w.a,[],null,null),(e()(),d._40(-1,null,["\n            "])),(e()(),d._16(11,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.slidePrev()&&i}return i},null,null)),d._15(12,16384,null,0,A.a,[],null,null),(e()(),d._40(-1,null,["\n                "])),(e()(),d._11(16777216,null,null,1,null,i)),d._15(15,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n            "])),(e()(),d._40(-1,null,["\n            "])),(e()(),d._16(18,0,null,null,9,"ion-col",[["class","col"],["col-10",""],["no-padding",""]],null,null,null,null,null)),d._15(19,16384,null,0,A.a,[],null,null),(e()(),d._40(-1,null,["\n                "])),(e()(),d._16(21,0,null,null,5,"ion-slides",[],null,[[null,"ionSlideDidChange"]],function(e,n,t){var i=!0;if("ionSlideDidChange"===n){i=!1!==e.component.slideChanged()&&i}return i},T.b,T.a)),d._15(22,1228800,[[3,4]],0,y.a,[p.a,O.a,d.D,[2,k.a],d.p,d.K],{dir:[0,"dir"],slidesPerView:[1,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(e()(),d._40(-1,0,["\n                    "])),(e()(),d._11(16777216,null,0,1,null,a)),d._15(25,802816,null,0,b.j,[d.W,d.T,d.v],{ngForOf:[0,"ngForOf"]},null),(e()(),d._40(-1,0,["\n                "])),(e()(),d._40(-1,null,["\n            "])),(e()(),d._40(-1,null,["\n            "])),(e()(),d._16(29,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.slideNext()&&i}return i},null,null)),d._15(30,16384,null,0,A.a,[],null,null),(e()(),d._40(-1,null,["\n                "])),(e()(),d._11(16777216,null,null,1,null,u)),d._15(33,16384,null,0,b.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n            "])),(e()(),d._40(-1,null,["\n        "])),(e()(),d._40(-1,null,["\n    "])),(e()(),d._40(-1,0,["\n    "])),(e()(),d._16(38,0,[[1,0],["originalTabs",1]],0,3,"div",[["class","core-tabs-content-container"]],null,null,null,null,null)),(e()(),d._40(-1,null,["\n        "])),d._28(null,0),(e()(),d._40(-1,null,["\n    "])),(e()(),d._40(-1,0,["\n"])),(e()(),d._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.hideUntil);e(n,15,0,t.showPrevButton);e(n,22,0,t.direction,t.slidesShown);e(n,25,0,t.tabs);e(n,33,0,t.showNextButton)},function(e,n){var t=n.component;e(n,6,0,!t.tabs||t.numTabsShown<2)})}t.d(n,"a",function(){return D}),n.b=c;var d=t(1),f=t(47),p=t(7),h=t(131),m=t(121),_=t(146),g=t(1766),v=t(410),y=t(271),b=t(8),P=t(49),E=t(48),C=t(19),I=t(13),S=t(3),w=t(114),A=t(113),T=t(1767),O=t(15),k=t(37),D=d._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,null,null,null,null,null,null,null)),r._15(1,540672,null,0,l.r,[r.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),r._11(0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function o(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,i)),r._15(1,16384,null,0,l.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.loaded)},null)}t.d(n,"a",function(){return s}),n.b=o;var r=t(1),l=t(8),s=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(363);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(1),r=(t(9),t(13)),l=(t(41),t(53),t(40)),s=function(){function e(e,n,t,i,r,l){this.navCtrl=e,this.prefetchDelegate=n,this.domUtils=t,this.courseHelper=i,this.eventsProvider=r,this.sitesProvider=l,this.statusCalculated=!1,this.isDestroyed=!1,this.completionChanged=new o.r}return Object.defineProperty(e.prototype,"enabled",{set:function(e){this.downloadEnabled=e,this.module.handlerData.showDownloadButton&&this.downloadEnabled&&!this.statusCalculated&&(this.statusCalculated=!0,this.spinner=!0,this.prefetchDelegate.getModuleStatus(this.module,this.courseId).then(this.showStatus.bind(this)))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.module&&!this.module.handlerData&&(this.module.handlerData={}),this.module.handlerData.showDownloadButton&&(this.prefetchHandler=this.prefetchDelegate.getPrefetchHandlerFor(this.module),this.statusObserver=this.eventsProvider.on(r.a.PACKAGE_STATUS_CHANGED,function(n){n.componentId===e.module.id&&e.prefetchHandler&&n.component===e.prefetchHandler.component&&(e.downloadEnabled?e.showStatus(n.status):e.module.handlerData.updateStatus&&e.module.handlerData.updateStatus(n.status))},this.sitesProvider.getCurrentSiteId())),this.module.handlerData.a11yTitle=void 0!==this.module.handlerData.a11yTitle?this.module.handlerData.a11yTitle:this.module.handlerData.title},e.prototype.moduleClicked=function(e){!1!==this.module.uservisible&&this.module.handlerData.action&&this.module.handlerData.action(e,this.navCtrl,this.module,this.courseId)},e.prototype.buttonClicked=function(e,n){n&&n.action&&(e.preventDefault(),e.stopPropagation(),n.action(e,this.navCtrl,this.module,this.courseId))},e.prototype.download=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),this.prefetchHandler&&(this.spinner=!0,this.prefetchHandler.getDownloadSize(this.module,this.courseId,!0).then(function(e){return t.courseHelper.prefetchModule(t.prefetchHandler,t.module,e,t.courseId,n)}).catch(function(e){t.spinner=!1,t.isDestroyed||t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}))},e.prototype.showStatus=function(e){e&&(this.spinner=e===l.a.DOWNLOADING,this.showDownload=e===l.a.NOT_DOWNLOADED,this.showRefresh=e===l.a.OUTDATED||!this.prefetchDelegate.canCheckUpdates()&&e===l.a.DOWNLOADED,this.module.handlerData.updateStatus&&this.module.handlerData.updateStatus(e))},e.prototype.ngOnDestroy=function(){this.statusObserver&&this.statusObserver.off(),this.module&&this.module.handlerData&&this.module.handlerData.onDestroy&&this.module.handlerData.onDestroy(),this.isDestroyed=!0},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.E)())],e)}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(482),t(1374);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(477),t(1400),t(1367);var i=function(){return function(){}}()},function(e,n,t){"use strict";function i(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),d._40(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.name)})}function o(e){return d._42(0,[(e()(),d._16(0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),d._40(-1,null,["\n            "])),(e()(),d._11(16777216,null,null,1,null,i)),d._15(3,16384,null,0,f.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(4,null,["","\n        "]))],function(e,n){e(n,3,0,n.context.$implicit.name)},function(e,n){e(n,4,0,n.context.$implicit.extlist)})}function r(e){return d._42(0,[(e()(),d._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._15(1,1097728,null,3,h.a,[m.a,_.a,d.p,d.K,[2,g.a]],null,null),d._37(335544320,4,{contentLabel:0}),d._37(603979776,5,{_buttons:1}),d._37(603979776,6,{_icons:1}),d._15(5,16384,null,0,v.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),d._40(8,null,["",""])),d._32(131072,y.a,[b.a,d.i]),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(11,0,null,2,4,"ul",[["class","list-with-style"]],null,null,null,null,null)),(e()(),d._40(-1,null,["\n        "])),(e()(),d._11(16777216,null,null,1,null,o)),d._15(14,802816,null,0,f.j,[d.W,d.T,d.v],{ngForOf:[0,"ngForOf"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,14,0,n.component.fileTypes.info)},function(e,n){e(n,8,0,d._41(n,8,0,d._29(n,9).transform("core.fileuploader.filesofthesetypes")))})}function l(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"core-file",[],null,[[null,"onDelete"]],function(e,n,t){var i=!0;if("onDelete"===n){i=!1!==e.component.delete(e.parent.context.index,!0)&&i}return i},P.b,P.a)),d._15(1,245760,null,0,E.a,[C.a,I.a,S.a,w.a,A.a,T.a,O.a,k.a,D.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],canDelete:[3,"canDelete"],canDownload:[4,"canDownload"]},{onDelete:"onDelete"})],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.componentId,!0,!n.parent.context.$implicit.offline)},null)}function s(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"core-local-file",[],null,[[null,"onDelete"],[null,"onRename"]],function(e,n,t){var i=!0,o=e.component;if("onDelete"===n){i=!1!==o.delete(e.parent.context.index,!1)&&i}if("onRename"===n){i=!1!==o.renamed(e.parent.context.index,t)&&i}return i},x.b,x.a)),d._15(1,114688,null,0,M.a,[O.a,I.a,b.a,D.a,U.a,S.a,N.a],{file:[0,"file"],manage:[1,"manage"]},{onDelete:"onDelete",onRename:"onRename"})],function(e,n){e(n,1,0,n.parent.context.$implicit,!0)},null)}function a(e){return d._42(0,[(e()(),d._16(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),d._40(-1,null,["\n    "])),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,l)),d._15(4,16384,null,0,f.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n    "])),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,s)),d._15(8,16384,null,0,f.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"]))],function(e,n){e(n,4,0,!n.context.$implicit.name||n.context.$implicit.offline);e(n,8,0,n.context.$implicit.name&&!n.context.$implicit.offline)},null)}function u(e){return d._42(0,[(e()(),d._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._15(1,1097728,null,3,h.a,[m.a,_.a,d.p,d.K,[2,g.a]],null,null),d._37(335544320,7,{contentLabel:0}),d._37(603979776,8,{_buttons:1}),d._37(603979776,9,{_icons:1}),d._15(5,16384,null,0,v.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,2,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.add()&&i}return i},R.b,R.a)),d._15(8,1097728,[[8,4]],0,F.a,[[8,""],_.a,d.p,d.K],{block:[0,"block"]},null),(e()(),d._40(-1,0,["\n        "])),(e()(),d._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(11,147456,null,0,L.a,[_.a,d.p,d.K],{name:[0,"name"]},null),(e()(),d._40(12,0,["\n        ","\n    "])),d._32(131072,y.a,[b.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"");e(n,11,0,"add")},function(e,n){e(n,10,0,d._29(n,11)._hidden);e(n,12,0,d._41(n,12,0,d._29(n,13).transform("core.fileuploader.addfiletext")))})}function c(e){return d._42(0,[(e()(),d._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,p.b,p.a)),d._15(1,1097728,null,3,h.a,[m.a,_.a,d.p,d.K,[2,g.a]],null,null),d._37(335544320,1,{contentLabel:0}),d._37(603979776,2,{_buttons:1}),d._37(603979776,3,{_icons:1}),d._15(5,16384,null,0,v.a,[],null,null),(e()(),d._40(6,2,["\n    ","\n    "])),d._33(7,{size:0,attachments:1}),d._33(8,{$a:0}),d._32(131072,y.a,[b.a,d.i]),(e()(),d._16(10,0,null,2,1,"span",[["class","core-mark-required"]],null,null,null,H.b,H.a)),d._15(11,4308992,null,0,K.a,[d.p,b.a,D.a,I.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),d._40(-1,2,["\n"])),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,r)),d._15(15,16384,null,0,f.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,a)),d._15(18,802816,null,0,f.j,[d.W,d.T,d.v],{ngForOf:[0,"ngForOf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,u)),d._15(22,16384,null,0,f.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,11,0,t.required);e(n,15,0,t.fileTypes&&t.fileTypes.mimetypes&&t.fileTypes.mimetypes.length);e(n,18,0,t.files);e(n,22,0,t.unlimitedFiles||t.maxSubmissions>=0&&t.files&&t.files.length<t.maxSubmissions)},function(e,n){var t=n.component;e(n,6,0,d._41(n,6,0,d._29(n,9).transform("core.maxsizeandattachments",e(n,8,0,e(n,7,0,t.maxSizeReadable,t.maxSubmissionsReadable)))))})}t.d(n,"a",function(){return W}),n.b=c;var d=t(1),f=t(8),p=t(31),h=t(21),m=t(20),_=t(7),g=t(28),v=t(33),y=t(27),b=t(19),P=t(203),E=t(172),C=t(2),I=t(3),S=t(5),w=t(17),A=t(10),T=t(132),O=t(65),k=t(13),D=t(11),x=t(347),M=t(254),U=t(50),N=t(25),R=t(46),F=t(43),L=t(47),H=t(83),K=t(76),W=d._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,6,"progress",[["max","100"]],[[8,"value",0]],null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(4,0,null,null,3,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["class","progress-bar-fallback"],["role","progressbar"]],[[1,"aria-valuenow",0]],null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(6,0,null,null,0,"span",[],[[4,"width",null]],null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(10,0,null,null,3,"span",[["class","core-progress-text"]],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),r._33(12,{$a:0}),r._32(131072,l.a,[s.a,r.i]),(e()(),r._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.progress);e(n,4,0,t.progress);e(n,6,0,t.width);e(n,11,0,r._41(n,11,0,r._29(n,13).transform("core.percentagenumber",e(n,12,0,t.text))))})}function o(e){return r._42(2,[(e()(),r._11(16777216,null,null,1,null,i)),r._15(1,16384,null,0,a.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.progress>=0)},null)}t.d(n,"a",function(){return u}),n.b=o;var r=t(1),l=t(27),s=t(19),a=t(8),u=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(4),function(){function e(e,n){this.translate=e,this.utils=n,this.autocorrect="on",this.spellcheck=!0,this.lengthCheck=3,this.showClear=!0,this.disabled=!1,this.searched=!1,this.searchText="",this.onSubmit=new i.r,this.onClear=new i.r}return e.prototype.ngOnInit=function(){this.searchLabel=this.searchLabel||this.translate.instant("core.search"),this.placeholder=this.placeholder||this.translate.instant("core.search"),this.spellcheck=this.utils.isTrueOrOne(this.spellcheck),this.showClear=this.utils.isTrueOrOne(this.showClear)},e.prototype.submitForm=function(e){e.preventDefault(),e.stopPropagation(),this.searchText.length<this.lengthCheck||(this.searched=!0,this.onSubmit.emit(this.searchText))},e.prototype.clearForm=function(){this.searched=!1,this.searchText="",this.onClear.emit()},e}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(137),o=function(){function e(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmaMessageOutputAirnotifier:",this.logger=e.getInstance("AddonMessageOutputAirnotifier")}return e.prototype.enableDevice=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("message_airnotifier_enable_device",{deviceid:e,enable:n?1:0}).then(function(e){if(!e.success)return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0].message):Promise.reject(null)})})},e.prototype.getUserDevicesCacheKey=function(){return this.ROOT_CACHE_KEY+"userDevices"},e.prototype.getUserDevices=function(e){var n=this;return this.logger.debug("Get user devices"),this.sitesProvider.getSite(e).then(function(e){var t={appid:i.a.app_id},o={cacheKey:n.getUserDevicesCacheKey()};return e.read("message_airnotifier_get_user_devices",t,o).then(function(e){return e.devices})})},e.prototype.invalidateUserDevices=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getUserDevicesCacheKey())})},e.prototype.isEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_enable_device")&&this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_get_user_devices")},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(126),r=(t(346),t(147),t(4),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,"AddonMessagesSync",n,t,i,r,l,o,f)||this;return p.messagesOffline=s,p.eventsProvider=a,p.messagesProvider=u,p.userProvider=c,p.utils=d,p}return Object(i.__extends)(n,e),t=n,n.prototype.getSyncId=function(e,n){return e?"conversationid:"+e:"userid:"+n},n.prototype.syncAllDiscussions=function(e,n){void 0===n&&(n=!1);return this.syncOnSites("all discussions"+(n?" (Only offline)":""),this.syncAllDiscussionsFunc.bind(this),[n],e)},n.prototype.syncAllDiscussionsFunc=function(e,n){var i=this;void 0===n&&(n=!1);return(n?this.messagesOffline.getAllDeviceOfflineMessages(e):this.messagesOffline.getAllMessages(e)).then(function(n){var o=[],r=[],l=[];return n.forEach(function(e){e.conversationid?-1==r.indexOf(e.conversationid)&&r.push(e.conversationid):-1==o.indexOf(e.touserid)&&o.push(e.touserid)}),r.forEach(function(n){l.push(i.syncDiscussion(n,void 0,e).then(function(o){void 0!==o&&i.eventsProvider.trigger(t.AUTO_SYNCED,{conversationId:n,warnings:o},e)}))}),o.forEach(function(n){l.push(i.syncDiscussion(void 0,n,e).then(function(o){void 0!==o&&i.eventsProvider.trigger(t.AUTO_SYNCED,{userId:n,warnings:o},e)}))}),Promise.all(l)})},n.prototype.syncDiscussion=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getSyncId(e,n),r=this.messagesProvider.isGroupMessagingEnabled();if(this.isSyncing(o,t))return this.getOngoingSync(o,t);var l=[];this.logger.debug(e?"Try to sync conversation '"+e+"'":"Try to sync discussion with user '"+n+"'");var s;return s=e?this.messagesOffline.getConversationMessages(e,t):this.messagesOffline.getMessages(n,t),s=s.then(function(o){if(!o.length)return[];if(!i.appProvider.isOnline())return i.messagesOffline.setMessagesDeviceOffline(o,!0),Promise.reject(null);var l=Promise.resolve(),s=[];return(o=i.messagesProvider.sortMessages(o)).forEach(function(a,u){l=l.then(function(){return(e?i.messagesProvider.sendMessageToConversationOnline(e,a.text,t):i.messagesProvider.sendMessageOnline(n,a.smallmessage,t)).catch(function(e){if(!i.utils.isWebServiceError(e))return i.appProvider.isOnline()&&i.messagesOffline.setMessagesDeviceOffline(o,!1),Promise.reject(e);-1==s.indexOf(e)&&s.push(e)}).then(function(){return e?i.messagesOffline.deleteConversationMessage(e,a.text,a.timecreated,t):i.messagesOffline.deleteMessage(n,a.smallmessage,a.timecreated,t)}).then(function(){if(!r&&u<o.length-1)return new Promise(function(e,n){setTimeout(e,1e3)})})})}),l}).then(function(t){return i.handleSyncErrors(e,n,t,l)}).then(function(){return l}),this.addOngoingSync(o,s,t)},n.prototype.handleSyncErrors=function(e,n,t,i){var o=this;if(t&&t.length)return e?this.messagesProvider.getConversation(e,!1,!1).catch(function(){return{}}).then(function(n){t.forEach(function(t){i.push(o.translate.instant("addon.messages.warningconversationmessagenotsent",{conversation:n.name?n.name:e,error:o.textUtils.getErrorMessageFromError(t)}))})}):this.userProvider.getProfile(n,void 0,!0).catch(function(){return{}}).then(function(e){t.forEach(function(t){i.push(o.translate.instant("addon.messages.warningmessagenotsent",{user:e.fullname?e.fullname:n,error:o.textUtils.getErrorMessageFromError(t)}))})})},n.prototype.waitForSyncConversation=function(e,n,t){var i=this.getSyncId(e,n);return this.waitForSync(i,t)},n.AUTO_SYNCED="addon_messages_autom_synced",n;var t}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var i=t(1),o=(t(9),t(4),t(13)),r=t(16),l=(t(188),function(){function e(e,n,t,l,s,a,u,c,d,f){var p=this;this.cfDelegate=e,this.injector=t,this.courseHelper=l,this.domUtils=s,this.sitesProvider=u,this.content=c,this.modalCtrl=f,this.canLoadMore=!1,this.showSectionId=0,this.data={},this.allSectionsId=r.a.ALL_SECTIONS_ID,this.stealthModulesSectionId=r.a.STEALTH_MODULES_SECTION_ID,this.selectOptions={},this.selectOptions.title=n.instant("core.course.sections"),this.completionChanged=new i.r,this.data.coreCourseFormatComponent=this,this.sectionStatusObserver=a.on(o.a.SECTION_STATUS_CHANGED,function(e){if(p.downloadEnabled&&p.sections&&p.sections.length&&p.course&&e.sectionId&&e.courseId==p.course.id){var n=p.courseHelper.getSectionDownloadId({id:e.sectionId});if(d.isBeingDownloaded(n))return;for(var t,i=0;i<p.sections.length;i++){var o=p.sections[i];if(o.id===e.sectionId){t=o;break}}if(!t)return;p.courseHelper.calculateSectionStatus(t,p.course.id,!1).then(function(){t.isDownloading&&!d.isBeingDownloaded(n)&&p.prefetch(t,!1)})}},this.sitesProvider.getCurrentSiteId())}return n=e,e.prototype.ngOnInit=function(){this.displaySectionSelector=this.cfDelegate.displaySectionSelector(this.course)},e.prototype.ngOnChanges=function(e){var n=this;if(this.setInputData(),e.course&&this.getComponents(),e.sections&&this.sections)if(this.selectedSection){var t=void 0;for(i=0;i<this.sections.length;i++){if(this.compareSections(o=this.sections[i],this.selectedSection)){t=o;break}}t?this.sectionChanged(t):this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){n.sectionChanged(e)})}else{if(this.initialSectionId||this.initialSectionNumber)for(var i=0;i<this.sections.length;i++){var o;if((o=this.sections[i]).id&&o.id==this.initialSectionId||o.section&&o.section==this.initialSectionNumber){this.canViewSection(o)&&(this.loaded=!0,this.sectionChanged(o));break}}this.loaded||this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){n.loaded=!0,n.sectionChanged(e)})}e.downloadEnabled&&this.downloadEnabled&&this.calculateSectionsStatus(!1)},e.prototype.setInputData=function(){this.data.course=this.course,this.data.sections=this.sections,this.data.initialSectionId=this.initialSectionId,this.data.initialSectionNumber=this.initialSectionNumber,this.data.downloadEnabled=this.downloadEnabled,this.data.moduleId=this.moduleId,this.data.completionChanged=this.completionChanged},e.prototype.getComponents=function(){var e=this;this.course&&this.course.format!=this.lastCourseFormat&&(this.lastCourseFormat=this.course.format,this.cfDelegate.getCourseFormatComponent(this.injector,this.course).then(function(n){e.courseFormatComponent=n}),this.cfDelegate.getCourseSummaryComponent(this.injector,this.course).then(function(n){e.courseSummaryComponent=n}),this.cfDelegate.getSectionSelectorComponent(this.injector,this.course).then(function(n){e.sectionSelectorComponent=n}),this.cfDelegate.getSingleSectionComponent(this.injector,this.course).then(function(n){e.singleSectionComponent=n}),this.cfDelegate.getAllSectionsComponent(this.injector,this.course).then(function(n){e.allSectionsComponent=n}))},e.prototype.showSectionSelector=function(){var e=this,n=this.modalCtrl.create("CoreCourseSectionSelectorPage",{course:this.course,sections:this.sections,selected:this.selectedSection});n.onDidDismiss(function(n){n&&e.sectionChanged(n)}),n.present()},e.prototype.sectionChanged=function(e){var n=this,t=this.selectedSection;if(this.selectedSection=e,this.data.section=this.selectedSection,e.id!=this.allSectionsId){var i=this.sections.findIndex(function(e,t){return n.compareSections(e,n.selectedSection)}),o=void 0;for(o=i-1;o>=1&&!this.canViewSection(this.sections[o]);o--);for(this.previousSection=o>=1?this.sections[o]:null,o=i+1;o<this.sections.length&&!this.canViewSection(this.sections[o]);o++);this.nextSection=o<this.sections.length?this.sections[o]:null}else this.previousSection=null,this.nextSection=null,this.canLoadMore=!1,this.showSectionId=0,this.showMoreActivities();this.moduleId&&void 0===t?setTimeout(function(){n.domUtils.scrollToElementBySelector(n.content,"#core-course-module-"+n.moduleId)},200):this.domUtils.scrollToTop(this.content,0)},e.prototype.compareSections=function(e,n){return e&&n?e.id===n.id:e===n},e.prototype.calculateSectionsStatus=function(e){this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,e).catch(function(){})},e.prototype.prefetch=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),n.isCalculating=!0,this.courseHelper.confirmDownloadSizeSection(this.course.id,n,this.sections).then(function(){t.prefetchSection(n,!0)},function(e){e&&t.domUtils.showErrorModal(e)}).finally(function(){n.isCalculating=!1})},e.prototype.prefetchSection=function(e,n){var t=this;this.courseHelper.prefetchSection(e,this.course.id,this.sections).catch(function(e){n&&t.domUtils.showErrorModalDefault(e,"core.course.errordownloadingsection",!0)})},e.prototype.doRefresh=function(e,n,t){var i=[];return this.dynamicComponents.forEach(function(o){i.push(Promise.resolve(o.callComponentFunction("doRefresh",[e,n,t])))}),Promise.all(i)},e.prototype.showMoreActivities=function(e){this.canLoadMore=!1;var t,i=0;for(t=this.showSectionId+1;t<this.sections.length&&!(this.sections[t].hasContent&&this.sections[t].modules&&(i+=this.sections[t].modules.reduce(function(e,n){return 0!==n.visibleoncoursepage?e+1:e},0))>=n.LOAD_MORE_ACTIVITIES);t++);if(this.showSectionId=t,this.canLoadMore=t<this.sections.length,this.canLoadMore){var o=!1;for(t++;t<this.sections.length;t++)if(this.sections[t].hasContent&&this.sections[t].modules&&this.sections[t].modules.length>0){o=!0;break}this.canLoadMore=o}e&&e()},e.prototype.ngOnDestroy=function(){this.sectionStatusObserver&&this.sectionStatusObserver.off()},e.prototype.ionViewDidEnter=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidEnter")})},e.prototype.ionViewDidLeave=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidLeave")})},e.prototype.canViewSection=function(e){return!1!==e.uservisible&&!e.hiddenbynumsections&&e.id!=r.a.STEALTH_MODULES_SECTION_ID},e.LOAD_MORE_ACTIVITIES=20,e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(244)),l=t(234),s=(t(362),t(542)),a=function(e){function n(n,t,i,o,r,s,a){var u=e.call(this,n)||this;return u.bookProvider=t,u.courseProvider=i,u.appProvider=o,u.prefetchDelegate=r,u.popoverCtrl=s,u.content=a,u.component=l.a.COMPONENT,u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadContent()},n.prototype.showToc=function(e){var n=this,t=this.popoverCtrl.create(s.a,{chapters:this.chapters});t.onDidDismiss(function(e){n.changeChapter(e)}),t.present({ev:e})},n.prototype.changeChapter=function(e){e&&e!=this.currentChapter&&(this.loaded=!1,this.refreshIcon="spinner",this.loadChapter(e))},n.prototype.invalidateContent=function(){return this.bookProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.fetchContent=function(e){var n=this,t=[],i=!1;return t.push(this.bookProvider.getBook(this.courseId,this.module.id).then(function(e){n.dataRetrieved.emit(e),n.description=e.intro||n.description}).catch(function(){})),t.push(this.prefetchDelegate.download(this.module,this.courseId).catch(function(){if(i=!0,!n.module.contents.length)return n.courseProvider.loadModuleContents(n.module,n.courseId)})),Promise.all(t).then(function(){return n.contentsMap=n.bookProvider.getContentsMap(n.module.contents),n.chapters=n.bookProvider.getTocList(n.module.contents),void 0===n.currentChapter&&(n.currentChapter=n.bookProvider.getFirstChapter(n.chapters)),n.loadChapter(n.currentChapter).then(function(){i&&n.appProvider.isOnline()&&n.domUtils.showErrorModal("core.errordownloadingsomefiles",!0),n.fillContextMenu(e)}).catch(function(){})})},n.prototype.loadChapter=function(e){var n=this;return this.currentChapter=e,this.domUtils.scrollToTop(this.content),this.bookProvider.getChapterContent(this.contentsMap,e,this.module.id).then(function(t){n.chapterContent=t,n.previousChapter=n.bookProvider.getPreviousChapter(n.chapters,e),n.nextChapter=n.bookProvider.getNextChapter(n.chapters,e),n.bookProvider.logView(n.module.instance,e).then(function(){n.nextChapter||n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})}).catch(function(e){return n.domUtils.showErrorModalDefault(e,"addon.mod_book.errorchapter",!0),Promise.reject(null)}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},n=Object(i.__decorate)([Object(i.__param)(6,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(9),t(139)),r=t(344),l=function(e){function n(n,t,i,o){var l=e.call(this,n)||this;return l.chatProvider=t,l.timeUtils=i,l.navCtrl=o,l.component=r.a.COMPONENT,l.moduleName="chat",l}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){n.chatProvider.logView(n.chat.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.chatProvider.getChat(this.courseId,this.module.id).then(function(n){i.chat=n,i.description=n.intro||n.description;var t=i.timeUtils.timestamp(),o=n.chattime-t;i.chatInfo=!!(n.chattime&&n.schedule>0&&o>0)&&{date:i.timeUtils.userDate(1e3*n.chattime),fromnow:i.timeUtils.formatTime(o)},i.dataRetrieved.emit(n),i.fillContextMenu(e)})},n.prototype.enterChat=function(){this.navCtrl.push("AddonModChatChatPage",{chatId:this.chat.id,courseId:this.courseId,title:this.chat.name||this.moduleName})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(258),s=(t(259),t(260)),a=function(e){function n(n,t,i,o,r,a){var u=e.call(this,n,i)||this;return u.choiceProvider=t,u.choiceOffline=o,u.choiceSync=r,u.timeUtils=a,u.component=l.a.COMPONENT,u.moduleName="choice",u.options=[],u.choiceNotOpenYet=!1,u.choiceClosed=!1,u.canEdit=!1,u.canDelete=!1,u.canSeeResults=!1,u.data=[],u.labels=[],u.results=[],u.syncEventName=s.a.AUTO_SYNCED,u.hasAnsweredOnline=!1,u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.choice&&n.choiceProvider.logView(n.choice.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.choiceProvider.invalidateChoiceData(this.courseId)),this.choice&&(e.push(this.choiceProvider.invalidateOptions(this.choice.id)),e.push(this.choiceProvider.invalidateResults(this.choice.id))),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.choice||e.choiceId!=this.choice.id||e.userId!=this.userId)&&(this.domUtils.scrollToTop(this.content),!0)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.now=(new Date).getTime(),this.choiceProvider.getChoice(this.courseId,this.module.id).then(function(e){if(i.choice=e,i.choice.timeopen=1e3*parseInt(e.timeopen),i.choice.openTimeReadable=i.timeUtils.userDate(e.timeopen),i.choice.timeclose=1e3*parseInt(e.timeclose),i.choice.closeTimeReadable=i.timeUtils.userDate(e.timeclose),i.description=e.intro||e.description,i.choiceNotOpenYet=e.timeopen&&e.timeopen>i.now,i.choiceClosed=e.timeclose&&e.timeclose<=i.now,i.dataRetrieved.emit(e),n)return i.syncActivity(t).then(function(e){if(e)return i.choiceProvider.getChoice(i.courseId,i.module.id).then(function(e){i.choice=e})})}).then(function(){return i.choiceOffline.hasResponse(i.choice.id)}).then(function(e){return i.hasOffline=e,i.fetchOptions(e).then(function(){return i.fetchResults()})}).then(function(){i.fillContextMenu(e)})},n.prototype.fetchOptions=function(e){var n=this;return this.choiceProvider.getOptions(this.choice.id).then(function(t){n.hasAnsweredOnline=t.some(function(e){return e.checked}),(e?n.choiceOffline.getResponse(n.choice.id).then(function(e){var n={};return t.forEach(function(e){n[e.id]=e}),e.deleting?e.responses.length>0?e.responses.forEach(function(e){n[e]&&n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}):Object.keys(n).forEach(function(e){n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}):(Object.keys(n).forEach(function(e){n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}),e.responses.forEach(function(e){n[e]&&(n[e].checked=!0,n[e].countanswers++)})),Object.keys(n).map(function(e){return n[e]})}):Promise.resolve(t)).then(function(e){var t=n.isChoiceOpen(),i=!1;if(n.selectedOption={id:-1},e.forEach(function(e){e.checked&&(i=!0,n.choice.allowmultiple||(n.selectedOption.id=e.id))}),n.canEdit=t&&(n.choice.allowupdate||!i),n.canDelete=t&&n.choice.allowupdate&&i,n.options=e,n.canEdit)switch(n.choice.showresults){case l.a.RESULTS_NOT:n.publishInfo="addon.mod_choice.publishinfonever";break;case l.a.RESULTS_AFTER_ANSWER:n.publishInfo=n.choice.publish==l.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonafter":"addon.mod_choice.publishinfofullafter";break;case l.a.RESULTS_AFTER_CLOSE:n.publishInfo=n.choice.publish==l.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonclose":"addon.mod_choice.publishinfofullclose";break;default:n.publishInfo=""}})})},n.prototype.fetchResults=function(){var e=this;return this.choiceNotOpenYet?(this.canSeeResults=!1,Promise.resolve()):this.choiceProvider.getResults(this.choice.id).then(function(n){var t=!1;e.data=[],e.labels=[],n.forEach(function(n){n.numberofuser>0&&(t=!0),n.percentageamount=parseFloat(n.percentageamount).toFixed(1),e.data.push(n.numberofuser),e.labels.push(n.text)}),e.canSeeResults=t||e.choiceProvider.canStudentSeeResults(e.choice,e.hasAnsweredOnline),e.results=n})},n.prototype.isChoiceOpen=function(){return(0===this.choice.timeopen||this.choice.timeopen<=this.now)&&(0===this.choice.timeclose||this.choice.timeclose>this.now)},n.prototype.canSave=function(){return this.choice.allowmultiple?this.options.some(function(e){return e.checked}):-1!==this.selectedOption.id},n.prototype.save=function(){var e=this;(this.choice.allowupdate?Promise.resolve():this.domUtils.showConfirm(this.translate.instant("core.areyousure"))).then(function(){var n=[];e.choice.allowmultiple?e.options.forEach(function(e){e.checked&&n.push(e.id)}):n.push(e.selectedOption.id);var t=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.submitResponse(e.choice.id,e.choice.name,e.courseId,n).then(function(){return e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata),e.domUtils.scrollToTop(e.content),e.refreshContent(!1)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){t.dismiss()})})},n.prototype.delete=function(){var e=this;this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var n=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.deleteResponses(e.choice.id,e.choice.name,e.courseId).then(function(){return e.domUtils.scrollToTop(e.content),e.refreshContent(!1)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){n.dismiss()})}).catch(function(){})},n.prototype.sync=function(){return this.choiceSync.syncChoice(this.choice.id,this.userId)},n.prototype.hasSyncSucceed=function(e){return e.updated},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.sitesProvider=e,this.ROOT_CACHE_KEY="CoreCoursesDashboard:"}return e.prototype.getDashboardBlocksCacheKey=function(e){return void 0===e&&(e=0),this.ROOT_CACHE_KEY+"blocks:"+e},e.prototype.getDashboardBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var i={},o={cacheKey:t.getDashboardBlocksCacheKey(e)};return e&&(i.userid=e),n.read("core_block_get_dashboard_blocks",i,o).then(function(e){return e.blocks||[]})})},e.prototype.invalidateDashboardBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDashboardBlocksCacheKey(e))})},e.prototype.isAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_block_get_dashboard_blocks")})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),t(152),t(161),t(35),function(){function e(e,n,t,i,o,r,l){this.gradesProvider=e,this.domUtils=n,this.gradesHelper=i,this.navCtrl=o,this.appProvider=r,this.svComponent=l,this.gradesLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.fetchData().then(function(){return e.gradeId&&e.gotoGrade(e.gradeId),e.gradesProvider.logCourseGradesView(e.courseId,e.userId).catch(function(){})}).finally(function(){e.gradesLoaded=!0})},e.prototype.fetchData=function(e){var n=this;return void 0===e&&(e=!1),this.gradesProvider.getCourseGradesTable(this.courseId,this.userId).then(function(e){n.gradesTable=n.gradesHelper.formatGradesTable(e)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error loading grades")})},e.prototype.refreshGrades=function(e){var n=this;this.gradesProvider.invalidateCourseGradesData(this.courseId,this.userId).finally(function(){n.fetchData().finally(function(){e.complete()})})},e.prototype.gotoGrade=function(e){if(e){this.gradeId=e;var n=void 0,t=void 0;this.svComponent?"CoreGradesCourseSplitPage"==this.svComponent.getMasterNav().getActive().component.name?(n=this.svComponent,t="CoreGradesGradePage"):(n=this.svComponent.getMasterNav(),t="CoreGradesCourseSplitPage"):this.appProvider.isWide()?(n=this.navCtrl,t="CoreGradesCourseSplitPage"):(n=this.navCtrl,t="CoreGradesGradePage"),n.push(t,{courseId:this.courseId,userId:this.userId,gradeId:e})}},e=Object(i.__decorate)([Object(i.__param)(4,Object(o.E)()),Object(i.__param)(6,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(13),o=t(180),r=(t.n(o),function(){function e(e,n,t,i,o,r,l){this.fileProvider=n,this.textUtils=i,this.mimeUtils=o,this.sitesProvider=r,this.eventsProvider=l,this.SHARED_FILES_TABLE="shared_files",this.tableSchema={name:this.SHARED_FILES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0}]},this.logger=e.getInstance("CoreSharedFilesProvider"),this.appDB=t.getDB(),this.appDB.createTableFromSchema(this.tableSchema)}return n=e,e.prototype.checkIOSNewFiles=function(){var e=this;return this.logger.debug("Search for new files on iOS"),this.fileProvider.getDirectoryContents("Inbox").then(function(n){if(n.length>0){var t,i=[];return n.forEach(function(n){var o=e.getFileId(n);i.push(e.isFileTreated(o).then(function(){e.deleteInboxFile(n)}).catch(function(){e.logger.debug("Found new file "+n.name+" shared with the app."),t||(t=n)}))}),Promise.all(i).then(function(){var n;return t?(n=e.getFileId(t),e.markAsTreated(n).then(function(){return e.logger.debug('File marked as "treated": '+t.name),t})):Promise.reject(null)})}return Promise.reject(null)})},e.prototype.deleteInboxFile=function(e){var n=this;return this.logger.debug("Delete inbox file: "+e.name),this.fileProvider.removeFileByFileEntry(e).catch(function(){}).then(function(){return n.unmarkAsTreated(n.getFileId(e)).then(function(){n.logger.debug('"Treated" mark removed from file: '+e.name)}).catch(function(t){return n.logger.debug('Error deleting "treated" mark from file: '+e.name,t),Promise.reject(t)})})},e.prototype.getFileId=function(e){return o.Md5.hashAsciiStr(e.name)},e.prototype.getSiteSharedFiles=function(e,n,t){var i=this,o=this.getSiteSharedFilesDirPath(e);return n&&(o=this.textUtils.concatenatePaths(o,n)),this.fileProvider.getDirectoryContents(o).then(function(e){return t&&(e=e.filter(function(e){var n=i.mimeUtils.getFileExtension(e.name),o=i.mimeUtils.getMimeType(n);return!o||t.indexOf(o)>-1})),e}).catch(function(){return[]})},e.prototype.getSiteSharedFilesDirPath=function(e){return e=e||this.sitesProvider.getCurrentSiteId(),this.fileProvider.getSiteFolder(e)+"/"+n.SHARED_FILES_FOLDER},e.prototype.isFileTreated=function(e){return this.appDB.getRecord(this.SHARED_FILES_TABLE,{id:e})},e.prototype.markAsTreated=function(e){var n=this;return this.isFileTreated(e).catch(function(){return n.appDB.insertRecord(n.SHARED_FILES_TABLE,{id:e})})},e.prototype.storeFileInSite=function(e,n,t){var o=this;if(t=t||this.sitesProvider.getCurrentSiteId(),!e||!t)return Promise.reject(null);n=n||e.name;var r=this.getSiteSharedFilesDirPath(t),l=this.textUtils.concatenatePaths(r,n);return this.fileProvider.createDir(r).then(function(){return o.fileProvider.moveExternalFile(e.toURL(),l).then(function(e){return o.eventsProvider.trigger(i.a.FILE_SHARED,{siteId:t,name:n}),e})})},e.prototype.unmarkAsTreated=function(e){return this.appDB.deleteRecords(this.SHARED_FILES_TABLE,{id:e})},e.SHARED_FILES_FOLDER="sharedfiles",e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(460);var i=function(){function e(e,n,t,i,o,r,l,s,a,u,c,d){this.alertCtrl=n,this.translate=t,this.utils=i,this.sitesProvider=o,this.modalCtrl=r,this.fileUploaderProvider=l,this.initDelegate=s,this.sharedFilesProvider=a,this.domUtils=u,this.fileProvider=c,this.appProvider=d,this.logger=e.getInstance("CoreSharedFilesHelperProvider")}return e.prototype.askRenameReplace=function(e,n){var t=this.utils.promiseDefer();return this.alertCtrl.create({title:this.translate.instant("core.sharedfiles.sharedfiles"),message:this.translate.instant("core.sharedfiles.chooseactionrepeatedfile",{$a:n}),buttons:[{text:this.translate.instant("core.sharedfiles.rename"),handler:function(){t.resolve(n)}},{text:this.translate.instant("core.sharedfiles.replace"),handler:function(){t.resolve(e)}}]}).present(),t.promise},e.prototype.goToChooseSite=function(e,n){this.appProvider.getRootNavController().push("CoreSharedFilesChooseSitePage",{filePath:e,isInbox:n})},e.prototype.isChoosingSite=function(){var e=this.appProvider.getRootNavController();return e&&"CoreSharedFilesChooseSitePage"==e.getActive().id},e.prototype.pickSharedFile=function(e){var n=this;return new Promise(function(t,i){var o=n.modalCtrl.create("CoreSharedFilesListPage",{mimetypes:e,isModal:!0,pick:!0});o.present(),o.onDidDismiss(function(o){if(o){var r=n.fileUploaderProvider.isInvalidMimetype(e,o.fullPath);r?i(r):t({path:o.fullPath,treated:!1})}else i()})})},e.prototype.removeSharedFile=function(e,n){return n?this.sharedFilesProvider.deleteInboxFile(e):this.fileProvider.removeFileByFileEntry(e)},e.prototype.searchIOSNewSharedFiles=function(e){var n=this;return this.initDelegate.ready().then(function(){if(n.isChoosingSite())return Promise.reject(null);return(e?n.fileProvider.getExternalFile(e):n.sharedFilesProvider.checkIOSNewFiles()).then(function(t){return n.sitesProvider.getSitesIds().then(function(i){return i.length?1==i.length?n.storeSharedFileInSite(t,i[0],!e):void(n.isChoosingSite()||n.goToChooseSite(t.toURL(),!e)):(n.domUtils.showErrorModal("core.sharedfiles.errorreceivefilenosites",!0),n.removeSharedFile(t,!e))})}).catch(function(t){t&&n.logger.error("Error searching iOS new shared files",t,e)})})},e.prototype.storeSharedFileInSite=function(e,n,t){var i=this;n=n||this.sitesProvider.getCurrentSiteId();var o=this.sharedFilesProvider.getSiteSharedFilesDirPath(n);return this.fileProvider.getUniqueNameInFolder(o,e.name).then(function(n){return n.toLowerCase()==e.name.toLowerCase()?n:i.askRenameReplace(e.name,n)}).then(function(o){return i.sharedFilesProvider.storeFileInSite(e,o,n).catch(function(e){i.domUtils.showErrorModal(e||"Error moving file.")}).finally(function(){i.removeSharedFile(e,t),i.domUtils.showAlertTranslated("core.success","core.sharedfiles.successstorefile")})})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(135),s=(t(278),t(262),t(149),function(e){function n(n,t,i,o,r,s,a,u,c){var d=e.call(this,n,i)||this;return d.feedbackProvider=t,d.feedbackOffline=o,d.groupsProvider=r,d.feedbackSync=s,d.navCtrl=a,d.feedbackHelper=u,d.timeUtils=c,d.tab="overview",d.group=0,d.moduleName="feedback",d.access={canviewreports:!1,canviewanalysis:!1,isempty:!0},d.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},d.overview={timeopen:0,openTimeReadable:"",timeclose:0,closeTimeReadable:""},d.warning="",d.tabsLoaded={overview:!1,analysis:!1},d.showTabs=!1,d.tabsReady=!1,d.submitObserver=d.eventsProvider.on(l.a.FORM_SUBMITTED,function(e){d.feedback&&e.feedbackId==d.feedback.id&&(d.tabsLoaded.analysis=!1,d.tabsLoaded.overview=!1,d.loaded=!1,e.tab!=d.tab?d.tabChanged(e.tab):d.loadContent(!0))},d.siteId),d}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.feedbackProvider.logView(n.feedback.id).catch(function(){})}).finally(function(){n.tabsReady=!0})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.feedbackProvider.invalidateFeedbackData(this.courseId)),this.feedback&&(e.push(this.feedbackProvider.invalidateFeedbackAccessInformationData(this.feedback.id)),e.push(this.feedbackProvider.invalidateAnalysisData(this.feedback.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.feedback.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.feedback.coursemodule)),e.push(this.feedbackProvider.invalidateResumePageData(this.feedback.id))),this.tabsLoaded.analysis=!1,this.tabsLoaded.overview=!1,Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.feedback||e.feedbackId!=this.feedback.id)&&(this.domUtils.scrollToTop(this.content),!0)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.feedbackProvider.getFeedback(this.courseId,this.module.id).then(function(e){if(i.feedback=e,i.description=e.intro||e.description,i.dataRetrieved.emit(e),n)return i.syncActivity(t)}).then(function(){return i.feedbackProvider.getFeedbackAccessInformation(i.feedback.id)}).then(function(e){return i.access=e,i.showTabs=(e.canviewreports||e.canviewanalysis)&&!e.isempty,i.firstSelectedTab=0,"analysis"==i.tab?(i.firstSelectedTab=1,i.fetchFeedbackAnalysisData(i.access)):i.fetchFeedbackOverviewData(i.access)}).then(function(){return i.fillContextMenu(e),i.feedbackOffline.hasFeedbackOfflineData(i.feedback.id)}).then(function(e){i.hasOffline=e})},n.prototype.fetchFeedbackOverviewData=function(e){var n=this,t=[];return e.cancomplete&&e.cansubmit&&e.isopen&&t.push(this.feedbackProvider.getResumePage(this.feedback.id).then(function(e){n.goPage=e>0&&e})),e.canedititems&&(this.overview.timeopen=1e3*parseInt(this.feedback.timeopen)||0,this.overview.openTimeReadable=this.overview.timeopen?this.timeUtils.userDate(this.overview.timeopen):"",this.overview.timeclose=1e3*parseInt(this.feedback.timeclose)||0,this.overview.closeTimeReadable=this.overview.timeclose?this.timeUtils.userDate(this.overview.timeclose):""),e.canviewanalysis&&t.push(this.fetchGroupInfo(this.feedback.coursemodule)),Promise.all(t).finally(function(){n.tabsLoaded.overview=!0})},n.prototype.fetchFeedbackAnalysisData=function(e){var n,t=this;return e.canviewanalysis?n=this.fetchGroupInfo(this.feedback.coursemodule):(this.tabChanged("overview"),n=Promise.resolve()),n.finally(function(){t.tabsLoaded.analysis=!0})},n.prototype.fetchGroupInfo=function(e){var n=this;return this.groupsProvider.getActivityGroupInfo(e).then(function(e){return n.groupInfo=e,n.setGroup(n.group)})},n.prototype.parseAnalysisInfo=function(e){var n=this;switch(e.typ){case"numeric":e.average=e.data.reduce(function(e,n){return e+parseInt(n,10)},0)/e.data.length,e.template="numeric";break;case"info":e.data=e.data.map(function(e){return void 0!==(e=n.textUtils.parseJSON(e)).show&&e.show}).filter(function(e){return e});case"textfield":case"textarea":e.template="list";break;case"multichoicerated":case"multichoice":e.data=e.data.map(function(e){return void 0!==(e=n.textUtils.parseJSON(e)).answertext&&e}).filter(function(e){return e}),e.labels=e.data.map(function(e){e.quotient=(100*e.quotient).toFixed(2);var n="";return void 0!==e.value&&(n="("+e.value+") "),n+=e.answertext,n+=e.quotient>0?" ("+e.quotient+"%)":""}),e.chartData=e.data.map(function(e){return e.answercount}),"multichoicerated"==e.typ&&(e.average=e.data.reduce(function(e,n){return e+parseFloat(n.avg)},0));var t=e.presentation.charAt(0);e.chartType="c"!=t?"doughnut":"bar",e.template="chart"}return e},n.prototype.gotoAnswerQuestions=function(e){void 0===e&&(e=!1);this.navCtrl.push("AddonModFeedbackFormPage",{module:this.module,moduleId:this.module.id,courseId:this.courseId,preview:e})},n.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},n.prototype.openFeature=function(e){this.feedbackHelper.openFeature(e,this.navCtrl,this.module,this.courseId,this.group)},n.prototype.tabChanged=function(e){this.tab=e,this.tabsLoaded[this.tab]||this.loadContent(!1,!1,!0)},n.prototype.setGroup=function(e){var n=this;return this.group=e,this.feedbackProvider.getAnalysis(this.feedback.id,e).then(function(e){if(n.feedback.completedCount=e.completedcount,n.feedback.itemsCount=e.itemscount,"analysis"==n.tab){var t=1;if(n.items=e.itemsdata.map(function(e){return e.item.data=e.data,e=e.item,e.number=t++,!(!e.data||!e.data.length)&&n.parseAnalysisInfo(e)}).filter(function(e){return e}),n.warning="",e.warnings.length){var i=e.warnings.find(function(e){return"insufficientresponsesforthisgroup"==e.warningcode});n.warning=i&&i.message}}})},n.prototype.sync=function(){return this.feedbackSync.syncFeedback(this.feedback.id)},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.submitObserver&&this.submitObserver.off()},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(244),r=t(294),l=(t(364),function(e){function n(n,t,i,o,l){var s=e.call(this,n)||this;return s.folderProvider=t,s.courseProvider=i,s.appProvider=o,s.folderHelper=l,s.component=r.a.COMPONENT,s}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetFolder=this.folderProvider.isGetFolderWSAvailable(),this.path?(this.showModuleData(this.module),this.loaded=!0,this.refreshIcon="refresh"):this.loadContent().then(function(){n.folderProvider.logView(n.module.instance).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},n.prototype.invalidateContent=function(){return this.folderProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.showModuleData=function(e){this.description=e.intro||e.description,this.dataRetrieved.emit(e),this.contents=this.path?e.contents:this.folderHelper.formatContents(e.contents)},n.prototype.fetchContent=function(e){var n=this;return(this.canGetFolder?this.folderProvider.getFolder(this.courseId,this.module.id).then(function(e){return n.courseProvider.loadModuleContents(n.module,n.courseId).then(function(){return e.contents=n.module.contents,e})}):this.courseProvider.getModule(this.module.id,this.courseId).then(function(e){return e.contents.length||!n.module.contents.length||n.appProvider.isOnline()||(e.contents=n.module.contents),n.module=e,e})).then(function(t){t&&(n.description=t.intro||t.description,n.dataRetrieved.emit(t)),n.showModuleData(t),n.fillContextMenu(e)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(35),t(139)),l=t(68),s=t(166),a=(t(252),t(207),t(253)),u=(t(365),function(e){function n(n,t,i,o,r,l,u,c,d,f,p){var h=e.call(this,n)||this;return h.content=t,h.navCtrl=i,h.groupsProvider=o,h.userProvider=r,h.forumProvider=l,h.forumHelper=u,h.forumOffline=c,h.forumSync=d,h.prefetchDelegate=f,h.prefetchHandler=p,h.component=s.a.COMPONENT,h.moduleName="forum",h.canLoadMore=!1,h.loadMoreError=!1,h.discussions=[],h.offlineDiscussions=[],h.selectedDiscussion=0,h.addDiscussionText=h.translate.instant("addon.mod_forum.addanewdiscussion"),h.syncEventName=a.a.AUTO_SYNCED,h.page=0,h.trackPosts=!1,h.usesGroups=!1,h}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.syncManualObserver=this.eventsProvider.on(a.a.MANUAL_SYNCED,function(e){n.autoSyncEventReceived(e)},this.siteId),this.newDiscObserver=this.eventsProvider.on(s.a.NEW_DISCUSSION_EVENT,this.eventReceived.bind(this,!0)),this.replyObserver=this.eventsProvider.on(s.a.REPLY_DISCUSSION_EVENT,this.eventReceived.bind(this,!1)),this.viewDiscObserver=this.eventsProvider.on(s.a.VIEW_DISCUSSION_EVENT,function(e){if(n.forum&&n.forum.id==e.forumId){n.selectedDiscussion=n.splitviewCtrl.isOn()?e.discussion:0;var t=n.discussions.find(function(n){return n.discussion==e.discussion});t&&t.numunread>0&&n.forumProvider.invalidateDiscussionsList(n.forum.id)}},this.sitesProvider.getCurrentSiteId()),this.loadContent(!1,!0).then(function(){n.forum&&(n.splitviewCtrl.isOn()&&(n.offlineDiscussions.length>0?n.openNewDiscussion(n.offlineDiscussions[0].timecreated):n.discussions.length>0&&n.openDiscussion(n.discussions[0])),n.forumProvider.logView(n.forum.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}))})},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.loadMoreError=!1,this.forumProvider.getForum(this.courseId,this.module.id).then(function(e){switch(i.forum=e,i.description=e.intro||i.description,i.descriptionNote=i.translate.instant("addon.mod_forum.numdiscussions",{numdiscussions:e.numdiscussions}),void 0!==e.istracked&&(i.trackPosts=e.istracked),i.dataRetrieved.emit(e),e.type){case"news":case"blog":i.addDiscussionText=i.translate.instant("addon.mod_forum.addanewtopic");break;case"qanda":i.addDiscussionText=i.translate.instant("addon.mod_forum.addanewquestion");break;default:i.addDiscussionText=i.translate.instant("addon.mod_forum.addanewdiscussion")}if(n)return i.syncActivity(t).then(function(n){n&&i.eventsProvider.trigger(a.a.MANUAL_SYNCED,{forumId:e.id,userId:i.sitesProvider.getCurrentSiteUserId(),source:"index"},i.sitesProvider.getCurrentSiteId())})}).then(function(){return i.groupsProvider.getActivityGroupMode(i.forum.cmid).then(function(e){i.usesGroups=e===l.a.SEPARATEGROUPS||e===l.a.VISIBLEGROUPS})}).then(function(){return Promise.all([i.fetchOfflineDiscussion(),i.fetchDiscussions(e)])}).catch(function(t){if(!e)return i.refreshContent(n);i.domUtils.showErrorModalDefault(t,"addon.mod_forum.errorgetforum",!0),i.loadMoreError=!0})},n.prototype.fetchOfflineDiscussion=function(){var e=this;return this.forumOffline.getNewDiscussions(this.forum.id).then(function(n){if(e.hasOffline=!!n.length,e.hasOffline){return(e.usesGroups?e.forumProvider.formatDiscussionsGroups(e.forum.cmid,n):Promise.resolve(n)).then(function(n){var t=[];return n.forEach(function(n){0==n.parent&&"single"==e.forum.type||t.push(e.userProvider.getProfile(n.userid,e.courseId,!0).then(function(e){n.userfullname=e.fullname,n.userpictureurl=e.profileimageurl}).catch(function(){}))}),Promise.all(t).then(function(){n.sort(function(e,n){return n.timecreated-e.timecreated}),e.offlineDiscussions=n})})}e.offlineDiscussions=[]})},n.prototype.fetchDiscussions=function(e){var n=this;return this.loadMoreError=!1,e&&(this.page=0),this.forumProvider.getDiscussions(this.forum.id,this.page).then(function(e){return(n.usesGroups?n.forumProvider.formatDiscussionsGroups(n.forum.cmid,e.discussions):Promise.resolve(e.discussions)).then(function(t){if("single"==n.forum.type)for(var i in t)if(t[i].userfullname&&0==t[i].parent){t[i].userfullname=!1;break}if(void 0===n.forum.istracked&&!n.trackPosts)for(var o in t)if(t[o].numunread>0){n.trackPosts=!0;break}return n.discussions=0==n.page?t:n.discussions.concat(t),n.canLoadMore=e.canLoadMore,n.page++,n.forumOffline.hasForumReplies(n.forum.id).then(function(e){var i=[];return n.hasOffline=n.hasOffline||e,e&&t.forEach(function(e){i.push(n.forumOffline.getDiscussionReplies(e.discussion).then(function(n){e.numreplies=parseInt(e.numreplies,10)+n.length}))}),Promise.all(i)})})})},n.prototype.fetchMoreDiscussions=function(e){var n=this;return this.fetchDiscussions(!1).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.mod_forum.errorgetforum",!0),n.loadMoreError=!0}).finally(function(){e&&e()})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.forumProvider.invalidateForumData(this.courseId)),this.forum&&(e.push(this.forumProvider.invalidateDiscussionsList(this.forum.id)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.forum.cmid))),Promise.all(e)},n.prototype.sync=function(){var e=this,n=[];return n.push(this.forumSync.syncForumDiscussions(this.forum.id).then(function(n){return n.warnings&&n.warnings.length&&e.domUtils.showErrorModal(n.warnings[0]),n})),n.push(this.forumSync.syncForumReplies(this.forum.id).then(function(n){return n.warnings&&n.warnings.length&&e.domUtils.showErrorModal(n.warnings[0]),n})),Promise.all(n).then(function(e){return e.reduce(function(e,n){return{updated:e.updated||n.updated,warnings:(e.warnings||[]).concat(n.warnings||[])}},{updated:!1})})},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.isRefreshSyncNeeded=function(e){return this.forum&&"index"!=e.source&&e.forumId==this.forum.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},n.prototype.eventReceived=function(e,n){var t=this;(this.forum&&this.forum.id===n.forumId||n.cmId===this.module.id)&&(e&&this.splitviewCtrl.isOn()&&this.splitviewCtrl.emptyDetails(),this.showLoadingAndRefresh(!1).finally(function(){if(e&&t.splitviewCtrl.isOn())if(n.discussionId){var i=t.discussions.find(function(e){return e.discussion==n.discussionId});i&&t.openDiscussion(i)}else n.discTimecreated&&t.openNewDiscussion(n.discTimecreated)}),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},n.prototype.openDiscussion=function(e){this.splitviewCtrl.push("AddonModForumDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,discussionId:e.discussion,trackPosts:this.trackPosts,locked:e.locked})},n.prototype.openNewDiscussion=function(e){void 0===e&&(e=0);this.splitviewCtrl.push("AddonModForumNewDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,timeCreated:e}),this.selectedDiscussion=0},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.syncManualObserver&&this.syncManualObserver.off(),this.newDiscObserver&&this.newDiscObserver.off(),this.replyObserver&&this.replyObserver.off(),this.viewDiscObserver&&this.viewDiscObserver.off()},n=Object(i.__decorate)([Object(i.__param)(1,Object(o.E)())],n)}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(192),o=(t(230),function(){function e(e,n,t){this.fileProvider=e,this.uploaderProvider=n,this.glossaryOffline=t}return e.prototype.deleteStoredFiles=function(e,n,t,i){var o=this;return this.glossaryOffline.getEntryFolder(e,n,t,i).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},e.prototype.getStoredFiles=function(e,n,t,i){var o=this;return this.glossaryOffline.getEntryFolder(e,n,t,i).then(function(e){return o.uploaderProvider.getStoredFiles(e)})},e.prototype.hasEntryDataChanged=function(e,n,t){return t&&void 0!==t.concept?t.definition!=e.definition||t.concept!=e.concept||this.uploaderProvider.areFileListDifferent(n,t.files):e.definition||e.concept||n.length>0},e.prototype.storeFiles=function(e,n,t,i,o){var r=this;return this.glossaryOffline.getEntryFolder(e,n,t,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,i)})},e.prototype.uploadOrStoreFiles=function(e,n,t,o,r,l){return r?this.storeFiles(e,n,t,o,l):this.uploaderProvider.uploadOrReuploadFiles(o,i.a.COMPONENT,e,l)},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=(t(9),t(35),t(139)),r=t(192),l=(t(230),t(295)),s=t(593),a=function(e){function n(n,t,i,o,s){var a=e.call(this,n)||this;return a.popoverCtrl=t,a.glossaryProvider=i,a.glossaryOffline=o,a.glossarySync=s,a.component=r.a.COMPONENT,a.moduleName="glossary",a.isSearch=!1,a.entries=[],a.offlineEntries=[],a.canAdd=!1,a.canLoadMore=!1,a.loadMoreError=!1,a.loadingMessage=a.translate.instant("core.loading"),a.syncEventName=l.a.AUTO_SYNCED,a}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.addEntryObserver=this.eventsProvider.on(r.a.ADD_ENTRY_EVENT,this.eventReceived.bind(this)),this.loadContent(!1,!0).then(function(){n.glossary&&(n.splitviewCtrl.isOn()&&n.entries.length>0&&n.openEntry(n.entries[0].id),n.glossaryProvider.logView(n.glossary.id,n.viewMode).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}))})},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.glossaryProvider.getGlossary(this.courseId,this.module.id).then(function(e){if(i.glossary=e,i.description=e.intro||i.description,i.canAdd=i.glossaryProvider.isPluginEnabledForEditing()&&e.canaddentry||!1,i.fetchMode||i.switchMode("letter_all"),n)return i.syncActivity(t)}).then(function(){return i.fetchEntries().then(function(){return i.glossaryOffline.getGlossaryNewEntries(i.glossary.id).then(function(e){e.sort(function(e,n){return e.concept.localeCompare(n.fullname)}),i.hasOffline=!!e.length,i.offlineEntries=e||[]})})}).then(function(){i.fillContextMenu(e)})},n.prototype.fetchEntries=function(e){var n=this;if(void 0===e&&(e=!1),this.loadMoreError=!1,!this.fetchFunction||!this.fetchArguments)return Promise.resolve({entries:[],count:0});return this.glossaryProvider.fetchEntries(this.fetchFunction,this.fetchArguments,e?this.entries.length:0,r.a.LIMIT_ENTRIES).then(function(t){e?Array.prototype.push.apply(n.entries,t.entries):n.entries=t.entries,n.canLoadMore=n.entries.length<t.count}).catch(function(e){return Promise.reject(e)})},n.prototype.invalidateContent=function(){var e=[];return this.fetchInvalidate&&this.fetchArguments&&e.push(this.fetchInvalidate.apply(this.glossaryProvider,this.fetchArguments)),e.push(this.glossaryProvider.invalidateCourseGlossaries(this.courseId)),this.glossary&&this.glossary.id&&e.push(this.glossaryProvider.invalidateCategories(this.glossary.id)),Promise.all(e)},n.prototype.sync=function(){return this.glossarySync.syncGlossaryEntries(this.glossary.id)},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.isRefreshSyncNeeded=function(e){return this.glossary&&e.glossaryId==this.glossary.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},n.prototype.switchMode=function(e){var n=this;switch(this.fetchMode=e,e){case"author_all":this.viewMode="author",this.fetchFunction=this.glossaryProvider.getEntriesByAuthor,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByAuthor,this.fetchArguments=[this.glossary.id,"ALL","LASTNAME","ASC"],this.getDivider=function(e){return e.userfullname},this.showDivider=function(e,n){return void 0===n||e.userid!=n.userid};break;case"cat_all":this.viewMode="cat",this.fetchFunction=this.glossaryProvider.getEntriesByCategory,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByCategory,this.fetchArguments=[this.glossary.id,r.a.SHOW_ALL_CATERGORIES],this.getDivider=function(e){return e.categoryname},this.showDivider=function(e,t){return!t||n.getDivider(e)!=n.getDivider(t)};break;case"newest_first":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"CREATION","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"recently_updated":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"UPDATE","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"search":this.viewMode="search",this.fetchFunction=this.glossaryProvider.getEntriesBySearch,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesBySearch,this.fetchArguments=null,this.getDivider=null,this.showDivider=function(){return!1};break;case"letter_all":default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=this.glossaryProvider.getEntriesByLetter,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByLetter,this.fetchArguments=[this.glossary.id,"ALL"],this.getDivider=function(e){return e.concept.substr(0,1).toUpperCase()},this.showDivider=function(e,t){return!t||n.getDivider(e)!=n.getDivider(t)}}},n.prototype.loadMoreEntries=function(e){var n=this;return this.fetchEntries(!0).catch(function(e){n.loadMoreError=!0,n.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentries",!0)}).finally(function(){e&&e()})},n.prototype.openModePicker=function(e){var n=this,t=this.popoverCtrl.create(s.a,{glossary:this.glossary,selectedMode:this.fetchMode});t.onDidDismiss(function(e){e!==n.fetchMode&&(n.loadingMessage=n.translate.instant("core.loading"),n.domUtils.scrollToTop(n.content),n.switchMode(e),"search"===n.fetchMode?(n.entries=[],n.canLoadMore=!1):(n.loaded=!1,n.loadContent()))}),t.present({ev:e})},n.prototype.openEntry=function(e){this.splitviewCtrl.push("AddonModGlossaryEntryPage",{courseId:this.courseId,entryId:e}),this.selectedEntry=e},n.prototype.openNewEntry=function(e){var n={courseId:this.courseId,module:this.module,glossary:this.glossary,entry:e};this.splitviewCtrl.getMasterNav().push("AddonModGlossaryEditPage",n),this.selectedEntry=0},n.prototype.search=function(e){this.loadingMessage=this.translate.instant("core.searching"),this.fetchArguments=[this.glossary.id,e,1,"CONCEPT","ASC"],this.loaded=!1,this.loadContent()},n.prototype.eventReceived=function(e){this.glossary&&this.glossary.id===e.glossaryId&&(this.showLoadingAndRefresh(!1),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.addEntryObserver&&this.addEntryObserver.off()},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=(t(9),t(244)),r=t(235),l=(t(366),t(595)),s=function(e){function n(n,t,i,o,l,s){var a=e.call(this,n)||this;return a.imscpProvider=t,a.courseProvider=i,a.appProvider=o,a.popoverCtrl=l,a.imscpPrefetch=s,a.component=r.a.COMPONENT,a.items=[],a.src="",a.previousItem="",a.nextItem="",a}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){n.imscpProvider.logView(n.module.instance).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.invalidateContent=function(){return this.imscpProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.fetchContent=function(e){var n=this,t=!1,i=[];return i.push(this.imscpProvider.getImscp(this.courseId,this.module.id).then(function(e){n.description=e.intro||e.description,n.dataRetrieved.emit(e)})),i.push(this.imscpPrefetch.download(this.module,this.courseId).catch(function(){return t=!0,n.courseProvider.loadModuleContents(n.module,n.courseId).catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})})),Promise.all(i).then(function(){return n.items=n.imscpProvider.createItemList(n.module.contents),n.items.length&&void 0===n.currentItem&&(n.currentItem=n.items[0].href),n.loadItem(n.currentItem).catch(function(e){return n.domUtils.showErrorModalDefault(e,"addon.mod_imscp.deploymenterror",!0),Promise.reject(null)})}).then(function(){t&&n.appProvider.isOnline()&&n.domUtils.showErrorModal("core.errordownloadingsomefiles",!0),n.fillContextMenu(e)})},n.prototype.loadItem=function(e){var n=this;return this.imscpProvider.getIframeSrc(this.module,e).then(function(t){n.currentItem=e,n.previousItem=n.imscpProvider.getPreviousItem(n.items,e),n.nextItem=n.imscpProvider.getNextItem(n.items,e),n.src&&t==n.src?(n.src="",setTimeout(function(){n.src=t})):n.src=t})},n.prototype.showToc=function(e){var n=this,t=this.popoverCtrl.create(l.a,{items:this.items});t.onDidDismiss(function(e){e&&n.loadItem(e)}),t.present({ev:e})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(143),s=(t(256),t(287)),a=(t(296),t(40)),u=(t(149),function(e){function n(n,t,i,o,r,a,u,c,d,f,p){var h=e.call(this,n,i)||this;return h.lessonProvider=t,h.groupsProvider=o,h.lessonOffline=r,h.lessonSync=a,h.utils=u,h.prefetchHandler=c,h.navCtrl=d,h.timeUtils=f,h.userProvider=p,h.component=l.a.COMPONENT,h.moduleName="lesson",h.syncEventName=s.a.AUTO_SYNCED,h}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.selectedTab="report"==this.action?1:0,this.loadContent(!1,!0).then(function(){!n.lesson||n.preventMessages&&n.preventMessages.length||n.logView()})},n.prototype.changeGroup=function(e){var n=this;this.reportLoaded=!1,this.setGroup(e).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error getting report.")}).finally(function(){n.reportLoaded=!0})},n.prototype.fetchContent=function(e,n,t){var i=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);var o=!0;return this.askPassword=!1,this.lessonProvider.getLesson(this.courseId,this.module.id).then(function(e){if(i.lesson=e,i.dataRetrieved.emit(i.lesson),i.description=i.lesson.intro,n)return i.syncActivity(t)}).then(function(){return i.lessonProvider.getAccessInformation(i.lesson.id)}).then(function(n){var t=[];if(i.accessInfo=n,i.canManage=n.canmanage,i.canViewReports=n.canviewreports,i.preventMessages=[],i.lessonProvider.isLessonOffline(i.lesson)&&(i.setStatusListener(),t.push(i.lessonSync.hasDataToSync(i.lesson.id,n.attemptscount).then(function(e){i.hasOffline=e})),t.push(i.lessonSync.getRetakeFinishedInSync(i.lesson.id).then(function(e){e&&e.retake==n.attemptscount-1?i.retakeToReview=e:(i.retakeToReview=void 0,e&&i.lessonSync.deleteRetakeFinishedInSync(i.lesson.id))})),t.push(i.lessonProvider.getContentPagesViewedOnline(i.lesson.id,n.attemptscount)),t.push(i.lessonProvider.getQuestionsAttemptsOnline(i.lesson.id,n.attemptscount))),n.preventaccessreasons&&n.preventaccessreasons.length){var r=i.lessonProvider.getPreventAccessReason(n,!1);if("passwordprotectedlesson"==r.reason){var l=i.password?Promise.resolve(i.password):i.lessonProvider.getStoredPassword(i.lesson.id);t.push(l.then(function(e){return i.validatePassword(e)}).then(function(){(r=i.lessonProvider.getPreventAccessReason(n,!0))&&(i.preventMessages=[r])}).catch(function(){i.askPassword=!0,i.preventMessages=[r],o=!1}))}else i.preventMessages=[r],o=!1}return 1==i.selectedTab&&i.canViewReports&&t.push(i.fetchReportData()),Promise.all(t).then(function(){o&&i.lessonReady(e)})})},n.prototype.fetchReportData=function(){var e=this;return this.groupsProvider.getActivityGroupInfo(this.module.id).then(function(n){return e.groupInfo=n,e.setGroup(e.group||0)}).finally(function(){e.reportLoaded=!0})},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter(),this.hasPlayed&&(this.hasPlayed=!1,this.showLoadingAndRefresh(!0,!1))},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave(),"AddonModLessonPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0)},n.prototype.invalidateContent=function(){var e=[];return e.push(this.lessonProvider.invalidateLessonData(this.courseId)),this.lesson&&(e.push(this.lessonProvider.invalidateAccessInformation(this.lesson.id)),e.push(this.lessonProvider.invalidatePages(this.lesson.id)),e.push(this.lessonProvider.invalidateLessonWithPassword(this.lesson.id)),e.push(this.lessonProvider.invalidateTimers(this.lesson.id)),e.push(this.lessonProvider.invalidateContentPagesViewed(this.lesson.id)),e.push(this.lessonProvider.invalidateQuestionsAttempts(this.lesson.id)),e.push(this.lessonProvider.invalidateRetakesOverview(this.lesson.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.module.id))),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return this.lesson&&e.lessonId==this.lesson.id},n.prototype.lessonReady=function(e){this.askPassword=!1,this.leftDuringTimed=this.hasOffline||this.lessonProvider.leftDuringTimed(this.accessInfo),this.password&&this.lessonProvider.storePassword(this.lesson.id,this.password),this.fillContextMenu(e)},n.prototype.logView=function(){var e=this;this.lessonProvider.logViewLesson(this.lesson.id,this.password).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(e){})},n.prototype.playLesson=function(e){var n=this;return(this.hasOffline?e?this.lessonProvider.getLastPageSeen(this.lesson.id,this.accessInfo.attemptscount):Promise.resolve(this.accessInfo.firstpageid):this.leftDuringTimed&&!this.lesson.timelimit?Promise.resolve(e?this.accessInfo.lastpageseen:this.accessInfo.firstpageid):Promise.resolve()).then(function(e){n.navCtrl.push("AddonModLessonPlayerPage",{courseId:n.courseId,lessonId:n.lesson.id,pageId:e,password:n.password})})},n.prototype.reportsSelected=function(){var e=this;this.groupInfo||this.fetchReportData().catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting report.")})},n.prototype.review=function(){this.retakeToReview&&this.navCtrl.push("AddonModLessonPlayerPage",{courseId:this.courseId,lessonId:this.lesson.id,pageId:this.retakeToReview.pageid,password:this.password,review:!0,retake:this.retakeToReview.retake})},n.prototype.setGroup=function(e){var n=this;if(this.group=e,this.selectedGroupName="",e&&this.groupInfo&&this.groupInfo.groups)for(var t=0;t<this.groupInfo.groups.length;t++){var i=this.groupInfo.groups[t];if(e==i.id){this.selectedGroupName=i.name;break}}return this.lessonProvider.getRetakesOverview(this.lesson.id,e).then(function(e){var t=[];return e&&null!=e.avetime&&e.numofattempts&&(e.avetime=Math.floor(e.avetime/e.numofattempts),e.avetimeReadable=n.timeUtils.formatTime(e.avetime)),e&&null!=e.hightime&&(e.hightimeReadable=n.timeUtils.formatTime(e.hightime)),e&&null!=e.lowtime&&(e.lowtimeReadable=n.timeUtils.formatTime(e.lowtime)),e&&e.lessonscored&&(e.numofattempts&&(e.avescore=n.textUtils.roundToDecimals(e.avescore,2)),null!=e.highscore&&(e.highscore=n.textUtils.roundToDecimals(e.highscore,2)),null!=e.lowscore&&(e.lowscore=n.textUtils.roundToDecimals(e.lowscore,2))),e&&e.students&&e.students.forEach(function(e){e.bestgrade=n.textUtils.roundToDecimals(e.bestgrade,2),t.push(n.userProvider.getProfile(e.id,n.courseId,!0).then(function(n){e.profileimageurl=n.profileimageurl}).catch(function(){}))}),n.utils.allPromises(t).catch(function(){}).then(function(){n.overview=e})})},n.prototype.showStatus=function(e,n){this.showSpinner=e==a.a.DOWNLOADING},n.prototype.start=function(e){var n=this;this.showSpinner||(this.lessonProvider.isLessonOffline(this.lesson)&&this.currentStatus!=a.a.DOWNLOADED?(this.showSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){n.playLesson(e)}).catch(function(t){n.hasOffline?n.playLesson(e):n.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){n.showSpinner=!1})):this.playLesson(e))},n.prototype.submitPassword=function(e,n){var t=this;e.preventDefault(),e.stopPropagation();var i=n&&n.value;i?(this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.validatePassword(i).then(function(){t.lessonReady(!1);var e=t.lessonProvider.getPreventAccessReason(t.accessInfo,!0);t.preventMessages=e?[e]:[],t.logView()}).catch(function(e){t.domUtils.showErrorModal(e)}).finally(function(){t.loaded=!0,t.refreshIcon="refresh",t.syncIcon="sync"})):this.domUtils.showErrorModal("addon.mod_lesson.emptypassword",!0)},n.prototype.sync=function(){return this.lessonSync.syncLesson(this.lesson.id,!0)},n.prototype.validatePassword=function(e){var n=this;return this.lessonProvider.getLessonWithPassword(this.lesson.id,e).then(function(t){n.lesson=t,n.password=e}).catch(function(e){return n.password="",Promise.reject(e)})},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(297),s=function(e){function n(n,t,i){var o=e.call(this,n,t)||this;return o.content=t,o.ltiProvider=i,o.component=l.a.COMPONENT,o.moduleName="lti",o.fetchContentDefaultError="addon.mod_lti.errorgetlti",o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadContent()},n.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.ltiProvider.getLti(this.courseId,this.module.id).then(function(e){i.lti=e,i.description=i.lti.intro||i.description,i.dataRetrieved.emit(i.lti)}).then(function(){i.fillContextMenu(e)})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.ltiProvider.invalidateLti(this.courseId)),this.lti&&e.push(this.ltiProvider.invalidateLtiLaunchData(this.lti.id)),Promise.all(e)},n.prototype.launch=function(){var e=this;this.ltiProvider.getLtiLaunchData(this.lti.id).then(function(n){return e.ltiProvider.logView(e.lti.id).then(function(){e.checkCompletion()}).catch(function(e){}),e.ltiProvider.launch(n.endpoint,n.parameters)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.error",!0)})},n=Object(i.__decorate)([Object(i.__param)(1,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(244),r=t(210),l=(t(298),t(367),function(e){function n(n,t,i,o,l,s,a){var u=e.call(this,n)||this;return u.pageProvider=t,u.courseProvider=i,u.appProvider=o,u.pageHelper=l,u.pagePrefetch=s,u.utils=a,u.component=r.a.COMPONENT,u.displayDescription=!0,u.displayTimemodified=!0,u.fetchContentDefaultError="addon.mod_page.errorwhileloadingthepage",u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetPage=this.pageProvider.isGetPageWSAvailable(),this.loadContent().then(function(){n.pageProvider.logView(n.module.instance).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.invalidateContent=function(){return this.pageProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.fetchContent=function(e){var n=this,t=!1;return this.pagePrefetch.download(this.module,this.courseId).catch(function(){t=!0}).then(function(){if(!n.module.contents.length)return n.courseProvider.loadModuleContents(n.module,n.courseId)}).then(function(){var i,o=[];return i=n.canGetPage?n.pageProvider.getPageData(n.courseId,n.module.id):n.courseProvider.getModule(n.module.id,n.courseId),o.push(i.then(function(e){if(e&&(n.description=e.intro||e.description,n.dataRetrieved.emit(e),n.canGetPage))if(n.page=e,e.displayoptions){var t=n.textUtils.unserialize(e.displayoptions)||{};n.displayDescription=void 0===t.printintro||n.utils.isTrueOrOne(t.printintro),n.displayTimemodified=void 0===t.printlastmodified||n.utils.isTrueOrOne(t.printlastmodified)}else n.displayDescription=!0,n.displayTimemodified=!0}).catch(function(){})),o.push(n.pageHelper.getPageHtml(n.module.contents,n.module.id).then(function(i){n.fillContextMenu(e),n.contents=i,t&&n.appProvider.isOnline()&&n.domUtils.showErrorModal("core.errordownloadingsomefiles",!0)})),Promise.all(o)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(151),s=(t(279),t(236),t(231)),a=(t(299),t(40)),u=function(e){function n(n,t,i,o,r,a,u,c,d){var f=e.call(this,n,i)||this;return f.quizProvider=t,f.quizHelper=o,f.quizOffline=r,f.quizSync=a,f.behaviourDelegate=u,f.prefetchHandler=c,f.navCtrl=d,f.component=l.a.COMPONENT,f.moduleName="quiz",f.showStatusSpinner=!0,f.fetchContentDefaultError="addon.mod_quiz.errorgetquiz",f.syncEventName=s.a.AUTO_SYNCED,f.hasPlayed=!1,f}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.quizData&&n.quizProvider.logViewQuiz(n.quizData.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})}),this.finishedObserver=this.eventsProvider.on(l.a.ATTEMPT_FINISHED_EVENT,function(e){n.quizData&&e.quizId==n.quizData.id&&(n.autoReview=e)},this.siteId)},n.prototype.attemptQuiz=function(){var e=this;if(!this.showStatusSpinner)if(this.quizProvider.isQuizOffline(this.quizData)){var n=this.currentStatus==a.a.DOWNLOADED;n&&this.modulePrefetchDelegate.canCheckUpdates()?this.openQuiz():(this.showStatusSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){e.openQuiz()}).catch(function(t){e.hasOffline||n&&!e.modulePrefetchDelegate.canCheckUpdates()?e.openQuiz():e.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){e.showStatusSpinner=!1}))}else this.openQuiz()},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.quizProvider.getQuiz(this.courseId,this.module.id).then(function(e){return i.quizData=e,i.quizData.gradeMethodReadable=i.quizProvider.getQuizGradeMethod(i.quizData.grademethod),i.now=(new Date).getTime(),i.dataRetrieved.emit(i.quizData),i.description=i.quizData.intro||i.description,i.quizSync.getSyncWarnings(i.quizData.id).then(function(e){if(e&&e.length)return i.domUtils.showErrorModal(i.textUtils.buildMessage(e)),i.quizSync.setSyncWarnings(i.quizData.id,[])})}).then(function(){if(i.quizProvider.isQuizOffline(i.quizData))return i.syncActivity(t).catch(function(){i.autoReview=void 0});i.autoReview=void 0,i.showStatusSpinner=!1}).then(function(){return i.quizProvider.isQuizOffline(i.quizData)&&(i.setStatusListener(),i.quizSync.getReadableSyncTime(i.quizData.id).then(function(e){i.syncTime=e}),i.quizSync.hasDataToSync(i.quizData.id).then(function(e){i.hasOffline=e})),i.quizProvider.getQuizAccessInformation(i.quizData.id).then(function(e){return i.quizAccessInfo=e,i.quizData.showReviewColumn=e.canreviewmyattempts,i.accessRules=e.accessrules,i.unsupportedRules=i.quizProvider.getUnsupportedRules(e.activerulenames),i.quizData.preferredbehaviour&&(i.behaviourSupported=i.behaviourDelegate.isBehaviourSupported(i.quizData.preferredbehaviour)),i.quizProvider.getQuizRequiredQtypes(i.quizData.id).then(function(e){return i.unsupportedQuestions=i.quizProvider.getUnsupportedQuestions(e),i.getAttempts()})})}).then(function(){i.fillContextMenu(e),i.quiz=i.quizData})},n.prototype.getAttempts=function(){var e=this;return this.quizProvider.getAttemptAccessInformation(this.quizData.id,0).then(function(n){return e.attemptAccessInfo=n,e.quizProvider.getUserAttempts(e.quizData.id).then(function(n){return e.treatAttempts(n).then(function(n){if(e.attempts=n,e.attempts.length){e.moreAttempts=!e.quizProvider.isAttemptFinished(e.attempts[e.attempts.length-1].state)||!e.attemptAccessInfo.isfinished}else e.moreAttempts=!e.attemptAccessInfo.isfinished;return e.getButtonText(),e.getResultInfo()})})})},n.prototype.getButtonText=function(){this.buttonText="",0!==this.quizData.hasquestions&&(this.attempts.length&&!this.quizProvider.isAttemptFinished(this.attempts[this.attempts.length-1].state)?this.quizAccessInfo.canattempt?this.buttonText="addon.mod_quiz.continueattemptquiz":this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.continuepreview"):this.quizAccessInfo.canattempt?(this.preventMessages=this.attemptAccessInfo.preventnewattemptreasons,this.preventMessages.length||(this.buttonText=this.attempts.length?"addon.mod_quiz.reattemptquiz":"addon.mod_quiz.attemptquiznow")):this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.previewquiznow")),this.buttonText&&(this.preventMessages=this.quizAccessInfo.preventaccessreasons,this.moreAttempts?this.quizAccessInfo.canattempt&&this.preventMessages.length?this.buttonText="":(this.unsupportedQuestions.length||this.unsupportedRules.length||!this.behaviourSupported)&&(this.buttonText=""):this.buttonText="")},n.prototype.getResultInfo=function(){var e=this;if(this.attempts.length&&this.quizData.showGradeColumn&&this.bestGrade.hasgrade&&void 0!==this.gradebookData.grade){var n=this.quizProvider.formatGrade(this.gradebookData.grade,this.quizData.decimalpoints),t=this.quizProvider.formatGrade(this.bestGrade.grade,this.quizData.decimalpoints),i=n;if(this.showResults=!0,this.gradeOverridden=n!=t,this.gradebookFeedback=this.gradebookData.feedback,this.bestGrade.grade>this.gradebookData.grade&&this.gradebookData.grade==this.quizData.grade&&(this.gradeOverridden=!1,i=t),this.overallStats)if(this.moreAttempts)this.gradeResult=this.translate.instant("addon.mod_quiz.gradesofar",{$a:{method:this.quizData.gradeMethodReadable,mygrade:i,quizgrade:this.quizData.gradeFormatted}});else{var o=this.translate.instant("addon.mod_quiz.outofshort",{$a:{grade:i,maxgrade:this.quizData.gradeFormatted}});this.gradeResult=this.translate.instant("addon.mod_quiz.yourfinalgradeis",{$a:o})}if(this.quizData.showFeedbackColumn)return this.quizProvider.getFeedbackForGrade(this.quizData.id,this.gradebookData.grade).then(function(n){e.overallFeedback=n.feedbacktext})}else this.showResults=!1;return Promise.resolve()},n.prototype.goToAutoReview=function(){var e=this;this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata);var n=this.autoReview.attemptId;return this.quizAccessInfo.canreviewmyattempts?this.quizProvider.getAttemptReview(n,-1).then(function(){e.navCtrl.push("AddonModQuizReviewPage",{courseId:e.courseId,quizId:e.quizData.id,attemptId:n})}).catch(function(){}):Promise.resolve()},n.prototype.hasSyncSucceed=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),e.answersSent},n.prototype.ionViewDidEnter=function(){var n=this;if(e.prototype.ionViewDidEnter.call(this),this.hasPlayed){this.hasPlayed=!1;var t=void 0;this.autoReview&&this.autoReview.synced?(t=this.goToAutoReview(),this.autoReview=void 0):t=Promise.resolve(),this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.domUtils.scrollToTop(this.content),t.then(function(){n.refreshContent().finally(function(){n.loaded=!0,n.refreshIcon="refresh",n.syncIcon="sync"})})}else this.autoReview=void 0},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.autoReview=void 0,"AddonModQuizPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0)},n.prototype.invalidateContent=function(){var e=[];return e.push(this.quizProvider.invalidateQuizData(this.courseId)),this.quizData&&(e.push(this.quizProvider.invalidateUserAttemptsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateQuizAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateQuizRequiredQtypes(this.quizData.id)),e.push(this.quizProvider.invalidateAttemptAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateCombinedReviewOptionsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateUserBestGradeForUser(this.quizData.id)),e.push(this.quizProvider.invalidateGradeFromGradebook(this.courseId))),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),!(!this.quizData||e.quizId!=this.quizData.id)&&(this.domUtils.scrollToTop(this.content),!0)},n.prototype.openQuiz=function(){this.navCtrl.push("AddonModQuizPlayerPage",{courseId:this.courseId,quizId:this.quiz.id,moduleUrl:this.module.url})},n.prototype.showStatus=function(e,n){this.showStatusSpinner=e==a.a.DOWNLOADING},n.prototype.sync=function(){return this.quizSync.syncQuiz(this.quizData,!0)},n.prototype.treatAttempts=function(e){var n=this;if(!e||!e.length)return Promise.resolve(e);var t=this.quizProvider.getLastFinishedAttemptFromList(e),i=[];return this.autoReview&&t&&t.id>=this.autoReview.attemptId&&(!this.isDestroyed&&this.isCurrentView&&i.push(this.goToAutoReview()),this.autoReview=void 0),i.push(this.quizProvider.loadFinishedOfflineData(e)),i.push(this.quizProvider.getCombinedReviewOptions(this.quizData.id).then(function(e){n.options=e})),i.push(this.quizProvider.getUserBestGrade(this.quizData.id).then(function(e){return n.bestGrade=e,n.quizProvider.getGradeFromGradebook(n.courseId,n.module.id).then(function(e){n.gradebookData={grade:e.graderaw,feedback:e.feedback}}).catch(function(){n.gradebookData={grade:n.bestGrade.grade}})})),Promise.all(i).then(function(){var i=n.quizProvider.formatGrade(void 0!==n.gradebookData.grade?n.gradebookData.grade:n.bestGrade.grade,n.quizData.decimalpoints);return n.quizHelper.setQuizCalculatedData(n.quizData,n.options),n.overallStats=t&&n.options.alloptions.marks>=l.a.QUESTION_OPTIONS_MARK_AND_MAX,e.forEach(function(t){n.quizHelper.setAttemptCalculatedData(n.quizData,t,n.overallStats&&n.quizData.grademethod==l.a.GRADEHIGHEST&&e.length>1,i)}),e})},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.finishedObserver&&this.finishedObserver.off()},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(244),r=t(211),l=(t(368),t(263),function(e){function n(n,t,i,o,l,s,a){var u=e.call(this,n)||this;return u.resourceProvider=t,u.courseProvider=i,u.appProvider=o,u.prefetchHandler=l,u.resourceHelper=s,u.sitesProvider=a,u.component=r.a.COMPONENT,u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetResource=this.resourceProvider.isGetResourceWSAvailable(),this.loadContent().then(function(){n.resourceProvider.logView(n.module.instance).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.invalidateContent=function(){return this.resourceProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.fetchContent=function(e){var n=this;return this.courseProvider.loadModuleContents(this.module,this.courseId,null,!1,e).then(function(){return n.module.contents&&n.module.contents.length?n.canGetResource?n.resourceProvider.getResourceData(n.courseId,n.module.id).catch(function(){}):n.courseProvider.getModule(n.module.id,n.courseId).catch(function(){}):Promise.reject(null)}).then(function(e){if(e&&(n.description=e.intro||e.description,n.dataRetrieved.emit(e)),n.resourceHelper.isDisplayedInIframe(n.module)){var t=!1;return n.prefetchHandler.download(n.module,n.courseId).catch(function(){t=!0}).then(function(){return n.resourceHelper.getIframeSrc(n.module).then(function(e){n.mode="iframe",n.src&&e.toString()==n.src.toString()?(n.src="",setTimeout(function(){n.src=e})):n.src=e,t&&n.appProvider.isOnline()&&n.domUtils.showErrorModal("core.errordownloadingsomefiles",!0)})})}if(n.resourceHelper.isDisplayedEmbedded(n.module,e&&e.display))return n.mode="embedded",n.resourceHelper.getEmbeddedHtml(n.module,n.courseId).then(function(e){n.contentText=e});n.mode="external"}).then(function(){n.fillContextMenu(e)})},n.prototype.open=function(){var e=this;this.prefetchHandler.isDownloadable(this.module,this.courseId).then(function(n){if(!n)return e.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e.module.url);e.resourceHelper.openModuleFile(e.module,e.courseId)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(193),s=(t(351),t(237),t(288)),a=(t(300),t(40)),u=function(e){function n(n,t,i,o,r,a,u,c,d,f){var p=e.call(this,n,i)||this;return p.scormProvider=t,p.content=i,p.scormHelper=o,p.scormOffline=r,p.scormSync=a,p.prefetchHandler=u,p.navCtrl=c,p.prefetchDelegate=d,p.utils=f,p.component=l.a.COMPONENT,p.moduleName="scorm",p.currentOrganization={},p.scormOptions={mode:l.a.MODENORMAL,newAttempt:!1},p.modeNormal=l.a.MODENORMAL,p.modeBrowser=l.a.MODEBROWSE,p.fetchContentDefaultError="addon.mod_scorm.errorgetscorm",p.syncEventName=s.a.AUTO_SYNCED,p.hasPlayed=!1,p.syncDueToPlayerLeft=!1,p}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.scorm&&n.scormProvider.logView(n.scorm.id).then(function(){n.checkCompletion()}).catch(function(e){})})},n.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},n.prototype.downloadScormPackage=function(){var e=this;return this.downloading=!0,this.prefetchHandler.download(this.module,this.courseId,void 0,function(n){n&&(n.downloading?e.scorm.packagesize&&n.progress&&(e.percentage=(100*Number(n.progress.loaded/e.scorm.packagesize)).toFixed(1)):n.message?(e.progressMessage=n.message,e.percentage=void 0):e.percentage=n.progress&&n.progress.loaded&&n.progress.total?(100*Number(n.progress.loaded/n.progress.total)).toFixed(1):void 0)}).finally(function(){e.progressMessage=void 0,e.percentage=void 0,e.downloading=!1})},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.scormProvider.getScorm(this.courseId,this.module.id,this.module.url).then(function(e){i.scorm=e,i.dataRetrieved.emit(i.scorm),i.description=i.scorm.intro||i.description;var o=i.scormProvider.isScormUnsupported(i.scorm);if(i.errorMessage=o||"",!i.scorm.warningMessage){return(n?i.syncActivity(t).catch(function(){}):Promise.resolve()).catch(function(){}).then(function(){return i.scormSync.getReadableSyncTime(i.scorm.id).then(function(e){i.syncTime=e}),i.scormProvider.getAttemptCount(i.scorm.id)}).then(function(e){return i.attempts=e,i.hasOffline=!!i.attempts.offline.length,i.scormHelper.determineAttemptToContinue(i.scorm,i.attempts)}).then(function(e){return i.lastAttempt=e.number,i.lastIsOffline=e.offline,i.attemptToContinue=i.lastAttempt!=i.attempts.lastAttempt.number?i.lastAttempt:void 0,i.scormProvider.isAttemptIncomplete(i.scorm.id,i.lastAttempt,i.lastIsOffline)}).then(function(e){var n=[];return i.scorm.incomplete=e,i.scorm.numAttempts=i.attempts.total,i.scorm.gradeMethodReadable=i.scormProvider.getScormGradeMethod(i.scorm),i.scorm.attemptsLeft=i.scormProvider.countAttemptsLeft(i.scorm,i.attempts.lastAttempt.number),(i.scorm.forcenewattempt==l.a.SCORM_FORCEATTEMPT_ALWAYS||i.scorm.forcenewattempt&&!i.scorm.incomplete)&&(i.scormOptions.newAttempt=!0),n.push(i.getReportedGrades()),n.push(i.fetchStructure()),i.scorm.packagesize||""!==i.errorMessage||n.push(i.scormProvider.calculateScormSize(i.scorm).then(function(e){i.scorm.packagesize=e})),i.setStatusListener(),Promise.all(n)})}}).then(function(){i.fillContextMenu(e)})},n.prototype.fetchStructure=function(){var e=this;return this.scormProvider.getOrganizations(this.scorm.id).then(function(n){return e.organizations=n,e.currentOrganization.identifier||(e.currentOrganization.identifier=n.length?n[0].identifier:""),e.loadOrganizationToc(e.currentOrganization.identifier)})},n.prototype.getAttemptGrade=function(e,n,t){return this.scormProvider.getAttemptGrade(this.scorm,e,n).then(function(n){t[e]={number:e,grade:n}})},n.prototype.getReportedGrades=function(){var e=this,n=[],t={},i={};return this.attempts.online.forEach(function(i){-1==e.attempts.offline.indexOf(i)&&n.push(e.getAttemptGrade(i,!1,t))}),this.attempts.offline.forEach(function(t){n.push(e.getAttemptGrade(t,!0,i))}),Promise.all(n).then(function(){e.scorm.grade=e.scormProvider.calculateScormGrade(e.scorm,t),e.scorm.onlineAttempts=e.utils.objectToArray(t),e.scorm.offlineAttempts=e.utils.objectToArray(i),e.scorm.onlineAttempts.sort(function(e,n){return e.number-n.number}),e.scorm.offlineAttempts.sort(function(e,n){return e.number-n.number}),e.scorm.onlineAttempts.forEach(function(n){n.grade=e.scormProvider.formatGrade(e.scorm,n.grade)}),e.scorm.offlineAttempts.forEach(function(n){n.grade=e.scormProvider.formatGrade(e.scorm,n.grade)}),e.scorm.grade=e.scormProvider.formatGrade(e.scorm,e.scorm.grade)})},n.prototype.hasSyncSucceed=function(e){return(e.updated||this.syncDueToPlayerLeft)&&this.checkCompletion(),this.syncDueToPlayerLeft=!1,!0},n.prototype.ionViewDidEnter=function(){var n=this;e.prototype.ionViewDidEnter.call(this),this.hasPlayed&&(this.hasPlayed=!1,this.syncDueToPlayerLeft=!0,this.scormOptions.newAttempt=!1,setTimeout(function(){n.showLoadingAndRefresh(!0,!1)},500))},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),"AddonModScormPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0)},n.prototype.invalidateContent=function(){var e=[];return e.push(this.scormProvider.invalidateScormData(this.courseId)),this.scorm&&e.push(this.scormProvider.invalidateAllScormData(this.scorm.id)),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!e.updated||!this.scorm||e.scormId!=this.scorm.id)&&(this.checkCompletion(),!0)},n.prototype.loadOrganization=function(){var e=this;this.loadOrganizationToc(this.currentOrganization.identifier).catch(function(n){e.domUtils.showErrorModalDefault(n,e.fetchContentDefaultError,!0)})},n.prototype.loadOrganizationToc=function(e){var n=this;return this.scorm.displaycoursestructure?(this.loadingToc=!0,this.scormProvider.getOrganizationToc(this.scorm.id,this.lastAttempt,e,this.lastIsOffline).then(function(t){n.toc=n.scormProvider.formatTocToArray(t),n.toc.forEach(function(e){e.image=n.scormProvider.getScoStatusIcon(e,n.scorm.incomplete)}),n.organizations.forEach(function(t){t.identifier==e&&(n.currentOrganization.title=t.title)})}).finally(function(){n.loadingToc=!1})):Promise.resolve()},n.prototype.open=function(e,n){var t=this;if(e.preventDefault(),e.stopPropagation(),!this.downloading){var i=this.currentStatus==a.a.OUTDATED;i||this.currentStatus==a.a.NOT_DOWNLOADED?this.scormHelper.confirmDownload(this.scorm,i).then(function(){(i?t.scormProvider.invalidateAllScormData(t.scorm.id):Promise.resolve()).finally(function(){t.downloadScormPackage().then(function(){t.isDestroyed||t.openScorm(n)}).catch(function(e){t.isDestroyed||t.domUtils.showErrorModalDefault(e,t.translate.instant("addon.mod_scorm.errordownloadscorm",{name:t.scorm.name}))})})}):this.openScorm(n)}},n.prototype.openScorm=function(e){this.navCtrl.push("AddonModScormPlayerPage",{scorm:this.scorm,mode:this.scormOptions.mode,newAttempt:!!this.scormOptions.newAttempt,organizationId:this.currentOrganization.identifier,scoId:e})},n.prototype.showStatus=function(e,n){var t=this;e==a.a.OUTDATED&&this.scorm?this.scormProvider.shouldDownloadMainFile(this.scorm,!0).then(function(e){t.statusMessage=e?"addon.mod_scorm.scormstatusoutdated":""}):e==a.a.NOT_DOWNLOADED?this.statusMessage="addon.mod_scorm.scormstatusnotdownloaded":e==a.a.DOWNLOADING?this.downloading||this.downloadScormPackage():this.statusMessage=""},n.prototype.sync=function(){return this.scormSync.syncScorm(this.scorm)},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(264),s=(t(301),t(265),t(302)),a=function(e){function n(n,t,i,o,r,a){var u=e.call(this,n,i)||this;return u.surveyProvider=t,u.surveyHelper=o,u.surveyOffline=r,u.surveySync=a,u.component=l.a.COMPONENT,u.moduleName="survey",u.answers={},u.syncEventName=s.a.AUTO_SYNCED,u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.surveyProvider.logView(n.survey.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.surveyProvider.invalidateSurveyData(this.courseId)),this.survey&&e.push(this.surveyProvider.invalidateQuestions(this.survey.id)),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.survey||e.surveyId!=this.survey.id||e.userId!=this.userId)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.surveyProvider.getSurvey(this.courseId,this.module.id).then(function(e){if(i.survey=e,i.description=e.intro||e.description,i.dataRetrieved.emit(e),n)return i.syncActivity(t).then(function(e){if(e)return i.surveyProvider.getSurvey(i.courseId,i.module.id).then(function(e){i.survey=e})})}).then(function(){return i.surveyOffline.hasAnswers(i.survey.id)}).then(function(e){if(i.hasOffline=!i.survey.surveydone&&e,!i.survey.surveydone&&!i.hasOffline)return i.fetchQuestions()}).then(function(){i.fillContextMenu(e)})},n.prototype.fetchQuestions=function(){var e=this;return this.surveyProvider.getQuestions(this.survey.id).then(function(n){e.questions=e.surveyHelper.formatQuestions(n),e.questions.forEach(function(n){if(n.name){e.answers[n.name]=n.required?-1:n.multi&&0===n.multi.length&&0===n.type?"":"0"}n.multi&&!n.multi.length&&0===n.parent&&n.type>0&&(n.options=n.options.map(function(n){return e.textUtils.cleanTags(n)}))})})},n.prototype.isValidResponse=function(){for(var e in this.answers)if(-1===this.answers[e])return!1;return!0},n.prototype.submit=function(){var e=this;this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var n=[],t=e.domUtils.showModalLoading("core.sending",!0);for(var i in e.answers)n.push({key:i,value:e.answers[i]});return e.surveyProvider.submitAnswers(e.survey.id,e.survey.name,e.courseId,n).then(function(){return e.showLoadingAndRefresh(!1)}).finally(function(){t.dismiss()})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_survey.cannotsubmitsurvey",!0)})},n.prototype.sync=function(){return this.surveySync.syncSurvey(this.survey.id,this.userId)},n.prototype.hasSyncSucceed=function(e){return e.answersSent},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(244),r=t(303),l=(t(304),t(40)),s=function(e){function n(n,t,i,o,l,s){var a=e.call(this,n)||this;return a.urlProvider=t,a.courseProvider=i,a.urlHelper=o,a.mimeUtils=l,a.sitesProvider=s,a.component=r.a.COMPONENT,a.shouldEmbed=!1,a.shouldIframe=!1,a.isImage=!1,a.isAudio=!1,a.isVideo=!1,a.isOther=!1,a.displayDescription=!0,a}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetUrl=this.urlProvider.isGetUrlWSAvailable(),this.loadContent().then(function(){!(n.shouldIframe||n.shouldEmbed&&n.isOther)&&(n.shouldIframe||n.shouldEmbed&&n.isOther)||n.logView()})},n.prototype.invalidateContent=function(){return this.urlProvider.invalidateContent(this.module.id,this.courseId)},n.prototype.fetchContent=function(e){var n,t,i=this,o=this.canGetUrl;return(o?this.urlProvider.getUrl(this.courseId,this.module.id):Promise.reject(null)).catch(function(){return o=!1,i.courseProvider.getModule(i.module.id,i.courseId,void 0,!1,!1,void 0,"url")}).then(function(e){if(t=e,i.name=t.name||i.module.name,i.description=t.intro||t.description,i.dataRetrieved.emit(t),o&&t.displayoptions){var r=i.textUtils.unserialize(t.displayoptions);i.displayDescription=void 0===r.printintro||!!r.printintro}if(o){if(!(n=i.module).contents||!n.contents.length)return i.courseProvider.loadModuleContents(n,i.courseId,void 0,!1,!1,void 0,"url")}else if(n=t,!t.contents.length)return Promise.reject(null)}).then(function(){if(i.url=n.contents&&n.contents[0]&&n.contents[0].fileurl?n.contents[0].fileurl:void 0,o)return i.calculateDisplayOptions(t)})},n.prototype.calculateDisplayOptions=function(e){var n=this,t=this.urlProvider.getFinalDisplayType(e);if(this.shouldEmbed=t==l.a.RESOURCELIB_DISPLAY_EMBED,this.shouldIframe=t==l.a.RESOURCELIB_DISPLAY_FRAME,this.shouldEmbed){var i=this.mimeUtils.guessExtensionFromUrl(e.externalurl);this.mimetype=this.mimeUtils.getMimeType(i),this.isImage=this.mimeUtils.isExtensionInGroup(i,["web_image"]),this.isAudio=this.mimeUtils.isExtensionInGroup(i,["web_audio"]),this.isVideo=this.mimeUtils.isExtensionInGroup(i,["web_video"]),this.isOther=!this.isImage&&!this.isAudio&&!this.isVideo}if(this.shouldIframe||this.shouldEmbed&&!this.isImage&&!this.isAudio&&!this.isVideo){var o=this.sitesProvider.getCurrentSite();if(o&&o.containsUrl(this.url))return o.getAutoLoginUrl(this.url,!1).then(function(e){n.url=e})}return Promise.resolve()},n.prototype.logView=function(){var e=this;return this.urlProvider.logView(this.module.instance).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(){})},n.prototype.go=function(){this.logView(),this.urlHelper.open(this.url)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return c});var i=t(0),o=t(1),r=(t(9),t(68)),l=t(139),s=t(209),a=(t(257),t(289)),u=(t(149),t(608)),c=function(e){function n(n,t,i,o,r,l,u,c,d,f){var p=e.call(this,n,i)||this;return p.wikiProvider=t,p.content=i,p.wikiOffline=o,p.wikiSync=r,p.navCtrl=l,p.utils=u,p.groupsProvider=c,p.userProvider=d,p.popoverCtrl=f,p.component=s.a.COMPONENT,p.moduleName="wiki",p.canEdit=!1,p.pageStr="",p.loadedSubwikis=[],p.selectedTab=0,p.map=[],p.subwikiData={subwikiSelected:0,userSelected:0,groupSelected:0,subwikis:[],count:0},p.syncEventName=a.a.AUTO_SYNCED,p.hasEdited=!1,p.mapInitialized=!1,p.initHomeButton=!0,p.pageStr=p.translate.instant("addon.mod_wiki.wikipage"),p}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.isMainPage=!this.pageId&&!this.pageTitle,this.currentPage=this.pageId,this.selectedTab="map"==this.action?1:0,this.loadContent(!1,!0).then(function(){n.wiki&&(n.isMainPage?n.wikiProvider.logView(n.wiki.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}):n.wikiProvider.logPageView(n.pageId).catch(function(){}))}),this.manualSyncObserver=this.eventsProvider.on(a.a.MANUAL_SYNCED,function(e){if(e&&n.wiki&&e.wikiId==n.wiki.id){if(n.ignoreManualSyncEvent)return void(n.ignoreManualSyncEvent=!1);n.currentSubwiki&&n.checkPageCreatedOrDiscarded(e.subwikis[n.currentSubwiki.id]),n.pageWarning||n.showLoadingAndFetch(!1,!1)}},this.siteId)},n.prototype.checkPageCreatedOrDiscarded=function(e){if(!this.currentPage&&e){for(var n=void 0,t=0,i=e.created.length;t<i;t++){if((o=e.created[t]).title==this.pageTitle){n=o.pageId;break}}if(n)this.currentPage=n,this.pageIsOffline=!1;else for(t=0,i=e.discarded.length;t<i;t++){var o;(o=e.discarded[t]).title==this.pageTitle&&(this.pageWarning=o.warning,this.pageContent="",this.pageIsOffline=!1,this.hasOffline=!1)}}},n.prototype.constructMap=function(e){var n,t,i=this;this.map=[],this.mapInitialized=!0,e.sort(function(e,n){var t=e.title.toLowerCase().trim(),i=n.title.toLowerCase().trim();return t.localeCompare(i)}),e.forEach(function(e){var o=e.title.charAt(0).toLocaleUpperCase();o!==t&&(t=o,i.map.push(n={label:o,pages:[]})),n.pages.push(e)})},n.prototype.fetchContent=function(e,n,t){var i=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);return(this.module.id?this.wikiProvider.getWiki(this.courseId,this.module.id):this.wikiProvider.getWikiById(this.courseId,this.wikiId)).then(function(e){if(i.wiki=e,i.dataRetrieved.emit(i.wiki),n)return i.syncActivity(t).catch(function(){})}).then(function(){if(i.pageWarning)return Promise.reject(null);(i.isCurrentView||i.initHomeButton)&&(i.initHomeButton=!1,i.showHomeButton=!!i.getWikiHomeView());return(i.module.id?Promise.resolve(i.module):i.courseProvider.getModule(i.wiki.coursemodule,i.wiki.course,void 0,!0)).then(function(e){return i.module=e,i.description=i.wiki.intro||i.module.description,i.externalUrl=i.module.url,i.componentId=i.module.id,i.groupsProvider.getActivityGroupMode(i.wiki.coursemodule).then(function(e){return(e===r.a.SEPARATEGROUPS||e===r.a.VISIBLEGROUPS?i.groupsProvider.getActivityAllowedGroups(i.wiki.coursemodule):Promise.resolve([])).then(function(e){return i.fetchSubwikis(i.wiki.id).then(function(){var n=i.wikiProvider.getSubwikiList(i.wiki.id);if(!n)return i.createSubwikiList(e);i.subwikiData.count=n.count,i.setSelectedWiki(i.subwikiId,i.userId,i.groupId),i.isAnySubwikiSelected()||i.setSelectedWiki(n.subwikiSelected,n.userSelected,n.groupSelected),i.subwikiData.subwikis=n.subwikis})}).then(function(){if(!i.isAnySubwikiSelected()||i.subwikiData.count<=0)return Promise.reject(i.translate.instant("addon.mod_wiki.errornowikiavailable"))}).then(function(){return i.fetchWikiPage()})})})}).then(function(){i.fillContextMenu(e)}).catch(function(e){if(!i.pageWarning)return Promise.reject(e)})},n.prototype.fetchPageContents=function(e){var n=this;if(!e){var t=this.pageTitle||this.wiki.firstpagetitle;return this.wikiOffline.getNewPage(t,this.currentSubwiki.id,this.currentSubwiki.wikiid,this.currentSubwiki.userid,this.currentSubwiki.groupid).then(function(e){return n.pageIsOffline=!0,n.newPageObserver||(n.newPageObserver=n.eventsProvider.on(s.a.PAGE_CREATED_EVENT,function(e){e.subwikiId==n.currentSubwiki.id&&e.pageTitle==t&&(n.currentPage=e.pageId,n.showLoadingAndFetch(!0,!1).then(function(){n.wikiProvider.logPageView(n.currentPage).catch(function(){})}),n.newPageObserver.off(),n.newPageObserver=void 0)},n.sitesProvider.getCurrentSiteId())),e}).catch(function(){})}return this.pageIsOffline=!1,this.wikiProvider.getPageContents(e)},n.prototype.fetchSubwikiPages=function(e){var n,t=this;return this.wikiProvider.getSubwikiPages(e.wikiid,e.groupid,e.userid).then(function(i){if(n=i,!t.currentPage&&!t.pageTitle)for(var o in n){var r=n[o];if(r.firstpage){t.currentPage=r.id;break}}return t.wikiOffline.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid)}).then(function(e){if(!t.currentPage){var i=t.pageTitle?t.pageTitle:t.wiki.firstpagetitle;e.some(function(e){return e.title==i})&&(t.pageTitle=i)}if(t.subwikiPages=t.wikiProvider.sortPagesByTitle(n.concat(e)),t.constructMap(t.subwikiPages),!t.currentPage&&!t.pageTitle&&t.subwikiPages.length>0)return Promise.reject(null)})},n.prototype.fetchSubwikis=function(e){var n=this;return this.wikiProvider.getSubwikis(e).then(function(e){return n.loadedSubwikis=e,n.wikiOffline.subwikisHaveOfflineData(e).then(function(e){n.hasOffline=e})})},n.prototype.fetchWikiPage=function(){var e=this;return this.currentSubwiki=this.loadedSubwikis.find(function(n){return e.isSubwikiSelected(n)}),this.currentSubwiki?(this.setSelectedWiki(this.currentSubwiki.id,this.currentSubwiki.userid,this.currentSubwiki.groupid),this.fetchSubwikiPages(this.currentSubwiki).then(function(){return e.canEdit=e.currentSubwiki.canedit,e.fetchPageContents(e.currentPage).then(function(n){n&&(e.dataRetrieved.emit(n.title),e.setSelectedWiki(n.subwikiid,n.userid,n.groupid),e.pageContent=e.replaceEditLinks(n.cachedcontent),e.canEdit=n.caneditpage,e.currentPageObj=n)})})):Promise.reject(null)},n.prototype.getWikiHomeView=function(){if(this.wiki.id)for(var e=this.navCtrl.getViews(),n=e.length-2;n>=0;n--){var t=e[n];if("AddonModWikiIndexPage"!=t.component.name){if(n==e.length-2)return;return e[n+1]}var i=t.data.wikiId?t.data.wikiId:t.data.module.instance;if(!i||i!=this.wiki.id)return e[n+1]}},n.prototype.goToWikiHome=function(){var e=this.getWikiHomeView();e&&this.navCtrl.popTo(e)},n.prototype.goToCreateFirstPage=function(){this.navCtrl.push("AddonModWikiEditPage",{module:this.module,courseId:this.courseId,pageTitle:this.wiki.firstpagetitle,wikiId:this.currentSubwiki.wikiid,userId:this.currentSubwiki.userid,groupId:this.currentSubwiki.groupid})},n.prototype.goToEditPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,pageId:this.currentPageObj.id,pageTitle:this.currentPageObj.title,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},n.prototype.goToNewPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},n.prototype.goToPage=function(e){var n=this;if(e.id){if(this.currentPage!=e.id)return void this.fetchPageContents(e.id).then(function(e){n.navCtrl.push("AddonModWikiIndexPage",{module:n.module,courseId:n.courseId,pageTitle:e.title,pageId:e.id,wikiId:e.wikiid,subwikiId:e.subwikiid,action:"page"})})}else if(this.currentPage||!this.pageTitle||e.title!=this.pageTitle)return void this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,pageTitle:e.title,wikiId:this.wiki.id,subwikiId:e.subwikiid,action:"page"});this.tabs.selectTab(0)},n.prototype.goToSubwiki=function(e,n,t,i){(e>0||i)&&(e==this.currentSubwiki.id&&n==this.currentSubwiki.userid&&t==this.currentSubwiki.groupid||this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,wikiId:this.wiki.id,subwikiId:e,userId:n,groupId:t,action:0==this.tabs.selected?"page":"map"}))},n.prototype.isAnySubwikiSelected=function(){return this.subwikiData.subwikiSelected>0||this.subwikiData.userSelected>0||this.subwikiData.groupSelected>0},n.prototype.isSubwikiSelected=function(e){var n=parseInt(e.id,10)||0;if(n>0&&this.subwikiData.subwikiSelected>0)return n==this.subwikiData.subwikiSelected;var t=parseInt(e.userid,10)||0,i=parseInt(e.groupid,10)||0;return t==this.subwikiData.userSelected&&i==this.subwikiData.groupSelected},n.prototype.replaceEditLinks=function(e){if((e=e.trim()).length>0){var n=this.textUtils.concatenatePaths(this.sitesProvider.getCurrentSite().getURL(),"/mod/wiki/edit.php");e=e.replace(/href="edit\.php/g,'href="'+n)}return e},n.prototype.setSelectedWiki=function(e,n,t){this.subwikiData.subwikiSelected=this.wikiOffline.convertToPositiveNumber(e),this.subwikiData.userSelected=this.wikiOffline.convertToPositiveNumber(n),this.subwikiData.groupSelected=this.wikiOffline.convertToPositiveNumber(t)},n.prototype.hasSyncSucceed=function(e){return e.wikiId=this.wiki.id,e.updated&&(this.ignoreManualSyncEvent=!0,this.eventsProvider.trigger(a.a.MANUAL_SYNCED,e)),this.currentSubwiki&&this.checkPageCreatedOrDiscarded(e.subwikis[this.currentSubwiki.id]),e.updated},n.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabs&&this.tabs.ionViewDidEnter(),this.hasEdited&&(this.hasEdited=!1,this.showLoadingAndRefresh(!0,!1))},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.tabs&&this.tabs.ionViewDidLeave(),"AddonModWikiEditPage"==this.navCtrl.getActive().component.name&&(this.hasEdited=!0)},n.prototype.invalidateContent=function(){var e=[];return e.push(this.wikiProvider.invalidateWikiData(this.courseId)),this.wiki&&(e.push(this.wikiProvider.invalidateSubwikis(this.wiki.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.wiki.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.wiki.coursemodule))),this.currentSubwiki&&(e.push(this.wikiProvider.invalidateSubwikiPages(this.currentSubwiki.wikiid)),e.push(this.wikiProvider.invalidateSubwikiFiles(this.currentSubwiki.wikiid))),this.currentPage&&e.push(this.wikiProvider.invalidatePage(this.currentPage)),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return this.currentSubwiki&&e.subwikiId==this.currentSubwiki.id&&e.wikiId==this.currentSubwiki.wikiid&&e.userId==this.currentSubwiki.userid&&e.groupId==this.currentSubwiki.groupid&&(this.isCurrentView&&e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),this.checkPageCreatedOrDiscarded(e)),!this.pageWarning},n.prototype.showSubwikiPicker=function(e){var n=this,t=this.popoverCtrl.create(u.a,{subwikis:this.subwikiData.subwikis,currentSubwiki:this.currentSubwiki});t.onDidDismiss(function(e){e&&n.goToSubwiki(e.id,e.userid,e.groupid,e.canedit)}),t.present({ev:e})},n.prototype.sync=function(){return this.wikiSync.syncWiki(this.wiki.id,this.courseId,this.wiki.coursemodule)},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.manualSyncObserver&&this.manualSyncObserver.off(),this.newPageObserver&&this.newPageObserver.off()},n.prototype.createSubwikiList=function(e){var n=this,t=[],i=[],o=[],r=!1,l=!1,s=!1;return this.subwikiData.subwikis=[],this.setSelectedWiki(this.subwikiId,this.userId,this.groupId),this.subwikiData.count=0,e.length>0&&(o=e.map(function(e){return e.id})),this.loadedSubwikis.forEach(function(a){var u=parseInt(a.groupid,10),c=parseInt(a.userid,10),d="";if(0==u&&0==c)r||(t.unshift({name:n.translate.instant("core.allparticipants"),id:a.id,userid:c,groupid:u,groupLabel:"",canedit:a.canedit}),r=!0);else{if(0!=u&&o.length>0){var f=o.indexOf(u);f>-1&&(d=e[f].name)}else d=n.translate.instant("addon.mod_wiki.notingroup");0!=c?(i.push(n.userProvider.getProfile(c,n.courseId,!0).then(function(e){t.push({name:e.fullname,id:a.id,userid:c,groupid:u,groupLabel:d,canedit:a.canedit})})),s||0==u||(s=!0)):(t.push({name:d,id:a.id,userid:c,groupid:u,groupLabel:d,canedit:a.canedit}),l=!0)}}),Promise.all(i).then(function(){n.fillSubwikiData(t,l,s)})},n.prototype.fillSubwikiData=function(e,n,t){var i,o=-1;if(e.sort(function(e,n){return e.groupid-n.groupid}),this.subwikiData.count=e.length,(!this.subwikiId||!this.userId&&!this.groupId)&&!this.isAnySubwikiSelected()&&e.length>0){var r=void 0,l=void 0,s=void 0;for(var a in e){var u=e[a];if(u.canedit){var c=void 0;if(u.userid>0?this.currentUserId==u.userid&&(c=u.id):u.groupid>0?n&&(c=u.id):u.id>0&&(c=u.id),void 0!==c){if(c>0){s=a;break}void 0===l&&(l=a)}else void 0===r&&(r=a)}}void 0!==(h=e[void 0!==s?s:void 0!==l?l:void 0!==r?r:0])&&this.setSelectedWiki(h.id,h.userid,h.groupid)}if(t)for(var a in e){(h=e[a]).groupid!==o&&(o=h.groupid,this.subwikiData.subwikis.push(i={label:h.groupLabel,subwikis:[]})),i.subwikis.push(h)}else if(n){var d={label:"",subwikis:[]},f={label:this.translate.instant("core.mygroups"),subwikis:[]},p={label:this.translate.instant("core.othergroups"),subwikis:[]};for(var a in e){var h;void 0===(h=e[a]).canedit?d.subwikis.push(h):h.canedit?f.subwikis.push(h):p.subwikis.push(h)}d.subwikis.length>0&&this.subwikiData.subwikis.push(d),f.subwikis.length>0&&this.subwikiData.subwikis.push(f),p.subwikis.length>0&&this.subwikiData.subwikis.push(p)}else this.subwikiData.subwikis.push({label:"",subwikis:e});this.wikiProvider.setSubwikiList(this.wiki.id,this.subwikiData.subwikis,this.subwikiData.count,this.subwikiData.subwikiSelected,this.subwikiData.userSelected,this.subwikiData.groupSelected)},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(l.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(150),s=(t(173),t(290)),a=(t(163),function(e){function n(n,t,i,o,r,a,u,c,d,f,p){var h=e.call(this,n,i)||this;return h.workshopProvider=t,h.workshopOffline=o,h.groupsProvider=r,h.navCtrl=a,h.modalCtrl=u,h.utils=c,h.workshopHelper=f,h.workshopSync=p,h.group=0,h.moduleName="workshop",h.page=0,h.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},h.canSubmit=!1,h.canAssess=!1,h.hasNextPage=!1,h.workshopPhases={PHASE_SETUP:l.a.PHASE_SETUP,PHASE_SUBMISSION:l.a.PHASE_SUBMISSION,PHASE_ASSESSMENT:l.a.PHASE_ASSESSMENT,PHASE_EVALUATION:l.a.PHASE_EVALUATION,PHASE_CLOSED:l.a.PHASE_CLOSED},h.offlineSubmissions=[],h.obsSubmissionChanged=h.eventsProvider.on(l.a.SUBMISSION_CHANGED,function(e){h.eventReceived(e)},h.siteId),h.obsAssessmentSaved=h.eventsProvider.on(l.a.ASSESSMENT_SAVED,function(e){h.eventReceived(e)},h.siteId),h.appResumeSubscription=d.resume.subscribe(function(){h.showLoadingAndRefresh(!0)}),h.syncObserver=h.eventsProvider.on(s.a.AUTO_SYNCED,function(e){h.eventReceived(e)},h.siteId),h}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.workshop&&n.workshopProvider.logView(n.workshop.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})})},n.prototype.eventReceived=function(e){(this.workshop&&this.workshop.id===e.workshopId||e.cmId===this.module.id)&&(this.showLoadingAndRefresh(!0),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},n.prototype.invalidateContent=function(){var e=[];return e.push(this.workshopProvider.invalidateWorkshopData(this.courseId)),this.workshop&&(e.push(this.workshopProvider.invalidateWorkshopAccessInformationData(this.workshop.id)),e.push(this.workshopProvider.invalidateUserPlanPhasesData(this.workshop.id)),this.canSubmit&&e.push(this.workshopProvider.invalidateSubmissionsData(this.workshop.id)),this.access.canviewallsubmissions&&(e.push(this.workshopProvider.invalidateGradeReportData(this.workshop.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.workshop.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.workshop.coursemodule))),this.canAssess&&e.push(this.workshopProvider.invalidateReviewerAssesmentsData(this.workshop.id)),e.push(this.workshopProvider.invalidateGradesData(this.workshop.id))),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.workshop||e.workshopId!=this.workshop.id)&&(this.domUtils.scrollToTop(this.content),!0)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.workshopProvider.getWorkshop(this.courseId,this.module.id).then(function(e){if(i.workshop=e,i.description=e.intro||e.description,i.dataRetrieved.emit(e),n)return i.syncActivity(t)}).then(function(){return i.workshopProvider.getWorkshopAccessInformation(i.workshop.id)}).then(function(e){if(i.access=e,e.canviewallsubmissions)return i.groupsProvider.getActivityGroupInfo(i.workshop.coursemodule,e.canviewallsubmissions).then(function(e){if(i.groupInfo=e,e&&e.groups&&e.groups.length>0){e.groups.some(function(e){return e.id==i.group})||(i.group=e.groups[0].id)}})}).then(function(){return i.workshopProvider.getUserPlanPhases(i.workshop.id)}).then(function(e){return i.phases=e,e[i.workshop.phase].tasks.forEach(function(e){e.link||"examples"!=e.code&&"prepareexamples"!=e.code||(e.link=i.externalUrl)}),i.workshopOffline.hasWorkshopOfflineData(i.workshop.id).then(function(e){if(i.hasOffline=e,e)return i.workshopOffline.getSubmissions(i.workshop.id).then(function(e){i.offlineSubmissions=e});i.offlineSubmissions=[]})}).then(function(){return i.setPhaseInfo()}).then(function(){i.fillContextMenu(e)})},n.prototype.gotoSubmissionsPage=function(e){var n=this;return this.workshopProvider.getGradesReport(this.workshop.id,this.group,e).then(function(t){var i=t&&t.grades&&t.grades.length||0;n.page=e,n.hasNextPage=i>=l.a.PER_PAGE&&(n.page+1)*l.a.PER_PAGE<t.totalcount,n.grades=t.grades||[],n.grades.forEach(function(e){var t=n.workshopHelper.filterSubmissionActions(n.offlineSubmissions,e.submissionid||!1);return e=n.workshopHelper.applyOfflineData(e,t),n.workshopHelper.applyOfflineData(e,t).then(function(n){e=n})})})},n.prototype.runTask=function(e){"submit"==e.code?this.gotoSubmit():e.link&&this.utils.openInBrowser(e.link)},n.prototype.gotoSubmit=function(){if(this.canSubmit&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission)){this.navCtrl.push("AddonModWorkshopEditSubmissionPage",{module:this.module,access:this.access,courseId:this.courseId,submissionId:this.submission&&this.submission.id})}},n.prototype.viewPhaseInfo=function(){var e=this;if(this.phases){var n=this.modalCtrl.create("AddonModWorkshopPhaseInfoPage",{phases:this.utils.objectToArray(this.phases),workshopPhase:this.workshop.phase,externalUrl:this.externalUrl});n.onDidDismiss(function(n){n&&e.gotoSubmit()}),n.present()}},n.prototype.setGroup=function(e){return this.group=e,this.gotoSubmissionsPage(0)},n.prototype.setPhaseInfo=function(){var e=this;this.submission=!1,this.canAssess=!1,this.assessments=!1,this.userGrades=!1,this.publishedSubmissions=!1,this.canSubmit=this.workshopHelper.canSubmit(this.workshop,this.access,this.phases[l.a.PHASE_SUBMISSION].tasks);var n=[];this.canSubmit&&n.push(this.workshopHelper.getUserSubmission(this.workshop.id).then(function(n){var t=e.workshopHelper.filterSubmissionActions(e.offlineSubmissions,n.id||!1);return e.workshopHelper.applyOfflineData(n,t).then(function(n){e.submission=n})})),this.access.canviewallsubmissions&&this.workshop.phase>=l.a.PHASE_SUBMISSION&&n.push(this.gotoSubmissionsPage(this.page));var t=Promise.resolve();return this.workshop.phase>=l.a.PHASE_ASSESSMENT&&(this.canAssess=this.workshopHelper.canAssess(this.workshop,this.access),this.canAssess&&(t=this.workshopHelper.getReviewerAssessments(this.workshop.id).then(function(n){var t=[];return n.forEach(function(n){n.strategy=e.workshop.strategy,e.hasOffline&&t.push(e.workshopOffline.getAssessment(e.workshop.id,n.id).then(function(e){n.offline=!0,n.timemodified=Math.floor(e.timemodified/1e3)}).catch(function(){}))}),Promise.all(t).then(function(){e.assessments=n})}),n.push(t))),this.workshop.phase==l.a.PHASE_CLOSED&&(n.push(this.workshopProvider.getGrades(this.workshop.id).then(function(n){e.userGrades=!(!n.submissionlongstrgrade&&!n.assessmentlongstrgrade)&&n})),this.access.canviewpublishedsubmissions&&n.push(t.then(function(){return e.workshopProvider.getSubmissions(e.workshop.id).then(function(n){e.publishedSubmissions=n.filter(function(n){return!!n.published&&(e.assessments.forEach(function(t){n.reviewedby=[],t.submissionid==n.id&&n.reviewedby.push(e.workshopHelper.realGradeValue(e.workshop,t))}),!0)})})}))),Promise.all(n)},n.prototype.sync=function(){return this.workshopSync.syncWorkshop(this.workshop.id)},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.obsSubmissionChanged&&this.obsSubmissionChanged.off(),this.obsAssessmentSaved&&this.obsAssessmentSaved.off(),this.appResumeSubscription&&this.appResumeSubscription.unsubscribe()},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(96),s=(t(251),t(208),t(293)),a=t(439),u=function(e){function n(n,t,i,o,r,u,c,d,f,p,h,m){var _=e.call(this,n,r)||this;return _.dataProvider=t,_.dataHelper=i,_.dataOffline=o,_.dataSync=u,_.timeUtils=c,_.groupsProvider=d,_.commentsProvider=f,_.modalCtrl=p,_.utils=h,_.navCtrl=m,_.component=l.a.COMPONENT,_.moduleName="data",_.access={},_.data={},_.isEmpty=!1,_.entries={},_.firstEntry=!1,_.canAdd=!1,_.canSearch=!1,_.search={sortBy:"0",sortDirection:"DESC",page:0,text:"",searching:!1,searchingAdvanced:!1,advanced:[]},_.hasNextPage=!1,_.entriesRendered="",_.cssTemplate="",_.extraImports=[a.a],_.syncEventName=s.a.AUTO_SYNCED,_.hasComments=!1,_.entryChangedObserver=_.eventsProvider.on(l.a.ENTRY_CHANGED,function(e){if(_.data.id==e.dataId)return _.loaded=!1,_.loadContent(!0)},_.siteId),_}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.selectedGroup=this.group||0,this.loadContent(!1,!0).then(function(){n.data&&n.dataProvider.logView(n.data.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.dataProvider.invalidateDatabaseData(this.courseId)),this.data&&(e.push(this.dataProvider.invalidateDatabaseAccessInformationData(this.data.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.data.coursemodule)),e.push(this.dataProvider.invalidateEntriesData(this.data.id)),this.hasComments&&e.push(this.commentsProvider.invalidateCommentsByInstance("module",this.data.coursemodule))),Promise.all(e)},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.data||e.dataId!=this.data.id||void 0!==e.entryId)&&(this.loaded=!1,this.domUtils.scrollToTop(this.content),!0)},n.prototype.fetchContent=function(e,n,t){var i=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);var o=!1,r=!1;return this.dataProvider.getDatabase(this.courseId,this.module.id).then(function(e){if(i.data=e,i.description=e.intro||e.description,i.dataRetrieved.emit(e),n)return i.syncActivity(t).catch(function(){})}).then(function(){return i.dataProvider.getDatabaseAccessInformation(i.data.id)}).then(function(e){if(i.access=e,!e.timeavailable){var n=i.timeUtils.timestamp();return i.timeAvailableFrom=!!(i.data.timeavailablefrom&&n<i.data.timeavailablefrom)&&1e3*parseInt(i.data.timeavailablefrom,10),i.timeAvailableFromReadable=!!i.timeAvailableFrom&&i.timeUtils.userDate(i.timeAvailableFrom),i.timeAvailableTo=!!(i.data.timeavailableto&&n>i.data.timeavailableto)&&1e3*parseInt(i.data.timeavailableto,10),i.timeAvailableToReadable=!!i.timeAvailableTo&&i.timeUtils.userDate(i.timeAvailableTo),i.isEmpty=!0,void(i.groupInfo=null)}return r=!0,o=e.canaddentry,i.groupsProvider.getActivityGroupInfo(i.data.coursemodule,e.canmanageentries).then(function(e){return i.groupInfo=e,e&&e.groups&&e.groups.length>0&&(e.groups.some(function(e){return i.selectedGroup==e.id})||(i.selectedGroup=e.groups[0].id)),i.fetchOfflineEntries()})}).then(function(){return i.dataProvider.getFields(i.data.id).then(function(e){return 0==e.length&&(r=!1,o=!1),i.search.advanced=[],i.fields=i.utils.arrayToObject(e,"id"),i.fieldsArray=i.utils.objectToArray(i.fields),i.fetchEntriesData()})}).then(function(){i.fillContextMenu(e)}).finally(function(){i.canAdd=o,i.canSearch=r})},n.prototype.fetchEntriesData=function(){var e=this;return this.hasComments=!1,this.dataProvider.getDatabaseAccessInformation(this.data.id,this.selectedGroup).then(function(n){if(e.access.canaddentry=n.canaddentry,e.search.searching){return e.dataProvider.searchEntries(e.data.id,e.selectedGroup,e.search.searchingAdvanced?void 0:e.search.text,e.search.searchingAdvanced?e.search.advanced:void 0,e.search.sortBy,e.search.sortDirection,e.search.page)}return e.dataProvider.getEntries(e.data.id,e.selectedGroup,e.search.sortBy,e.search.sortDirection,e.search.page)}).then(function(n){var t=n&&n.entries&&n.entries.length||0;if(e.isEmpty=!t&&!Object.keys(e.offlineActions).length&&!Object.keys(e.offlineEntries).length,e.hasNextPage=t>=l.a.PER_PAGE&&(e.search.page+1)*l.a.PER_PAGE<n.totalcount,e.entriesRendered="",e.foundRecordsData=void 0!==n.maxcount?{num:n.totalcount,max:n.maxcount,reseturl:"#"}:void 0,!e.isEmpty){e.cssTemplate=e.dataHelper.prefixCSS(e.data.csstemplate,".addon-data-entries-"+e.data.id);var i=e.sitesProvider.getCurrentSite().getInfo(),o=[];return e.utils.objectToArray(e.offlineEntries).forEach(function(n){var t=n.find(function(e){return"add"==e.action});if(t){var r={id:t.entryid,canmanageentry:!0,approved:!e.data.approval||e.data.manageapproved,dataid:t.dataid,groupid:t.groupid,timecreated:-t.entryid,timemodified:-t.entryid,userid:i.userid,fullname:i.fullname,contents:{}};o.push(n.length>0?e.dataHelper.applyOfflineActions(r,n,e.fieldsArray):Promise.resolve(r))}}),n.entries.forEach(function(n){n.contents=e.utils.arrayToObject(n.contents,"fieldid"),o.push(void 0!==e.offlineActions[n.id]?e.dataHelper.applyOfflineActions(n,e.offlineActions[n.id],e.fieldsArray):Promise.resolve(n))}),Promise.all(o).then(function(n){var t=e.data.listtemplateheader||"";!n||!n[0]||e.search.searching&&e.firstEntry||(e.firstEntry=n[0].id);var i=e.data.listtemplate||e.dataHelper.getDefaultTemplate("list",e.fieldsArray);n.forEach(function(n){e.entries[n.id]=n;var o=e.dataHelper.getActions(e.data,e.access,n);t+=e.dataHelper.displayShowFields(i,e.fieldsArray,n,"list",o)}),e.entriesRendered=t+=e.data.listtemplatefooter||"",e.jsData={fields:e.fields,entries:e.entries,data:e.data,gotoEntry:e.gotoEntry.bind(e)}})}e.search.searching||(e.canSearch=!1),e.firstEntry=!1})},n.prototype.showSearch=function(){var e=this,n=this.modalCtrl.create("AddonModDataSearchPage",{search:this.search,fields:this.fields,data:this.data});n.onDidDismiss(function(n){n&&(e.search=n,e.searchEntries(0))}),n.present()},n.prototype.searchEntries=function(e){var n=this;return this.loaded=!1,this.search.page=e,this.fetchEntriesData().catch(function(e){n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){n.loaded=!0})},n.prototype.searchReset=function(){this.search.sortBy="0",this.search.sortDirection="DESC",this.search.text="",this.search.advanced=[],this.search.searchingAdvanced=!1,this.search.searching=!1,this.searchEntries(0)},n.prototype.setGroup=function(e){var n=this;return this.selectedGroup=e,this.fetchEntriesData().catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},n.prototype.gotoAddEntries=function(){this.navCtrl.push("AddonModDataEditPage",{module:this.module,courseId:this.courseId,group:this.selectedGroup})},n.prototype.gotoEntry=function(e){this.navCtrl.push("AddonModDataEntryPage",{module:this.module,courseId:this.courseId,entryId:e,group:this.selectedGroup})},n.prototype.fetchOfflineEntries=function(){var e=this;return this.dataOffline.getDatabaseEntries(this.data.id).then(function(n){e.hasOffline=!!n.length,e.offlineActions={},e.offlineEntries={},0==e.search.page&&e.hasOffline&&n.forEach(function(n){n.entryid>0?(void 0===e.offlineActions[n.entryid]&&(e.offlineActions[n.entryid]=[]),e.offlineActions[n.entryid].push(n)):(void 0===e.offlineActions[n.entryid]&&(e.offlineEntries[n.entryid]=[]),e.offlineEntries[n.entryid].push(n))})})},n.prototype.sync=function(){return this.dataSync.syncDatabase(this.data.id)},n.prototype.hasSyncSucceed=function(e){return e.updated},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.entryChangedObserver&&this.entryChangedObserver.off()},n=Object(i.__decorate)([Object(i.__param)(4,Object(o.E)())],n)}(r.a)},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(205),t(338);var i=function(){function e(e,n,t,i,o){this.navCtrl=e,this.appProvider=n,this.domUtils=t,this.competencyProvider=i,this.helperProvider=o,this.competenciesLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.fetchCourseCompetencies().finally(function(){e.competenciesLoaded=!0})},e.prototype.fetchCourseCompetencies=function(){var e=this;return this.competencyProvider.getCourseCompetencies(this.courseId,this.userId).then(function(n){e.competencies=n,e.helperProvider.getProfile(e.userId).then(function(n){e.user=n})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting course competencies data.")})},e.prototype.openCompetency=function(e){this.appProvider.isWide()?this.navCtrl.push("AddonCompetencyCompetenciesPage",{competencyId:e,courseId:this.courseId,userId:this.userId}):this.navCtrl.push("AddonCompetencyCompetencyPage",{competencyId:e,courseId:this.courseId,userId:this.userId})},e.prototype.openCompetencySummary=function(e){this.navCtrl.push("AddonCompetencyCompetencySummaryPage",{competencyId:e})},e.prototype.refreshCourseCompetencies=function(e){var n=this;this.competencyProvider.invalidateCourseCompetencies(this.courseId,this.userId).finally(function(){n.fetchCourseCompetencies().finally(function(){e.complete()})})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(144);var i=function(){function e(e,n,t){this.sitesProvider=e,this.domUtils=n,this.courseCompletionProvider=t,this.completionLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.userId||(this.userId=this.sitesProvider.getCurrentSiteUserId()),this.fetchCompletion().finally(function(){e.completionLoaded=!0})},e.prototype.fetchCompletion=function(){var e=this;return this.courseCompletionProvider.getCompletion(this.courseId,this.userId).then(function(n){n.statusText=e.courseCompletionProvider.getCompletedStatusText(n),e.completion=n,e.showSelfComplete=e.courseCompletionProvider.canMarkSelfCompleted(e.userId,n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.coursecompletion.couldnotloadreport",!0)})},e.prototype.refreshCompletion=function(e){var n=this;this.courseCompletionProvider.invalidateCourseCompletion(this.courseId,this.userId).finally(function(){n.fetchCompletion().finally(function(){e&&e.complete()})})},e.prototype.completeCourse=function(){var e=this,n=this.domUtils.showModalLoading("core.sending",!0);this.courseCompletionProvider.markCourseAsSelfCompleted(this.courseId).then(function(){return e.refreshCompletion()}).catch(function(n){e.domUtils.showErrorModal(n)}).finally(function(){n.dismiss()})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(45),t(35);var i=function(){function e(e,n){this.userProvider=e,this.domUtils=n,this.participants=[],this.canLoadMore=!1,this.loadMoreError=!1,this.participantsLoaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.fetchData(!0).then(function(){!e.participantId&&e.splitviewCtrl.isOn()&&e.participants.length>0&&e.gotoParticipant(e.participants[0].id),e.userProvider.logParticipantsView(e.courseId).catch(function(){})}).finally(function(){e.participantsLoaded=!0,e.content&&e.content.resize()})},e.prototype.fetchData=function(e){var n=this;void 0===e&&(e=!1);var t=e?0:this.participants.length;return this.loadMoreError=!1,this.userProvider.getParticipants(this.courseId,t).then(function(t){n.participants=e?t.participants:n.participants.concat(t.participants),n.canLoadMore=t.canLoadMore}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error loading participants"),n.loadMoreError=!0})},e.prototype.loadMoreData=function(e){return this.fetchData().finally(function(){e&&e()})},e.prototype.refreshParticipants=function(e){var n=this;this.userProvider.invalidateParticipantsList(this.courseId).finally(function(){n.fetchData(!0).finally(function(){e.complete()})})},e.prototype.gotoParticipant=function(e){this.participantId=e,this.splitviewCtrl.push("CoreUserProfilePage",{userId:e,courseId:this.courseId})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9);var i=t(150),o=(t(173),t(163),function(){function e(e,n,t,o,r){this.workshopOffline=e,this.workshopHelper=n,this.navCtrl=t,this.userProvider=o,this.component=i.a.COMPONENT,this.loaded=!1,this.offline=!1,this.viewDetails=!1,this.userId=r.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return e.prototype.ngOnInit=function(){var e=this;this.componentId=this.module.instance,this.userId=this.submission.authorid||this.submission.userid||this.userId,this.submission.title=this.submission.title||this.submission.submissiontitle,this.submission.timemodified=this.submission.timemodified||this.submission.submissionmodified,this.submission.id=this.submission.id||this.submission.submissionid,this.workshop.phase==i.a.PHASE_ASSESSMENT&&(this.submission.reviewedby&&this.submission.reviewedby.length&&(this.submission.reviewedbycount=this.submission.reviewedby.reduce(function(e,n){return e+(n.grade?1:0)},0)),this.submission.reviewerof&&this.submission.reviewerof.length&&(this.submission.reviewerofcount=this.submission.reviewerof.reduce(function(e,n){return e+(n.grade?1:0)},0)));var n=[];this.offline=this.submission&&this.submission.offline||this.assessment&&this.assessment.offline,this.submission.id&&n.push(this.workshopOffline.getEvaluateSubmission(this.workshop.id,this.submission.id).then(function(n){e.submission.submissiongradeover=n.gradeover,e.offline=!0}).catch(function(){})),this.userId&&n.push(this.userProvider.getProfile(this.userId,this.courseId,!0).then(function(n){e.profile=n})),this.viewDetails=!this.summary&&this.workshop.phase==i.a.PHASE_CLOSED&&"AddonModWorkshopSubmissionPage"!==this.navCtrl.getActive().name,this.viewDetails&&this.submission.gradeoverby&&n.push(this.userProvider.getProfile(this.submission.gradeoverby,this.courseId,!0).then(function(n){e.evaluateByProfile=n})),Promise.all(n).finally(function(){e.loaded=!0})},e.prototype.gotoSubmission=function(){if(this.submission.timemodified){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},e}())},function(e,n,t){"use strict";function i(e){return o._42(0,[o._37(402653184,1,{compileComponent:0}),(e()(),o._16(1,0,null,null,5,"core-loading",[],null,null,null,r.b,r.a)),o._15(2,638976,null,0,l.a,[s.a,o.p,a.a,u.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(4,0,null,0,1,"core-compile-html",[],null,null,null,c.b,c.a)),o._15(5,966656,[[1,4],["compile",4]],0,d.a,[f.a,o.i,o.p,[2,p.a],o.w,h.a,u.a],{text:[0,"text"],javascript:[1,"javascript"],jsData:[2,"jsData"],forceCompile:[3,"forceCompile"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.dataLoaded);e(n,5,0,t.content,t.javascript,t.jsData,t.forceCompile)},null)}t.d(n,"a",function(){return m}),n.b=i;var o=t(1),r=t(49),l=t(48),s=t(19),a=t(13),u=t(3),c=t(195),d=t(169),f=t(138),p=t(22),h=t(5),m=(t(57),o._14({encapsulation:2,styles:[],data:{}}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n){if(void 0===require("os")){var t=new Error("Cannot find module \"require('os')\"");throw t.code="MODULE_NOT_FOUND",t}e.exports=require("os")},,function(e,n,t){"use strict";t(0),t(1);var i=t(4),o=t(242),r=t(10),l=t(389),s=t(13),a=t(50),u=t(6),c=t(198),d=t(5),f=t(11),p=t(25),h=t(26),m=t(3),_=t(40),g=t(137),v=t(180),y=function(){function e(e,n,t,_,g,v,y,b){this.id=n,this.siteUrl=t,this.token=_,this.infos=g,this.privateToken=v,this.config=y,this.loggedOut=b,this.WS_CACHE_TABLE="wscache",this.CONFIG_TABLE="core_site_config",this.tableSchemas=[{name:this.WS_CACHE_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"data",type:"TEXT"},{name:"key",type:"TEXT"},{name:"expirationTime",type:"INTEGER"}]},{name:this.CONFIG_TABLE,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]}],this.MOODLE_RELEASES={3.1:2016052300,3.2:2016120500,3.3:2017051503,3.4:2017111300,3.5:2018051700,3.6:2018120300},this.cleanUnicode=!1,this.lastAutoLogin=0,this.offlineDisabled=!1;var P=e.get(u.a);this.appProvider=e.get(r.a),this.dbProvider=e.get(l.a),this.domUtils=e.get(d.a),this.eventsProvider=e.get(s.a),this.fileProvider=e.get(a.a),this.http=e.get(o.c),this.textUtils=e.get(f.a),this.timeUtils=e.get(p.a),this.translate=e.get(i.b),this.utils=e.get(m.a),this.urlUtils=e.get(h.a),this.wsProvider=e.get(c.a),this.logger=P.getInstance("CoreWSProvider"),this.calculateOfflineDisabled(),this.id&&this.initDB()}return e.prototype.initDB=function(){this.db=this.dbProvider.getDB("Site-"+this.id),this.db.createTablesFromSchema(this.tableSchemas)},e.prototype.getId=function(){return this.id},e.prototype.getURL=function(){return this.siteUrl},e.prototype.getToken=function(){return this.token},e.prototype.getInfo=function(){return this.infos},e.prototype.getPrivateToken=function(){return this.privateToken},e.prototype.getDb=function(){return this.db},e.prototype.getUserId=function(){if(void 0!==this.infos&&void 0!==this.infos.userid)return this.infos.userid},e.prototype.getSiteHomeId=function(){return this.infos&&this.infos.siteid||1},e.prototype.setId=function(e){this.id=e,this.initDB()},e.prototype.setToken=function(e){this.token=e},e.prototype.setPrivateToken=function(e){this.privateToken=e},e.prototype.isLoggedOut=function(){return!!this.loggedOut},e.prototype.setInfo=function(e){this.infos=e},e.prototype.setConfig=function(e){e&&(e.tool_mobile_disabledfeatures=this.textUtils.treatDisabledFeatures(e.tool_mobile_disabledfeatures)),this.config=e,this.calculateOfflineDisabled()},e.prototype.setLoggedOut=function(e){this.loggedOut=!!e},e.prototype.canAccessMyFiles=function(){var e=this.getInfo();return e&&(void 0===e.usercanmanageownfiles||e.usercanmanageownfiles)},e.prototype.canDownloadFiles=function(){var e=this.getInfo();return e&&e.downloadfiles},e.prototype.canUseAdvancedFeature=function(e,n){void 0===n&&(n=!0);var t=this.getInfo(),i=!0;if(void 0===t.advancedfeatures)i=n;else for(var o in t.advancedfeatures){var r=t.advancedfeatures[o];r.name===e&&0===parseInt(r.value,10)&&(i=!1)}return i},e.prototype.canUploadFiles=function(){var e=this.getInfo();return e&&e.uploadfiles},e.prototype.fetchSiteInfo=function(){return this.cleanUnicode=!1,this.read("core_webservice_get_site_info",{},{getFromCache:!1,saveToCache:!1})},e.prototype.read=function(e,n,t){return void 0===(t=t||{}).getFromCache&&(t.getFromCache=!0),void 0===t.saveToCache&&(t.saveToCache=!0),this.request(e,n,t)},e.prototype.write=function(e,n,t){return void 0===(t=t||{}).getFromCache&&(t.getFromCache=!1),void 0===t.saveToCache&&(t.saveToCache=!1),void 0===t.emergencyCache&&(t.emergencyCache=!1),this.request(e,n,t)},e.prototype.request=function(e,n,t,i){var o=this,r=this.token;if(n=n||{},!this.appProvider.isOnline()&&this.offlineDisabled)return Promise.reject(this.wsProvider.createFakeWSError("core.errorofflinedisabled",!0));if(this.getInfo()&&!this.wsAvailable(e,!1)){var l=_.a.WS_PREFIX+e;if(!this.wsAvailable(l,!1))return this.logger.error("WS function '"+e+"' is not available, even in compatibility mode."),Promise.reject(this.utils.createFakeWSError("core.wsfunctionnotavailable",!0));this.logger.info("Using compatibility WS method '"+l+"'"),e=l}var a={wsToken:this.token,siteUrl:this.siteUrl,cleanUnicode:this.cleanUnicode,typeExpected:t.typeExpected,responseExpected:t.responseExpected};a.cleanUnicode&&this.textUtils.hasUnicodeData(n)?this.domUtils.showToast("core.unicodenotsupported",!0,3e3):a.cleanUnicode=!1,this.offlineDisabled&&(t.getFromCache=!1,t.saveToCache=!1,t.emergencyCache=!1),n.moodlewssettingfilter=!1!==t.filter,n.moodlewssettingfileurl=!1!==t.rewriteurls;var u=n;try{n=this.wsProvider.convertValuesToString(n,a.cleanUnicode)}catch(e){return Promise.reject(this.utils.createFakeWSError("core.unicodenotsupportedcleanerror",!0))}return this.getFromCache(e,n,t,!1,u).catch(function(){return o.wsProvider.call(e,n,a).then(function(i){return t.saveToCache&&o.saveToCache(e,n,i,t),o.utils.clone(i)}).catch(function(l){if("invalidtoken"==l.errorcode||"accessexception"==l.errorcode&&l.message.indexOf("Invalid token - token expired")>-1){if(r!==o.token&&!i)return o.request(e,n,t,!0);if(o.appProvider.isSSOAuthenticationOngoing())return o.appProvider.waitForSSOAuthentication().then(function(){return o.request(e,n,t,!0)});o.eventsProvider.trigger(s.a.SESSION_EXPIRED,{},o.id),l.message=o.translate.instant("core.lostconnection")}else{if("userdeleted"===l.errorcode)return o.eventsProvider.trigger(s.a.USER_DELETED,{params:n},o.id),l.message=o.translate.instant("core.userdeleted"),Promise.reject(l);if("forcepasswordchangenotice"===l.errorcode)return o.eventsProvider.trigger(s.a.PASSWORD_CHANGE_FORCED,{},o.id),l.message=o.translate.instant("core.forcepasswordchangenotice"),Promise.reject(l);if("usernotfullysetup"===l.errorcode)return o.eventsProvider.trigger(s.a.USER_NOT_FULLY_SETUP,{},o.id),l.message=o.translate.instant("core.usernotfullysetup"),Promise.reject(l);if("sitepolicynotagreed"===l.errorcode)return o.eventsProvider.trigger(s.a.SITE_POLICY_NOT_AGREED,{},o.id),l.message=o.translate.instant("core.login.sitepolicynotagreederror"),Promise.reject(l);if("dmlwriteexception"===l.errorcode&&o.textUtils.hasUnicodeData(n))return o.cleanUnicode?(l.message=o.translate.instant("core.unicodenotsupported"),Promise.reject(l)):(o.cleanUnicode=!0,o.request(e,n,t));if("required_capability_exception"===l.exception||"nopermission"===l.errorcode)return"error/nopermission"===l.message&&(l.message=o.translate.instant("core.nopermissionerror")),o.saveToCache(e,n,l,t),Promise.reject(l);if(void 0!==t.emergencyCache&&!t.emergencyCache)return o.logger.debug("WS call '"+e+"' failed. Emergency cache is forbidden, rejecting."),Promise.reject(l)}return t.deleteCacheIfWSError&&o.utils.isWebServiceError(l)?(o.deleteFromCache(e,n,t).catch(function(){}),Promise.reject(l)):(o.logger.debug("WS call '"+e+"' failed. Trying to use the emergency cache."),t.omitExpires=!0,t.getFromCache=!0,o.getFromCache(e,n,t,!0,u).catch(function(){return Promise.reject(l)}))})}).then(function(e){return e&&void 0!==e.exception?Promise.reject(e):e})},e.prototype.wsAvailable=function(e,n){if(void 0===n&&(n=!0),void 0===this.infos)return!1;for(var t=0;t<this.infos.functions.length;t++){if(this.infos.functions[t].name==e)return!0}return!!n&&this.wsAvailable(_.a.WS_PREFIX+e,!1)},e.prototype.getCacheId=function(e,n){return v.Md5.hashAsciiStr(e+":"+this.utils.sortAndStringify(n))},e.prototype.getCacheOldId=function(e,n){return v.Md5.hashAsciiStr(e+":"+JSON.stringify(n))},e.prototype.getFromCache=function(e,n,t,i,o){var r=this;if(!this.db||!t.getFromCache)return Promise.reject(null);var l=this.getCacheId(e,n);return(t.getCacheUsingCacheKey||i&&t.getEmergencyCacheUsingCacheKey?this.db.getRecords(this.WS_CACHE_TABLE,{key:t.cacheKey}).then(function(e){if(!e.length)return r.db.getRecord(r.WS_CACHE_TABLE,{id:l});if(e.length>1)for(var n=0,t=e.length;n<t;n++){var i=e[n];if(i.id==l)return i}return e[0]}):this.db.getRecord(this.WS_CACHE_TABLE,{id:l}).catch(function(){var n=r.getCacheOldId(e,o||{});return r.db.getRecord(r.WS_CACHE_TABLE,{id:n}).then(function(e){return r.db.updateRecords(r.WS_CACHE_TABLE,{id:l},{id:n}),e})})).then(function(e){var n=Date.now();if(t.omitExpires=t.omitExpires||!r.appProvider.isOnline(),!t.omitExpires&&n>e.expirationTime)return r.logger.debug("Cached element found, but it is expired"),Promise.reject(null);if(void 0!==e&&void 0!==e.data){return r.logger.info("Cached element found, id: "+l+" expires in "+(e.expirationTime-n)/1e3+" seconds"),r.textUtils.parseJSON(e.data,{})}return Promise.reject(null)})},e.prototype.saveToCache=function(e,n,t,i){var o=this;if(!this.db)return Promise.reject(null);return(i.uniqueCacheKey?this.deleteFromCache(e,n,i,!0).catch(function(){}):Promise.resolve()).then(function(){var r={id:o.getCacheId(e,n),data:JSON.stringify(t)},l=g.a.cache_expiration_time;return l=isNaN(l)?3e5:l,r.expirationTime=(new Date).getTime()+l,i.cacheKey&&(r.key=i.cacheKey),o.db.insertRecord(o.WS_CACHE_TABLE,r)})},e.prototype.deleteFromCache=function(e,n,t,i){if(!this.db)return Promise.reject(null);var o=this.getCacheId(e,n);return this.db.deleteRecords(this.WS_CACHE_TABLE,i?{key:t.cacheKey}:{id:o})},e.prototype.uploadFile=function(e,n,t){return n.fileArea||(n.fileArea="draft"),this.wsProvider.uploadFile(e,n,{siteUrl:this.siteUrl,wsToken:this.token},t)},e.prototype.invalidateWsCache=function(){return this.db?(this.logger.debug("Invalidate all the cache for site: "+this.id),this.db.updateRecords(this.WS_CACHE_TABLE,{expirationTime:0})):Promise.reject(null)},e.prototype.invalidateWsCacheForKey=function(e){return this.db?e?(this.logger.debug("Invalidate cache for key: "+e),this.db.updateRecords(this.WS_CACHE_TABLE,{expirationTime:0},{key:e})):Promise.resolve():Promise.reject(null)},e.prototype.invalidateMultipleWsCacheForKey=function(e){var n=this;if(!this.db)return Promise.reject(null);if(!e||!e.length)return Promise.resolve();var t=[];return this.logger.debug("Invalidating multiple cache keys"),e.forEach(function(e){t.push(n.invalidateWsCacheForKey(e))}),Promise.all(t)},e.prototype.invalidateWsCacheForKeyStartingWith=function(e){if(!this.db)return Promise.reject(null);if(!e)return Promise.resolve();this.logger.debug("Invalidate cache for key starting with: "+e);return this.db.execute("UPDATE "+this.WS_CACHE_TABLE+" SET expirationTime=0 WHERE key LIKE ?",[e+"%"])},e.prototype.fixPluginfileURL=function(e){return this.urlUtils.fixPluginfileURL(e,this.token,this.siteUrl)},e.prototype.deleteDB=function(){return this.dbProvider.deleteDB("Site-"+this.id)},e.prototype.deleteFolder=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.removeDir(e).catch(function(){})}return Promise.resolve()},e.prototype.getSpaceUsage=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.getDirectorySize(e).catch(function(){return 0})}return Promise.resolve(0)},e.prototype.getDocsUrl=function(e){return this.urlUtils.getDocsUrl(this.infos.release?this.infos.release:void 0,e)},e.prototype.checkLocalMobilePlugin=function(e){var n=this,t=this.siteUrl+"/local/mobile/check.php",i=g.a.wsextservice;if(!i)return Promise.resolve({code:0});return this.http.post(t,{service:i}).timeout(_.a.WS_TIMEOUT).toPromise().then(function(t){if(void 0!==t&&"requirecorrectaccess"===t.errorcode)return e?Promise.reject(t.error):(n.siteUrl=n.urlUtils.addOrRemoveWWW(n.siteUrl),n.checkLocalMobilePlugin(!0));if(void 0===t||void 0===t.code)return{code:0,warning:"core.login.localmobileunexpectedresponse"};var o=parseInt(t.code,10);if(!t.error)return{code:o,service:i,coreSupported:!!t.coresupported};switch(o){case 1:return Promise.reject(n.translate.instant("core.login.siteinmaintenance"));case 2:return Promise.reject(n.translate.instant("core.login.webservicesnotenabled"));case 3:return{code:0};case 4:return Promise.reject(n.translate.instant("core.login.mobileservicesnotenabled"));default:return Promise.reject(n.translate.instant("core.unexpectederror"))}},function(){return{code:0}})},e.prototype.checkIfAppUsesLocalMobile=function(){var e=!1;return this.infos&&this.infos.functions?(this.infos.functions.forEach(function(n){-1!=n.name.indexOf(_.a.WS_PREFIX)&&(e=!0)}),e):e},e.prototype.checkIfLocalMobileInstalledAndNotUsed=function(){return this.checkIfAppUsesLocalMobile()?Promise.reject(null):this.checkLocalMobilePlugin().then(function(e){return void 0===e.service?Promise.reject(null):e})},e.prototype.containsUrl=function(e){if(!e)return!1;var n=this.urlUtils.removeProtocolAndWWW(this.siteUrl);return 0==(e=this.urlUtils.removeProtocolAndWWW(e)).indexOf(n)},e.prototype.getPublicConfig=function(){var e=this;return this.wsProvider.callAjax("tool_mobile_get_public_config",{},{siteUrl:this.siteUrl}).then(function(n){return n.httpswwwroot&&(e.siteUrl=n.httpswwwroot),n})},e.prototype.openInBrowserWithAutoLogin=function(e,n){return this.openWithAutoLogin(!1,e,void 0,n)},e.prototype.openInBrowserWithAutoLoginIfSameSite=function(e,n){return this.openWithAutoLoginIfSameSite(!1,e,void 0,n)},e.prototype.openInAppWithAutoLogin=function(e,n,t){return this.openWithAutoLogin(!0,e,n,t)},e.prototype.openInAppWithAutoLoginIfSameSite=function(e,n,t){return this.openWithAutoLoginIfSameSite(!0,e,n,t)},e.prototype.openWithAutoLogin=function(e,n,t,i){var o=this;return this.getAutoLoginUrl(n).then(function(n){return i?o.domUtils.showAlert(o.translate.instant("core.notice"),i,void 0,3e3).then(function(i){return new Promise(function(r,l){var s=i.didDismiss.subscribe(function(){s&&s.unsubscribe(),r(e?o.utils.openInApp(n,t):o.utils.openInBrowser(n))})})}):e?o.utils.openInApp(n,t):o.utils.openInBrowser(n)})},e.prototype.openWithAutoLoginIfSameSite=function(e,n,t,i){return this.containsUrl(n)?this.openWithAutoLogin(e,n,t,i):(e?this.utils.openInApp(n,t):this.utils.openInBrowser(n),Promise.resolve(null))},e.prototype.getConfig=function(e,n){var t={cacheKey:this.getConfigCacheKey()};return n&&(t.getFromCache=!1,t.emergencyCache=!1),this.read("tool_mobile_get_config",{},t).then(function(n){if(e){for(var t in n.settings)if(n.settings[t].name==e)return n.settings[t].value;return Promise.reject(null)}var i={};return n.settings.forEach(function(e){i[e.name]=e.value}),i})},e.prototype.invalidateConfig=function(){return this.invalidateWsCacheForKey(this.getConfigCacheKey())},e.prototype.getConfigCacheKey=function(){return"tool_mobile_get_config"},e.prototype.getStoredConfig=function(e){if(this.config)return e?this.config[e]:this.config},e.prototype.isFeatureDisabled=function(e){var n=this.getStoredConfig("tool_mobile_disabledfeatures");if(!n)return!1;var t=new RegExp("(,|^)"+this.textUtils.escapeForRegex(e)+"(,|$)","g");return!!n.match(t)},e.prototype.calculateOfflineDisabled=function(){this.offlineDisabled=this.isFeatureDisabled("NoDelegate_CoreOffline")},e.prototype.isOfflineDisabled=function(){return this.offlineDisabled},e.prototype.isVersionGreaterEqualThan=function(e){var n=parseInt(this.getInfo().version,10);if(Array.isArray(e)){if(!e.length)return!1;for(var t=0;t<e.length;t++){var i=this.getVersionNumber(e[t]);if(t==e.length-1)return n>=i;if(n>=i&&n<this.getNextMajorVersionNumber(e[t]))return!0}}else if("string"==typeof e)return n>=this.getVersionNumber(e);return!1},e.prototype.getAutoLoginUrl=function(e,n){var t=this;if(void 0===n&&(n=!0),!this.privateToken||!this.wsAvailable("tool_mobile_get_autologin_key")||this.lastAutoLogin&&this.timeUtils.timestamp()-this.lastAutoLogin<6*_.a.SECONDS_MINUTE)return Promise.resolve(e);var i,o=this.getUserId(),r={privatetoken:this.privateToken};return n&&(i=this.domUtils.showModalLoading()),this.write("tool_mobile_get_autologin_key",r).then(function(n){return n.autologinurl&&n.key?(t.lastAutoLogin=t.timeUtils.timestamp(),n.autologinurl+"?userid="+o+"&key="+n.key+"&urltogo="+e):e}).catch(function(){return e}).finally(function(){i&&i.dismiss()})},e.prototype.getVersionNumber=function(e){var n=this.getMajorAndMinor(e);return n?(void 0===this.MOODLE_RELEASES[n.major]&&(n.major=Object.keys(this.MOODLE_RELEASES).slice(-1)),this.MOODLE_RELEASES[n.major]+n.minor):0},e.prototype.getMajorAndMinor=function(e){var n=e.match(/(\d)+(?:\.(\d)+)?(?:\.(\d)+)?/);return!(!n||!n[1])&&{major:n[1]+"."+(n[2]||"0"),minor:parseInt(n[3],10)||0}},e.prototype.getNextMajorVersionNumber=function(e){var n,t=this.getMajorAndMinor(e),i=Object.keys(this.MOODLE_RELEASES);return t?-1==(n=i.indexOf(t.major))||n==i.length-1?this.MOODLE_RELEASES[i[n]]:this.MOODLE_RELEASES[i[n+1]]:0},e.prototype.deleteSiteConfig=function(e){return this.db.deleteRecords(this.CONFIG_TABLE,{name:e})},e.prototype.getLocalSiteConfig=function(e,n){return this.db.getRecord(this.CONFIG_TABLE,{name:e}).then(function(e){return e.value}).catch(function(e){return void 0!==n?n:Promise.reject(e)})},e.prototype.setLocalSiteConfig=function(e,n){return this.db.insertRecord(this.CONFIG_TABLE,{name:e,value:n})},e}();t.d(n,"a",function(){return b});var b=function(){function e(e){this.injector=e}return e.prototype.makeSite=function(e,n,t,i,o,r,l){return new y(this.injector,e,n,t,i,o,r,l)},e.prototype.getSiteMethods=function(){var e=[];for(var n in y.prototype)e.push(n);return e},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(14),o=(t.n(i),function(){function e(e,n){this.translate=n,this.logger=e.getInstance("CoreTimeAgoPipe")}return e.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.translate.instant("core.ago",{$a:i(1e3*e).fromNow(!0)})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n,t){this.viewCtrl=n,this.title=e.get("title"),this.items=e.get("items")||[],this.logger=t.getInstance("CoreContextMenuPopoverComponent")}return e.prototype.closeMenu=function(){this.viewCtrl.dismiss()},e.prototype.itemClicked=function(e,n){if(n.action.observers.length>0){if(e.preventDefault(),e.stopPropagation(),"spinner"==n.iconAction)return!1;n.closeOnClick&&this.closeMenu(),n.action.emit(this.closeMenu.bind(this))}else n.href&&n.closeOnClick&&this.closeMenu();return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.viewCtrl=e,this.expired=!1,this.value="",this.src=n.get("src")}return e.prototype.closeModal=function(){this.viewCtrl.dismiss({expired:this.expired,value:this.value})},e.prototype.loaded=function(e){var n=this,t=e&&e.contentWindow;t&&(t.recaptchacallback=function(e){n.expired=!1,n.value=e,n.closeModal()},t.recaptchaexpiredcallback=function(){n.expired=!0,n.value=""})},e}()},,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(4),function(e){function n(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModAssignDefaultFeedbackHandler",t.type="default",t}return Object(i.__extends)(n,e),n}(t(989).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.sitesProvider=e,this.courseProvider=n,this.name="CoreCourseModuleDefault",this.modName="default"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){var i=this,o={icon:this.courseProvider.getModuleIconSrc(e.modname,e.modicon),title:e.name,class:"core-course-default-handler core-course-module-"+e.modname+"-handler",action:function(e,n,t,i,o){e.preventDefault(),e.stopPropagation(),n.push("CoreCourseUnsupportedModulePage",{module:t},o)}};return e.url&&(o.buttons=[{icon:"open",label:"core.openinbrowser",action:function(n){n.preventDefault(),n.stopPropagation(),i.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e.url)}}]),o},e.prototype.getMainComponent=function(e,n,t){},e.prototype.displayRefresherInSingleActivity=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.coursesProvider=e,this.name="CoreCourseFormatDefault",this.format="default"}return e.prototype.isEnabled=function(){return!0},e.prototype.getCourseTitle=function(e){return e.displayname?e.displayname:e.fullname?e.fullname:""},e.prototype.canViewAllSections=function(e){return!0},e.prototype.displayEnableDownload=function(e){return!0},e.prototype.displaySectionSelector=function(e){return!0},e.prototype.displayRefresher=function(e,n){return!0},e.prototype.getCurrentSection=function(e,n){var t;if(void 0!==e.marker)t=Promise.resolve(e.marker);else{if(!this.coursesProvider.isGetCoursesByFieldAvailable())return n[0];t=this.coursesProvider.getCoursesByField("id",e.id).catch(function(){}).then(function(e){return e&&e[0]&&e[0].marker})}return t.then(function(e){if(e>0){var t=n.find(function(n){return n.section==e});if(t)return t}return n[0]})},e.prototype.invalidateData=function(e,n){return this.coursesProvider.invalidateCoursesByField("id",e.id)},e.prototype.openCourse=function(e,n){return e.push("CoreCourseSectionPage",{course:n})},e.prototype.shouldRefreshWhenCompletionChanges=function(e){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(1),o=(t(4),t(16)),r=function(){function e(e,n,t,o,r){this.textUtils=e,this.domUtils=n,this.translate=t,this.courseProvider=o,this.userProvider=r,this.completionChanged=new i.r}return e.prototype.ngOnChanges=function(e){e.completion&&this.completion&&this.showStatus()},e.prototype.completionClicked=function(e){var n=this;if(this.completion){if(void 0===this.completion.cmid||1!==this.completion.tracking)return;e.preventDefault(),e.stopPropagation();var t=this.domUtils.showModalLoading();this.courseProvider.markCompletedManually(this.completion.cmid,1===this.completion.state?0:1,this.completion.courseId,this.completion.courseName).then(function(e){if(!e.status)return Promise.reject(null);n.completionChanged.emit()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errorchangecompletion",!0)}).finally(function(){t.dismiss()})}},e.prototype.showStatus=function(){var e,n,t=this,i=this.moduleName||"";this.completion.tracking===o.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===o.a.COMPLETION_INCOMPLETE?(n="completion-manual-n",e="core.completion-alt-manual-n"):this.completion.tracking===o.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===o.a.COMPLETION_COMPLETE?(n="completion-manual-y",e="core.completion-alt-manual-y"):this.completion.tracking===o.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===o.a.COMPLETION_INCOMPLETE?(n="completion-auto-n",e="core.completion-alt-auto-n"):this.completion.tracking===o.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===o.a.COMPLETION_COMPLETE?(n="completion-auto-y",e="core.completion-alt-auto-y"):this.completion.tracking===o.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===o.a.COMPLETION_COMPLETE_PASS?(n="completion-auto-pass",e="core.completion-alt-auto-pass"):this.completion.tracking===o.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===o.a.COMPLETION_COMPLETE_FAIL&&(n="completion-auto-fail",e="core.completion-alt-auto-fail"),n&&(this.completion.overrideby>0&&(n+="-override"),this.completionImage="assets/img/completion/"+n+".svg"),i&&this.textUtils.formatText(i,!0,!0,50).then(function(n){var i;return t.completion.overrideby>0?(e+="-override",i=t.userProvider.getProfile(t.completion.overrideby,t.completion.courseId,!0).then(function(e){return{overrideuser:e.fullname,modname:n}})):i=Promise.resolve(n),i.then(function(n){t.completionDescription=t.translate.instant(e,{$a:n})})})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(4),function(e){function n(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModAssignDefaultSubmissionHandler",t.type="default",t}return Object(i.__extends)(n,e),n}(t(991).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.viewCtrl=n,this.chapters=e.get("chapters")||[]}return e.prototype.loadChapter=function(e){this.viewCtrl.dismiss(e)},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(165),o=(t(545),[i.a]),r=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){var n=e.call(this)||this;return n.name="CoreBlockDefault",n.blockName="default",n}return Object(i.__extends)(n,e),n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(64),o=t(18),r=[i.a,o.a],l=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return f}),t.d(n,"b",function(){return p});t(0),t(9);var i=t(13),o=t(16),r=t(41),l=t(176),s=t(56),a=t(325),u=t(53),c=t(110),d=(t(539),t(538),t(994),t(995),t(997),t(999),t(361)),f=(t(1001),t(1002),[o.a,r.a,l.a,s.a,u.a,c.a,a.a,d.a]),p=function(){return function(e,n,t,o,r){e.register(n),e.register(t),o.resume.subscribe(function(){setTimeout(function(){e.forceCronHandlerExecution(t.name)},1e3)}),r.on(i.a.LOGIN,function(){setTimeout(function(){e.forceCronHandlerExecution(t.name)},1e3)})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(56);var i=t(412),o=function(){function e(e){this.moduleDelegate=e,this.name="CoreCourseFormatSingleActivity",this.format="singleactivity"}return e.prototype.isEnabled=function(){return!0},e.prototype.canViewAllSections=function(e){return!1},e.prototype.getCourseTitle=function(e,n){return n&&n[0]&&n[0].modules&&n[0].modules[0]?n[0].modules[0].name:e.displayname?e.displayname:e.fullname?e.fullname:""},e.prototype.displayEnableDownload=function(e){return!1},e.prototype.displaySectionSelector=function(e){return!1},e.prototype.displayRefresher=function(e,n){return!(n&&n[0]&&n[0].modules&&n[0].modules[0])||this.moduleDelegate.displayRefresherInSingleActivity(n[0].modules[0].modname)},e.prototype.getCourseFormatComponent=function(e,n){return i.a},e.prototype.shouldRefreshWhenCompletionChanges=function(e){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var i=t(51),o=t(179),r=(t(1003),t(458)),l=(t(1004),t(1005),t(1006),[i.a,r.a,o.a]),s=function(){return function(e,n,t,i,o,r){e.registerHandler(t),n.registerHandler(i),n.registerHandler(o),n.registerHandler(r)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var i=t(67),o=t(133),r=t(406),l=(t(1007),t(1008),t(1009),t(1010),t(1011),[i.a,o.a,r.a]),s=function(){return function(e,n,t,i,o,r){e.registerHandler(n),e.registerHandler(t),e.registerHandler(i),e.registerHandler(r),e.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(152),o=t(161),r=(t(1012),t(1013),t(1014),t(1015),t(1016),t(13)),l=t(45),s=[i.a,o.a],a=function(){return function(e,n,t,i,o,s,a,u,c,d,f){e.registerHandler(n),i.registerHandler(t),o.registerHandler(s),o.registerHandler(a),c.registerHandler(u),d.on(l.a.PROFILE_REFRESHED,function(e){u.clearViewGradesCache(e.courseId,e.userId)},f.getCurrentSiteId()),d.on(r.a.LOGOUT,function(){u.clearViewGradesCache()},f.getCurrentSiteId())}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return o});t(0);var i=[t(134).a],o=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(177),o=t(682),r=[i.a,o.a],l=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(117),o=t(71),r=t(116),l=(t(555),t(556),t(123)),s=[i.a,o.a,r.a,l.a],a=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){var n=e.call(this)||this;return n.name="CoreQuestionDefault",n.type="default",n}return Object(i.__extends)(n,e),n}(t(1017).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1018),r=function(e){function n(n){var t=e.call(this,n)||this;return t.questionProvider=n,t.name="CoreQuestionBehaviourDefault",t.type="default",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(9);var i=t(460),o=t(461),r=(t(1019),t(13)),l=[i.a,o.a],s=function(){return function(e,n,t,i,o){n.registerHandler(t),e.is("ios")&&(i.searchIOSNewSharedFiles(),e.resume.subscribe(function(){i.searchIOSNewSharedFiles()}),o.on(r.a.APP_LAUNCHED_URL,function(e){e&&0===e.indexOf("file://")&&i.searchIOSNewSharedFiles(e)}))}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(206),o=(t(1020),[i.a]),r=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return u});t(0);var i=t(100),o=t(191),r=t(45),l=t(676),s=(t(1021),t(13)),a=(t(1022),t(1023),t(1024),[i.a,o.a,r.a,l.a]),u=function(){return function(e,n,t,i,o,r,l,a,u,c){e.registerHandler(n),c.registerHandler(a),r.registerHandler(l),r.registerHandler(u),t.on(s.a.USER_DELETED,function(e){var n=e.params,t=0;n.userid?t=n.userid:n.userids?t=n.userids[0]:"id"===n.field&&n.values&&n.values.length?t=n.values[0]:n.userlist&&n.userlist.length&&(t=n.userlist[0].userid),t>0&&o.deleteStoredUser(t,e.siteId)},i.getCurrentSiteId())}}()},function(e,n,t){"use strict";var i=t(0),o=(t(1),t(9),t(536)),r=t(321),l=t(398),s=t(451),a=t(270),u=t(399),c=t(400),d=t(388),f=t(397),p=t(317),h=t(324),m=t(403),_=t(190),g=t(411),v=t(692),y=t(413),b=t(507),P=t(517),E=t(401),C=(t(10),function(){function e(e){this.appProvider=e}return e.prototype.clear=function(){return Promise.reject("clear is only supported in mobile devices")},e.prototype.set=function(e){if(!this.appProvider.isDesktop())return Promise.reject("set is not supported in browser");try{return t(119).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},e.prototype.get=function(){if(!this.appProvider.isDesktop())return Promise.reject("get is not supported in browser");try{var e=t(119).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},e.prototype.increase=function(e){return Promise.reject("increase is only supported in mobile devices")},e.prototype.decrease=function(e){return Promise.reject("decrease is only supported in mobile devices")},e.prototype.isSupported=function(){return Promise.reject("isSupported is only supported in mobile devices")},e.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},e.prototype.requestPermission=function(){return Promise.reject("requestPermission is only supported in mobile devices")},e}()),I=(t(327),function(e){function n(n){var t=e.call(this)||this;return t.captureHelper=n,t}return Object(i.__extends)(n,e),n.prototype.cleanup=function(){return Promise.resolve()},n.prototype.getPicture=function(e){return this.captureHelper.captureMedia("image",e)},n}(r.a)),S=function(e){function n(n){var i=e.call(this)||this;return i.isDesktop=n.isDesktop(),i.isDesktop?i.clipboard=t(119).clipboard:(i.copyTextarea=document.createElement("textarea"),i.copyTextarea.className="core-browser-copy-area",i.copyTextarea.setAttribute("aria-hidden","true"),document.body.appendChild(i.copyTextarea)),i}return Object(i.__extends)(n,e),n.prototype.copy=function(e){var n=this;return new Promise(function(t,i){if(n.isDesktop)n.clipboard.writeText(e),t();else{n.copyTextarea.innerHTML=e,n.copyTextarea.select();try{document.execCommand("copy")?t():i()}catch(e){i()}n.copyTextarea.innerHTML=""}})},n.prototype.paste=function(){var e=this;return new Promise(function(n,t){if(e.isDesktop)n(e.clipboard.readText());else{e.copyTextarea.innerHTML="",e.copyTextarea.select();try{document.execCommand("paste")?n(e.copyTextarea.innerHTML):t()}catch(e){t()}e.copyTextarea.innerHTML=""}})},n}(l.a),w=(t(65),t(11),t(137)),A=t(1768),T=function(e){function n(n,t,i){var o=e.call(this)||this;return o.appProvider=n,o.textUtils=t,o.mimeUtils=i,o}return Object(i.__extends)(n,e),n.prototype.checkDir=function(e,n){var t=this.textUtils.concatenatePaths(e,n);return this.resolveDirectoryUrl(t).then(function(){return!0})},n.prototype.checkFile=function(e,n){return this.resolveLocalFilesystemUrl(this.textUtils.concatenatePaths(e,n)).then(function(e){if(e.isFile)return!0;var n=new a.FileError(13);return n.message="input is not a file",Promise.reject(n)})},n.prototype.copyMock=function(e,n,t){var i=this;return new Promise(function(o,r){t=t.replace(/%20/g," "),e.copyTo(n,t,function(e){o(e)},function(e){i.fillErrorMessageMock(e),r(e)})})},n.prototype.copyDir=function(e,n,t,i){var o=this;return this.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,n,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(t).then(function(n){return o.copyMock(e,n,i)})})},n.prototype.copyFile=function(e,n,t,i){var o=this;return i=i||n,this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,n,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(t).then(function(n){return o.copyMock(e,n,i)})})},n.prototype.createDir=function(e,n,t){var i=this,o={create:!0};return t||(o.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return i.getDirectory(e,n,o)})},n.prototype.createFile=function(e,n,t){var i=this,o={create:!0};return t||(o.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return i.getFile(e,n,o)})},n.prototype.createWriterMock=function(e){var n=this;return new Promise(function(t,i){e.createWriter(function(e){t(e)},function(e){n.fillErrorMessageMock(e),i(e)})})},n.prototype.emulateCordovaFileForDesktop=function(e){var n=this;this.appProvider.isDesktop()&&(window.resolveLocalFileSystemURL=function(t,i,o){e.stat(t,function(e,r){if(e)o&&o(e);else{var l=r.isDirectory()?A.a:A.b,s=t.substr(t.lastIndexOf("/")+1);i&&i(new l(n.textUtils,n.mimeUtils,s,t))}})})},n.prototype.fillErrorMessageMock=function(e){try{e.message=this.cordovaFileError[e.code]}catch(e){}},n.prototype.getDirectory=function(e,n,t){var i=this;return new Promise(function(o,r){try{n=n.replace(/%20/g," "),e.getDirectory(n,t,function(e){o(e)},function(e){i.fillErrorMessageMock(e),r(e)})}catch(e){i.fillErrorMessageMock(e),r(e)}})},n.prototype.getFile=function(e,n,t){var i=this;return new Promise(function(o,r){try{n=n.replace(/%20/g," "),e.getFile(n,t,o,function(e){i.fillErrorMessageMock(e),r(e)})}catch(e){i.fillErrorMessageMock(e),r(e)}})},n.prototype.getFreeDiskSpace=function(){return window.requestFileSystem?new Promise(function(e,n){var t=0,i=50,o=function(e,n){return new Promise(function(r,l){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(){++t>i?r(e):o(e*n,n).then(r)},function(){r(e/n)})})};o(1048576,1.3).then(function(n){t=0,i=10,o(n,1.1).then(function(n){e(n/1024)})})}):Promise.reject(null)},n.prototype.listDir=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1,exclusive:!1})}).then(function(e){var n=e.createReader();return t.readEntriesMock(n)})},n.prototype.load=function(){var e=this;return new Promise(function(n,i){var o,r=window;if(void 0===r.requestFileSystem&&(r.requestFileSystem=r.webkitRequestFileSystem),void 0===r.resolveLocalFileSystemURL&&(r.resolveLocalFileSystemURL=r.webkitResolveLocalFileSystemURL),r.LocalFileSystem={PERSISTENT:1},e.appProvider.isDesktop()){var l=t(414),s=t(119).remote.app;if(e.emulateCordovaFileForDesktop(l),!(o=s.getPath("documents")||s.getPath("home")))return void i("Cannot calculate base path for file system.");o=e.textUtils.concatenatePaths(o.replace(/\\/g,"/"),w.a.app_id)+"/",l.mkdir(o,function(e){!e||e&&"EEXIST"===e.code?n(o):i("Error creating base path.")})}else navigator.webkitPersistentStorage.requestQuota(524288e3,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(e){o=e.root.toURL(),n(o)},i)},i)})},n.prototype.moveMock=function(e,n,t){var i=this;return new Promise(function(o,r){t=t.replace(/%20/g," "),e.moveTo(n,t,function(e){o(e)},function(e){i.fillErrorMessageMock(e),r(e)})})},n.prototype.moveDir=function(e,n,t,i){var o=this;return this.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,n,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(t).then(function(n){return o.moveMock(e,n,i)})})},n.prototype.moveFile=function(e,n,t,i){var o=this;return i=i||n,this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,n,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(t).then(function(n){return o.moveMock(e,n,i)})})},n.prototype.readAsArrayBuffer=function(e,n){return this.readFileMock(e,n,"ArrayBuffer")},n.prototype.readAsBinaryString=function(e,n){return this.readFileMock(e,n,"BinaryString")},n.prototype.readAsDataURL=function(e,n){return this.readFileMock(e,n,"DataURL")},n.prototype.readAsText=function(e,n){return this.readFileMock(e,n,"Text")},n.prototype.readEntriesMock=function(e){var n=this;return new Promise(function(t,i){e.readEntries(function(e){t(e)},function(e){n.fillErrorMessageMock(e),i(e)})})},n.prototype.readFileMock=function(e,n,t){var i=this;return this.resolveDirectoryUrl(e).then(function(e){return i.getFile(e,n,{create:!1})}).then(function(e){var n=new FileReader;return new Promise(function(i,o){n.onloadend=function(){void 0!==n.result||null!==n.result?i(n.result):o(void 0!==n.error||null!==n.error?n.error:{code:null,message:"READER_ONLOADEND_ERR"})},e.file(function(e){n["readAs"+t].call(n,e)},function(e){o(e)})})})},n.prototype.removeMock=function(e){var n=this;return new Promise(function(t,i){e.remove(function(){t({success:!0,fileRemoved:e})},function(e){n.fillErrorMessageMock(e),i(e)})})},n.prototype.removeDir=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1})}).then(function(e){return t.removeMock(e)})},n.prototype.removeFile=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getFile(e,n,{create:!1})}).then(function(e){return t.removeMock(e)})},n.prototype.removeRecursively=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1})}).then(function(e){return t.rimrafMock(e)})},n.prototype.resolveDirectoryUrl=function(e){return this.resolveLocalFilesystemUrl(e).then(function(e){if(e.isDirectory)return e;var n=new a.FileError(13);return n.message="input is not a directory",Promise.reject(n)})},n.prototype.resolveLocalFilesystemUrl=function(e){var n=this;return new Promise(function(t,i){try{window.resolveLocalFileSystemURL(e,function(e){t(e)},function(e){n.fillErrorMessageMock(e),i(e)})}catch(e){n.fillErrorMessageMock(e),i(e)}})},n.prototype.rimrafMock=function(e){var n=this;return new Promise(function(t,i){e.removeRecursively(function(){t({success:!0,fileRemoved:e})},function(e){n.fillErrorMessageMock(e),i(e)})})},n.prototype.writeMock=function(e,n){return n instanceof Blob?this.writeFileInChunksMock(e,n):new Promise(function(t,i){e.onwriteend=function(n){e.error?i(e.error):t(n)},e.write(n)})},n.prototype.writeExistingFile=function(e,n,t){return this.writeFile(e,n,t,{replace:!0})},n.prototype.writeFile=function(e,n,t,i){var o=this;void 0===i&&(i={});var r={create:!i.append,exclusive:!i.replace};return this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,n,r)}).then(function(e){return o.writeFileEntryMock(e,t,i)})},n.prototype.writeFileEntryMock=function(e,n,t){var i=this;return this.createWriterMock(e).then(function(e){return t.append&&e.seek(e.length),t.truncate&&e.truncate(t.truncate),i.writeMock(e,n)}).then(function(){return e})},n.prototype.writeFileInChunksMock=function(e,n){var t=0,i=function(){var i=Math.min(1048576,n.size-t),o=n.slice(t,t+i);t+=i,e.write(o)};return new Promise(function(o,r){e.onerror=r,e.onwriteend=function(){t<n.size?i():o()},i()})},n}(a.a),O=function(e){function n(n){var t=e.call(this)||this;return t.appProvider=n,t}return Object(i.__extends)(n,e),n.prototype.appIsInstalled=function(e){return Promise.reject("appIsInstalled not supported in browser or dekstop.")},n.prototype.open=function(e,n){if(this.appProvider.isDesktop()){if(!t(119).ipcRenderer.sendSync("openItem",e))return Promise.reject("Error opening file")}else window.open(e,"_blank");return Promise.resolve()},n.prototype.uninstall=function(e){return Promise.reject("uninstall not supported in browser or dekstop.")},n}(u.a),k=t(988),D=function(){function e(e,n){this.code=e,this.message=n}return e.UNKNOWN_ERROR=0,e.FORMATTING_ERROR=1,e.PARSING_ERROR=2,e.PATTERN_ERROR=3,e}(),x=function(e){function n(n){var t=e.call(this)||this;return t.appProvider=n,t}return Object(i.__extends)(n,e),n.prototype.dateToString=function(e,n){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getCurrencyPattern=function(e){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getCurrentlocale=function(){var e=navigator.userLanguage||navigator.language;try{return this.appProvider.isDesktop()?t(119).remote.app.getLocale()||e:e}catch(n){return e}},n.prototype.getDateNames=function(e){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getDatePattern=function(e){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getFirstDayOfWeek=function(){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getLocaleName=function(){var e=this.getCurrentlocale();if(e)return Promise.resolve({value:e});var n=new D(D.UNKNOWN_ERROR,"Cannot get language");return Promise.reject(n)},n.prototype.getNumberPattern=function(e){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.getPreferredLanguage=function(){return this.getLocaleName()},n.prototype.isDayLightSavingsTime=function(e){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.numberToString=function(e,n){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.stringToDate=function(e,n){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n.prototype.stringToNumber=function(e,n){return Promise.reject(new D(D.UNKNOWN_ERROR,"Not supported."))},n}(d.a),M=(t(50),t(26),t(156)),U=function(){function e(e,n,i,o,r,l){if(void 0===l&&(l="location=yes"),this.fileProvider=n,this.urlUtils=i,this.url=o,e.isDesktop()){this.browserWindow=t(119).remote.BrowserWindow,this.screen=t(119).screen,this.isSSO=!(!o||!o.match(/\/launch\.php\?service=.+&passport=/));var s,a=800,u=600,c={webPreferences:{}};try{c.webPreferences.session=t(119).remote.session.fromPartition("inappbrowsersession")}catch(e){}if(screen&&(s=this.screen.getPrimaryDisplay())&&s.workArea&&(a=s.workArea.width||a,u=s.workArea.height||u),c.width=a,c.height=u,-1!=l.indexOf("hidden=yes")&&(c.show=!1),-1!=l.indexOf("location=no")&&(c.frame=!1),-1!=l.indexOf("fullscreen=yes")&&(c.fullscreen=!0),-1!=l.indexOf("clearsessioncache=yes")&&c.webPreferences.session&&c.webPreferences.session.clearStorageData({storages:"cookies"}),this.window=new this.browserWindow(c),this.window.loadURL(o),this.isSSO){this.window.webContents.setUserAgent("Mozilla/5.0 (iPad) AppleWebKit/603.3.8 (KHTML, like Gecko) Mobile/14G60")}}}return e.prototype.close=function(){if(!this.window.isDestroyed())try{this.window.close()}catch(e){}},e.prototype.executeScript=function(e){var n=this;return new Promise(function(t,i){e.code?n.window.webContents.executeJavaScript(e.code,!1,t):e.file?n.fileProvider.readFile(e.file).then(function(e){n.window.webContents.executeJavaScript(e,!1,t)}).catch(i):i("executeScript requires exactly one of code or file to be specified")})},e.prototype.getLaunchUrl=function(e){var n=this;return void 0===e&&(e=0),this.window.isDestroyed()?Promise.reject(null):new Promise(function(t,i){var o=!1;n.window.webContents.executeJavaScript('var el = document.querySelector("#launchapp"); el && el.href;').then(function(e){o=!0,t(e)}),setTimeout(function(){o||(e>5?i():n.getLaunchUrl(e+1).then(t,i))},300)})},e.prototype.hide=function(){this.window.hide()},e.prototype.insertCSS=function(e){var n=this;return new Promise(function(t,i){e.code?(n.window.webContents.insertCSS(e.code),t()):e.file?n.fileProvider.readFile(e.file).then(function(e){n.window.webContents.insertCSS(e),t()}).catch(i):i("insertCSS requires exactly one of code or file to be specified")})},e.prototype.on=function(e){var n=this;return new M.Observable(function(t){var i=function(i,o){try{i.url=o||(n.window.isDestroyed()?"":n.window.getURL()),i.type=e,t.next(i)}catch(e){}},o=function(e){n.urlUtils.removeUrlParams(n.url)==n.urlUtils.removeUrlParams(n.window.getURL())&&n.getLaunchUrl().then(function(n){n&&i(e,n)})};switch(e){case"loadstart":n.window.webContents.on("did-start-loading",i),n.isSSO&&n.window.webContents.on("did-finish-load",o);break;case"loadstop":n.window.webContents.on("did-finish-load",i);break;case"loaderror":n.window.webContents.on("did-fail-load",i);break;case"exit":n.window.on("close",i)}return function(){switch(e){case"loadstart":n.window.webContents.removeListener("did-start-loading",i),n.window.webContents.removeListener("did-finish-load",o);break;case"loadstop":n.window.webContents.removeListener("did-finish-load",i);break;case"loaderror":n.window.webContents.removeListener("did-fail-load",i);break;case"exit":n.window.removeListener("close",i)}}})},e.prototype.show=function(){this.window.show()},e}(),N=function(e){function n(n,t,i){var o=e.call(this)||this;return o.appProvider=n,o.fileProvider=t,o.urlUtils=i,o}return Object(i.__extends)(n,e),n.prototype.create=function(n,t,i){return void 0===i&&(i="location=yes"),i&&"string"!=typeof i&&(i=Object.keys(i).map(function(e){return e+"="+i[e]}).join(",")),this.appProvider.isDesktop()?new U(this.appProvider,this.fileProvider,this.urlUtils,n,t,i):e.prototype.create.call(this,n,t,i)},n}(f.a),R=(t(3),t(40)),F=t(14),L=function(e){function n(n,t,i){var o=e.call(this)||this;return o.appProvider=n,o.utils=t,o.textUtils=i,o.toastTemplate='<toast><visual><binding template="ToastText02"><text id="1" hint-wrap="true">%s</text><text id="2" hint-wrap="true">%s</text></binding></visual></toast>',o.tileBindingTemplate='<text hint-style="base" hint-wrap="true">%s</text><text hint-style="captionSubtle" hint-wrap="true">%s</text>',o.tileTemplate='<tile><visual branding="nameAndLogo"><binding template="TileMedium">'+o.tileBindingTemplate+'</binding><binding template="TileWide">'+o.tileBindingTemplate+'</binding><binding template="TileLarge">'+o.tileBindingTemplate+"</binding></visual></tile>",o.DESKTOP_NOTIFS_TABLE="desktop_local_notifications",o.tableSchema={name:o.DESKTOP_NOTIFS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"title",type:"TEXT"},{name:"text",type:"TEXT"},{name:"at",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"triggered",type:"INTEGER"}]},o.scheduled={},o.triggered={},o.defaults={text:"",title:"",sound:"",badge:0,id:0,data:void 0,every:void 0,at:void 0},o.appDB=n.getDB(),o.appDB.createTableFromSchema(o.tableSchema),o.observers={schedule:[],trigger:[],click:[],update:[],clear:[],clearall:[],cancel:[],cancelall:[]},o}return Object(i.__extends)(n,e),n.prototype.cancel=function(e){var n=this,t=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){n.scheduled[e]&&t.push(n.cancelNotification(e,!1,"cancel"))}),Promise.all(t)},n.prototype.cancelAll=function(){var e=this;return this.cancel(Object.keys(this.scheduled)).then(function(){e.triggerEvent("cancelall","foreground")})},n.prototype.cancelNotification=function(e,n,t){if(this.scheduled[e]){var i=this.scheduled[e].notification;clearTimeout(this.scheduled[e].timeout),clearInterval(this.scheduled[e].interval),delete this.scheduled[e],delete this.triggered[e],this.removeNotification(e),n||this.triggerEvent(t,i,"foreground")}},n.prototype.clear=function(e){var n=this,t=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){n.scheduled[e]&&n.scheduled[e].notification&&!n.scheduled[e].notification.every&&t.push(n.cancelNotification(e,!1,"clear"))}),Promise.all(t)},n.prototype.clearAll=function(){var e=this;return this.clear(Object.keys(this.scheduled)).then(function(){e.triggerEvent("clearall","foreground")})},n.prototype.convertIds=function(e){for(var n=[],t=0;t<e.length;t++)n.push(Number(e[t]));return n},n.prototype.convertProperties=function(e){return e.id&&(e.id=isNaN(e.id)?this.defaults.id:Number(e.id)),e.title&&(e.title=e.title.toString()),e.text&&(e.text=e.text.toString()),e.badge&&(e.badge=isNaN(e.badge)?this.defaults.badge:Number(e.badge)),e.at&&("object"==typeof e.at&&(e.at=e.at.getTime()),e.at=Math.round(e.at/1e3)),"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),e},n.prototype.get=function(e){return Promise.resolve(this.getNotifications([Number(e)],!0,!0)[0])},n.prototype.getAll=function(){return Promise.resolve(this.getNotifications(void 0,!0,!0))},n.prototype.getAllIds=function(){var e=this.utils.mergeArraysWithoutDuplicates(Object.keys(this.scheduled),Object.keys(this.triggered));return e=e.map(function(e){return Number(e)}),Promise.resolve(e)},n.prototype.getAllNotifications=function(){var e=this;return this.appDB.getAllRecords(this.DESKTOP_NOTIFS_TABLE).then(function(n){return n.forEach(function(n){n.at=new Date(n.at),n.data=e.textUtils.parseJSON(n.data),n.triggered=!!n.triggered}),n})},n.prototype.getAllScheduled=function(){return Promise.resolve(this.getNotifications(void 0,!0,!1))},n.prototype.getAllTriggered=function(){return Promise.resolve(this.getNotifications(void 0,!1,!0))},n.prototype.getNotifications=function(e,n,t){var i=[];if(n)for(var o in this.scheduled)e&&-1==e.indexOf(Number(o))||i.push(this.scheduled[o].notification);if(t)for(var o in this.triggered)n&&this.scheduled[o]||e&&-1==e.indexOf(Number(o))||i.push(this.triggered[o].notification);return i},n.prototype.getScheduled=function(e){return Promise.resolve(this.getNotifications([Number(e)],!0,!1)[0])},n.prototype.getScheduledIds=function(){var e=Object.keys(this.scheduled).map(function(e){return Number(e)});return Promise.resolve(e)},n.prototype.getTriggered=function(e){return Promise.resolve(this.getNotifications([Number(e)],!1,!0)[0])},n.prototype.getTriggeredIds=function(){var e=Object.keys(this.triggered).map(function(e){return Number(e)});return Promise.resolve(e)},n.prototype.getValueFor=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var i in n){var o=n[i];if(e.hasOwnProperty(o))return e[o]}},n.prototype.hasPermission=function(){return Promise.resolve(!0)},n.prototype.isPresent=function(e){return Promise.resolve(!!this.scheduled[e]||!!this.triggered[e])},n.prototype.isScheduled=function(e){return Promise.resolve(!!this.scheduled[e])},n.prototype.isTriggered=function(e){return Promise.resolve(!!this.triggered[e])},n.prototype.load=function(){var e=this;if(!this.appProvider.isDesktop())return Promise.resolve();if(this.appProvider.isWindows())try{this.winNotif=t(!function(){var e=new Error('Cannot find module "electron-windows-notifications"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}return this.getAllNotifications().catch(function(){return[]}).then(function(n){n.forEach(function(n){n.triggered?(delete n.triggered,e.scheduled[n.id]={notification:n},e.triggered[n.id]=n):(delete n.triggered,n.at=1e3*n.at,n.at-Date.now()>1e3*-R.a.SECONDS_HOUR&&e.schedule(n))})})},n.prototype.mergeWithDefaults=function(e){e.at=this.getValueFor(e,"at","firstAt","date"),e.text=this.getValueFor(e,"text","message"),e.data=this.getValueFor(e,"data","json"),void 0!==e.at&&null!==e.at||(e.at=new Date);for(var n in this.defaults)null!==e[n]&&void 0!==e[n]||(e[n]=e.hasOwnProperty(n)&&["data","sound"].indexOf(n)>-1?void 0:this.defaults[n]);for(var n in e)this.defaults.hasOwnProperty(n)||delete e[n];return e},n.prototype.notificationClicked=function(e){this.triggerEvent("click",e,"foreground"),t(119).ipcRenderer.send("focusApp")},n.prototype.on=function(e,n){this.observers[e]&&"function"==typeof n&&this.observers[e].push(n)},n.prototype.parseInterval=function(e){var n;return(e=String(e).toLowerCase())&&"undefined"!=e?"second"==e?n=1e3:"minute"==e?n=1e3*R.a.SECONDS_MINUTE:"hour"==e?n=1e3*R.a.SECONDS_HOUR:"day"==e?n=1e3*R.a.SECONDS_DAY:"week"==e?n=7*R.a.SECONDS_DAY*1e3:"month"==e?n=31*R.a.SECONDS_DAY*1e3:"quarter"==e?n=2190*R.a.SECONDS_HOUR*1e3:"year"==e?n=1e3*R.a.SECONDS_YEAR:(n=parseInt(e,10),isNaN(n)?n=0:n*=6e4):n=0,n},n.prototype.registerPermission=function(){return Promise.resolve(!0)},n.prototype.removeNotification=function(e){return this.appDB.deleteRecords(this.DESKTOP_NOTIFS_TABLE,{id:e})},n.prototype.schedule=function(e){this.scheduleOrUpdate(e)},n.prototype.scheduleOrUpdate=function(e,n){var t=this;void 0===n&&(n="schedule"),(e=Array.isArray(e)?e:[e]).forEach(function(e){if(t.mergeWithDefaults(e),t.convertProperties(e),t.cancelNotification(e.id,!0,"cancel"),t.scheduled[e.id]={notification:e},t.storeNotification(e,!1),!(Math.abs(F().diff(1e3*e.at,"days"))>15)){var i=1e3*e.at-Date.now(),o=function(){if(t.triggerNotification(e),t.triggered[e.id]=e,t.storeNotification(e,!0),t.triggerEvent("trigger",e,"foreground"),e.every&&t.scheduled[e.id]&&!t.scheduled[e.id].interval){var n=t.parseInterval(e.every);n>0&&(t.scheduled[e.id].interval=setInterval(o,n))}};t.scheduled[e.id].timeout=setTimeout(o,i),t.triggerEvent(n,e,"foreground")}})},n.prototype.storeNotification=function(e,n){var t={id:e.id,title:e.title,text:e.text,at:e.at?"object"==typeof e.at?e.at.getTime():e.at:0,data:e.data?JSON.stringify(e.data):"{}",triggered:n?1:0};return this.appDB.insertRecord(this.DESKTOP_NOTIFS_TABLE,t)},n.prototype.triggerEvent=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.observers[e]&&this.observers[e].forEach(function(e){e.apply(null,n)})},n.prototype.triggerNotification=function(e){var n=this;if(this.winNotif){(t=new this.winNotif.ToastNotification({appId:w.a.app_id,template:this.toastTemplate,strings:[e.title,e.text]})).on("activated",function(){n.notificationClicked(e)}),t.show();try{new this.winNotif.TileNotification({tag:e.id+"",template:this.tileTemplate,strings:[e.title,e.text,e.title,e.text,e.title,e.text],expirationTime:new Date(Date.now()+1e3*R.a.SECONDS_HOUR)}).show()}catch(e){console.warn("Error showing TileNotification. Please notice they only work with the app installed.",e)}}else{var t;(t=new Notification(e.title,{body:e.text})).onclick=function(){n.notificationClicked(e)}}},n.prototype.un=function(e,n){if(this.observers[e]&&this.observers[e].length)for(var t=0;t<this.observers[e].length;t++)if(this.observers[e][t]==n){this.observers[e].splice(t,1);break}},n.prototype.update=function(e){return this.scheduleOrUpdate(e,"update")},n}(h.a),H=function(e){function n(n){var t=e.call(this)||this;return t.captureHelper=n,t}return Object(i.__extends)(n,e),n.prototype.captureAudio=function(e){return this.captureHelper.captureMedia("audio",e)},n.prototype.captureImage=function(e){return this.captureHelper.captureMedia("captureimage",e)},n.prototype.captureVideo=function(e){return this.captureHelper.captureMedia("video",e)},n}(m.a),K=function(e){function n(){var n=e.call(this)||this;return window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"},n}return Object(i.__extends)(n,e),n.prototype.onchange=function(){return M.Observable.merge(this.onConnect(),this.onDisconnect())},n.prototype.onConnect=function(){var e=new M.Subject;return window.addEventListener("online",function(n){e.next(n)},!1),e},n.prototype.onDisconnect=function(){var e=new M.Subject;return window.addEventListener("offline",function(n){e.next(n)},!1),e},n}(_.a),W=t(12),q=function(){function e(e){this.appProvider=e}return e.prototype.init=function(e){return new B(this.appProvider)},e.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},e.prototype.createChannel=function(e){return Promise.reject("createChannel is only supported in mobile devices")},e.prototype.deleteChannel=function(e){return Promise.reject("deleteChannel is only supported in mobile devices")},e.prototype.listChannels=function(){return Promise.reject("listChannels is only supported in mobile devices")},e}(),B=function(e){function n(n){var t=e.call(this,{})||this;return t.appProvider=n,t}return Object(i.__extends)(n,e),n.prototype.on=function(e){return W.Observable.empty()},n.prototype.unregister=function(){return Promise.reject("unregister is only supported in mobile devices")},n.prototype.setApplicationIconBadgeNumber=function(e){if(!this.appProvider.isDesktop())return Promise.reject("setApplicationIconBadgeNumber is not supported in browser");try{return t(119).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},n.prototype.getApplicationIconBadgeNumber=function(){if(!this.appProvider.isDesktop())return Promise.reject("getApplicationIconBadgeNumber is not supported in browser");try{var e=t(119).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},n.prototype.finish=function(e){return Promise.reject("finish is only supported in mobile devices")},n.prototype.clearAllNotifications=function(){return Promise.reject("clearAllNotifications is only supported in mobile devices")},n.prototype.subscribe=function(e){return Promise.reject("subscribe is only supported in mobile devices")},n.prototype.unsubscribe=function(e){return Promise.reject("unsubscribe is only supported in mobile devices")},n}(g.b),j=t(1769),G=function(e){function n(n,t){var i=e.call(this)||this;return i.file=n,i.textUtils=t,i}return Object(i.__extends)(n,e),n.prototype.createDir=function(e,n){for(var t=this,i=n.split("/"),o=Promise.resolve(),r=function(n){var r=i[n];o=o.then(function(){return t.file.createDir(e,r,!0).then(function(){e=t.textUtils.concatenatePaths(e,r)})})},l=0;l<i.length;l++)r(l);return o},n.prototype.unzip=function(e,n,t){var i=this;e=e.replace(/%20/g," "),n=n.replace(/%20/g," ");var o=e.substring(0,e.lastIndexOf("/")),r=e.substr(e.lastIndexOf("/")+1),l=new j;return this.file.readAsArrayBuffer(o,r).then(function(e){return l.loadAsync(e)}).then(function(){if(!l.files||!Object.keys(l.files).length)return 0;var t=n.substring(0,e.lastIndexOf("/")),o=n.substr(e.lastIndexOf("/")+1);return i.file.createDir(t,o,!1)}).then(function(){var e=[],o=Object.keys(l.files).length,r=0,s=function(s){var a=l.files[s],u=void 0;if(a.dir)u=i.createDir(n,s);else{var c,d=s.substring(0,s.lastIndexOf("/")),f=s.substr(s.lastIndexOf("/")+1),p=[];d&&p.push(i.createDir(n,d)),p.push(a.async("blob").then(function(e){c=e})),u=Promise.all(p).then(function(){var e=i.textUtils.concatenatePaths(n,d);return i.file.writeFile(e,f,c,{replace:!0})})}e.push(u.then(function(){r++,t&&t({loaded:r,total:o})}))};for(var a in l.files)s(a);return Promise.all(e).then(function(){return 0})}).catch(function(){return-1})},n}(E.a);t(272),t(154);t.d(n,"b",function(){return z}),t.d(n,"a",function(){return le}),t.d(n,"c",function(){return V}),t.d(n,"d",function(){return $}),t.d(n,"h",function(){return Q}),t.d(n,"i",function(){return Y}),t.d(n,"j",function(){return X}),t.d(n,"k",function(){return J}),t.d(n,"l",function(){return Z}),t.d(n,"m",function(){return ee}),t.d(n,"n",function(){return ne}),t.d(n,"o",function(){return te}),t.d(n,"e",function(){return ie}),t.d(n,"f",function(){return oe}),t.d(n,"g",function(){return re});var z=[o.a,r.a,l.a,s.a,a.a,u.a,c.a,d.a,f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,E.a],V=function(e){return e.isMobile()?new o.a:new C(e)},$=function(e,n){return e.isMobile()?new r.a:new I(n)},Q=function(e){return e.isMobile()?new l.a:new S(e)},Y=function(e,n,t){return e.isMobile()?new a.a:new T(e,n,t)},X=function(e){return e.isMobile()?new u.a:new O(e)},J=function(e,n){return e.isMobile()?new c.a:new k.b(e,n)},Z=function(e){return e.isMobile()?new d.a:new x(e)},ee=function(e,n,t){return e.isDesktop()?new N(e,n,t):new f.a},ne=function(e,n,t){return e.isMobile()?new h.a:new L(e,n,t)},te=function(e,n){return e.isMobile()?new m.a:new H(n)},ie=function(e){return e.is("cordova")?new _.a:new K},oe=function(e){return e.isMobile()?new g.a:new q(e)},re=function(e,n,t){return e.isMobile()?new E.a:new G(n,t)},le=function(){return function(e,n,i){var o=window;e.isDesktop()&&(t(119).ipcRenderer.on("coreAppLaunched",function(e,n){void 0!==o.handleOpenURL&&o.handleOpenURL(n)}),t(119).ipcRenderer.on("coreAppFocused",function(){document.dispatchEvent(new Event("resume"))})),e.isMobile()||n.registerProcess(i)}}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(51);var i=function(){function e(e,n,t){this.viewCtrl=n,this.coursesProvider=t,this.course=e.get("course")||{},this.prefetch=e.get("prefetch")||{}}return e.prototype.ngOnInit=function(){this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite()},e.prototype.action=function(e){this.viewCtrl.dismiss(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(284),o=(t(1047),t(1048),t(1049),[i.a]),r=function(){return function(e,n,t,i,o){e.registerHandler(n),t.registerHandler(i),t.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(342),o=t(674),r=(t(1050),[i.a,o.a]),l=function(){return function(e,n,t,o,r,l,s){e.registerHandler(n),t.ready().then(function(){o.scheduleAllSitesEventsNotifications()}),l.registerClick(i.a.COMPONENT,function(e){e.eventid&&t.ready().then(function(){o.isDisabled(e.siteId).then(function(n){n||r.redirect("AddonCalendarListPage",{eventId:e.eventid},e.siteId)})})}),s.registerSiteTableMigration({name:"calendar_events",newName:i.a.EVENTS_TABLE,filterFields:["id","name","description","format","eventtype","courseid","timestart","timeduration","categoryid","groupid","userid","instance","modulename","timemodified","repeatid","visible","uuid","sequence","subscriptionid","notificationtime"]}),s.registerLocalNotifComponentMigration("mmaCalendarComponent",i.a.COMPONENT)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(205),o=t(338),r=(t(1051),t(1052),t(1053),[i.a,o.a]),l=function(){return function(e,n,t,i,o,r){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(354),o=t(688),r=(t(1054),[i.a,o.a]),l=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return o});t(0);var i=[t(358).a],o=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(190);var i=t(147),o=t(346),r=t(453),l=(t(1055),t(1056),t(573),t(574),t(1057),t(1058),t(1059),t(1060),t(1061),[i.a,o.a,r.a]),s=function(){return function(e,n,t,r,l,s,a,u,c,d,f,p,h,m,_,g,v,y,b,P,E,C,I,S,w){e.registerHandler(n),t.registerHandler(r),t.registerHandler(l),t.registerHandler(w),a.registerHandler(s),a.registerHandler(I),a.registerHandler(S),u.register(c),u.register(n),P.registerHandler(b),d.onConnect().subscribe(function(){f.run(function(){p.syncAllDiscussions(void 0,!0)})});var A=function(e){_.isMessagingEnabledForSite(e.site).then(function(){g.isFeatureDisabled("CoreMainMenuDelegate_AddonMessages",e.site).then(function(n){n||_.invalidateDiscussionsCache(e.site).finally(function(){_.isGroupMessagingEnabledInSite(e.site).then(function(n){var t="AddonMessagesIndexPage";n&&(t="AddonMessagesGroupConversationsPage"),v.goInSite(void 0,t,void 0,e.site)})})})})};h.isDesktop()&&m.registerClick(i.a.PUSH_SIMULATION_COMPONENT,A),E.on("click").subscribe(function(e){if(C.isFalseOrZero(e.notif))return f.run(function(){A(e)}),!0}),y.registerSiteTableMigration({name:"mma_messages_offline_messages",newName:o.a.MESSAGES_TABLE,fields:[{name:"textformat",delete:!0}]}),y.registerLocalNotifComponentMigration("mmaMessagesPushSimulation",i.a.PUSH_SIMULATION_COMPONENT)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(100),o=(t(147),t(574)),r=(t(4),function(){function e(e,n,t,r,l){var s=this;this.sitesProvider=e,this.messagesProvider=n,this.eventsProvider=t,this.domUtils=r,this.translate=l,this.name="AddonMessages:addContact",this.priority=800,this.type=i.a.TYPE_ACTION,this.disabled=!1,this.updateObs=t.on(o.a.UPDATED_EVENT,function(e){s.checkButton(e.userId)})}return n=e,e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){return e.id!=this.sitesProvider.getCurrentSiteUserId()},e.prototype.getDisplayData=function(e,t){var i=this;return this.checkButton(e.id),{icon:"",title:"",spinner:!1,class:"",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),i.disabled||(i.disabled=!0,i.updateButton(o.id,{spinner:!0}),i.messagesProvider.isContact(o.id).then(function(e){if(e){var n=i.translate.instant("addon.messages.removecontactconfirm",{$a:o.fullname}),t=i.translate.instant("core.remove");return i.domUtils.showConfirm(n,void 0,t).then(function(){return i.messagesProvider.removeContact(o.id)})}return i.addContact(o)}).catch(function(e){i.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){i.eventsProvider.trigger(n.UPDATED_EVENT,{userId:o.id}),i.checkButton(o.id).finally(function(){i.disabled=!1})}))}}},e.prototype.checkButton=function(e){var n=this;this.updateButton(e,{spinner:!0});var t=this.messagesProvider.isGroupMessagingEnabled();return this.messagesProvider.isContact(e).then(function(i){n.updateButton(e,i?{title:t?"addon.messages.removefromyourcontacts":"addon.messages.removecontact",class:"addon-messages-removecontact-handler",icon:"remove",hidden:!1,spinner:!1}:{title:t?"addon.messages.addtoyourcontacts":"addon.messages.addcontact",class:"addon-messages-addcontact-handler",icon:"add",hidden:!1,spinner:!1})}).catch(function(){n.updateButton(e,{hidden:!0})})},e.prototype.updateButton=function(e,n){this.eventsProvider.trigger(i.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:n,userId:e})},e.prototype.addContact=function(e){var n=this;return this.messagesProvider.isGroupMessagingEnabled()?this.messagesProvider.getMemberInfo(e.id).then(function(t){var i=n.sitesProvider.getCurrentSiteUserId();if(t.contactrequests.some(function(n){return n.userid==i&&n.requesteduserid==e.id})){var o=n.translate.instant("addon.messages.yourcontactrequestpending",{$a:e.fullname});return n.domUtils.showAlert(null,o)}var r=n.translate.instant("addon.messages.addcontactconfirm",{$a:e.fullname}),l=n.translate.instant("core.add");return n.domUtils.showConfirm(r,void 0,l).then(function(){return n.messagesProvider.createContactRequest(e.id)}).then(function(){var e=n.translate.instant("addon.messages.contactrequestsent");return n.domUtils.showAlert(null,e)})}):this.messagesProvider.addContact(e.id)},e.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},e.UPDATED_EVENT="AddonMessagesAddContactUserHandler_updated_event",e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(100),o=(t(147),t(573)),r=(t(4),function(){function e(e,n,t,r,l){var s=this;this.sitesProvider=e,this.messagesProvider=n,this.eventsProvider=t,this.domUtils=r,this.translate=l,this.name="AddonMessages:blockContact",this.priority=600,this.type=i.a.TYPE_ACTION,this.disabled=!1,this.updateObs=t.on(o.a.UPDATED_EVENT,function(e){s.checkButton(e.userId)})}return n=e,e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){return e.id!=this.sitesProvider.getCurrentSiteUserId()},e.prototype.getDisplayData=function(e,t){var i=this;return this.checkButton(e.id),{icon:"",title:"",spinner:!1,class:"",action:function(e,t,o,r){e.preventDefault(),e.stopPropagation(),i.disabled||(i.disabled=!0,i.updateButton(o.id,{spinner:!0}),i.messagesProvider.isBlocked(o.id).then(function(e){if(e){var n=i.translate.instant("addon.messages.unblockuserconfirm",{$a:o.fullname}),t=i.translate.instant("addon.messages.unblockuser");return i.domUtils.showConfirm(n,void 0,t).then(function(){return i.messagesProvider.unblockContact(o.id)})}n=i.translate.instant("addon.messages.blockuserconfirm",{$a:o.fullname}),t=i.translate.instant("addon.messages.blockuser");return i.domUtils.showConfirm(n,void 0,t).then(function(){return i.messagesProvider.blockContact(o.id)})}).catch(function(e){i.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){i.eventsProvider.trigger(n.UPDATED_EVENT,{userId:o.id}),i.checkButton(o.id).finally(function(){i.disabled=!1})}))}}},e.prototype.checkButton=function(e){var n=this;return this.updateButton(e,{spinner:!0}),this.messagesProvider.isBlocked(e).then(function(t){n.updateButton(e,t?{title:"addon.messages.unblockuser",class:"addon-messages-unblockcontact-handler",icon:"checkmark-circle",hidden:!1,spinner:!1}:{title:"addon.messages.blockuser",class:"addon-messages-blockcontact-handler",icon:"close-circle",hidden:!1,spinner:!1})}).catch(function(){n.updateButton(e,{hidden:!0})})},e.prototype.updateButton=function(e,n){this.eventsProvider.trigger(i.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:n,userId:e})},e.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},e.UPDATED_EVENT="AddonMessagesBlockContactUserHandler_updated_event",e;var n}())},function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return c});t(0);var i=t(72),o=t(122),r=t(339),l=t(160),s=t(162),a=t(164),u=(t(537),t(541),t(1062),t(1063),t(1064),t(1065),t(1066),t(1067),t(1073),[i.a,o.a,r.a,l.a,s.a,a.a]),c=function(){return function(e,n,t,i,r,l,s,a,u,c){e.registerHandler(n),t.registerHandler(i),r.register(l),a.registerHandler(u),a.registerHandler(c),s.registerSiteTablesMigration([{name:"mma_mod_assign_submissions",newName:o.a.SUBMISSIONS_TABLE,fields:[{name:"assignmentid",newName:"assignid"},{name:"submitted",type:"boolean"},{name:"submissionstatement",type:"boolean"},{name:"plugindata",type:"object"}]},{name:"mma_mod_assign_submissions_grading",newName:o.a.SUBMISSIONS_GRADES_TABLE,fields:[{name:"assignmentid",newName:"assignid"},{name:"addattempt",type:"boolean"},{name:"applytoall",type:"boolean"},{name:"outcomes",type:"object"},{name:"plugindata",type:"object"}]}])}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(363),function(e){function n(n){var t=e.call(this)||this;return t.commentsProvider=n,t}return Object(i.__extends)(n,e),n.prototype.invalidate=function(){return this.commentsProvider.invalidateCommentsData("module",this.assign.cmid,"assignsubmission_comments",this.submission.id,"submission_comments")},n.prototype.showComments=function(){this.commentsComponent&&this.commentsComponent.openComments()},n}(t(577).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){}return e.prototype.invalidate=function(){return Promise.resolve()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(72),o=(t(122),t(160),t(579)),r=function(){function e(e,n,t,i,o,r,l,s,a,u){this.sitesProvider=e,this.wsProvider=n,this.assignProvider=t,this.assignOfflineProvider=i,this.assignHelper=o,this.fileSessionProvider=r,this.fileUploaderProvider=l,this.filepoolProvider=s,this.fileProvider=a,this.utils=u,this.name="AddonModAssignSubmissionFileHandler",this.type="file"}return n=e,e.prototype.canEditOffline=function(e,n,t){return!0},e.prototype.clearTmpData=function(e,n,t,o){var r=this.fileSessionProvider.getFiles(i.a.COMPONENT,e.id);this.fileSessionProvider.clearFiles(i.a.COMPONENT,e.id),this.fileUploaderProvider.clearTmpFiles(r)},e.prototype.copySubmissionData=function(e,n,t,i,o){var r=this.assignProvider.getSubmissionPluginAttachments(n);return this.assignHelper.uploadFiles(e.id,r).then(function(e){t.files_filemanager=e})},e.prototype.getComponent=function(e,n,t){return o.a},e.prototype.deleteOfflineData=function(e,t,i,o,r){return this.assignHelper.deleteStoredSubmissionFiles(e.id,n.FOLDER_NAME,t.userid,r).catch(function(){})},e.prototype.getPluginFiles=function(e,n,t,i){return this.assignProvider.getSubmissionPluginAttachments(t)},e.prototype.getSizeForCopy=function(e,n){var t=this,i=[],o=0;return this.assignProvider.getSubmissionPluginAttachments(n).forEach(function(e){i.push(t.wsProvider.getRemoteFileSize(e.fileurl).then(function(e){if(-1==e)return Promise.reject(null);o+=e}))}),Promise.all(i).then(function(){return o})},e.prototype.getSizeForEdit=function(e,n,t,o){var r=this,l=this.sitesProvider.getCurrentSiteId();if(this.hasDataChanged(e,n,t,o)){var s=[],a=0;return this.fileSessionProvider.getFiles(i.a.COMPONENT,e.id).forEach(function(e){e.filename&&!e.name?s.push(r.filepoolProvider.getFilePathByUrl(l,e.fileurl).then(function(e){return r.fileProvider.getFile(e).then(function(e){return r.fileProvider.getFileObjectFromFileEntry(e)}).then(function(e){a+=e.size})}).catch(function(){return r.wsProvider.getRemoteFileSize(e.fileurl).then(function(e){if(-1==e)return Promise.reject(null);a+=e})})):e.name&&s.push(r.fileProvider.getFileObjectFromFileEntry(e).then(function(e){a+=e.size}))}),Promise.all(s).then(function(){return a})}return 0},e.prototype.hasDataChanged=function(e,n,t,o){var r=this;return this.assignOfflineProvider.getSubmission(e.id,n.userid).catch(function(){}).then(function(e){if(e&&e.plugindata&&e.plugindata.files_filemanager)return e.plugindata.files_filemanager.offline+e.plugindata.files_filemanager.online.length;var n=r.assignProvider.getSubmissionPluginAttachments(t);return n&&n.length}).then(function(n){var t=r.fileSessionProvider.getFiles(i.a.COMPONENT,e.id);if(t.length!=n)return!0;for(var o=0;o<t.length;o++){var l=t[o];if(!l.filename&&void 0!==l.name&&!l.offline)return!0}return!1})},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!0},e.prototype.prepareSubmissionData=function(e,t,o,r,l,s,a,u){if(this.hasDataChanged(e,t,o,r)){var c=this.fileSessionProvider.getFiles(i.a.COMPONENT,e.id),d=this.utils.hasRepeatedFilenames(c);return d?Promise.reject(d):this.assignHelper.uploadOrStoreFiles(e.id,n.FOLDER_NAME,c,s,a,u).then(function(e){l.files_filemanager=e})}},e.prototype.prepareSyncData=function(e,t,i,o,r,l){var s=this,a=o&&o.plugindata&&o.plugindata.files_filemanager;if(a){var u=a.online||[];return(a.offline?this.assignHelper.getStoredSubmissionFiles(e.id,n.FOLDER_NAME,t.userid,l).then(function(e){u=u.concat(e)}).catch(function(){}):Promise.resolve()).then(function(){return s.assignHelper.uploadFiles(e.id,u,l).then(function(e){r.files_filemanager=e})})}},e.FOLDER_NAME="submission_file",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(72),r=(t(160),t(122),t(578)),l=function(e){function n(n,t,i,r,l){var s=e.call(this)||this;return s.fileSessionprovider=n,s.assignProvider=t,s.assignOfflineProvider=i,s.assignHelper=r,s.fileUploaderProvider=l,s.component=o.a.COMPONENT,s}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(n){if(n&&n.plugindata&&n.plugindata.files_filemanager){return(n.plugindata.files_filemanager.offline?e.assignHelper.getStoredSubmissionFiles(e.assign.id,r.a.FOLDER_NAME):Promise.resolve([])).then(function(t){var i=n.plugindata.files_filemanager.online||[];t=e.fileUploaderProvider.markOfflineFiles(t),e.files=i.concat(t)})}e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin)}).finally(function(){e.fileSessionprovider.setFiles(e.component,e.assign.id,e.files)})},n}(t(577).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(72),r=(t(122),function(e){function n(n,t,i,r,l,s){var a=e.call(this)||this;return a.fb=n,a.domUtils=t,a.textUtils=i,a.assignProvider=r,a.assignOfflineProvider=l,a.component=o.a.COMPONENT,a.element=s.nativeElement,a}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(n){return n&&n.plugindata&&n.plugindata.onlinetext_editor?n.plugindata.onlinetext_editor.text:e.assignProvider.getSubmissionPluginText(e.plugin)}).then(function(n){e.configs.wordlimit=parseInt(e.configs.wordlimit,10),e.configs.wordlimitenabled=parseInt(e.configs.wordlimitenabled,10),e.text=n,e.edit?e.control=e.fb.control(n):e.element.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n&&e.textUtils.expandText(e.plugin.name,n,e.component,e.assign.cmid)}),e.configs.wordlimitenabled&&(e.words=e.textUtils.countWords(n))}).finally(function(){e.loaded=!0})},n.prototype.onChange=function(e){var n=this;this.configs.wordlimitenabled&&(clearTimeout(this.wordCountTimeout),this.wordCountTimeout=setTimeout(function(){n.words=n.textUtils.countWords(e)},1500))},n}(t(577).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(72),t(122);var i=t(582),o=function(){function e(e,n,t,i){this.sitesProvider=e,this.textUtils=n,this.assignProvider=t,this.assignOfflineProvider=i,this.name="AddonModAssignFeedbackCommentsHandler",this.type="comments",this.drafts={}}return n=e,e.prototype.discardDraft=function(e,n,t){var i=this.getDraftId(e,n,t);void 0!==this.drafts[i]&&delete this.drafts[i]},e.prototype.getComponent=function(e,n){return i.a},e.prototype.getDraft=function(e,n,t){var i=this.getDraftId(e,n,t);if(void 0!==this.drafts[i])return this.drafts[i]},e.prototype.getDraftId=function(e,n,t){return(t=t||this.sitesProvider.getCurrentSiteId())+"#"+e+"#"+n},e.prototype.getPluginFiles=function(e,n,t,i){return this.assignProvider.getSubmissionPluginAttachments(t)},e.getTextFromInputData=function(e,n,t){var i=t.assignfeedbackcomments_editor;return i&&i.text&&(i=i.text),e.restorePluginfileUrls(i,n.fileareas&&n.fileareas[0]?n.fileareas[0].files:[])},e.prototype.hasDataChanged=function(e,t,i,o,r){var l=this;return this.assignOfflineProvider.getSubmissionGrade(e.id,r).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.assignfeedbackcomments_editor?e.plugindata.assignfeedbackcomments_editor.text:l.assignProvider.getSubmissionPluginText(i)}).then(function(e){var t=n.getTextFromInputData(l.textUtils,i,o);return void 0!==t&&e!=t})},e.prototype.hasDraftData=function(e,n,t){return!!this.getDraft(e,n,t)},e.prototype.isEnabled=function(){return!0},e.prototype.prepareFeedbackData=function(e,n,t,i,o){var r=this.getDraft(e,n,o);r&&(r.text=this.textUtils.formatHtmlLines(r.text),i.assignfeedbackcomments_editor=r)},e.prototype.saveDraft=function(e,n,t,i,o){i&&(this.drafts[this.getDraftId(e,n,o)]=i)},e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=(t(9),t(72)),r=(t(122),t(162),t(583)),l=t(581),s=function(e){function n(n,t,i,r,l,s,a,u){var c=e.call(this,n)||this;return c.domUtils=i,c.textUtils=r,c.assignOfflineProvider=l,c.assignProvider=s,c.fb=a,c.feedbackDelegate=u,c.component=o.a.COMPONENT,c.element=t.nativeElement,c}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var e=this;this.getText().then(function(n){e.text=n,e.canEdit||e.edit?e.edit&&(e.control=e.fb.control(n)):e.element.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.text&&e.textUtils.expandText(e.plugin.name,e.text,e.component,e.assign.cmid)})}).finally(function(){e.loaded=!0})},n.prototype.editComment=function(){var e=this;this.editFeedback().then(function(n){var t=l.a.getTextFromInputData(e.textUtils,e.plugin,n);e.isSent=!1,e.text=e.replacePluginfileUrls(t),e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,{text:t,format:1})}).catch(function(){})},n.prototype.getText=function(){var e=this;return this.feedbackDelegate.getPluginDraftData(this.assign.id,this.userId,this.plugin).then(function(n){return n?(e.isSent=!1,e.replacePluginfileUrls(n.text)):e.assignOfflineProvider.getSubmissionGrade(e.assign.id,e.userId).catch(function(){}).then(function(n){return n&&n.plugindata&&n.plugindata.assignfeedbackcomments_editor?(e.isSent=!1,e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,n.plugindata.assignfeedbackcomments_editor),e.replacePluginfileUrls(n.plugindata.assignfeedbackcomments_editor.text)):(e.isSent=!0,e.assignProvider.getSubmissionPluginText(e.plugin))})})},n.prototype.replacePluginfileUrls=function(e){return this.textUtils.replacePluginfileUrls(e,this.plugin.fileareas&&this.plugin.fileareas[0]&&this.plugin.fileareas[0].files||[])},n}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.modalCtrl=e}return e.prototype.editFeedback=function(){var e=this;return this.canEdit?new Promise(function(n,t){var i=e.modalCtrl.create("AddonModAssignEditFeedbackModalPage",{assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId});i.present(),i.onDidDismiss(function(e){void 0===e?t():n(e)})}):Promise.reject(null)},e.prototype.invalidate=function(){return Promise.resolve()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=(t(9),t(72)),r=function(e){function n(n,t){var i=e.call(this,n)||this;return i.assignProvider=t,i.component=o.a.COMPONENT,i}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},n}(t(583).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=(t(9),t(72)),r=function(e){function n(n,t){var i=e.call(this,n)||this;return i.assignProvider=t,i.component=o.a.COMPONENT,i}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},n}(t(583).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(234),o=(t(1079),t(1080),t(1081),t(362),[i.a]),r=function(){return function(e,n,t,i,o,r,l){e.registerHandler(n),t.registerHandler(i),t.registerHandler(l),o.registerHandler(r)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(344),o=(t(1082),t(1083),t(1084),[i.a]),r=function(){return function(e,n,t,i,o){e.registerHandler(n),t.registerHandler(i),t.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(1085);var i=t(258),o=(t(1086),t(1087),t(1088),t(260)),r=(t(1089),t(259)),l=[i.a,o.a,r.a],s=function(){return function(e,n,t,i,o,l,s,a,u,c){e.registerHandler(n),t.registerHandler(i),o.registerHandler(l),o.registerHandler(c),s.register(a),u.registerSiteTableMigration({name:"mma_mod_choice_offline_responses",newName:r.a.CHOICE_TABLE,fields:[{name:"responses",type:"object"},{name:"deleting",type:"boolean"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0),t(1090);var i=t(135),o=(t(1091),t(1092),t(1093),t(1094),t(1095),t(1096),t(1097),t(278)),r=(t(1098),t(286)),l=(t(1099),t(262)),s=[i.a,o.a,r.a,l.a],a=function(){return function(e,n,t,i,o,r,s,a,u,c,d,f,p,h,m){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(u),o.registerHandler(d),o.registerHandler(f),o.registerHandler(p),o.registerHandler(h),o.registerHandler(m),s.register(a),c.registerSiteTableMigration({name:"mma_mod_feedback_responses",newName:l.a.FEEDBACK_TABLE,fields:[{name:"responses",type:"object"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0);var i=t(294),o=t(364),r=(t(1100),t(1101),t(1102),t(1103),t(1104),[i.a,o.a]),l=function(){return function(e,n,t,i,o,r,l,s,a){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(166),o=t(207),r=t(252),l=t(253),s=(t(1105),t(365),t(1106),t(1107),t(1108),t(1109),[i.a,o.a,r.a,l.a]),a=function(){return function(e,n,t,i,r,l,s,a,u,c,d){e.registerHandler(n),t.registerHandler(i),r.register(l),s.registerHandler(a),s.registerHandler(u),s.registerHandler(d),c.registerSiteTablesMigration([{name:"mma_mod_forum_offline_discussions",newName:o.a.DISCUSSIONS_TABLE,fields:[{name:"forumAndUser",delete:!0},{name:"options",type:"object"}]},{name:"mma_mod_forum_offline_replies",newName:o.a.REPLIES_TABLE,fields:[{name:"forumAndUser",delete:!0},{name:"discussionAndUser",delete:!0},{name:"options",type:"object"}]}])}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(192),o=t(230),r=t(465),l=t(295),s=(t(1110),t(1111),t(1112),t(1113),t(1114),t(1115),[i.a,o.a,r.a,l.a]),a=function(){return function(e,n,t,i,r,l,s,a,u,c,d){e.registerHandler(n),t.registerHandler(i),r.register(l),s.registerHandler(a),s.registerHandler(u),s.registerHandler(d),c.registerSiteTableMigration({name:"mma_mod_glossary_add_entry",newName:o.a.ENTRIES_TABLE,fields:[{name:"glossaryAndConcept",delete:!0},{name:"glossaryAndUser",delete:!0},{name:"options",type:"object"},{name:"attachments",type:"object"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){var t=this;this.viewCtrl=n,this.modes=[],this.selectedMode=e.get("selectedMode");var i=e.get("glossary");this.modes=[{key:"search",langkey:"addon.mod_glossary.bysearch"}],i.browsemodes.forEach(function(e){switch(e){case"letter":t.modes.push({key:"letter_all",langkey:"addon.mod_glossary.byalphabet"});break;case"cat":t.modes.push({key:"cat_all",langkey:"addon.mod_glossary.bycategory"});break;case"date":t.modes.push({key:"newest_first",langkey:"addon.mod_glossary.bynewestfirst"}),t.modes.push({key:"recently_updated",langkey:"addon.mod_glossary.byrecentlyupdated"});break;case"author":t.modes.push({key:"author_all",langkey:"addon.mod_glossary.byauthor"})}})}return e.prototype.modePicked=function(e,n){return this.viewCtrl.dismiss(n),!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0),t(1116);var i=t(235),o=(t(366),t(1117),t(1118),t(1119),[i.a]),r=function(){return function(e,n,t,i,o,r,l,s,a){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.viewCtrl=n,this.items=[],this.items=e.get("items")||[]}return e.prototype.loadItem=function(e){this.viewCtrl.dismiss(e)},e.prototype.getNumberForPadding=function(e){return new Array(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(143),o=t(256),r=t(287),l=t(678),s=(t(1120),t(296),t(1121),t(1122),t(1123),t(1124),t(1125),[i.a,o.a,r.a,l.a]),a=function(){return function(e,n,t,l,s,a,u,c,d,f,p,h){e.registerHandler(n),t.registerHandler(l),s.register(a),u.registerHandler(c),u.registerHandler(d),u.registerHandler(f),u.registerHandler(h),p.registerSiteTablesMigration([{name:"mma_mod_lesson_password",newName:i.a.PASSWORD_TABLE,fields:[{name:"id",newName:"lessonid"}]},{name:"mma_mod_lesson_retakes",newName:o.a.RETAKES_TABLE,fields:[{name:"finished",type:"boolean"},{name:"outoftime",type:"boolean"}]},{name:"mma_mod_lesson_page_attempts",newName:o.a.PAGE_ATTEMPTS_TABLE,fields:[{name:"lessonAndPage",delete:!0},{name:"lessonAndRetake",delete:!0},{name:"lessonAndRetakeAndType",delete:!0},{name:"lessonAndRetakeAndPage",delete:!0},{name:"data",type:"object"},{name:"correct",type:"boolean"},{name:"userAnswer",type:"object"}]},{name:"mma_mod_lesson_retakes_finished_sync",newName:r.a.RETAKES_FINISHED_TABLE}])}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0),t(1126);var i=t(297),o=(t(1127),t(1128),[i.a]),r=function(){return function(e,n,t,i,o){e.registerHandler(n),t.registerHandler(i),t.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0),t(1129);var i=t(210),o=(t(367),t(1130),t(1131),t(1132),t(298)),r=[i.a,o.a],l=function(){return function(e,n,t,i,o,r,l,s,a){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return u});t(0);var i=t(128),o=t(151),r=t(236),l=t(279),s=t(231),a=(t(1133),t(299),t(1134),t(1135),t(1136),t(1137),t(1138),t(1139),t(1141),t(1143),t(1145),t(1147),t(1149),t(1151),t(1153),t(1155),[i.a,o.a,r.a,l.a,s.a]),u=function(){return function(e,n,t,i,o,l,s,a,u,c,d,f){e.registerHandler(n),t.registerHandler(i),o.register(l),s.registerHandler(a),s.registerHandler(u),s.registerHandler(c),s.registerHandler(f),d.registerSiteTableMigration({name:"mod_quiz_attempts",newName:r.a.ATTEMPTS_TABLE,fields:[{name:"quizAndUser",delete:!0},{name:"finished",type:"boolean"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.fb=e}return e.prototype.ngOnInit=function(){this.form.addControl("confirmdatasaved",this.fb.control(1))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.fb=e}return e.prototype.ngOnInit=function(){this.form.addControl("quizpassword",this.fb.control(""))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0),t(1157);var i=t(211),o=(t(368),t(1158),t(1159),t(1160),t(263),[i.a]),r=function(){return function(e,n,t,i,o,r,l,s,a){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var i=t(193),o=t(351),r=t(237),l=(t(1161),t(300),t(1162),t(1163),t(1164),t(1165),t(288)),s=[i.a,r.a,o.a,l.a],a=function(){return function(e,n,t,i,o,l,s,a,u,c,d){e.registerHandler(n),t.registerHandler(i),o.register(l),s.registerHandler(a),s.registerHandler(u),s.registerHandler(d),c.registerSiteTablesMigration([{name:"mod_scorm_offline_attempts",newName:r.a.ATTEMPTS_TABLE,fields:[{name:"snapshot",type:"object"},{name:"scormAndUser",delete:!0}]},{name:"mod_scorm_offline_scos_tracks",newName:r.a.TRACKS_TABLE,fields:[{name:"value",type:"object"},{name:"scormUserAttempt",delete:!0},{name:"scormUserAttemptSynced",delete:!0}]}])}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0),t(1166);var i=t(264),o=(t(1167),t(1168),t(301)),r=(t(1169),t(302)),l=(t(1170),t(265)),s=[i.a,o.a,r.a,l.a],a=function(){return function(e,n,t,i,o,r,s,a,u,c){e.registerHandler(n),t.registerHandler(i),o.registerHandler(r),o.registerHandler(c),s.register(a),u.registerSiteTableMigration({name:"mma_mod_survey_answers",newName:l.a.SURVEY_TABLE,fields:[{name:"answers",type:"object"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});t(0),t(1171);var i=t(303),o=(t(1172),t(1173),t(304)),r=[i.a,o.a],l=function(){return function(e,n,t,i,o){e.registerHandler(n),t.registerHandler(i),t.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var i=t(209),o=t(257),r=t(289),l=(t(1174),t(1175),t(1176),t(1177),t(1178),t(1179),t(1180),t(1181),[i.a,o.a,r.a]),s=function(){return function(e,n,t,i,r,l,s,a,u,c,d,f,p){e.registerHandler(n),t.registerHandler(i),r.register(l),s.registerHandler(a),s.registerHandler(u),s.registerHandler(c),s.registerHandler(d),s.registerHandler(p),f.registerSiteTableMigration({name:"mma_mod_wiki_new_pages_store",newName:o.a.NEW_PAGES_TABLE,fields:[{name:"subwikiWikiUserGroup",delete:!0},{name:"caneditpage",type:"boolean"}]})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.viewCtrl=n,this.subwikis=e.get("subwikis"),this.currentSubwiki=e.get("currentSubwiki")}return e.prototype.isSubwikiSelected=function(e){var n=parseInt(e.id,10)||0;if(n>0&&this.currentSubwiki.id>0)return n==this.currentSubwiki.id;var t=parseInt(e.userid,10)||0,i=parseInt(e.groupid,10)||0;return t==this.currentSubwiki.userid&&i==this.currentSubwiki.groupid},e.prototype.openSubwiki=function(e){(e.id>0||e.canedit)&&e!=this.currentSubwiki&&this.viewCtrl.dismiss(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return u});t(0),t(1182),t(1191);var i=t(150),o=(t(1192),t(1193),t(163)),r=t(290),l=t(173),s=t(194),a=(t(1194),t(1195),[i.a,o.a,r.a,l.a,s.a]),u=function(){return function(e,n,t,i,r,l,s,a,u,c){e.registerHandler(n),t.registerHandler(i),t.registerHandler(c),r.registerHandler(l),s.register(a),u.registerSiteTablesMigration([{name:"mma_mod_workshop_offline_submissions",newName:o.a.SUBMISSIONS_TABLE,fields:[{name:"attachmentsid",type:"object"}]},{name:"mma_mod_workshop_offline_assessments",newName:o.a.ASSESSMENTS_TABLE,fields:[{name:"inputdata",type:"object"}]},{name:"mma_mod_workshop_offline_evaluate_submissions",newName:o.a.EVALUATE_SUBMISSIONS_TABLE,fields:[{name:"gradeover",type:"object"},{name:"published",type:"boolean"}]},{name:"mma_mod_workshop_offline_evaluate_assessments",newName:o.a.EVALUATE_ASSESSMENTS_TABLE,fields:[{name:"gradinggradeover",type:"object"}]}])}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(n,e),n}(t(426).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(n,e),n}(t(426).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(n,e),n}(t(426).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(n,e),n}(t(426).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var i=t(233),o=t(427),r=t(329),l=(t(1196),t(1197),t(1198),[i.a,o.a,r.a]),s=function(){return function(e,n,t,i,r,l,s){e.registerHandler(n),t.registerHandler(i),r.register(l),s.registerSiteTableMigration({name:"mma_notes_offline_notes",newName:o.a.NOTES_TABLE})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(233);var i=t(329),o=function(){function e(e,n,t,o,r,l){var s=this;this.domUtils=e,this.textUtils=n,this.notesProvider=r,this.notesSync=l,this.type="course",this.refreshIcon="spinner",this.syncIcon="spinner",this.hasOffline=!1,this.notesLoaded=!1,this.syncObserver=o.on(i.a.AUTO_SYNCED,function(e){e.courseId==s.courseId&&(s.showSyncWarnings(e.warnings),s.notesLoaded=!1,s.refreshIcon="spinner",s.syncIcon="spinner",s.domUtils.scrollToTop(s.content),s.fetchNotes(!1))},t.getCurrentSiteId())}return e.prototype.ngOnInit=function(){var e=this;this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId).catch(function(){})})},e.prototype.fetchNotes=function(e,n){var t=this;return(e?this.syncNotes(n):Promise.resolve()).catch(function(){}).then(function(){return t.notesProvider.getNotes(t.courseId).then(function(e){return e=e[t.type+"notes"]||[],t.hasOffline=e.some(function(e){return e.offline}),t.notesProvider.getNotesUserData(e,t.courseId).then(function(e){t.notes=e})})}).catch(function(e){t.domUtils.showErrorModal(e)}).finally(function(){t.notesLoaded=!0,t.refreshIcon="refresh",t.syncIcon="sync"})},e.prototype.refreshNotes=function(e,n){var t=this;this.refreshIcon="spinner",this.syncIcon="spinner",this.notesProvider.invalidateNotes(this.courseId).finally(function(){t.fetchNotes(!0,e).finally(function(){n&&n.complete()})})},e.prototype.typeChanged=function(){var e=this;this.notesLoaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId).catch(function(){})})},e.prototype.syncNotes=function(e){var n=this;return this.notesSync.syncNotes(this.courseId).then(function(e){n.showSyncWarnings(e)}).catch(function(t){return e&&n.domUtils.showErrorModalDefault(t,"core.errorsync",!0),Promise.reject(null)})},e.prototype.showSyncWarnings=function(e){var n=this.textUtils.buildMessage(e);n&&this.domUtils.showErrorModal(n)},e.prototype.ngOnDestroy=function(){this.syncObserver&&this.syncObserver.off()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var i=t(285),o=(t(1200),t(1201),t(1202),[i.a]),r=function(){return function(e,n,t,o,r,l,s,a,u,c,d,f,p,h){e.registerHandler(n),t.registerHandler(o),r.register(l);var m=function(e){c.isFeatureDisabled("CoreMainMenuDelegate_AddonNotifications",e.site).then(function(n){n||d.invalidateNotificationsList().finally(function(){p.goInSite(void 0,"AddonNotificationsListPage",void 0,e.site)})})};a.isDesktop()&&f.registerClick(i.a.PUSH_SIMULATION_COMPONENT,m),h.on("click").subscribe(function(e){if(u.isTrueOrOne(e.notif))return s.run(function(){m(e)}),!0})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(9);var i=t(345),o=t(228),r=t(13),l=[i.a,o.a],s=function(){return function(e,n,t,o,l,s){var a=l.getInstance("AddonPushNotificationsModule");e.ready().then(function(){n.registerDevice()}),t.on(r.a.NOTIFICATION_SOUND_CHANGED,function(){n.registerDevice()}),t.on(r.a.LOGIN,function(){n.registerDeviceOnMoodle().catch(function(e){a.warn("Can't register device",e)})}),t.on(r.a.SITE_DELETED,function(e){n.unregisterDeviceOnMoodle(e).catch(function(e){a.warn("Can't unregister device",e)}),n.cleanSiteCounters(e.id)}),o.registerClick(i.a.COMPONENT,n.notificationClicked.bind(n)),s.registerAppTableMigration({name:"mma_pushnotifications_badge",newName:i.a.BADGE_TABLE,fields:[{name:"siteid",newName:"siteId"}]}),s.registerLocalNotifComponentMigration("mmaPushNotifications",i.a.COMPONENT)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var i=t(1203),o=t(13),r=t(154),l=[i.a],s=function(){return function(e,n,t,i,l){var s=l.getInstance("AddonRemoteThemesModule");e.registerProcess({name:"AddonRemoteThemesPreloadCurrent",priority:r.a.MAX_RECOMMENDED_PRIORITY+250,blocking:!0,load:n.preloadCurrentSite.bind(n)}),e.registerProcess({name:"AddonRemoteThemesPreload",blocking:!0,load:n.preloadSites.bind(n)});var a;t.on(o.a.SITE_ADDED,function(e){a=e.siteId,n.addSite(e.siteId).catch(function(e){s.error("Error adding site",e)}).then(function(){a==e.siteId&&(a=!1),e.siteId==i.getCurrentSiteId()&&(n.unloadTmpStyles(),n.enable(e.siteId))})}),t.on(o.a.SITE_UPDATED,function(e){e.siteId===i.getCurrentSiteId()&&n.load(e.siteId).catch(function(e){s.error("Error loading site after site update",e)})}),t.on(o.a.LOGIN,function(e){n.unloadTmpStyles(),n.enable(e.siteId)}),t.on(o.a.LOGOUT,function(e){n.clear()}),t.on(o.a.SITE_DELETED,function(e){n.removeSite(e.id)}),t.on(o.a.LOGIN_SITE_CHECKED,function(e){n.loadTmpStyles(e.config.mobilecssurl).catch(function(e){s.error("Error loading tmp styles",e)})}),t.on(o.a.LOGIN_SITE_UNCHECKED,function(e){e.siteId&&e.siteId===a||n.unloadTmpStyles()})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModDataDefaultFieldHandler",this.type="default"}return e.prototype.getFieldSearchData=function(e,n){return!1},e.prototype.getFieldEditData=function(e,n,t){return!1},e.prototype.hasFieldDataChanged=function(e,n,t){return!1},e.prototype.getFieldEditFiles=function(e,n,t){return[]},e.prototype.getFieldsNotifications=function(e,n){return!1},e.prototype.overrideData=function(e,n,t){return e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(57),function(e){function n(n,t){return e.call(this,n,t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.jsData.workshopId=this.workshopId,this.jsData.assessment=this.assessment,this.jsData.edit=this.edit,this.jsData.selectedValues=this.selectedValues,this.jsData.fieldErrors=this.fieldErrors,this.jsData.strategy=this.strategy,this.getHandlerData("workshopform_"+this.strategy)},n}(t(245).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(413);var i=t(13),o=(t(317),t(428),function(){function e(e,n,t,i,o,r,l,s,a,u,c,d){var f=this;this.platform=e,this.eventsProvider=o,this.loginHelper=r,this.zone=l,this.appProvider=s,this.langProvider=a,this.sitesProvider=u,this.screenOrientation=c,this.rootPage="CoreLoginInitPage",this.lastUrls={},this.logger=t.getInstance("AppComponent"),e.ready().then(function(){e.is("android")?n.styleLightContent():n.styleDefault(),i.hideFormAccessoryBar(!1);var t=f.appProvider.isDesktop()?"platform-desktop":"";t+=f.appProvider.isMac()?" platform-mac":"",t+=f.appProvider.isLinux()?" platform-linux":"",""!=(t+=f.appProvider.isWindows()?" platform-windows":"")&&d.setElementClass(t,!0)})}return e.prototype.ngOnInit=function(){var e=this;this.eventsProvider.on(i.a.LOGOUT,function(){e.appProvider.getRootNavController().setRoot("CoreLoginSitesPage"),e.langProvider.clearCustomStrings(),e.removeVersionClass()}),this.eventsProvider.on(i.a.SESSION_EXPIRED,function(n){e.loginHelper.sessionExpired(n)}),this.eventsProvider.on(i.a.PASSWORD_CHANGE_FORCED,function(n){e.loginHelper.openInAppForEdit(n.siteId,"/login/change_password.php","core.forcepasswordchangenotice",!0)}),this.eventsProvider.on(i.a.USER_NOT_FULLY_SETUP,function(n){e.loginHelper.openInAppForEdit(n.siteId,"/user/edit.php","core.usernotfullysetup")}),this.eventsProvider.on(i.a.SITE_POLICY_NOT_AGREED,function(n){e.loginHelper.sitePolicyNotAgreed(n.siteId)}),this.eventsProvider.on(i.a.IAB_LOAD_START,function(n){e.loginHelper.inAppBrowserLoadStart(n.url)}),this.eventsProvider.on(i.a.IAB_EXIT,function(){e.loginHelper.waitingForBrowser=!1,e.loginHelper.lastInAppUrl="",e.loginHelper.checkLogout()}),this.platform.resume.subscribe(function(){setTimeout(function(){e.loginHelper.waitingForBrowser=!1,e.loginHelper.checkLogout()},1e3)}),window.handleOpenURL=function(n){e.zone.run(function(){e.lastUrls[n]&&Date.now()-e.lastUrls[n]<3e3||(e.logger.debug("App launched by URL ",n),e.lastUrls[n]=Date.now(),e.eventsProvider.trigger(i.a.APP_LAUNCHED_URL,n))})},this.eventsProvider.on(i.a.APP_LAUNCHED_URL,function(n){e.loginHelper.appLaunchedByURL(n)});var n=function(){var n=e.sitesProvider.getCurrentSite(),t=n&&n.getStoredConfig("tool_mobile_customlangstrings");void 0!==t&&e.langProvider.loadCustomStrings(t)};this.eventsProvider.on(i.a.LOGIN,function(t){t.siteId&&e.sitesProvider.getSite(t.siteId).then(function(n){var t=n.getInfo();t&&(e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),n()}),this.eventsProvider.on(i.a.SITE_UPDATED,function(t){t.siteId==e.sitesProvider.getCurrentSiteId()&&(n(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),this.eventsProvider.on(i.a.SITE_ADDED,function(t){t.siteId==e.sitesProvider.getCurrentSiteId()&&(n(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),this.platform.pause.subscribe(function(){if(e.platform.is("android")){var n=function(e){for(var t=0;t<e.length;t++)n(e[t]);if(e.location.hostname.match(/^www\.youtube(-nocookie)?\.com$/)){var i=e.document.querySelectorAll("video");for(t=0;t<i.length;t++)i[t].pause()}};n(window)}}),this.screenOrientation.onChange().subscribe(function(){if(e.platform.is("ios")){var n=document.querySelector("meta[name=viewport]");n.setAttribute("content",n.getAttribute("content").replace("viewport-fit=cover,","")),setTimeout(function(){n.setAttribute("content","viewport-fit=cover,"+n.getAttribute("content"))})}e.eventsProvider.trigger(i.a.ORIENTATION_CHANGE)})},e.prototype.addVersionClass=function(e){var n=e.split(".");n[1]=n[1]||"0",n[2]=n[2]||"0",document.body.classList.add("version-"+n[0],"version-"+n[0]+"-"+n[1],"version-"+n[0]+"-"+n[1]+"-"+n[2])},e.prototype.removeVersionClass=function(){var e=[];Array.from(document.body.classList).forEach(function(n){"version-"==n.substring(0,8)&&e.push(n)}),e.forEach(function(e){document.body.classList.remove(e)})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(23),o=function(){function e(e,n){this.fb=e,this.utils=n,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;var n={value:this.utils.isTrueOrOne(e.defaultdata),disabled:this.disabled};this.form.addControl(e.modelName,this.fb.control(n,e.required&&!e.locked?i.u.requiredTrue:null))}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(23),o=(t(4),function(){function e(e,n,t,i){this.fb=e,this.timeUtils=n,this.utils=t,this.translate=i,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e,n=this.field;if(n&&this.edit&&this.form){n.modelName="profile_field_"+n.shortname;var t=this.utils.isTrueOrOne(n.param3);n.format=this.timeUtils.convertPHPToMoment(this.translate.instant("core."+(t?"strftimedatetimeshort":"strftimedatefullshort"))).replace(/[\[\]]/g,""),n.param1&&(e=parseInt(n.param1,10))&&(n.min=e),n.param2&&(e=parseInt(n.param2,10))&&(n.max=e);this.form.addControl(n.modelName,this.fb.control({value:n.defaultdata,disabled:this.disabled},n.required&&!n.locked?i.u.required:null))}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(23),o=function(){function e(e){this.fb=e,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.options=e.param1?e.param1.split(/\r\n|\r|\n/g):[];this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?i.u.required:null))}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(23),o=function(){function e(e,n){this.fb=e,this.utils=n,this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.param2&&(e.maxlength=parseInt(e.param2,10)||""),e.inputType=this.utils.isTrueOrOne(e.param3)?"password":"text";this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?i.u.required:null))}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(23),o=function(){function e(){this.edit=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;this.control=new i.e({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?i.u.required:null),this.form.addControl(e.modelName,this.control)}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(246),r=t(40),l=(t(4),function(e){function n(n,t,i,o,r){var l=e.call(this,n,"AddonBlockActivityModulesComponent")||this;return l.utils=t,l.courseProvider=i,l.translate=o,l.moduleDelegate=r,l.entries=[],l.fetchContentDefaultError="Error getting activity modules data.",l}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},n.prototype.invalidateContent=function(){return this.courseProvider.invalidateSections(this.instanceId)},n.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.instanceId,!1,!0).then(function(n){e.entries=[];var t={},i={},o={};n.forEach(function(n){n.modules&&n.modules.forEach(function(n){!1!==n.uservisible&&e.courseProvider.moduleHasView(n)&&void 0===o[n.modname]&&(void 0===t[n.modname]&&(t[n.modname]=e.moduleDelegate.supportsFeature(n.modname,r.a.FEATURE_MOD_ARCHETYPE,r.a.MOD_ARCHETYPE_OTHER)),t[n.modname]==r.a.MOD_ARCHETYPE_RESOURCE?o.resources||(o.resources=e.translate.instant("core.resources")):o[n.modname]=n.modplural,i[n.modname]=n.modicon)})}),o=e.utils.sortValues(o);for(var l in o){var s=void 0;s="resources"===l?e.courseProvider.getModuleIconSrc("page",i.page):e.moduleDelegate.getModuleIconSrc(l,i[l]),e.entries.push({icon:s,name:o[l],modName:l})}})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=(t(9),t(51)),r=function(e){function n(n,t,i,o,r,l,s,a,u,c){var d=e.call(this,n,"AddonBlockMyOverviewComponent")||this;return d.coursesProvider=t,d.courseCompletionProvider=i,d.eventsProvider=o,d.courseHelper=r,d.utils=l,d.courseOptionsDelegate=s,d.coursesHelper=a,d.sitesProvider=u,d.timeUtils=c,d.courses={filter:"",all:[],past:[],inprogress:[],future:[],favourite:[],hidden:[]},d.selectedFilter="inprogress",d.sort="fullname",d.prefetchCoursesData={all:{},inprogress:{},past:{},future:{},favourite:{},hidden:{}},d.showFilter=!1,d.showFavourite=!1,d.showHidden=!1,d.showSelectorFilter=!1,d.showSortFilter=!1,d.prefetchIconsInitialized=!1,d.courseIds=[],d.fetchContentDefaultError="Error getting my overview data.",d}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;this.downloadButtonObserver=this.eventsProvider.on(o.a.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED,function(e){var t=n.downloadEnabled;n.downloadEnabled=e.enabled,!t&&n.downloadEnabled&&n.loaded&&n.initPrefetchCoursesIcons()}),this.coursesObserver=this.eventsProvider.on(o.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),this.currentSite=this.sitesProvider.getCurrentSite();var t=[];t.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewSort",this.sort).then(function(e){n.sort=e})),t.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewFilter",this.selectedFilter).then(function(e){n.selectedFilter=void 0===n.courses[e]?"inprogress":e})),Promise.all(t).finally(function(){e.prototype.ngOnInit.call(n)})},n.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){n.push(e.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},n.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions(this.sort).then(function(n){e.courseIds=n.map(function(e){return e.id}),e.showSortFilter=n.length>0&&void 0!==n[0].lastaccess,e.initCourseFilters(n),e.courses.filter="",e.showFilter=!1,e.showSelectorFilter=n.length>0&&(e.courses.past.length>0||e.courses.future.length>0||void 0!==n[0].enddate),e.showHidden=e.showSelectorFilter&&void 0!==n[0].hidden,e.showFavourite=e.showSelectorFilter&&void 0!==n[0].isfavourite,e.showSelectorFilter||(e.selectedFilter="all"),e.filteredCourses=e.courses[e.selectedFilter],e.initPrefetchCoursesIcons()})},n.prototype.filterChanged=function(e){var n=e.target.value&&e.target.value.trim().toLowerCase();this.filteredCourses=n&&this.courses.all?this.courses.all.filter(this.courses.all.length>0&&void 0!==this.courses.all[0].displayname?function(e){return e.displayname.toLowerCase().indexOf(n)>-1}:function(e){return e.fullname.toLowerCase().indexOf(n)>-1}):this.courses.all},n.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,Object.keys(this.prefetchCoursesData).forEach(function(n){e.courseHelper.initPrefetchCoursesIcons(e.courses[n],e.prefetchCoursesData[n]).then(function(t){e.prefetchCoursesData[n]=t})}))},n.prototype.prefetchCourses=function(){var e=this,n=this.selectedFilter,t=this.prefetchCoursesData[n].icon;return this.courseHelper.prefetchCourses(this.courses[n],this.prefetchCoursesData[n]).catch(function(i){e.isDestroyed||(e.domUtils.showErrorModalDefault(i,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData[n].icon=t)})},n.prototype.selectedChanged=function(){this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewFilter",this.selectedFilter),this.filteredCourses=this.courses[this.selectedFilter]},n.prototype.initCourseFilters=function(e){var n=this;this.showSortFilter&&("lastaccess"==this.sort?e.sort(function(e,n){return n.lastaccess-e.lastaccess}):"fullname"==this.sort&&e.sort(function(e,n){var t=e.fullname.toLowerCase(),i=n.fullname.toLowerCase();return t.localeCompare(i)})),this.courses.all=[],this.courses.past=[],this.courses.inprogress=[],this.courses.future=[],this.courses.favourite=[],this.courses.hidden=[];var t=this.timeUtils.timestamp();e.forEach(function(e){e.hidden?n.courses.hidden.push(e):(n.courses.all.push(e),e.enddate&&e.enddate<t||e.completed?n.courses.past.push(e):e.startdate>t?n.courses.future.push(e):n.courses.inprogress.push(e),e.isfavourite&&n.courses.favourite.push(e))}),this.filteredCourses=this.courses[this.selectedFilter]},n.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewSort",this.sort),this.initCourseFilters(this.courses.all.concat(this.courses.hidden))},n.prototype.switchFilter=function(){var e=this;this.showFilter=!this.showFilter,this.courses.filter="",this.filteredCourses=this.courses[this.showFilter?"all":this.selectedFilter],this.showFilter&&setTimeout(function(){e.searchbar.setFocus()},500)},n.prototype.showFilterSwitchButton=function(){return this.loaded&&this.courses.all&&this.courses.all.length>5},n.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.downloadButtonObserver&&this.downloadButtonObserver.off()},n}(t(246).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t,i,o,r,l){var s=e.call(this,n,"AddonBlockSiteMainMenuComponent")||this;return s.sitesProvider=t,s.courseProvider=i,s.courseHelper=o,s.siteHomeProvider=r,s.prefetchDelegate=l,s.fetchContentDefaultError="Error getting main menu data.",s.siteHomeId=t.getCurrentSite().getSiteHomeId(),s}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},n.prototype.invalidateContent=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.siteHomeId)),e.push(this.siteHomeProvider.invalidateNewsForum(this.siteHomeId)),this.block&&this.block.modules&&e.push(this.prefetchDelegate.invalidateModules(this.block.modules,this.siteHomeId)),Promise.all(e)},n.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(n){if(e.block=n[0],e.block){e.block.hasContent=e.courseHelper.sectionHasContent(e.block),e.courseHelper.addHandlerDataForModules([e.block],e.siteHomeId);var t=e.sitesProvider.getCurrentSite(),i=t?t.getStoredConfig()||{}:{},o=!1;if(i.frontpageloggedin){o=i.frontpageloggedin.split(",").find(function(e){return"0"==e})}if(o&&e.block.modules)return e.siteHomeProvider.getNewsForum(e.siteHomeId).then(function(n){for(var t=0;t<e.block.modules.length;t++){var i=e.block.modules[t];if("forum"==i.modname&&i.instance==n.id){e.block.modules.splice(t,1);break}}}).catch(function(){})}})},n}(t(246).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(246),r=(t(274),function(e){function n(n,t,i,o,r,l,s,a){var u=e.call(this,n,"AddonBlockTimelineComponent")||this;return u.coursesProvider=t,u.utils=i,u.timelineProvider=o,u.courseOptionsDelegate=r,u.coursesHelper=l,u.sitesProvider=s,u.timeUtils=a,u.sort="sortbydates",u.filter="next30days",u.timeline={events:[],loaded:!1,canLoadMore:void 0},u.timelineCourses={courses:[],loaded:!1,canLoadMore:!1},u.courseIds=[],u.fetchContentDefaultError="Error getting timeline data.",u}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;this.currentSite=this.sitesProvider.getCurrentSite(),this.currentSite.getLocalSiteConfig("AddonBlockTimelineFilter",this.filter).then(function(e){n.filter=e,n.switchFilter()}),this.currentSite.getLocalSiteConfig("AddonBlockTimelineSort",this.sort).then(function(t){n.sort=t,e.prototype.ngOnInit.call(n)})},n.prototype.invalidateContent=function(){var e=[];return e.push(this.timelineProvider.invalidateActionEventsByTimesort()),e.push(this.timelineProvider.invalidateActionEventsByCourses()),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&e.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(e)},n.prototype.fetchContent=function(){var e=this;return"sortbydates"==this.sort?this.fetchMyOverviewTimeline().finally(function(){e.timeline.loaded=!0}):"sortbycourses"==this.sort?this.fetchMyOverviewTimelineByCourses().finally(function(){e.timelineCourses.loaded=!0}):void 0},n.prototype.loadMoreTimeline=function(){var e=this;return this.fetchMyOverviewTimeline(this.timeline.canLoadMore).catch(function(n){e.domUtils.showErrorModalDefault(n,e.fetchContentDefaultError)})},n.prototype.loadMoreCourse=function(e){var n=this;return this.timelineProvider.getActionEventsByCourse(e.id,e.canLoadMore).then(function(n){e.events=e.events.concat(n.events),e.canLoadMore=n.canLoadMore}).catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError)})},n.prototype.fetchMyOverviewTimeline=function(e){var n=this;return this.timelineProvider.getActionEventsByTimesort(e).then(function(e){n.timeline.events=e.events,n.timeline.canLoadMore=e.canLoadMore})},n.prototype.fetchMyOverviewTimelineByCourses=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions().then(function(n){var t=e.timeUtils.timestamp();if(n=n.filter(function(e){return e.startdate<=t&&(!e.enddate||e.enddate>=t)}),e.timelineCourses.courses=n,n.length>0)return e.courseIds=n.map(function(e){return e.id}),e.timelineProvider.getActionEventsByCourses(e.courseIds).then(function(n){e.timelineCourses.courses.forEach(function(e){e.events=n[e.id].events,e.canLoadMore=n[e.id].canLoadMore})})})},n.prototype.switchFilter=function(){switch(this.currentSite.setLocalSiteConfig("AddonBlockTimelineFilter",this.filter),this.filter){case"overdue":this.dataFrom=-14,this.dataTo=0;break;case"next7days":this.dataFrom=0,this.dataTo=7;break;case"next30days":this.dataFrom=0,this.dataTo=30;break;case"next3months":this.dataFrom=0,this.dataTo=90;break;case"next6months":this.dataFrom=0,this.dataTo=180;break;default:case"all":this.dataFrom=-14,this.dataTo=void 0}},n.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockTimelineSort",this.sort),this.timeline.loaded||"sortbydates"!=this.sort?this.timelineCourses.loaded||"sortbycourses"!=this.sort||this.fetchContent():this.fetchContent()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(14)),l=(t.n(r),function(){function e(e,n,t,i,r,l,s,a){this.navCtrl=e,this.utils=n,this.textUtils=t,this.domUtils=i,this.sitesProvider=r,this.courseProvider=l,this.contentLinksHelper=s,this.timeUtils=a,this.events=[],this.filteredEvents=[],this.loadMore=new o.r}return e.prototype.ngOnChanges=function(e){var n=this;if(this.showCourse=this.utils.isTrueOrOne(this.showCourse),e.events||e.from||e.to)if(this.events&&this.events.length>0){var t=this.filterEventsByTime(this.from,this.to);this.empty=!t||t.length<=0;var i={};t.forEach(function(e){var t=n.timeUtils.getMidnightForTimestamp(e.timesort);i[t]?i[t].push(e):i[t]=[e]});var o=this.timeUtils.getMidnightForTimestamp();this.filteredEvents=[],Object.keys(i).forEach(function(e){var t=parseInt(e);n.filteredEvents.push({color:t<o?"danger":"light",dayTimestamp:t,events:i[t]})})}else this.empty=!0},e.prototype.filterEventsByTime=function(e,n){var t=this;return e=r().add(e,"days").startOf("day").unix(),n=void 0!==n?r().add(n,"days").startOf("day").unix():n,this.events.filter(function(t){return n?e<=t.timesort&&t.timesort<n:e<=t.timesort}).map(function(e){return e.iconUrl=t.courseProvider.getModuleIconSrc(e.icon.component),e})},e.prototype.loadMoreEvents=function(){this.loadingMore=!0,this.loadMore.emit()},e.prototype.action=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),n=this.textUtils.decodeHTMLEntities(n);var i=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(n,void 0,this.navCtrl).then(function(e){if(!e)return t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(n)}).finally(function(){i.dismiss()})},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(51),r=function(e){function n(n,t,i,o,r,l,s,a,u){var c=e.call(this,n,"AddonBlockRecentlyAccessedCoursesComponent")||this;return c.coursesProvider=t,c.courseCompletionProvider=i,c.eventsProvider=o,c.courseHelper=r,c.utils=l,c.courseOptionsDelegate=s,c.coursesHelper=a,c.sitesProvider=u,c.courses=[],c.prefetchCoursesData={icon:"",badge:""},c.prefetchIconsInitialized=!1,c.courseIds=[],c.fetchContentDefaultError="Error getting recent courses data.",c}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;this.downloadButtonObserver=this.eventsProvider.on(o.a.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED,function(e){var t=n.downloadEnabled;n.downloadEnabled=e.enabled,!t&&n.downloadEnabled&&n.loaded&&n.initPrefetchCoursesIcons()}),this.coursesObserver=this.eventsProvider.on(o.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},n.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},n.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("lastaccess",10).then(function(n){e.courses=n,e.initPrefetchCoursesIcons()})},n.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(n){e.prefetchCoursesData=n}))},n.prototype.prefetchCourses=function(){var e=this,n=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(t){e.isDestroyed||(e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=n)})},n.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.downloadButtonObserver&&this.downloadButtonObserver.off()},n}(t(246).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(246)),l=(t(429),function(e){function n(n,t,i,o,r,l){var s=e.call(this,n,"AddonBlockRecentlyAccessedItemsComponent")||this;return s.navCtrl=t,s.sitesProvider=i,s.textUtils=o,s.recentItemsProvider=r,s.contentLinksHelper=l,s.items=[],s.fetchContentDefaultError="Error getting recently accessed items data.",s}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},n.prototype.invalidateContent=function(){return this.recentItemsProvider.invalidateRecentItems()},n.prototype.fetchContent=function(){var e=this;return this.recentItemsProvider.getRecentItems().then(function(n){e.items=n})},n.prototype.action=function(e,n){var t=this;e.preventDefault(),e.stopPropagation();var i=this.textUtils.decodeHTMLEntities(n.viewurl),o=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(i,void 0,this.navCtrl).then(function(e){if(!e)return t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(i)}).finally(function(){o.dismiss()})},n=Object(i.__decorate)([Object(i.__param)(1,Object(o.E)())],n)}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(51),r=function(e){function n(n,t,i,o,r,l,s,a,u){var c=e.call(this,n,"AddonBlockStarredCoursesComponent")||this;return c.coursesProvider=t,c.courseCompletionProvider=i,c.eventsProvider=o,c.courseHelper=r,c.utils=l,c.courseOptionsDelegate=s,c.coursesHelper=a,c.sitesProvider=u,c.courses=[],c.prefetchCoursesData={icon:"",badge:""},c.prefetchIconsInitialized=!1,c.courseIds=[],c.fetchContentDefaultError="Error getting starred courses data.",c}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;this.downloadButtonObserver=this.eventsProvider.on(o.a.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED,function(e){var t=n.downloadEnabled;n.downloadEnabled=e.enabled,!t&&n.downloadEnabled&&n.loaded&&n.initPrefetchCoursesIcons()}),this.coursesObserver=this.eventsProvider.on(o.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},n.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},n.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("timemodified",0,"isfavourite").then(function(n){e.courses=n,e.initPrefetchCoursesIcons()})},n.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(n){e.prefetchCoursesData=n}))},n.prototype.prefetchCourses=function(){var e=this,n=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(t){e.isDestroyed||(e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=n)})},n.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.downloadButtonObserver&&this.downloadButtonObserver.off()},n}(t(246).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(i.__extends)(n,e),n.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var n=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(t){e.options.findIndex(function(e){return t==e.key})>=0&&n.push(t)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,n)}},n.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(4),function(e){function n(n,t,i){var o=e.call(this,n)||this;return o.fb=n,o.timeUtils=t,o.translate=i,o}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){var e;this.format=this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedatefullshort")).replace(/[\[\]]/g,""),"search"==this.mode?(this.addControl("f_"+this.field.id+"_z"),e=this.search["f_"+this.field.id+"_y"]?new Date(this.search["f_"+this.field.id+"_y"]+"-"+this.search["f_"+this.field.id+"_m"]+"-"+this.search["f_"+this.field.id+"_d"]):new Date,this.search["f_"+this.field.id]=e.toISOString()):e=(e=this.value&&this.value.content?new Date(1e3*parseInt(this.value.content,10)):new Date).toISOString(),this.addControl("f_"+this.field.id,e)}},n}(t(158).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(158),r=t(96),l=function(e){function n(n,t){var i=e.call(this,n)||this;return i.fb=n,i.fileSessionprovider=t,i.files=[],i}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e){var n=e&&e.files||[];return n.length>0&&(n=[n[0]]),n},n.prototype.init=function(){"search"!=this.mode?(this.component=r.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode&&(this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files))):this.addControl("f_"+this.field.id)},n.prototype.updateValue=function(e){this.value=e,this.files=this.getFiles(e)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=(t(9),function(e){function n(n,t){var i=e.call(this,n)||this;return i.fb=n,i.platform=t,i}return Object(i.__extends)(n,e),n.prototype.formatLatLong=function(e,n){if(null!==e||null!==n){var t=e?Math.abs(e).toFixed(4):"0.0000",i=n?Math.abs(n).toFixed(4):"0.0000";return t+(e<0?"S":"N")+" "+i+(n<0?"W":"E")}},n.prototype.getLatLongLink=function(e,n){if(null!==e||null!==n){var t=e?e.toFixed(4):"0.0000",i=n?n.toFixed(4):"0.0000";return this.platform.is("ios")?"http://maps.apple.com/?ll="+t+","+i+"&near="+t+","+i:"geo:"+t+","+i}},n.prototype.init=function(){this.value&&this.updateValue(this.value),"edit"==this.mode?(this.addControl("f_"+this.field.id+"_0",this.north),this.addControl("f_"+this.field.id+"_1",this.east)):"search"==this.mode&&this.addControl("f_"+this.field.id)},n.prototype.updateValue=function(e){this.value=e,this.north=e&&parseFloat(e.content)||null,this.east=e&&parseFloat(e.content1)||null},n}(t(158).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(i.__extends)(n,e),n.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var n=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(t){e.options.findIndex(function(e){return t==e.key})>=0&&n.push(t)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,n)}},n.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){var e;if("edit"==this.mode&&this.value){var n=parseFloat(this.value.content);e=isNaN(n)?"":n}this.addControl("f_"+this.field.id,e)}},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(158),r=t(96),l=function(e){function n(n,t,i){var o=e.call(this,n)||this;return o.fb=n,o.fileSessionprovider=t,o.domUtils=i,o.files=[],o}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e){var n=e&&e.files||[];return n.length>0&&(n=[n[0]]),n},n.prototype.findFile=function(e,n){return e.find(function(e){return e.filename==n})||!1},n.prototype.init=function(){if("search"!=this.mode){if(this.component=r.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode){this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files);this.addControl("f_"+this.field.id+"_alttext",this.value&&this.value.content1||"")}}else this.addControl("f_"+this.field.id)},n.prototype.updateValue=function(e){var n=this;this.value=e;var t=e&&e.files||[];if(t.length>0){this.image=this.findFile(t,"list"==this.mode?"thumb_"+e.content:e.content),this.image||"list"!=this.mode||(this.image=this.findFile(t,e.content)),this.files=[this.image]}else this.image=!1,this.files=[];"edit"!=this.mode&&(this.entryId=e&&e.recordid||null,this.title=e&&e.content1||"",this.imageUrl=null,setTimeout(function(){n.image&&(n.imageUrl=n.image.offline?n.image.toURL():n.image.fileurl)},1),this.width=this.domUtils.formatPixelsSize(this.field.param1),this.height=this.domUtils.formatPixelsSize(this.field.param2))},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(96),r=function(e){function n(n,t){var i=e.call(this,n)||this;return i.fb=n,i.textUtils=t,i}return Object(i.__extends)(n,e),n.prototype.format=function(e){return e?this.textUtils.replacePluginfileUrls(e.content,e&&e.files||[]):""},n.prototype.init=function(){if(this.isShowOrListMode())return this.component=o.a.COMPONENT,void(this.componentId=this.database.coursemodule);var e;if("edit"==this.mode){e=this.value?this.textUtils.replacePluginfileUrls(this.value.content,this.value&&this.value.files||[]):""}this.addControl("f_"+this.field.id,e)},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(i.__extends)(n,e),n.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},n}(t(158).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.questionDelegate=e,this.questionProvider=n,this.name="AddonQbehaviourDeferredFeedback",this.type="deferredfeedback"}return e.prototype.determineNewState=function(e,n,t,i){return this.determineNewStateDeferred(e,n,t,i)},e.prototype.determineNewStateDeferred=function(e,n,t,i,o,r){var l=this;return this.questionProvider.getQuestion(e,n,t.slot,i).catch(function(){return t}).then(function(s){var a=l.questionProvider.getState(s.state);return a.finished||!a.active?a:l.questionProvider.getQuestionAnswers(e,n,t.slot,!1,i).then(function(e){var n=l.questionProvider.getBasicAnswers(t.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var i=l.questionProvider.getBasicAnswers(e);if(r){if(r(t,e,i,t.answers,n))return a}else if(l.questionDelegate.isSameResponse(t,i,n))return a;var s,u;if((s=o?o(t,t.answers):l.questionDelegate.isCompleteResponse(t,n))<0)u="cannotdeterminestatus";else if(s>0)u="complete";else{var c=l.questionDelegate.isGradableResponse(t,n);u=c<0?"cannotdeterminestatus":c>0?"invalid":"todo"}return l.questionProvider.getState(u)})})},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(331),o=function(){function e(e){this.utils=e,this.name="AddonQtypeMultichoice",this.type="qtype_multichoice"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){var t=!0,i=!1;for(var o in n)-1!=o.indexOf("choice")&&(t=!1,n[o]&&(i=!0));return t?this.isCompleteResponseSingle(n):i?1:0},e.prototype.isCompleteResponseSingle=function(e){return e.answer&&""!==e.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},e.prototype.isGradableResponseSingle=function(e){return this.isCompleteResponseSingle(e)},e.prototype.isSameResponse=function(e,n,t){var i=!0,o=!0;for(var r in t)-1!=r.indexOf("choice")&&(i=!1,this.utils.sameAtKeyMissingIsBlank(n,t,r)||(o=!1));return i?this.isSameResponseSingle(n,t):o},e.prototype.isSameResponseSingle=function(e,n){return this.utils.sameAtKeyMissingIsBlank(e,n,"answer")},e.prototype.prepareAnswers=function(e,n,t,i){!e||e.multi||void 0===n[e.optionsName]||n[e.optionsName]||delete n[e.optionsName]},e}()},function(e,n,t){"use strict";var i=t(0),o=(t(1),t(6),t(171)),r=function(){function e(e,n,t,i,o,r){this.domUtils=n,this.container=t,this.question=i,this.readOnly=o,this.drops=r,this.toLoad=0,this.afterImageLoadDone=!1,this.proportion=1,this.logger=e.getInstance("AddonQtypeDdImageOrTextQuestion"),this.initializer(i)}return e.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},e.prototype.convertToWindowXY=function(e){var n=this.doc.bgImg(),t=this.domUtils.getElementXY(n,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+t[0]+1,Number(e[1])+t[1]+1]},e.prototype.createAllDragAndDrops=function(){this.initDrops();this.doc.dragItemsArea().classList.add("clearfix"),this.makeDragAreaClickable();for(var e=this.doc.dragItemHomes(),n=0,t=0;t<e.length;t++){var i=e[t],o=this.doc.getClassnameNumericSuffix(i,"dragitemhomes"),r=this.doc.getClassnameNumericSuffix(i,"choice"),l=this.doc.getClassnameNumericSuffix(i,"group");if("IMG"==i.tagName){var s=document.createElement("div");s.className=i.className,i.className="",i.parentNode.insertBefore(s,i),s.appendChild(i)}var a=this.doc.cloneNewDragItem(n,o);if(n++,this.readOnly||this.draggableForQuestion(a,l,r),a.classList.contains("infinite"))for(var u=this.doc.dropZoneGroup(l).length-1;u>0;){var c=this.doc.cloneNewDragItem(n,o);n++,this.readOnly||this.draggableForQuestion(c,l,r),u--}}if(this.repositionDragsForQuestion(),!this.readOnly){this.doc.dropZones().forEach(function(e){e.setAttribute("tabIndex","0")})}},e.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},e.prototype.destroy=function(){this.stopPolling(),this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.docStructure=function(e){var n=this,t=this.container.querySelector(".addon-qtype-ddimageortext-container"),i={},o=t.querySelector("div.draghomes");if(o){t.querySelector("div.dragitems").remove();var r=t.querySelector("div.ddarea");r.appendChild(t.querySelector("div.dropzones")),r.appendChild(o),o.classList.remove("draghomes"),o.classList.add("dragitems"),Array.from(o.querySelectorAll(".draghome")).forEach(function(e,n){e.classList.add("dragitemhomes"+n)})}else o=t.querySelector("div.dragitems");return i.topNode=function(){return t},i.dragItemsArea=function(){return o},i.dragItems=function(){return Array.from(o.querySelectorAll(".drag"))},i.dropZones=function(){return Array.from(t.querySelectorAll("div.dropzones div.dropzone"))},i.dropZoneGroup=function(e){return Array.from(t.querySelectorAll("div.dropzones div.group"+e))},i.dragItemsClonedFrom=function(e){return Array.from(o.querySelectorAll(".dragitems"+e))},i.dragItem=function(e){return o.querySelector(".draginstance"+e)},i.dragItemsInGroup=function(e){return Array.from(o.querySelectorAll(".drag.group"+e))},i.dragItemHomes=function(){return Array.from(o.querySelectorAll(".draghome"))},i.bgImg=function(){return t.querySelector(".dropbackground")},i.dragItemHome=function(e){return o.querySelector(".dragitemhomes"+e)},i.getClassnameNumericSuffix=function(e,t){if(e.classList&&e.classList.length)for(var i=new RegExp("^"+t+"([0-9])+$"),o=new RegExp("([0-9])+$"),r=0;r<e.classList.length;r++)if(i.test(e.classList[r])){var l=o.exec(e.classList[r]);return Number(l[0])}n.logger.warn('Prefix "'+t+'" not found in class names.')},i.cloneNewDragItem=function(e,n){var t=i.dragItemHome(n);if(null===t)return null;var o,r=t.querySelector("img");if(r){var l=r.cloneNode(!0);(o=document.createElement("div")).appendChild(l),o.className=t.className,l.className=""}else o=t.cloneNode(!0);return o.classList.remove("dragitemhomes"+n),o.classList.remove("draghome"),o.classList.add("dragitems"+n),o.classList.add("draginstance"+e),o.classList.add("drag"),o.style.visibility="inherit",o.style.position="absolute",o.setAttribute("draginstanceno",String(e)),o.setAttribute("dragitemno",String(n)),t.parentElement.insertBefore(o,t.nextSibling),o},i},e.prototype.draggableForQuestion=function(e,n,t){var i=this;e.setAttribute("group",String(n)),e.setAttribute("choice",String(t)),e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.classList.contains("beingdragged")?i.deselectDrags():i.selectDrag(e)})},e.prototype.dropClick=function(e){var n=this.selected;n&&(this.deselectDrags(),Number(e.getAttribute("group"))===Number(n.getAttribute("group"))&&this.placeDragInDrop(n,e))},e.prototype.getChoicesForDrop=function(e,n){return Array.from(this.doc.topNode().querySelectorAll("div.dragitemgroup"+n.getAttribute("group")+" .choice"+e+".drag"))},e.prototype.getUnplacedChoiceForDrop=function(e,n){for(var t=this.getChoicesForDrop(e,n),i=0;i<t.length;i++){var o=t[i];if(this.readOnly||!o.classList.contains("placed")&&!o.classList.contains("beingdragged"))return o}return null},e.prototype.initDrops=function(){for(var e=this,n=this.doc.topNode().querySelector("div.dropzones"),t={},i=1;i<=8;i++){var o=document.createElement("div");o.className="dropzonegroup"+i,n.appendChild(o),t[i]=o}var r=function(n){var i=l.drops[n],o="dropzone group"+i.group+" place"+n,r=i.text.replace('"','"'),s=document.createElement("div");s.setAttribute("title",r),s.className=o,t[i.group].appendChild(s),s.style.opacity="0.5",s.setAttribute("xy",i.xy),s.setAttribute("aria-label",i.text),s.setAttribute("place",n),s.setAttribute("inputid",i.fieldname.replace(":","_")),s.setAttribute("group",i.group),s.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.dropClick(s)})},l=this;for(var s in this.drops)r(s)},e.prototype.initializer=function(e){var n=this;if(this.doc=this.docStructure(e.slot),this.readOnly){this.doc.topNode().classList.add("readonly")}setTimeout(function(){var e=n.doc.bgImg();e.complete&&e.naturalWidth||(n.toLoad++,e.addEventListener("load",function(){n.toLoad--}));n.doc.dragItemHomes().forEach(function(e){if("IMG"==e.tagName){var t=e;t.complete&&t.naturalWidth||(n.toLoad++,t.addEventListener("load",function(){n.toLoad--}))}}),n.pollForImageLoad()}),this.resizeFunction=this.repositionDragsForQuestion.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.makeDragAreaClickable=function(){var e=this;if(!this.readOnly){this.doc.dragItemsArea().addEventListener("click",function(n){var t=e.selected;if(!t)return!1;e.deselectDrags(),e.removeDragFromDrop(t),n.preventDefault(),n.stopPropagation()})}},e.prototype.placeDragInDrop=function(e,n){var t=n.getAttribute("inputid"),i=this.doc.topNode().querySelector("input#"+t),o=e.getAttribute("inputid");if(o&&o!=t){this.doc.topNode().querySelector("input#"+o).setAttribute("value","")}var r=this.domUtils.getElementXY(n,null,"ddarea");e.style.left=r[0]-1+"px",e.style.top=r[1]-1+"px",e.classList.add("placed"),i.setAttribute("value",e.getAttribute("choice")),e.setAttribute("inputid",t)},e.prototype.pollForImageLoad=function(){var e=this;this.afterImageLoadDone||(this.toLoad<=0&&(this.createAllDragAndDrops(),this.afterImageLoadDone=!0,this.question.loaded=!0),setTimeout(function(){e.pollForImageLoad()},1e3))},e.prototype.removeDragFromDrop=function(e){var n=e.getAttribute("inputid");if(n){this.doc.topNode().querySelector("input#"+n).setAttribute("value","")}var t=this.doc.dragItemHome(Number(e.getAttribute("dragitemno"))),i=this.domUtils.getElementXY(t,null,"ddarea");e.style.left=i[0]+"px",e.style.top=i[1]+"px",e.classList.remove("placed"),e.setAttribute("inputid","")},e.prototype.repositionDragsForQuestion=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.remove("placed"),e.setAttribute("inputid","")}),this.calculateImgProportion();for(var n=this.doc.dragItemHomes(),t=function(e){var t=n[e],o=t.querySelector("img");if(o&&o.naturalWidth>0){var r=[Math.round(o.naturalWidth*i.proportion),Math.round(o.naturalHeight*i.proportion)];o.style.width=r[0]+"px",o.style.height=r[1]+"px";var l=i.doc.getClassnameNumericSuffix(t,"dragitemhomes"),s=i.doc.getClassnameNumericSuffix(t,"group");Array.from(i.doc.topNode().querySelectorAll(".drag.group"+s+".dragitems"+l+"  img")).forEach(function(e){e.style.width=r[0]+"px",e.style.height=r[1]+"px"})}},i=this,o=0;o<n.length;o++)t(o);this.updatePaddingSizesAll();var r=this.doc.dropZones();for(o=0;o<r.length;o++){var l=r[o],s=l.getAttribute("xy").split(",").map(function(e){return Number(e)}),a=this.convertToWindowXY(s);l.style.left=a[0]+"px",l.style.top=a[1]+"px";var u="input#"+l.getAttribute("inputid"),c=this.doc.topNode().querySelector(u),d=Number(c.value);if(d>0){null!==(f=this.getUnplacedChoiceForDrop(d,l))&&this.placeDragInDrop(f,l)}}for(o=0;o<e.length;o++){var f;(f=e[o]).classList.contains("placed")||f.classList.contains("beingdragged")||this.removeDragFromDrop(f)}},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged")},e.prototype.stopPolling=function(){this.afterImageLoadDone=!0},e.prototype.updatePaddingSizeForGroup=function(e){var n=Array.from(this.doc.topNode().querySelectorAll(".draghome.group"+e));if(0!==n.length){for(var t=0,i=0,o=0;o<n.length;o++){var r=n[o],l=r.querySelector("img");if(l)t=Math.max(t,Math.round(this.proportion*l.naturalWidth)),i=Math.max(i,Math.round(this.proportion*l.naturalHeight));else{var s=r.style.padding;r.style.padding="",t=Math.max(t,Math.round(r.clientWidth)),i=Math.max(i,Math.round(r.clientHeight)),r.style.padding=s}}if(t<=0||i<=0)return;t=Math.round(t+8*this.proportion),i=Math.round(i+8*this.proportion);var a=function(o){var r=n[o],l=r.querySelector("img"),s=void 0,a=void 0;if(l)s=Math.round(l.naturalWidth*u.proportion),a=Math.round(l.naturalHeight*u.proportion);else{var c=r.style.padding;r.style.padding="",s=Math.round(r.clientWidth),a=Math.round(r.clientHeight),r.style.padding=c}var d=Math.round((i-a)/2),f=Math.round((t-s)/2),p=t-(s+2*f),h=i-(a+2*d);r.style.padding=d+"px "+f+"px "+(d+h)+"px "+(f+p)+"px";var m=u.doc.getClassnameNumericSuffix(r,"dragitemhomes");Array.from(u.doc.topNode().querySelectorAll(".drag.group"+e+".dragitems"+m)).forEach(function(e){e.style.padding=d+"px "+f+"px "+(d+h)+"px "+(f+p)+"px"})},u=this;for(o=0;o<n.length;o++)a(o);this.doc.dropZoneGroup(e).forEach(function(e){e.style.width=t+2+"px ",e.style.height=i+2+"px "})}},e.prototype.updatePaddingSizesAll=function(){for(var e=1;e<=8;e++)this.updatePaddingSizeForGroup(e)},e}();t.d(n,"a",function(){return l});var l=function(e){function n(n,t,i){var o=e.call(this,n,"AddonQtypeDdImageOrTextComponent",t)||this;return o.loggerProvider=n,o.destroyed=!1,o.element=i.nativeElement,o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),n=e.querySelector(".ddarea");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!n||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=n.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.drops&&(this.drops=this.question.initObjects.drops),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.question.readOnly=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.drops=this.question.amdArgs[2])),this.question.loaded=!1},n.prototype.questionRendered=function(){this.destroyed||(this.questionInstance=new r(this.loggerProvider,this.domUtils,this.element,this.question,this.question.readOnly,this.drops))},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},n}(o.a)},function(e,n,t){"use strict";var i=t(0),o=(t(1),t(6),t(171)),r=(t(17),t(2),t(26),function(){function e(e,n){this.instance=e,this.domUtils=n,this.NS="http://www.w3.org/2000/svg"}return e.prototype.addShape=function(e,n){var t=document.createElementNS(this.NS,e.type);t.setAttribute("fill",e.color),t.setAttribute("fill-opacity","0.5"),t.setAttribute("stroke","black");for(var i in n)t.setAttribute(i,String(n[i]));return this.dropZone.appendChild(t),t},e.prototype.clear=function(){var e=this.instance.doc.bgImg(),n=this.domUtils.getElementXY(e,null,"ddarea"),t=this.instance.doc.topNode().querySelector("div.ddarea div.dropzones");t.style.left=n[0]+"px",t.style.top=n[1]+"px",t.style.width=e.width+"px",t.style.height=e.height+"px";var i=this.instance.doc.markerTexts();if(i.style.left=n[0]+"px",i.style.top=n[1]+"px",i.style.width=e.width+"px",i.style.height=e.height+"px",this.dropZone)for(;this.dropZone.firstChild;)this.dropZone.removeChild(this.dropZone.firstChild);else this.dropZone=document.createElementNS(this.NS,"svg"),t.appendChild(this.dropZone);this.dropZone.style.width=e.width+"px",this.dropZone.style.height=e.height+"px",this.instance.shapes=[]},e}()),l=function(){function e(e,n,t,i,o,l,s,a){this.domUtils=n,this.textUtils=t,this.container=i,this.question=o,this.readOnly=l,this.dropZones=s,this.imgSrc=a,this.COLOURS=["#FFFFFF","#B0C4DE","#DCDCDC","#D8BFD8","#87CEFA","#DAA520","#FFD700","#F0E68C"],this.afterImageLoadDone=!1,this.nextColourIndex=0,this.proportion=1,this.shapes=[],this.logger=e.getInstance("AddonQtypeDdMarkerQuestion"),this.graphics=new r(this,this.domUtils),this.initializer(o)}return e.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},e.prototype.cloneNewDragItem=function(e,n){e.querySelector("span.markertext").style.opacity="0.6";var t=e.cloneNode(!0);return t.classList.remove("draghome"),t.classList.add("dragitem"),t.classList.add("item"+n),e.parentElement.insertBefore(t,e.nextSibling),this.readOnly||this.draggable(t),t},e.prototype.convertToWindowXY=function(e){var n=this.doc.bgImg(),t=this.domUtils.getElementXY(n,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+t[0],Number(e[1])+t[1]]},e.prototype.coordsInImg=function(e){var n=this.doc.bgImg();return e[0]*this.proportion<=n.width&&e[1]*this.proportion<=n.height},e.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},e.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.docStructure=function(e){var n=this,t=this.container.querySelector(".addon-qtype-ddmarker-container"),i=t.querySelector("div.dragitems");return{topNode:function(){return t},bgImg:function(){return t.querySelector(".dropbackground")},dragItemsArea:function(){return i},dragItems:function(){return Array.from(i.querySelectorAll(".dragitem"))},dragItemsForChoice:function(e){return Array.from(i.querySelectorAll("span.dragitem.choice"+e))},dragItemForChoice:function(e,n){return i.querySelector("span.dragitem.choice"+e+".item"+n)},dragItemBeingDragged:function(e){return i.querySelector("span.dragitem.beingdragged.choice"+e)},dragItemHome:function(e){return i.querySelector("span.draghome.choice"+e)},dragItemHomes:function(){return Array.from(i.querySelectorAll("span.draghome"))},getClassnameNumericSuffix:function(e,t){if(e.classList&&e.classList.length)for(var i=new RegExp("^"+t+"([0-9])+$"),o=new RegExp("([0-9])+$"),r=0;r<e.classList.length;r++)if(i.test(e.classList[r])){var l=o.exec(e.classList[r]);return Number(l[0])}n.logger.warn('Prefix "'+t+'" not found in class names.')},inputsForChoices:function(){return Array.from(t.querySelectorAll("input.choices"))},inputForChoice:function(e){return t.querySelector("input.choice"+e)},markerTexts:function(){return t.querySelector("div.markertexts")}}},e.prototype.draggable=function(e){var n=this;e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=n.selected;if(i&&!e.classList.contains("unplaced")){var o=n.domUtils.getElementXY(e,null,"ddarea"),r=n.doc.bgImg(),l=n.domUtils.getElementXY(r,null,"ddarea");if(o[0]=o[0]-l[0]+t.offsetX,o[1]=o[1]-l[1]+t.offsetY,o[0]<=r.width&&o[1]<=r.height)return n.deselectDrags(),void n.dropDrag(i,o)}e.classList.contains("beingdragged")?n.deselectDrags():n.selectDrag(e)})},e.prototype.dragHomeXY=function(e){var n=this.doc.dragItemHome(e),t=this.domUtils.getElementXY(n,null,"ddarea");return[t[0],t[1]]},e.prototype.drawDropZone=function(e,n,t,i,o,r){var l,s=this,a=this.doc.markerTexts();if(l=a.querySelector(r?"span.markertext"+e+" a":"span.markertext"+e))""!==n?l.innerHTML=n:l.remove();else if(""!==n){var u="markertext markertext"+e,c=document.createElement("span");c.className=u,c.innerHTML=r?'<a href="#">'+n+"</a>":n,a.appendChild(c)}var d="drawShape"+this.textUtils.ucFirst(t);if(this[d]instanceof Function){var f=this[d](e,i,o);if(null!==f){var p=this.doc.topNode().querySelector("div.ddarea div.markertexts span.markertext"+e);if(null!==p){f[0]=(f[0]-p.offsetWidth/2)*this.proportion,f[1]=(f[1]-p.offsetHeight/2)*this.proportion,p.style.opacity="0.6",p.style.left=f[0]+"px",p.style.top=f[1]+"px";var h=p.querySelector("a");null!==h&&(h.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),s.shapes.forEach(function(e){e.css("fill-opacity",.5)}),s.shapes[e].css("fill-opacity",1),setTimeout(function(){s.shapes[e].css("fill-opacity",.5)},2e3)}),h.setAttribute("tabIndex","0"))}}}},e.prototype.drawShapeCircle=function(e,n,t){var i=n.match(/(\d+),(\d+);(\d+)/);if(i&&4===i.length){i.shift();var o=i.map(function(e){return Number(e)});if(this.coordsInImg([o[0]-o[2],o[1]-o[2]]))return this.shapes[e]=this.graphics.addShape({type:"circle",color:t},{cx:o[0]*this.proportion,cy:o[1]*this.proportion,r:o[2]*this.proportion}),[o[0],o[1]]}return null},e.prototype.drawShapeRectangle=function(e,n,t){var i=n.match(/(\d+),(\d+);(\d+),(\d+)/);if(i&&5===i.length){i.shift();var o=i.map(function(e){return Number(e)});if(this.coordsInImg([o[0]+o[2],o[1]+o[3]]))return this.shapes[e]=this.graphics.addShape({type:"rect",color:t},{x:o[0]*this.proportion,y:o[1]*this.proportion,width:o[2]*this.proportion,height:o[3]*this.proportion}),[o[0]+o[2]/2,o[1]+o[3]/2]}return null},e.prototype.drawShapePolygon=function(e,n,t){var i=n.split(";"),o=[],r=this.doc.bgImg(),l=[0,0],s=[r.width,r.height];for(var a in i){var u=i[a].match(/^(\d+),(\d+)$/),c=u&&u.map(function(e){return Number(e)});null!==c&&this.coordsInImg([c[1],c[2]])&&(c[1]*=this.proportion,c[2]*=this.proportion,s[0]=Math.min(c[1],s[0]),s[1]=Math.min(c[2],s[1]),l[0]=Math.max(c[1],l[0]),l[1]=Math.max(c[2],l[1]),o.push(c[1]+","+c[2]))}return o.length>2?(this.shapes[e]=this.graphics.addShape({type:"polygon",color:t},{points:o.join(" ")}),[(s[0]+l[0])/2,(s[1]+l[1])/2]):null},e.prototype.dropDrag=function(e,n){var t=this.getChoiceNoForNode(e);n&&(this.proportion<1&&(n[0]=Math.round(n[0]/this.proportion)),this.proportion<1&&(n[1]=Math.round(n[1]/this.proportion))),this.saveAllXYForChoice(t,e,n),this.redrawDragsAndDrops()},e.prototype.getCoords=function(e){var n=this.getChoiceNoForNode(e),t=e.getAttribute("value"),i=e.classList.contains("infinite"),o=this.getNoOfDragsForNode(e),r=null!==this.doc.dragItemBeingDragged(n),l=[];if(""!==t&&void 0!==t&&null!==t)for(var s=t.split(";"),a=0;a<s.length;a++){var u=s[a].split(",").map(function(e){return Number(e)});l[l.length]=this.convertToWindowXY(u)}return(i||l.length+(r?1:0)<o)&&(l[l.length]=this.dragHomeXY(n)),l},e.prototype.getChoiceNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"choice"))},e.prototype.getDragXY=function(e){var n=this.domUtils.getElementXY(e,null,"ddarea"),t=this.doc.bgImg(),i=this.domUtils.getElementXY(t,null,"ddarea");return n[0]-=i[0],n[1]-=i[1],this.proportion<1&&(n[0]=Math.round(n[0]/this.proportion)),this.proportion<1&&(n[1]=Math.round(n[1]/this.proportion)),n},e.prototype.getItemNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"item"))},e.prototype.getNextColour=function(){var e=this.COLOURS[this.nextColourIndex];return this.nextColourIndex++,this.nextColourIndex===this.COLOURS.length&&(this.nextColourIndex=0),e},e.prototype.getNoOfDragsForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"noofdrags"))},e.prototype.initializer=function(e){var n=this;this.doc=this.docStructure(e.slot),setTimeout(function(){n.pollForImageLoad()}),this.resizeFunction=this.redrawDragsAndDrops.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.makeImageDropable=function(){var e=this;if(!this.readOnly){this.doc.bgImg().addEventListener("click",function(n){var t=e.selected;if(!t)return!1;var i=[n.offsetX,n.offsetY];e.deselectDrags(),e.dropDrag(t,i),n.preventDefault(),n.stopPropagation()});this.doc.dragItemsArea().addEventListener("click",function(n){var t=e.selected;return!!t&&(t.classList.contains("unplaced")?(e.deselectDrags(),!1):(e.deselectDrags(),e.dropDrag(t,null),n.preventDefault(),void n.stopPropagation()))})}},e.prototype.pollForImageLoad=function(){var e=this;if(!this.afterImageLoadDone){var n=this.doc.bgImg();!n.src&&this.imgSrc&&(n.src=this.imgSrc);var t=function(){n.removeEventListener("load",t),e.makeImageDropable(),setTimeout(function(){e.redrawDragsAndDrops()}),e.afterImageLoadDone=!0,e.question.loaded=!0};n.addEventListener("load",t),setTimeout(function(){e.pollForImageLoad()},500)}},e.prototype.redrawDragsAndDrops=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.add("unneeded","unplaced")}),this.calculateImgProportion();for(var n=this.doc.inputsForChoices(),t=0;t<n.length;t++)for(var i=n[t],o=this.getChoiceNoForNode(i),r=this.getCoords(i),l=this.doc.dragItemHome(o),s=this.dragHomeXY(o),a=0;a<r.length;a++){var u=this.doc.dragItemForChoice(o,a);!u||u.classList.contains("beingdragged")?u=this.cloneNewDragItem(l,a):u.classList.remove("unneeded"),s[0]==r[a][0]&&s[1]==r[a][1]||u.classList.remove("unplaced"),u.style.left=r[a][0]+"px",u.style.top=r[a][1]+"px"}for(var c=0;c<e.length;c++){var d=e[c];d.classList.contains("unneeded")&&!d.classList.contains("beingdragged")&&d.remove()}if(this.dropZones&&0!==this.dropZones.length){this.graphics.clear(),this.restartColours();for(var f in this.dropZones){var p=this.getNextColour(),h=this.dropZones[f],m=Number(f);this.drawDropZone(m,h.markertext,h.shape,h.coords,p,!0)}}},e.prototype.resetDragXY=function(e){this.setFormValue(e,"")},e.prototype.restartColours=function(){this.nextColourIndex=0},e.prototype.saveAllXYForChoice=function(e,n,t){for(var i,o=[],r=this.doc.dragItemsForChoice(e),l=0;l<r.length;l++){var s=this.doc.dragItemForChoice(e,l);s&&(s.classList.remove("item"+l),i=this.getDragXY(s),s.classList.add("item"+o.length),o.push(i))}null!==t?(n.classList.remove("unplaced"),n.classList.add("item"+o.length),o.push(t)):n.classList.add("unplaced"),o.length>0?this.setFormValue(e,o.join(";")):this.resetDragXY(e)},e.prototype.setFormValue=function(e,n){this.doc.inputForChoice(e).setAttribute("value",n)},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged");var n=this.getItemNoForNode(e);null!==n&&e.classList.remove("item"+n)},e}();t.d(n,"a",function(){return s});var s=function(e){function n(n,t,i,o,r,l){var s=e.call(this,n,"AddonQtypeDdMarkerComponent",t)||this;return s.loggerProvider=n,s.sitesProvider=o,s.urlUtils=r,s.filepoolProvider=l,s.destroyed=!1,s.element=i.nativeElement,s}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),n=e.querySelector(".ddarea"),t=e.querySelector(".ddform");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!n||!t||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=n.outerHTML;var i=e.querySelector(".wrongparts");i&&(this.question.ddArea+=i.outerHTML),this.question.ddArea+=t.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.dropzones&&(this.dropZones=this.question.initObjects.dropzones),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.imgSrc=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.question.readOnly=this.question.amdArgs[2]),void 0!==this.question.amdArgs[3]&&(this.dropZones=this.question.amdArgs[3])),this.question.loaded=!1},n.prototype.questionRendered=function(){var e=this;if(!this.destroyed){var n=this.sitesProvider.getCurrentSite();(this.imgSrc&&n.canDownloadFiles()&&this.urlUtils.isPluginFileUrl(this.imgSrc)?this.filepoolProvider.getSrcByUrl(n.id,this.imgSrc,this.component,this.componentId,0,!0,!0):Promise.resolve(this.imgSrc)).then(function(n){e.domUtils.waitForImages(e.questionTextEl.nativeElement).then(function(){e.questionInstance=new l(e.loggerProvider,e.domUtils,e.textUtils,e.element,e.question,e.question.readOnly,e.dropZones,n)})})}},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},n}(o.a)},function(e,n,t){"use strict";var i=t(0),o=(t(1),t(6),t(171)),r=function(){function e(e,n,t,i,o,r,l){this.domUtils=n,this.container=t,this.question=i,this.readOnly=o,this.inputIds=r,this.textUtils=l,this.nextDragItemNo=1,this.logger=e.getInstance("AddonQtypeDdwtosQuestion"),this.initializer(i)}return e.prototype.cloneDragItem=function(e){var n=e.cloneNode(!0);n.classList.remove("draghome"),n.classList.add("drag"),n.classList.add("no"+this.nextDragItemNo),this.nextDragItemNo++,n.style.visibility="visible",n.style.position="absolute";this.container.querySelector(this.selectors.dragContainer()).appendChild(n),this.readOnly||this.makeDraggable(n)},e.prototype.cloneDragItems=function(){for(var e=Array.from(this.container.querySelectorAll(this.selectors.dragHomes())),n=0;n<e.length;n++)this.cloneDragItemsForOneChoice(e[n])},e.prototype.cloneDragItemsForOneChoice=function(e){if(e.classList.contains("infinite"))for(var n=this.getGroup(e),t=this.container.querySelectorAll(this.selectors.dropsInGroup(n)).length,i=0;i<t;i++)this.cloneDragItem(e);else this.cloneDragItem(e)},e.prototype.cssSelectors=function(e){var n=".addon-qtype-ddwtos-container",t={};return t.topNode=function(){return n},t.dragContainer=function(){return n+" div.drags"},t.drags=function(){return t.dragContainer()+" span.drag"},t.drag=function(e){return t.drags()+".no"+e},t.dragsInGroup=function(e){return t.drags()+".group"+e},t.unplacedDragsInGroup=function(e){return t.dragsInGroup(e)+".unplaced"},t.dragsForChoiceInGroup=function(e,n){return t.dragsInGroup(n)+".choice"+e},t.unplacedDragsForChoiceInGroup=function(e,n){return t.unplacedDragsInGroup(n)+".choice"+e},t.drops=function(){return n+" span.drop"},t.dropForPlace=function(e){return t.drops()+".place"+e},t.dropsInGroup=function(e){return t.drops()+".group"+e},t.dragHomes=function(){return n+" span.draghome"},t.dragHomesGroup=function(e){return n+" .draggrouphomes"+e+" span.draghome"},t.dragHome=function(e,t){return n+" .draggrouphomes"+e+" span.draghome.choice"+t},t.dropsGroup=function(e){return n+" span.drop.group"+e},t},e.prototype.deselectDrags=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.remove("selected")}),this.selected=null},e.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},e.prototype.getChoice=function(e){return this.getClassnameNumericSuffix(e,"choice")},e.prototype.getClassnameNumericSuffix=function(e,n){if(e.classList&&e.classList.length)for(var t=new RegExp("^"+n+"([0-9])+$"),i=new RegExp("([0-9])+$"),o=0;o<e.classList.length;o++)if(t.test(e.classList[o])){var r=i.exec(e.classList[o]);return Number(r[0])}this.logger.warn('Prefix "'+n+'" not found in class names.')},e.prototype.getGroup=function(e){return this.getClassnameNumericSuffix(e,"group")},e.prototype.getNo=function(e){return this.getClassnameNumericSuffix(e,"no")},e.prototype.getPlace=function(e){return this.getClassnameNumericSuffix(e,"place")},e.prototype.initializer=function(e){var n=this;this.selectors=this.cssSelectors(e.slot);var t=this.container.querySelector(this.selectors.topNode());t.classList.add(this.readOnly?"readonly":"notreadonly"),this.setPaddingSizesAll(),this.cloneDragItems(),this.initialPlaceOfDragItems(),this.makeDropZones(),setTimeout(function(){n.positionDragItems()}),this.resizeFunction=this.positionDragItems.bind(this),window.addEventListener("resize",this.resizeFunction)},e.prototype.initialPlaceOfDragItems=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.add("unplaced")}),this.placed={};for(var e in this.inputIds){var n=this.container.querySelector("input#"+this.inputIds[e]),t=Number(n.getAttribute("value"));if(0!==t){var i=this.container.querySelector(this.selectors.dropForPlace(parseInt(e,10)+1)),o=this.getGroup(i),r=this.container.querySelector(this.selectors.unplacedDragsForChoiceInGroup(t,o));this.placeDragInDrop(r,i),this.positionDragItem(r)}}},e.prototype.makeDraggable=function(e){var n=this;e.addEventListener("click",function(){e.classList.contains("selected")?n.deselectDrags():n.selectDrag(e)})},e.prototype.makeDropZone=function(e){var n=this;e.addEventListener("click",function(){var t=n.selected;if(!t)return!1;n.getGroup(t)===n.getGroup(e)&&(n.placeDragInDrop(t,e),n.deselectDrags(),n.positionDragItem(t))})},e.prototype.makeDropZones=function(){var e=this;if(!this.readOnly){Array.from(this.container.querySelectorAll(this.selectors.drops())).forEach(function(n){e.makeDropZone(n)});this.container.querySelector(this.selectors.topNode()+" .answercontainer").addEventListener("click",function(){var n=e.selected;n&&(n.classList.contains("unplaced")?e.deselectDrags():(e.removeDragFromDrop(n),e.deselectDrags(),e.positionDragItem(n)))})}},e.prototype.padToWidthHeight=function(e,n,t){e.style.width=n+"px",e.style.height=t+"px"},e.prototype.placeDragInDrop=function(e,n){var t=this.getPlace(n),i=this.container.querySelector("input#"+this.inputIds[t-1]);i.setAttribute("value",null!==e?String(this.getChoice(e)):"0");for(var o in this.placed)this.placed[o]===t&&delete this.placed[o];null!==e&&(this.placed[this.getNo(e)]=t)},e.prototype.positionDragItem=function(e){var n,t=this.placed[this.getNo(e)];if(t)n=this.domUtils.getElementXY(this.container,this.selectors.dropForPlace(t),"addon-qtype-ddwtos-container"),e.classList.remove("unplaced");else{var i=this.getGroup(e),o=this.getChoice(e);n=this.domUtils.getElementXY(this.container,this.selectors.dragHome(i,o),"answercontainer"),e.classList.add("unplaced")}n&&(e.style.left=n[0]+"px",e.style.top=n[1]+"px")},e.prototype.positionDragItems=function(){var e=this;Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(n){e.positionDragItem(n)})},e.prototype.removeDragFromDrop=function(e){var n=this.placed[this.getNo(e)],t=this.container.querySelector(this.selectors.dropForPlace(n));this.placeDragInDrop(null,t)},e.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("selected")},e.prototype.setPaddingSizesAll=function(){for(var e=1;e<=8;e++)this.setPaddingSizeForGroup(e)},e.prototype.setPaddingSizeForGroup=function(e){var n=this,t=Array.from(this.container.querySelectorAll(this.selectors.dragHomesGroup(e)));if(0!==t.length){var i=0,o=0;t.forEach(function(e){e.innerHTML=n.textUtils.decodeHTML(e.innerHTML),i=Math.max(i,Math.ceil(e.offsetWidth)),o=Math.max(o,Math.ceil(e.offsetHeight))}),i+=8,o+=2,t.forEach(function(e){n.padToWidthHeight(e,i,o)});Array.from(this.container.querySelectorAll(this.selectors.dropsGroup(e))).forEach(function(e){n.padToWidthHeight(e,i+2,o+2)})}},e}();t.d(n,"a",function(){return l});var l=function(e){function n(n,t,i){var o=e.call(this,n,"AddonQtypeDdwtosComponent",t)||this;return o.loggerProvider=n,o.inputIds=[],o.destroyed=!1,o.element=i.nativeElement,o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var e=this;if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var n=this.domUtils.convertToElement(this.question.html);this.questionHelper.replaceCorrectnessClasses(n),this.questionHelper.replaceFeedbackClasses(n),this.questionHelper.treatCorrectnessIcons(n);var t=n.querySelector(".answercontainer");if(!t)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);if(this.question.readOnly=t.classList.contains("readonly"),this.question.answers=t.outerHTML,this.question.text=this.domUtils.getContentsOfElement(n,".qtext"),void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);Array.from(n.querySelectorAll('input[type="hidden"]:not([name*=sequencecheck])')).forEach(function(n){e.question.text+=n.outerHTML,e.inputIds.push(n.getAttribute("id"))}),this.question.loaded=!1},n.prototype.questionRendered=function(){var e=this;this.destroyed||this.domUtils.waitForImages(this.questionTextEl.nativeElement).then(function(){e.questionInstance=new r(e.loggerProvider,e.domUtils,e.element,e.question,e.question.readOnly,e.inputIds,e.textUtils),e.questionHelper.treatCorrectnessIconsClicks(e.element,e.component,e.componentId),e.question.loaded=!0})},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t){return e.call(this,n,"AddonQtypeDescriptionComponent",t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var e=this.initComponent();if(e){var n=e.querySelector('input[type="hidden"][name*=seen]');n&&(this.question.seenInput={name:n.name,value:n.value})}},n}(t(171).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(171),r=function(e){function n(n,t,i){var o=e.call(this,n,"AddonQtypeEssayComponent",t)||this;return o.fb=i,o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initEssayComponent(),this.formControl=this.fb.control(this.question.textarea&&this.question.textarea.text)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t,i){var o=e.call(this,n,"AddonQtypeGapSelectComponent",t)||this;return o.element=i.nativeElement,o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initOriginalTextComponent(".qtext")},n.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId)},n}(t(171).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(433),o=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeMatch",this.type="qtype_match"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){for(var t in n){var i=n[t];if(!i||"0"===i)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){for(var t in n){var i=n[t];if(i&&"0"!==i)return 1}return 0},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t,i){var o=e.call(this,n,"AddonQtypeMultiAnswerComponent",t)||this;return o.element=i.nativeElement,o}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initOriginalTextComponent(".formulation")},n.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId)},n}(t(171).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(n,t){return e.call(this,n,"AddonQtypeShortAnswerComponent",t)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){this.initInputTextComponent()},n}(t(171).a)},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4),t(9);var i=t(13),o=function(){function e(e,n,t,i){this.host=e,this.platform=n,this.translate=t,this.eventsProvider=i}return e.prototype.ngOnInit=function(){var e=this;this.setTranslatedBackButtonText(),this.languageObserver=this.eventsProvider.on(i.a.LANGUAGE_CHANGED,function(){e.setTranslatedBackButtonText()})},e.prototype.ngOnDestroy=function(){this.languageObserver&&this.languageObserver.off()},e.prototype.setTranslatedBackButtonText=function(){this.host&&this.platform.is("ios")&&this.host.setBackButtonText(this.translate.instant("core.back"))},e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=(t(9),t(4),t(72)),l=(t(160),t(122),t(149),t(35),t(667),function(){function e(e,n,t,i,o,l,s,a,u,c,d,f,p,h,m,_,g,v,y,b){this.navCtrl=e,this.appProvider=n,this.domUtils=t,this.syncProvider=o,this.timeUtils=l,this.textUtils=s,this.translate=a,this.utils=u,this.eventsProvider=c,this.courseProvider=d,this.fileUploaderHelper=f,this.gradesHelper=p,this.userProvider=h,this.groupsProvider=m,this.langProvider=_,this.assignProvider=g,this.assignHelper=v,this.assignOfflineProvider=y,this.splitviewCtrl=b,this.submitModel={},this.statusNew=r.a.SUBMISSION_STATUS_NEW,this.statusReopened=r.a.SUBMISSION_STATUS_REOPENED,this.attemptReopenMethodNone=r.a.ATTEMPT_REOPEN_METHOD_NONE,this.unlimitedAttempts=r.a.UNLIMITED_ATTEMPTS,this.originalGrades={},this.siteId=i.getCurrentSiteId(),this.currentUserId=i.getCurrentSiteUserId()}return e.prototype.ngOnInit=function(){this.selectedTab=this.showGrade&&"false"!==this.showGrade?1:0,this.isSubmittedForGrading=!!this.submitId,this.loadData()},e.prototype.calculateTimeRemaining=function(e){if(this.assign.duedate>0){var n=this.timeUtils.timestamp(),t=e.lastattempt&&e.lastattempt.extensionduedate?e.lastattempt.extensionduedate:this.assign.duedate,i=t-n;if(i<=0)if(this.userSubmission&&this.userSubmission.status==r.a.SUBMISSION_STATUS_SUBMITTED){var o=this.userSubmission.timemodified-t;o>0?(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedlate",{$a:this.timeUtils.formatDuration(o,2)}),this.timeRemainingClass="latesubmission"):(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedearly",{$a:this.timeUtils.formatDuration(-o,2)}),this.timeRemainingClass="earlysubmission")}else e.lastattempt&&e.lastattempt.submissionsenabled||e.gradingsummary&&e.gradingsummary.submissionsenabled?(this.timeRemaining=this.translate.instant("addon.mod_assign.overdue",{$a:this.timeUtils.formatDuration(-i,3)}),this.timeRemainingClass="overdue"):(this.timeRemaining=this.translate.instant("addon.mod_assign.duedatereached"),this.timeRemainingClass="");else this.timeRemaining=this.timeUtils.formatDuration(i,3),this.timeRemainingClass=""}else this.timeRemaining="",this.timeRemainingClass=""},e.prototype.canLeave=function(){var e=this;return this.hasDataToSave().then(function(n){if(n)return e.domUtils.showConfirm(e.translate.instant("core.confirmcanceledit")).then(function(){return e.discardDrafts().catch(function(){})})})},e.prototype.copyPrevious=function(){var e=this;if(this.appProvider.isOnline()){if(!this.previousAttempt)return this.goToEdit();var n=this.assignProvider.getSubmissionObjectFromAttempt(this.assign,this.previousAttempt),t=this.domUtils.showModalLoading();this.assignHelper.getSubmissionSizeForCopy(this.assign,n).catch(function(){return-1}).then(function(n){return t.dismiss(),e.fileUploaderHelper.confirmUploadFile(n,!0)}).then(function(){t=e.domUtils.showModalLoading("core.sending",!0),e.assignHelper.copyPreviousAttempt(e.assign,n).then(function(){e.goToEdit(),e.assign.submissiondrafts?e.invalidateAndRefresh():e.eventsProvider.trigger(r.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:e.assign.id,submissionId:e.userSubmission.id,userId:e.currentUserId},e.siteId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.error",!0)}).finally(function(){t.dismiss()})}).catch(function(){})}else this.domUtils.showErrorModal("core.networkerrormsg",!0)},e.prototype.discardDrafts=function(){return this.feedback&&this.feedback.plugins?this.assignHelper.discardFeedbackPluginData(this.assign.id,this.submitId,this.feedback):Promise.resolve()},e.prototype.goToEdit=function(){this.navCtrl.push("AddonModAssignEditPage",{moduleId:this.moduleId,courseId:this.courseId,userId:this.submitId,blindId:this.blindId})},e.prototype.hasDataToSave=function(){if(!this.canSaveGrades||!this.loaded)return Promise.resolve(!1);if(this.originalGrades.grade!=this.grade.grade||this.originalGrades.addAttempt!=this.grade.addAttempt||this.originalGrades.applyToAll!=this.grade.applyToAll)return Promise.resolve(!0);if(this.gradeInfo&&this.gradeInfo.outcomes)for(var e in this.gradeInfo.outcomes){var n=this.gradeInfo.outcomes[e];if("undefined"==this.originalGrades.outcomes[n.id]||this.originalGrades.outcomes[n.id]!=n.selectedId)return Promise.resolve(!0)}return this.feedback&&this.feedback.plugins?this.assignHelper.hasFeedbackDataChanged(this.assign,this.submitId,this.feedback).catch(function(){return!1}):Promise.resolve(!1)},e.prototype.ionViewDidEnter=function(){this.tabs&&this.tabs.ionViewDidEnter()},e.prototype.ionViewDidLeave=function(){this.tabs&&this.tabs.ionViewDidLeave()},e.prototype.invalidateAndRefresh=function(){var e=this;this.loaded=!1;var n=[];return n.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(n.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id,this.submitId,!!this.blindId)),n.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),n.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),n.push(this.gradesHelper.invalidateGradeModuleItems(this.courseId,this.submitId)),n.push(this.courseProvider.invalidateModule(this.moduleId)),this.submissionComponents&&this.submissionComponents.length&&this.submissionComponents.forEach(function(e){n.push(e.invalidate())}),Promise.all(n).catch(function(){}).then(function(){return e.loadData()})},e.prototype.loadData=function(){var e=this,n=!!this.blindId;return this.previousAttempt=void 0,this.submitId||(this.submitId=this.currentUserId,n=!1),this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){var t=e.timeUtils.timestamp(),i=[];return e.assign=n,n.allowsubmissionsfromdate&&n.allowsubmissionsfromdate>=t&&(e.fromDate=e.timeUtils.userDate(1e3*n.allowsubmissionsfromdate)),e.currentAttempt=0,e.maxAttemptsText=e.translate.instant("addon.mod_assign.unlimitedattempts"),e.blindMarking=e.isSubmittedForGrading&&n.blindmarking&&!n.revealidentities,e.blindMarking||e.submitId==e.currentUserId||i.push(e.userProvider.getProfile(e.submitId,e.courseId).then(function(n){e.user=n})),i.push(e.assignOfflineProvider.getSubmission(n.id,e.submitId).then(function(n){e.hasOffline=n&&n.plugindata&&Object.keys(n.plugindata).length>0,e.submittedOffline=n&&n.submitted}).catch(function(){e.hasOffline=!1,e.submittedOffline=!1})),Promise.all(i)}).then(function(){return e.assignProvider.getSubmissionStatus(e.assign.id,e.submitId,n)}).then(function(n){var t=[];if(e.submissionStatusAvailable=!0,e.lastAttempt=n.lastattempt,e.membersToSubmit=[],n.previousattempts&&n.previousattempts.length>0){var i=n.previousattempts.sort(function(e,n){return e.attemptnumber-n.attemptnumber});e.previousAttempt=i[i.length-1]}return e.treatLastAttempt(n,t),e.calculateTimeRemaining(n),t.push(e.loadFeedback(n.feedback)),e.userSubmission&&e.userSubmission.plugins||(e.userSubmission={},e.userSubmission.plugins=e.assignHelper.getPluginsEnabled(e.assign,"assignsubmission")),t.push(e.assignProvider.getUnsupportedEditPlugins(e.userSubmission.plugins).then(function(n){e.unsupportedEditPlugins=n})),Promise.all(t)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting assigment data.")}).finally(function(){e.loaded=!0})},e.prototype.loadFeedback=function(e){var n=this;if(this.grade={method:!1,grade:!1,gradebookGrade:!1,modified:0,gradingStatus:!1,addAttempt:!1,applyToAll:!1,scale:!1,lang:!1,disabled:!1},this.originalGrades={grade:!1,addAttempt:!1,applyToAll:!1,outcomes:{}},e){if(this.feedback=e,e.grade&&e.grade.grader&&this.userProvider.getProfile(e.grade.grader,this.courseId).then(function(e){n.grader=e}).catch(function(){}),e.gradefordisplay){e.gradefordisplay.indexOf('class="advancedgrade"')>-1&&(this.feedback.advancedgrade=!0)}if(e.grade&&e.grade.grade&&!this.grade.grade){var t=parseFloat(e.grade.grade);this.grade.grade=t>=0?t:null,this.grade.gradebookGrade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade}}else this.selectedTab=0,this.tabs.selectTab(0);return this.grade.gradingStatus=this.lastAttempt&&this.lastAttempt.gradingstatus,this.courseProvider.getModuleBasicGradeInfo(this.moduleId).then(function(e){if(n.gradeInfo=e,e)return e.outcomes=e.outcomes||[],n.isDestroyed||n.syncProvider.blockOperation(r.a.COMPONENT,n.assign.id),n.treatGradeInfo()}).then(function(){if(n.isGrading){return n.allowAddAttempt=n.assign.attemptreopenmethod==r.a.ATTEMPT_REOPEN_METHOD_MANUAL&&(!n.userSubmission||n.assign.maxattempts==r.a.UNLIMITED_ATTEMPTS||n.userSubmission&&n.userSubmission.attemptnumber<n.assign.maxattempts-1),n.assign.teamsubmission&&(n.grade.applyToAll=!0,n.originalGrades.applyToAll=!0),n.assign.markingworkflow&&n.grade.gradingStatus&&(n.workflowStatusTranslationId=n.assignProvider.getSubmissionGradingStatusTranslationId(n.grade.gradingStatus)),n.isGrading&&"graded"==n.lastAttempt.gradingstatus&&!n.assign.markingworkflow&&n.feedback.gradeddate<n.lastAttempt.submission.timemodified&&(n.lastAttempt.gradingstatus=r.a.GRADED_FOLLOWUP_SUBMIT,n.gradingStatusTranslationId=n.assignProvider.getSubmissionGradingStatusTranslationId(n.lastAttempt.gradingstatus),n.gradingColor=n.assignProvider.getSubmissionGradingStatusColor(n.lastAttempt.gradingstatus)),n.feedback&&n.feedback.plugins||(n.feedback={},n.feedback.plugins=n.assignHelper.getPluginsEnabled(n.assign,"assignfeedback")),n.canSaveGrades?n.assignOfflineProvider.getSubmissionGrade(n.assign.id,n.submitId).catch(function(){}).then(function(t){t&&(!e||!e.gradeddate||e.gradeddate<t.timemodified)&&(n.grade.modified<t.timemodified&&(n.grade.grade=n.grade.scale?t.grade:n.utils.formatFloat(t.grade),n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor="",n.originalGrades.grade=n.grade.grade),n.grade.applyToAll=t.applytoall,n.grade.addAttempt=t.addattempt,n.originalGrades.applyToAll=n.grade.applyToAll,n.originalGrades.addAttempt=n.grade.addAttempt,t.outcomes&&Object.keys(t.outcomes).length&&n.gradeInfo.outcomes.forEach(function(e){void 0!==t.outcomes[e.itemNumber]&&e.modified<t.timemodified&&(e.selectedId=t.outcomes[e.itemNumber],n.originalGrades.outcomes[e.id]=e.selectedId)}))}):n.courseProvider.getModule(n.moduleId,n.courseId,void 0,!0).then(function(e){n.gradeUrl=e.url+"&action=grader&userid="+n.submitId})}})},e.prototype.openUserProfile=function(e){(this.splitviewCtrl?this.splitviewCtrl.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:e,courseId:this.courseId})},e.prototype.setStatusNameAndClass=function(e){this.hasOffline||this.submittedOffline?(this.statusTranslated=this.translate.instant("core.notsent"),this.statusColor="warning"):this.assign.teamsubmission?!e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.noattempt"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noattempt")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions"))},e.prototype.showAdvancedGrade=function(){this.feedback&&this.feedback.advancedgrade&&this.textUtils.expandText(this.translate.instant("core.grades.grade"),this.feedback.gradefordisplay,r.a.COMPONENT,this.moduleId)},e.prototype.submitForGrading=function(e){var n=this;!this.assign.requiresubmissionstatement||e?this.domUtils.showConfirm(this.translate.instant("addon.mod_assign.confirmsubmission")).then(function(){var t=n.domUtils.showModalLoading("core.sending",!0);n.assignProvider.submitForGrading(n.assign.id,n.courseId,e,n.userSubmission.timemodified,n.hasOffline).then(function(){n.eventsProvider.trigger(r.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:n.assign.id,submissionId:n.userSubmission.id,userId:n.currentUserId},n.siteId)}).finally(function(){t.dismiss()})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}):this.domUtils.showErrorModal("addon.mod_assign.acceptsubmissionstatement",!0)},e.prototype.submitGrade=function(){var e=this;return this.hasDataToSave().then(function(n){if(n){var t=e.userSubmission?e.userSubmission.attemptnumber:-1,i={},o=e.grade.scale&&0==e.grade.grade?-1:e.utils.unformatFloat(e.grade.grade,!0);if(!1===o)return Promise.reject(e.translate.instant("core.grades.badgrade"));var l=e.domUtils.showModalLoading("core.sending",!0);return e.gradeInfo.outcomes.forEach(function(e){e.itemNumber&&(i[e.itemNumber]=e.selectedId)}),(e.feedback&&e.feedback.plugins?e.assignHelper.prepareFeedbackPluginData(e.assign.id,e.submitId,e.feedback):Promise.resolve({})).then(function(n){return e.assignProvider.submitGradingForm(e.assign.id,e.submitId,e.courseId,o,t,e.grade.addAttempt,e.grade.gradingStatus,e.grade.applyToAll,i,n).then(function(){return e.discardDrafts()}).finally(function(){e.invalidateAndRefresh(),e.eventsProvider.trigger(r.a.GRADED_EVENT,{assignmentId:e.assign.id,submissionId:e.submitId,userId:e.currentUserId},e.siteId)})}).finally(function(){e.tabs.selectTab(0),l.dismiss()})}})},e.prototype.treatGradeInfo=function(){var e=this;return this.grade.method=this.gradeInfo.advancedgrading&&this.gradeInfo.advancedgrading[0]&&void 0!==this.gradeInfo.advancedgrading[0].method?this.gradeInfo.advancedgrading[0].method||"simple":"simple",this.isGrading=!0,this.canSaveGrades="simple"==this.grade.method,this.gradeInfo.scale?this.grade.scale=this.utils.makeMenuFromList(this.gradeInfo.scale,this.translate.instant("core.nograde")):(this.grade.grade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade,this.langProvider.getCurrentLanguage().then(function(n){e.grade.lang=n})),this.assignProvider.isOutcomesEditEnabled()&&this.gradeInfo.outcomes.forEach(function(n){n.scale&&(n.options=e.utils.makeMenuFromList(n.scale,e.translate.instant("core.grades.nooutcome"))),n.selectedId=0,e.originalGrades.outcomes[n.id]=n.selectedId}),this.gradesHelper.getGradeModuleItems(this.courseId,this.moduleId,this.submitId).then(function(n){var t=[];n.forEach(function(n){if(n.outcomeid||n.scaleid)n.outcomeid&&(e.gradeInfo.outcomes.forEach(function(i){i.id==n.outcomeid&&(i.selected=n.gradeformatted,i.modified=n.gradedategraded,i.options&&(i.selectedId=e.gradesHelper.getGradeValueFromLabel(i.options,i.selected),e.originalGrades.outcomes[i.id]=i.selectedId,i.itemNumber=n.itemnumber),t.push(i))}),e.gradeInfo.disabled=n.gradeislocked||n.gradeisoverridden);else{if(e.grade.scale)e.grade.gradebookGrade=e.utils.formatFloat(e.gradesHelper.getGradeValueFromLabel(e.grade.scale,n.gradeformatted));else{var i=parseFloat(n.gradeformatted);e.grade.gradebookGrade=i||0==i?e.utils.formatFloat(i):null}e.grade.disabled=n.gradeislocked||n.gradeisoverridden,e.grade.modified=n.gradedategraded}}),e.gradeInfo.outcomes=t})},e.prototype.treatLastAttempt=function(e,n){var t=this;if(e.lastattempt){var i=this.assign.requiresubmissionstatement&&void 0===this.assign.submissionstatement;this.canSubmit=!this.isSubmittedForGrading&&!this.submittedOffline&&(e.lastattempt.cansubmit||this.hasOffline&&this.assignProvider.canSubmitOffline(this.assign,e)),this.canEdit=!this.isSubmittedForGrading&&e.lastattempt.canedit&&(!this.submittedOffline||!this.assign.submissiondrafts),this.assign.requiresubmissionstatement&&this.assign.submissiondrafts&&this.submitId==this.currentUserId?(this.submissionStatement=this.assign.submissionstatement,this.submitModel.submissionStatement=!1):(this.submissionStatement=void 0,this.submitModel.submissionStatement=!0),this.showErrorStatementEdit=i&&!this.assign.submissiondrafts&&this.submitId==this.currentUserId,this.showErrorStatementSubmit=i&&this.assign.submissiondrafts,this.userSubmission=this.assignProvider.getSubmissionObjectFromAttempt(this.assign,e.lastattempt),this.assign.attemptreopenmethod!=this.attemptReopenMethodNone&&this.userSubmission&&(this.currentAttempt=this.userSubmission.attemptnumber+1),this.setStatusNameAndClass(e),this.assign.teamsubmission&&(e.lastattempt.submissiongroup&&n.push(this.groupsProvider.getActivityAllowedGroups(this.assign.cmid).then(function(n){n.forEach(function(n){n.id==e.lastattempt.submissiongroup&&(t.lastAttempt.submissiongroupname=n.name)})})),this.userSubmission&&this.userSubmission.status!=this.statusNew&&e.lastattempt.submissiongroupmemberswhoneedtosubmit.forEach(function(e){n.push(t.blindMarking?t.assignProvider.getAssignmentUserMappings(t.assign.id,e).then(function(e){t.membersToSubmit.push(e)}):t.userProvider.getProfile(e,t.courseId).then(function(e){t.membersToSubmit.push(e)}))})),this.gradingStatusTranslationId=this.assignProvider.getSubmissionGradingStatusTranslationId(e.lastattempt.gradingstatus),this.gradingColor=this.assignProvider.getSubmissionGradingStatusColor(e.lastattempt.gradingstatus),this.userSubmission&&(this.assign.teamsubmission&&e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup||(this.submissionPlugins=this.previousAttempt&&this.previousAttempt.submission.plugins&&this.userSubmission.status==this.statusReopened?this.previousAttempt.submission.plugins:this.userSubmission.plugins))}},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.assign&&this.isGrading&&this.syncProvider.unblockOperation(r.a.COMPONENT,this.assign.id)},e=Object(i.__decorate)([Object(i.__param)(19,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(462);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(72),o=(t(160),t(164),t(188),function(){function e(e,n,t,o){this.injector=e,this.submissionDelegate=n,this.assignProvider=t,this.assignHelper=o,this.component=i.a.COMPONENT,this.text="",this.files=[]}return e.prototype.ngOnInit=function(){var e=this;this.plugin&&(this.plugin.name=this.submissionDelegate.getPluginName(this.plugin),this.plugin.name&&(this.edit=this.edit&&"false"!==this.edit,this.allowOffline=this.allowOffline&&"false"!==this.allowOffline,this.submissionDelegate.getComponentForPlugin(this.injector,this.plugin,this.edit).then(function(n){e.pluginComponent=n,n?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,configs:e.assignHelper.getPluginConfig(e.assign,"assignsubmission",e.plugin.type),edit:e.edit,allowOffline:e.allowOffline}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.submissionDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})))},e.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(0),o=t(1),r=(t(9),t(139)),l=t(72),s=(t(160),t(122),t(339)),a=function(e){function n(n,t,i,o,r,a,u,c,d){var f=e.call(this,n,i)||this;return f.assignProvider=t,f.assignHelper=o,f.assignOffline=r,f.syncProvider=a,f.timeUtils=u,f.groupsProvider=c,f.navCtrl=d,f.component=l.a.COMPONENT,f.moduleName="assign",f.showNumbers=!0,f.submissionStatusSubmitted=l.a.SUBMISSION_STATUS_SUBMITTED,f.submissionStatusDraft=l.a.SUBMISSION_STATUS_DRAFT,f.needGrading=l.a.NEED_GRADING,f.syncEventName=s.a.AUTO_SYNCED,f}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.assignProvider.logView(n.assign.id).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){}),n.canViewAllSubmissions?n.assignProvider.logGradingView(n.assign.id).catch(function(){}):n.canViewOwnSubmission&&n.assignProvider.logSubmissionView(n.assign.id).catch(function(){})}),this.savedObserver=this.eventsProvider.on(l.a.SUBMISSION_SAVED_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&n.showLoadingAndRefresh(!0,!1)},this.siteId),this.submittedObserver=this.eventsProvider.on(l.a.SUBMITTED_FOR_GRADING_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&(n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata),n.showLoadingAndRefresh(!0,!1))},this.siteId),this.gradedObserver=this.eventsProvider.on(l.a.GRADED_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&n.showLoadingAndRefresh(!0,!1)},this.siteId)},n.prototype.expandDescription=function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.assign&&(this.description||this.assign.introattachments)&&this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,this.assign.introattachments)},n.prototype.fetchContent=function(e,n,t){var i=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.assignProvider.getAssignment(this.courseId,this.module.id).then(function(e){if(i.assign=e,i.dataRetrieved.emit(i.assign),i.description=i.assign.intro||i.description,n)return i.syncActivity(t).catch(function(){})}).then(function(){return i.assignOffline.hasAssignOfflineData(i.assign.id)}).then(function(e){return i.hasOffline=e,i.assignProvider.getSubmissions(i.assign.id).then(function(e){var n=i.timeUtils.timestamp();return i.canViewAllSubmissions=e.canviewsubmissions,e.canviewsubmissions?(i.assign.duedate>0?i.assign.duedate-n<=0?i.timeRemaining=i.translate.instant("addon.mod_assign.assignmentisdue"):(i.timeRemaining=i.timeUtils.formatDuration(i.assign.duedate-n,3),i.lateSubmissions=i.assign.cutoffdate?i.assign.cutoffdate>n?i.translate.instant("addon.mod_assign.latesubmissionsaccepted",{$a:i.timeUtils.userDate(1e3*i.assign.cutoffdate)}):i.translate.instant("addon.mod_assign.nomoresubmissionsaccepted"):""):(i.timeRemaining="",i.lateSubmissions=""),i.groupsProvider.activityHasGroups(i.assign.cmid).then(function(e){return i.showNumbers=!e,i.assignProvider.getSubmissionStatus(i.assign.id).then(function(e){i.summary=e.gradingsummary,i.needsGradingAvalaible=e.gradingsummary.submissionsneedgradingcount>0&&i.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2")})})):i.assignProvider.getSubmissionStatus(i.assign.id).then(function(){i.canViewOwnSubmission=!0}).catch(function(e){if(i.canViewOwnSubmission=!1,"nopermission"!==e.errorcode)return Promise.reject(e)})})}).then(function(){i.fillContextMenu(e)})},n.prototype.goToSubmissionList=function(e,n){void 0===e?this.navCtrl.push("AddonModAssignSubmissionListPage",{courseId:this.courseId,moduleId:this.module.id,moduleName:this.moduleName}):!n&&this.showNumbers||this.navCtrl.push("AddonModAssignSubmissionListPage",{status:e,courseId:this.courseId,moduleId:this.module.id,moduleName:this.moduleName})},n.prototype.hasSyncSucceed=function(e){return e.updated&&this.submissionComponent&&this.submissionComponent.invalidateAndRefresh(),e.updated},n.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(n.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),this.canViewAllSubmissions&&n.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id))),Promise.all(n).finally(function(){e.submissionComponent&&e.submissionComponent.invalidateAndRefresh()})},n.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidEnter()},n.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidLeave()},n.prototype.isRefreshSyncNeeded=function(e){return!(!this.assign||e.assignId!=this.assign.id)&&(e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),!0)},n.prototype.sync=function(){return this.syncProvider.syncAssign(this.assign.id)},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.savedObserver&&this.savedObserver.off(),this.submittedObserver&&this.submittedObserver.off(),this.gradedObserver&&this.gradedObserver.off()},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)())],n)}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(165),t(188);var i=function(){function e(e,n){this.injector=e,this.blockDelegate=n,this.data={},this.loaded=!1}return e.prototype.ngOnInit=function(){var e=this;this.block?this.blockDelegate.getBlockDisplayData(this.injector,this.block,this.contextLevel,this.instanceId).then(function(n){n&&(e.title=n.title,e.class=n.class,e.componentClass=n.component,e.data=Object.assign({block:e.block,contextLevel:e.contextLevel,instanceId:e.instanceId},e.extraData||{},n.componentData||{}))}).catch(function(){}).finally(function(){e.loaded=!0}):this.loaded=!0},e.prototype.doRefresh=function(e,n,t){return void 0===t&&(t=!1),this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,n,t])):Promise.resolve()},e.prototype.invalidate=function(){return this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("invalidateContent")):Promise.resolve()},e}()},function(e,n,t){"use strict";function i(e){return l._42(0,[(e()(),l._16(0,0,null,null,3,"div",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openComments()&&i}return i},null,null)),(e()(),l._40(1,null,["\n        ","\n    "])),l._33(2,{$a:0}),l._32(131072,s.a,[a.a,l.i])],null,function(e,n){var t=n.component;e(n,1,0,l._41(n,1,0,l._29(n,3).transform("core.commentscount",e(n,2,0,t.commentsCount))))})}function o(e){return l._42(0,[(e()(),l._16(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l._40(1,null,["\n        ","\n    "])),l._32(131072,s.a,[a.a,l.i])],null,function(e,n){e(n,1,0,l._41(n,1,0,l._29(n,2).transform("core.commentsnotworking")))})}function r(e){return l._42(0,[(e()(),l._16(0,0,null,null,8,"core-loading",[],null,null,null,u.b,u.a)),l._15(1,638976,null,0,c.a,[a.a,l.p,d.a,f.a],{hideUntil:[0,"hideUntil"]},null),(e()(),l._40(-1,0,["\n    "])),(e()(),l._11(16777216,null,0,1,null,i)),l._15(4,16384,null,0,p.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(e()(),l._40(-1,0,["\n    "])),(e()(),l._11(16777216,null,0,1,null,o)),l._15(7,16384,null,0,p.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(e()(),l._40(-1,0,["\n"])),(e()(),l._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.commentsLoaded);e(n,4,0,t.commentsCount>=0);e(n,7,0,t.commentsCount<0)},null)}t.d(n,"b",function(){return v}),n.c=r,t.d(n,"a",function(){return y});var l=t(1),s=t(27),a=t(19),u=t(49),c=t(48),d=t(13),f=t(3),p=t(8),h=t(363),m=t(61),_=t(22),g=t(168),v=l._14({encapsulation:2,styles:[],data:{}}),y=l._12("core-comments",h.a,function(e){return l._42(0,[(e()(),l._16(0,0,null,null,1,"core-comments",[],null,null,null,r,v)),l._15(1,638976,null,0,h.a,[m.a,_.a,g.a],null,null)],function(e,n){e(n,1,0)},null)},{contextLevel:"contextLevel",instanceId:"instanceId",component:"component",itemId:"itemId",area:"area",page:"page",title:"title"},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[o._28(null,0),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(2,0,null,null,7,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,n,t){var i=!0;if("onClick"===n){i=!1!==e.component.toggle(t)&&i}return i},r.b,r.a)),o._15(3,1097728,null,0,l.a,[[8,""],s.a,o.p,o.K],{clear:[0,"clear"]},null),o._15(4,81920,null,0,a.a,[o.p],null,{onClick:"onClick"}),o._32(131072,u.a,[c.a,o.i]),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[],null,null,null,d.b,d.a)),o._15(8,245760,null,0,f.a,[o.p],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,""),e(n,4,0);e(n,8,0,t.iconName)},function(e,n){var t=n.component;e(n,2,0,o._41(n,2,0,o._29(n,5).transform(t.label)))})}t.d(n,"a",function(){return p}),n.b=i;var o=t(1),r=t(46),l=t(43),s=t(7),a=t(352),u=t(27),c=t(19),d=t(131),f=t(121),p=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),function(){function e(e,n){this.navCtrl=n,this.element=e.nativeElement||e}return e.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(n){n.defaultPrevented||(n.preventDefault(),n.stopPropagation(),e.navCtrl.push("CoreUserProfilePage",{userId:e.userId,courseId:e.courseId}))})},e=Object(i.__decorate)([Object(i.__param)(1,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=t(9),l=function(e){function n(n,t,i,o,r,l,s,a,u,c,d){var f=e.call(this,i,o,r,l,s,a,u,c,d)||this;return f.utils=n,f.appProvider=t,f.tabsNotInit=[],f.tabsIds=[],f.tabsNotInitIds=[],f.viewInit=!1,f.initialized=!1,f}return Object(i.__extends)(n,e),n,Object.defineProperty(n.prototype,"loaded",{set:function(e){var n=this;this._loaded=this.utils.isTrueOrOne(e),this.viewInit&&!this.initialized&&setTimeout(function(){n.initTabs()})},enumerable:!0,configurable:!0}),n.prototype.ngAfterViewInit=function(){this.viewInit=!0,e.prototype.ngAfterViewInit.call(this),this.registerBackButtonAction()},n.prototype.add=function(e,n){var t=this._tabs.indexOf(e);if(-1!=t)return this.tabsIds[t];if(-1!=(t=this.tabsNotInit.indexOf(e))){if(!n)return this.tabsNotInitIds[t];var i=this.tabsNotInitIds[t];return this.tabsNotInit.splice(t,1),this.tabsNotInitIds.splice(t,1),this._tabs.push(e),this.tabsIds.push(i),this.sortTabs(),i}var o=this.id+"-"+ ++this._ids;return n?(this._tabs.push(e),this.tabsIds.push(o),this.sortTabs()):(this.tabsNotInit.push(e),this.tabsNotInitIds.push(o)),o},n.prototype.initTabs=function(){var n=this;return this.initialized||!this._loaded&&void 0!==this._loaded?(this.setTabbarPosition(-1,0),Promise.resolve()):(this.initialized=!0,e.prototype.initTabs.call(this).then(function(){if(n.selectedDisabled&&void 0!==n.selectedIndex){var e=n.getByIndex(n.selectedIndex);e&&!e.enabled&&n.select(e)}n.firstSelectedTab=n._selectHistory[0]||null}).finally(function(){n.selectTabPromiseDefer&&(n.selectTabPromiseDefer.resolve(),delete n.selectTabPromiseDefer)}))},n.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){var n=e.previousTab(!0);if(n){var t=e.getSelected();if(n.id==t.id&&(n=e.previousTab(!0)),n)return e._selectHistory=e._selectHistory.filter(function(e){return t.id!=e&&n.id!=e}),e.select(n),!0}else{var i=e.getSelected();if(i&&e.firstSelectedTab&&i.id!=e.firstSelectedTab&&(e._selectHistory=[],(n=e._tabs.find(function(n){return n.id===e.firstSelectedTab}))&&n.enabled))return e.select(n),!0}return!1},250)},n.prototype.remove=function(e){var n=this._tabs.indexOf(e);-1!=n?(this._tabs.splice(n,1),this.tabsIds.splice(n,1)):-1!=(n=this.tabsNotInit.indexOf(e))&&(this.tabsNotInit.splice(n,1),this.tabsNotInitIds.splice(n,1))},n.prototype.sortTabs=function(){var e=this;if(this.originalTabsRef){var n=[],t=[],i=this.originalTabsRef.nativeElement;this._tabs.forEach(function(o,r){var l=Array.prototype.indexOf.call(i.children,o.getNativeElement());-1!=l&&(n[l]=o,t[l]=e.tabsIds[r])}),this._tabs=n.filter(function(e){return void 0!==e}),this.tabsIds=t.filter(function(e){return void 0!==e})}},n.prototype.select=function(n,t,i){return void 0===t&&(t={}),void 0===i&&(i=!1),this.initialized?e.prototype.select.call(this,n,t,i):(this.selectedIndex="number"==typeof n?n:this.getIndex(n),this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise)},n.prototype.selectTabRootByIndex=function(e){var n=this;if(this.initialized){var t=this.getByIndex(e);return t?t.goToRoot({animate:!1,updateUrl:!0,isNavRoot:!0}).then(function(){if(!t.isSelected)return n.select(t,{animate:!1,updateUrl:!0,isNavRoot:!0})}):Promise.reject(null)}return this.selectedIndex=e,this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise},n.prototype.ngOnDestroy=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction()},n=Object(i.__decorate)([Object(i.__param)(2,Object(o.E)()),Object(i.__param)(3,Object(o.E)())],n)}(r.j)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.courseProvider=n,this.EVENTICONS={course:"fa-university",group:"people",site:"globe",user:"person",category:"fa-cubes"},this.logger=e.getInstance("AddonCalendarHelperProvider")}return e.prototype.formatEventData=function(e){e.icon=this.EVENTICONS[e.eventtype]||!1,e.icon||(e.icon=this.courseProvider.getModuleIconSrc(e.modulename),e.moduleIcon=e.icon)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(459);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var i=function(){function e(e,n){this.translate=n,this.logger=e.getInstance("CoreUserHelperProvider")}return e.prototype.formatAddress=function(e,n,t){var i=this.translate.instant("core.listsep"),o=[e,n,t];return(o=o.filter(function(e){return e&&e.length>0})).join(i+" ")},e.prototype.formatRoleList=function(e){var n=this;if(!e||e.length<=0)return"";var t=this.translate.instant("core.listsep");return e.map(function(e){var t=n.translate.instant("core.user."+e.shortname);return t.indexOf("core.user.")<0?t:e.shortname}).join(t+" ")},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(464),t(1399);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(143),o=function(){function e(e,n,t,i,o){this.domUtils=e,this.fb=n,this.translate=t,this.textUtils=i,this.timeUtils=o}return e.prototype.formatActivityLink=function(e){var n=this.domUtils.convertToElement(e).querySelector("a");return n?{formatted:!0,label:n.innerHTML,href:n.href}:{formatted:!1,label:e,href:""}},e.prototype.getContentPageAnswerDataFromHtml=function(e){var n={buttonText:"",content:""},t=this.domUtils.convertToElement(e),i=t.querySelector('input[type="button"]');return i&&(n.buttonText=i.value,i.remove()),n.content=t.innerHTML.trim(),n},e.prototype.getPageButtonsFromHtml=function(e){var n=[],t=this.domUtils.convertToElement(e),i=t.querySelector(".branchbuttoncontainer");if(!i){if(!t.querySelector('form input[type="submit"]'))return n;i=t}return Array.from(i.querySelectorAll("form")).forEach(function(e){var t=e.querySelector('input[type="submit"], button[type="submit"]'),i=Array.from(e.querySelectorAll("input"));if(t&&i&&i.length){var o={id:t.id,title:t.title||t.value,content:"INPUT"==t.tagName?t.value:t.innerHTML.trim(),data:{}};i.forEach(function(e){"submit"!=e.type&&(o.data[e.name]=e.value)}),n.push(o)}}),n},e.prototype.getPageContentsFromPageData=function(e){var n=this.domUtils.convertToElement(e.pagecontent).querySelector(".contents");return n?n.innerHTML.trim():e.page.contents},e.prototype.getQuestionFromPageData=function(e,n){var t=this,o={},r=this.domUtils.convertToElement(n.pagecontent),l=r.querySelector(".fcontainer");Array.from(r.querySelectorAll('input[type="hidden"]')).forEach(function(n){e.addControl(n.name,t.fb.control(n.value))});var s=r.querySelector('input[type="submit"]');if(o.submitLabel=s?s.value:this.translate.instant("addon.mod_lesson.submit"),!l)return o;var a;switch(n.page.qtype){case i.a.LESSON_PAGE_TRUEFALSE:case i.a.LESSON_PAGE_MULTICHOICE:o.template="multichoice",o.options=[];var u=Array.from(l.querySelectorAll('input[type="radio"]'));if(!(u&&u.length||(o.multi=!0,(u=Array.from(l.querySelectorAll('input[type="checkbox"]')))&&u.length)))return o;var c=!1;u.forEach(function(n){var i={id:n.id,name:n.name,value:n.value,checked:!!n.checked,disabled:!!n.disabled},r=n.parentElement;if(i.checked||o.multi){e.addControl(i.name,t.fb.control(o.multi?{value:i.checked,disabled:i.disabled}:i.value)),c=!0}n.remove(),i.text=r.innerHTML.trim(),o.options.push(i)}),o.multi||(o.controlName=u[0].name,c||e.addControl(o.controlName,this.fb.control("")));break;case i.a.LESSON_PAGE_NUMERICAL:a="number";case i.a.LESSON_PAGE_SHORTANSWER:o.template="shortanswer";var d=l.querySelector('input[type="text"], input[type="number"]');if(!d)return o;o.input={id:d.id,name:d.name,maxlength:d.maxLength,type:a||"text"},e.addControl(d.name,this.fb.control({value:d.value,disabled:d.readOnly}));break;case i.a.LESSON_PAGE_ESSAY:o.template="essay";var f=l.querySelector("textarea");if(f)o.textarea={id:f.id,name:f.name||"answer[text]"},o.control=this.fb.control(""),e.addControl(o.textarea.name,o.control);else{var p=l.querySelector(".reviewessay");if(!p)return o;o.useranswer=p.innerHTML}break;case i.a.LESSON_PAGE_MATCHING:o.template="matching";var h=Array.from(l.querySelectorAll(".answeroption"));o.rows=[],h.forEach(function(n){var i=n.querySelector("label"),r=n.querySelector("select"),l=Array.from(n.querySelectorAll("option")),s={};if(i&&r&&l&&l.length){s.text=i.innerHTML.trim(),s.id=r.id,s.name=r.name,s.options=[];var a=!1;l.forEach(function(n){if(void 0!==n.value){var i={value:n.value,label:n.innerHTML.trim(),selected:n.selected};i.selected&&(a=!0,e.addControl(s.name,t.fb.control({value:i.value,disabled:!!r.disabled}))),s.options.push(i)}}),a||e.addControl(s.name,t.fb.control({value:"",disabled:!!r.disabled})),o.rows.push(s)}})}return o},e.prototype.getQuestionPageAnswerDataFromHtml=function(e){var n={},t=this.domUtils.convertToElement(e),i=t.querySelector('input[type="checkbox"][name*="answer"]');if(i)return n.isCheckbox=!0,n.checked=!!i.checked,n.name=i.name,n.highlight=!!t.querySelector(".highlight"),i.remove(),n.content=t.innerHTML.trim(),n;if(i=t.querySelector('input[type="number"],input[type="text"]'))return n.isText=!0,n.value=i.value,n;var o=t.querySelector("select");if(o&&o.options){var r=o.options[o.selectedIndex];return n.isSelect=!0,n.id=o.id,n.value=r?r.value:"",o.remove(),n.content=t.innerHTML.trim(),n}return e},e.prototype.getRetakeLabel=function(e,n){var t={retake:e.try+1,grade:"",timestart:"",duration:""},i=null!=e.grade;return i||e.end?(i&&(t.grade=this.translate.instant("core.percentagenumber",{$a:e.grade})),t.timestart=this.timeUtils.userDate(1e3*e.timestart),n&&(t.duration=this.timeUtils.formatTime(e.timeend-e.timestart))):(t.grade=this.translate.instant("addon.mod_lesson.notcompleted"),e.timestart&&(t.timestart=this.timeUtils.userDate(1e3*e.timestart))),this.translate.instant("addon.mod_lesson.retakelabel"+(n?"full":"short"),t)},e.prototype.prepareQuestionData=function(e,n){if("essay"==e.template&&e.textarea)n[e.textarea.name]=this.textUtils.formatHtmlLines(n[e.textarea.name]);else if("multichoice"==e.template&&e.multi)for(var t in n)t.match(/answer\[\d+\]/)&&0==n[t]&&delete n[t];return n},e.prototype.removeQuestionFromFeedback=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.removeElement(n,".generalbox:not(.feedback):not(.correctanswer)"),n.innerHTML.trim()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(13),o=(t(4),function(){function e(e,n,t,i,o,r,l,s){this.appProvider=n,this.cronDelegate=t,this.eventsProvider=i,this.filePoolProvider=o,this.sitesProvider=r,this.utils=l,this.translate=s,this.syncPromises={},this.logger=e.getInstance("CoreSettingsHelper")}return e.prototype.getProcessor=function(e,n,t){if(void 0===t&&(t=!0),e&&e.length){for(var i=0;i<e.length;i++)if(e[i].name==n)return e[i];return t?e[0]:void 0}},e.prototype.getProcessorComponents=function(e,n){var t=this,i=[];return n.forEach(function(n){var o=t.utils.clone(n);o.notifications=[],n.notifications.forEach(function(n){for(var t=!1,i=0;i<n.processors.length;i++){var r=n.processors[i];if(r.name==e){t=!0,n.currentProcessor=r;break}}t&&o.notifications.push(n)}),o.notifications.length&&i.push(o)}),i},e.prototype.getSiteSyncPromise=function(e){return this.syncPromises[e]?this.syncPromises[e]:null},e.prototype.synchronizeSite=function(e,n){var t=this;if(this.syncPromises[n])return this.syncPromises[n];var o=[],r=this.cronDelegate.hasManualSyncHandlers();if(r&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.settings.cannotsyncoffline"));if(r&&e&&this.appProvider.isNetworkAccessLimited())return Promise.reject(this.translate.instant("core.settings.cannotsyncwithoutwifi"));o.push(this.filePoolProvider.invalidateAllFiles(n).catch(function(){})),o.push(this.sitesProvider.getSite(n).then(function(e){return e.invalidateWsCache().then(function(){var o=[];return o.push(e.checkIfLocalMobileInstalledAndNotUsed().then(function(){return t.eventsProvider.trigger(i.a.SESSION_EXPIRED,{},n),Promise.reject(t.translate.instant("core.lostconnection"))},function(){return t.sitesProvider.updateSiteInfo(n)})),o.push(t.cronDelegate.forceSyncExecution(n)),Promise.all(o)})}));var l=Promise.all(o);return this.syncPromises[n]=l,l.finally(function(){delete t.syncPromises[n]}),l},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(357),t(418),t(419),t(422),t(420),t(421),t(423),t(424),t(425),t(620);var i=function(){return function(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(137),o=function(){function e(e,n){this.langProvider=e,this.sitesProvider=n}return e.prototype.getCustomMenuItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=e.getStoredConfig("tool_mobile_custommenuitems"),o={},r=[],l=0;return t&&"string"==typeof t?(t.split(/(?:\r\n|\r|\n)/).forEach(function(e){var n,t=e.split("|"),i=t[0]?t[0].trim():t[0],r=t[1]?t[1].trim():t[1],s=t[2]?t[2].trim():t[2],a=(t[3]?t[3].trim():t[3])||"none",u=t[4]?t[4].trim():t[4];i&&r&&s&&(n=r+"#"+s,u||(u="embedded"==s?"qr-scanner":"link"),o[n]||(o[n]={url:r,type:s,position:l,labels:{}},l++),o[n].labels[a.toLowerCase()]={label:i,icon:u})}),l?n.langProvider.getCurrentLanguage().then(function(e){var n=i.a.default_lang||"en";for(var t in o){var l=o[t],s=l.labels[e]||l.labels[e+"_only"]||l.labels.none||l.labels[n];if(!s){for(var a in l.labels)if(-1==a.indexOf("_only")){s=l.labels[a];break}if(!s)continue}r[l.position]={url:l.url,type:l.type,label:s.label,icon:s.icon}}return r.filter(function(e){return void 0!==e})}):r):r})},e.NUM_MAIN_HANDLERS=4,e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(669);var i=function(){return function(){}}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(480);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(481);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(354);var i=function(){function e(e,n,t,i){this.sitesProvider=e,this.fileUploaderHelper=n,this.filesProvider=t,this.domUtils=i}return e.prototype.uploadPrivateFile=function(e){var n=this,t=this.sitesProvider.getCurrentSite(),i=t.getInfo().usermaxuploadfilesize,o=t.getInfo().userquota;return 0===o?o=-1:o>0&&void 0!==e&&(o-=e.filesizewithoutreferences),void 0!==o&&(i=Math.min(i,o)),this.fileUploaderHelper.selectAndUploadFile(i).then(function(e){if(!e)return Promise.reject(null);var t=n.domUtils.showModalLoading("core.fileuploader.uploading",!0);return n.filesProvider.moveFromDraftToPrivate(e.itemid).catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.fileuploader.errorwhileuploading",!0),Promise.reject(null)}).finally(function(){t.dismiss()})}).then(function(){n.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(455),t(542);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(456);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(457);var i=function(){return function(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(463);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(466),t(593);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(467),t(595);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(468);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(469);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(470);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(471),t(709);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(472);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(473),t(710);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(474);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(475);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(476),t(608);var i=function(){return function(){}}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9);var i=function(){function e(e,n){this.viewCtrl=n,this.courseId=-1,this.courses=e.get("courses")||[],this.courseId=e.get("courseId")||-1}return e.prototype.coursePicked=function(e,n){return this.viewCtrl.dismiss(n),!0},e}()},function(e,n,t){"use strict";function i(e){return a._42(0,[(e()(),a._16(0,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.action.emit(o.previous)&&i}return i},u.b,u.a)),a._15(1,1097728,null,0,c.a,[[8,""],d.a,a.p,a.K],{clear:[0,"clear"]},null),a._32(131072,f.a,[p.a,a.i]),(e()(),a._40(-1,0,["\n                "])),(e()(),a._16(4,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(5,147456,null,0,h.a,[d.a,a.p,a.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),a._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,0,0,a._41(n,0,0,a._29(n,2).transform("core.previous")));e(n,4,0,a._29(n,5)._hidden)})}function o(e){return a._42(0,[(e()(),a._16(0,0,null,null,5,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showInfo()&&i}return i},u.b,u.a)),a._15(1,1097728,null,0,c.a,[[8,""],d.a,a.p,a.K],{clear:[0,"clear"]},null),(e()(),a._40(-1,0,["\n                "])),(e()(),a._16(3,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(4,147456,null,0,h.a,[d.a,a.p,a.K],{name:[0,"name"]},null),(e()(),a._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,"information-circle")},function(e,n){e(n,0,0,n.component.title);e(n,3,0,a._29(n,4)._hidden)})}function r(e){return a._42(0,[(e()(),a._16(0,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.action.emit(o.next)&&i}return i},u.b,u.a)),a._15(1,1097728,null,0,c.a,[[8,""],d.a,a.p,a.K],{clear:[0,"clear"]},null),a._32(131072,f.a,[p.a,a.i]),(e()(),a._40(-1,0,["\n                "])),(e()(),a._16(4,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(5,147456,null,0,h.a,[d.a,a.p,a.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),a._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,0,0,a._41(n,0,0,a._29(n,2).transform("core.next")));e(n,4,0,a._29(n,5)._hidden)})}function l(e){return a._42(0,[(e()(),a._16(0,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),a._15(1,16384,null,0,m.a,[],null,null),(e()(),a._40(-1,null,["\n    "])),(e()(),a._16(3,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),a._15(4,16384,null,0,_.a,[],null,null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(6,0,null,null,5,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),a._15(7,16384,null,0,g.a,[],null,null),(e()(),a._40(-1,null,["\n            "])),(e()(),a._11(16777216,null,null,1,null,i)),a._15(10,16384,null,0,v.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(13,0,null,null,5,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),a._15(14,16384,null,0,g.a,[],null,null),(e()(),a._40(-1,null,["\n            "])),(e()(),a._11(16777216,null,null,1,null,o)),a._15(17,16384,null,0,v.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(20,0,null,null,5,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),a._15(21,16384,null,0,g.a,[],null,null),(e()(),a._40(-1,null,["\n            "])),(e()(),a._11(16777216,null,null,1,null,r)),a._15(24,16384,null,0,v.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._40(-1,null,["\n    "])),(e()(),a._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.previous);e(n,17,0,t.info);e(n,24,0,t.next)},null)}function s(e){return a._42(0,[(e()(),a._11(16777216,null,null,1,null,l)),a._15(1,16384,null,0,v.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.previous||t.info||t.next)},null)}t.d(n,"a",function(){return y}),n.b=s;var a=t(1),u=t(46),c=t(43),d=t(7),f=t(27),p=t(19),h=t(47),m=t(142),_=t(114),g=t(113),v=t(8),y=a._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9);var i=t(193),o=function(){function e(e,n){this.viewCtrl=n,this.toc=e.get("toc")||[],this.attemptToContinue=e.get("attemptToContinue");var t=e.get("mode");this.isBrowse=t===i.a.MODEBROWSE,this.isReview=t===i.a.MODEREVIEW}return e.prototype.loadSco=function(e){e.prereq&&e.isvisible&&e.launch&&this.viewCtrl.dismiss(e)},e}()},,,,,,,,,,,function(e,n){function t(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=721},function(e,n,t){"use strict";t(0),t(75),t(723),t(1);var i=t(9),o=t(36),r=(t(217),t(242),t(543),t(8),t(1204),t(4),t(1811)),l=(t(428),t(621),t(402),t(130)),s=t(239),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),u="translateX",c="show-back-button",d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a(n,e),n.prototype.init=function(){e.prototype.init.call(this);var n=this.plt,t=n.isRTL?"-99.5%":"99.5%",i=n.isRTL?"33%":"-33%",r=this.enteringView,s=this.leavingView,a=this.opts;this.duration(Object(o.m)(a.duration)?a.duration:500),this.easing(Object(o.m)(a.easing)?a.easing:"cubic-bezier(0.36,0.66,0.04,1)");var d="back"===a.direction,f=r&&r.hasNavbar(),p=s&&s.hasNavbar();if(r){var h=r.pageRef().nativeElement,m=new l.a(n,h);if(this.add(m),d?m.fromTo(u,i,"0%",!0).fromTo("opacity",.8,1,!0):m.beforeClearStyles(["opacity"]).fromTo(u,t,"0%",!0),f){var _=h.querySelector("ion-navbar"),g=new l.a(n,_);this.add(g);var v=new l.a(n,_.querySelector(".back-button"));if(g.add(v),d)r.enableBack()&&v.beforeAddClass(c).fromTo("opacity",.01,1,!0);else if(r.enableBack()){v.beforeAddClass(c).fromTo("opacity",.01,1,!0);var y=new l.a(n,_.querySelector(".back-button-text"));y.fromTo(u,n.isRTL?"-100px":"100px","0px"),g.add(y)}else v.beforeRemoveClass(c)}}if(s&&s.pageRef()){var b=s.pageRef().nativeElement,P=new l.a(n,b);if(this.add(P),d?P.beforeClearStyles(["opacity"]).fromTo(u,"0%",n.isRTL?"-100%":"100%"):P.fromTo(u,"0%",i).fromTo("opacity",1,.8).afterClearStyles(["transform","opacity"]),p){var E=b.querySelector("ion-navbar"),C=new l.a(n,E),I=new l.a(n,E.querySelector(".back-button"));if(C.add(I),this.add(C),I.fromTo("opacity",.99,0),d){var S=new l.a(n,E.querySelector(".back-button-text"));S.fromTo(u,"0%",(n.isRTL?-300:300)+"px"),C.add(S)}else I.afterClearStyles(["opacity"])}}},n}(s.a),f=t(6),p=t(389),h=t(10),m=t(175),_=t(148),g=t(11),v=t(5),y=t(38),b=t(25),P=t(26),E=t(3),C=t(65),I=t(154),S=t(50),w=t(198),A=t(13),T=t(518),O=t(2),k=t(141),D=t(68),x=t(104),M=t(153),U=t(17),N=t(105),R=t(243),F=t(86),L=t(132);t(29),t(560),t(552),t(553),t(549),t(550),t(557),t(547),t(558),t(546),t(559),t(551),t(1205),t(1206),t(1208),t(554),t(1209),t(544),t(567),t(568),t(569),t(1210),t(1213),t(570),t(1224),t(1227),t(1230),t(1233),t(1236),t(1239),t(1242),t(575),t(586),t(587),t(588),t(1245),t(1279),t(597),t(603),t(589),t(590),t(591),t(592),t(596),t(598),t(599),t(604),t(606),t(605),t(609),t(594),t(607),t(571),t(1282),t(572),t(614),t(617),t(616),t(618),t(1284),t(1304);t.d(n,"b",function(){return H}),t.d(n,"a",function(){return q}),t.d(n,"c",function(){return K}),t.d(n,"d",function(){return W});var H=[f.a,p.a,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,E.a,C.a,I.a,S.a,w.a,A.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,N.a,R.a,F.a,L.a],K=function(e){return new r.a(e,"./assets/lang/",".json")},W={},q=function(){function e(e,n,t,i,o,r,l){this.eventsProvider=l,n.registerProcess({name:"CorePlatformReady",priority:I.a.MAX_RECOMMENDED_PRIORITY+400,blocking:!0,load:e.ready}),n.registerProcess(t),n.registerProcess({name:"CoreRestoreSession",priority:I.a.MAX_RECOMMENDED_PRIORITY+200,blocking:!1,load:o.restoreSession.bind(o)}),n.registerProcess({name:"CoreClearTmpFolder",priority:I.a.MAX_RECOMMENDED_PRIORITY+150,blocking:!1,load:r.clearTmpFolder.bind(r)}),n.executeInitProcesses(),i.setTransition("core-page-transition",d),this.decorateIonContent()}return e.prototype.decorateIonContent=function(){var e=function(e){return e.indexOf("px")>0?parseInt(e,10):0};i.c.prototype._readDimensions=function(){var n,t=this._pTop,i=this._pRight,r=this._pBottom,l=this._pLeft,s=this._hdrHeight,a=this._ftrHeight,u=this._tabsPlacement,c=0;if(this._pTop=0,this._pRight=0,this._pBottom=0,this._pLeft=0,this._hdrHeight=0,this._ftrHeight=0,this._tabsPlacement=null,this._tTop=0,this._fTop=0,this._fBottom=0,this._scroll){n=this._scroll.ev;var d=this.getNativeElement();if(d){for(var f,p,h=d.parentElement,m=h.children,_=m.length-1;_>=0;_--)"ION-CONTENT"===(p=(d=m[_]).tagName)?(n.contentElement=d,this._fullscreen&&(f=getComputedStyle(d),this._pTop=e(f.paddingTop),this._pBottom=e(f.paddingBottom),this._pRight=e(f.paddingRight),this._pLeft=e(f.paddingLeft))):"ION-HEADER"===p?(n.headerElement=d,this._hdrHeight=d.clientHeight):"ION-FOOTER"===p&&(n.footerElement=d,this._ftrHeight=d.clientHeight,this._footerEle=d);d=h;for(;d&&"ION-MODAL"!==d.tagName&&!d.classList.contains("tab-subpage");)-1!=d.tagName.indexOf("ION-TABS")&&(this._tabbarHeight=d.firstElementChild.clientHeight,null===this._tabsPlacement&&(this._tabsPlacement=d.getAttribute("tabsplacement"))),d=d.parentElement;this._tabs&&"top"===this._tabsPlacement&&(this._tTop=this._hdrHeight,c=this._tabs._top),this._cTop=this._hdrHeight,this._cBottom=this._ftrHeight,"top"===this._tabsPlacement?this._cTop+=this._tabbarHeight:"bottom"===this._tabsPlacement&&(this._cBottom+=this._tabbarHeight),this._hasRefresher&&(this._cTop-=1),this._fTop=this._cTop,this._fBottom=this._cBottom,this._fullscreen&&(this._cTop+=this._pTop,this._cBottom+=this._pBottom);var g=this.getContentDimensions();n.scrollHeight=g.scrollHeight,n.scrollWidth=g.scrollWidth,n.contentHeight=g.contentHeight,n.contentWidth=g.contentWidth,n.contentTop=g.contentTop,n.contentBottom=g.contentBottom,this._dirty=t!==this._pTop||r!==this._pBottom||l!==this._pLeft||i!==this._pRight||s!==this._hdrHeight||a!==this._ftrHeight||u!==this._tabsPlacement||c!==this._tTop||this._cTop!==this.contentTop||this._cBottom!==this.contentBottom,this._scroll.init(this.getScrollElement(),this._cTop,this._cBottom),this.imgsUpdate()}else Object(o.a)(!1,"ele should be valid")}};var n=this.eventsProvider;i.c.prototype.ngAfterViewInit=function(){var e=this;Object(o.a)(this.getFixedElement(),"fixed element was not found"),Object(o.a)(this.getScrollElement(),"scroll element was not found");var t=this._scroll;t.ev.fixedElement=this.getFixedElement(),t.ev.scrollElement=this.getScrollElement(),t.onScrollStart=function(n){e.ionScrollStart.emit(n)},t.onScroll=function(n){e.ionScroll.emit(n),e.imgsUpdate()},t.onScrollEnd=function(n){e.ionScrollEnd.emit(n),e.imgsUpdate()},this._orientationObs=n.on(A.a.ORIENTATION_CHANGE,this.resize.bind(this))},i.c.prototype.ngOnDestroy=function(){this._scLsn&&this._scLsn(),this._viewCtrlReadSub&&this._viewCtrlReadSub.unsubscribe(),this._viewCtrlWriteSub&&this._viewCtrlWriteSub.unsubscribe(),this._viewCtrlReadSub=this._viewCtrlWriteSub=null,this._scroll&&this._scroll.destroy(),this._footerEle=this._scLsn=this._scroll=null,this._orientationObs&&this._orientationObs.off()}},e}()},,,,,,,,,,,,,,,,,,,,,function(e,n,t){function i(e){var n=o[e];return n?t.e(n[1]).then(function(){return t(n[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory":[1829,122],"../addon/badges/pages/user-badges/user-badges.module.ngfactory":[1830,121],"../addon/calendar/pages/event/event.module.ngfactory":[1831,120],"../addon/calendar/pages/list/list.module.ngfactory":[1832,119],"../addon/calendar/pages/settings/settings.module.ngfactory":[1833,118],"../addon/competency/pages/competencies/competencies.module.ngfactory":[1834,117],"../addon/competency/pages/competency/competency.module.ngfactory":[1835,116],"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory":[1836,115],"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory":[1837,114],"../addon/competency/pages/plan/plan.module.ngfactory":[1838,113],"../addon/competency/pages/planlist/planlist.module.ngfactory":[1839,112],"../addon/coursecompletion/pages/report/report.module.ngfactory":[1840,111],"../addon/files/pages/list/list.module.ngfactory":[1841,110],"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory":[1842,28],"../addon/messages/pages/contacts/contacts.module.ngfactory":[1843,3],"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory":[1844,109],"../addon/messages/pages/discussion/discussion.module.ngfactory":[1845,14],"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory":[1847,108],"../addon/messages/pages/index/index.module.ngfactory":[1846,2],"../addon/messages/pages/search/search.module.ngfactory":[1848,1],"../addon/messages/pages/settings/settings.module.ngfactory":[1849,0],"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory":[1850,7],"../addon/mod/assign/pages/edit/edit.module.ngfactory":[1851,6],"../addon/mod/assign/pages/index/index.module.ngfactory":[1852,5],"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory":[1853,107],"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory":[1854,4],"../addon/mod/book/pages/index/index.module.ngfactory":[1855,106],"../addon/mod/chat/pages/chat/chat.module.ngfactory":[1856,13],"../addon/mod/chat/pages/index/index.module.ngfactory":[1857,105],"../addon/mod/chat/pages/users/users.module.ngfactory":[1858,104],"../addon/mod/choice/pages/index/index.module.ngfactory":[1859,103],"../addon/mod/data/pages/edit/edit.module.ngfactory":[1860,102],"../addon/mod/data/pages/entry/entry.module.ngfactory":[1862,101],"../addon/mod/data/pages/index/index.module.ngfactory":[1861,100],"../addon/mod/data/pages/search/search.module.ngfactory":[1863,99],"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory":[1864,98],"../addon/mod/feedback/pages/form/form.module.ngfactory":[1865,21],"../addon/mod/feedback/pages/index/index.module.ngfactory":[1866,97],"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory":[1867,96],"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory":[1868,95],"../addon/mod/folder/pages/index/index.module.ngfactory":[1869,94],"../addon/mod/forum/pages/discussion/discussion.module.ngfactory":[1870,93],"../addon/mod/forum/pages/index/index.module.ngfactory":[1871,92],"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory":[1872,27],"../addon/mod/glossary/pages/edit/edit.module.ngfactory":[1873,26],"../addon/mod/glossary/pages/entry/entry.module.ngfactory":[1874,91],"../addon/mod/glossary/pages/index/index.module.ngfactory":[1875,90],"../addon/mod/imscp/pages/index/index.module.ngfactory":[1876,89],"../addon/mod/lesson/pages/index/index.module.ngfactory":[1877,88],"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory":[1878,87],"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory":[1879,86],"../addon/mod/lesson/pages/player/player.module.ngfactory":[1880,20],"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory":[1881,85],"../addon/mod/lti/pages/index/index.module.ngfactory":[1882,84],"../addon/mod/page/pages/index/index.module.ngfactory":[1883,83],"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory":[1884,82],"../addon/mod/quiz/pages/index/index.module.ngfactory":[1885,81],"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory":[1886,80],"../addon/mod/quiz/pages/player/player.module.ngfactory":[1887,9],"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory":[1889,79],"../addon/mod/quiz/pages/review/review.module.ngfactory":[1888,16],"../addon/mod/resource/pages/index/index.module.ngfactory":[1890,78],"../addon/mod/scorm/pages/index/index.module.ngfactory":[1891,76],"../addon/mod/scorm/pages/player/player.module.ngfactory":[1892,77],"../addon/mod/survey/pages/index/index.module.ngfactory":[1893,75],"../addon/mod/url/pages/index/index.module.ngfactory":[1894,74],"../addon/mod/wiki/pages/edit/edit.module.ngfactory":[1895,73],"../addon/mod/wiki/pages/index/index.module.ngfactory":[1896,72],"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory":[1897,22],"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory":[1898,71],"../addon/mod/workshop/pages/index/index.module.ngfactory":[1900,70],"../addon/mod/workshop/pages/phase/phase.module.ngfactory":[1899,69],"../addon/mod/workshop/pages/submission/submission.module.ngfactory":[1901,8],"../addon/notes/pages/add/add.module.ngfactory":[1902,68],"../addon/notifications/pages/list/list.module.ngfactory":[1903,67],"../addon/notifications/pages/settings/settings.module.ngfactory":[1904,25],"../components/split-view/placeholder/placeholder.module.ngfactory":[1905,66],"../core/comments/pages/viewer/viewer.module.ngfactory":[1906,65],"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory":[1907,64],"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory":[1908,63],"../core/course/pages/section-selector/section-selector.module.ngfactory":[1909,62],"../core/course/pages/section/section.module.ngfactory":[1910,61],"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory":[1911,60],"../core/courses/pages/available-courses/available-courses.module.ngfactory":[1912,19],"../core/courses/pages/categories/categories.module.ngfactory":[1913,18],"../core/courses/pages/course-preview/course-preview.module.ngfactory":[1914,59],"../core/courses/pages/dashboard/dashboard.module.ngfactory":[1915,11],"../core/courses/pages/my-courses/my-courses.module.ngfactory":[1916,58],"../core/courses/pages/search/search.module.ngfactory":[1918,17],"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory":[1917,57],"../core/emulator/pages/capture-media/capture-media.module.ngfactory":[1919,56],"../core/grades/pages/course/course.module.ngfactory":[1920,55],"../core/grades/pages/courses/courses.module.ngfactory":[1921,54],"../core/grades/pages/coursesplit/coursesplit.module.ngfactory":[1922,53],"../core/grades/pages/grade/grade.module.ngfactory":[1923,52],"../core/login/pages/credentials/credentials.module.ngfactory":[1924,51],"../core/login/pages/email-signup/email-signup.module.ngfactory":[1925,12],"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory":[1926,50],"../core/login/pages/init/init.module.ngfactory":[1927,49],"../core/login/pages/reconnect/reconnect.module.ngfactory":[1928,48],"../core/login/pages/site-error/site-error.module.ngfactory":[1929,47],"../core/login/pages/site-help/site-help.module.ngfactory":[1930,46],"../core/login/pages/site-policy/site-policy.module.ngfactory":[1931,45],"../core/login/pages/site/site.module.ngfactory":[1932,44],"../core/login/pages/sites/sites.module.ngfactory":[1933,43],"../core/mainmenu/pages/menu/menu.module.ngfactory":[1934,42],"../core/mainmenu/pages/more/more.module.ngfactory":[1935,41],"../core/settings/pages/about/about.module.ngfactory":[1936,40],"../core/settings/pages/general/general.module.ngfactory":[1938,24],"../core/settings/pages/list/list.module.ngfactory":[1937,39],"../core/settings/pages/space-usage/space-usage.module.ngfactory":[1939,38],"../core/settings/pages/synchronization/synchronization.module.ngfactory":[1940,23],"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory":[1941,37],"../core/sharedfiles/pages/list/list.module.ngfactory":[1942,36],"../core/sitehome/pages/index/index.module.ngfactory":[1943,10],"../core/siteplugins/pages/module-index/module-index.module.ngfactory":[1944,35],"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory":[1945,34],"../core/user/pages/about/about.module.ngfactory":[1946,15],"../core/user/pages/participants/participants.module.ngfactory":[1947,33],"../core/user/pages/profile/profile.module.ngfactory":[1948,32],"../core/viewer/pages/iframe/iframe.module.ngfactory":[1950,31],"../core/viewer/pages/image/image.module.ngfactory":[1949,30],"../core/viewer/pages/text/text.module.ngfactory":[1951,29]};i.keys=function(){return Object.keys(o)},i.id=743,e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});var i=t(0),o=t(400),r=function(){function e(e,n,t,i,o,r){this.code=e,this.source=n,this.target=t,this.http_status=i,this.body=o,this.exception=r}return e.FILE_NOT_FOUND_ERR=1,e.INVALID_URL_ERR=2,e.CONNECTION_ERR=3,e.ABORT_ERR=4,e.NOT_MODIFIED_ERR=5,e}(),l=function(e){function n(n,t){var i=e.call(this)||this;return i.appProvider=n,i.fileProvider=t,i}return Object(i.__extends)(n,e),n.prototype.create=function(){return new s(this.appProvider,this.fileProvider)},n}(o.a),s=function(n){function t(e,t){var i=n.call(this)||this;return i.appProvider=e,i.fileProvider=t,i}return Object(i.__extends)(t,n),t.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.reject(new r(r.ABORT_ERR,this.source,this.target,null,null,null)))},t.prototype.download=function(n,t,i,o){var l=this;return new Promise(function(i,s){var a=l.getBasicAuthHeader(n),u=new XMLHttpRequest,c=l.appProvider.isDesktop(),d=null;l.xhr=u,l.source=n,l.target=t,l.reject=s,a&&(n=n.replace(l.getUrlCredentials(n)+"@",""),(o=o||{}).headers=o.headers||{},o.headers[a.name]=a.value),o&&(d=o.headers||null),u.open("GET",n,!0),u.responseType=c?"arraybuffer":"blob";for(var f in d)u.setRequestHeader(f,d[f]);u.onprogress=function(e,n){l.progressListener&&l.progressListener(n)},u.onerror=function(e){s(new r(-1,n,t,u.status,u.statusText,null))},u.onload=function(){var o=u.response||u.responseText,a=Math.max(1223===u.status?204:u.status,0);if(a<200||a>=300)l.parseResponse(o).then(function(e){s(new r(-1,n,t,u.status,e||u.statusText,null))});else if(o){var d=l.fileProvider.getBasePathInstant();t=(t=t.replace(d,"")).replace(/%20/g," "),c&&(o=e.from(new Uint8Array(o))),l.fileProvider.writeFile(t,o).then(i,s)}else s()},u.send()})},t.prototype.getBasicAuthHeader=function(e){var n=null;if(window.btoa){var t=this.getUrlCredentials(e);if(t){n={name:"Authorization",value:"Basic "+window.btoa(t)}}}return n},t.prototype.getHeadersAsObject=function(e){var n=e.getAllResponseHeaders(),t={};if(n){var i=n.split("\n");for(var o in i){var r=i[o],l=r.indexOf(":");-1!=l&&(t[r.substr(0,l)]=r.substr(l+1).trim())}}return t},t.prototype.getUrlCredentials=function(e){var n=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/.exec(e);return n&&n[1]},t.prototype.onProgress=function(e){this.progressListener=e},t.prototype.parseJSON=function(e){try{return JSON.parse(e)}catch(e){}return e},t.prototype.parseResponse=function(e){var n=this;return new Promise(function(n,t){if(e)if(e.toString&&"[object Blob]"==e.toString()){var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsText(e)}else e.toString&&"[object ArrayBuffer]"==e.toString()?n(String.fromCharCode.apply(null,new Uint8Array(e))):n(e);else n("")}).then(function(e){return n.parseJSON(e)})},t.prototype.upload=function(e,n,t,i){var o=this;return new Promise(function(i,l){var s=o.getBasicAuthHeader(n),a=null,u=null,c=null,d=null,f=null;s&&(n=n.replace(o.getUrlCredentials(n)+"@",""),(t=t||{}).headers=t.headers||{},t.headers[s.name]=s.value),t&&(a=t.fileKey,u=t.fileName,d=t.headers,f="PUT"==(f=t.httpMethod||"POST").toUpperCase()?"PUT":"POST",c=t.params?t.params:{}),(d=d||{})["Content-Disposition"]||(d["Content-Disposition"]="form-data;"+(a?' name="'+a+'";':"")+(u?' filename="'+u+'"':"")),delete d["Content-Type"],o.fileProvider.getFile(e).then(function(e){return o.fileProvider.getFileObjectFromFileEntry(e)}).then(function(t){var s=new XMLHttpRequest;s.open(f||"POST",n);for(var a in d)"Connection"!=a&&s.setRequestHeader(a,d[a]);s.onprogress=function(e){o.progressListener&&o.progressListener(e)},o.xhr=s,o.source=e,o.target=n,o.reject=l,s.onerror=function(){l(new r(-1,e,n,s.status,s.statusText,null))},s.onload=function(){i({bytesSent:t.size,responseCode:s.status,response:s.response,headers:o.getHeadersAsObject(s)})};var u=new FormData;for(var p in c)u.append(p,c[p]);u.append("file",t),s.send(u)}).catch(l)})},t}(o.b)}).call(n,t(326).Buffer)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e){this.translate=e,this.name="AddonModAssignBaseFeedbackHandler",this.type="base"}return e.prototype.discardDraft=function(e,n,t){},e.prototype.getComponent=function(e,n){},e.prototype.getDraft=function(e,n,t){},e.prototype.getPluginFiles=function(e,n,t,i){return[]},e.prototype.getPluginName=function(e){var n="addon.mod_assign_feedback_"+e.type+".pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},e.prototype.hasDataChanged=function(e,n,t,i){return!1},e.prototype.hasDraftData=function(e,n,t){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.prefetch=function(e,n,t,i){return Promise.resolve()},e.prototype.prepareFeedbackData=function(e,n,t,i,o){},e.prototype.saveDraft=function(e,n,t,i,o){},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){this.cacheStore={}}return e.prototype.clear=function(){this.cacheStore={}},e.prototype.getEntry=function(e){return this.cacheStore[e]||(this.cacheStore[e]={}),this.cacheStore[e]},e.prototype.getValue=function(e,n,t){var i=this.getEntry(e);if(i[n]&&void 0!==i[n].value){var o=Date.now();if(t||i[n].timemodified+3e5>=o)return i[n].value}},e.prototype.invalidate=function(e){var n=this.getEntry(e);for(var t in n)n[t].timemodified=0},e.prototype.setValue=function(e,n,t){return this.getEntry(e)[n]={value:t,timemodified:Date.now()},t},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e){this.translate=e,this.name="AddonModAssignBaseSubmissionHandler",this.type="base"}return e.prototype.canEditOffline=function(e,n,t){return!1},e.prototype.clearTmpData=function(e,n,t,i){},e.prototype.copySubmissionData=function(e,n,t,i,o){},e.prototype.deleteOfflineData=function(e,n,t,i,o){},e.prototype.getComponent=function(e,n,t){},e.prototype.getPluginFiles=function(e,n,t,i){return[]},e.prototype.getPluginName=function(e){var n="addon.mod_assign_submission_"+e.type+".pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},e.prototype.getSizeForCopy=function(e,n){return 0},e.prototype.getSizeForEdit=function(e,n){return 0},e.prototype.hasDataChanged=function(e,n,t,i){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!1},e.prototype.prefetch=function(e,n,t,i){return Promise.resolve()},e.prototype.prepareSubmissionData=function(e,n,t,i,o,r,l,s){},e.prototype.prepareSyncData=function(e,n,t,i,o,r){},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e,n,t,i,o,r,l){this.translate=e,this.appProvider=n,this.utils=t,this.courseProvider=i,this.filepoolProvider=o,this.sitesProvider=r,this.domUtils=l,this.name="CoreCourseModulePrefetchHandler",this.modName="default",this.component="core_module",this.updatesNames=/^.*files$/,this.downloadPromises={}}return e.prototype.addOngoingDownload=function(e,n,t){var i=this;t=t||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueId(e);return this.downloadPromises[t]||(this.downloadPromises[t]={}),this.downloadPromises[t][o]=n.finally(function(){delete i.downloadPromises[t][o]}),this.downloadPromises[t][o]},e.prototype.download=function(e,n,t){return Promise.resolve()},e.prototype.getContentDownloadableFiles=function(e){var n=this,t=[];return e.contents&&e.contents.length&&e.contents.forEach(function(e){n.isFileDownloadable(e)&&t.push(e)}),t},e.prototype.getDownloadSize=function(e,n,t){var i=this;return this.getFiles(e,n).then(function(e){return i.utils.sumFileSizes(e)}).catch(function(){return{size:-1,total:!1}})},e.prototype.getDownloadedSize=function(e,n){var t=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getFilesSizeByComponent(t,this.component,e.id)},e.prototype.getFiles=function(e,n,t){return Promise.resolve([])},e.prototype.getIntroFiles=function(e,n){return Promise.resolve(this.getIntroFilesFromInstance(e))},e.prototype.getIntroFilesFromInstance=function(e,n){if(n){if(void 0!==n.introfiles)return n.introfiles;if(n.intro)return this.domUtils.extractDownloadableFilesFromHtmlAsFakeFileObjects(n.intro)}return e.description?this.domUtils.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.description):[]},e.prototype.getOngoingDownload=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.isDownloading(e,n)?this.downloadPromises[n][this.getUniqueId(e)]:Promise.resolve()},e.prototype.getUniqueId=function(e){return this.component+"#"+e},e.prototype.invalidateContent=function(e,n){return Promise.resolve()},e.prototype.invalidateModule=function(e,n){return this.courseProvider.invalidateModule(e.id)},e.prototype.isDownloadable=function(e,n){return!0},e.prototype.isDownloading=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),!(!this.downloadPromises[n]||!this.downloadPromises[n][this.getUniqueId(e)])},e.prototype.isEnabled=function(){return!0},e.prototype.isFileDownloadable=function(e){return"file"===e.type},e.prototype.loadContents=function(e,n,t){return Promise.resolve()},e.prototype.prefetch=function(e,n,t,i){return Promise.resolve()},e.prototype.removeFiles=function(e,n){return this.filepoolProvider.removeFilesByComponent(this.sitesProvider.getCurrentSiteId(),this.component,e.id)},e}()},function(e,n,t){"use strict";function i(e){return l._42(0,[(e()(),l._16(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,s.b,s.a)),l._15(1,1097728,null,3,a.a,[u.a,c.a,l.p,l.K,[2,d.a]],null,null),l._37(335544320,2,{contentLabel:0}),l._37(603979776,3,{_buttons:1}),l._37(603979776,4,{_icons:1}),l._15(5,16384,null,0,f.a,[],null,null),(e()(),l._40(-1,2,["\n        "])),(e()(),l._16(7,0,null,0,1,"ion-icon",[["item-start",""],["name","square"],["role","img"]],[[4,"color",null],[2,"hide",null]],null,null,null,null)),l._15(8,147456,[[4,4]],0,p.a,[c.a,l.p,l.K],{name:[0,"name"]},null),(e()(),l._40(9,2,["\n        ","\n    "]))],function(e,n){e(n,8,0,"square")},function(e,n){e(n,7,0,n.context.$implicit.fillStyle,l._29(n,8)._hidden);e(n,9,0,n.context.$implicit.text)})}function o(e){return l._42(0,[(e()(),l._16(0,0,null,null,5,"ion-list",[["inset",""]],null,null,null,null,null)),l._15(1,16384,null,0,h.a,[c.a,l.p,l.K,m.a,_.l,g.a],null,null),(e()(),l._40(-1,null,["\n    "])),(e()(),l._11(16777216,null,null,1,null,i)),l._15(4,802816,null,0,v.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(e()(),l._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.chart.legend.legendItems)},null)}function r(e){return l._42(0,[l._37(402653184,1,{canvas:0}),(e()(),l._16(1,0,[[1,0],["canvas",1]],null,0,"canvas",[],[[1,"height",0]],null,null,null,null)),(e()(),l._40(-1,null,["\n\n"])),(e()(),l._11(16777216,null,null,1,null,o)),l._15(4,16384,null,0,v.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(e()(),l._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.chart)},function(e,n){e(n,1,0,n.component.height)})}t.d(n,"a",function(){return y}),n.b=r;var l=t(1),s=t(31),a=t(21),u=t(20),c=t(7),d=t(28),f=t(33),p=t(47),h=t(78),m=t(15),_=t(39),g=t(32),v=t(8),y=l._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(412),t(548),t(176);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(996),t(176);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="CoreCourseFormatSocial",n.format="social",n}return Object(i.__extends)(n,e),n}(t(548).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(998),t(176);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="CoreCourseFormatTopics",this.format="topics"}return e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1e3),t(176);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(40),o=function(){function e(e){this.timeUtils=e,this.name="CoreCourseFormatWeeks",this.format="weeks"}return e.prototype.isEnabled=function(){return!0},e.prototype.getCurrentSection=function(e,n){var t=this.timeUtils.timestamp();if(t<e.startdate||e.enddate&&t>e.enddate)return n[0];for(var i=0;i<n.length;i++){var o=n[i];if(!(void 0===o.section||o.section<1)){var r=this.getSectionDates(o,e.startdate);if(t>=r.start&&t<r.end)return o}}return n[0]},e.prototype.getSectionDates=function(e,n){var t={start:(n+=7200)+i.a.SECONDS_WEEK*(e.section-1),end:0};return t.end=t.start+i.a.SECONDS_WEEK,t},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(361);var i=function(){function e(e){this.courseSync=e,this.name="CoreCourseSyncCronHandler"}return e.prototype.execute=function(e){return this.courseSync.syncAllCourses(e)},e.prototype.getInterval=function(){return this.courseSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.courseProvider=e,this.sitesProvider=n,this.name="CoreCourseLogCronHandler"}return e.prototype.execute=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.courseProvider.logView(e.getSiteHomeId(),void 0,e.getId())})},e.prototype.isSync=function(){return!1},e.prototype.getInterval=function(){return 24e4},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(51),t(458);var i=function(){function e(e,n,t,i){this.coursesProvider=e,this.dashboardProvider=n,this.siteHomeProvider=t,this.timelineProvider=i,this.name="CoreDashboard",this.priority=1100}return e.prototype.isEnabled=function(){var e=this;return this.dashboardProvider.isAvailable().then(function(n){return!!n||e.timelineProvider.isAvailable().then(function(n){return!!n||e.siteHomeProvider.isAvailable().then(function(n){return!!n||!e.coursesProvider.isMyCoursesDisabledInSite()})})})},e.prototype.getDisplayData=function(){return{icon:"home",title:"core.courses.mymoodle",page:"CoreCoursesDashboardPage",class:"core-dashboard-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(59)),r=t(51),l=function(e){function n(n,t,i,o,r,l,s){var a=e.call(this)||this;return a.sitesProvider=n,a.coursesProvider=t,a.loginHelper=i,a.domUtils=o,a.translate=r,a.courseProvider=l,a.textUtils=s,a.name="CoreCoursesCourseLinkHandler",a.pattern=/((\/enrol\/index\.php)|(\/course\/enrol\.php)|(\/course\/view\.php)).*([\?\&]id=\d+)/,a.waitStart=0,a}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;i=parseInt(t.id,10);var r=t.sectionid?parseInt(t.sectionid,10):null,l={course:{id:i},sectionId:r||null},s=void 0!==t.section?parseInt(t.section,10):NaN;if(!r&&!s){var a=n.match(/#section-(\d+)/);a&&a[1]&&(s=parseInt(a[1],10))}return isNaN(s)||(l.sectionNumber=s),[{action:function(e,t){(e=e||o.sitesProvider.getCurrentSiteId())==o.sitesProvider.getCurrentSiteId()?o.actionEnrol(i,n,l).catch(function(){}):o.loginHelper.redirect("CoreCourseSectionPage",l,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return!!(i=parseInt(t.id,10))&&this.sitesProvider.getSiteHomeId(e).then(function(e){return i!=e})},n.prototype.actionEnrol=function(e,n,t){var i=this,o=this.domUtils.showModalLoading(),r=!!n.match(/(\/enrol\/index\.php)|(\/course\/enrol\.php)/);return this.coursesProvider.getUserCourse(e).catch(function(){return i.canSelfEnrol(e).then(function(){o.dismiss();return(r?Promise.resolve():i.domUtils.showConfirm(i.translate.instant("core.courses.confirmselfenrol"))).then(function(){return i.selfEnrol(e).catch(function(e){return e&&i.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return i.courseProvider.getSections(e,!1,!0)})},function(t){return i.courseProvider.getSections(e,!1,!0).catch(function(){o.dismiss(),t&&(t=i.textUtils.getErrorMessageFromError(t)||t),t||(t=i.translate.instant("core.courses.notenroled"));var e=i.translate.instant("core.twoparagraphs",{p1:t,p2:i.translate.instant("core.confirmopeninbrowser")});return i.domUtils.showConfirm(e).then(function(){i.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(n)}).catch(function(){}),Promise.reject(null)})})}).then(function(){o.dismiss(),i.loginHelper.redirect("CoreCourseSectionPage",t,i.sitesProvider.getCurrentSiteId())})},n.prototype.canSelfEnrol=function(e){return this.coursesProvider.getCourseEnrolmentMethods(e).then(function(e){var n=!1,t=0;if(e.forEach(function(e){"self"==e.type&&e.status&&(n=!0,t++)}),!n||1!=t)return Promise.reject(null)})},n.prototype.selfEnrol=function(e,n){var t=this,i=this.domUtils.showModalLoading();return this.coursesProvider.selfEnrol(e,n).then(function(){return t.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return t.waitForEnrolled(e,!0).finally(function(){i.dismiss()})})}).catch(function(o){if(i.dismiss(),o&&o.code===r.a.ENROL_INVALID_KEY){var l=t.translate.instant("core.courses.selfenrolment"),s=t.translate.instant("core.courses.password");return void 0!==n&&t.domUtils.showErrorModal(o),t.domUtils.showPrompt(" ",l,s).then(function(n){return t.selfEnrol(e,n)})}return Promise.reject(o)})},n.prototype.waitForEnrolled=function(e,n){var t=this;return n&&(this.waitStart=Date.now()),this.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return t.coursesProvider.getUserCourse(e)}).catch(function(){if(!(Date.now()-t.waitStart>6e4))return new Promise(function(n,i){setTimeout(function(){t.waitForEnrolled(e).then(n)},5e3)})})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(51),function(e){function n(n,t){var i=e.call(this)||this;return i.coursesProvider=n,i.loginHelper=t,i.name="CoreCoursesIndexLinkHandler",i.featureName="CoreMainMenuDelegate_CoreCourses",i.pattern=/\/course\/?(index\.php.*)?$/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i="CoreCoursesMyCoursesPage",r={};o.coursesProvider.isGetCoursesByFieldAvailable()&&(t.categoryid?(i="CoreCoursesCategoriesPage",r.categoryId=parseInt(t.categoryid,10)):i="CoreCoursesAvailableCoursesPage"),o.loginHelper.redirect(i,r,e)}}]},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=function(e){function n(n){var t=e.call(this)||this;return t.loginHelper=n,t.name="CoreCoursesMyOverviewLinkHandler",t.featureName="CoreMainMenuDelegate_CoreCourses",t.pattern=/\/my\/?$/,t}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.loginHelper.redirect("CoreCoursesDashboardPage",void 0,e)}}]},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(133);var i=function(){function e(e,n,t){this.appProvider=e,this.utils=n,this.uploaderHelper=t,this.name="CoreFileUploaderAlbum",this.priority=2e3}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()},e.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^(image|video)\//)},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.photoalbums",class:"core-fileuploader-album-handler",icon:"images",action:function(n,t,i,o){return e.uploaderHelper.uploadImage(!0,n,t,o).then(function(e){return{treated:!0,result:e}})}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(133);var i=function(){function e(e,n,t,i){this.appProvider=e,this.utils=n,this.platform=t,this.uploaderHelper=i,this.name="CoreFileUploaderAudio",this.priority=1600}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},e.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^audio\/wav$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^audio\//);var n=window.MediaRecorder;return n?e.filter(function(e){var t=e.match(/^audio\//);return t&&t.length&&n.isTypeSupported(e)}):[]},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.audio",class:"core-fileuploader-audio-handler",icon:"microphone",action:function(n,t,i,o){return e.uploaderHelper.uploadAudioOrVideo(!0,n,t,o).then(function(e){return{treated:!0,result:e}})}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(133);var i=function(){function e(e,n,t){this.appProvider=e,this.utils=n,this.uploaderHelper=t,this.name="CoreFileUploaderCamera",this.priority=1800}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()},e.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^image\/(jpeg|png)$/)},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.camera",class:"core-fileuploader-camera-handler",icon:"camera",action:function(n,t,i,o){return e.uploaderHelper.uploadImage(!1,n,t,o).then(function(e){return{treated:!0,result:e}})}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(133),t(67);var i=function(){function e(e,n,t,i,o,r){this.appProvider=e,this.platform=n,this.timeUtils=t,this.uploaderHelper=i,this.uploaderProvider=o,this.domUtils=r,this.name="CoreFileUploaderFile",this.priority=1200}return e.prototype.isEnabled=function(){return this.platform.is("android")||!this.appProvider.isMobile()||this.platform.is("ios")&&this.platform.version().major>=9},e.prototype.getSupportedMimetypes=function(e){return e},e.prototype.getData=function(){var e=this,n=this.platform.is("ios");return{title:n?"core.fileuploader.more":"core.fileuploader.file",class:"core-fileuploader-file-handler",icon:n?"more":"folder",afterRender:function(t,i,o,r){var l=document.querySelector(".core-fileuploader-file-handler");if(l){var s=document.createElement("input");s.setAttribute("type","file"),!r||!r.length||e.platform.is("android")&&1!=r.length||s.setAttribute("accept",r.join(", ")),s.addEventListener("change",function(l){var a,u=s.files[0];if(s.value="",u){var c=e.uploaderProvider.isInvalidMimetype(r,u.name,u.type);if(c)e.domUtils.showErrorModal(c);else{if(a=u.name,n){var d=a.match(/image\.(jpe?g|png)/);d&&(a="image_"+e.timeUtils.readableTimestamp()+"."+d[1])}e.uploaderHelper.uploadFileObject(u,t,i,o,a).then(function(n){e.uploaderHelper.fileUploaded(n)}).catch(function(n){n&&e.domUtils.showErrorModal(n)})}}}),l.appendChild(s)}}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(133);var i=function(){function e(e,n,t,i){this.appProvider=e,this.utils=n,this.platform=t,this.uploaderHelper=i,this.name="CoreFileUploaderVideo",this.priority=1400}return e.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},e.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^video\/quicktime$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^video\//);var n=window.MediaRecorder;return n?e.filter(function(e){var t=e.match(/^video\//);return t&&t.length&&n.isTypeSupported(e)}):[]},e.prototype.getData=function(){var e=this;return{title:"core.fileuploader.video",class:"core-fileuploader-video-handler",icon:"videocam",action:function(n,t,i,o){return e.uploaderHelper.uploadAudioOrVideo(!1,n,t,o).then(function(e){return{treated:!0,result:e}})}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(152);var i=function(){function e(e){this.gradesProvider=e,this.name="CoreGrades",this.priority=600}return e.prototype.isEnabled=function(){return this.gradesProvider.isCourseGradesEnabled()},e.prototype.getDisplayData=function(){return{icon:"stats",title:"core.grades.grades",page:"CoreGradesCoursesPage",class:"core-grades-coursesgrades-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(16),o=(t(152),t(161),t(459)),r=function(){function e(e,n,t){this.gradesProvider=e,this.coursesProvider=n,this.gradesHelper=t,this.name="CoreGrades",this.priority=400}return e.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.grades?Promise.resolve():this.coursesProvider.invalidateUserCourses()},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,n,t,o){return(!n||n.type!=i.a.ACCESS_GUEST)&&(t&&void 0!==t.grades?t.grades:this.gradesProvider.isPluginEnabledForCourse(e))},e.prototype.getDisplayData=function(e,n){return{title:"core.grades.grades",class:"core-grades-course-handler",component:o.a}},e.prototype.prefetch=function(e){var n=this;return this.gradesProvider.getCourseGradesTable(e.id,void 0,void 0,!0).then(function(t){var i=[];return(t=n.gradesHelper.formatGradesTable(t))&&t.rows&&t.rows.forEach(function(t){"category"!=t.itemtype&&i.push(n.gradesHelper.getGradeItem(e.id,t.id,void 0,void 0,!0))}),Promise.all(i)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(152),function(e){function n(n,t){var i=e.call(this)||this;return i.linkHelper=n,i.gradesProvider=t,i.name="CoreGradesUserLinkHandler",i.pattern=/\/grade\/report\/user\/index.php/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var r={course:{id:i},userId:!!t.userid&&parseInt(t.userid,10)};o.linkHelper.goInSite(n,"CoreGradesCoursePage",r,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return!!i&&this.gradesProvider.isPluginEnabledForCourse(i,e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(152),function(e){function n(n,t){var i=e.call(this)||this;return i.linkHelper=n,i.gradesProvider=t,i.name="CoreGradesOverviewLinkHandler",i.pattern=/\/grade\/report\/overview\/index.php/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.linkHelper.goInSite(n,"CoreGradesCoursesPage",void 0,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return this.gradesProvider.isCourseGradesEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(100),o=(t(152),function(){function e(e,n,t){this.linkHelper=e,this.sitesProvider=n,this.gradesProvider=t,this.name="CoreGrades:viewGrades",this.priority=400,this.type=i.a.TYPE_NEW_PAGE,this.viewGradesEnabledCache={}}return e.prototype.clearViewGradesCache=function(e,n){e&&n?delete this.viewGradesEnabledCache[this.getCacheKey(e,n)]:this.viewGradesEnabledCache={}},e.prototype.getCacheKey=function(e,n){return e+"#"+n},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,n,t,i){var o=this,r=this.getCacheKey(n,e.id),l=this.viewGradesEnabledCache[r];return void 0!==l?l:this.gradesProvider.isPluginEnabledForCourse(n).then(function(){return o.gradesProvider.getCourseGradesTable(n,e.id).then(function(){return o.viewGradesEnabledCache[r]=!0,!0}).catch(function(){return o.viewGradesEnabledCache[r]=!1,!1})})},e.prototype.getDisplayData=function(e,n){var t=this;return{icon:"stats",title:"core.grades.grades",class:"core-grades-user-handler",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation();t.linkHelper.goInSite(n,"CoreGradesCoursePage",{courseId:o,userId:i.id})}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(){this.name="CoreQuestionBase",this.type="base"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e,n){},e.prototype.getBehaviour=function(e,n){return n},e.prototype.getPreventSubmitMessage=function(e){return""},e.prototype.isCompleteResponse=function(e,n){return-1},e.prototype.isGradableResponse=function(e,n){return-1},e.prototype.isSameResponse=function(e,n,t){return!1},e.prototype.prepareAnswers=function(e,n,t,i){},e.prototype.validateSequenceCheck=function(e,n){return e.sequencecheck==n},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function(){function e(e){this.questionProvider=e,this.name="CoreQuestionBehaviourBase",this.type="base"}return e.prototype.determineNewState=function(e,n,t,i){return this.questionProvider.getState(t.state)},e.prototype.handleQuestion=function(e,n){},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(461);var i=function(){function e(e,n){this.sharedFilesHelper=e,this.platform=n,this.name="CoreSharedFilesUpload",this.priority=1300}return e.prototype.isEnabled=function(){return this.platform.is("ios")},e.prototype.getSupportedMimetypes=function(e){return e},e.prototype.getData=function(){var e=this;return{title:"core.sharedfiles.sharedfiles",class:"core-sharedfiles-fileuploader-handler",icon:"folder",action:function(n,t,i,o){return e.sharedFilesHelper.pickSharedFile(o)}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(206),function(e){function n(n,t,i){var o=e.call(this)||this;return o.sitesProvider=n,o.siteHomeProvider=t,o.loginHelper=i,o.name="CoreSiteHomeIndexLinkHandler",o.featureName="CoreMainMenuDelegate_CoreSiteHome",o.pattern=/\/course\/view\.php.*([\?\&]id=\d+)/,o}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.loginHelper.redirect("CoreSiteHomeIndexPage",void 0,e)}}]},n.prototype.isEnabled=function(e,n,t,i){var o=this;return!!(i=parseInt(t.id,10))&&this.sitesProvider.getSite(e).then(function(n){return i==n.getSiteHomeId()&&o.siteHomeProvider.isAvailable(e).then(function(){return!0}).catch(function(){return!1})})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(100),o=function(){function e(e,n){this.sitesProvider=e,this.utils=n,this.name="CoreUserProfileMail",this.priority=700,this.type=i.a.TYPE_COMMUNICATION}return e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,n,t,i){return e.id!=this.sitesProvider.getCurrentSite().getUserId()&&e.email},e.prototype.getDisplayData=function(e,n){var t=this;return{icon:"mail",title:"core.user.sendemail",class:"core-user-profile-mail",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation(),t.utils.openInBrowser("mailto:"+i.email)}}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=function(e){function n(n){var t=e.call(this)||this;return t.linkHelper=n,t.name="CoreUserProfileLinkHandler",t.pattern=/((\/user\/view\.php)|(\/user\/profile\.php)).*([\?\&]id=\d+)/,t}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i={courseId:t.course,userId:parseInt(t.id,10)};o.linkHelper.goInSite(n,"CoreUserProfilePage",i,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return-1==n.indexOf("/grade/report/")},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(16),o=(t(45),t(482)),r=function(){function e(e){this.userProvider=e,this.name="CoreUserParticipants",this.priority=600}return e.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.participants?Promise.resolve():this.userProvider.invalidateParticipantsList(e)},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,n,t,o){return(!n||n.type!=i.a.ACCESS_GUEST)&&(t&&void 0!==t.participants?t.participants:this.userProvider.isPluginEnabledForCourse(e))},e.prototype.getDisplayData=function(e,n){return{title:"core.user.participants",class:"core-user-participants-handler",component:o.a}},e.prototype.prefetch=function(e){return this.getParticipantsPage(e.id,0)},e.prototype.getParticipantsPage=function(e,n){var t=this;return this.userProvider.getParticipants(e,n,void 0,void 0,!0).then(function(i){if(i.canLoadMore)return t.getParticipantsPage(e,n+i.participants.length)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(45),function(e){function n(n,t){var i=e.call(this)||this;return i.userProvider=n,i.loginHelper=t,i.name="CoreUserParticipants",i.featureName="CoreCourseOptionsDelegate_CoreUserParticipants",i.pattern=/\/user\/index\.php/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=parseInt(t.id,10)||i,[{action:function(e,n){o.loginHelper.redirect("CoreUserParticipantsPage",{courseId:i},e)}}]},n.prototype.isEnabled=function(e,n,t,i){return!(!(i=parseInt(t.id,10)||i)||-1!=n.indexOf("/grade/report/"))&&this.userProvider.isPluginEnabledForCourse(i,e)},n}(o.a))},,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(100),o=(t(284),function(){function e(e){this.badgesProvider=e,this.name="AddonBadges",this.priority=50,this.type=i.a.TYPE_NEW_PAGE}return e.prototype.isEnabled=function(){return this.badgesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){return!t||void 0===t.badges||t.badges},e.prototype.getDisplayData=function(e,n){return{icon:"trophy",title:"addon.badges.badges",class:"",action:function(e,n,t,i){e.preventDefault(),e.stopPropagation(),n.push("AddonBadgesUserBadgesPage",{courseId:i,userId:t.id})}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(284),function(e){function n(n,t){var i=e.call(this)||this;return i.badgesProvider=n,i.loginHelper=t,i.name="AddonBadgesMyBadgesLinkHandler",i.featureName="CoreUserDelegate_AddonBadges",i.pattern=/\/badges\/mybadges\.php/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.loginHelper.redirect("AddonBadgesUserBadgesPage",{},e)}}]},n.prototype.isEnabled=function(e,n,t,i){return this.badgesProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(284),function(e){function n(n,t){var i=e.call(this)||this;return i.badgesProvider=n,i.loginHelper=t,i.name="AddonBadgesBadgeLinkHandler",i.pattern=/\/badges\/badge\.php.*([\?\&]hash=)/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.loginHelper.redirect("AddonBadgesIssuedBadgePage",{courseId:0,badgeHash:t.hash},e)}}]},n.prototype.isEnabled=function(e,n,t,i){return this.badgesProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(342);var i=function(){function e(e){this.calendarProvider=e,this.name="AddonCalendar",this.priority=900}return e.prototype.isEnabled=function(){return!this.calendarProvider.isCalendarDisabledInSite()},e.prototype.getDisplayData=function(){return{icon:"calendar",title:"addon.calendar.calendar",page:"AddonCalendarListPage",class:"addon-calendar-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(16),o=t(480),r=(t(205),function(){function e(e){this.competencyProvider=e,this.name="AddonCompetency",this.priority=300}return e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForCourse=function(e,n,t,o){return(!n||n.type!=i.a.ACCESS_GUEST)&&(t&&void 0!==t.competencies?t.competencies:this.competencyProvider.isPluginForCourseEnabled(e).then(function(e){return!!e&&!e.canmanagecoursecompetencies}))},e.prototype.getDisplayData=function(e,n){return{title:"addon.competency.competencies",class:"addon-competency-course-handler",component:o.a}},e.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.competencies?Promise.resolve():this.competencyProvider.invalidateCourseCompetencies(e)},e.prototype.prefetch=function(e){var n=this;return this.competencyProvider.getCourseCompetencies(e.id,void 0,void 0,!0).then(function(t){var i=[];return t&&t.competencies&&t.competencies.forEach(function(t){i.push(n.competencyProvider.getCompetencyInCourse(e.id,t.competency.id,void 0,void 0,!0)),i.push(n.competencyProvider.getCompetencySummary(t.competency.id,void 0,void 0,!0))}),Promise.all(i)})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(205);var i=function(){function e(e){this.competencyProvider=e,this.name="AddonCompetency",this.priority=500}return e.prototype.isEnabled=function(){return this.competencyProvider.getLearningPlans().then(function(e){return e.length>0})},e.prototype.getDisplayData=function(){return{icon:"map",title:"addon.competency.myplans",page:"AddonCompetencyPlanListPage",class:"addon-competency-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var i=t(100),o=t(13),r=t(45),l=(t(205),function(){function e(e,n,t,l){this.linkHelper=e,this.sitesProvider=n,this.competencyProvider=t,this.name="AddonCompetency:learningPlan",this.priority=900,this.type=i.a.TYPE_NEW_PAGE,this.participantsNavEnabledCache={},this.usersNavEnabledCache={},l.on(o.a.LOGOUT,this.clearUsersNavCache.bind(this)),l.on(r.a.PROFILE_REFRESHED,this.clearUsersNavCache.bind(this))}return e.prototype.clearUsersNavCache=function(){this.participantsNavEnabledCache={},this.usersNavEnabledCache={}},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForUser=function(e,n,t,i){var o=this;if(n){var r=n+"."+e.id;return void 0!==this.participantsNavEnabledCache[r]?this.participantsNavEnabledCache[r]:this.competencyProvider.getCourseCompetencies(n,e.id).then(function(e){var n=e.competencies.length>0;return o.participantsNavEnabledCache[r]=n,n}).catch(function(e){return o.participantsNavEnabledCache[r]=!1,!1})}return void 0!==this.usersNavEnabledCache[e.id]?this.usersNavEnabledCache[e.id]:this.competencyProvider.getLearningPlans(e.id).then(function(n){var t=n.length>0;return o.usersNavEnabledCache[e.id]=t,t})},e.prototype.getDisplayData=function(e,n){var t=this;return n?{icon:"ribbon",title:"addon.competency.competencies",class:"addon-competency-handler",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonCompetencyCourseCompetenciesPage",{courseId:o,userId:i.id})}}:{icon:"map",title:"addon.competency.learningplans",class:"addon-competency-handler",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonCompetencyPlanListPage",{userId:i.id})}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(354);var i=function(){function e(e){this.filesProvider=e,this.name="AddonFiles",this.priority=400}return e.prototype.isEnabled=function(){return this.filesProvider.isPluginEnabled()},e.prototype.getDisplayData=function(){return{icon:"folder",title:"addon.files.files",page:"AddonFilesListPage",class:"addon-files-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(147),o=t(13),r=function(){function e(e,n,t,r,l,s,a,u,c,d){var f=this;this.messagesProvider=e,this.sitesProvider=n,this.appProvider=r,this.localNotificationsProvider=l,this.textUtils=s,this.pushNotificationsProvider=a,this.emulatorHelper=d,this.name="AddonMessages",this.priority=800,this.handler={icon:"chatbubbles",title:"addon.messages.messages",page:"AddonMessagesIndexPage",class:"addon-messages-handler",showBadge:!0,badge:"",loading:!0},this.unreadCount=0,this.contactRequestsCount=0,this.orMore=!1,t.on(i.a.UNREAD_CONVERSATION_COUNTS_EVENT,function(e){f.unreadCount=e.favourites+e.individual+e.group,f.orMore=e.orMore,f.updateBadge(e.siteId)}),t.on(i.a.CONTACT_REQUESTS_COUNT_EVENT,function(e){f.contactRequestsCount=e.count,f.updateBadge(e.siteId)}),t.on(o.a.LOGOUT,function(e){f.unreadCount=0,f.contactRequestsCount=0,f.orMore=!1,f.handler.badge="",f.handler.loading=!0}),c.on("receive").subscribe(function(e){u.isFalseOrZero(e.notif)&&f.sitesProvider.isCurrentSite(e.site)&&f.refreshBadge(e.site)}),c.registerCounterHandler("AddonMessages")}return e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.getDisplayData=function(){return this.handler.page=this.messagesProvider.isGroupMessagingEnabled()?"AddonMessagesGroupConversationsPage":"AddonMessagesIndexPage",this.handler.loading&&this.refreshBadge(),this.handler},e.prototype.refreshBadge=function(e,n){var t=this;if(e=e||this.sitesProvider.getCurrentSiteId()){var i=[];return i.push(this.messagesProvider.refreshUnreadConversationCounts(e).catch(function(){t.unreadCount=0,t.orMore=!1})),!n&&this.messagesProvider.isGroupMessagingEnabled()&&i.push(this.messagesProvider.refreshContactRequestsCount(e).catch(function(){t.contactRequestsCount=0})),Promise.all(i).finally(function(){t.updateBadge(e),t.handler.loading=!1})}},e.prototype.updateBadge=function(e){var n=this.unreadCount+(this.contactRequestsCount||0);this.handler.badge=n>0?n+(this.orMore?"+":""):"",this.pushNotificationsProvider.updateAddonCounter("AddonMessages",n,e)},e.prototype.execute=function(e){return this.sitesProvider.isCurrentSite(e)&&this.refreshBadge(),this.appProvider.isDesktop()&&this.localNotificationsProvider.isAvailable()&&this.emulatorHelper.checkNewNotifications(i.a.PUSH_SIMULATION_COMPONENT,this.fetchMessages.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve()},e.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:this.messagesProvider.isGroupMessagingEnabled()||this.messagesProvider.isMessageCountEnabled()?3e5:6e5},e.prototype.isSync=function(){return!!this.appProvider.isDesktop()||!this.messagesProvider.isMessageCountEnabled()&&!this.messagesProvider.isGroupMessagingEnabled()},e.prototype.canManualSync=function(){return!0},e.prototype.fetchMessages=function(e){return this.messagesProvider.getUnreadReceivedMessages(!0,!1,!0,e).then(function(e){return e.messages})},e.prototype.getTitleAndText=function(e){var n={title:e.userfromfullname};return this.textUtils.formatText(e.text,!0,!0).catch(function(){return e.text}).then(function(e){return n.text=e,n})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(100),o=(t(147),function(){function e(e,n,t){this.linkHelper=e,this.sitesProvider=n,this.messagesProvider=t,this.name="AddonMessages:sendMessage",this.priority=1e3,this.type=i.a.TYPE_COMMUNICATION}return e.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){return e.id!=this.sitesProvider.getCurrentSiteUserId()},e.prototype.getDisplayData=function(e,n){var t=this;return{icon:"send",title:"addon.messages.message",class:"addon-messages-send-message-handler",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation();t.linkHelper.goInSite(n,"AddonMessagesDiscussionPage",{showKeyboard:!0,userId:i.id})}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(147),function(e){function n(n,t){var i=e.call(this)||this;return i.linkHelper=n,i.messagesProvider=t,i.name="AddonMessagesContactRequestLinkHandler",i.pattern=/\/message\/pendingcontactrequests\.php/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.linkHelper.goInSite(n,"AddonMessagesContactsPage",{},e)}}]},n.prototype.isEnabled=function(e,n,t,i){var o=this;return this.messagesProvider.isPluginEnabled(e).then(function(e){return!!e&&o.messagesProvider.isGroupMessagingEnabled()})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(147),function(e){function n(n,t,i){var o=e.call(this)||this;return o.linkHelper=n,o.messagesProvider=t,o.sitesProvider=i,o.name="AddonMessagesDiscussionLinkHandler",o.pattern=/\/message\/index\.php.*([\?\&](id|user1|user2)=\d+)/,o}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i={userId:parseInt(t.id||t.user2,10)};o.linkHelper.goInSite(n,"AddonMessagesDiscussionPage",i,e)}}]},n.prototype.isEnabled=function(e,n,t,i){var o=this;return this.messagesProvider.isPluginEnabled(e).then(function(n){return!!n&&((void 0!==t.id||void 0!==t.user2)&&(void 0===t.user1||o.sitesProvider.getSite(e).then(function(e){return parseInt(t.user1,10)==e.getUserId()})))})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(147),function(e){function n(n,t){var i=e.call(this)||this;return i.linkHelper=n,i.messagesProvider=t,i.name="AddonMessagesIndexLinkHandler",i.pattern=/\/message\/index\.php((?![\?\&](id|user1|user2)=\d+).)*$/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var t="AddonMessagesIndexPage";o.messagesProvider.isGroupMessagingEnabled()&&(t="AddonMessagesGroupConversationsPage"),o.linkHelper.goInSite(n,t,void 0,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return this.messagesProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(453);var i=function(){function e(e){this.messagesSync=e,this.name="AddonMessagesSyncCronHandler"}return e.prototype.execute=function(e){return this.messagesSync.syncAllDiscussions(e)},e.prototype.getInterval=function(){return 3e5},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(147);var i=function(){function e(e){this.messagesProvider=e,this.name="AddonMessages",this.priority=600}return e.prototype.isEnabled=function(){return this.messagesProvider.isMessagePreferencesEnabled()},e.prototype.getDisplayData=function(){return{icon:"chatbubbles",title:"addon.messages.messagepreferences",page:"AddonMessagesSettingsPage",class:"addon-messages-settings-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(72);var i=t(668),o=t(40),r=function(){function e(e,n){this.courseProvider=e,this.assignProvider=n,this.name="AddonModAssign",this.modName="assign",this.supportedFeatures=(t={},t[o.a.FEATURE_GROUPS]=!0,t[o.a.FEATURE_GROUPINGS]=!0,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!0,t[o.a.FEATURE_GRADE_OUTCOMES]=!0,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t[o.a.FEATURE_ADVANCED_GRADING]=!0,t[o.a.FEATURE_PLAGIARISM]=!0,t[o.a.FEATURE_COMMENT]=!0,t);var t}return e.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_assign-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModAssignIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(72),l=(t(160),t(162),t(164),function(e){function n(n,t,i,o,l,s,a,u,c,d,f,p,h,m,_,g){var v=e.call(this,n,t,i,o,l,s,a)||this;return v.assignProvider=u,v.textUtils=c,v.feedbackDelegate=d,v.submissionDelegate=f,v.courseHelper=p,v.groupsProvider=h,v.gradesHelper=m,v.userProvider=_,v.assignHelper=g,v.name="AddonModAssign",v.modName="assign",v.component=r.a.COMPONENT,v.updatesNames=/^configuration$|^.*files$|^submissions$|^grades$|^gradeitems$|^outcomes$|^comments$/,v}return Object(i.__extends)(n,e),n.prototype.canUseCheckUpdates=function(e,n){var t=this;return this.assignProvider.getAssignment(n,e.id).then(function(e){return t.assignProvider.getSubmissions(e.id).then(function(n){return!n.canviewsubmissions&&t.assignProvider.getSubmissionStatus(e.id).then(function(){return!0})})}).catch(function(){return!1})},n.prototype.getFiles=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.assignProvider.getAssignment(n,e.id,i).then(function(t){var r=t.introattachments||[];return r=r.concat(o.getIntroFilesFromInstance(e,t)),o.assignProvider.getSubmissions(t.id,i).then(function(e){var l=t.blindmarking&&!t.revealidentities;if(e.canviewsubmissions)return o.assignProvider.getSubmissionsUserData(e.submissions,n,t.id,l,void 0,i).then(function(e){var n=[];return e.forEach(function(e){n.push(o.getSubmissionFiles(t,e.submitid,!!e.blindid,i).then(function(e){r=r.concat(e)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),Promise.all(n).then(function(){return r})});var s=o.sitesProvider.getCurrentSiteUserId();return o.getSubmissionFiles(t,s,l,i).then(function(e){return r=r.concat(e)})})}).catch(function(){return[]})},n.prototype.getSubmissionFiles=function(e,n,t,i){var o=this;return this.assignProvider.getSubmissionStatus(e.id,n,t,!0,!1,i).then(function(n){var t=[];if(n.lastattempt){var r=o.assignProvider.getSubmissionObjectFromAttempt(e,n.lastattempt);r&&r.plugins&&r.plugins.forEach(function(n){t.push(o.submissionDelegate.getPluginFiles(e,r,n,i))})}return n.feedback&&n.feedback.plugins&&n.feedback.plugins.forEach(function(r){t.push(o.feedbackDelegate.getPluginFiles(e,n,r,i))}),Promise.all(t)}).then(function(e){var n=[];return e.forEach(function(e){n=n.concat(e)}),n})},n.prototype.invalidateContent=function(e,n){return this.assignProvider.invalidateContent(e,n)},n.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchAssign.bind(this))},n.prototype.prefetchAssign=function(e,n,t,i){var o=this,r=this.sitesProvider.getCurrentSiteUserId(),l=[];return i=i||this.sitesProvider.getCurrentSiteId(),l.push(this.assignProvider.getAssignment(n,e.id,i).then(function(l){var s=[];return l.blindmarking&&!l.revealidentities&&s.push(o.assignProvider.getAssignmentUserMappings(l.id,void 0,i).catch(function(){})),s.push(o.prefetchSubmissions(l,n,e.id,r,i)),s.push(o.courseHelper.getModuleCourseIdByInstance(l.id,"assign",i)),s.push(o.getFiles(e,n,t,i).then(function(n){return o.filepoolProvider.addFilesToQueue(i,n,o.component,e.id)})),Promise.all(s)})),Promise.all(l)},n.prototype.prefetchSubmissions=function(e,n,t,i,o){var r=this;return this.assignProvider.getSubmissions(e.id,o).then(function(l){var s=[];return l.canviewsubmissions?(s.push(r.assignProvider.getSubmissionsUserData(l.submissions,n,e.id,e.blindmarking&&!e.revealidentities,void 0,o).then(function(s){var a=[];return s.forEach(function(i){a.push(r.assignProvider.getSubmissionStatus(e.id,i.submitid,!!i.blindid,!0,!1,o).then(function(l){return r.prefetchSubmission(e,n,t,l,i.submitid,o)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),e.markingworkflow||a.push(r.assignProvider.getAssignmentGrades(e.id,o)),l.submissions&&l.submissions.find(function(e){return e.submitid==i})||a.push(r.assignProvider.getSubmissionStatus(e.id,i,!1,!0,!1,o).then(function(l){return r.prefetchSubmission(e,n,t,l,i,o)})),Promise.all(a)})),s.push(r.assignHelper.getParticipants(e,o).then(function(e){e.forEach(function(e){e.profileimageurl&&r.filepoolProvider.addToQueueByUrl(o,e.profileimageurl)})}).catch(function(){}))):s.push(r.assignProvider.getSubmissionStatus(e.id,i,!1,!0,!1,o).then(function(l){return r.prefetchSubmission(e,n,t,l,i,o)}).catch(function(e){if("nopermission"!=e.errorcode)return Promise.reject(e)})),s.push(r.groupsProvider.activityHasGroups(e.cmid)),s.push(r.groupsProvider.getActivityAllowedGroups(e.cmid,void 0,o)),Promise.all(s)})},n.prototype.prefetchSubmission=function(e,n,t,i,o,r){var l=this,s=[],a=e.blindmarking&&!e.revealidentities,u=[];if(i.lastattempt){var c=this.assignProvider.getSubmissionObjectFromAttempt(e,i.lastattempt);!a&&i.lastattempt.submissiongroupmemberswhoneedtosubmit&&(u=u.concat(i.lastattempt.submissiongroupmemberswhoneedtosubmit)),c&&c.id&&(c.plugins&&c.plugins.forEach(function(n){s.push(l.submissionDelegate.prefetch(e,c,n,r))}),c.userid&&u.push(c.userid))}return i.feedback&&(i.feedback.grade&&i.feedback.grade.grader&&u.push(i.feedback.grade.grader),o&&s.push(this.gradesHelper.getGradeModuleItems(n,t,o,void 0,r)),i.feedback.plugins&&i.feedback.plugins.forEach(function(n){s.push(l.feedbackDelegate.prefetch(e,i,n,r))})),s.push(this.userProvider.prefetchProfiles(u,n,r)),Promise.all(s)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(339);var i=function(){function e(e){this.assignSync=e,this.name="AddonModAssignSyncCronHandler"}return e.prototype.execute=function(e){return this.assignSync.syncAllAssignments(e)},e.prototype.getInterval=function(){return this.assignSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModAssign","assign")||this;return t.name="AddonModAssignIndexLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(72),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModAssign","assign")||this;return o.assignProvider=i,o.name="AddonModAssignListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1068),t(1070),t(1071);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1069),t(576),t(164);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(576),o=function(){function e(e){this.commentsProvider=e,this.name="AddonModAssignSubmissionCommentsHandler",this.type="comments"}return e.prototype.canEditOffline=function(e,n,t){return!0},e.prototype.getComponent=function(e,n,t){return t?void 0:i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){return!0},e.prototype.prefetch=function(e,n,t,i){return this.commentsProvider.getComments("module",e.cmid,"assignsubmission_comments",n.id,"submission_comments",0,i).catch(function(){})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(578),t(579),t(164);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1072),t(580),t(164);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(72),t(122),t(160);var i=t(580),o=function(){function e(e,n,t,i,o,r){this.sitesProvider=e,this.wsProvider=n,this.textUtils=t,this.assignProvider=i,this.assignOfflineProvider=o,this.assignHelper=r,this.name="AddonModAssignSubmissionOnlineTextHandler",this.type="onlinetext"}return e.prototype.canEditOffline=function(e,n,t){return!1},e.prototype.copySubmissionData=function(e,n,t,i,o){var r=this.assignProvider.getSubmissionPluginText(n,!0),l=this.assignProvider.getSubmissionPluginAttachments(n);return(l.length?this.assignHelper.uploadFiles(e.id,l,o):Promise.resolve(0)).then(function(e){t.onlinetext_editor={text:r,format:1,itemid:e}})},e.prototype.getComponent=function(e,n,t){return i.a},e.prototype.getPluginFiles=function(e,n,t,i){return this.assignProvider.getSubmissionPluginAttachments(t)},e.prototype.getSizeForCopy=function(e,n){var t=this,i=this.assignProvider.getSubmissionPluginText(n,!0),o=this.assignProvider.getSubmissionPluginAttachments(n),r=[],l=i.length;return o.length?(o.forEach(function(e){r.push(t.wsProvider.getRemoteFileSize(e.fileurl).then(function(e){if(-1==e)return Promise.reject(null);l+=e}))}),Promise.all(r).then(function(){return l})):l},e.prototype.getSizeForEdit=function(e,n,t,i){return this.assignProvider.getSubmissionPluginText(t,!0).length},e.prototype.getTextToSubmit=function(e,n){return this.textUtils.restorePluginfileUrls(n.onlinetext_editor_text,e.fileareas&&e.fileareas[0]?e.fileareas[0].files:[])},e.prototype.hasDataChanged=function(e,n,t,i){var o=this;return this.assignOfflineProvider.getSubmission(e.id,n.userid).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.onlinetext_editor?e.plugindata.onlinetext_editor.text:t.editorfields&&t.editorfields[0]?t.editorfields[0].text:""}).then(function(e){return e!=o.getTextToSubmit(t,i)})},e.prototype.isEnabled=function(){return!0},e.prototype.isEnabledForEdit=function(){var e=this.sitesProvider.getCurrentSite();return e.isVersionGreaterEqualThan("3.1.1")||e.checkIfAppUsesLocalMobile()},e.prototype.prepareSubmissionData=function(e,n,t,i,o,r,l,s){var a=this.getTextToSubmit(t,i);a=this.textUtils.formatHtmlLines(a),o.onlinetext_editor={text:a,format:1,itemid:0}},e.prototype.prepareSyncData=function(e,n,t,i,o,r){var l=i&&i.plugindata&&i.plugindata.onlinetext_editor;l&&(o.onlinetext_editor=l)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1074),t(1075),t(1077);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(581),t(582),t(162);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1076),t(584),t(162);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(72);var i=t(584),o=function(){function e(e){this.assignProvider=e,this.name="AddonModAssignFeedbackEditPdfHandler",this.type="editpdf"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getPluginFiles=function(e,n,t,i){return this.assignProvider.getSubmissionPluginAttachments(t)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1078),t(585),t(162);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(72);var i=t(585),o=function(){function e(e){this.assignProvider=e,this.name="AddonModAssignFeedbackFileHandler",this.type="file"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getPluginFiles=function(e,n,t,i){return this.assignProvider.getSubmissionPluginAttachments(t)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(234);var i=t(455),o=t(40),r=function(){function e(e,n){this.bookProvider=e,this.courseProvider=n,this.name="AddonModBook",this.modName="book",this.supportedFeatures=(t={},t[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,t[o.a.FEATURE_GROUPS]=!1,t[o.a.FEATURE_GROUPINGS]=!1,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!1,t[o.a.FEATURE_GRADE_OUTCOMES]=!1,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_book-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModBookIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n,t){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModBook","book")||this;return t.name="AddonModBookLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(234),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModBook","book")||this;return o.bookProvider=i,o.name="AddonModBookListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(e,n,t,i){return this.bookProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModChat","chat")||this;return t.name="AddonModChatLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModChat","chat")||this;return i.name="AddonModChatListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(456),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModChat",this.modName="chat",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!1,n[o.a.FEATURE_GRADE_OUTCOMES]=!0,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_chat-handler",action:function(e,n,t,i,o){n.push("AddonModChatIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(457),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModChoice",this.modName="choice",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!1,n[o.a.FEATURE_GRADE_OUTCOMES]=!1,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_choice-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModChoiceIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModChoice","choice")||this;return t.name="AddonModChoiceLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModChoice","choice")||this;return i.name="AddonModChoiceListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(258),l=(t(260),function(e){function n(n,t,i,o,l,s,a,u,c,d){var f=e.call(this,n,t,i,o,l,s,a)||this;return f.choiceProvider=u,f.syncProvider=c,f.userProvider=d,f.name="AddonModChoice",f.modName="choice",f.component=r.a.COMPONENT,f.updatesNames=/^configuration$|^.*files$|^answers$/,f}return Object(i.__extends)(n,e),n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchChoice.bind(this))},n.prototype.prefetchChoice=function(e,n,t,i){var o=this;return this.choiceProvider.getChoice(n,e.id,i).then(function(t){var l=[];l.push(o.choiceProvider.getOptions(t.id,i)),l.push(o.choiceProvider.getResults(t.id,i).then(function(e){var t=[];return e.forEach(function(e){e.userresponses.forEach(function(e){e.userid&&t.push(o.userProvider.getProfile(e.userid,n,!1,i)),e.profileimageurl&&t.push(o.filepoolProvider.addToQueueByUrl(i,e.profileimageurl).catch(function(){}))})}),Promise.all(t)}));var s=o.getIntroFilesFromInstance(e,t);return l.push(o.filepoolProvider.addFilesToQueue(i,s,r.a.COMPONENT,e.id)),Promise.all(l)})},n.prototype.getIntroFiles=function(e,n){var t=this;return this.choiceProvider.getChoice(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.choiceProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){return this.choiceProvider.invalidateChoiceData(n)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(260);var i=function(){function e(e){this.choiceSync=e,this.name="AddonModChoiceSyncCronHandler"}return e.prototype.execute=function(e){return this.choiceSync.syncAllChoices(e)},e.prototype.getInterval=function(){return this.choiceSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(462),o=(t(135),t(40)),r=function(){function e(e,n){this.courseProvider=e,this.feedbackProvider=n,this.name="AddonModFeedback",this.modName="feedback",this.supportedFeatures=(t={},t[o.a.FEATURE_GROUPS]=!0,t[o.a.FEATURE_GROUPINGS]=!0,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!1,t[o.a.FEATURE_GRADE_OUTCOMES]=!1,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_feedback-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModFeedbackIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModFeedback","feedback")||this;return t.name="AddonModFeedbackLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(135),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.feedbackProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModFeedbackAnalysisLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModFeedback",r.pattern=/\/mod\/feedback\/analysis\.php.*([\&\?]id=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading();o.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return o.linkHelper.goInSite(n,"AddonModFeedbackIndexPage",{module:t,courseId:t.course,tab:"analysis"},e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(135),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.feedbackProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModFeedbackShowEntriesLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModFeedback",r.pattern=/\/mod\/feedback\/show_entries\.php.*([\?\&](id|showcompleted)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading();o.courseProvider.getModuleBasicInfo(t.id,e).then(function(i){var r;return void 0===t.showcompleted?(r={moduleId:i.id,module:i,courseId:i.course},o.linkHelper.goInSite(n,"AddonModFeedbackRespondentsPage",r,e)):o.feedbackProvider.getAttempt(i.instance,t.showcompleted,e).then(function(t){return r={moduleId:i.id,attempt:t,attemptId:t.id,feedbackId:i.instance,courseId:i.course},o.linkHelper.goInSite(n,"AddonModFeedbackAttemptPage",r,e)})}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(135),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.feedbackProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModFeedbackShowNonRespondentsLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModFeedback",r.pattern=/\/mod\/feedback\/show_nonrespondents\.php.*([\?\&](id)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading();o.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return o.linkHelper.goInSite(n,"AddonModFeedbackNonRespondentsPage",{module:t,moduleId:t.id,courseId:t.course},e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(135),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.feedbackProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModFeedbackCompleteLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModFeedback",r.pattern=/\/mod\/feedback\/complete\.php.*([\?\&](id|gopage)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading();o.courseProvider.getModuleBasicInfo(t.id,e).then(function(i){var r={module:i,moduleId:i.id,courseId:i.course};return void 0===t.gopage&&(r.page=parseInt(t.gopage,10)),o.linkHelper.goInSite(n,"AddonModFeedbackFormPage",r,e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.id&&this.feedbackProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(135),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.feedbackProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModFeedbackPrintLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModFeedback",r.pattern=/\/mod\/feedback\/print\.php.*([\?\&](id)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading();o.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return o.linkHelper.goInSite(n,"AddonModFeedbackFormPage",{module:t,moduleId:t.id,courseId:t.course,preview:!0},e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.id&&this.feedbackProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(135),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModFeedback","feedback")||this;return o.feedbackProvider=i,o.name="AddonModFeedbackListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(135),l=(t(278),function(e){function n(n,t,i,o,l,s,a,u,c,d,f,p){var h=e.call(this,n,t,i,o,l,s,a)||this;return h.feedbackProvider=u,h.userProvider=c,h.feedbackHelper=d,h.timeUtils=f,h.groupsProvider=p,h.name="AddonModFeedback",h.modName="feedback",h.component=r.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^attemptsfinished|^attemptsunfinished$/,h}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e,n,t){var i=this,o=[];return this.feedbackProvider.getFeedback(n,e.id).then(function(n){return o=n.pageaftersubmitfiles||[],o=o.concat(i.getIntroFilesFromInstance(e,n)),i.feedbackProvider.getItems(n.id)}).then(function(e){return e.items.forEach(function(e){o=o.concat(e.itemfiles)}),o}).catch(function(){return o})},n.prototype.getIntroFiles=function(e,n){var t=this;return this.feedbackProvider.getFeedback(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.feedbackProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){return this.feedbackProvider.invalidateFeedbackData(n)},n.prototype.isDownloadable=function(e,n){var t=this;return this.feedbackProvider.getFeedback(n,e.id,void 0,!0).then(function(e){var n=t.timeUtils.timestamp();return!(e.timeopen&&e.timeopen>n)&&(!(e.timeclose&&e.timeclose<n)&&t.feedbackProvider.getFeedbackAccessInformation(e.id).then(function(e){return e.isopen}))})},n.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchFeedback.bind(this))},n.prototype.prefetchFeedback=function(e,n,t,i){var o=this;return this.feedbackProvider.getFeedback(n,e.id).then(function(t){var r=[];return r.push(o.getFiles(e,n).then(function(n){return o.filepoolProvider.addFilesToQueue(i,n,o.component,e.id)})),r.push(o.feedbackProvider.getFeedbackAccessInformation(t.id,!1,!0,i).then(function(e){var r=[];return(e.canedititems||e.canviewreports)&&(r.push(o.feedbackProvider.getAnalysis(t.id,void 0,i)),r.push(o.groupsProvider.getActivityGroupInfo(t.coursemodule,!0,void 0,i).then(function(r){var l=[],s=[];return r.groups&&0!=r.groups.length||(r.groups=[{id:0}]),r.groups.forEach(function(n){l.push(o.feedbackProvider.getAnalysis(t.id,n.id,i)),l.push(o.feedbackProvider.getAllResponsesAnalysis(t.id,n.id,i).then(function(e){e.attempts.forEach(function(e){s.push(e.userid)})})),e.isanonymous||l.push(o.feedbackProvider.getAllNonRespondents(t.id,n.id,i).then(function(e){e.users.forEach(function(e){s.push(e.userid)})}))}),Promise.all(l).then(function(){return o.userProvider.prefetchProfiles(s,n,i)})}))),r.push(o.feedbackProvider.getItems(t.id,i)),e.cancomplete&&e.cansubmit&&!e.isempty&&r.push(o.feedbackProvider.processPageOnline(t.id,0,{},void 0,i).finally(function(){var e=[];return e.push(o.feedbackProvider.getCurrentValues(t.id,!1,!0,i)),e.push(o.feedbackProvider.getResumePage(t.id,!1,!0,i)),Promise.all(e)})),Promise.all(r)})),Promise.all(r)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(286);var i=function(){function e(e){this.feedbackSync=e,this.name="AddonModFeedbackSyncCronHandler"}return e.prototype.execute=function(e){return this.feedbackSync.syncAllFeedbacks(e)},e.prototype.getInterval=function(){return this.feedbackSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(463),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModFolder",this.modName="folder",this.supportedFeatures=(n={},n[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,n[o.a.FEATURE_GROUPS]=!1,n[o.a.FEATURE_GROUPINGS]=!1,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!1,n[o.a.FEATURE_GRADE_OUTCOMES]=!1,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_folder-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModFolderIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(273)),r=t(294),l=function(e){function n(n,t,i,o,l,s,a,u){var c=e.call(this,n,t,i,o,l,s,a)||this;return c.folderProvider=u,c.name="AddonModFolder",c.modName="folder",c.component=r.a.COMPONENT,c}return Object(i.__extends)(n,e),n.prototype.downloadOrPrefetch=function(n,t,i,o){var r=[];return r.push(e.prototype.downloadOrPrefetch.call(this,n,t,i)),this.folderProvider.isGetFolderWSAvailable()&&r.push(this.folderProvider.getFolder(t,n.id)),Promise.all(r)},n.prototype.invalidateContent=function(e,n){return this.folderProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.folderProvider.invalidateFolderData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModFolder","folder")||this;return t.name="AddonModFolderLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModFolder","folder")||this;return i.name="AddonModFolderListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModFolderPluginFileHandler",this.component="mod_folder"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_folder/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_folder/content/0/"},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4);var i=t(166),o=t(464),r=t(40),l=function(){function e(e,n,t,i,o){this.courseProvider=e,this.forumProvider=n,this.translate=t,this.eventsProvider=i,this.sitesProvider=o,this.name="AddonModForum",this.modName="forum",this.supportedFeatures=(l={},l[r.a.FEATURE_GROUPS]=!0,l[r.a.FEATURE_GROUPINGS]=!0,l[r.a.FEATURE_MOD_INTRO]=!0,l[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,l[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,l[r.a.FEATURE_GRADE_HAS_GRADE]=!0,l[r.a.FEATURE_GRADE_OUTCOMES]=!0,l[r.a.FEATURE_BACKUP_MOODLE2]=!0,l[r.a.FEATURE_SHOW_DESCRIPTION]=!0,l[r.a.FEATURE_RATE]=!0,l[r.a.FEATURE_PLAGIARISM]=!0,l);var l}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){var o=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_forum-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModForumIndexPage",{module:t,courseId:i},o)}};if(void 0!==e.afterlink){r.extraBadgeColor="";var l=/>(\d+)[^<]+/.exec(e.afterlink);r.extraBadge=l?this.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:l[1]}):""}else this.updateExtraBadge(r,n,e.id);var s=this.eventsProvider.on(i.a.MARK_READ_EVENT,function(t){t.courseId==n&&t.moduleId==e.id&&o.updateExtraBadge(r,t.courseId,t.moduleId,t.siteId)},this.sitesProvider.getCurrentSiteId());return r.onDestroy=function(){s&&s.off()},r},e.prototype.getMainComponent=function(e,n){return o.a},e.prototype.displayRefresherInSingleActivity=function(){return!1},e.prototype.updateExtraBadge=function(e,n,t,i){var o=this;(i=i||this.sitesProvider.getCurrentSiteId())&&(e.extraBadge=this.translate.instant("core.loading"),e.extraBadgeColor="light",this.forumProvider.invalidateForumData(n).finally(function(){o.forumProvider.getForum(n,t,i).then(function(n){e.extraBadgeColor="",e.extraBadge=n.unreadpostscount?o.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:n.unreadpostscount}):""}).catch(function(){e.extraBadgeColor="",e.extraBadge=""})}))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(253);var i=function(){function e(e){this.forumSync=e,this.name="AddonModForumSyncCronHandler"}return e.prototype.execute=function(e){return this.forumSync.syncAllForums(e)},e.prototype.getInterval=function(){return this.forumSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=(t(166),function(e){function n(n,t){var i=e.call(this,n,"AddonModForum","forum")||this;return i.forumProvider=t,i.name="AddonModForumIndexLinkHandler",i}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(e,n,t,i){return!0},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=function(e){function n(n,t){var i=e.call(this)||this;return i.domUtils=n,i.linkHelper=t,i.name="AddonModForumDiscussionLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModForum",i.pattern=/\/mod\/forum\/discuss\.php.*([\&\?]d=\d+)/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var r={courseId:i||parseInt(t.courseid,10)||parseInt(t.cid,10),discussionId:parseInt(t.d,10)};o.linkHelper.goInSite(n,"AddonModForumDiscussionPage",r,e)}}]},n.prototype.isEnabled=function(e,n,t,i){return!0},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModForum","forum")||this;return i.name="AddonModForumListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(466),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModGlossary",this.modName="glossary",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!1,n[o.a.FEATURE_GROUPINGS]=!1,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!0,n[o.a.FEATURE_GRADE_OUTCOMES]=!0,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n[o.a.FEATURE_RATE]=!0,n[o.a.FEATURE_PLAGIARISM]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_glossary-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModGlossaryIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e.prototype.displayRefresherInSingleActivity=function(){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(192),l=function(e){function n(n,t,i,o,l,s,a,u,c){var d=e.call(this,n,t,i,o,l,s,a)||this;return d.userProvider=u,d.glossaryProvider=c,d.name="AddonModGlossary",d.modName="glossary",d.component=r.a.COMPONENT,d.updatesNames=/^configuration$|^.*files$|^entries$/,d}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e,n,t){var i=this;return this.glossaryProvider.getGlossary(n,e.id).then(function(n){return i.glossaryProvider.fetchAllEntries(i.glossaryProvider.getEntriesByLetter,[n.id,"ALL"]).then(function(t){return i.getFilesFromGlossaryAndEntries(e,n,t)})}).catch(function(){return[]})},n.prototype.getFilesFromGlossaryAndEntries=function(e,n,t){var i=this,o=this.getIntroFilesFromInstance(e,n),r=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return t.forEach(function(e){o=o.concat(e.attachments),r&&e.definitioninlinefiles&&e.definitioninlinefiles.length?o=o.concat(e.definitioninlinefiles):e.definition&&!r&&(o=o.concat(i.domUtils.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.definition)))}),o},n.prototype.invalidateContent=function(e,n){return this.glossaryProvider.invalidateContent(e,n)},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchGlossary.bind(this))},n.prototype.prefetchGlossary=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.glossaryProvider.getGlossary(n,e.id,i).then(function(t){var l=[];t.browsemodes.forEach(function(e){switch(e){case"letter":break;case"cat":l.push(o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByCategory,[t.id,r.a.SHOW_ALL_CATERGORIES],!1,i));break;case"date":l.push(o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByDate,[t.id,"CREATION","DESC"],!1,i)),l.push(o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByDate,[t.id,"UPDATE","DESC"],!1,i));break;case"author":l.push(o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByAuthor,[t.id,"ALL","LASTNAME","ASC"],!1,i))}}),l.push(o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByLetter,[t.id,"ALL"],!1,i).then(function(r){var l=[],s=[];r.forEach(function(e){l.push(o.glossaryProvider.getEntry(e.id,i)),s.push(e.userid)}),l.push(o.userProvider.prefetchProfiles(s,n,i));var a=o.getFilesFromGlossaryAndEntries(e,t,r);return l.push(o.filepoolProvider.addFilesToQueue(i,a,o.component,e.id)),Promise.all(l)}))})},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(295);var i=function(){function e(e){this.glossarySync=e,this.name="AddonModGlossarySyncCronHandler"}return e.prototype.execute=function(e){return this.glossarySync.syncAllGlossaries(e)},e.prototype.getInterval=function(){return this.glossarySync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=(t(192),function(e){function n(n,t){var i=e.call(this,n,"AddonModGlossary","glossary")||this;return i.glossaryProvider=t,i.name="AddonModGlossaryIndexLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(192),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.domUtils=n,r.linkHelper=t,r.glossaryProvider=i,r.courseHelper=o,r.name="AddonModGlossaryEntryLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModGlossary",r.pattern=/\/mod\/glossary\/showentry\.php.*([\&\?]eid=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var r=o.domUtils.showModalLoading(),l=parseInt(t.eid,10);return(i?Promise.resolve(i):o.glossaryProvider.getEntry(l,e).catch(function(e){return o.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0),Promise.reject(null)}).then(function(n){return o.courseHelper.getModuleCourseIdByInstance(n.glossaryid,"glossary",e)})).then(function(t){o.linkHelper.goInSite(n,"AddonModGlossaryEntryPage",{courseId:t,entryId:l},e)}).finally(function(){r.dismiss()})}}]},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModGlossary","glossary")||this;return i.name="AddonModGlossaryListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(467),o=(t(235),t(40)),r=function(){function e(e,n){this.courseProvider=e,this.imscpProvider=n,this.name="AddonModImscp",this.modName="imscp",this.supportedFeatures=(t={},t[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,t[o.a.FEATURE_GROUPS]=!1,t[o.a.FEATURE_GROUPINGS]=!1,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!1,t[o.a.FEATURE_GRADE_OUTCOMES]=!1,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_imscp-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModImscpIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModImscp","imscp")||this;return t.name="AddonModImscpLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(235),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModImscp","imscp")||this;return o.imscpProvider=i,o.name="AddonModImscpListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModImscpPluginFileHandler",this.component="mod_imscp"}return e.prototype.getComponentRevisionRegExp=function(e){return"content"==e[2]?new RegExp("/mod_imscp/content/([0-9]+)/"):"backup"==e[2]?new RegExp("/mod_imscp/backup/([0-9]+)/"):null},e.prototype.getComponentRevisionReplace=function(e){return"/mod_imscp/"+e[2]+"/0/"},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(468),o=(t(143),t(40)),r=function(){function e(e,n){this.courseProvider=e,this.lessonProvider=n,this.name="AddonModLesson",this.modName="lesson",this.supportedFeatures=(t={},t[o.a.FEATURE_GROUPS]=!0,t[o.a.FEATURE_GROUPINGS]=!0,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!0,t[o.a.FEATURE_GRADE_OUTCOMES]=!0,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lesson-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModLessonIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(287);var i=function(){function e(e){this.lessonSync=e,this.name="AddonModLessonSyncCronHandler"}return e.prototype.execute=function(e){return this.lessonSync.syncAllLessons(e)},e.prototype.getInterval=function(){return this.lessonSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=(t(143),function(e){function n(n,t,i,o){var r=e.call(this,n,"AddonModLesson","lesson")||this;return r.lessonProvider=t,r.domUtils=i,r.courseProvider=o,r.name="AddonModLessonIndexLinkHandler",r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){t.userpassword?o.navigateToModuleWithPassword(parseInt(t.id,10),i,t.userpassword,e):o.courseHelper.navigateToModule(parseInt(t.id,10),e,i)}}]},n.prototype.isEnabled=function(e,n,t,i){return this.lessonProvider.isPluginEnabled()},n.prototype.navigateToModuleWithPassword=function(e,n,t,i){var o=this,r=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,i).then(function(r){return n=n||r.course,o.lessonProvider.storePassword(parseInt(r.instance,10),t,i).catch(function(){}).then(function(){return o.courseHelper.navigateToModule(e,i,n,r.section)})}).catch(function(){return o.courseHelper.navigateToModule(e,i,n)}).finally(function(){r.dismiss()})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(417),r=(t(143),function(e){function n(n,t,i,o,r,l){var s=e.call(this,n,t,i,"AddonModLesson","lesson")||this;return s.lessonProvider=o,s.courseProvider=r,s.linkHelper=l,s.name="AddonModLessonGradeLinkHandler",s.canReview=!0,s}return Object(i.__extends)(n,e),n.prototype.goToReview=function(e,n,t,i,o){var r,l=this,s=parseInt(n.id,10),a=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(s,i).then(function(e){return r=e,t=r.course||t||n.courseid||n.cid,l.lessonProvider.getAccessInformation(r.instance)}).then(function(e){if(e.canviewreports){var a={courseId:Number(t),lessonId:r.instance,userId:parseInt(n.userid,10)};l.linkHelper.goInSite(o,"AddonModLessonUserRetakePage",a,i)}else l.courseHelper.navigateToModule(s,i,t,r.section)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){a.dismiss()})},n.prototype.isEnabled=function(e,n,t,i){return this.lessonProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(143),function(e){function n(n,t,i,o,r){var l=e.call(this)||this;return l.domUtils=n,l.lessonProvider=t,l.courseHelper=i,l.linkHelper=o,l.courseProvider=r,l.name="AddonModLessonReportLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModLesson",l.pattern=/\/mod\/lesson\/report\.php.*([\&\?]id=\d+)/,l}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){t.action&&"reportoverview"!=t.action?"reportdetail"==t.action&&o.openUserRetake(parseInt(t.id,10),parseInt(t.userid,10),i,parseInt(t.try,10),e,n):o.openReportOverview(parseInt(t.id,10),i,parseInt(t.group,10),e,n)}}]},n.prototype.isEnabled=function(e,n,t,i){return!("reportdetail"==t.action&&!t.userid)&&this.lessonProvider.isPluginEnabled()},n.prototype.openReportOverview=function(e,n,t,i,o){var r=this,l=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,i).then(function(e){n=n||e.course;var l={module:e,courseId:Number(n),action:"report",group:isNaN(t)?null:t};r.linkHelper.goInSite(o,"AddonModLessonIndexPage",l,i)}).catch(function(e){r.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){l.dismiss()})},n.prototype.openUserRetake=function(e,n,t,i,o,r){var l=this,s=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,o).then(function(e){t=t||e.course;var s={lessonId:e.instance,courseId:Number(t),userId:n,retake:i||0};l.linkHelper.goInSite(r,"AddonModLessonUserRetakePage",s,o)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){s.dismiss()})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(143),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModLesson","lesson")||this;return o.lessonProvider=i,o.name="AddonModLessonListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var i=t(469),o=t(297),r=t(40),l=function(){function e(e,n,t,i,o,l,s){this.appProvider=e,this.courseProvider=n,this.domUtils=t,this.filepoolProvider=i,this.sitesProvider=o,this.ltiProvider=l,this.sanitizer=s,this.name="AddonModLti",this.modName="lti",this.supportedFeatures=(a={},a[r.a.FEATURE_GROUPS]=!1,a[r.a.FEATURE_GROUPINGS]=!1,a[r.a.FEATURE_MOD_INTRO]=!0,a[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,a[r.a.FEATURE_GRADE_HAS_GRADE]=!0,a[r.a.FEATURE_GRADE_OUTCOMES]=!0,a[r.a.FEATURE_BACKUP_MOODLE2]=!0,a[r.a.FEATURE_SHOW_DESCRIPTION]=!0,a);var a}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){var i=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lti-handler",action:function(e,n,t,i,o){n.push("AddonModLtiIndexPage",{module:t,courseId:i},o)},buttons:[{icon:"link",label:"addon.mod_lti.launchactivity",action:function(e,n,t,o){var r=i.domUtils.showModalLoading();i.ltiProvider.getLti(o,t.id).then(function(e){return i.ltiProvider.getLtiLaunchData(e.id).then(function(n){return i.ltiProvider.logView(e.id).then(function(){i.courseProvider.checkModuleCompletion(o,t.completiondata)}).catch(function(){}),i.ltiProvider.launch(n.endpoint,n.parameters)})}).catch(function(e){i.domUtils.showErrorModalDefault(e,"addon.mod_lti.errorgetlti",!0)}).finally(function(){r.dismiss()})}}]};return this.ltiProvider.getLti(n,e.id).then(function(n){var t=n.secureicon||n.icon;if(t){var l=i.sitesProvider.getCurrentSiteId();i.filepoolProvider.downloadUrl(l,t,!1,o.a.COMPONENT,e.id).then(function(){return i.filepoolProvider.getSrcByUrl(l,t,o.a.COMPONENT,e.id)}).then(function(e){r.icon=i.sanitizer.bypassSecurityTrustUrl(e)}).catch(function(){i.appProvider.isOnline()&&(r.icon=i.sanitizer.bypassSecurityTrustUrl(t))})}}).catch(function(){}),r},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModLti","lti")||this;return t.name="AddonModLtiLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModLti","lti")||this;return i.name="AddonModLtiListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(210);var i=t(470),o=t(40),r=function(){function e(e,n){this.courseProvider=e,this.pageProvider=n,this.name="AddonModPage",this.modName="page",this.supportedFeatures=(t={},t[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,t[o.a.FEATURE_GROUPS]=!1,t[o.a.FEATURE_GROUPINGS]=!1,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!1,t[o.a.FEATURE_GRADE_OUTCOMES]=!1,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return e.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_page-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModPageIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModPage","page")||this;return t.name="AddonModPageLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(210),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModPage","page")||this;return o.pageProvider=i,o.name="AddonModPageListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModPagePluginFileHandler",this.component="mod_page"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_page/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_page/content/0/"},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(471),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModQuiz",this.modName="quiz",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!0,n[o.a.FEATURE_GRADE_OUTCOMES]=!0,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n[o.a.FEATURE_CONTROLS_GRADE_VISIBILITY]=!0,n[o.a.FEATURE_USES_QUESTIONS]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_quiz-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModQuizIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(231);var i=function(){function e(e){this.quizSync=e,this.name="AddonModQuizSyncCronHandler"}return e.prototype.execute=function(e){return this.quizSync.syncAllQuizzes(e)},e.prototype.getInterval=function(){return this.quizSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=(t(151),function(e){function n(n,t){var i=e.call(this,n,"AddonModQuiz","quiz")||this;return i.quizProvider=t,i.name="AddonModQuizIndexLinkHandler",i}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(e,n,t,i){return this.quizProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(417),r=(t(151),function(e){function n(n,t,i,o){var r=e.call(this,n,t,i,"AddonModQuiz","quiz")||this;return r.quizProvider=o,r.name="AddonModQuizGradeLinkHandler",r.canReview=!1,r}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(e,n,t,i){return this.quizProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(151),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.domUtils=n,r.quizProvider=t,r.courseHelper=i,r.linkHelper=o,r.name="AddonModQuizReviewLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModQuiz",r.pattern=/\/mod\/quiz\/review\.php.*([\&\?]attempt=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){var r,l=o.domUtils.showModalLoading(),s=parseInt(t.attempt,10),a=parseInt(t.page,10);o.getQuizIdByAttemptId(s).then(function(n){return r=n,i||o.courseHelper.getModuleCourseIdByInstance(r,"quiz",e)}).then(function(i){var l={quizId:r,attemptId:s,courseId:i,page:t.showall?-1:isNaN(a)?-1:a};o.linkHelper.goInSite(n,"AddonModQuizReviewPage",l,e)}).catch(function(e){o.domUtils.showErrorModalDefault(e,"An error occurred while loading the required data.")}).finally(function(){l.dismiss()})}}]},n.prototype.getQuizIdByAttemptId=function(e){return this.quizProvider.getAttemptReview(e).then(function(e){return e.attempt&&e.attempt.quiz?e.attempt.quiz:Promise.reject(null)})},n.prototype.isEnabled=function(e,n,t,i){return this.quizProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModQuiz","quiz")||this;return i.name="AddonModQuizListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1140),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModQuizAccessDelayBetweenAttempts",this.ruleName="quizaccess_delaybetweenattempts"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1142),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModQuizAccessIpAddress",this.ruleName="quizaccess_ipaddress"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1144),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModQuizAccessNumAttempts",this.ruleName="quizaccess_numattempts"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1146),t(600),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(231);var i=t(600),o=function(){function e(e){this.quizSync=e,this.name="AddonModQuizAccessOfflineAttempts",this.ruleName="quizaccess_offlineattempts"}return e.prototype.getFixedPreflightData=function(e,n,t,i,o){n.confirmdatasaved=1},e.prototype.getPreflightComponent=function(e){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!t&&(!n||Date.now()-this.quizSync.syncInterval>e.syncTime)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1148),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(151),o=function(){function e(){this.name="AddonModQuizAccessOpenCloseDate",this.ruleName="quizaccess_openclosedate"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e.prototype.shouldShowTimeLeft=function(e,n,t){return!(e.preview&&t>n)&&t>n-i.a.QUIZ_SHOW_TIME_BEFORE_DEADLINE},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9),t(4);var i=t(1150),o=(t(601),t(128),function(){return function(e,n,t){e.registerHandler(n),t.registerSiteTableMigration({name:"mod_quiz_access_password",newName:i.a.PASSWORD_TABLE})}}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(601),o=function(){function e(e){this.sitesProvider=e,this.tableSchema={name:n.PASSWORD_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]},this.name="AddonModQuizAccessPassword",this.ruleName="quizaccess_password",this.sitesProvider.createTableFromSchema(this.tableSchema)}return n=e,e.prototype.getFixedPreflightData=function(e,n,t,i,o){if(e&&e.id&&void 0===n.quizpassword)return this.getPasswordEntry(e.id,o).then(function(e){n.quizpassword=e.password}).catch(function(){})},e.prototype.getPasswordEntry=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.PASSWORD_TABLE,{id:e})})},e.prototype.getPreflightComponent=function(e){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return this.getPasswordEntry(e.id,i).then(function(){return!1}).catch(function(){return!0})},e.prototype.notifyPreflightCheckPassed=function(e,n,t,i,o){if(e&&e.id&&void 0!==t.quizpassword)return this.storePassword(e.id,t.quizpassword,o)},e.prototype.notifyPreflightCheckFailed=function(e,n,t,i,o){if(e&&e.id)return this.removePassword(e.id,o)},e.prototype.removePassword=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.PASSWORD_TABLE,{id:e})})},e.prototype.storePassword=function(e,t,i){return this.sitesProvider.getSite(i).then(function(i){var o={id:e,password:t,timemodified:Date.now()};return i.getDb().insertRecord(n.PASSWORD_TABLE,o)})},e.PASSWORD_TABLE="addon_mod_quiz_access_password",e;var n}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1152),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModQuizAccessSafeBrowser",this.ruleName="quizaccess_safebrowser"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1154),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModQuizAccessSecureWindow",this.ruleName="quizaccess_securewindow"}return e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!1},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1156),t(602),t(128);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(602),o=function(){function e(){this.name="AddonModQuizAccessTimeLimit",this.ruleName="quizaccess_timelimit"}return e.prototype.getPreflightComponent=function(e){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.isPreflightCheckRequired=function(e,n,t,i){return!n},e.prototype.shouldShowTimeLeft=function(e,n,t){return!(e.preview&&t>n)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4),t(211),t(263);var i=t(472),o=t(40),r=function(){function e(e,n,t,i,r,l,s,a){this.resourceProvider=e,this.courseProvider=n,this.mimetypeUtils=t,this.resourceHelper=i,this.prefetchDelegate=r,this.textUtils=l,this.translate=s,this.timeUtils=a,this.name="AddonModResource",this.modName="resource",this.supportedFeatures=(u={},u[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,u[o.a.FEATURE_GROUPS]=!1,u[o.a.FEATURE_GROUPINGS]=!1,u[o.a.FEATURE_MOD_INTRO]=!0,u[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,u[o.a.FEATURE_GRADE_HAS_GRADE]=!1,u[o.a.FEATURE_GRADE_OUTCOMES]=!1,u[o.a.FEATURE_BACKUP_MOODLE2]=!0,u[o.a.FEATURE_SHOW_DESCRIPTION]=!0,u);var u}return e.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){var i=this,r={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_resource-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModResourceIndexPage",{module:t,courseId:i},o)},updateStatus:function(n){r.buttons[0].hidden=n!==o.a.DOWNLOADED||i.resourceHelper.isDisplayedInIframe(e)}.bind(this),buttons:[{hidden:!0,icon:"document",label:"addon.mod_resource.openthefile",action:function(e,n,t,o){i.hideOpenButton(t,o).then(function(e){e||i.resourceHelper.openModuleFile(t,o)})}}]};return this.getResourceData(e,n,r).then(function(e){r.icon=e.icon,r.extraBadge=e.extra,r.extraBadgeColor="light"}),r},e.prototype.hideOpenButton=function(e,n){var t=this;return this.courseProvider.loadModuleContents(e,n,void 0,!1,!1,void 0,this.modName).then(function(){return t.prefetchDelegate.getModuleStatus(e,n).then(function(n){return n!==o.a.DOWNLOADED||t.resourceHelper.isDisplayedInIframe(e)})})},e.prototype.getResourceData=function(e,n,t){var i=this,r=[],l=[],s={};return r.push(this.hideOpenButton(e,n).then(function(e){t.buttons[0].hidden=e})),void 0!==e.customdata?s=this.textUtils.unserialize(this.textUtils.parseJSON(e.customdata)):this.resourceProvider.isGetResourceWSAvailable()&&r.push(this.resourceProvider.getResourceData(n,e.id).then(function(e){l=e.contentfiles,s=i.textUtils.unserialize(e.displayoptions)})),Promise.all(r).then(function(){var n=e.contents&&e.contents.length?e.contents:l,t={icon:"",extra:""},r=[];if(n&&n.length){var a=n[0];if(t.icon=i.mimetypeUtils.getFileIcon(a.filename),s.showsize){var u=void 0;u=s.filedetails?s.filedetails.size:n.reduce(function(e,n){return e+n.filesize},0),r.push(i.textUtils.bytesToSize(u,1))}s.showtype&&r.push(i.mimetypeUtils.getMimetypeDescription(a)),s.showdate&&r.push(s.filedetails&&s.filedetails.modifieddate?i.translate.instant("addon.mod_resource.modifieddate",{$a:i.timeUtils.userDate(1e3*s.filedetails.modifieddate,"core.strftimedatetimeshort")}):s.filedetails&&s.filedetails.uploadeddate?i.translate.instant("addon.mod_resource.uploadeddate",{$a:i.timeUtils.userDate(1e3*s.filedetails.uploadeddate,"core.strftimedatetimeshort")}):a.timemodified>a.timecreated+5*o.a.SECONDS_MINUTE?i.translate.instant("addon.mod_resource.modifieddate",{$a:i.timeUtils.userDate(1e3*a.timemodified,"core.strftimedatetimeshort")}):i.translate.instant("addon.mod_resource.uploadeddate",{$a:i.timeUtils.userDate(1e3*a.timecreated,"core.strftimedatetimeshort")}))}return""==t.icon&&(t.icon=i.courseProvider.getModuleIconSrc(i.modName,e.modicon)),t.extra+=r.join(" "),t})},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModResource","resource")||this;return t.name="AddonModResourceLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(211),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModResource","resource")||this;return o.resourceProvider=i,o.name="AddonModResourceListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.name="AddonModResourcePluginFileHandler",this.component="mod_resource"}return e.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_resource/content/([0-9]+)/")},e.prototype.getComponentRevisionReplace=function(e){return"/mod_resource/content/0/"},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(473),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModScorm",this.modName="scorm",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!0,n[o.a.FEATURE_GRADE_OUTCOMES]=!0,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_scorm-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModScormIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(288);var i=function(){function e(e){this.scormSync=e,this.name="AddonModScormSyncCronHandler"}return e.prototype.execute=function(e){return this.scormSync.syncAllScorms(e)},e.prototype.getInterval=function(){return this.scormSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModScorm","scorm")||this;return t.name="AddonModScormIndexLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(417),r=function(e){function n(n,t,i){var o=e.call(this,n,t,i,"AddonModScorm","scorm")||this;return o.name="AddonModScormGradeLinkHandler",o.canReview=!1,o}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModScorm","scorm")||this;return i.name="AddonModScormListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(474),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModSurvey",this.modName="survey",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!1,n[o.a.FEATURE_GRADE_OUTCOMES]=!1,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_survey-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModSurveyIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModSurvey","survey")||this;return t.name="AddonModSurveyLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModSurvey","survey")||this;return i.name="AddonModSurveyListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(264),l=(t(301),function(e){function n(n,t,i,o,l,s,a,u,c){var d=e.call(this,n,t,i,o,l,s,a)||this;return d.surveyProvider=u,d.surveyHelper=c,d.name="AddonModSurvey",d.modName="survey",d.component=r.a.COMPONENT,d.updatesNames=/^configuration$|^.*files$|^answers$/,d}return Object(i.__extends)(n,e),n.prototype.getIntroFiles=function(e,n){var t=this;return this.surveyProvider.getSurvey(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.surveyProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){return this.surveyProvider.invalidateSurveyData(n)},n.prototype.isEnabled=function(){return!0},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchSurvey.bind(this))},n.prototype.prefetchSurvey=function(e,n,t,i){var o=this;return this.surveyProvider.getSurvey(n,e.id).then(function(n){var t=[],l=o.getIntroFilesFromInstance(e,n);return t.push(o.filepoolProvider.addFilesToQueue(i,l,r.a.COMPONENT,e.id)),n.surveydone||t.push(o.surveyProvider.getQuestions(n.id)),Promise.all(t)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(302);var i=function(){function e(e){this.surveySync=e,this.name="AddonModSurveySyncCronHandler"}return e.prototype.execute=function(e){return this.surveySync.syncAllSurveys(e)},e.prototype.getInterval=function(){return this.surveySync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(475),o=(t(304),t(40)),r=function(){function e(e,n,t,i,r){this.courseProvider=e,this.urlProvider=n,this.urlHelper=t,this.domUtils=i,this.contentLinksHelper=r,this.name="AddonModUrl",this.modName="url",this.supportedFeatures=(l={},l[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,l[o.a.FEATURE_GROUPS]=!1,l[o.a.FEATURE_GROUPINGS]=!1,l[o.a.FEATURE_MOD_INTRO]=!0,l[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,l[o.a.FEATURE_GRADE_HAS_GRADE]=!1,l[o.a.FEATURE_GRADE_OUTCOMES]=!1,l[o.a.FEATURE_BACKUP_MOODLE2]=!0,l[o.a.FEATURE_SHOW_DESCRIPTION]=!0,l);var l}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){var i=this,r=this,l={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_url-handler",showDownloadButton:!1,action:function(e,n,t,i,l){var s=r.domUtils.showModalLoading();r.contentLinksHelper.canHandleLink(t.contents[0].fileurl,i).then(function(e){return!!e||!!r.urlProvider.isGetUrlWSAvailable()&&r.urlProvider.getUrl(i,t.id).catch(function(){}).then(function(e){var n=r.urlProvider.getFinalDisplayType(e);return n==o.a.RESOURCELIB_DISPLAY_OPEN||n==o.a.RESOURCELIB_DISPLAY_POPUP})}).then(function(e){e?r.openUrl(t,i):n.push("AddonModUrlIndexPage",{module:t,courseId:i},l)}).finally(function(){s.dismiss()})},buttons:[{hidden:!0,icon:"link",label:"core.openinbrowser",action:function(e,n,t,i){r.openUrl(t,i)}}]};return this.hideLinkButton(e,n).then(function(n){l.buttons[0].hidden=n,e.contents&&e.contents[0]&&(l.icon=i.urlProvider.guessIcon(e.contents[0].fileurl)||i.courseProvider.getModuleIconSrc(i.modName,e.modicon))}),l},e.prototype.hideLinkButton=function(e,n){return this.courseProvider.loadModuleContents(e,n,void 0,!1,!1,void 0,this.modName).then(function(){return!(e.contents&&e.contents[0]&&e.contents[0].fileurl)}).catch(function(){return!0})},e.prototype.getMainComponent=function(e,n){return i.a},e.prototype.openUrl=function(e,n){var t=this;this.urlProvider.logView(e.instance).then(function(){t.courseProvider.checkModuleCompletion(n,e.completiondata)}).catch(function(){}),this.urlHelper.open(e.contents[0].fileurl)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModUrl","url")||this;return t.name="AddonModUrlLinkHandler",t.useModNameToGetModule=!0,t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModUrl","url")||this;return i.name="AddonModUrlListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(476),o=t(40),r=function(){function e(e){this.courseProvider=e,this.name="AddonModWiki",this.modName="wiki",this.supportedFeatures=(n={},n[o.a.FEATURE_GROUPS]=!0,n[o.a.FEATURE_GROUPINGS]=!0,n[o.a.FEATURE_MOD_INTRO]=!0,n[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[o.a.FEATURE_GRADE_HAS_GRADE]=!1,n[o.a.FEATURE_GRADE_OUTCOMES]=!1,n[o.a.FEATURE_BACKUP_MOODLE2]=!0,n[o.a.FEATURE_SHOW_DESCRIPTION]=!0,n[o.a.FEATURE_RATE]=!1,n[o.a.FEATURE_COMMENT]=!0,n);var n}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_wiki-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModWikiIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=(t(4),t(68)),r=t(140),l=t(209),s=function(e){function n(n,t,i,o,r,s,a,u,c,d,f,p,h){var m=e.call(this,n,t,i,o,r,s,a)||this;return m.wikiProvider=u,m.userProvider=c,m.textUtils=d,m.courseHelper=f,m.groupsProvider=p,m.gradesHelper=h,m.name="AddonModWiki",m.modName="wiki",m.component=l.a.COMPONENT,m.updatesNames=/^.*files$|^pages$/,m}return Object(i.__extends)(n,e),n.prototype.getAllPages=function(e,n,t,i,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(n,e.id,t,o).then(function(e){return r.wikiProvider.getWikiPageList(e,t,i,o)}).catch(function(){return[]})},n.prototype.getDownloadSize=function(e,n,t){var i=this,o=[],r=this.sitesProvider.getCurrentSiteId();return o.push(this.getFiles(e,n,t,r).then(function(e){return i.utils.sumFileSizes(e)})),o.push(this.getAllPages(e,n,!1,!0,r).then(function(e){var n=0;return e.forEach(function(e){e.contentsize&&(n+=e.contentsize)}),{size:n,total:!0}})),Promise.all(o).then(function(e){return e.reduce(function(e,n){return{size:e.size+n.size,total:e.total&&n.total}},{size:0,total:!0})})},n.prototype.getFiles=function(e,n,t,i){var o=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(n,e.id,!1,i).then(function(n){var t=o.getIntroFilesFromInstance(e,n);return o.wikiProvider.getWikiFileList(n,!1,!1,i).then(function(e){return t.concat(e)})}).catch(function(){return[]})},n.prototype.invalidateContent=function(e,n){return this.wikiProvider.invalidateContent(e,n)},n.prototype.prefetch=function(e,n,t,i){var o=this,r=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageData(r,this.component,e.id).catch(function(){}).then(function(i){var l=i&&i.downloadTime||0;return o.prefetchPackage(e,n,t,o.prefetchWiki.bind(o),r,[l])})},n.prototype.prefetchWiki=function(e,n,t,i,r){var l=this,s=this.sitesProvider.getCurrentSiteUserId();return this.getAllPages(e,n,!1,!0,i).then(function(a){var u=[];return a.forEach(function(e){e.timemodified>r&&u.push(l.wikiProvider.getPageContents(e.id,!1,!0,i))}),u.push(l.groupsProvider.getActivityGroupMode(e.id,i).then(function(n){if(n===o.a.SEPARATEGROUPS||n===o.a.VISIBLEGROUPS)return l.groupsProvider.getActivityAllowedGroups(e.id,s,i)})),u.push(l.wikiProvider.getWiki(n,e.id,!1,i).then(function(e){return l.courseHelper.getModuleCourseIdByInstance(e.id,"wiki",i)})),u.push(l.getFiles(e,n,t,i).then(function(n){return l.filepoolProvider.addFilesToQueue(i,n,l.component,e.id)})),Promise.all(u)})},n}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(289);var i=function(){function e(e){this.wikiSync=e,this.name="AddonModWikiSyncCronHandler"}return e.prototype.execute=function(e){return this.wikiSync.syncAllWikis(e)},e.prototype.getInterval=function(){return this.wikiSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModWiki","wiki")||this;return t.name="AddonModWikiIndexLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(209),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.domUtils=n,r.wikiProvider=t,r.courseHelper=i,r.linkHelper=o,r.name="AddonModWikiPageOrMapLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModWiki",r.pattern=/\/mod\/wiki\/(view|map)\.php.*([\&\?]pageid=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,r){var l=o.domUtils.showModalLoading(),s=parseInt(t.pageid,10),a=-1!=n.indexOf("mod/wiki/map.php")?"map":"page";o.wikiProvider.getPageContents(s,!1,!1,e).then(function(n){return(i?Promise.resolve(i):o.courseHelper.getModuleCourseIdByInstance(n.wikiid,"wiki",e)).then(function(t){o.linkHelper.goInSite(r,"AddonModWikiIndexPage",{courseId:t,pageId:n.id,pageTitle:n.title,wikiId:n.wikiid,subwikiId:n.subwikiid,action:a},e)})}).catch(function(e){o.domUtils.showErrorModalDefault(e,"addon.mod_wiki.errorloadingpage",!0)}).finally(function(){l.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){var o=-1!=n.indexOf("mod/wiki/map.php");return!(t.id&&!o)&&(!o||void 0===t.option||5==t.option)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(209),function(e){function n(n,t,i,o,r){var l=e.call(this)||this;return l.domUtils=n,l.wikiProvider=t,l.courseHelper=i,l.linkHelper=o,l.courseProvider=r,l.name="AddonModWikiCreateLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModWiki",l.pattern=/\/mod\/wiki\/create\.php.*([\&\?]swid=\d+)/,l}return Object(i.__extends)(n,e),n.prototype.currentStateIsSameWiki=function(e,n,t){var i=this;if(e&&"AddonModWikiIndexPage"==e.component.name){if(e.data.subwikiId==n)return Promise.resolve(!0);if(e.data.pageId)return this.wikiProvider.getPageContents(e.data.pageId,!1,!1,t).then(function(e){return e.subwikiid==n}).catch(function(){return!1});if(e.data.wikiId)return this.wikiProvider.wikiHasSubwiki(e.data.wikiId,n,!1,!1,t);if(e.data.courseId&&e.data.module){var o=e.data.module&&e.data.module.id;if(o)return this.wikiProvider.getWiki(e.data.courseId,o,!1,t).then(function(e){return i.wikiProvider.wikiHasSubwiki(e.id,n,!1,!1,t)}).catch(function(){return!1})}}return Promise.resolve(!1)},n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){var r=o.domUtils.showModalLoading(),l=parseInt(t.swid,10),s=n&&n.getActive();o.currentStateIsSameWiki(s,l,e).then(function(n){if(n){if(s&&s.data.module&&s.data.module.id)return s.data.module;if(s&&s.data.wikiId)return o.courseProvider.getModuleBasicInfoByInstance(s.data.wikiId,"wiki",e).catch(function(){})}}).then(function(r){o.linkHelper.goInSite(n,"AddonModWikiEditPage",{module:r,courseId:i||r&&r.course||s&&s.data.courseId,pageTitle:t.title,subwikiId:l},e)}).finally(function(){r.dismiss()})}}]},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=function(e){function n(n,t){var i=e.call(this)||this;return i.linkHelper=n,i.textUtils=t,i.name="AddonModWikiEditLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModWiki",i.pattern=/\/mod\/wiki\/edit\.php.*([\&\?]pageid=\d+)/,i}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return i=i||t.courseid||t.cid,[{action:function(e,n){var r="";void 0!==t.section&&(r=o.textUtils.decodeURIComponent(t.section.replace(/\+/g," ")));var l={courseId:i,section:r,pageId:parseInt(t.pageid,10)};o.linkHelper.goInSite(n,"AddonModWikiEditPage",l,e)}}]},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),function(e){function n(n,t){var i=e.call(this,n,t,"AddonModWiki","wiki")||this;return i.name="AddonModWikiListLinkHandler",i}return Object(i.__extends)(n,e),n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1183),t(1185),t(1187),t(1189);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(610),t(1184),t(194);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(610),o=function(){function e(e,n){this.translate=e,this.gradesHelper=n,this.name="AddonModWorkshopAssessmentStrategyAccumulative",this.strategyName="accumulative"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,n){var t=this,i=this.translate.instant("core.choosedots"),o=[],r=[];return e.fields.forEach(function(l,s){l.dimtitle=t.translate.instant("addon.mod_workshop_assessment_accumulative.dimensionnumber",{$a:l.number});var a=parseInt(l.grade,10)<0?e.dimensionsinfo[s].scale:null;e.current[s]||(e.current[s]={}),o[s]={peercomment:e.current[s].peercomment||"",number:l.number},e.current[s].grade=e.current[s].grade?parseInt(e.current[s].grade,10):-1,r.push(t.gradesHelper.makeGradesMenu(l.grade,n,i,-1,a).then(function(n){l.grades=n,o[s].grade=e.current[s].grade}))}),Promise.all(r).then(function(){return o})},e.prototype.hasDataChanged=function(e,n){for(var t in e){if(e[t].grade!=n[t].grade)return!0;if(e[t].peercomment!=n[t].peercomment)return!0}return!1},e.prototype.prepareAssessmentData=function(e,n){var t=this,i={},o={},r=!1;return n.fields.forEach(function(l,s){var a=parseInt(e[s].grade,10);!isNaN(a)&&a>=0?i["grade__idx_"+s]=a:(o["grade_"+s]=t.translate.instant("addon.mod_workshop_assessment_accumulative.mustchoosegrade"),r=!0),e[s].peercomment&&(i["peercomment__idx_"+s]=e[s].peercomment),i["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,i["dimensionid__idx_"+s]=parseInt(l.dimensionid,10),i["weight__idx_"+s]=parseInt(l.weight,10)||0}),r?Promise.reject(o):Promise.resolve(i)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(611),t(1186),t(194);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(611),o=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyComments",this.strategyName="comments"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,n){var t=this,i=[];return e.fields.forEach(function(n,o){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_comments.dimensionnumber",{$a:n.number}),e.current[o]||(e.current[o]={}),i[o]={peercomment:e.current[o].peercomment||"",number:n.number}}),Promise.resolve(i)},e.prototype.hasDataChanged=function(e,n){for(var t in e)if(e[t].peercomment!=n[t].peercomment)return!0;return!1},e.prototype.prepareAssessmentData=function(e,n){var t=this,i={},o={},r=!1;return n.fields.forEach(function(l,s){e[s].peercomment?i["peercomment__idx_"+s]=e[s].peercomment:(o["peercomment_"+s]=t.translate.instant("core.err_required"),r=!0),i["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,i["dimensionid__idx_"+s]=parseInt(l.dimensionid,10)}),r?Promise.reject(o):Promise.resolve(i)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(612),t(1188),t(194);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(612),o=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyNumErrors",this.strategyName="numerrors"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,n){var t=this,i=[];return e.fields.forEach(function(n,o){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_numerrors.dimensionnumber",{$a:n.number}),e.current[o]||(e.current[o]={}),i[o]={peercomment:e.current[o].peercomment||"",number:n.number,grade:e.current[o].grade||""}}),Promise.resolve(i)},e.prototype.hasDataChanged=function(e,n){for(var t in e){if(e[t].grade!=n[t].grade)return!0;if(e[t].peercomment!=n[t].peercomment)return!0}return!1},e.prototype.prepareAssessmentData=function(e,n){var t=this,i={},o={},r=!1;return n.fields.forEach(function(l,s){var a=parseInt(e[s].grade);!isNaN(a)&&a>=0?i["grade__idx_"+s]=a:(o["grade_"+s]=t.translate.instant("core.required"),r=!0),e[s].peercomment&&(i["peercomment__idx_"+s]=e[s].peercomment),i["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,i["dimensionid__idx_"+s]=parseInt(l.dimensionid,10),i["weight__idx_"+s]=parseInt(l.weight,10)||0}),r?Promise.reject(o):Promise.resolve(i)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(613),t(1190),t(194);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(613),o=function(){function e(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyRubric",this.strategyName="rubric"}return e.prototype.isEnabled=function(){return!0},e.prototype.getComponent=function(e){return i.a},e.prototype.getOriginalValues=function(e,n){var t=this,i=[];return e.fields.forEach(function(n,o){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_rubric.dimensionnumber",{$a:n.number}),e.current[o]||(e.current[o]={}),i[o]={chosenlevelid:e.current[o].chosenlevelid||"",number:n.number}}),Promise.resolve(i)},e.prototype.hasDataChanged=function(e,n){for(var t in e)if(e[t].chosenlevelid!=(n[t].chosenlevelid||""))return!0;return!1},e.prototype.prepareAssessmentData=function(e,n){var t=this,i={},o={},r=!1;return n.fields.forEach(function(l,s){var a=parseInt(e[s].chosenlevelid,10);!isNaN(a)&&a>=0?i["chosenlevelid__idx_"+s]=a:(o["chosenlevelid_"+s]=t.translate.instant("addon.mod_workshop_assessment_rubric.mustchooseone"),r=!0),i["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,i["dimensionid__idx_"+s]=parseInt(l.dimensionid,10)}),r?Promise.reject(o):Promise.resolve(i)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(477),o=(t(150),t(40)),r=function(){function e(e,n){this.courseProvider=e,this.workshopProvider=n,this.name="AddonModWorkshop",this.modName="workshop",this.supportedFeatures=(t={},t[o.a.FEATURE_GROUPS]=!0,t[o.a.FEATURE_GROUPINGS]=!0,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!0,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t[o.a.FEATURE_PLAGIARISM]=!0,t);var t}return e.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_workshop-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModWorkshopIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(88),r=t(150),l=function(e){function n(n){var t=e.call(this,n,r.a.COMPONENT,"workshop")||this;return t.name="AddonModWorkshopLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(150),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModWorkshop","workshop")||this;return o.workshopProvider=i,o.name="AddonModWorkshopListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(150),l=(t(173),function(e){function n(n,t,i,o,l,s,a,u,c,d,f){var p=e.call(this,n,t,i,o,l,s,a)||this;return p.groupsProvider=u,p.userProvider=c,p.workshopProvider=d,p.workshopHelper=f,p.name="AddonModWorkshop",p.modName="workshop",p.component=r.a.COMPONENT,p.updatesNames=new RegExp("^configuration$|^.*files$|^completion|^gradeitems$|^outcomes$|^submissions$|^assessments$|^assessmentgrades$|^usersubmissions$|^userassessments$|^userassessmentgrades$|^userassessmentgrades$"),p}return Object(i.__extends)(n,e),n.prototype.getFiles=function(e,n,t){return this.getWorkshopInfoHelper(e,n,!0).then(function(e){return e.files})},n.prototype.getWorkshopInfoHelper=function(e,n,t,i,o,l){var s=this;void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1);var a,u,c=[],d=[];return this.sitesProvider.getSite(l).then(function(t){var o=t.getUserId();return s.workshopProvider.getWorkshop(n,e.id,l,i).then(function(n){return d=s.getIntroFilesFromInstance(e,n),d=d.concat(n.instructauthorsfiles).concat(n.instructreviewersfiles),a=n,s.workshopProvider.getWorkshopAccessInformation(a.id,!1,!0,l).then(function(n){if((u=n).canviewallsubmissions)return s.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,l).then(function(e){e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),c=e.groups})})}).then(function(){return s.workshopProvider.getUserPlanPhases(a.id,!1,!0,l).then(function(e){var n=s.workshopHelper.canSubmit(a,u,e[r.a.PHASE_SUBMISSION].tasks),t=s.workshopHelper.canAssess(a,u),i=[];return n&&i.push(s.workshopHelper.getUserSubmission(a.id,o).then(function(e){e&&(d=d.concat(e.contentfiles).concat(e.attachmentfiles))})),u.canviewallsubmissions&&a.phase>=r.a.PHASE_SUBMISSION&&i.push(s.workshopProvider.getSubmissions(a.id).then(function(e){var n=[];return e.forEach(function(e){d=d.concat(e.contentfiles).concat(e.attachmentfiles),n.push(s.workshopProvider.getSubmissionAssessments(a.id,e.id).then(function(e){e.forEach(function(e){d=d.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})}))}),Promise.all(n)})),a.phase>=r.a.PHASE_ASSESSMENT&&t&&i.push(s.workshopHelper.getReviewerAssessments(a.id).then(function(e){e.forEach(function(e){d=d.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})})),Promise.all(i)})})}).then(function(){return{workshop:a,groups:c,files:d.filter(function(e){return void 0!==e})}}).catch(function(e){return t?{workshop:a,groups:c,files:d.filter(function(e){return void 0!==e})}:Promise.reject(e)})},n.prototype.invalidateContent=function(e,n){return this.workshopProvider.invalidateContent(e,n)},n.prototype.isDownloadable=function(e,n){var t=this;return this.workshopProvider.getWorkshop(n,e.id,void 0,!0).then(function(e){return t.workshopProvider.getWorkshopAccessInformation(e.id).then(function(n){return n.canswitchphase||e.phase>r.a.PHASE_SETUP})})},n.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchWorkshop.bind(this))},n.prototype.getAllGradesReport=function(e,n,t){var i=this,o=[];return n.forEach(function(n){o.push(i.workshopProvider.fetchAllGradeReports(e,n.id,void 0,!1,!1,t))}),Promise.all(o).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){e.submissionid&&(n[e.submissionid]=e)})}),i.utils.objectToArray(n)})},n.prototype.prefetchWorkshop=function(e,n,t,i){var o=this,l=[];return i=i||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(i).then(function(t){var s=t.getUserId();return o.getWorkshopInfoHelper(e,n,!1,!1,!0,i).then(function(n){var t=n.workshop,a=[],u=[];return a.push(o.filepoolProvider.addFilesToQueue(i,n.files,o.component,e.id)),a.push(o.workshopProvider.getWorkshopAccessInformation(t.id,!1,!0,i).then(function(e){return o.workshopProvider.getUserPlanPhases(t.id,!1,!0,i).then(function(a){var c=o.workshopHelper.canSubmit(t,e,a[r.a.PHASE_SUBMISSION].tasks),d=o.workshopHelper.canAssess(t,e),f=[];c&&(f.push(o.workshopProvider.getSubmissions(t.id)),l.push(s));var p=Promise.resolve();return e.canviewallsubmissions&&t.phase>=r.a.PHASE_SUBMISSION&&(p=o.getAllGradesReport(t.id,n.groups,i).then(function(e){e.forEach(function(e){l.push(e.userid),l.push(e.gradeoverby),e.reviewedby&&e.reviewedby.forEach(function(e){l.push(e.userid),l.push(e.gradinggradeoverby),u[e.assessmentid]=e}),e.reviewerof&&e.reviewerof.forEach(function(e){l.push(e.userid),l.push(e.gradinggradeoverby),u[e.assessmentid]=e})})})),t.phase>=r.a.PHASE_ASSESSMENT&&d&&(p=p.finally(function(){return o.workshopHelper.getReviewerAssessments(t.id,s,void 0,void 0,i).then(function(e){var n=Promise.resolve();return e.forEach(function(e){e.submission.authorid==s&&(n=o.workshopProvider.getAssessment(t.id,e.id)),l.push(e.reviewerid),l.push(e.gradinggradeoverby),u[e.id]=e}),n})})),u.length>0&&(p=p.finally(function(){var e=[];return u.forEach(function(n,r){e.push(o.workshopProvider.getAssessmentForm(t.id,r,void 0,void 0,void 0,i))}),Promise.all(e)})),f.push(p),t.phase==r.a.PHASE_CLOSED&&(f.push(o.workshopProvider.getGrades(t.id)),e.canviewpublishedsubmissions&&f.push(o.workshopProvider.getSubmissions(t.id))),Promise.all(f)})})),a.push(o.courseProvider.getModuleBasicInfoByInstance(t.id,"workshop",i)),a.push(o.courseProvider.getModuleBasicGradeInfo(e.id,i)),Promise.all(a)})}).then(function(){return o.userProvider.prefetchProfiles(l,n,i).catch(function(){})})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(290);var i=function(){function e(e){this.workshopSync=e,this.name="AddonModWorkshopSyncCronHandler"}return e.prototype.execute=function(e){return this.workshopSync.syncAllWorkshops(e)},e.prototype.getInterval=function(){return this.workshopSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(233);var i=t(16),o=t(615),r=function(){function e(e){this.notesProvider=e,this.name="AddonNotes",this.priority=200}return e.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},e.prototype.isEnabledForCourse=function(e,n,t,o){return(!n||n.type!=i.a.ACCESS_GUEST)&&(t&&void 0!==t.notes?t.notes:this.notesProvider.isPluginViewNotesEnabledForCourse(e))},e.prototype.getDisplayData=function(e,n){return{title:"addon.notes.notes",class:"addon-notes-course-handler",component:o.a}},e.prototype.prefetch=function(e){return this.notesProvider.getNotes(e.id,!0)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(329);var i=function(){function e(e){this.notesSync=e,this.name="AddonNotesSyncCronHandler"}return e.prototype.execute=function(e){return this.notesSync.syncAllNotes(e)},e.prototype.getInterval=function(){return 3e5},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(9);var i=t(13),o=t(45),r=t(100),l=(t(233),function(){function e(e,n,t,l){var s=this;this.modalCtrl=e,this.sitesProvider=n,this.notesProvider=t,this.name="AddonNotes:addNote",this.priority=200,this.type=r.a.TYPE_COMMUNICATION,this.addNoteEnabledCache={},l.on(i.a.LOGOUT,this.clearAddNoteCache.bind(this)),l.on(o.a.PROFILE_REFRESHED,function(e){s.clearAddNoteCache(e.courseId)})}return e.prototype.clearAddNoteCache=function(e){e?delete this.addNoteEnabledCache[e]:this.addNoteEnabledCache={}},e.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){var o=this;return n&&e.id!=this.sitesProvider.getCurrentSiteUserId()?void 0!==this.addNoteEnabledCache[n]?this.addNoteEnabledCache[n]:this.notesProvider.isPluginAddNoteEnabledForCourse(n).then(function(e){return o.addNoteEnabledCache[n]=e,e}):Promise.resolve(!1)},e.prototype.getDisplayData=function(e,n){var t=this;return{icon:"list",title:"addon.notes.addnewnote",class:"addon-notes-handler",action:function(e,n,i,o){e.preventDefault(),e.stopPropagation();t.modalCtrl.create("AddonNotesAddPage",{userId:i.id,courseId:o}).present()}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(615);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(13),o=t(285),r=function(){function e(e,n,t,r,l,s){var a=this;this.sitesProvider=n,this.notificationsProvider=r,this.pushNotificationsProvider=l,this.name="AddonNotifications",this.priority=700,this.handler={icon:"notifications",title:"addon.notifications.notifications",page:"AddonNotificationsListPage",class:"addon-notifications-handler",showBadge:!0,badge:"",loading:!0},e.on(o.a.READ_CHANGED_EVENT,function(e){a.updateBadge(e.siteId)}),e.on(o.a.READ_CRON_EVENT,function(e){a.updateBadge(e.siteId)}),e.on(i.a.LOGOUT,function(e){a.handler.badge="",a.handler.loading=!0}),s.on("receive").subscribe(function(e){t.isTrueOrOne(e.notif)&&a.sitesProvider.isCurrentSite(e.site)&&a.updateBadge(e.site)}),s.registerCounterHandler("AddonNotifications")}return e.prototype.isEnabled=function(){return!0},e.prototype.getDisplayData=function(){return this.handler.loading&&this.updateBadge(),this.handler},e.prototype.updateBadge=function(e){var n=this;(e=e||this.sitesProvider.getCurrentSiteId())&&this.notificationsProvider.getUnreadNotificationsCount(null,e).then(function(t){n.handler.badge=t>0?String(t):"",n.pushNotificationsProvider.updateAddonCounter("AddonNotifications",t,e)}).catch(function(){n.handler.badge=""}).finally(function(){n.handler.loading=!1})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(285);var i=function(){function e(e,n,t){this.appProvider=e,this.localNotificationsProvider=n,this.notificationsProvider=t,this.name="AddonNotifications",this.priority=500}return e.prototype.isEnabled=function(){return this.notificationsProvider.isNotificationPreferencesEnabled()||this.localNotificationsProvider.isAvailable()&&!this.appProvider.isDesktop()},e.prototype.getDisplayData=function(){return{icon:"notifications",title:"addon.notifications.notificationpreferences",page:"AddonNotificationsSettingsPage",class:"addon-notifications-settings-handler"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(285),o=function(){function e(e,n,t,i,o,r,l){this.appProvider=e,this.eventsProvider=n,this.sitesProvider=t,this.localNotifications=i,this.notificationsProvider=o,this.textUtils=r,this.emulatorHelper=l,this.name="AddonNotificationsCronHandler"}return e.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:6e5},e.prototype.isSync=function(){return!this.notificationsProvider.isPreciseNotificationCountEnabled()||this.appProvider.isDesktop()},e.prototype.canManualSync=function(){return!0},e.prototype.execute=function(e){return this.sitesProvider.isCurrentSite(e)&&this.eventsProvider.trigger(i.a.READ_CRON_EVENT,{},this.sitesProvider.getCurrentSiteId()),this.appProvider.isDesktop()&&this.localNotifications.isAvailable()&&this.emulatorHelper.checkNewNotifications(i.a.PUSH_SIMULATION_COMPONENT,this.fetchNotifications.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve(null)},e.prototype.fetchNotifications=function(e){return this.notificationsProvider.getUnreadNotifications(0,void 0,!0,!1,!0,e)},e.prototype.getTitleAndText=function(e){var n={title:e.userfromfullname,text:e.mobiletext.replace(/-{4,}/gi,"")};return n.text=this.textUtils.replaceNewLines(n.text,"<br>"),Promise.resolve(n)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(40),o=t(180),r=(t.n(o),function(){function e(e,n,t,i,o,r){this.sitesProvider=n,this.fileProvider=t,this.filepoolProvider=i,this.http=o,this.utils=r,this.SEPARATOR_35=/\/\*\*? *3\.5(\.0)? *styles? *\*\//i,this.stylesEls={},this.logger=e.getInstance("AddonRemoteThemesProvider")}return n=e,e.prototype.addSite=function(e){var n=this;if(!e||this.stylesEls[e])return Promise.resolve();var t=document.createElement("style");return t.setAttribute("id","mobilecssurl-"+e),this.disableElement(t,!0),document.head.appendChild(t),this.stylesEls[e]={element:t,hash:""},this.load(e,!0).catch(function(e){n.logger.error("Error loading site after site init",e)})},e.prototype.clear=function(){var e=this;Array.from(document.querySelectorAll("style[id*=mobilecssurl]")).forEach(function(n){e.disableElement(n,!0)})},e.prototype.disableElement=function(e,n){n?(e.disabled=!0,e.setAttribute("disabled","disabled")):(e.disabled=!1,e.removeAttribute("disabled"))},e.prototype.downloadFileAndRemoveOld=function(e,t){var o=this;return this.filepoolProvider.getFileStateByUrl(e,t).then(function(e){return e!==i.a.NOT_DOWNLOADED}).catch(function(){return!0}).then(function(t){if(!t)return o.filepoolProvider.removeFilesByComponent(e,n.COMPONENT,1)}).then(function(){return o.filepoolProvider.downloadUrl(e,t,!1,n.COMPONENT,1)})},e.prototype.enable=function(e){e=e||this.sitesProvider.getCurrentSiteId(),this.stylesEls[e]&&this.disableElement(this.stylesEls[e].element,!1)},e.prototype.get=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(e).then(function(i){var o,r=i.getInfo();if(r&&r.mobilecssurl)return o=r.mobilecssurl,(t.fileProvider.isAvailable()?t.downloadFileAndRemoveOld(e,o):Promise.resolve(o)).then(function(e){return t.logger.debug("Loading styles from: ",e),t.http.get(e).toPromise()}).then(function(e){var n=e&&e.text();return"string"==typeof n?{fileUrl:o,styles:t.get35Styles(n)}:Promise.reject(null)});r&&""===r.mobilecssurl&&t.filepoolProvider.removeFilesByComponent(e,n.COMPONENT,1)})},e.prototype.get35Styles=function(e){var n=e.search(this.SEPARATOR_35);return n>-1?e.substr(n).replace(this.SEPARATOR_35,""):e},e.prototype.load=function(e,t){var i=this;return e=e||this.sitesProvider.getCurrentSiteId(),t=!!t,this.logger.debug("Load site",e,t),e&&this.stylesEls[e]?(this.disableElement(this.stylesEls[e].element,t),this.get(e).then(function(r){if(void 0!==r){var l=o.Md5.hashAsciiStr(r.styles);i.stylesEls[e].hash!==l&&(i.stylesEls[e].element.innerHTML=r.styles,i.stylesEls[e].hash=l,t&&i.disableElement(i.stylesEls[e].element,!0)),i.filepoolProvider.treatCSSCode(e,r.fileUrl,r.styles,n.COMPONENT,2).catch(function(){})}})):Promise.reject(null)},e.prototype.loadTmpStyles=function(e){var n=this;return e?this.http.get(e).toPromise().then(function(e){var t=e&&e.text();if("string"!=typeof t)return Promise.reject(null);t=n.get35Styles(t);var i=document.createElement("style");i.setAttribute("id","mobilecssurl-tmpsite"),i.innerHTML=t,document.head.appendChild(i),n.stylesEls.tmpsite={element:i,hash:""}}):Promise.resolve()},e.prototype.preloadCurrentSite=function(){var e=this;return this.sitesProvider.getStoredCurrentSiteId().then(function(n){return e.addSite(n)},function(){})},e.prototype.preloadSites=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.addSite(n))}),e.utils.allPromises(t)})},e.prototype.removeSite=function(e){e&&this.stylesEls[e]&&(document.head.removeChild(this.stylesEls[e].element),delete this.stylesEls[e])},e.prototype.unloadTmpStyles=function(){return this.removeSite("tmpsite")},e.COMPONENT="mmaRemoteStyles",e;var n}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(292),t(679);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(57),t(1207);var i=function(){return function(e){}}()},function(e,n,t){"use strict";t(0),t(1),t(217),t(4),t(10);var i=t(13),o=(t(17),t(148),t(6),t(2),t(5),t(11),t(26),t(3),t(57)),r=(t(138),t(117),t(16),t(177),t(56),t(53),t(110),t(176),t(100)),l=(t(191),t(292),t(71),t(116),t(358),t(128),t(162),t(164),t(194),function(){function e(e){this.name=e}return e.prototype.isEnabled=function(){return!0},e}()),s=t(419),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),u=function(e){function n(n,t,i){var o=e.call(this,n)||this;return o.format=t,o.handlerSchema=i,o}return a(n,e),n.prototype.canViewAllSections=function(e){return void 0===this.handlerSchema.canviewallsections||this.handlerSchema.canviewallsections},n.prototype.displayEnableDownload=function(e){return void 0===this.handlerSchema.displayenabledownload||this.handlerSchema.displayenabledownload},n.prototype.displaySectionSelector=function(e){return void 0===this.handlerSchema.displaysectionselector||this.handlerSchema.displaysectionselector},n.prototype.getCourseFormatComponent=function(e,n){if(this.handlerSchema.method)return s.a},n}(l),c=t(418),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),f=function(e){function n(n,t,i,o,r,l){var s=e.call(this,n)||this;return s.title=t,s.plugin=i,s.handlerSchema=o,s.initResult=r,s.sitePluginsProvider=l,s.priority=o.priority,s}return d(n,e),n.prototype.isEnabledForCourse=function(e,n,t,i){return this.sitePluginsProvider.isHandlerEnabledForCourse(e,this.handlerSchema.restricttoenrolledcourses,this.initResult.restrict)},n.prototype.getDisplayData=function(e,n){return{title:this.title,class:this.handlerSchema.displaydata.class,component:c.a,componentData:{handlerUniqueName:this.name}}},n.prototype.prefetch=function(e){return this.sitePluginsProvider.prefetchFunctions(this.plugin.component,{courseid:e.id},this.handlerSchema,e.id,void 0,!0)},n}(l),p=t(357),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),m=function(e){function n(n,t,i,o){var r=e.call(this,n)||this;return r.modName=t,r.handlerSchema=i,r.initResult=o,r.supportedFeatures=i.supportedfeatures,o&&o.jsResult&&o.jsResult.supportsFeature&&(r.supportsFeature=o.jsResult.supportsFeature.bind(o.jsResult)),r}return h(n,e),n.prototype.getData=function(e,n,t){var i=!(!this.handlerSchema.offlinefunctions||!Object.keys(this.handlerSchema.offlinefunctions).length),o=this.handlerSchema.downloadbutton;return{title:e.name,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,showDownloadButton:void 0!==o?o:i,action:function(e,n,t,i,o){e.preventDefault(),e.stopPropagation(),n.push("CoreSitePluginsModuleIndexPage",{title:t.name,module:t,courseId:i},o)}}},n.prototype.getIconSrc=function(){return this.handlerSchema.displaydata.icon},n.prototype.getMainComponent=function(e,n,t){return p.a},n}(l),_=t(140),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f){var p=e.call(this,n,t,i,o,r,l,s)||this;if(p.sitePluginsProvider=a,p.handlerSchema=f,p.ROOT_CACHE_KEY="CoreSitePluginsModulePrefetchHandler:",p.component=u,p.name=c,p.modName=d,p.isResource=f.isresource,f.updatesnames)try{p.updatesNames=new RegExp(f.updatesnames)}catch(e){}return p}return g(n,e),n.prototype.download=function(e,n,t){return this.prefetchPackage(e,n,!1,this.downloadPrefetchPlugin.bind(this),void 0,!1,t)},n.prototype.downloadPrefetchPlugin=function(e,n,t,i,o,r){var l=this;return this.sitesProvider.getSite(i).then(function(t){var i=[],s={courseid:n,cmid:e.id,userid:t.getUserId()};return i.push(l.downloadOrPrefetchFiles(t.id,e,n,o,r)),i.push(l.sitePluginsProvider.prefetchFunctions(l.component,s,l.handlerSchema,n,e,o,r,t)),Promise.all(i)})},n.prototype.downloadOrPrefetchFiles=function(e,n,t,i,o){var r=this;return this.loadContents(n,t,!0).then(function(){return r.getIntroFiles(n,t)}).then(function(t){var l=r.getContentDownloadableFiles(n),s=[];if(o)s.push(r.filepoolProvider.downloadOrPrefetchFiles(e,t,i,!1,r.component,n.id)),s.push(r.filepoolProvider.downloadOrPrefetchFiles(e,l,i,!1,r.component,n.id,o));else{var a=t.concat(l);s.push(r.filepoolProvider.downloadOrPrefetchFiles(e,a,i,!1,r.component,n.id))}return Promise.all(s)})},n.prototype.getDownloadSize=function(e,n,t){return Promise.resolve({size:-1,total:!1})},n.prototype.invalidateContent=function(e,n){var t=[],i=this.sitesProvider.getCurrentSite(),o=i.getId(),r={courseid:n,cmid:e,userid:i.getUserId()};t.push(this.filepoolProvider.invalidateFilesByComponent(o,this.component,e)),t.push(this.courseProvider.invalidateModule(e,o));for(var l in this.handlerSchema.offlinefunctions)i.wsAvailable(l)?t.push(i.invalidateWsCacheForKey(this.sitePluginsProvider.getCallWSCacheKey(l,r))):t.push(this.sitePluginsProvider.invalidateContent(this.component,l,r));return this.utils.allPromises(t)},n.prototype.isEnabled=function(){return!0},n.prototype.loadContents=function(e,n,t){return this.isResource?this.courseProvider.loadModuleContents(e,n,void 0,!1,t):Promise.resolve()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,!1,this.downloadPrefetchPlugin.bind(this),void 0,!0,i)},n}(_.a),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),b=function(e){function n(n,t,i,o,r){var l=e.call(this,n)||this;return l.title=t,l.plugin=i,l.handlerSchema=o,l.initResult=r,l.priority=o.priority,l}return y(n,e),n.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult},onlyInMore:!0}},n}(l),P=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),E=function(e){function n(n,t,i,o,l,s){var a=e.call(this,n)||this;return a.title=t,a.plugin=i,a.handlerSchema=o,a.initResult=l,a.sitePluginsProvider=s,a.priority=o.priority,a.type=o.type!=r.a.TYPE_COMMUNICATION?r.a.TYPE_NEW_PAGE:r.a.TYPE_COMMUNICATION,a}return P(n,e),n.prototype.isEnabledForUser=function(e,n,t,i){return!!this.sitePluginsProvider.isHandlerEnabledForUser(e.id,this.handlerSchema.restricttocurrentuser,this.initResult.restrict)&&this.sitePluginsProvider.isHandlerEnabledForCourse(n,this.handlerSchema.restricttoenrolledcourses,this.initResult.restrict)},n.prototype.getDisplayData=function(e,n){var t=this;return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,action:function(e,n,i,o){e.preventDefault(),e.stopPropagation(),n.push("CoreSitePluginsPluginPage",{title:t.title,component:t.plugin.component,method:t.handlerSchema.method,args:{courseid:o,userid:i.id},initResult:t.initResult})}}},n}(l),C=t(422),I=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),S=function(e){function n(n,t){var i=e.call(this,n)||this;return i.type=t,i}return I(n,e),n.prototype.getComponent=function(e){return C.a},n.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;return{type:e.type||e.datatype,name:o,value:i[o]}},n}(l),w=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),A=function(e){function n(n,t,i,o,r){var l=e.call(this,n)||this;return l.title=t,l.plugin=i,l.handlerSchema=o,l.initResult=r,l.priority=o.priority,l}return w(n,e),n.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",params:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},n}(l),T=t(1017),O=t(420),k=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),D=function(e){function n(n,t){var i=e.call(this)||this;return i.name=n,i.type=t,i}return k(n,e),n.prototype.getComponent=function(e){return O.a},n}(T.a),x=t(1018),M=t(421),U=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),N=function(e){function n(n,t,i,o){var r=e.call(this,n)||this;return r.name=t,r.type=i,r.hasTemplate=o,r}return U(n,e),n.prototype.handleQuestion=function(e,n){if(this.hasTemplate)return[M.a]},n}(x.a),R=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),F=function(e){function n(n,t,i,o,r,l){var s=e.call(this,n)||this;return s.processorName=t,s.title=i,s.plugin=o,s.handlerSchema=r,s.initResult=l,s}return R(n,e),n.prototype.getDisplayData=function(){return{priority:this.handlerSchema.priority,label:this.title,icon:this.handlerSchema.displaydata.icon,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},n}(l),L=t(423),H=function(){function e(e,n,t){this.name=e,this.ruleName=n,this.hasTemplate=t}return e.prototype.isPreflightCheckRequired=function(e,n,t,i){return this.hasTemplate},e.prototype.getFixedPreflightData=function(e,n,t,i,o){},e.prototype.getPreflightComponent=function(e){if(this.hasTemplate)return L.a},e.prototype.notifyPreflightCheckPassed=function(e,n,t,i,o){},e.prototype.notifyPreflightCheckFailed=function(e,n,t,i,o){},e.prototype.shouldShowTimeLeft=function(e,n,t){return!1},e}(),K=t(989),W=t(424),q=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),B=function(e){function n(n,t,i,o){var r=e.call(this,n)||this;return r.name=t,r.type=i,r.prefix=o,r}return q(n,e),n.prototype.getComponent=function(e,n,t){return W.a},n.prototype.getPluginName=function(e){var n=this.prefix+"pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},n}(K.a),j=t(991),G=t(425),z=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),V=function(e){function n(n,t,i,o){var r=e.call(this,n)||this;return r.name=t,r.type=i,r.prefix=o,r}return z(n,e),n.prototype.getComponent=function(e,n,t){return G.a},n.prototype.getPluginName=function(e){var n=this.prefix+"pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},n.prototype.isEnabledForEdit=function(){return!0},n}(j.a),$=t(620),Q=function(){function e(e,n){this.name=e,this.strategyName=n}return e.prototype.getComponent=function(e){return $.a},e.prototype.getOriginalValues=function(e,n){return Promise.resolve([])},e.prototype.hasDataChanged=function(e,n){return!1},e.prototype.isEnabled=function(){return!0},e.prototype.prepareAssessmentData=function(e,n){return Promise.resolve({})},e}();t.d(n,"a",function(){return Y});var Y=function(){function e(e,n,t,o,r,l,s,a,u,c,d,f,p,h,m,_,g,v,y,b,P,E,C,I,S,w,A,T,O,k,D){var x=this;this.sitesProvider=n,this.domUtils=t,this.mainMenuDelegate=o,this.moduleDelegate=r,this.userDelegate=l,this.langProvider=s,this.http=a,this.sitePluginsProvider=u,this.prefetchDelegate=c,this.compileProvider=d,this.utils=f,this.urlUtils=p,this.courseOptionsDelegate=h,this.courseFormatDelegate=_,this.profileFieldDelegate=g,this.textUtils=v,this.filepoolProvider=y,this.settingsDelegate=b,this.questionDelegate=P,this.questionBehaviourDelegate=E,this.questionProvider=C,this.messageOutputDelegate=I,this.accessRulesDelegate=S,this.assignSubmissionDelegate=w,this.translate=A,this.assignFeedbackDelegate=T,this.appProvider=O,this.workshopAssessmentStrategyDelegate=k,this.courseProvider=D,this.logger=e.getInstance("CoreSitePluginsHelperProvider"),m.on(i.a.LOGIN,function(e){x.fetchSitePlugins(e.siteId).then(function(n){e.siteId==x.sitesProvider.getCurrentSiteId()&&n.length&&x.loadSitePlugins(n).catch(function(e){x.logger.error(e)}).finally(function(){m.trigger(i.a.SITE_PLUGINS_LOADED,{},e.siteId)})})}),m.on(i.a.LOGOUT,function(){x.sitePluginsProvider.hasSitePluginsLoaded&&window.location.reload()})}return e.prototype.downloadStyles=function(e,n,t,i){var r=this;return this.sitesProvider.getSite(i).then(function(i){var l=t.styles&&t.styles.url;l&&!r.urlUtils.isAbsoluteURL(l)&&(l=r.textUtils.concatenatePaths(i.getURL(),l));var s=r.sitePluginsProvider.getHandlerUniqueName(e,n)+"#main";return r.filepoolProvider.getFilesByComponent(i.id,o.a.COMPONENT,s).then(function(e){e.forEach(function(e){e.url!=l&&r.filepoolProvider.removeFileByUrl(i.id,e.url).catch(function(){})})}).catch(function(){}),l?r.filepoolProvider.downloadUrl(i.id,l,!1,o.a.COMPONENT,s,0,void 0,void 0,void 0,t.styles.version).then(function(e){return r.http.get(e).toPromise()}).then(function(e){var n=e&&e.text();return"string"==typeof n?n:Promise.reject(null)}):""})},e.prototype.executeHandlerInit=function(e,n){return n.init?this.executeMethodAndJS(e,n.init,!0):Promise.resolve({})},e.prototype.executeMethodAndJS=function(e,n,t){var i=this,o=this.sitesProvider.getCurrentSiteId();return this.sitePluginsProvider.getContent(e.component,n,{},{getFromCache:!1,deleteCacheIfWSError:t}).then(function(e){if(!e.javascript||i.sitesProvider.getCurrentSiteId()!=o)return e;var n={};i.compileProvider.injectLibraries(n);var t=i.sitePluginsProvider.createDataForJS(e);for(var r in t)n[r]=t[r];return e.jsResult=i.compileProvider.executeJavascript(n,e.javascript),e})},e.prototype.fetchSitePlugins=function(e){var n=this,t=[];return this.sitesProvider.getSite(e).then(function(e){return n.sitePluginsProvider.isGetContentAvailable(e)?e.read("tool_mobile_get_plugins_supporting_mobile",{},{getFromCache:!1}).then(function(i){return i.plugins.forEach(function(i){n.isSitePluginEnabled(i,e)&&t.push(i)}),t}):t})},e.prototype.getPrefixForStrings=function(e){return e?"plugin."+e+".":""},e.prototype.getPrefixedString=function(e,n){return this.getPrefixForStrings(e)+n},e.prototype.isSitePluginEnabled=function(e,n){return!(n.isFeatureDisabled("sitePlugin_"+e.component+"_"+e.addon)||!e.handlers)&&(e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!(!e.parsedHandlers||!Object.keys(e.parsedHandlers).length))},e.prototype.loadLangStrings=function(e){if(e.parsedLang)for(var n in e.parsedLang){var t=this.getPrefixForStrings(e.addon);this.langProvider.addSitePluginsStrings(n,e.parsedLang[n],t)}},e.prototype.loadSitePlugin=function(e){var n=[];this.logger.debug("Load site plugin:",e),e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!e.parsedLang&&e.lang&&(e.parsedLang=this.textUtils.parseJSON(e.lang,null,this.logger.error.bind(this.logger,"Error parsing site plugin lang"))),this.sitePluginsProvider.hasSitePluginsLoaded=!0,this.loadLangStrings(e);for(var t in e.parsedHandlers)n.push(this.registerHandler(e,t,e.parsedHandlers[t]));return this.utils.allPromises(n)},e.prototype.loadSitePlugins=function(e){var n=this,t=[];return e.forEach(function(e){var i=n.loadSitePlugin(e);t.push(i),n.sitePluginsProvider.registerSitePluginPromise(e.component,i)}),this.utils.allPromises(t)},e.prototype.loadStyles=function(e,n,t,i,r,l){l=l||this.sitesProvider.getCurrentSiteId();var s=document.createElement("style"),a=this.sitePluginsProvider.getHandlerUniqueName(e,n);s.setAttribute("id","siteplugin-"+a),s.innerHTML=i,document.head.appendChild(s),this.filepoolProvider.treatCSSCode(l,t,i,o.a.COMPONENT,a,r).catch(function(){})},e.prototype.registerHandler=function(e,n,t){var i,o,r=this,l=[],s=this.sitesProvider.getCurrentSiteId();return l.push(this.downloadStyles(e,n,t,s).then(function(e){o=e}).catch(function(e){r.logger.error("Error getting styles for plugin",n,t,e)})),l.push(this.executeHandlerInit(e,t).then(function(e){i=e})),Promise.all(l).then(function(){o&&r.loadStyles(e,n,t.styles.url,o,t.styles.version,s);var l;switch(t.delegate){case"CoreMainMenuDelegate":l=Promise.resolve(r.registerMainMenuHandler(e,n,t,i));break;case"CoreCourseModuleDelegate":l=Promise.resolve(r.registerModuleHandler(e,n,t,i));break;case"CoreUserDelegate":l=Promise.resolve(r.registerUserProfileHandler(e,n,t,i));break;case"CoreCourseOptionsDelegate":l=Promise.resolve(r.registerCourseOptionHandler(e,n,t,i));break;case"CoreCourseFormatDelegate":l=Promise.resolve(r.registerCourseFormatHandler(e,n,t));break;case"CoreUserProfileFieldDelegate":l=Promise.resolve(r.registerUserProfileFieldHandler(e,n,t));break;case"CoreSettingsDelegate":l=Promise.resolve(r.registerSettingsHandler(e,n,t,i));break;case"CoreQuestionDelegate":l=Promise.resolve(r.registerQuestionHandler(e,n,t));break;case"CoreQuestionBehaviourDelegate":l=Promise.resolve(r.registerQuestionBehaviourHandler(e,n,t));break;case"AddonMessageOutputDelegate":l=Promise.resolve(r.registerMessageOutputHandler(e,n,t,i));break;case"AddonModQuizAccessRuleDelegate":l=Promise.resolve(r.registerQuizAccessRuleHandler(e,n,t));break;case"AddonModAssignFeedbackDelegate":l=Promise.resolve(r.registerAssignFeedbackHandler(e,n,t));break;case"AddonModAssignSubmissionDelegate":l=Promise.resolve(r.registerAssignSubmissionHandler(e,n,t));break;case"AddonWorkshopAssessmentStrategyDelegate":l=Promise.resolve(r.registerWorkshopAssessmentStrategyHandler(e,n,t));break;default:l=Promise.resolve()}return l.then(function(o){o&&r.sitePluginsProvider.setSitePluginHandler(o,{plugin:e,handlerName:n,handlerSchema:t,initResult:i})})}).catch(function(e){return Promise.reject("Error executing init method "+t.init+": "+e.message)})},e.prototype.registerComponentInitHandler=function(e,n,t,i,o){var r=this;if(t.method)return this.logger.debug("Register site plugin",e,t),this.executeMethodAndJS(e,t.method).then(function(l){var s=r.sitePluginsProvider.getHandlerUniqueName(e,n),a=o(s,l);if(t.methodTemplates=l.templates,t.methodJSResult=l.jsResult,t.methodOtherdata=l.otherdata,l&&l.jsResult)for(var u in a)"constructor"!=u&&"function"==typeof a[u]&&"function"==typeof l.jsResult[u]&&(a[u]=l.jsResult[u].bind(a));return i.registerHandler(a),e.component}).catch(function(n){r.logger.error("Error executing main method",e.component,t.method,n)});this.logger.warn("Ignore site plugin because it doesn't provide method",e,t)},e.prototype.registerAssignFeedbackHandler=function(e,n,t){var i=this;return this.registerComponentInitHandler(e,n,t,this.assignFeedbackDelegate,function(n,t){var o=e.component.replace("assignfeedback_",""),r=i.getPrefixForStrings(e.addon);return new B(i.translate,n,o,r)})},e.prototype.registerAssignSubmissionHandler=function(e,n,t){var i=this;return this.registerComponentInitHandler(e,n,t,this.assignSubmissionDelegate,function(n,t){var o=e.component.replace("assignsubmission_",""),r=i.getPrefixForStrings(e.addon);return new V(i.translate,n,o,r)})},e.prototype.registerCourseFormatHandler=function(e,n,t){this.logger.debug("Register site plugin in course format delegate:",e,t);var i=this.sitePluginsProvider.getHandlerUniqueName(e,n),o=e.component.replace("format_","");return this.courseFormatDelegate.registerHandler(new u(i,o,t)),o},e.prototype.registerCourseOptionHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in course option delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=this.getPrefixedString(e.addon,t.displaydata.title);return this.courseOptionsDelegate.registerHandler(new f(o,r,e,t,i,this.sitePluginsProvider)),o}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerMainMenuHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in main menu delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=this.getPrefixedString(e.addon,t.displaydata.title);return this.mainMenuDelegate.registerHandler(new b(o,r,e,t,i)),o}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerMessageOutputHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in message output delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=this.getPrefixedString(e.addon,t.displaydata.title),l=e.component.replace("message_","");return this.messageOutputDelegate.registerHandler(new F(o,l,r,e,t,i)),o}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerModuleHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in module delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=e.component.replace("mod_","");return this.moduleDelegate.registerHandler(new m(o,r,t,i)),t.offlinefunctions&&Object.keys(t.offlinefunctions).length&&this.prefetchDelegate.registerHandler(new v(this.translate,this.appProvider,this.utils,this.courseProvider,this.filepoolProvider,this.sitesProvider,this.domUtils,this.sitePluginsProvider,e.component,o,r,t)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerQuestionHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.questionDelegate,function(n,t){return new D(n,e.component)})},e.prototype.registerQuestionBehaviourHandler=function(e,n,t){var i=this;return this.registerComponentInitHandler(e,n,t,this.questionBehaviourDelegate,function(n,t){var o=e.component.replace("qbehaviour_","");return new N(i.questionProvider,n,o,t.templates.length)})},e.prototype.registerQuizAccessRuleHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.accessRulesDelegate,function(n,t){return new H(n,e.component,t.templates.length)})},e.prototype.registerSettingsHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in settings delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=this.getPrefixedString(e.addon,t.displaydata.title);return this.settingsDelegate.registerHandler(new A(o,r,e,t,i)),o}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerUserProfileHandler=function(e,n,t,i){if(t.displaydata){this.logger.debug("Register site plugin in user profile delegate:",e,t,i);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=this.getPrefixedString(e.addon,t.displaydata.title);return this.userDelegate.registerHandler(new E(o,r,e,t,i,this.sitePluginsProvider)),o}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},e.prototype.registerUserProfileFieldHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.profileFieldDelegate,function(n,t){var i=e.component.replace("profilefield_","");return new S(n,i)})},e.prototype.registerWorkshopAssessmentStrategyHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.workshopAssessmentStrategyDelegate,function(n,t){var i=e.component.replace("workshopform_","");return new Q(n,i)})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(138);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(168);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(144),t(1211),t(1212);var i=function(){return function(e,n,t,i){e.registerHandler(n),t.registerHandler(i)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(144);var i=t(16),o=t(481),r=function(){function e(e){this.courseCompletionProvider=e,this.name="AddonCourseCompletion",this.priority=200}return e.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},e.prototype.isEnabledForCourse=function(e,n,t,o){var r=this;return(!n||n.type!=i.a.ACCESS_GUEST)&&this.courseCompletionProvider.isPluginViewEnabledForCourse(e).then(function(n){return!!n&&r.courseCompletionProvider.isPluginViewEnabledForUser(e)})},e.prototype.getDisplayData=function(e,n){return{title:"addon.coursecompletion.completionmenuitem",class:"addon-coursecompletion-course-handler",component:o.a}},e.prototype.invalidateEnabledForCourse=function(e,n,t){return this.courseCompletionProvider.invalidateCourseCompletion(e)},e.prototype.prefetch=function(e){return this.courseCompletionProvider.getCompletion(e.id,void 0,{getFromCache:!1,emergencyCache:!1})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var i=t(100),o=t(13),r=t(45),l=(t(144),function(){function e(e,n){var t=this;this.courseCompletionProvider=n,this.name="AddonCourseCompletion",this.type=i.a.TYPE_NEW_PAGE,this.priority=200,this.enabledCache={},e.on(o.a.LOGOUT,function(){t.enabledCache={}}),e.on(r.a.PROFILE_REFRESHED,function(e){delete t.enabledCache[e.userId+"-"+e.courseId]})}return e.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},e.prototype.isEnabledForUser=function(e,n,t,i){var o=this;return!!n&&this.courseCompletionProvider.isPluginViewEnabledForCourse(n).then(function(t){if(!t)return!1;var i=e.id+"-"+n;return void 0!==o.enabledCache[i]?o.enabledCache[i]:o.courseCompletionProvider.isPluginViewEnabledForUser(n,e.id).then(function(e){return o.enabledCache[i]=e,e})})},e.prototype.getDisplayData=function(e,n){return{icon:"checkbox-outline",title:"addon.coursecompletion.coursecompletion",class:"addon-coursecompletion-handler",action:function(e,n,t,i){e.preventDefault(),e.stopPropagation(),n.push("AddonCourseCompletionReportPage",{courseId:i,userId:t.id})}}},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1214),t(1216),t(1218),t(1220),t(1222);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1215),t(622);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(622),o=function(){function e(){this.name="AddonUserProfileFieldCheckbox",this.type="checkbox"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;if(void 0!==i[o])return{type:"checkbox",name:o,value:i[o]?1:0}},e.prototype.getComponent=function(e){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1217),t(623);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(623),o=function(){function e(){this.name="AddonUserProfileFieldDatetime",this.type="datetime"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;if(i[o]){var r=new Date(i[o]).getTime();return{type:"datetime",name:"profile_field_"+e.shortname,value:Math.round(r/1e3)}}},e.prototype.getComponent=function(e){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1219),t(624);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(624),o=function(){function e(){this.name="AddonUserProfileFieldMenu",this.type="menu"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;if(i[o])return{type:"menu",name:o,value:i[o]}},e.prototype.getComponent=function(e){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1221),t(625);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(625),o=function(){function e(e){this.textUtils=e,this.name="AddonUserProfileFieldText",this.type="text"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;return{type:"text",name:o,value:this.textUtils.cleanTags(i[o])}},e.prototype.getComponent=function(e){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1223),t(626);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(626),o=function(){function e(e){this.textUtils=e,this.name="AddonUserProfileFieldTextarea",this.type="textarea"}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t,i){var o="profile_field_"+e.shortname;if(i[o]){var r=i[o]||"";return r=this.textUtils.formatHtmlLines(r),{type:"textarea",name:o,value:JSON.stringify({text:r,format:1})}}},e.prototype.getComponent=function(e){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1226);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(627);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(627),r=function(e){function n(){var n=e.call(this)||this;return n.name="AddonBlockActivityModules",n.blockName="activity_modules",n}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_activitymodules.pluginname",class:"addon-block-activitymodules",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1229);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(628);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(628),r=function(e){function n(n,t){var i=e.call(this)||this;return i.coursesProvider=n,i.sitesProvider=t,i.name="AddonBlockMyOverview",i.blockName="myoverview",i}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!this.coursesProvider.isMyCoursesDisabledInSite()},n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_myoverview.pluginname",class:"addon-block-myoverview",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1232);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(629);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(629),r=function(e){function n(){var n=e.call(this)||this;return n.name="AddonBlockSiteMainMenu",n.blockName="site_main_menu",n}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_sitemainmenu.pluginname",class:"addon-block-sitemainmenu",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(274),t(1235);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(630);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(630),r=function(e){function n(n,t,i){var o=e.call(this)||this;return o.timelineProvider=n,o.coursesProvider=t,o.sitesProvider=i,o.name="AddonBlockTimeline",o.blockName="timeline",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){var e=this;return this.timelineProvider.isAvailable().then(function(n){return n&&(e.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!e.coursesProvider.isMyCoursesDisabledInSite())})},n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_timeline.pluginname",class:"addon-block-timeline",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1238);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(632);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(632),r=function(e){function n(){var n=e.call(this)||this;return n.name="AddonBlockRecentlyAccessedCourses",n.blockName="recentlyaccessedcourses",n}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_recentlyaccessedcourses.pluginname",class:"addon-block-recentlyaccessedcourses",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1241),t(429);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(633);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(633),r=function(e){function n(){var n=e.call(this)||this;return n.name="AddonBlockRecentlyAccessedItems",n.blockName="recentlyaccesseditems",n}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.block_recentlyaccesseditems.pluginname",class:"addon-block-recentlyaccesseditems",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1244);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(634);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(634),r=function(e){function n(){var n=e.call(this)||this;return n.name="AddonBlockStarredCourses",n.blockName="starredcourses",n}return Object(i.__extends)(n,e),n.prototype.getDisplayData=function(e,n,t,i){return{title:"addon.starredcourses.pluginname",class:"addon-block-starredcourses",component:o.a}},n}(t(219).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1246),t(96),t(1247),t(1248),t(1249),t(1250),t(1251),t(1252),t(251),t(1253),t(1254);var i=t(208),o=(t(115),t(619),t(1255),function(){return function(e,n,t,o,r,l,s,a,u,c,d,f,p,h){e.registerHandler(n),t.registerHandler(o),r.registerHandler(l),r.registerHandler(c),r.registerHandler(d),r.registerHandler(f),r.registerHandler(p),r.registerHandler(h),s.register(a),u.registerSiteTableMigration({name:"mma_mod_data_entry",newName:i.a.DATA_ENTRY_TABLE,fields:[{name:"fields",type:"object"},{name:"dataAndEntry",delete:!0}]})}}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(478),o=(t(96),t(40)),r=function(){function e(e,n){this.courseProvider=e,this.dataProvider=n,this.name="AddonModData",this.modName="data",this.supportedFeatures=(t={},t[o.a.FEATURE_GROUPS]=!0,t[o.a.FEATURE_GROUPINGS]=!0,t[o.a.FEATURE_MOD_INTRO]=!0,t[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[o.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[o.a.FEATURE_GRADE_HAS_GRADE]=!0,t[o.a.FEATURE_GRADE_OUTCOMES]=!0,t[o.a.FEATURE_BACKUP_MOODLE2]=!0,t[o.a.FEATURE_SHOW_DESCRIPTION]=!0,t[o.a.FEATURE_RATE]=!0,t[o.a.FEATURE_COMMENT]=!0,t);var t}return e.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},e.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_data-handler",showDownloadButton:!0,action:function(e,n,t,i,o){n.push("AddonModDataIndexPage",{module:t,courseId:i},o)}}},e.prototype.getMainComponent=function(e,n){return i.a},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModData","data")||this;return t.name="AddonModDataLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(59),r=t(96),l=function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.dataProvider=n,r.courseProvider=t,r.domUtils=i,r.eventsProvider=o,r.name="AddonModDataApproveLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModData",r.pattern=/\/mod\/data\/view\.php.*([\?\&](d|approve|disapprove)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActivityCourseIdIfNotSet=function(e,n,t){return t?Promise.resolve(t):this.courseProvider.getModuleBasicInfoByInstance(e,"data",n).then(function(e){return e.course})},n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var l=o.domUtils.showModalLoading(),s=parseInt(t.d,10),a=parseInt(t.approve,10)||parseInt(t.disapprove,10),u=!!parseInt(t.approve,10);o.getActivityCourseIdIfNotSet(s,e,i).then(function(n){return i=n,o.dataProvider.approveEntry(s,a,u,i,e).catch(function(e){return o.domUtils.showErrorModalDefault(e,"addon.mod_data.errorapproving",!0),Promise.reject(null)})}).then(function(){var n=[];return n.push(o.dataProvider.invalidateEntryData(s,a,e)),n.push(o.dataProvider.invalidateEntriesData(s,e)),Promise.all(n)}).then(function(){o.eventsProvider.trigger(r.a.ENTRY_CHANGED,{dataId:s,entryId:a},e),o.domUtils.showToast(u?"addon.mod_data.recordapproved":"addon.mod_data.recorddisapproved",!0,3e3)}).finally(function(){l.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.d&&(void 0!==t.approve||void 0!==t.disapprove)&&this.dataProvider.isPluginEnabled(e)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(59)),r=t(96),l=function(e){function n(n,t,i,o,r){var l=e.call(this)||this;return l.dataProvider=n,l.courseProvider=t,l.domUtils=i,l.eventsProvider=o,l.translate=r,l.name="AddonModDataDeleteLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModData",l.pattern=/\/mod\/data\/view\.php.*([\?\&](d|delete)=\d+)/,l}return Object(i.__extends)(n,e),n.prototype.getActivityCourseIdIfNotSet=function(e,n,t){return t?Promise.resolve(t):this.courseProvider.getModuleBasicInfoByInstance(e,"data",n).then(function(e){return e.course})},n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){o.domUtils.showConfirm(o.translate.instant("addon.mod_data.confirmdeleterecord")).then(function(){var n=o.domUtils.showModalLoading(),l=parseInt(t.d,10),s=parseInt(t.delete,10);return o.getActivityCourseIdIfNotSet(l,e,i).then(function(n){return i=n,o.dataProvider.deleteEntry(l,s,i,e).catch(function(e){return o.domUtils.showErrorModalDefault(e,"addon.mod_data.errordeleting",!0),Promise.reject(null)})}).then(function(){var n=[];return n.push(o.dataProvider.invalidateEntryData(l,s,e)),n.push(o.dataProvider.invalidateEntriesData(l,e)),Promise.all(n)}).then(function(){o.eventsProvider.trigger(r.a.ENTRY_CHANGED,{dataId:l,entryId:s,deleted:!0},e),o.domUtils.showToast("addon.mod_data.recorddeleted",!0,3e3)}).finally(function(){n.dismiss()})}).catch(function(){})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.d&&void 0!==t.delete&&this.dataProvider.isPluginEnabled(e)},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(96),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.dataProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModDataShowLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModData",r.pattern=/\/mod\/data\/view\.php.*([\?\&](d|rid|page|group|mode)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading(),r=parseInt(t.d,10),l=parseInt(t.rid,10)||!1,s=parseInt(t.group,10)||!1,a=parseInt(t.page,10)||!1;o.courseProvider.getModuleBasicInfoByInstance(r,"data",e).then(function(i){var r={module:i,courseId:i.course};return s&&(r.group=s),t.mode&&"single"==t.mode?r.page=a||1:l&&(r.entryId=l),o.linkHelper.goInSite(n,"AddonModDataEntryPage",r,e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.d&&(!!(t.mode&&"single"==t.mode||void 0!==t.rid)&&this.dataProvider.isPluginEnabled(e))},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(59),r=(t(96),function(e){function n(n,t,i,o){var r=e.call(this)||this;return r.linkHelper=n,r.dataProvider=t,r.courseProvider=i,r.domUtils=o,r.name="AddonModDataEditLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModData",r.pattern=/\/mod\/data\/edit\.php.*([\?\&](d|rid)=\d+)/,r}return Object(i.__extends)(n,e),n.prototype.getActions=function(e,n,t,i){var o=this;return[{action:function(e,n){var i=o.domUtils.showModalLoading(),r=parseInt(t.d,10),l=parseInt(t.rid,10)||!1;o.courseProvider.getModuleBasicInfoByInstance(r,"data",e).then(function(t){var i={module:t,courseId:t.course};return l&&(i.entryId=l),o.linkHelper.goInSite(n,"AddonModDataEditPage",i,e)}).finally(function(){i.dismiss()})}}]},n.prototype.isEnabled=function(e,n,t,i){return void 0!==t.d&&this.dataProvider.isPluginEnabled(e)},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(99),r=(t(4),t(96),function(e){function n(n,t,i){var o=e.call(this,n,t,"AddonModData","data")||this;return o.dataProvider=i,o.name="AddonModDataListLinkHandler",o}return Object(i.__extends)(n,e),n.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(140)),r=t(96),l=(t(251),function(e){function n(n,t,i,o,l,s,a,u,c,d,f,p){var h=e.call(this,n,t,i,o,l,s,a)||this;return h.dataProvider=u,h.timeUtils=c,h.dataHelper=d,h.groupsProvider=f,h.commentsProvider=p,h.name="AddonModData",h.modName="data",h.component=r.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^entries$|^gradeitems$|^outcomes$|^comments$|^ratings/,h}return Object(i.__extends)(n,e),n.prototype.getAllUniqueEntries=function(e,n,t,i,o){var r=this;void 0===t&&(t=!1),void 0===i&&(i=!1);var l=n.map(function(n){return r.dataProvider.fetchAllEntries(e,n.id,void 0,void 0,void 0,t,i,o)});return Promise.all(l).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){n[e.id]=e})}),r.utils.objectToArray(n)})},n.prototype.getDatabaseInfoHelper=function(e,n,t,i,o,r){var l=this;void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1);var s,a=[],u=[],c=[];return r=r||this.sitesProvider.getCurrentSiteId(),this.dataProvider.getDatabase(n,e.id,r,i).then(function(n){return c=l.getIntroFilesFromInstance(e,n),s=n,l.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,r).then(function(e){return e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),a=e.groups,l.getAllUniqueEntries(s.id,a,i,o,r)})}).then(function(e){return u=e,c=c.concat(l.getEntriesFiles(u)),{database:s,groups:a,entries:u,files:c}}).catch(function(e){return t?{database:s,groups:a,entries:u,files:c}:Promise.reject(e)})},n.prototype.getEntriesFiles=function(e){var n=[];return e.forEach(function(e){e.contents.forEach(function(e){n=n.concat(e.files)})}),n},n.prototype.getFiles=function(e,n,t){return this.getDatabaseInfoHelper(e,n,!0).then(function(e){return e.files})},n.prototype.getIntroFiles=function(e,n){var t=this;return this.dataProvider.getDatabase(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},n.prototype.invalidateContent=function(e,n){return this.dataProvider.invalidateContent(e,n)},n.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.dataProvider.invalidateDatabaseData(n)),t.push(this.dataProvider.invalidateDatabaseAccessInformationData(e.instance)),Promise.all(t)},n.prototype.isDownloadable=function(e,n){var t=this;return this.dataProvider.getDatabase(n,e.id,void 0,!0).then(function(e){return t.dataProvider.getDatabaseAccessInformation(e.id).then(function(n){if(!n.timeavailable){var i=t.timeUtils.timestamp();if(e.timeavailablefrom&&i<e.timeavailablefrom)return!1;if(e.timeavailableto&&i>e.timeavailableto)return!1}return!0})})},n.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},n.prototype.prefetch=function(e,n,t,i){return this.prefetchPackage(e,n,t,this.prefetchDatabase.bind(this))},n.prototype.prefetchDatabase=function(e,n,t,i){var o=this;return this.getDatabaseInfoHelper(e,n,!1,!1,!0,i).then(function(n){var t=n.database,r=[];return r.push(o.dataProvider.getFields(t.id,!1,!0,i)),r.push(o.filepoolProvider.addFilesToQueue(i,n.files,o.component,e.id)),n.groups.forEach(function(e){r.push(o.dataProvider.getDatabaseAccessInformation(t.id,e.id,!1,!0,i))}),n.entries.forEach(function(e){r.push(o.dataProvider.getEntry(t.id,e.id,i)),t.comments&&r.push(o.commentsProvider.getComments("module",t.coursemodule,"mod_data",e.id,"database_entry",0,i))}),r.push(o.courseProvider.getModuleBasicInfoByInstance(t.id,"data",i)),Promise.all(r)})},n}(o.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(293);var i=function(){function e(e){this.dataSync=e,this.name="AddonModDataSyncCronHandler"}return e.prototype.execute=function(e){return this.dataSync.syncAllDatabases(e)},e.prototype.getInterval=function(){return this.dataSync.syncInterval},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1256),t(1258),t(1260),t(1262),t(1264),t(1266),t(1268),t(1270),t(1272),t(1274),t(1275),t(1277);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1257),t(115),t(635);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(635),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldCheckboxHandler",this.type="checkbox"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,i="f_"+e.id+"_allreq",o=[];return!!(n[t]&&n[t].length>0)&&(o.push({name:t,value:n[t]}),n[i]&&o.push({name:i,value:!0}),o)},e.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||[]}]},e.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",n["f_"+e.id].join("##")!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[""]&&n[""].join("##")||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1259),t(115),t(636);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(636),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldDateHandler",this.type="date"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,i="f_"+e.id+"_z";if(n[i]&&"string"==typeof n[t]){var o=[],r=n[t].substr(0,10).split("-"),l=r[1],s=r[2];return o.push({name:t+"_y",value:r[0]}),o.push({name:t+"_m",value:l}),o.push({name:t+"_d",value:s}),o.push({name:i,value:1}),o}return!1},e.prototype.getFieldEditData=function(e,n,t){var i="f_"+e.id;if("string"==typeof n[i]){var o=[],r=n[i].substr(0,10).split("-"),l=r[1],s=r[2];return o.push({fieldid:e.id,subfield:"year",value:r[0]}),o.push({fieldid:e.id,subfield:"month",value:l}),o.push({fieldid:e.id,subfield:"day",value:s}),o}return!1},e.prototype.hasFieldDataChanged=function(e,n,t){var i="f_"+e.id,o=n[i]&&n[i].substr(0,10)||"";return t=t&&t.content&&new Date(1e3*t.content).toISOString().substr(0,10)||"",o!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&!(n.length<2)&&n[0].value&&n[1].value&&n[2].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){var i=Date.UTC(n.year||"",n.month?n.month-1:null,n.day||null);return i=Math.floor(i/1e3),e.content=i||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1261),t(115),t(637);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var i=t(96),o=t(637),r=function(){function e(e,n,t){this.translate=e,this.fileSessionprovider=n,this.fileUploaderProvider=t,this.name="AddonModDataFieldFileHandler",this.type="file"}return e.prototype.getComponent=function(e,n){return o.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){var i=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:i}]},e.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(i.a.COMPONENT,e.dataid+"_"+e.id)},e.prototype.hasFieldDataChanged=function(e,n,t){var o=this.fileSessionprovider.getFiles(i.a.COMPONENT,e.dataid+"_"+e.id)||[],r=t&&t.files||[];return r.length&&(r=[r[0]]),this.fileUploaderProvider.areFileListDifferent(o,r)},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return n&&n.file&&n.file.offline>0&&t&&t.length>0?(e.content=t[0].filename,e.files=[t[0]]):n&&n.file&&n.file.online&&n.file.online.length>0&&(e.content=n.file.online[0].filename,e.files=[n.file.online[0]]),e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1263),t(115),t(638);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(638),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldLatlongHandler",this.type="latlong"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){var i="f_"+e.id;return[{fieldid:e.id,subfield:"0",value:n[i+"_0"]||""},{fieldid:e.id,subfield:"1",value:n[i+"_1"]||""}]},e.prototype.hasFieldDataChanged=function(e,n,t){var i="f_"+e.id;return(n[i+"_0"]||"")!=(t&&t.content||"")||(n[i+"_1"]||"")!=(t&&t.content1||"")},e.prototype.getFieldsNotifications=function(e,n){var t=0;return n.forEach(function(e){void 0!==e.value&&""!=e.value&&t++}),1==t?this.translate.instant("addon.mod_data.latlongboth"):!(!e.required||0!=t)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[0]||"",e.content1=n[1]||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1265),t(115),t(639);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(639),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldMenuHandler",this.type="menu"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){var i="f_"+e.id;return!!n[i]&&[{fieldid:e.id,value:n[i]}]},e.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1267),t(115),t(640);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(640),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldMultimenuHandler",this.type="multimenu"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,i="f_"+e.id+"_allreq";if(n[t]&&n[t].length>0){var o=[];return o.push({name:t,value:n[t]}),n[i]&&o.push({name:i,value:!0}),o}return!1},e.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||[]}]},e.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",n["f_"+e.id].join("##")!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[""]&&n[""].join("###")||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1269),t(115),t(642);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(330)),r=t(642),l=function(e){function n(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModDataFieldNumberHandler",t.type="number",t}return Object(i.__extends)(n,e),n.prototype.getComponent=function(e,n){return r.a},n.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},n.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&""!=n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1271),t(115),t(643);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var i=t(96),o=t(643),r=function(){function e(e,n,t){this.translate=e,this.fileSessionprovider=n,this.fileUploaderProvider=t,this.name="AddonModDataFieldPictureHandler",this.type="picture"}return e.prototype.getComponent=function(e,n){return o.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){var i=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:i},{fieldid:e.id,subfield:"alttext",value:n["f_"+e.id+"_alttext"]}]},e.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(i.a.COMPONENT,e.dataid+"_"+e.id)},e.prototype.hasFieldDataChanged=function(e,n,t){var i=n["f_"+e.id+"_alttext"]||"",o=t&&t.content1||"",r=this.getFieldEditFiles(e)||[],l=t&&t.files||[];if(l.length>0){var s=t&&t.content||"",a=l.find(function(e){return e.filename==s});a&&(l=[a])}else l=[];return i!=o||this.fileUploaderProvider.areFileListDifferent(r,l)},e.prototype.getFieldsNotifications=function(e,n){if(e.required){if(!n||!n.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");if(!n.some(function(e){return void 0!==e.subfield&&"file"==e.subfield&&!!e.value}))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},e.prototype.overrideData=function(e,n,t){return n&&n.file&&n.file.offline>0&&t&&t.length>0?(e.content=t[0].filename,e.files=[t[0]]):n&&n.file&&n.file.online&&n.file.online.length>0&&(e.content=n.file.online[0].filename,e.files=[n.file.online[0]]),e.content1=n.alttext||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1273),t(115),t(644);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var i=t(644),o=function(){function e(e){this.translate=e,this.name="AddonModDataFieldRadiobuttonHandler",this.type="radiobutton"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},e.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||""}]},e.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},e.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},e.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(330),t(115),t(641);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1276),t(115),t(645);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(330)),r=t(645),l=function(e){function n(n,t){var i=e.call(this,n)||this;return i.translate=n,i.textUtils=t,i.name="AddonModDataFieldTextareaHandler",i.type="textarea",i}return Object(i.__extends)(n,e),n.prototype.getComponent=function(e,n){return r.a},n.prototype.getFieldEditData=function(e,n,t){var i="f_"+e.id,o=this.getFieldEditFiles(e,n,t),r=this.textUtils.restorePluginfileUrls(n[i]||"",o);return r=this.textUtils.formatHtmlLines(r),this.textUtils.htmlIsBlank(r)&&(r=""),[{fieldid:e.id,value:r},{fieldid:e.id,subfield:"content1",value:1},{fieldid:e.id,subfield:"itemid",files:o}]},n.prototype.getFieldEditFiles=function(e,n,t){return t&&t.files||[]},n.prototype.getFieldsNotifications=function(e,n){var t=this;if(e.required){if(!n||!n.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");if(!n.some(function(e){return!e.subfield&&t.textUtils.htmlIsBlank(e.value)}))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},n.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e.content.length>0&&e.files&&e.files.length>0&&(e.content=this.textUtils.replacePluginfileUrls(e.content,e.files)),e},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1278),t(115),t(646);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=(t(4),t(330)),r=t(646),l=function(e){function n(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModDataFieldUrlHandler",t.type="url",t}return Object(i.__extends)(n,e),n.prototype.getComponent=function(e,n){return r.a},n.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,subfield:"0",value:n["f_"+e.id]||""}]},n.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1280),t(1281);var i=function(){return function(e,n,t,i){e.registerHandler(n),t.registerHandler(i)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(40),o=function(){function e(){this.name="AddonModLabel",this.modName="label",this.supportedFeatures=(e={},e[i.a.FEATURE_MOD_ARCHETYPE]=i.a.MOD_ARCHETYPE_RESOURCE,e[i.a.FEATURE_IDNUMBER]=!0,e[i.a.FEATURE_GROUPS]=!1,e[i.a.FEATURE_GROUPINGS]=!1,e[i.a.FEATURE_MOD_INTRO]=!0,e[i.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!1,e[i.a.FEATURE_GRADE_HAS_GRADE]=!1,e[i.a.FEATURE_GRADE_OUTCOMES]=!1,e[i.a.FEATURE_BACKUP_MOODLE2]=!0,e[i.a.FEATURE_SHOW_DESCRIPTION]=!0,e);var e}return e.prototype.isEnabled=function(){return!0},e.prototype.getData=function(e,n,t){var i=e.description;return e.description="",{icon:"",title:i,a11yTitle:"",class:"addon-mod-label-handler"}},e.prototype.getMainComponent=function(e,n,t){},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(88),r=function(e){function n(n){var t=e.call(this,n,"AddonModLabel","label")||this;return t.name="AddonModLabelLinkHandler",t}return Object(i.__extends)(n,e),n}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(452),t(1283);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(452);var i=function(){function e(e){this.airnotifierProvider=e,this.name="AddonMessageOutputAirnotifier",this.processorName="airnotifier"}return e.prototype.isEnabled=function(){return this.airnotifierProvider.isEnabled()},e.prototype.getDisplayData=function(e){return{priority:600,label:"addon.messageoutput_airnotifier.processorsettingsdesc",icon:"settings",page:"AddonMessageOutputAirnotifierDevicesPage"}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1285),t(1287),t(1289),t(1291),t(1292),t(1294),t(1296),t(1298),t(1300),t(1302);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1286);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptive",this.type="adaptive"}return e.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1288);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptiveNoPenalty",this.type="adaptivenopenalty"}return e.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1290),t(430);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(430),o=function(){function e(e,n,t){this.questionDelegate=e,this.questionHelper=n,this.deferredFeedbackHandler=t,this.name="AddonQbehaviourDeferredCBM",this.type="deferredcbm"}return e.prototype.determineNewState=function(e,n,t,i){return this.deferredFeedbackHandler.determineNewStateDeferred(e,n,t,i,this.isCompleteResponse.bind(this),this.isSameResponse.bind(this))},e.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourCBM(n))return[i.a]},e.prototype.isCompleteResponse=function(e,n){var t=this.questionDelegate.isCompleteResponse(e,n);return t>0?n["-certainty"]?1:0:t},e.prototype.isEnabled=function(){return!0},e.prototype.isSameResponse=function(e,n,t,i,o){var r=this.questionDelegate.isSameResponse(e,t,o);return r?n["-certainty"]==i["-certainty"]:r},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(647);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1293);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(430),o=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateCBM",this.type="immediatecbm"}return e.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourButtons(n),this.questionHelper.extractQbehaviourCBM(n))return[i.a]},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1295);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateFeedback",this.type="immediatefeedback"}return e.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(1297),t(648);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(648),o=function(){function e(e,n){this.questionHelper=e,this.questionProvider=n,this.name="AddonQbehaviourInformationItem",this.type="informationitem"}return e.prototype.determineNewState=function(e,n,t,i){return this.questionProvider.getState(t.answers["-seen"]?"complete":t.state||"todo")},e.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourSeenInput(n))return[i.a]},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1299);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourInteractive",this.type="interactive"}return e.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1301);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.questionHelper=e,this.name="AddonQbehaviourInteractiveCountback",this.type="interactivecountback"}return e.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1303);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.questionDelegate=e,this.questionProvider=n,this.name="AddonQbehaviourManualGraded",this.type="manualgraded"}return e.prototype.determineNewState=function(e,n,t,i){return this.determineNewStateManualGraded(e,n,t,i)},e.prototype.determineNewStateManualGraded=function(e,n,t,i,o,r){var l=this;return this.questionProvider.getQuestion(e,n,t.slot,i).catch(function(){return t}).then(function(s){var a=l.questionProvider.getState(s.state);return a.finished||!a.active?a:l.questionProvider.getQuestionAnswers(e,n,t.slot,!1,i).then(function(e){var n=l.questionProvider.getBasicAnswers(t.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var i=l.questionProvider.getBasicAnswers(e);if(r){if(r(t,e,i,t.answers,n))return a}else if(l.questionDelegate.isSameResponse(t,i,n))return a;var s,u;return s=o?o(t,t.answers):l.questionDelegate.isCompleteResponse(t,n),u=s<0?"cannotdeterminestatus":s>0?"complete":"todo",l.questionProvider.getState(u)})})},e.prototype.isEnabled=function(){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1305),t(1306),t(1308),t(1310),t(1312),t(1314),t(1316),t(1318),t(1320),t(1322),t(1323),t(1325),t(1326),t(1328),t(1330),t(1332);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(431),t(432);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1307);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(331),o=function(){function e(e){this.multichoiceHandler=e,this.name="AddonQtypeCalculatedMulti",this.type="qtype_calculatedmulti"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return this.multichoiceHandler.isCompleteResponseSingle(n)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.multichoiceHandler.isGradableResponseSingle(n)},e.prototype.isSameResponse=function(e,n,t){return this.multichoiceHandler.isSameResponseSingle(n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1309);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(432),o=function(){function e(e){this.calculatedHandler=e,this.name="AddonQtypeCalculatedSimple",this.type="qtype_calculatedsimple"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return this.calculatedHandler.isCompleteResponse(e,n)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.calculatedHandler.isGradableResponse(e,n)},e.prototype.isSameResponse=function(e,n,t){return this.calculatedHandler.isSameResponse(e,n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1311),t(650);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(650),o=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeDdImageOrText",this.type="qtype_ddimageortext"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){for(var t in n){var i=n[t];if(!i||"0"===i)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){for(var t in n){var i=n[t];if(i&&"0"!==i)return 1}return 0},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1313),t(651);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(651),o=function(){function e(e,n){this.questionProvider=e,this.questionHelper=n,this.name="AddonQtypeDdMarker",this.type="qtype_ddmarker"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){for(var t in n)if(n[t])return 1;return 0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e.prototype.getAdditionalDownloadableFiles=function(e){return this.questionHelper.extractQuestionScripts(e),e.amdArgs&&void 0!==e.amdArgs[1]?[e.amdArgs[1]]:[]},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1315),t(652);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(652),o=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeDdwtos",this.type="qtype_ddwtos"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){for(var t in n){var i=n[t];if(!i||"0"===i)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){for(var t in n){var i=n[t];if(i&&"0"!==i)return 1}return 0},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1317),t(653);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(653),o=function(){function e(){this.name="AddonQtypeDescription",this.type="qtype_description"}return e.prototype.getBehaviour=function(e,n){return"informationitem"},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isEnabled=function(){return!0},e.prototype.validateSequenceCheck=function(e,n){return!0},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1319),t(654);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(654),o=function(){function e(e,n,t,i){this.utils=e,this.questionHelper=n,this.textUtils=t,this.domUtils=i,this.name="AddonQtypeEssay",this.type="qtype_essay"}return e.prototype.getBehaviour=function(e,n){return"manualgraded"},e.prototype.getComponent=function(e,n){return i.a},e.prototype.getPreventSubmitMessage=function(e){var n=this.domUtils.convertToElement(e.html);return n.querySelector("div[id*=filemanager]")?"core.question.errorattachmentsnotsupported":this.questionHelper.hasDraftFileUrls(n.innerHTML)?"core.question.errorinlinefilesnotsupported":void 0},e.prototype.isCompleteResponse=function(e,n){var t=this.domUtils.convertToElement(e.html),i=n.answer&&""!==n.answer;return!!t.querySelector("div[id*=filemanager]")?-1:i?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return 0},e.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},e.prototype.prepareAnswers=function(e,n,t,i){var o=this.domUtils.convertToElement(e.html).querySelector("textarea[name*=_answer]");o&&void 0!==n[o.name]&&(n[o.name]=this.textUtils.formatHtmlLines(n[o.name]))},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1321),t(655);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(655),o=function(){function e(e){this.questionProvider=e,this.name="AddonQtypeGapSelect",this.type="qtype_gapselect"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){for(var t in n){var i=n[t];if(!i||"0"===i)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){for(var t in n){if(n[t])return 1}return 0},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(656),t(433);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1324),t(657);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(657),o=function(){function e(e,n){this.questionProvider=e,this.questionHelper=n,this.name="AddonQtypeMultiAnswer",this.type="qtype_multianswer"}return e.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){var t=this.questionProvider.getBasicAnswers(this.questionHelper.getAllInputNamesFromHtml(e.html));for(var i in t){var o=n[i];if(!o&&!1!==o&&0!==o)return 0}return 1},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){for(var t in n){var i=n[t];if(i||!1===i)return 1}return 0},e.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},e.prototype.validateSequenceCheck=function(e,n){return e.sequencecheck==n||2==e.sequencecheck&&"todo"==e.state&&"1"==n},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(649),t(331);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1327);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var i=t(0),o=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="AddonQtypeNumerical",n.type="qtype_numerical",n}return Object(i.__extends)(n,e),n}(t(431).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1329);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(433),o=function(){function e(e){this.matchHandler=e,this.name="AddonQtypeRandomSaMatch",this.type="qtype_randomsamatch"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return this.matchHandler.isCompleteResponse(e,n)},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.matchHandler.isGradableResponse(e,n)},e.prototype.isSameResponse=function(e,n,t){return this.matchHandler.isSameResponse(e,n,t)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1331),t(658);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(658),o=function(){function e(e){this.utils=e,this.name="AddonQtypeShortAnswer",this.type="qtype_shortanswer"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return n.answer||0===n.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},e.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(1333);var i=function(){return function(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(331),o=function(){function e(e){this.utils=e,this.name="AddonQtypeTrueFalse",this.type="qtype_truefalse"}return e.prototype.getComponent=function(e,n){return i.a},e.prototype.isCompleteResponse=function(e,n){return n.answer?1:0},e.prototype.isEnabled=function(){return!0},e.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},e.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},e}()},,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";function i(e){return c._42(0,[(e()(),c._16(0,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,d.b,d.a)),c._15(1,1097728,null,3,f.a,[p.a,h.a,c.p,c.K,[2,m.a]],null,null),c._37(335544320,1,{contentLabel:0}),c._37(603979776,2,{_buttons:1}),c._37(603979776,3,{_icons:1}),c._15(5,16384,null,0,_.a,[h.a,c.K,c.p,[8,null]],null,null),(e()(),c._40(6,2,["",""]))],null,function(e,n){e(n,6,0,n.component.title)})}function o(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-icon",[["item-start",""]],[[1,"aria-label",0]],null,null,g.b,g.a)),c._15(1,245760,null,0,v.a,[c.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconDescription)},function(e,n){e(n,0,0,n.parent.context.$implicit.ariaDescription)})}function r(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-icon",[["item-end",""]],null,null,null,g.b,g.a)),c._15(1,245760,null,0,v.a,[c.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconAction)},null)}function l(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"ion-spinner",[["item-end",""]],[[2,"spinner-paused",null]],null,null,y.b,y.a)),c._15(1,114688,null,0,b.a,[h.a,c.p,c.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,c._29(n,1)._paused)})}function s(e){return c._42(0,[(e()(),c._16(0,0,null,null,2,"ion-badge",[["item-end",""]],[[8,"className",0]],null,null,null,null)),c._15(1,16384,null,0,P.a,[h.a,c.p,c.K],null,null),(e()(),c._40(2,null,["",""]))],null,function(e,n){e(n,0,0,c._19(1,"",n.parent.context.$implicit.badgeClass,""));e(n,2,0,n.parent.context.$implicit.badge)})}function a(e){return c._42(0,[(e()(),c._16(0,0,null,null,22,"a",[["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[1,"aria-label",0],[8,"hidden",0],[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.itemClicked(t,e.context.$implicit)&&i}return i},d.b,d.a)),c._15(1,1097728,null,3,f.a,[p.a,h.a,c.p,c.K,[2,m.a]],null,null),c._37(335544320,4,{contentLabel:0}),c._37(603979776,5,{_buttons:1}),c._37(603979776,6,{_icons:1}),c._15(5,16384,null,0,E.a,[],null,null),c._15(6,81920,null,0,C.a,[c.p,I.a,S.a,w.a,A.a,T.a,[2,O.a],[2,k.a],[2,D.a]],{capture:[0,"capture"],autoLogin:[1,"autoLogin"]},null),(e()(),c._40(-1,2,["\n        "])),(e()(),c._11(16777216,null,0,1,null,o)),c._15(9,16384,null,0,x.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,2,["\n        "])),(e()(),c._16(11,0,null,2,1,"core-format-text",[],null,null,null,null,null)),c._15(12,540672,null,0,M.a,[c.p,w.a,I.a,U.a,N.a,R.a,S.a,A.a,F.a,L.a,H.a,T.a,[2,O.a],[2,k.a],[2,D.a],K.a,W.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),c._40(-1,2,["\n        "])),(e()(),c._11(16777216,null,4,1,null,r)),c._15(15,16384,null,0,x.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,2,["\n        "])),(e()(),c._11(16777216,null,4,1,null,l)),c._15(18,16384,null,0,x.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,2,["\n        "])),(e()(),c._11(16777216,null,4,1,null,s)),c._15(21,16384,null,0,x.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,2,["\n    "]))],function(e,n){e(n,6,0,n.context.$implicit.captureLink,n.context.$implicit.autoLogin);e(n,9,0,n.context.$implicit.iconDescription);e(n,12,0,n.context.$implicit.content,!0);e(n,15,0,(n.context.$implicit.href||n.context.$implicit.action)&&n.context.$implicit.iconAction&&"spinner"!=n.context.$implicit.iconAction);e(n,18,0,(n.context.$implicit.href||n.context.$implicit.action)&&"spinner"==n.context.$implicit.iconAction);e(n,21,0,n.context.$implicit.badge)},function(e,n){e(n,0,0,n.context.$implicit.href,n.context.$implicit.ariaAction,n.context.$implicit.hidden,!n.context.$implicit.href||n.context.$implicit.iconAction)})}function u(e){return c._42(0,[(e()(),c._16(0,0,null,null,8,"ion-list",[],null,null,null,null,null)),c._15(1,16384,null,0,q.a,[h.a,c.p,c.K,R.a,B.l,j.a],null,null),(e()(),c._40(-1,null,["\n    "])),(e()(),c._11(16777216,null,null,1,null,i)),c._15(4,16384,null,0,x.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,null,["\n    "])),(e()(),c._11(16777216,null,null,1,null,a)),c._15(7,802816,null,0,x.j,[c.W,c.T,c.v],{ngForOf:[0,"ngForOf"]},null),(e()(),c._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.title);e(n,7,0,t.items)},null)}t.d(n,"a",function(){return Q});var c=t(1),d=t(31),f=t(21),p=t(20),h=t(7),m=t(28),_=t(283),g=t(131),v=t(121),y=t(112),b=t(95),P=t(146),E=t(33),C=t(189),I=t(5),S=t(3),w=t(2),A=t(26),T=t(18),O=t(22),k=t(24),D=t(35),x=t(8),M=t(42),U=t(11),N=t(19),R=t(15),F=t(6),L=t(17),H=t(10),K=t(38),W=t(13),q=t(78),B=t(39),j=t(32),G=t(520),z=t(61),V=t(37),$=c._14({encapsulation:2,styles:[],data:{}}),Q=c._12("core-context-menu-popover",G.a,function(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-context-menu-popover",[],null,null,null,u,$)),c._15(1,49152,null,0,G.a,[z.a,V.a,F.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,l.b,l.a)),r._15(1,1097728,null,3,s.a,[a.a,u.a,r.p,r.K,[2,c.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(5,16384,null,0,d.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[2,4]],0,f.a,[u.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._16(9,0,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(10,540672,null,0,p.a,[r.p,h.a,m.a,_.a,g.a,v.a,y.a,b.a,P.a,E.a,C.a,I.a,[2,S.a],[2,w.a],[2,A.a],T.a,O.a],{text:[0,"text"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==r._29(e,13)._click(t)&&i}if("ionSelect"===n){i=!1!==o.coursePicked(t,e.context.$implicit)&&i}return i},k.b,k.a)),r._15(13,245760,null,0,D.a,[a.a,u.a,r.p,r.K,[2,s.a],[2,x.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),r._40(-1,2,["\n    "]))],function(e,n){e(n,10,0,n.context.$implicit.fullname);e(n,13,0,r._19(1,"",n.context.$implicit.id,""))},function(e,n){e(n,12,0,r._29(n,13)._disabled)})}function o(e){return r._42(0,[(e()(),r._16(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.courseId=t)&&i}return i},null,null)),r._15(1,1064960,null,1,x.a,[r.K,r.p,r.i],null,null),r._37(335544320,1,{_header:0}),r._35(1024,null,M.l,function(e){return[e]},[x.a]),r._15(4,671744,null,0,M.q,[[8,null],[8,null],[8,null],[2,M.l]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,M.m,null,[M.q]),r._15(6,16384,null,0,M.n,[M.m],null,null),r._15(7,16384,null,0,U.a,[u.a,r.p,r.K,v.a,N.l,R.a],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(10,802816,null,0,F.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.courseId);e(n,10,0,t.courses)},function(e,n){e(n,0,0,r._29(n,6).ngClassUntouched,r._29(n,6).ngClassTouched,r._29(n,6).ngClassPristine,r._29(n,6).ngClassDirty,r._29(n,6).ngClassValid,r._29(n,6).ngClassInvalid,r._29(n,6).ngClassPending)})}t.d(n,"a",function(){return q});var r=t(1),l=t(31),s=t(21),a=t(20),u=t(7),c=t(28),d=t(33),f=t(62),p=t(42),h=t(2),m=t(5),_=t(11),g=t(19),v=t(15),y=t(3),b=t(26),P=t(6),E=t(17),C=t(10),I=t(18),S=t(22),w=t(24),A=t(35),T=t(38),O=t(13),k=t(167),D=t(136),x=t(127),M=t(23),U=t(78),N=t(39),R=t(32),F=t(8),L=t(707),H=t(61),K=t(37),W=r._14({encapsulation:2,styles:[],data:{}}),q=r._12("core-course-picker-menu-popover",L.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-course-picker-menu-popover",[],null,null,null,o,W)),r._15(1,49152,null,0,L.a,[H.a,K.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,25,"ion-header",[],null,null,null,null,null)),o._15(1,16384,null,0,r.a,[l.a,o.p,o.K,[2,s.a]],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,21,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,a.b,a.a)),o._15(4,49152,null,0,u.a,[c.a,[2,s.a],[2,d.a],l.a,o.p,o.K],null,null),o._15(5,212992,null,0,f.a,[u.a,p.a,h.a,m.a],null,null),(e()(),o._40(-1,3,["\n        "])),(e()(),o._16(7,0,null,3,3,"ion-title",[],null,null,null,_.b,_.a)),o._15(8,49152,null,0,g.a,[l.a,o.p,o.K,[2,v.a],[2,u.a]],null,null),(e()(),o._40(9,0,["",""])),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,3,["\n\n        "])),(e()(),o._16(12,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),o._15(13,16384,null,1,b.a,[l.a,o.p,o.K,[2,v.a],[2,u.a]],null,null),o._37(603979776,1,{_buttons:1}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(16,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.closeModal()&&i}return i},P.b,P.a)),o._15(17,1097728,[[1,4]],0,E.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(20,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(21,147456,null,0,C.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,3,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(27,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,I.b,I.a)),o._15(28,4374528,null,0,S.a,[l.a,p.a,w.a,o.p,o.K,c.a,A.a,o.D,[2,s.a],[2,d.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(30,0,null,1,1,"core-iframe",[],null,[[null,"loaded"]],function(e,n,t){var i=!0;if("loaded"===n){i=!1!==e.component.loaded(t)&&i}return i},T.b,T.a)),o._15(31,638976,null,0,O.a,[k.a,D.a,x.a,M.c],{src:[0,"src"]},{loaded:"loaded"}),(e()(),o._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0);e(n,21,0,"close");e(n,31,0,t.src)},function(e,n){e(n,3,0,o._29(n,4)._hidden,o._29(n,4)._sbPadding);e(n,9,0,o._41(n,9,0,o._29(n,10).transform("core.login.security_question")));e(n,16,0,o._41(n,16,0,o._29(n,18).transform("core.close")));e(n,20,0,o._29(n,21)._hidden);e(n,27,0,o._29(n,28).statusbarPadding,o._29(n,28)._hasRefresher)})}t.d(n,"a",function(){return F});var o=t(1),r=t(435),l=t(7),s=t(37),a=t(1354),u=t(200),c=t(34),d=t(22),f=t(663),p=t(15),h=t(19),m=t(13),_=t(1355),g=t(337),v=t(247),y=t(27),b=t(436),P=t(46),E=t(43),C=t(47),I=t(185),S=t(24),w=t(32),A=t(107),T=t(350),O=t(255),k=t(6),D=t(38),x=t(5),M=t(75),U=t(521),N=t(61),R=o._14({encapsulation:2,styles:[],data:{}}),F=o._12("core-recaptcha-modal",U.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-recaptcha-modal",[],null,null,null,i,R)),o._15(1,49152,null,0,U.a,[s.a,N.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,1,0,d._41(n,1,0,d._29(n,2).transform("core.whoops")))})}function o(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),d._40(1,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,1,0,d._41(n,1,0,d._29(n,2).transform("core.uhoh")))})}function r(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._40(1,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,1,0,d._41(n,1,0,d._29(n,2).transform("core.course.activitydisabled")))})}function l(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._40(1,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,1,0,d._41(n,1,0,d._29(n,2).transform("core.course.activitynotyetviewablesiteupgradeneeded")))})}function s(e){return d._42(0,[(e()(),d._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),d._40(1,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,1,0,d._41(n,1,0,d._29(n,2).transform("core.course.activitynotyetviewableremoteaddon")))})}function a(e){return d._42(0,[(e()(),d._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),d._16(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),d._40(2,null,["",""])),d._32(131072,f.a,[p.a,d.i])],null,function(e,n){e(n,2,0,d._41(n,2,0,d._29(n,3).transform("core.course.askadmintosupport")))})}function u(e){return d._42(0,[(e()(),d._16(0,0,null,null,15,"div",[],null,null,null,null,null)),(e()(),d._40(-1,null,["\n        "])),(e()(),d._16(2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),d._16(3,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),d._40(4,null,["",""])),d._32(131072,f.a,[p.a,d.i]),(e()(),d._40(-1,null,["\n        "])),(e()(),d._16(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,h.b,h.a)),d._15(8,1097728,null,0,m.a,[[8,""],_.a,d.p,d.K],{block:[0,"block"]},null),d._15(9,81920,null,0,g.a,[d.p,v.a,y.a,b.a,P.a,E.a,[2,C.a],[2,I.a],[2,S.a]],null,null),(e()(),d._40(10,0,["\n            ","\n            "])),d._32(131072,f.a,[p.a,d.i]),(e()(),d._16(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(13,147456,null,0,w.a,[_.a,d.p,d.K],{name:[0,"name"]},null),(e()(),d._40(-1,0,["\n        "])),(e()(),d._40(-1,null,["\n    "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,13,0,"open")},function(e,n){var t=n.component;e(n,4,0,d._41(n,4,0,d._29(n,5).transform("core.course.useactivityonbrowser")));e(n,7,0,t.module.url);e(n,10,0,d._41(n,10,0,d._29(n,11).transform("core.openinbrowser")));e(n,12,0,d._29(n,13)._hidden)})}function c(e){return d._42(0,[(e()(),d._16(0,0,null,null,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),d._40(-1,null,["\n    "])),(e()(),d._16(2,0,null,null,1,"core-course-module-description",[],null,null,null,A.b,A.a)),d._15(3,49152,null,0,T.a,[],{description:[0,"description"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,i)),d._15(6,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,o)),d._15(9,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n    "])),(e()(),d._11(16777216,null,null,1,null,r)),d._15(12,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,l)),d._15(15,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,s)),d._15(18,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n    "])),(e()(),d._11(16777216,null,null,1,null,a)),d._15(21,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n    "])),(e()(),d._11(16777216,null,null,1,null,u)),d._15(24,16384,null,0,O.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.module&&t.module.description);e(n,6,0,!t.isDisabledInSite&&t.isSupportedByTheApp);e(n,9,0,t.isDisabledInSite||!t.isSupportedByTheApp);e(n,12,0,t.isDisabledInSite);e(n,15,0,!t.isDisabledInSite&&t.isSupportedByTheApp);e(n,18,0,!t.isDisabledInSite&&!t.isSupportedByTheApp);e(n,21,0,t.isDisabledInSite||!t.isSupportedByTheApp);e(n,24,0,t.module&&t.module.url)},null)}t.d(n,"b",function(){return M}),n.c=c,t.d(n,"a",function(){return U});var d=t(1),f=t(27),p=t(19),h=t(46),m=t(43),_=t(7),g=t(189),v=t(5),y=t(3),b=t(2),P=t(26),E=t(18),C=t(22),I=t(24),S=t(35),w=t(47),A=t(103),T=t(91),O=t(8),k=t(360),D=t(16),x=t(56),M=d._14({encapsulation:2,styles:[],data:{}}),U=d._12("core-course-unsupported-module",k.a,function(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"core-course-unsupported-module",[],null,null,null,c,M)),d._15(1,114688,null,0,k.a,[D.a,x.a],null,null)],function(e,n){e(n,1,0)},null)},{course:"course",module:"module"},{},[])},function(e,n,t){"use strict";function i(e){return r._42(0,[r._28(null,0),(e()(),r._11(0,null,null,0))],null,null)}function o(e){return r._42(0,[r._37(402653184,1,{dynamicComponent:0}),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(3,16384,null,0,l.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(6,16777216,[[1,3],["dynamicComponent",1]],null,0,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,!n.component.instance)},null)}t.d(n,"a",function(){return s}),n.b=o;var r=t(1),l=t(8),s=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(72),o=(t(160),t(162),t(188),function(){function e(e,n,t,o){this.injector=e,this.feedbackDelegate=n,this.assignProvider=t,this.assignHelper=o,this.component=i.a.COMPONENT,this.text="",this.files=[]}return e.prototype.ngOnInit=function(){var e=this;this.plugin?(this.plugin.name=this.feedbackDelegate.getPluginName(this.plugin),this.plugin.name?(this.edit=this.edit&&"false"!==this.edit,this.canEdit=this.canEdit&&"false"!==this.canEdit,this.feedbackDelegate.getComponentForPlugin(this.injector,this.plugin).then(function(n){e.pluginComponent=n,n?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId,configs:e.assignHelper.getPluginConfig(e.assign,"assignfeedback",e.plugin.type),edit:e.edit,canEdit:e.canEdit}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.feedbackDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})):this.pluginLoaded=!0):this.pluginLoaded=!0},e.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(668),t(667),t(1361);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var i=t(0),o=t(1),r=(t(9),t(4),t(51),function(){function e(e,n,t,i){this.navCtrl=e,this.translate=n,this.coursesProvider=t,this.courseHelper=i}return e.prototype.ngOnInit=function(){var e=this;this.coursesProvider.getUserCourse(this.course.id).then(function(){e.course.isEnrolled=!0}).catch(function(){e.course.isEnrolled=!1,e.course.enrollment=[],e.course.enrollmentmethods.forEach(function(n){"self"===n?e.course.enrollment.push({name:e.translate.instant("core.courses.selfenrolment"),icon:"unlock"}):"guest"===n?e.course.enrollment.push({name:e.translate.instant("core.courses.allowguests"),icon:"person"}):"paypal"===n&&e.course.enrollment.push({name:e.translate.instant("core.courses.paypalaccepted"),img:"assets/img/icons/paypal.png"})}),0==e.course.enrollment.length&&e.course.enrollment.push({name:e.translate.instant("core.courses.notenrollable"),icon:"lock"})})},e.prototype.openCourse=function(e){e.isEnrolled?this.courseHelper.openCourse(this.navCtrl,e):this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:e})},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(669);var i=function(){function e(e,n,t,i,o,r){this.domUtils=e,this.sitesProvider=n,this.courseProvider=t,this.courseHelper=i,this.prefetchDelegate=o,this.blockDelegate=r,this.dataLoaded=!1,this.items=[],this.blocks=[],this.siteHomeId=n.getCurrentSite().getSiteHomeId()}return e.prototype.ngOnInit=function(){var e=this;this.loadContent().finally(function(){e.dataLoaded=!0})},e.prototype.doRefresh=function(e){var n=this,t=[],i=this.sitesProvider.getCurrentSite();t.push(this.courseProvider.invalidateSections(this.siteHomeId)),t.push(i.invalidateConfig().then(function(){return i.getConfig().then(function(e){i.setConfig(e)})})),this.section&&this.section.modules&&t.push(this.prefetchDelegate.invalidateModules(this.section.modules,this.siteHomeId)),this.courseProvider.canGetCourseBlocks()&&t.push(this.courseProvider.invalidateCourseBlocks(this.siteHomeId)),this.blocksComponents.forEach(function(e){t.push(e.invalidate().catch(function(){}))}),Promise.all(t).finally(function(){n.loadContent().finally(function(){e.complete()})})},e.prototype.loadContent=function(){var e=this;this.hasContent=!1;var n=this.sitesProvider.getCurrentSite().getStoredConfig()||{numsections:1};if(n.frontpageloggedin){var t=["news",!1,"categories",!1,"categories","enrolled-course-list","all-course-list","course-search"],i=n.frontpageloggedin.split(",");this.items=[],i.forEach(function(n){var i=t[parseInt(n,10)];!i||e.items.indexOf(i)>=0||(e.hasContent=!0,e.items.push(i))})}return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(t){e.section=!!n.numsections&&t[1],e.section&&(e.section.hasContent=e.courseHelper.sectionHasContent(e.section),e.hasContent=e.courseHelper.addHandlerDataForModules([e.section],e.siteHomeId)||e.hasContent),e.courseProvider.logView(e.siteHomeId).catch(function(){});var i=e.courseProvider.canGetCourseBlocks();return(i?e.courseProvider.getCourseBlocks(e.siteHomeId):Promise.reject(null)).then(function(n){e.blocks=n,e.hasSupportedBlock=e.blockDelegate.hasSupportedBlock(n)}).catch(function(n){i&&e.domUtils.showErrorModal(n),e.blocks=[],t[0]&&e.courseHelper.sectionHasContent(t[0])?(e.blocks.push({name:"site_main_menu"}),e.hasSupportedBlock=!0):e.hasSupportedBlock=!1})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.course.couldnotloadsectioncontent",!0)})},e}()},function(e,n,t){"use strict";function i(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function c(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,[[3,2]],null,1,null,u)),ee._15(2,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,ee._29(n.parent.parent,47))},null)}function d(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function f(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,[[5,2]],null,1,null,d)),ee._15(2,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,ee._29(n.parent.parent,50))},null)}function p(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function h(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,[[7,2]],null,1,null,p)),ee._15(2,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,ee._29(n.parent.parent,50))},null)}function m(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,32,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._16(2,0,null,null,29,"core-tabs",[],null,null,null,se.b,se.a)),ee._15(3,4964352,[[1,4]],0,ae.a,[ee.p,ue.a,ce.a,de.a,fe.a,re.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),ee._40(-1,0,["\n            "])),(e()(),ee._16(5,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var i=!0;if("ionSelect"===n){i=!1!==e.component.tabChanged("overview")&&i}return i},pe.b,pe.a)),ee._15(6,245760,null,2,he.a,[ae.a,ee.p,ce.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),ee._37(603979776,3,{template:0}),ee._37(335544320,4,{scroll:0}),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(0,[[3,2]],null,0,null,c)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._40(-1,0,["\n            "])),(e()(),ee._16(14,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var i=!0;if("ionSelect"===n){i=!1!==e.component.tabChanged("analysis")&&i}return i},pe.b,pe.a)),ee._15(15,245760,null,2,he.a,[ae.a,ee.p,ce.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),ee._37(603979776,5,{template:0}),ee._37(335544320,6,{scroll:0}),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(0,[[5,2]],null,0,null,f)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._40(-1,0,["\n\n            "])),(e()(),ee._16(23,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var i=!0;if("ionSelect"===n){i=!1!==e.component.tabChanged("analysis")&&i}return i},pe.b,pe.a)),ee._15(24,245760,null,2,he.a,[ae.a,ee.p,ce.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),ee._37(603979776,7,{template:0}),ee._37(335544320,8,{scroll:0}),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(0,[[7,2]],null,0,null,h)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.firstSelectedTab,t.tabsReady);e(n,6,0,ee._41(n,6,0,ee._29(n,9).transform("addon.mod_feedback.overview")));e(n,15,0,ee._41(n,15,0,ee._29(n,18).transform("addon.mod_feedback.analysis")),t.access.canviewreports);e(n,24,0,ee._41(n,24,0,ee._29(n,27).transform("addon.mod_feedback.completed_feedbacks")),!t.access.canviewreports)},null)}function _(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function g(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,_)),ee._15(3,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,ee._29(n.parent,47))},null)}function v(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),ee._15(1,16384,[[9,4]],0,me.a,[_e.a,ee.p,ee.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ee._40(2,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"addon-feedback-groupslabel")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("core.groupsseparate")))})}function y(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),ee._15(1,16384,[[9,4]],0,me.a,[_e.a,ee.p,ee.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ee._40(2,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"addon-feedback-groupslabel")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("core.groupsvisible")))})}function b(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ee._15(1,16384,[[12,4]],0,ge.a,[ee.p],{value:[0,"value"]},null),(e()(),ee._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function P(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(603979776,9,{contentLabel:0}),ee._37(603979776,10,{_buttons:1}),ee._37(603979776,11,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._11(16777216,null,1,1,null,v)),ee._15(8,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._11(16777216,null,1,1,null,y)),ee._15(11,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-feedback-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ee._29(e,14)._click(t)&&i}if("keyup.space"===n){i=!1!==ee._29(e,14)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.group=t)&&i}if("ionChange"===n){i=!1!==o.setGroup(o.group)&&i}return i},Ce.b,Ce.a)),ee._15(14,1228800,null,1,Ie.a,[Se.a,be.a,_e.a,ee.p,ee.K,[2,ye.a],we.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),ee._37(603979776,12,{options:1}),ee._35(1024,null,Ae.l,function(e){return[e]},[Ie.a]),ee._15(17,671744,null,0,Ae.q,[[8,null],[8,null],[8,null],[2,Ae.l]],{model:[0,"model"]},{update:"ngModelChange"}),ee._35(2048,null,Ae.m,null,[Ae.q]),ee._15(19,16384,null,0,Ae.n,[Ae.m],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,b)),ee._15(22,802816,null,0,le.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.group);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,ee._29(n,14)._disabled,ee._29(n,19).ngClassUntouched,ee._29(n,19).ngClassTouched,ee._29(n,19).ngClassPristine,ee._29(n,19).ngClassDirty,ee._29(n,19).ngClassValid,ee._29(n,19).ngClassInvalid,ee._29(n,19).ngClassPending)})}function E(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"a",[["class","item item-block"],["detail-push",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openFeature("NonRespondents")&&i}return i},ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,16,{contentLabel:0}),ee._37(603979776,17,{_buttons:1}),ee._37(603979776,18,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n        "]))],null,function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_feedback.show_nonrespondents")))})}function C(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,40,"ion-list",[],null,null,null,null,null)),ee._15(1,16384,null,0,Te.a,[_e.a,ee.p,ee.K,fe.a,Oe.l,ke.a],null,null),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,P)),ee._15(4,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._16(6,0,null,null,14,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==(o.access.canviewreports&&o.feedback.completedCount>0&&o.openFeature("Respondents"))&&i}return i},ve.b,ve.a)),ee._15(7,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,13,{contentLabel:0}),ee._37(603979776,14,{_buttons:1}),ee._37(603979776,15,{_icons:1}),ee._15(11,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(14,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(17,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),ee._15(18,16384,null,0,De.a,[_e.a,ee.p,ee.K],null,null),(e()(),ee._40(19,null,["",""])),(e()(),ee._40(-1,2,["\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,E)),ee._15(23,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._16(25,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(26,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,19,{contentLabel:0}),ee._37(603979776,20,{_buttons:1}),ee._37(603979776,21,{_icons:1}),ee._15(30,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(32,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(33,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(36,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),ee._15(37,16384,null,0,De.a,[_e.a,ee.p,ee.K],null,null),(e()(),ee._40(38,null,["",""])),(e()(),ee._40(-1,2,["\n        "])),(e()(),ee._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.access.canedititems&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,23,0,!t.access.isanonymous&&t.access.canviewreports)},function(e,n){var t=n.component;e(n,6,0,!(t.access.canviewreports&&t.feedback.completedCount>0)||null);e(n,14,0,ee._41(n,14,0,ee._29(n,15).transform("addon.mod_feedback.completed_feedbacks")));e(n,19,0,t.feedback.completedCount);e(n,33,0,ee._41(n,33,0,ee._29(n,34).transform("addon.mod_feedback.questions")));e(n,38,0,t.feedback.itemsCount)})}function I(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n    "])),(e()(),ee._11(16777216,null,null,1,null,C)),ee._15(2,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.access.canviewanalysis&&!t.access.isempty)},null)}function S(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function w(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(3,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(4,null,["\n            ","\n        "])),ee._33(5,{$a:0}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,ee._29(n,3)._hidden);e(n,4,0,ee._41(n,4,0,ee._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function A(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(3,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(4,null,["\n            ","\n        "])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,ee._29(n,3)._hidden);e(n,4,0,ee._41(n,4,0,ee._29(n,5).transform("addon.mod_feedback.feedback_is_not_open")))})}function T(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,5,"div",[["class","core-success-card"]],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._16(2,0,null,null,1,"ion-icon",[["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(3,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(4,null,["\n            ","\n        "])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,3,0,"checkmark")},function(e,n){e(n,2,0,ee._29(n,3)._hidden);e(n,4,0,ee._41(n,4,0,ee._29(n,5).transform("addon.mod_feedback.this_feedback_is_already_submitted")))})}function O(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,22,{contentLabel:0}),ee._37(603979776,23,{_buttons:1}),ee._37(603979776,24,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),ee._40(12,null,["",""])),(e()(),ee._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_feedback.feedbackopen")));e(n,12,0,t.overview.openTimeReadable)})}function k(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,25,{contentLabel:0}),ee._37(603979776,26,{_buttons:1}),ee._37(603979776,27,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),ee._40(12,null,["",""])),(e()(),ee._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_feedback.feedbackclose")));e(n,12,0,t.overview.closeTimeReadable)})}function D(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,28,{contentLabel:0}),ee._37(603979776,29,{_buttons:1}),ee._37(603979776,30,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(11,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ee._15(12,540672,null,0,Me.a,[ee.p,Ue.a,ce.a,Ne.a,re.a,fe.a,Re.a,Fe.a,Le.a,He.a,de.a,Ke.a,[2,We.a],[2,ue.a],[2,qe.a],Be.a,je.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ee._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,12,0,t.feedback.page_after_submit,t.component,t.componentId)},function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_feedback.page_after_submit")))})}function x(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._40(1,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],null,function(e,n){e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("addon.mod_feedback.anonymous")))})}function M(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._40(1,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],null,function(e,n){e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("addon.mod_feedback.non_anonymous")))})}function U(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoAnswerQuestions()&&i}return i},Ge.b,Ge.a)),ee._15(1,1097728,null,0,ze.a,[[8,""],_e.a,ee.p,ee.K],{block:[0,"block"]},null),(e()(),ee._40(2,0,["\n                                ","\n                                "])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._16(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(5,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("addon.mod_feedback.complete_the_form")));e(n,4,0,ee._29(n,5)._hidden)})}function N(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoAnswerQuestions()&&i}return i},Ge.b,Ge.a)),ee._15(1,1097728,null,0,ze.a,[[8,""],_e.a,ee.p,ee.K],{block:[0,"block"]},null),(e()(),ee._40(2,0,["\n                                ","\n                                "])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._16(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(5,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("addon.mod_feedback.continue_the_form")));e(n,4,0,ee._29(n,5)._hidden)})}function R(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,8,"ion-col",[["class","col"]],null,null,null,null,null)),ee._15(1,16384,null,0,Ve.a,[],null,null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._11(16777216,null,null,1,null,U)),ee._15(4,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._11(16777216,null,null,1,null,N)),ee._15(7,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,4,0,!t.goPage);e(n,7,0,t.goPage)},null)}function F(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,42,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(2,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(3,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,31,{contentLabel:0}),ee._37(603979776,32,{_buttons:1}),ee._37(603979776,33,{_icons:1}),ee._15(7,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(10,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._11(16777216,null,2,1,null,x)),ee._15(14,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._11(16777216,null,2,1,null,M)),ee._15(17,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(20,0,null,null,21,"ion-grid",[["class","grid"]],null,null,null,null,null)),ee._15(21,16384,null,0,$e.a,[],null,null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._16(23,0,null,null,17,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),ee._15(24,16384,null,0,Qe.a,[],null,null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._16(26,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),ee._15(27,16384,null,0,Ve.a,[],null,null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._16(29,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoAnswerQuestions(!0)&&i}return i},Ge.b,Ge.a)),ee._15(30,1097728,null,0,ze.a,[[8,""],_e.a,ee.p,ee.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),ee._40(-1,0,["\n                                "])),(e()(),ee._16(32,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(33,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(34,0,["\n                                ","\n                            "])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._11(16777216,null,null,1,null,R)),ee._15(39,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._40(-1,null,["\n\n            "]))],function(e,n){var t=n.component;e(n,14,0,t.access.isanonymous);e(n,17,0,!t.access.isanonymous);e(n,30,0,"","");e(n,33,0,"search");e(n,39,0,t.access.cancomplete&&t.access.cansubmit&&t.access.isopen)},function(e,n){e(n,10,0,ee._41(n,10,0,ee._29(n,11).transform("addon.mod_feedback.mode")));e(n,32,0,ee._29(n,33)._hidden);e(n,34,0,ee._41(n,34,0,ee._29(n,35).transform("addon.mod_feedback.preview")))})}function L(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),ee._15(1,16384,null,0,Te.a,[_e.a,ee.p,ee.K,fe.a,Oe.l,ke.a],null,null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,O)),ee._15(4,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,k)),ee._15(7,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,D)),ee._15(10,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,F)),ee._15(13,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.access.canedititems&&t.overview.timeopen);e(n,7,0,t.access.canedititems&&t.overview.timeclose);e(n,10,0,t.access.canedititems&&t.feedback.page_after_submit);e(n,13,0,!t.access.isempty)},null)}function H(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n    "])),(e()(),ee._16(1,0,null,null,18,"core-loading",[],null,null,null,Ye.b,Ye.a)),ee._15(2,638976,null,0,Xe.a,[re.a,ee.p,je.a,Re.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,S)),ee._15(5,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,0,["\n\n        "])),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,w)),ee._15(9,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n        "])),(e()(),ee._11(16777216,null,0,1,null,A)),ee._15(12,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n        "])),(e()(),ee._11(16777216,null,0,1,null,T)),ee._15(15,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n        "])),(e()(),ee._11(16777216,null,0,1,null,L)),ee._15(18,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.tabsLoaded.overview);e(n,5,0,ee._29(n.parent,44));e(n,9,0,t.hasOffline);e(n,12,0,t.access.cancomplete&&!t.access.isopen);e(n,15,0,t.access.cancomplete&&t.access.isopen&&!t.access.cansubmit);e(n,18,0,t.access.canedititems||t.access.canviewreports||!t.access.isempty)},null)}function K(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function W(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(3,147456,null,0,xe.a,[_e.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(4,null,["\n                ","\n            "]))],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,ee._29(n,3)._hidden);e(n,4,0,t.warning)})}function q(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),ee._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function B(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._16(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                                "])),(e()(),ee._11(16777216,null,null,1,null,q)),ee._15(5,802816,null,0,le.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._16(8,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ee._40(9,null,["",": ",""])),ee._32(131072,oe.a,[re.a,ee.i]),ee._34(11,2),(e()(),ee._40(-1,null,["\n                        "]))],function(e,n){e(n,5,0,n.parent.context.$implicit.data)},function(e,n){e(n,9,0,ee._41(n,9,0,ee._29(n,10).transform("addon.mod_feedback.average")),ee._41(n,9,1,e(n,11,0,ee._29(n.parent.parent.parent.parent.parent,0),n.parent.context.$implicit.average,"1.2-2")))})}function j(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                                        "])),(e()(),ee._16(2,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ee._15(3,540672,null,0,Me.a,[ee.p,Ue.a,ce.a,Ne.a,re.a,fe.a,Re.a,Fe.a,Le.a,He.a,de.a,Ke.a,[2,We.a],[2,ue.a],[2,qe.a],Be.a,je.a],{text:[0,"text"]},null),(e()(),ee._40(-1,null,["\n                                    "]))],function(e,n){e(n,3,0,n.parent.context.$implicit)},null)}function G(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                                    "])),(e()(),ee._11(16777216,null,null,1,null,j)),ee._15(3,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                                "]))],function(e,n){e(n,3,0,n.context.$implicit)},null)}function z(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._16(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                                "])),(e()(),ee._11(16777216,null,null,1,null,G)),ee._15(5,802816,null,0,le.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._40(-1,null,["\n                        "]))],function(e,n){e(n,5,0,n.parent.context.$implicit.data)},null)}function V(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ee._40(1,null,["",": ",""])),ee._32(131072,oe.a,[re.a,ee.i]),ee._34(3,2)],null,function(e,n){e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("addon.mod_feedback.average")),ee._41(n,1,1,e(n,3,0,ee._29(n.parent.parent.parent.parent.parent.parent,0),n.parent.parent.context.$implicit.average,"1.2-2")))})}function $(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._16(2,0,null,null,1,"core-chart",[["height","300"]],null,null,null,Je.b,Je.a)),ee._15(3,770048,null,0,Ze.a,[],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"]},null),(e()(),ee._40(-1,null,["\n                            "])),(e()(),ee._11(16777216,null,null,1,null,V)),ee._15(6,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                        "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.chartData,n.parent.context.$implicit.labels,n.parent.context.$implicit.chartType,"300");e(n,6,0,n.parent.context.$implicit.average)},null)}function Q(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,28,"ion-item",[["class","core-analysis item item-block"],["text-wrap",""]],null,null,null,ve.b,ve.a)),ee._15(1,1097728,null,3,ye.a,[be.a,_e.a,ee.p,ee.K,[2,Pe.a]],null,null),ee._37(335544320,34,{contentLabel:0}),ee._37(603979776,35,{_buttons:1}),ee._37(603979776,36,{_icons:1}),ee._15(5,16384,null,0,Ee.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",". "])),(e()(),ee._16(9,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ee._15(10,540672,null,0,Me.a,[ee.p,Ue.a,ce.a,Ne.a,re.a,fe.a,Re.a,Fe.a,Le.a,He.a,de.a,Ke.a,[2,We.a],[2,ue.a],[2,qe.a],Be.a,je.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ee._16(13,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ee._15(14,540672,null,0,Me.a,[ee.p,Ue.a,ce.a,Ne.a,re.a,fe.a,Re.a,Fe.a,Le.a,He.a,de.a,Ke.a,[2,We.a],[2,ue.a],[2,qe.a],Be.a,je.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(16,0,null,2,11,null,null,null,null,null,null,null)),ee._15(17,16384,null,0,le.o,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._11(16777216,null,null,1,null,B)),ee._15(20,278528,null,0,le.p,[ee.W,ee.T,le.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._11(16777216,null,null,1,null,z)),ee._15(23,278528,null,0,le.p,[ee.W,ee.T,le.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._11(16777216,null,null,1,null,$)),ee._15(26,278528,null,0,le.p,[ee.W,ee.T,le.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.name,t.component,t.componentId);e(n,14,0,n.context.$implicit.label,t.component,t.componentId);e(n,17,0,n.context.$implicit.template);e(n,20,0,"numeric");e(n,23,0,"list");e(n,26,0,"chart")},function(e,n){e(n,8,0,n.context.$implicit.number)})}function Y(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),ee._15(1,16384,null,0,Te.a,[_e.a,ee.p,ee.K,fe.a,Oe.l,ke.a],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,Q)),ee._15(4,802816,null,0,le.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.items)},null)}function X(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,W)),ee._15(3,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,Y)),ee._15(6,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.warning);e(n,6,0,t.items&&t.items.length)},null)}function J(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n    "])),(e()(),ee._16(1,0,null,null,8,"core-loading",[],null,null,null,Ye.b,Ye.a)),ee._15(2,638976,null,0,Xe.a,[re.a,ee.p,je.a,Re.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,K)),ee._15(5,540672,null,0,le.r,[ee.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ee._40(-1,0,["\n\n        "])),(e()(),ee._11(16777216,null,0,1,null,X)),ee._15(8,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.tabsLoaded.analysis);e(n,5,0,ee._29(n.parent,44));e(n,8,0,t.access.canedititems||!t.access.isempty)},null)}function Z(e){return ee._42(0,[ee._32(0,le.d,[ee.x]),ee._37(671088640,1,{tabsComponent:0}),(e()(),ee._40(-1,null,["\n"])),(e()(),ee._16(3,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,en.b,en.a)),ee._15(4,245760,null,1,nn.a,[ee.p,Le.a,ce.a],null,null),ee._37(603979776,2,{buttons:1}),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._16(7,0,null,0,20,"core-context-menu",[],null,null,null,tn.b,tn.a)),ee._15(8,245760,null,0,ie.a,[re.a,on.a,ee.p,ce.a,[2,he.a]],null,null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,i)),ee._15(11,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,o)),ee._15(14,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,r)),ee._15(17,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,l)),ee._15(20,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,s)),ee._15(23,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,a)),ee._15(26,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._40(-1,0,["\n"])),(e()(),ee._40(-1,null,["\n\n"])),(e()(),ee._40(-1,null,["\n"])),(e()(),ee._16(31,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,Ye.b,Ye.a)),ee._15(32,638976,null,0,Xe.a,[re.a,ee.p,je.a,Re.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._16(34,0,null,0,1,"core-course-module-description",[],null,null,null,rn.b,rn.a)),ee._15(35,49152,null,0,ln.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._11(16777216,null,0,1,null,m)),ee._15(38,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._11(16777216,null,0,1,null,g)),ee._15(41,16384,null,0,le.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n"])),(e()(),ee._40(-1,null,["\n\n\n"])),(e()(),ee._11(0,[["basicInfo",2]],null,0,null,I)),(e()(),ee._40(-1,null,["\n\n"])),(e()(),ee._40(-1,null,["\n"])),(e()(),ee._11(0,[["tabOverview",2]],null,0,null,H)),(e()(),ee._40(-1,null,["\n\n"])),(e()(),ee._40(-1,null,["\n"])),(e()(),ee._11(0,[["tabAnalysis",2]],null,0,null,J)),(e()(),ee._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0),e(n,8,0);e(n,11,0,t.externalUrl);e(n,14,0,t.description);e(n,17,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,20,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,23,0,t.prefetchStatusIcon);e(n,26,0,t.size);e(n,32,0,t.loaded);e(n,35,0,t.description,t.component,t.componentId);e(n,38,0,t.showTabs);e(n,41,0,!t.showTabs)},null)}t.d(n,"b",function(){return hn}),n.c=Z,t.d(n,"a",function(){return mn});var ee=t(1),ne=t(81),te=t(74),ie=t(70),oe=t(27),re=t(19),le=t(8),se=t(441),ae=t(149),ue=t(24),ce=t(5),de=t(10),fe=t(15),pe=t(442),he=t(69),me=t(62),_e=t(7),ge=t(92),ve=t(31),ye=t(21),be=t(20),Pe=t(28),Ee=t(33),Ce=t(111),Ie=t(93),Se=t(34),we=t(52),Ae=t(23),Te=t(78),Oe=t(39),ke=t(32),De=t(146),xe=t(47),Me=t(42),Ue=t(2),Ne=t(11),Re=t(3),Fe=t(26),Le=t(6),He=t(17),Ke=t(18),We=t(22),qe=t(35),Be=t(38),je=t(13),Ge=t(46),ze=t(43),Ve=t(113),$e=t(142),Qe=t(114),Ye=t(49),Xe=t(48),Je=t(993),Ze=t(404),en=t(89),nn=t(82),tn=t(80),on=t(63),rn=t(103),ln=t(91),sn=t(462),an=t(135),un=t(262),cn=t(68),dn=t(286),fn=t(278),pn=t(25),hn=ee._14({encapsulation:2,styles:[],data:{}}),mn=ee._12("addon-mod-feedback-index",sn.a,function(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"addon-mod-feedback-index",[],null,null,null,Z,hn)),ee._15(1,245760,null,0,sn.a,[ee.u,an.a,[2,ue.a],un.a,cn.a,dn.a,We.a,fn.a,pn.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",tab:"tab"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return b._42(0,[(e()(),b._16(0,0,null,null,3,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.completionClicked(t)&&i}return i},null,null)),(e()(),b._40(-1,null,["\n    "])),(e()(),b._16(2,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0],[8,"title",0]],null,null,null,null)),(e()(),b._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.completionImage,t.completionDescription,t.completionDescription)})}function o(e){return b._42(0,[(e()(),b._11(16777216,null,null,1,null,i)),b._15(1,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.completion)},null)}function r(e){return b._42(0,[(e()(),b._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.module.handlerData.icon)})}function l(e){return b._42(0,[(e()(),b._16(0,0,null,null,1,"core-course-module-completion",[],null,[[null,"completionChanged"]],function(e,n,t){var i=!0;if("completionChanged"===n){i=!1!==e.component.completionChanged.emit()&&i}return i},o,T)),b._15(1,573440,null,0,E.a,[C.a,I.a,S.a,w.a,A.a],{completion:[0,"completion"],moduleName:[1,"moduleName"]},{completionChanged:"completionChanged"})],function(e,n){var t=n.component;e(n,1,0,t.module.completiondata,t.module.name)},null)}function s(e){return b._42(0,[(e()(),b._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.download(t,!1)&&i}return i},O.b,O.a)),b._15(1,1097728,null,0,k.a,[[8,""],D.a,b.p,b.K],{color:[0,"color"],clear:[1,"clear"]},null),b._32(131072,x.a,[S.a,b.i]),(e()(),b._40(-1,0,["\n                    "])),(e()(),b._16(4,0,null,0,1,"ion-icon",[["name","cloud-download"],["role","img"]],[[2,"hide",null]],null,null,null,null)),b._15(5,147456,null,0,M.a,[D.a,b.p,b.K],{name:[0,"name"]},null),(e()(),b._40(-1,0,["\n                "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"cloud-download")},function(e,n){var t=n.component;e(n,0,0,t.spinner||t.module.handlerData.spinner,b._41(n,0,1,b._29(n,2).transform("core.download")));e(n,4,0,b._29(n,5)._hidden)})}function a(e){return b._42(0,[(e()(),b._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.download(t,!0)&&i}return i},O.b,O.a)),b._15(1,1097728,null,0,k.a,[[8,""],D.a,b.p,b.K],{color:[0,"color"],clear:[1,"clear"]},null),b._32(131072,x.a,[S.a,b.i]),(e()(),b._40(-1,0,["\n                    "])),(e()(),b._16(4,0,null,0,1,"ion-icon",[["name","refresh"],["role","img"]],[[2,"hide",null]],null,null,null,null)),b._15(5,147456,null,0,M.a,[D.a,b.p,b.K],{name:[0,"name"]},null),(e()(),b._40(-1,0,["\n                "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"refresh")},function(e,n){var t=n.component;e(n,0,0,t.spinner||t.module.handlerData.spinner,b._41(n,0,1,b._29(n,2).transform("core.refresh")));e(n,4,0,b._29(n,5)._hidden)})}function u(e){return b._42(0,[(e()(),b._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.buttonClicked(t,e.context.$implicit)&&i}return i},O.b,O.a)),b._15(1,1097728,null,0,k.a,[[8,""],D.a,b.p,b.K],{color:[0,"color"],clear:[1,"clear"]},null),b._32(131072,x.a,[S.a,b.i]),(e()(),b._40(-1,0,["\n                    "])),(e()(),b._16(4,0,null,0,1,"core-icon",[],null,null,null,U.b,U.a)),b._15(5,245760,null,0,N.a,[b.p],{name:[0,"name"],md:[1,"md"],ios:[2,"ios"]},null),(e()(),b._40(-1,0,["\n                "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,n.context.$implicit.icon,n.context.$implicit.mdIcon||"",n.context.$implicit.iosIcon||"")},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.hidden||t.spinner||t.module.handlerData.spinner,b._41(n,0,1,b._29(n,2).transform(n.context.$implicit.label)))})}function c(e){return b._42(0,[(e()(),b._16(0,0,null,null,1,"ion-spinner",[["class","core-animate-show-hide"]],[[2,"spinner-paused",null]],null,null,R.b,R.a)),b._15(1,114688,null,0,F.a,[D.a,b.p,b.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,b._29(n,1)._paused)})}function d(e){return b._42(0,[(e()(),b._16(0,0,null,null,26,"div",[["class","buttons core-module-buttons"],["item-end",""]],null,null,null,null,null)),b._15(1,278528,null,0,P.i,[b.v,b.w,b.p,b.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),b._33(2,{"core-button-completion":0}),(e()(),b._40(-1,null,["\n            "])),(e()(),b._40(-1,null,["\n            "])),(e()(),b._11(16777216,null,null,1,null,l)),b._15(6,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n\n            "])),(e()(),b._16(8,0,null,null,17,"div",[["class","core-module-buttons-more"]],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                "])),(e()(),b._40(-1,null,["\n                "])),(e()(),b._11(16777216,null,null,1,null,s)),b._15(12,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n\n                "])),(e()(),b._40(-1,null,["\n                "])),(e()(),b._11(16777216,null,null,1,null,a)),b._15(16,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n\n                "])),(e()(),b._40(-1,null,["\n                "])),(e()(),b._11(16777216,null,null,1,null,u)),b._15(20,802816,null,0,P.j,[b.W,b.T,b.v],{ngForOf:[0,"ngForOf"]},null),(e()(),b._40(-1,null,["\n\n                "])),(e()(),b._40(-1,null,["\n                "])),(e()(),b._11(16777216,null,null,1,null,c)),b._15(24,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n            "])),(e()(),b._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"buttons core-module-buttons",e(n,2,0,t.module.completiondata));e(n,6,0,t.module.completiondata);e(n,12,0,t.downloadEnabled&&t.showDownload);e(n,16,0,t.downloadEnabled&&t.showRefresh);e(n,20,0,t.module.handlerData.buttons);e(n,24,0,t.spinner||t.module.handlerData.spinner)},null)}function f(e){return b._42(0,[(e()(),b._16(0,0,null,null,5,"ion-badge",[["item-end",""],["text-start",""],["text-wrap",""]],null,null,null,null,null)),b._15(1,16384,null,0,L.a,[D.a,b.p,b.K],{color:[0,"color"]},null),(e()(),b._40(-1,null,["\n            "])),(e()(),b._16(3,0,null,null,1,"core-format-text",[],null,null,null,null,null)),b._15(4,540672,null,0,H.a,[b.p,K.a,I.a,C.a,S.a,W.a,q.a,B.a,j.a,G.a,z.a,V.a,[2,$.a],[2,Q.a],[2,Y.a],X.a,J.a],{text:[0,"text"]},null),(e()(),b._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,t.module.handlerData.extraBadgeColor);e(n,4,0,t.module.handlerData.extraBadge)},null)}function p(e){return b._42(0,[(e()(),b._16(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),b._15(1,16384,null,0,L.a,[D.a,b.p,b.K],null,null),(e()(),b._40(2,null,["",""])),b._32(131072,x.a,[S.a,b.i])],null,function(e,n){e(n,2,0,b._41(n,2,0,b._29(n,3).transform("core.course.hiddenfromstudents")))})}function h(e){return b._42(0,[(e()(),b._16(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),b._15(1,16384,null,0,L.a,[D.a,b.p,b.K],null,null),(e()(),b._40(2,null,["",""])),b._32(131072,x.a,[S.a,b.i])],null,function(e,n){e(n,2,0,b._41(n,2,0,b._29(n,3).transform("core.course.hiddenoncoursepage")))})}function m(e){return b._42(0,[(e()(),b._16(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),b._15(1,16384,null,0,L.a,[D.a,b.p,b.K],null,null),(e()(),b._16(2,0,null,null,1,"core-format-text",[],null,null,null,null,null)),b._15(3,540672,null,0,H.a,[b.p,K.a,I.a,C.a,S.a,W.a,q.a,B.a,j.a,G.a,z.a,V.a,[2,$.a],[2,Q.a],[2,Y.a],X.a,J.a],{text:[0,"text"]},null)],function(e,n){e(n,3,0,n.component.module.availabilityinfo)},null)}function _(e){return b._42(0,[(e()(),b._16(0,0,null,null,3,"ion-badge",[["color","warning"],["item-end",""],["text-wrap",""]],null,null,null,null,null)),b._15(1,16384,null,0,L.a,[D.a,b.p,b.K],{color:[0,"color"]},null),(e()(),b._40(2,null,["",""])),b._32(131072,x.a,[S.a,b.i])],function(e,n){e(n,1,0,"warning")},function(e,n){e(n,2,0,b._41(n,2,0,b._29(n,3).transform("core.course.manualcompletionnotsynced")))})}function g(e){return b._42(0,[(e()(),b._16(0,0,null,null,1,"core-format-text",[["class","core-module-description"],["maxHeight","80"]],null,null,null,null,null)),b._15(1,540672,null,0,H.a,[b.p,K.a,I.a,C.a,S.a,W.a,q.a,B.a,j.a,G.a,z.a,V.a,[2,$.a],[2,Q.a],[2,Y.a],X.a,J.a],{text:[0,"text"],maxHeight:[1,"maxHeight"]},null)],function(e,n){e(n,1,0,n.component.module.description,"80")},null)}function v(e){return b._42(0,[(e()(),b._16(0,0,null,null,42,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"id",0],[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.moduleClicked(t)&&i}return i},Z.b,Z.a)),b._15(1,278528,null,0,P.i,[b.v,b.w,b.p,b.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),b._33(2,{"item-media":0,"core-not-clickable":1,"item-dimmed":2}),b._15(3,1097728,null,3,ee.a,[ne.a,D.a,b.p,b.K,[2,te.a]],null,null),b._37(335544320,1,{contentLabel:0}),b._37(603979776,2,{_buttons:1}),b._37(603979776,3,{_icons:1}),b._15(7,16384,null,0,ie.a,[],null,null),(e()(),b._40(-1,2,["\n\n    "])),(e()(),b._11(16777216,null,0,1,null,r)),b._15(10,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,2,["\n    "])),(e()(),b._16(12,0,null,2,8,"div",[["class","core-module-title"]],null,null,null,null,null)),(e()(),b._40(-1,null,["\n        "])),(e()(),b._16(14,0,null,null,1,"core-format-text",[],null,null,null,null,null)),b._15(15,540672,null,0,H.a,[b.p,K.a,I.a,C.a,S.a,W.a,q.a,B.a,j.a,G.a,z.a,V.a,[2,$.a],[2,Q.a],[2,Y.a],X.a,J.a],{text:[0,"text"]},null),(e()(),b._40(-1,null,["\n\n        "])),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,d)),b._15(19,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n    "])),(e()(),b._40(-1,2,["\n    "])),(e()(),b._16(22,0,null,2,16,"div",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,f)),b._15(25,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,p)),b._15(28,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,h)),b._15(31,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,m)),b._15(34,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n        "])),(e()(),b._11(16777216,null,null,1,null,_)),b._15(37,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n    "])),(e()(),b._40(-1,2,["\n    "])),(e()(),b._11(16777216,null,2,1,null,g)),b._15(41,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,b._19(1,"core-course-module-handler ",t.module.handlerData.class,""),e(n,2,0,t.module.handlerData.icon,!t.module.handlerData.action||!1==!t.module.uservisible,0===t.module.visible||!1===t.module.uservisible));e(n,10,0,t.module.handlerData.icon);e(n,15,0,t.module.handlerData.title);e(n,19,0,!1!==t.module.uservisible);e(n,25,0,t.module.handlerData.extraBadge);e(n,28,0,0===t.module.visible&&(!t.section||t.section.visible));e(n,31,0,0!==t.module.visible&&t.module.isStealth);e(n,34,0,t.module.availabilityinfo);e(n,37,0,t.module.completiondata&&t.module.completiondata.offline);e(n,41,0,t.module.description)},function(e,n){var t=n.component;e(n,0,0,b._19(1,"core-course-module-",t.module.id,""),t.module.handlerData.a11yTitle)})}function y(e){return b._42(0,[(e()(),b._11(16777216,null,null,1,null,v)),b._15(1,16384,null,0,P.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.module&&0!==t.module.visibleoncoursepage)},null)}var b=t(1),P=t(8),E=t(540),C=t(11),I=t(5),S=t(19),w=t(16),A=t(45),T=b._14({encapsulation:2,styles:[],data:{}}),O=t(46),k=t(43),D=t(7),x=t(27),M=t(47),U=t(131),N=t(121),R=t(112),F=t(95),L=t(146),H=t(42),K=t(2),W=t(15),q=t(3),B=t(26),j=t(6),G=t(17),z=t(10),V=t(18),$=t(22),Q=t(24),Y=t(35),X=t(38),J=t(13),Z=t(31),ee=t(21),ne=t(20),te=t(28),ie=t(33);t(444),t(53),t(41);t.d(n,"a",function(){return oe}),n.b=y;var oe=b._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(23),o=(t(4),t(150)),r=(t(173),t(163),t(194),function(){function e(e,n,t,r,l,s,a,u,c,d,f,p,h,m){this.translate=e,this.injector=n,this.eventsProvider=t,this.fileSessionProvider=r,this.syncProvider=l,this.domUtils=s,this.textUtils=a,this.utils=u,this.sitesProvider=c,this.uploaderProvider=d,this.workshopProvider=f,this.workshopHelper=p,this.workshopOffline=h,this.strategyDelegate=m,this.data={workshopId:0,assessment:null,edit:!1,selectedValues:[],fieldErrors:{},strategy:""},this.assessmentStrategyLoaded=!1,this.notSupported=!1,this.feedbackText="",this.feedbackControl=new i.e,this.overallFeedkback=!1,this.overallFeedkbackRequired=!1,this.component=o.a.COMPONENT,this.originalData={text:"",files:[],weight:1,selectedValues:[]}}return e.prototype.ngOnInit=function(){var e=this;if(this.assessmentId&&this.strategy)if(this.data.workshopId=this.workshop.id,this.data.edit=this.edit,this.data.strategy=this.strategy,this.componentClass=this.strategyDelegate.getComponentForPlugin(this.injector,this.strategy),this.componentClass){if(this.overallFeedkback=!!this.workshop.overallfeedbackmode,this.overallFeedkbackRequired=2==this.workshop.overallfeedbackmode,this.componentId=this.workshop.coursemodule,this.edit&&this.access.canallocate){this.weights=[];for(var n=16;n>=0;n--)this.weights[n]=n}this.edit&&this.syncProvider.blockOperation(o.a.COMPONENT,this.workshop.id),this.load().then(function(){e.obsInvalidated=e.eventsProvider.on(o.a.ASSESSMENT_INVALIDATED,e.load.bind(e),e.sitesProvider.getCurrentSiteId())}).finally(function(){e.assessmentStrategyLoaded=!0})}else this.notSupported=!this.strategyDelegate.isPluginSupported(this.strategy),this.assessmentStrategyLoaded=!0;else this.assessmentStrategyLoaded=!0},e.prototype.load=function(){var e=this;return this.workshopHelper.getReviewerAssessmentById(this.workshop.id,this.assessmentId,this.userId).then(function(n){e.data.assessment=n;return(e.edit?e.workshopOffline.getAssessment(e.workshop.id,e.assessmentId).then(function(t){var i=t.inputdata;if(e.hasOffline=!0,n.feedbackauthor=i.feedbackauthor,e.access.canallocate&&(n.weight=i.weight),n.form.current=e.workshopProvider.parseFields(e.utils.objectToArrayOfObjects(i,"name","value")),i)return e.workshopHelper.getAssessmentFilesFromOfflineFilesObject(i.feedbackauthorattachmentsid,e.workshop.id,e.assessmentId).then(function(e){n.feedbackattachmentfiles=e})}).catch(function(){e.hasOffline=!1}).finally(function(){e.feedbackText=n.feedbackauthor,e.feedbackControl.setValue(e.feedbackText),e.originalData.text=e.data.assessment.feedbackauthor,e.access.canallocate&&(e.originalData.weight=n.weight),e.originalData.files=[],n.feedbackattachmentfiles.forEach(function(n){var t;t=n.filename?n.filename:"/"==n.filepath[0]?n.filepath.substr(1):n.filepath,e.originalData.files.push({filename:t,fileurl:n.fileurl})})}):Promise.resolve()).then(function(){return e.strategyDelegate.getOriginalValues(e.strategy,n.form,e.workshop.id).then(function(n){e.data.selectedValues=n}).finally(function(){e.originalData.selectedValues=e.utils.clone(e.data.selectedValues),e.edit&&(e.fileSessionProvider.setFiles(o.a.COMPONENT,e.workshop.id+"_"+e.assessmentId,n.feedbackattachmentfiles),e.access.canallocate&&(e.weight=n.weight))})})})},e.prototype.hasDataChanged=function(){if(!this.assessmentStrategyLoaded)return!1;var e=this.textUtils.restorePluginfileUrls(this.feedbackText,this.data.assessment.feedbackcontentfiles||[]);if(this.originalData.text!=e)return!0;if(this.access.canallocate&&this.originalData.weight!=this.weight)return!0;var n=this.fileSessionProvider.getFiles(o.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[];return!!this.uploaderProvider.areFileListDifferent(n,this.originalData.files)||this.strategyDelegate.hasDataChanged(this.workshop,this.originalData.selectedValues,this.data.selectedValues)},e.prototype.saveAssessment=function(){var e=this,n=this.fileSessionProvider.getFiles(o.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[],t=!1,i=!n.length,r=this.domUtils.showModalLoading("core.sending",!0);return this.data.fieldErrors={},this.workshopHelper.uploadOrStoreAssessmentFiles(this.workshop.id,this.assessmentId,n,t).catch(function(){return t=!0,i=!0,e.workshopHelper.uploadOrStoreAssessmentFiles(e.workshop.id,e.assessmentId,n,t)}).then(function(t){var i=e.textUtils.restorePluginfileUrls(e.feedbackText,e.data.assessment.feedbackcontentfiles||[]);return e.workshopHelper.prepareAssessmentData(e.workshop,e.data.selectedValues,i,n,e.data.assessment.form,t).catch(function(n){return e.data.fieldErrors=n,Promise.reject(e.translate.instant("core.errorinvalidform"))})}).then(function(n){return t?e.workshopOffline.saveAssessment(e.workshop.id,e.assessmentId,e.workshop.course,n).then(function(){}):e.workshopProvider.updateAssessment(e.workshop.id,e.assessmentId,e.workshop.course,n,!1,i)}).then(function(t){var i=[];return t&&(i.push(e.workshopHelper.deleteAssessmentStoredFiles(e.workshop.id,e.assessmentId)),i.push(e.workshopProvider.invalidateAssessmentFormData(e.workshop.id,e.assessmentId)),i.push(e.workshopProvider.invalidateAssessmentData(e.workshop.id,e.assessmentId))),Promise.all(i).catch(function(){}).finally(function(){e.eventsProvider.trigger(o.a.ASSESSMENT_SAVED,{workshopId:e.workshop.id,assessmentId:e.assessmentId,userId:e.sitesProvider.getCurrentSiteUserId()},e.sitesProvider.getCurrentSiteId()),n&&e.uploaderProvider.clearTmpFiles(n)})}).catch(function(n){return e.domUtils.showErrorModalDefault(n,"Error saving assessment."),Promise.reject(null)}).finally(function(){r.dismiss()})},e.prototype.onFeedbackChange=function(e){this.feedbackText=e},e.prototype.ngOnDestroy=function(){this.obsInvalidated&&this.obsInvalidated.off(),this.data.assessment.feedbackattachmentfiles&&this.uploaderProvider.clearTmpFiles(this.data.assessment.feedbackattachmentfiles)},e}())},function(e,n,t){"use strict";function i(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showSearch(t)&&i}return i},M.b,M.a)),x._15(1,1097728,[[1,4]],0,U.a,[[8,""],N.a,x.p,x.K],null,null),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,0,["\n        "])),(e()(),x._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(5,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"search")},function(e,n){e(n,0,0,x._41(n,0,0,x._29(n,2).transform("addon.mod_data.search")));e(n,4,0,x._29(n,5)._hidden)})}function o(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function r(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function s(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function a(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.gotoAddEntries(t)&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_data.addentries")),"add",500)},null)}function u(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0,o=e.component;if("action"===n){i=!1!==o.gotoEntry(o.firstEntry)&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_data.single")),"document",400)},null)}function c(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,300)},null)}function d(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},H.b,H.a)),x._15(1,770048,null,0,K.a,[W.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",200)},null)}function f(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._33(5,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function p(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),x._15(1,16384,[[2,4]],0,q.a,[N.a,x.p,x.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),x._40(2,null,["",""])),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,"addon-data-groupslabel")},function(e,n){e(n,2,0,x._41(n,2,0,x._29(n,3).transform("core.groupsseparate")))})}function h(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),x._15(1,16384,[[2,4]],0,q.a,[N.a,x.p,x.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),x._40(2,null,["",""])),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,"addon-data-groupslabel")},function(e,n){e(n,2,0,x._41(n,2,0,x._29(n,3).transform("core.groupsvisible")))})}function m(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),x._15(1,16384,[[5,4]],0,B.a,[x.p],{value:[0,"value"]},null),(e()(),x._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function _(e){return x._42(0,[(e()(),x._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,j.b,j.a)),x._15(1,1097728,null,3,G.a,[z.a,N.a,x.p,x.K,[2,V.a]],null,null),x._37(603979776,2,{contentLabel:0}),x._37(603979776,3,{_buttons:1}),x._37(603979776,4,{_icons:1}),x._15(5,16384,null,0,$.a,[],null,null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,1,1,null,p)),x._15(8,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,1,1,null,h)),x._15(11,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-data-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==x._29(e,14)._click(t)&&i}if("keyup.space"===n){i=!1!==x._29(e,14)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.selectedGroup=t)&&i}if("ionChange"===n){i=!1!==o.setGroup(o.selectedGroup)&&i}return i},Y.b,Y.a)),x._15(14,1228800,null,1,X.a,[J.a,z.a,N.a,x.p,x.K,[2,G.a],Z.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),x._37(603979776,5,{options:1}),x._35(1024,null,ee.l,function(e){return[e]},[X.a]),x._15(17,671744,null,0,ee.q,[[8,null],[8,null],[8,null],[2,ee.l]],{model:[0,"model"]},{update:"ngModelChange"}),x._35(2048,null,ee.m,null,[ee.q]),x._15(19,16384,null,0,ee.n,[ee.m],null,null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,m)),x._15(22,802816,null,0,Q.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.selectedGroup);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,x._29(n,14)._disabled,x._29(n,19).ngClassUntouched,x._29(n,19).ngClassTouched,x._29(n,19).ngClassPristine,x._29(n,19).ngClassDirty,x._29(n,19).ngClassValid,x._29(n,19).ngClassInvalid,x._29(n,19).ngClassPending)})}function g(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._33(5,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,6).transform("addon.mod_data.notopenyet",e(n,5,0,t.timeAvailableFromReadable))))})}function v(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._33(5,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,6).transform("addon.mod_data.expired",e(n,5,0,t.timeAvailableToReadable))))})}function y(e){return x._42(0,[(e()(),x._16(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._33(5,{entrieslefttoview:0}),x._33(6,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,7).transform("addon.mod_data.entrieslefttoaddtoview",e(n,6,0,e(n,5,0,t.access.entrieslefttoview)))))})}function b(e){return x._42(0,[(e()(),x._16(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._33(5,{entriesleft:0}),x._33(6,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,7).transform("addon.mod_data.entrieslefttoadd",e(n,6,0,e(n,5,0,t.access.entrieslefttoadd)))))})}function P(e){return x._42(0,[(e()(),x._16(0,0,null,null,10,"ion-item",[["class","item item item-block"]],null,null,null,j.b,j.a)),x._15(1,1097728,null,3,G.a,[z.a,N.a,x.p,x.K,[2,V.a]],null,null),x._37(335544320,6,{contentLabel:0}),x._37(603979776,7,{_buttons:1}),x._37(603979776,8,{_icons:1}),x._15(5,16384,null,0,$.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,2,2,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.searchReset()&&i}return i},null,null)),(e()(),x._40(8,null,["",""])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,2,["\n        "]))],null,function(e,n){e(n,8,0,x._41(n,8,0,x._29(n,9).transform("addon.mod_data.resetsettings")))})}function E(e){return x._42(0,[(e()(),x._16(0,0,null,null,5,"div",[["class","core-success-card"]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.searchReset()&&i}return i},null,null)),(e()(),x._40(-1,null,["\n            "])),(e()(),x._16(2,0,null,null,2,"p",[],[[8,"innerHTML",1]],null,null,null,null)),x._33(3,{$a:0}),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,null,["\n        "]))],null,function(e,n){var t=n.component;e(n,2,0,x._41(n,2,0,x._29(n,4).transform("addon.mod_data.foundrecords",e(n,3,0,t.foundRecordsData))))})}function C(e){return x._42(0,[(e()(),x._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,P)),x._15(3,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n\n        "])),(e()(),x._11(16777216,null,null,1,null,E)),x._15(6,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.foundRecordsData);e(n,6,0,t.foundRecordsData)},null)}function I(e){return x._42(0,[(e()(),x._16(0,0,null,null,5,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._40(-1,null,["\n\n        "])),(e()(),x._16(3,0,null,null,1,"core-compile-html",[],null,null,null,ne.b,ne.a)),x._15(4,966656,null,0,te.a,[ie.a,x.i,x.p,[2,oe.a],x.w,re.a,le.a],{text:[0,"text"],jsData:[1,"jsData"],extraImports:[2,"extraImports"]},null),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.entriesRendered,t.jsData,t.extraImports)},function(e,n){e(n,0,0,x._19(1,"addon-data-contents addon-data-entries-",n.component.data.id,""))})}function S(e){return x._42(0,[(e()(),x._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),x._15(1,16384,null,0,se.a,[],null,null),(e()(),x._40(-1,null,["\n                "])),(e()(),x._16(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.searchEntries(o.search.page-1)&&i}return i},M.b,M.a)),x._15(4,1097728,null,0,U.a,[[8,""],N.a,x.p,x.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),x._40(-1,0,["\n                    "])),(e()(),x._16(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(7,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),x._40(8,0,["\n                    ","\n                "])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,"","");e(n,7,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,6,0,x._29(n,7)._hidden);e(n,8,0,x._41(n,8,0,x._29(n,9).transform("core.previous")))})}function w(e){return x._42(0,[(e()(),x._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),x._15(1,16384,null,0,se.a,[],null,null),(e()(),x._40(-1,null,["\n                "])),(e()(),x._16(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.searchEntries(o.search.page+1)&&i}return i},M.b,M.a)),x._15(4,1097728,null,0,U.a,[[8,""],N.a,x.p,x.K],{block:[0,"block"]},null),(e()(),x._40(5,0,["\n                    ","\n                    "])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(8,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),x._40(-1,0,["\n                "])),(e()(),x._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,"");e(n,8,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,5,0,x._41(n,5,0,x._29(n,6).transform("core.next")));e(n,7,0,x._29(n,8)._hidden)})}function A(e){return x._42(0,[(e()(),x._16(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),x._15(1,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),x._15(4,16384,null,0,ue.a,[],null,null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,S)),x._15(7,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,w)),x._15(10,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.search.page>0);e(n,10,0,t.hasNextPage)},null)}function T(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"core-empty-box",[["icon","archive"]],null,null,null,ce.b,ce.a)),x._15(1,49152,null,0,de.a,[],{message:[0,"message"],icon:[1,"icon"]},null),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_data.norecords")),"archive")},null)}function O(e){return x._42(0,[(e()(),x._16(0,0,null,null,7,"core-empty-box",[["class","core-empty-box-clickable"],["icon","archive"]],null,null,null,ce.b,ce.a)),x._15(1,49152,null,0,de.a,[],{message:[0,"message"],icon:[1,"icon"]},null),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,0,["\n        "])),(e()(),x._16(4,0,null,0,2,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.searchReset()&&i}return i},null,null)),(e()(),x._40(5,null,["",""])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_data.nomatch")),"archive")},function(e,n){e(n,5,0,x._41(n,5,0,x._29(n,6).transform("addon.mod_data.resetsettings")))})}function k(e){return x._42(0,[(e()(),x._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,fe.b,fe.a)),x._15(1,1228800,null,2,pe.a,[he.a],null,null),x._37(335544320,9,{_mainButton:0}),x._37(603979776,10,{_fabLists:1}),x._15(4,212992,null,0,me.a,[x.p,_e.a],null,null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoAddEntries(t)&&i}return i},ge.b,ge.a)),x._15(7,49152,[[9,4]],0,ve.a,[N.a,x.p,x.K],null,null),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,0,["\n        "])),(e()(),x._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(11,147456,null,0,L.a,[N.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._40(-1,0,["\n"]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,x._41(n,6,0,x._29(n,8).transform("addon.mod_data.addentries")));e(n,10,0,x._29(n,11)._hidden)})}function D(e){return x._42(0,[(e()(),x._40(-1,null,["\n"])),(e()(),x._16(1,0,null,null,34,"core-navbar-buttons",[["end",""]],null,null,null,ye.b,ye.a)),x._15(2,245760,null,1,be.a,[x.p,Pe.a,re.a],null,null),x._37(603979776,1,{buttons:1}),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,i)),x._15(6,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._16(8,0,null,0,26,"core-context-menu",[],null,null,null,Ee.b,Ee.a)),x._15(9,245760,null,0,W.a,[F.a,Ce.a,x.p,re.a,[2,Ie.a]],null,null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,o)),x._15(12,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,r)),x._15(15,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,l)),x._15(18,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,s)),x._15(21,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,a)),x._15(24,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,u)),x._15(27,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,c)),x._15(30,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,d)),x._15(33,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._40(-1,0,["\n"])),(e()(),x._40(-1,null,["\n\n"])),(e()(),x._40(-1,null,["\n"])),(e()(),x._16(38,0,null,null,40,"core-loading",[["class","core-loading-center"]],null,null,null,Se.b,Se.a)),x._15(39,638976,null,0,we.a,[F.a,x.p,Ae.a,le.a],{hideUntil:[0,"hideUntil"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._16(41,0,null,0,1,"core-course-module-description",[],null,null,null,Te.b,Te.a)),x._15(42,49152,null,0,Oe.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,f)),x._15(46,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,_)),x._15(49,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,g)),x._15(52,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,v)),x._15(55,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,y)),x._15(58,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,b)),x._15(61,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,C)),x._15(65,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,I)),x._15(68,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,A)),x._15(71,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,T)),x._15(74,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,O)),x._15(77,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n"])),(e()(),x._40(-1,null,["\n\n"])),(e()(),x._11(16777216,null,null,1,null,k)),x._15(81,16384,null,0,Q.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,6,0,t.canSearch),e(n,9,0);e(n,12,0,t.externalUrl);e(n,15,0,t.description);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.canAdd);e(n,27,0,t.firstEntry);e(n,30,0,t.prefetchStatusIcon);e(n,33,0,t.size);e(n,39,0,t.loaded);e(n,42,0,t.description,t.component,t.componentId);e(n,46,0,t.hasOffline);e(n,49,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,52,0,!t.access.timeavailable&&t.timeAvailableFrom);e(n,55,0,!t.access.timeavailable&&t.timeAvailableTo);e(n,58,0,t.access.entrieslefttoview);e(n,61,0,t.access.entrieslefttoadd);e(n,65,0,t.search.searching&&!t.isEmpty);e(n,68,0,!t.isEmpty);e(n,71,0,t.search.page>0||t.hasNextPage);e(n,74,0,t.isEmpty&&!t.search.searching);e(n,77,0,t.isEmpty&&t.search.searching);e(n,81,0,t.canAdd)},null)}t.d(n,"b",function(){return He}),n.c=D,t.d(n,"a",function(){return Ke});var x=t(1),M=t(46),U=t(43),N=t(7),R=t(27),F=t(19),L=t(47),H=t(81),K=t(74),W=t(70),q=t(62),B=t(92),j=t(31),G=t(21),z=t(20),V=t(28),$=t(33),Q=t(8),Y=t(111),X=t(93),J=t(34),Z=t(52),ee=t(23),ne=t(195),te=t(169),ie=t(138),oe=t(22),re=t(5),le=t(3),se=t(113),ae=t(142),ue=t(114),ce=t(120),de=t(109),fe=t(355),pe=t(232),he=t(15),me=t(291),_e=t(24),ge=t(356),ve=t(196),ye=t(89),be=t(82),Pe=t(6),Ee=t(80),Ce=t(63),Ie=t(69),Se=t(49),we=t(48),Ae=t(13),Te=t(103),Oe=t(91),ke=t(478),De=t(96),xe=t(251),Me=t(208),Ue=t(293),Ne=t(25),Re=t(68),Fe=t(168),Le=t(204),He=x._14({encapsulation:0,styles:["{{ cssTemplate }}"],data:{}}),Ke=x._12("addon-mod-data-index",ke.a,function(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"addon-mod-data-index",[],null,null,null,D,He)),x._15(1,245760,null,0,ke.a,[x.u,De.a,xe.a,Me.a,[2,_e.a],Ue.a,Ne.a,Re.a,Fe.a,Le.a,le.a,oe.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"ion-icon",[["item-start",""],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._15(1,147456,[[3,4]],0,f.a,[p.a,d.p,d.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.component.prefetch.prefetchCourseIcon)},function(e,n){e(n,0,0,d._29(n,1)._hidden)})}function o(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"ion-spinner",[["item-start",""]],[[2,"spinner-paused",null]],null,null,h.b,h.a)),d._15(1,114688,null,0,m.a,[p.a,d.p,d.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,d._29(n,1)._paused)})}function r(e){return d._42(0,[(e()(),d._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action("download")&&i}return i},_.b,_.a)),d._15(1,1097728,null,3,g.a,[v.a,p.a,d.p,d.K,[2,y.a]],null,null),d._37(335544320,1,{contentLabel:0}),d._37(603979776,2,{_buttons:1}),d._37(603979776,3,{_icons:1}),d._15(5,16384,null,0,b.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._11(16777216,null,0,1,null,i)),d._15(8,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._11(16777216,null,0,1,null,o)),d._15(11,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._40(14,null,["",""])),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,8,0,"spinner"!=t.prefetch.prefetchCourseIcon);e(n,11,0,"spinner"==t.prefetch.prefetchCourseIcon)},function(e,n){var t=n.component;e(n,14,0,d._41(n,14,0,d._29(n,15).transform(t.prefetch.title)))})}function l(e){return d._42(0,[(e()(),d._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action("hide")&&i}return i},_.b,_.a)),d._15(1,1097728,null,3,g.a,[v.a,p.a,d.p,d.K,[2,y.a]],null,null),d._37(335544320,4,{contentLabel:0}),d._37(603979776,5,{_buttons:1}),d._37(603979776,6,{_icons:1}),d._15(5,16384,null,0,b.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye"]],null,null,null,I.b,I.a)),d._15(8,245760,null,0,S.a,[d.p],{name:[0,"name"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._40(11,null,["",""])),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-eye")},function(e,n){e(n,11,0,d._41(n,11,0,d._29(n,12).transform("core.courses.hidecourse")))})}function s(e){return d._42(0,[(e()(),d._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action("show")&&i}return i},_.b,_.a)),d._15(1,1097728,null,3,g.a,[v.a,p.a,d.p,d.K,[2,y.a]],null,null),d._37(335544320,7,{contentLabel:0}),d._37(603979776,8,{_buttons:1}),d._37(603979776,9,{_icons:1}),d._15(5,16384,null,0,b.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye-slash"]],null,null,null,I.b,I.a)),d._15(8,245760,null,0,S.a,[d.p],{name:[0,"name"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._40(11,null,["",""])),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-eye-slash")},function(e,n){e(n,11,0,d._41(n,11,0,d._29(n,12).transform("core.courses.show")))})}function a(e){return d._42(0,[(e()(),d._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action("favourite")&&i}return i},_.b,_.a)),d._15(1,1097728,null,3,g.a,[v.a,p.a,d.p,d.K,[2,y.a]],null,null),d._37(335544320,10,{contentLabel:0}),d._37(603979776,11,{_buttons:1}),d._37(603979776,12,{_icons:1}),d._15(5,16384,null,0,b.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,I.b,I.a)),d._15(8,245760,null,0,S.a,[d.p],{name:[0,"name"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._40(11,null,["",""])),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star")},function(e,n){e(n,11,0,d._41(n,11,0,d._29(n,12).transform("core.courses.addtofavourites")))})}function u(e){return d._42(0,[(e()(),d._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action("unfavourite")&&i}return i},_.b,_.a)),d._15(1,1097728,null,3,g.a,[v.a,p.a,d.p,d.K,[2,y.a]],null,null),d._37(335544320,13,{contentLabel:0}),d._37(603979776,14,{_buttons:1}),d._37(603979776,15,{_icons:1}),d._15(5,16384,null,0,b.a,[],null,null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star-o"]],null,null,null,I.b,I.a)),d._15(8,245760,null,0,S.a,[d.p],{name:[0,"name"]},null),(e()(),d._40(-1,2,["\n    "])),(e()(),d._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),d._40(11,null,["",""])),d._32(131072,E.a,[C.a,d.i]),(e()(),d._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star-o")},function(e,n){e(n,11,0,d._41(n,11,0,d._29(n,12).transform("core.courses.removefromfavourites")))})}function c(e){return d._42(0,[(e()(),d._11(16777216,null,null,1,null,r)),d._15(1,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,l)),d._15(4,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,s)),d._15(7,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,a)),d._15(10,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n"])),(e()(),d._11(16777216,null,null,1,null,u)),d._15(13,16384,null,0,P.k,[d.W,d.T],{ngIf:[0,"ngIf"]},null),(e()(),d._40(-1,null,["\n\n"]))],function(e,n){var t=n.component;e(n,1,0,t.downloadCourseEnabled);e(n,4,0,!t.course.hidden);e(n,7,0,t.course.hidden);e(n,10,0,!t.course.isfavourite);e(n,13,0,t.course.isfavourite)},null)}t.d(n,"a",function(){return D});var d=t(1),f=t(47),p=t(7),h=t(112),m=t(95),_=t(31),g=t(21),v=t(20),y=t(28),b=t(33),P=t(8),E=t(27),C=t(19),I=t(131),S=t(121),w=t(566),A=t(61),T=t(37),O=t(51),k=d._14({encapsulation:2,styles:[],data:{}}),D=d._12("core-courses-course-options-menu",w.a,function(e){return d._42(0,[(e()(),d._16(0,0,null,null,1,"core-courses-course-options-menu",[],null,null,null,c,k)),d._15(1,114688,null,0,w.a,[A.a,T.a,O.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e,n){this.utils=e,this.textUtils=n,this.placeholder="",this.showKeyboard=!1,this.onSubmit=new i.r,this.onResize=new i.r}return e.prototype.ngOnInit=function(){this.showKeyboard=this.utils.isTrueOrOne(this.showKeyboard)},e.prototype.submitForm=function(e){e.preventDefault(),e.stopPropagation();var n=this.message.trim();n&&(this.message="",n=this.textUtils.replaceNewLines(n,"<br>"),this.onSubmit.emit(n))},e.prototype.textareaResized=function(){this.onResize.emit()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.timeUtils=e,this.finished=new i.r}return e.prototype.ngOnInit=function(){var e=this,n=this.timeLeftClass||"core-timer-timeleft-",t=Math.round(Number(this.endTime)),i=this.containerRef&&this.containerRef.nativeElement;t&&(this.timeInterval=setInterval(function(){if(e.timeLeft=t-e.timeUtils.timestamp(),e.timeLeft<0)return clearInterval(e.timeInterval),void e.finished.emit();e.timeLeft<100&&!i.classList.contains(n+e.timeLeft)&&(i.classList.remove(n+(e.timeLeft+1)),i.classList.remove(n+(e.timeLeft+2)),i.classList.add(n+e.timeLeft))},200))},e.prototype.ngOnDestroy=function(){clearInterval(this.timeInterval)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(9);var i=t(521),o=function(){function e(e,n,t,i){var o=this;this.sitesProvider=e,this.textUtils=t,this.modalCtrl=i,this.modelValueName="recaptcharesponse",this.expired=!1,n.getCurrentLanguage().then(function(e){o.lang=e})}return e.prototype.ngOnInit=function(){this.siteUrl=this.siteUrl||this.sitesProvider.getCurrentSite().getURL()},e.prototype.answerRecaptcha=function(){var e=this,n=this.textUtils.concatenatePaths(this.siteUrl,"webservice/recaptcha.php?lang="+this.lang),t=this.modalCtrl.create(i.a,{src:n},{cssClass:"core-modal-fullscreen"});t.onDidDismiss(function(n){e.expired=n.expired,e.model[e.modelValueName]=n.value}),t.present()},e}()},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,6,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0],[8,"disabled",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.clearForm()&&i}return i},l.b,l.a)),r._15(1,1097728,[[2,4]],0,s.a,[[8,""],a.a,r.p,r.K],{clear:[0,"clear"]},null),r._32(131072,u.a,[c.a,r.i]),(e()(),r._40(-1,0,["\n                "])),(e()(),r._16(4,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(5,147456,null,0,d.a,[a.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"close")},function(e,n){var t=n.component;e(n,0,0,r._41(n,0,0,r._29(n,2).transform("core.clearsearch")),!t.searched,t.disabled);e(n,4,0,r._29(n,5)._hidden)})}function o(e){return r._42(0,[(e()(),r._16(0,0,null,null,34,"ion-card",[],null,null,null,null,null)),r._15(1,16384,null,0,f.a,[a.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;if("submit"===n){i=!1!==r._29(e,5).onSubmit(t)&&i}if("reset"===n){i=!1!==r._29(e,5).onReset()&&i}if("ngSubmit"===n){i=!1!==o.submitForm(t)&&i}return i},null,null)),r._15(4,16384,null,0,p.w,[],null,null),r._15(5,4210688,[["f",4]],0,p.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r._35(2048,null,p.b,null,[p.p]),r._15(7,16384,null,0,p.o,[p.b],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(9,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,h.b,h.a)),r._15(10,1097728,null,3,m.a,[_.a,a.a,r.p,r.K,[2,g.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(14,16384,null,0,v.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(16,0,null,3,5,"ion-input",[["name","search"],["type","text"]],[[8,"spellcheck",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.searchText=t)&&i}return i},y.b,y.a)),r._15(17,671744,null,0,p.q,[[2,p.b],[8,null],[8,null],[8,null]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),r._35(2048,null,p.m,null,[p.q]),r._15(19,16384,null,0,p.n,[p.m],null,null),r._15(20,5423104,null,0,b.a,[a.a,P.a,_.a,E.a,r.p,r.K,[2,C.a],[2,m.a],[2,p.m],I.a],{disabled:[0,"disabled"],type:[1,"type"],autocorrect:[2,"autocorrect"],placeholder:[3,"placeholder"]},null),r._15(21,81920,null,0,S.a,[r.p,w.a,A.a,[2,T.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(23,0,null,4,5,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""],["type","submit"]],[[1,"aria-label",0],[8,"disabled",0],[8,"disabled",0]],null,null,l.b,l.a)),r._15(24,1097728,[[2,4]],0,s.a,[[8,""],a.a,r.p,r.K],{clear:[0,"clear"]},null),(e()(),r._40(-1,0,["\n                "])),(e()(),r._16(26,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(27,147456,null,0,d.a,[a.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n            "])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,4,1,null,i)),r._15(31,16384,null,0,O.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,17,0,"search",t.disabled,t.searchText);e(n,20,0,t.disabled,"text",t.autocorrect,t.placeholder);e(n,21,0,t.autoFocus);e(n,24,0,"");e(n,27,0,"search");e(n,31,0,t.showClear)},function(e,n){var t=n.component;e(n,3,0,r._29(n,7).ngClassUntouched,r._29(n,7).ngClassTouched,r._29(n,7).ngClassPristine,r._29(n,7).ngClassDirty,r._29(n,7).ngClassValid,r._29(n,7).ngClassInvalid,r._29(n,7).ngClassPending);e(n,16,0,t.spellcheck,r._29(n,19).ngClassUntouched,r._29(n,19).ngClassTouched,r._29(n,19).ngClassPristine,r._29(n,19).ngClassDirty,r._29(n,19).ngClassValid,r._29(n,19).ngClassInvalid,r._29(n,19).ngClassPending);e(n,23,0,t.searchLabel,!t.searchText||t.searchText.length<t.lengthCheck,t.disabled);e(n,26,0,r._29(n,27)._hidden)})}t.d(n,"a",function(){return k}),n.b=o;var r=t(1),l=t(46),s=t(43),a=t(7),u=t(27),c=t(19),d=t(47),f=t(87),p=t(23),h=t(31),m=t(21),_=t(20),g=t(28),v=t(33),y=t(94),b=t(79),P=t(15),E=t(34),C=t(24),I=t(32),S=t(340),w=t(5),A=t(3),T=t(22),O=t(8),k=r._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(191);var i=function(){function e(e,n,t){this.ufDelegate=e,this.utilsProvider=n,this.injector=t,this.signup=!1,this.edit=!1,this.data={}}return e.prototype.ngOnInit=function(){var e=this;this.ufDelegate.getComponent(this.injector,this.field,this.signup).then(function(n){e.componentClass=n}),this.data.field=this.field,this.data.edit=this.utilsProvider.isTrueOrOne(this.edit),this.edit&&(this.data.signup=this.utilsProvider.isTrueOrOne(this.signup),this.data.disabled=this.utilsProvider.isTrueOrOne(this.field.locked),this.data.form=this.form,this.data.registerAuth=this.registerAuth)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(683),t(1364),t(1376),t(1377),t(1378),t(1379),t(1380);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(e){this.show=e.isGetCoursesByFieldAvailable()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(e){this.show=e.isGetCoursesByFieldAvailable()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){return function(e){this.show=!e.isSearchCoursesDisabledInSite()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e){this.coursesProvider=e}return e.prototype.ngOnInit=function(){var e=this;this.coursesProvider.isMyCoursesDisabledInSite()?this.show=!1:this.coursesProvider.getUserCourses().then(function(n){e.show=n.length>0})},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(206);var i=function(){function e(e,n,t,i){this.sitesProvider=e,this.courseProvider=n,this.moduleDelegate=t,this.siteHomeProvider=i,this.siteHomeId=e.getCurrentSite().getSiteHomeId()}return e.prototype.ngOnInit=function(){var e=this,n=this.sitesProvider.getCurrentSite();if(n.getStoredConfig("newsitems")||0){var t=n.getSiteHomeId();this.siteHomeProvider.getNewsForum(t).then(function(n){return e.courseProvider.getModuleBasicInfo(n.cmid).then(function(n){e.show=!0,e.module=n,n.handlerData=e.moduleDelegate.getModuleDataFor(n.modname,n,t,n.section)})}).catch(function(){})}},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(4),t(1382);var i=function(){return function(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(4),t(117),t(71),t(116),t(123),function(){function e(e,n,t,o,r,l,s,a,u){this.injector=n,this.questionDelegate=t,this.utils=o,this.behaviourDelegate=r,this.questionHelper=l,this.translate=s,this.questionProvider=a,this.domUtils=u,this.data={},this.behaviourComponents=[],this.loaded=!1,e=e.getInstance("CoreQuestionComponent"),this.buttonClicked=new i.r,this.onAbort=new i.r}return e.prototype.ngOnInit=function(){var e=this;this.offlineEnabled=this.utils.isTrueOrOne(this.offlineEnabled),this.question?this.questionDelegate.getComponentForQuestion(this.injector,this.question).then(function(n){if(e.componentClass=n,n){e.data={question:e.question,component:e.component,componentId:e.componentId,attemptId:e.attemptId,offlineEnabled:e.offlineEnabled,buttonClicked:e.buttonClicked,onAbort:e.onAbort},e.questionHelper.extractQuestionScripts(e.question);var t=e.questionDelegate.getBehaviourForQuestion(e.question,e.question.preferredBehaviour);if(!e.behaviourDelegate.isBehaviourSupported(t))return e.logger.warn("Aborting question because the behaviour is not supported.",e.question.name),void e.questionHelper.showComponentError(e.onAbort,e.translate.instant("addon.mod_quiz.errorbehaviournotsupported")+" "+t);if(e.seqCheck=e.questionHelper.getQuestionSequenceCheckFromHtml(e.question.html),!e.seqCheck)return e.logger.warn("Aborting question because couldn't retrieve sequence check.",e.question.name),void e.questionHelper.showComponentError(e.onAbort);var i=void 0;e.offlineEnabled?i=e.questionProvider.getQuestionAnswers(e.component,e.attemptId,e.question.slot).then(function(n){e.question.localAnswers=e.questionProvider.convertAnswersArrayToObject(n,!0)}).catch(function(){e.question.localAnswers={}}):(e.question.localAnswers={},i=Promise.resolve()),i.then(function(){e.behaviourDelegate.handleQuestion(e.injector,e.question.preferredBehaviour,e.question).then(function(n){e.behaviourComponents=n}).finally(function(){e.question.html=e.domUtils.removeElementFromHtml(e.question.html,".im-controls"),e.loaded=!0}),e.questionHelper.extractQbehaviourRedoButton(e.question),e.question.validationError=e.questionHelper.getValidationErrorFromHtml(e.question.html),e.questionHelper.loadLocalAnswersInHtml(e.question),e.questionHelper.extractQuestionFeedback(e.question),e.questionHelper.extractQuestionComment(e.question)})}}).catch(function(){}):this.loaded=!0},e}())},function(e,n,t){"use strict";function i(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){var t=n.component;e(n,1,0,ee._41(n,1,0,ee._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},ne.b,ne.a)),ee._15(1,770048,null,0,te.a,[ie.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"core-course-module-description",[],null,null,null,le.b,le.a)),ee._15(1,49152,null,0,se.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId)},null)}function c(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"ion-icon",[["item-start",""],["name","radio-button-off"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(1,147456,[[7,4]],0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"radio-button-off")},function(e,n){e(n,0,0,ee._29(n,1)._hidden)})}function d(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"ion-icon",[["color","danger"],["item-start",""],["name","close-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(1,147456,[[7,4]],0,ae.a,[ue.a,ee.p,ee.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"danger","close-circle")},function(e,n){e(n,0,0,ee._29(n,1)._hidden)})}function f(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"ion-icon",[["color","info"],["item-start",""],["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(1,147456,[[7,4]],0,ae.a,[ue.a,ee.p,ee.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"info","information-circle")},function(e,n){e(n,0,0,ee._29(n,1)._hidden)})}function p(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"ion-icon",[["color","success"],["item-start",""],["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(1,147456,[[7,4]],0,ae.a,[ue.a,ee.p,ee.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"success","checkmark-circle")},function(e,n){e(n,0,0,ee._29(n,1)._hidden)})}function h(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ee._16(1,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ee._15(2,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit.details)},null)}function m(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"ion-icon",[["item-end",""],["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(1,147456,[[7,4]],0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"open")},function(e,n){e(n,0,0,ee._29(n,1)._hidden)})}function _(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,27,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.runTask(e.context.$implicit)&&i}return i},we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,5,{contentLabel:0}),ee._37(603979776,6,{_buttons:1}),ee._37(603979776,7,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,0,1,null,c)),ee._15(8,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,0,1,null,d)),ee._15(11,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,0,1,null,f)),ee._15(14,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,0,1,null,p)),ee._15(17,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n\n                "])),(e()(),ee._16(19,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ee._40(20,null,["",""])),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,2,1,null,h)),ee._15(23,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,4,1,null,m)),ee._15(26,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,null==n.context.$implicit.completed);e(n,11,0,""==n.context.$implicit.completed);e(n,14,0,"info"==n.context.$implicit.completed);e(n,17,0,"1"==n.context.$implicit.completed);e(n,23,0,n.context.$implicit.details);e(n,26,0,n.context.$implicit.link&&"submit"!=n.context.$implicit.code)},function(e,n){e(n,20,0,n.context.$implicit.title)})}function g(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,_)),ee._15(3,802816,null,0,De.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.phases[t.workshop.phase].tasks)},null)}function v(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,16,"ion-card",[["class","with-borders"]],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._16(3,0,null,null,9,"a",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.viewPhaseInfo()&&i}return i},we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,2,{contentLabel:0}),ee._37(603979776,3,{_buttons:1}),ee._37(603979776,4,{_icons:1}),ee._15(8,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._16(10,0,null,2,1,"h2",[["stacked",""],["text-wrap",""]],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),(e()(),ee._40(-1,2,["\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,g)),ee._15(15,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,t.phases&&t.phases[t.workshop.phase]&&t.phases[t.workshop.phase].tasks&&t.phases[t.workshop.phase].tasks.length)},function(e,n){var t=n.component;e(n,11,0,t.phases[t.workshop.phase].title)})}function y(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(3,147456,null,0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(4,null,["\n        ","\n    "])),ee._33(5,{$a:0}),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,ee._29(n,3)._hidden);e(n,4,0,ee._41(n,4,0,ee._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function b(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,8,{contentLabel:0}),ee._37(603979776,9,{_buttons:1}),ee._37(603979776,10,{_icons:1}),ee._15(8,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(14,0,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),ee._15(15,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.conclusion,t.component,t.workshop.cmid,"true")},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.conclusion")))})}function P(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,14,{contentLabel:0}),ee._37(603979776,15,{_buttons:1}),ee._37(603979776,16,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(11,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ee._15(12,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"]},null),(e()(),ee._40(-1,2,["\n                "]))],function(e,n){e(n,12,0,n.component.userGrades.submissionlongstrgrade)},function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.submissiongrade")))})}function E(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,17,{contentLabel:0}),ee._37(603979776,18,{_buttons:1}),ee._37(603979776,19,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(11,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ee._15(12,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"]},null),(e()(),ee._40(-1,2,["\n                "]))],function(e,n){e(n,12,0,n.component.userGrades.assessmentlongstrgrade)},function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.gradinggrade")))})}function C(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,11,{contentLabel:0}),ee._37(603979776,12,{_buttons:1}),ee._37(603979776,13,{_icons:1}),ee._15(8,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,P)),ee._15(16,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,E)),ee._15(19,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,16,0,t.userGrades.submissionlongstrgrade);e(n,19,0,t.userGrades.assessmentlongstrgrade)},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.yourgrades")))})}function I(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,b)),ee._15(3,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,C)),ee._15(6,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.workshop.conclusion);e(n,6,0,t.userGrades)},null)}function S(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,20,{contentLabel:0}),ee._37(603979776,21,{_buttons:1}),ee._37(603979776,22,{_icons:1}),ee._15(8,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(14,0,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),ee._15(15,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"]},null),(e()(),ee._40(-1,2,["\n            "])),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.instructauthors,t.component,t.workshop.cmid,"true")},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.areainstructauthors")))})}function w(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,23,{contentLabel:0}),ee._37(603979776,24,{_buttons:1}),ee._37(603979776,25,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ee._40(12,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.yoursubmission")));e(n,12,0,ee._41(n,12,0,ee._29(n,13).transform("addon.mod_workshop.noyoursubmission")))})}function A(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(2,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(3,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,26,{contentLabel:0}),ee._37(603979776,27,{_buttons:1}),ee._37(603979776,28,{_icons:1}),ee._15(7,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(10,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(14,0,null,null,1,"addon-mod-workshop-submission",[],null,null,null,Ue.b,Ue.a)),ee._15(15,114688,null,0,Ne.a,[Re.a,Fe.a,Pe.a,Le.a,de.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.submission,t.module,t.workshop,t.access,t.workshop.course)},function(e,n){e(n,10,0,ee._41(n,10,0,ee._29(n,11).transform("addon.mod_workshop.yoursubmission")))})}function T(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,8,"ion-card",[],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,w)),ee._15(4,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,A)),ee._15(7,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,!t.submission);e(n,7,0,t.submission)},null)}function O(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoSubmit()&&i}return i},He.b,He.a)),ee._15(1,1097728,[[30,4]],0,Ke.a,[[8,""],ue.a,ee.p,ee.K],{block:[0,"block"]},null),(e()(),ee._40(-1,0,["\n                    "])),(e()(),ee._16(3,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(4,147456,null,0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(5,0,["\n                    ","\n                "])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"");e(n,4,0,"add")},function(e,n){e(n,3,0,ee._29(n,4)._hidden);e(n,5,0,ee._41(n,5,0,ee._29(n,6).transform("addon.mod_workshop.createsubmission")))})}function k(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoSubmit()&&i}return i},He.b,He.a)),ee._15(1,1097728,[[30,4]],0,Ke.a,[[8,""],ue.a,ee.p,ee.K],{block:[0,"block"]},null),(e()(),ee._40(-1,0,["\n                    "])),(e()(),ee._16(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(4,147456,null,0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"]},null),(e()(),ee._40(5,0,["\n                    ","\n                "])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"");e(n,4,0,"create")},function(e,n){e(n,3,0,ee._29(n,4)._hidden);e(n,5,0,ee._41(n,5,0,ee._29(n,6).transform("addon.mod_workshop.editsubmission")))})}function D(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,29,{contentLabel:0}),ee._37(603979776,30,{_buttons:1}),ee._37(603979776,31,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,2,1,null,O)),ee._15(8,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,2,1,null,k)),ee._15(11,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,8,0,t.access.creatingsubmissionallowed&&!t.submission);e(n,11,0,t.access.modifyingsubmissionallowed&&t.submission)},null)}function x(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,D)),ee._15(3,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.canSubmit&&(t.access.creatingsubmissionallowed&&!t.submission||t.access.modifyingsubmissionallowed&&t.submission))},null)}function M(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ue.b,Ue.a)),ee._15(3,114688,null,0,Ne.a,[Re.a,Fe.a,Pe.a,Le.a,de.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),ee._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.module,t.workshop,t.access,t.workshop.course,"true")},null)}function U(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,32,{contentLabel:0}),ee._37(603979776,33,{_buttons:1}),ee._37(603979776,34,{_icons:1}),ee._15(8,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,M)),ee._15(16,802816,null,0,De.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){e(n,16,0,n.component.publishedSubmissions)},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.publishedsubmissions")))})}function N(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,U)),ee._15(3,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.publishedSubmissions&&t.publishedSubmissions.length)},null)}function R(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,35,{contentLabel:0}),ee._37(603979776,36,{_buttons:1}),ee._37(603979776,37,{_icons:1}),ee._15(8,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(14,0,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),ee._15(15,540672,null,0,ce.a,[ee.p,de.a,fe.a,pe.a,re.a,he.a,me.a,_e.a,ge.a,ve.a,ye.a,be.a,[2,Pe.a],[2,Ee.a],[2,Ce.a],Ie.a,Se.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.instructreviewers,t.component,t.workshop.cmid,"true")},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.areainstructreviewers")))})}function F(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,41,{contentLabel:0}),ee._37(603979776,42,{_buttons:1}),ee._37(603979776,43,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "]))],null,function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.assignedassessmentsnone")))})}function L(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ue.b,Ue.a)),ee._15(3,114688,null,0,Ne.a,[Re.a,Fe.a,Pe.a,Le.a,de.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],assessment:[5,"assessment"],summary:[6,"summary"]},null),(e()(),ee._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit.submission,t.module,t.workshop,t.access,t.workshop.course,n.context.$implicit,"true")},null)}function H(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(4,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,38,{contentLabel:0}),ee._37(603979776,39,{_buttons:1}),ee._37(603979776,40,{_icons:1}),ee._15(8,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                    "])),(e()(),ee._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(11,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,F)),ee._15(16,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._11(16777216,null,null,1,null,L)),ee._15(19,802816,null,0,De.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,16,0,!t.assessments||!t.assessments.length);e(n,19,0,t.assessments)},function(e,n){e(n,11,0,ee._41(n,11,0,ee._29(n,12).transform("addon.mod_workshop.assignedassessments")))})}function K(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,R)),ee._15(3,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,H)),ee._15(6,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.workshop.phase==t.workshopPhases.PHASE_ASSESSMENT&&t.workshop.instructreviewers);e(n,6,0,t.canAssess)},null)}function W(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,44,{contentLabel:0}),ee._37(603979776,45,{_buttons:1}),ee._37(603979776,46,{_icons:1}),ee._15(5,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.submissionsreport")))})}function q(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(335544320,47,{contentLabel:0}),ee._37(603979776,48,{_buttons:1}),ee._37(603979776,49,{_icons:1}),ee._15(5,16384,null,0,Me.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ee._40(8,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("addon.mod_workshop.gradesreport")))})}function B(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),ee._15(1,16384,[[50,4]],0,We.a,[ue.a,ee.p,ee.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ee._40(2,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"addon-workshop-groupslabel")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("core.groupsseparate")))})}function j(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),ee._15(1,16384,[[50,4]],0,We.a,[ue.a,ee.p,ee.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),ee._40(2,null,["",""])),ee._32(131072,oe.a,[re.a,ee.i])],function(e,n){e(n,1,0,"addon-workshop-groupslabel")},function(e,n){e(n,2,0,ee._41(n,2,0,ee._29(n,3).transform("core.groupsvisible")))})}function G(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ee._15(1,16384,[[53,4]],0,qe.a,[ee.p],{value:[0,"value"]},null),(e()(),ee._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function z(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,we.b,we.a)),ee._15(1,1097728,null,3,Ae.a,[Te.a,ue.a,ee.p,ee.K,[2,Oe.a]],null,null),ee._37(603979776,50,{contentLabel:0}),ee._37(603979776,51,{_buttons:1}),ee._37(603979776,52,{_icons:1}),ee._15(5,16384,null,0,ke.a,[],null,null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,1,1,null,B)),ee._15(8,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._11(16777216,null,1,1,null,j)),ee._15(11,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,2,["\n                "])),(e()(),ee._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-workshop-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ee._29(e,14)._click(t)&&i}if("keyup.space"===n){i=!1!==ee._29(e,14)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.selectedGroup=t)&&i}if("ionChange"===n){i=!1!==o.setGroup(o.selectedGroup)&&i}return i},Be.b,Be.a)),ee._15(14,1228800,null,1,je.a,[Ge.a,Te.a,ue.a,ee.p,ee.K,[2,Ae.a],ze.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),ee._37(603979776,53,{options:1}),ee._35(1024,null,Ve.l,function(e){return[e]},[je.a]),ee._15(17,671744,null,0,Ve.q,[[8,null],[8,null],[8,null],[2,Ve.l]],{model:[0,"model"]},{update:"ngModelChange"}),ee._35(2048,null,Ve.m,null,[Ve.q]),ee._15(19,16384,null,0,Ve.n,[Ve.m],null,null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,null,null,1,null,G)),ee._15(22,802816,null,0,De.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.selectedGroup);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,ee._29(n,14)._disabled,ee._29(n,19).ngClassUntouched,ee._29(n,19).ngClassTouched,ee._29(n,19).ngClassPristine,ee._29(n,19).ngClassDirty,ee._29(n,19).ngClassValid,ee._29(n,19).ngClassInvalid,ee._29(n,19).ngClassPending)})}function V(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,Ue.b,Ue.a)),ee._15(3,114688,null,0,Ne.a,[Re.a,Fe.a,Pe.a,Le.a,de.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.module,t.workshop,t.access,t.workshop.course,"true")},null)}function $(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),ee._15(1,16384,null,0,$e.a,[],null,null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._16(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.gotoSubmissionsPage(o.page-1)&&i}return i},He.b,He.a)),ee._15(4,1097728,null,0,Ke.a,[[8,""],ue.a,ee.p,ee.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),ee._40(-1,0,["\n                            "])),(e()(),ee._16(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(7,147456,null,0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),ee._40(8,0,["\n                            ","\n                        "])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,"","");e(n,7,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,6,0,ee._29(n,7)._hidden);e(n,8,0,ee._41(n,8,0,ee._29(n,9).transform("core.previous")))})}function Q(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),ee._15(1,16384,null,0,$e.a,[],null,null),(e()(),ee._40(-1,null,["\n                        "])),(e()(),ee._16(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.gotoSubmissionsPage(o.page+1)&&i}return i},He.b,He.a)),ee._15(4,1097728,null,0,Ke.a,[[8,""],ue.a,ee.p,ee.K],{block:[0,"block"]},null),(e()(),ee._40(5,0,["\n                            ","\n                            "])),ee._32(131072,oe.a,[re.a,ee.i]),(e()(),ee._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ee._15(8,147456,null,0,ae.a,[ue.a,ee.p,ee.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),ee._40(-1,0,["\n                        "])),(e()(),ee._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,"");e(n,8,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,5,0,ee._41(n,5,0,ee._29(n,6).transform("core.next")));e(n,7,0,ee._29(n,8)._hidden)})}function Y(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),ee._15(1,16384,null,0,Qe.a,[],null,null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._16(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),ee._15(4,16384,null,0,Ye.a,[],null,null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,null,null,1,null,$)),ee._15(7,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                    "])),(e()(),ee._11(16777216,null,null,1,null,Q)),ee._15(10,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n                "])),(e()(),ee._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,7,0,t.page>0);e(n,10,0,t.hasNextPage)},null)}function X(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),ee._15(1,16384,null,0,xe.a,[ue.a,ee.p,ee.K],null,null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,W)),ee._15(4,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n           "])),(e()(),ee._11(16777216,null,null,1,null,q)),ee._15(7,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n            "])),(e()(),ee._11(16777216,null,null,1,null,z)),ee._15(10,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,V)),ee._15(13,802816,null,0,De.j,[ee.W,ee.T,ee.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ee._40(-1,null,["\n\n            "])),(e()(),ee._11(16777216,null,null,1,null,Y)),ee._15(16,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION);e(n,7,0,t.workshop.phase>t.workshopPhases.PHASE_SUBMISSION);e(n,10,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,13,0,t.grades);e(n,16,0,t.page>0||t.hasNextPage)},null)}function J(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,I)),ee._15(4,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,S)),ee._15(8,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._11(16777216,null,null,1,null,T)),ee._15(11,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,x)),ee._15(15,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._11(16777216,null,null,1,null,N)),ee._15(18,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,K)),ee._15(22,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n\n        "])),(e()(),ee._40(-1,null,["\n        "])),(e()(),ee._11(16777216,null,null,1,null,X)),ee._15(26,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.workshop.phase>=t.workshopPhases.PHASE_CLOSED);e(n,8,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION&&t.workshop.instructauthors);e(n,11,0,t.canSubmit);e(n,15,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION);e(n,18,0,t.workshop.phase>=t.workshopPhases.PHASE_CLOSED);e(n,22,0,t.workshop.phase>=t.workshopPhases.PHASE_ASSESSMENT);e(n,26,0,t.access.canviewallsubmissions&&t.workshop.phase>=t.workshopPhases.PHASE_SUBMISSION&&(t.grades&&t.grades.length||t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups)))},null)}function Z(e){return ee._42(0,[(e()(),ee._40(-1,null,["\n"])),(e()(),ee._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Xe.b,Xe.a)),ee._15(2,245760,null,1,Je.a,[ee.p,ge.a,fe.a],null,null),ee._37(603979776,1,{buttons:1}),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._16(5,0,null,0,20,"core-context-menu",[],null,null,null,Ze.b,Ze.a)),ee._15(6,245760,null,0,ie.a,[re.a,en.a,ee.p,fe.a,[2,nn.a]],null,null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,i)),ee._15(9,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,o)),ee._15(12,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,r)),ee._15(15,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,l)),ee._15(18,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,s)),ee._15(21,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n        "])),(e()(),ee._11(16777216,null,0,1,null,a)),ee._15(24,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._40(-1,0,["\n"])),(e()(),ee._40(-1,null,["\n\n"])),(e()(),ee._40(-1,null,["\n"])),(e()(),ee._16(29,0,null,null,15,"core-loading",[["class","core-loading-center"]],null,null,null,tn.b,tn.a)),ee._15(30,638976,null,0,on.a,[re.a,ee.p,Se.a,me.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._11(16777216,null,0,1,null,u)),ee._15(33,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._11(16777216,null,0,1,null,v)),ee._15(36,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._40(-1,0,["\n    "])),(e()(),ee._11(16777216,null,0,1,null,y)),ee._15(40,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n\n    "])),(e()(),ee._11(16777216,null,0,1,null,J)),ee._15(43,16384,null,0,De.k,[ee.W,ee.T],{ngIf:[0,"ngIf"]},null),(e()(),ee._40(-1,0,["\n"])),(e()(),ee._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,18,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description);e(n,36,0,t.phases);e(n,40,0,t.hasOffline);e(n,43,0,t.access&&t.workshop&&t.workshop.phase>=t.workshopPhases.PHASE_SUBMISSION)},null)}t.d(n,"b",function(){return cn}),n.c=Z,t.d(n,"a",function(){return dn});var ee=t(1),ne=t(81),te=t(74),ie=t(70),oe=t(27),re=t(19),le=t(103),se=t(91),ae=t(47),ue=t(7),ce=t(42),de=t(2),fe=t(5),pe=t(11),he=t(15),me=t(3),_e=t(26),ge=t(6),ve=t(17),ye=t(10),be=t(18),Pe=t(22),Ee=t(24),Ce=t(35),Ie=t(38),Se=t(13),we=t(31),Ae=t(21),Te=t(20),Oe=t(28),ke=t(33),De=t(8),xe=t(87),Me=t(108),Ue=t(1433),Ne=t(483),Re=t(163),Fe=t(173),Le=t(45),He=t(46),Ke=t(43),We=t(62),qe=t(92),Be=t(111),je=t(93),Ge=t(34),ze=t(52),Ve=t(23),$e=t(113),Qe=t(142),Ye=t(114),Xe=t(89),Je=t(82),Ze=t(80),en=t(63),nn=t(69),tn=t(49),on=t(48),rn=t(477),ln=t(150),sn=t(68),an=t(204),un=t(290),cn=ee._14({encapsulation:2,styles:[],data:{}}),dn=ee._12("addon-mod-workshop-index",rn.a,function(e){return ee._42(0,[(e()(),ee._16(0,0,null,null,1,"addon-mod-workshop-index",[],null,null,null,Z,cn)),ee._15(1,245760,null,0,rn.a,[ee.u,ln.a,[2,Ee.a],Re.a,sn.a,Pe.a,an.a,me.a,he.a,Fe.a,un.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return h._42(0,[(e()(),h._16(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,m.b,m.a)),h._15(1,49152,null,0,_.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._32(131072,g.a,[v.a,h.i]),(e()(),h._40(-1,0,["\n        "]))],function(e,n){e(n,1,0,h._41(n,1,0,h._29(n,2).transform("core.grades.nogradesreturned")),"stats")},null)}function o(e){return h._42(0,[(e()(),h._16(0,0,null,null,2,"th",[["text-start",""]],[[8,"id",0],[2,"hidden-phone",null],[1,"colspan",0]],null,null,null,null)),(e()(),h._40(1,null,["\n                            ","\n                        "])),h._32(131072,g.a,[v.a,h.i])],null,function(e,n){e(n,0,0,h._19(1,"",n.context.$implicit.name,""),n.context.$implicit.hiddenPhone,n.context.$implicit.colspan);e(n,1,0,h._41(n,1,0,h._29(n,2).transform("core.grades."+n.context.$implicit.name)))})}function r(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"td",[["class","core-grades-table-category"]],[[1,"rowspan",0]],null,null,null,null)),(e()(),h._40(-1,null,["\n                            "]))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.rowspan)})}function l(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,y.b,y.a)),h._15(1,245760,null,0,b.a,[h.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,h._19(1,"",n.parent.parent.context.$implicit.icon,""))},null)}function s(e){return h._42(0,[(e()(),h._16(0,0,null,null,0,"img",[["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.image)})}function a(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"td",[["text-start",""]],[[8,"className",0],[8,"innerHTML",1],[2,"hidden-phone",null]],null,null,null,null)),(e()(),h._40(-1,null,["\n                                "]))],null,function(e,n){e(n,0,0,"core-grades-table-"+n.parent.context.$implicit.name,n.parent.parent.parent.context.$implicit[n.parent.context.$implicit.name],n.parent.context.$implicit.hiddenPhone)})}function u(e){return h._42(0,[(e()(),h._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),h._40(-1,null,["\n                                "])),(e()(),h._11(16777216,null,null,1,null,a)),h._15(3,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                            "]))],function(e,n){e(n,3,0,"gradeitem"!=n.context.$implicit.name&&void 0!=n.parent.parent.context.$implicit[n.context.$implicit.name])},null)}function c(e){return h._42(0,[(e()(),h._16(0,0,null,null,18,null,null,null,null,null,null,null)),(e()(),h._40(-1,null,["\n                            "])),(e()(),h._11(16777216,null,null,1,null,r)),h._15(3,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                            "])),(e()(),h._16(5,0,null,null,9,"th",[["class","core-grades-table-gradeitem"],["text-start",""]],[[2,"column-itemname",null],[1,"colspan",0],[2,"core-split-item-selected",null]],null,null,null,null)),(e()(),h._40(-1,null,["\n                                "])),(e()(),h._11(16777216,null,null,1,null,l)),h._15(8,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                                "])),(e()(),h._11(16777216,null,null,1,null,s)),h._15(11,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                                "])),(e()(),h._16(13,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),h._40(-1,null,["\n                            "])),(e()(),h._40(-1,null,["\n                            "])),(e()(),h._11(16777216,null,null,1,null,u)),h._15(17,802816,null,0,P.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(e()(),h._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,3,0,"category"==n.parent.context.$implicit.itemtype);e(n,8,0,n.parent.context.$implicit.icon);e(n,11,0,n.parent.context.$implicit.image);e(n,17,0,t.gradesTable.columns)},function(e,n){e(n,5,0,"category"==n.parent.context.$implicit.itemtype,n.parent.context.$implicit.colspan,n.component.gradeId==n.parent.context.$implicit.id);e(n,13,0,n.parent.context.$implicit.gradeitem)})}function d(e){return h._42(0,[(e()(),h._16(0,0,null,null,4,"tr",[],[[8,"className",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==("category"!=e.context.$implicit.itemtype&&e.component.gotoGrade(e.context.$implicit.id))&&i}return i},null,null)),(e()(),h._40(-1,null,["\n                        "])),(e()(),h._11(16777216,null,null,1,null,c)),h._15(3,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.itemtype)},function(e,n){e(n,0,0,n.context.$implicit.rowclass)})}function f(e){return h._42(0,[(e()(),h._16(0,0,null,null,19,"div",[["class","core-grades-container safe-area-page"]],null,null,null,null,null)),(e()(),h._40(-1,null,["\n            "])),(e()(),h._16(2,0,null,null,16,"table",[["cellpadding","0"],["cellspacing","0"],["class","core-grades-table"]],null,null,null,null,null)),(e()(),h._40(-1,null,["\n                "])),(e()(),h._16(4,0,null,null,7,"thead",[],null,null,null,null,null)),(e()(),h._40(-1,null,["\n                    "])),(e()(),h._16(6,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),h._40(-1,null,["\n                        "])),(e()(),h._11(16777216,null,null,1,null,o)),h._15(9,802816,null,0,P.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(e()(),h._40(-1,null,["\n                    "])),(e()(),h._40(-1,null,["\n                "])),(e()(),h._40(-1,null,["\n                "])),(e()(),h._16(13,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),h._40(-1,null,["\n                    "])),(e()(),h._11(16777216,null,null,1,null,d)),h._15(16,802816,null,0,P.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(e()(),h._40(-1,null,["\n                "])),(e()(),h._40(-1,null,["\n            "])),(e()(),h._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,t.gradesTable.columns);e(n,16,0,t.gradesTable.rows)},null)}function p(e){return h._42(0,[h._37(402653184,1,{content:0}),(e()(),h._16(1,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,E.b,E.a)),h._15(2,4374528,[[1,4]],0,C.a,[I.a,S.a,w.a,h.p,h.K,A.a,T.a,h.D,[2,O.a],[2,k.a]],null,null),(e()(),h._40(-1,1,["\n    "])),(e()(),h._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshGrades(t)&&i}return i},null,null)),h._15(5,212992,null,0,D.a,[S.a,C.a,h.D,x.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),h._40(-1,null,["\n        "])),(e()(),h._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,M.b,M.a)),h._15(8,114688,null,0,U.a,[D.a,I.a],{pullingText:[0,"pullingText"]},null),h._32(131072,g.a,[v.a,h.i]),(e()(),h._40(-1,null,["\n    "])),(e()(),h._40(-1,1,["\n    "])),(e()(),h._16(12,0,null,1,8,"core-loading",[],null,null,null,N.b,N.a)),h._15(13,638976,null,0,R.a,[v.a,h.p,F.a,L.a],{hideUntil:[0,"hideUntil"]},null),(e()(),h._40(-1,0,["\n        "])),(e()(),h._11(16777216,null,0,1,null,i)),h._15(16,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,0,["\n\n        "])),(e()(),h._11(16777216,null,0,1,null,f)),h._15(19,16384,null,0,P.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(e()(),h._40(-1,0,["\n    "])),(e()(),h._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.gradesLoaded);e(n,8,0,h._19(1,"",h._41(n,8,0,h._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.gradesLoaded);e(n,16,0,!t.gradesTable);e(n,19,0,t.gradesTable)},function(e,n){e(n,1,0,h._29(n,2).statusbarPadding,h._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==h._29(n,5).state,h._29(n,5)._top);e(n,7,0,h._29(n,8).r.state)})}t.d(n,"b",function(){return z}),n.c=p,t.d(n,"a",function(){return V});var h=t(1),m=t(120),_=t(109),g=t(27),v=t(19),y=t(131),b=t(121),P=t(8),E=t(185),C=t(24),I=t(7),S=t(15),w=t(32),A=t(34),T=t(107),O=t(37),k=t(22),D=t(145),x=t(39),M=t(201),U=t(159),N=t(49),R=t(48),F=t(13),L=t(3),H=t(459),K=t(152),W=t(5),q=t(61),B=t(161),j=t(10),G=t(35),z=h._14({encapsulation:2,styles:[],data:{}}),V=h._12("core-grades-course",H.a,function(e){return h._42(0,[(e()(),h._16(0,0,null,null,1,"core-grades-course",[],null,null,null,p,z)),h._15(1,114688,null,0,H.a,[K.a,W.a,q.a,B.a,[2,k.a],j.a,[2,G.a]],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId",gradeId:"gradeId"},{},[])},function(e,n,t){"use strict";function i(e){return a._42(0,[(e()(),a._16(0,0,null,null,3,"core-empty-box",[["icon","person"]],null,null,null,u.b,u.a)),a._15(1,49152,null,0,c.a,[],{message:[0,"message"],icon:[1,"icon"]},null),a._32(131072,d.a,[f.a,a.i]),(e()(),a._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.user.noparticipants")),"person")},null)}function o(e){return a._42(0,[(e()(),a._16(0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),a._16(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),a._40(2,null,["",": "])),a._32(131072,d.a,[f.a,a.i]),(e()(),a._40(4,null,["",""])),a._34(5,1)],null,function(e,n){e(n,2,0,a._41(n,2,0,a._29(n,3).transform("core.lastaccess")));e(n,4,0,a._41(n,4,0,e(n,5,0,a._29(n.parent.parent.parent,0),n.parent.context.$implicit.lastaccess)))})}function r(e){return a._42(0,[(e()(),a._16(0,0,null,null,17,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoParticipant(e.context.$implicit.id)&&i}return i},p.b,p.a)),a._15(1,1097728,null,3,h.a,[m.a,_.a,a.p,a.K,[2,g.a]],null,null),a._37(335544320,3,{contentLabel:0}),a._37(603979776,4,{_buttons:1}),a._37(603979776,5,{_icons:1}),a._15(5,16384,null,0,v.a,[],null,null),(e()(),a._40(-1,2,["\n                    "])),(e()(),a._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,y.b,y.a)),a._15(8,16384,null,0,b.a,[],null,null),a._15(9,770048,null,0,P.a,[E.a,C.a,I.a,S.a,w.a],{user:[0,"user"],userId:[1,"userId"],checkOnline:[2,"checkOnline"]},null),(e()(),a._40(-1,2,["\n                    "])),(e()(),a._16(11,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),a._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),a._15(13,540672,null,0,A.a,[a.p,C.a,T.a,O.a,f.a,k.a,I.a,D.a,x.a,M.a,S.a,U.a,[2,E.a],[2,N.a],[2,R.a],F.a,w.a],{text:[0,"text"]},null),(e()(),a._40(-1,2,["\n                    "])),(e()(),a._11(16777216,null,2,1,null,o)),a._15(16,16384,null,0,L.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,2,["\n                "]))],function(e,n){e(n,9,0,n.context.$implicit,n.context.$implicit.id,!0);e(n,13,0,n.context.$implicit.fullname);e(n,16,0,n.context.$implicit.lastaccess)},function(e,n){e(n,0,0,n.context.$implicit.fullname,n.context.$implicit.id==n.component.participantId)})}function l(e){return a._42(0,[(e()(),a._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),a._15(1,16384,null,0,H.a,[_.a,a.p,a.K,k.a,K.l,W.a],null,null),(e()(),a._40(-1,null,["\n                "])),(e()(),a._11(16777216,null,null,1,null,r)),a._15(4,802816,null,0,L.j,[a.W,a.T,a.v],{ngForOf:[0,"ngForOf"]},null),(e()(),a._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.participants)},null)}function s(e){return a._42(0,[a._32(0,q.a,[x.a,f.a]),a._37(402653184,1,{content:0}),a._37(402653184,2,{splitviewCtrl:0}),(e()(),a._16(3,0,null,null,27,"core-split-view",[],null,null,null,B.b,B.a)),a._15(4,245760,[[2,4]],0,R.a,[[2,E.a],a.p,j.a,k.a,f.a],null,null),(e()(),a._40(-1,0,["\n    "])),(e()(),a._16(6,0,null,0,23,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,G.b,G.a)),a._15(7,4374528,[[1,4]],0,N.a,[_.a,k.a,W.a,a.p,a.K,z.a,V.a,a.D,[2,$.a],[2,E.a]],null,null),(e()(),a._40(-1,1,["\n        "])),(e()(),a._16(9,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshParticipants(t)&&i}return i},null,null)),a._15(10,212992,null,0,Q.a,[k.a,N.a,a.D,K.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),a._40(-1,null,["\n            "])),(e()(),a._16(12,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Y.b,Y.a)),a._15(13,114688,null,0,X.a,[Q.a,_.a],{pullingText:[0,"pullingText"]},null),a._32(131072,d.a,[f.a,a.i]),(e()(),a._40(-1,null,["\n        "])),(e()(),a._40(-1,1,["\n        "])),(e()(),a._16(17,0,null,1,11,"core-loading",[],null,null,null,J.b,J.a)),a._15(18,638976,null,0,Z.a,[f.a,a.p,w.a,I.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._40(-1,0,["\n            "])),(e()(),a._11(16777216,null,0,1,null,i)),a._15(21,16384,null,0,L.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n\n            "])),(e()(),a._11(16777216,null,0,1,null,l)),a._15(24,16384,null,0,L.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n            "])),(e()(),a._16(26,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.loadMoreData(t)&&i}return i},ee.b,ee.a)),a._15(27,49152,null,0,ne.a,[],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),a._40(-1,0,["\n        "])),(e()(),a._40(-1,1,["\n    "])),(e()(),a._40(-1,0,["\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,10,0,t.participantsLoaded);e(n,13,0,a._19(1,"",a._41(n,13,0,a._29(n,14).transform("core.pulltorefresh")),""));e(n,18,0,t.participantsLoaded);e(n,21,0,t.participants&&0==t.participants.length);e(n,24,0,t.participants&&t.participants.length>0);e(n,27,0,t.canLoadMore,t.loadMoreError)},function(e,n){e(n,6,0,a._29(n,7).statusbarPadding,a._29(n,7)._hasRefresher);e(n,9,0,"inactive"!==a._29(n,10).state,a._29(n,10)._top);e(n,12,0,a._29(n,13).r.state)})}t.d(n,"b",function(){return oe}),n.c=s,t.d(n,"a",function(){return re});var a=t(1),u=t(120),c=t(109),d=t(27),f=t(19),p=t(31),h=t(21),m=t(20),_=t(7),g=t(28),v=t(33),y=t(222),b=t(186),P=t(187),E=t(22),C=t(2),I=t(3),S=t(10),w=t(13),A=t(42),T=t(5),O=t(11),k=t(15),D=t(26),x=t(6),M=t(17),U=t(18),N=t(24),R=t(35),F=t(38),L=t(8),H=t(78),K=t(39),W=t(32),q=t(519),B=t(437),j=t(67),G=t(185),z=t(34),V=t(107),$=t(37),Q=t(145),Y=t(201),X=t(159),J=t(49),Z=t(48),ee=t(440),ne=t(276),te=t(482),ie=t(45),oe=a._14({encapsulation:2,styles:[],data:{}}),re=a._12("core-user-participants",te.a,function(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"core-user-participants",[],null,null,null,s,oe)),a._15(1,114688,null,0,te.a,[ie.a,T.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(40),o=function(){function e(e,n){this.textUtils=n,this.logger=e.getInstance("CoreSecondsToHMSPipe")}return e.prototype.transform=function(e){var n,t;if(!e||e<0)e=0;else if("string"==typeof e){var o=parseInt(e,10);if(isNaN(o))return this.logger.error("Invalid value received",e),e;e=o}return e=Math.floor(e),n=Math.floor(e/i.a.SECONDS_HOUR),e-=n*i.a.SECONDS_HOUR,t=Math.floor(e/i.a.SECONDS_MINUTE),e-=t*i.a.SECONDS_MINUTE,this.textUtils.twoDigits(n)+":"+this.textUtils.twoDigits(t)+":"+this.textUtils.twoDigits(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(9),t(4);var i=t(13),o=t(16),r=(t(41),t(176),t(53),t(110),t(361)),l=(t(454),t(149),function(){function e(e,n,t,o,l,s,a,u,c,d,f,p,h,m,_,g){var v=this;this.courseProvider=n,this.domUtils=t,this.courseFormatDelegate=o,this.courseOptionsDelegate=l,this.translate=s,this.courseHelper=a,this.textUtils=c,this.coursesProvider=d,this.navCtrl=p,this.injector=h,this.prefetchDelegate=m,this.syncProvider=_,this.utils=g,this.downloadEnabledIcon="square-outline",this.prefetchCourseData={prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.isDestroyed=!1,this.course=e.get("course"),this.sectionId=e.get("sectionId"),this.sectionNumber=e.get("sectionNumber"),this.module=e.get("module"),this.firstTabName=e.get("selectedTab"),this.title=o.getCourseTitle(this.course),this.displayEnableDownload=o.displayEnableDownload(this.course),this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),o.shouldRefreshWhenCompletionChanges(this.course).then(function(e){e&&(v.completionObserver=u.on(i.a.COMPLETION_MODULE_VIEWED,function(e){e&&e.courseId==v.course.id&&v.refreshAfterCompletionChange(!0)}),v.syncObserver=u.on(r.a.AUTO_SYNCED,function(e){e&&e.courseId==v.course.id&&(v.refreshAfterCompletionChange(!1),e.warnings&&e.warnings[0]&&v.domUtils.showErrorModal(e.warnings[0]))}))}),this.downloadCourseEnabled&&(this.courseStatusObserver=u.on(i.a.COURSE_STATUS_CHANGED,function(e){e.courseId==v.course.id&&v.updateCourseStatus(e.status)},f.getCurrentSiteId()))}return e.prototype.ionViewDidLoad=function(){var e=this;this.module&&(this.moduleId=this.module.id,this.courseHelper.openModule(this.navCtrl,this.module,this.course.id,this.sectionId)),this.loadData(!1,!0).finally(function(){e.dataLoaded=!0,e.downloadCourseEnabled&&e.determineCoursePrefetchIcon().then(function(){if("spinner"==e.prefetchCourseData.prefetchCourseIcon){var n=e.courseHelper.getCourseDownloadPromise(e.course.id);n?n.catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id).then(function(n){e.updateCourseStatus(n)})}})})},e.prototype.loadData=function(e,n){var t=this;return this.coursesProvider.getUserCourse(this.course.id).catch(function(){}).then(function(e){if(e&&(t.course.id===e.id&&t.course.hasOwnProperty("displayname")&&!e.hasOwnProperty("displayname")&&(e.displayname=t.course.displayname),t.course=e),n)return t.syncProvider.syncCourse(t.course.id).then(function(e){e.warnings&&e.warnings.length&&t.domUtils.showErrorModal(e.warnings[0])}).catch(function(){})}).then(function(){var n=[];return n.push(t.courseProvider.getSections(t.course.id,!1,!0).then(function(n){if(e){var i=t.courseProvider.getSectionsModules(n);return t.prefetchDelegate.invalidateModules(i,t.course.id).then(function(){return n})}return n}).then(function(e){var n;if(t.courseProvider.logView(t.course.id,t.sectionNumber).catch(function(){}),!1===t.course.enablecompletion)n=Promise.resolve({});else{var i=e.find(function(e){return e.modules.length>0});n=i&&void 0!==i.modules[0].completion?t.courseHelper.loadOfflineCompletion(t.course.id,e).catch(function(){}).then(function(){return{}}):t.courseProvider.getActivitiesCompletionStatus(t.course.id).catch(function(){return{}})}return n.then(function(n){t.courseHelper.addHandlerDataForModules(e,t.course.id,n,t.course.fullname),t.sections=e.map(function(e){return t.textUtils.formatText(e.name.trim(),!0,!0).then(function(n){e.formattedName=n}),e.hasContent=t.courseHelper.sectionHasContent(e),e}),t.courseFormatDelegate.canViewAllSections(t.course)&&t.sections.unshift({name:t.translate.instant("core.course.allsections"),id:o.a.ALL_SECTIONS_ID,hasContent:!0}),t.title=t.courseFormatDelegate.getCourseTitle(t.course,t.sections),t.displayRefresher=t.courseFormatDelegate.displayRefresher(t.course,t.sections)})})),t.course.overviewfiles&&(t.course.imageThumb=t.course.overviewfiles[0]&&t.course.overviewfiles[0].fileurl),n.push(t.courseOptionsDelegate.getHandlersToDisplay(t.injector,t.course,e,!1).then(function(e){var n;e.forEach(function(e,i){e.data.componentData=e.data.componentData||{},e.data.componentData.courseId=t.course.id,t.firstTabName&&e.name==t.firstTabName&&(n=i+1)}),t.courseHandlers=e,t.firstTabName=void 0,n&&setTimeout(function(){t.tabsComponent.selectTab(n)})})),t.course.enablecompletion&&t.coursesProvider.isGetCoursesByFieldAvailable()&&n.push(t.coursesProvider.getCoursesByField("id",t.course.id).catch(function(){}).then(function(e){e&&e[0]&&Object.assign(t.course,e[0]),t.course.courseformatoptions&&(t.course.courseformatoptions=t.utils.objectToKeyValueMap(t.course.courseformatoptions,"name","value"))})),Promise.all(n).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)})})},e.prototype.doRefresh=function(e){var n=this;return this.invalidateData().finally(function(){return n.loadData(!0,!0).finally(function(){return(n.displayRefresher?n.formatComponent.doRefresh(e):Promise.resolve()).finally(function(){e&&e.complete()})})})},e.prototype.onCompletionChange=function(){var e=this;this.invalidateData().finally(function(){e.refreshAfterCompletionChange(!0)})},e.prototype.invalidateData=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.course.id)),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseFormatDelegate.invalidateData(this.course,this.sections)),this.sections&&e.push(this.prefetchDelegate.invalidateCourseUpdates(this.course.id)),Promise.all(e)},e.prototype.refreshAfterCompletionChange=function(e){var n=this,t=this.content.getScrollElement(),i=t.scrollTop||0,o=t.scrollLeft||0;this.dataLoaded=!1,this.domUtils.scrollToTop(this.content),this.loadData(!0,e).then(function(){return n.formatComponent.doRefresh(void 0,void 0,!0)}).finally(function(){n.dataLoaded=!0,setTimeout(function(){n.content.scrollTo(o,i,0)})})},e.prototype.determineCoursePrefetchIcon=function(){var e=this;return this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(n){e.prefetchCourseData.prefetchCourseIcon=n.icon,e.prefetchCourseData.title=n.title})},e.prototype.prefetchCourse=function(){var e=this;this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course,this.sections,this.courseHandlers).then(function(){e.downloadEnabled&&e.courseHelper.calculateSectionsStatus(e.sections,e.course.id).catch(function(){})}).catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)})},e.prototype.toggleDownload=function(){this.downloadEnabled=!this.downloadEnabled,this.downloadEnabledIcon=this.downloadEnabled?"checkbox-outline":"square-outline"},e.prototype.updateCourseStatus=function(e){var n=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=n.icon,this.prefetchCourseData.title=n.title},e.prototype.openCourseSummary=function(){this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:this.course,avoidOpenCourse:!0})},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.completionObserver&&this.completionObserver.off()},e.prototype.ionViewDidEnter=function(){this.formatComponent&&this.formatComponent.ionViewDidEnter(),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},e.prototype.ionViewDidLeave=function(){this.formatComponent&&this.formatComponent.ionViewDidLeave(),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},e}())},function(e,n,t){"use strict";function i(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("addon.mod_forum.refreshdiscussions")),t.refreshIcon,!1,700)},null)}function l(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return C._42(0,[(e()(),C._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),C._15(1,16384,null,0,O.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                "])),(e()(),C._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(4,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(5,null,[" ","\n            "])),C._33(6,{$a:0}),C._32(131072,A.a,[T.a,C.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,C._29(n,4)._hidden);e(n,5,0,C._41(n,5,0,C._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function c(e){return C._42(0,[(e()(),C._16(0,0,null,null,8,"p",[],null,null,null,null,null)),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(2,0,null,null,5,"ion-note",[["float-end",""],["padding-left",""]],null,null,null,null,null)),C._15(3,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._16(4,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(5,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(6,null,[" ",""])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(8,null,["\n                            ","\n                        "]))],function(e,n){e(n,5,0,"time")},function(e,n){e(n,4,0,C._29(n,5)._hidden);e(n,6,0,C._41(n,6,0,C._29(n,7).transform("core.notsent")));e(n,8,0,n.parent.context.$implicit.userfullname)})}function d(e){return C._42(0,[(e()(),C._16(0,0,null,null,5,"ion-note",[["text-end",""]],null,null,null,null,null)),C._15(1,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(3,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(4,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(5,null,[" ","\n                        "]))],function(e,n){e(n,4,0,"people")},function(e,n){e(n,3,0,C._29(n,4)._hidden);e(n,5,0,n.parent.context.$implicit.groupname)})}function f(e){return C._42(0,[(e()(),C._16(0,0,null,null,32,"ion-card",[],[[2,"addon-forum-discussion-selected",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openNewDiscussion(e.context.$implicit.timecreated)&&i}return i},null,null)),C._15(1,16384,null,0,O.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(3,0,null,null,17,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,M.b,M.a)),C._15(4,1097728,null,3,U.a,[N.a,k.a,C.p,C.K,[2,R.a]],null,null),C._37(335544320,3,{contentLabel:0}),C._37(603979776,4,{_buttons:1}),C._37(603979776,5,{_icons:1}),C._15(8,16384,null,0,F.a,[],null,null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,L.b,L.a)),C._15(11,16384,null,0,H.a,[],null,null),C._15(12,770048,null,0,K.a,[W.a,q.a,B.a,j.a,G.a],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._16(14,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),C._16(15,0,null,null,1,"core-format-text",[],null,null,null,null,null)),C._15(16,540672,null,0,z.a,[C.p,q.a,V.a,$.a,T.a,Q.a,B.a,Y.a,X.a,J.a,j.a,Z.a,[2,W.a],[2,ee.a],[2,ne.a],te.a,G.a],{text:[0,"text"]},null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._11(16777216,null,2,1,null,c)),C._15(19,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,2,["\n                    "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(22,0,null,null,9,"ion-card-content",[],null,null,null,null,null)),C._15(23,16384,null,0,oe.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._11(16777216,null,null,1,null,d)),C._15(26,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(28,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),C._16(29,0,null,null,1,"core-format-text",[],null,null,null,null,null)),C._15(30,540672,null,0,z.a,[C.p,q.a,V.a,$.a,T.a,Q.a,B.a,Y.a,X.a,J.a,j.a,Z.a,[2,W.a],[2,ee.a],[2,ne.a],te.a,G.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"]},null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,n.context.$implicit,t.courseId);e(n,16,0,n.context.$implicit.subject);e(n,19,0,n.context.$implicit.userfullname);e(n,26,0,n.context.$implicit.groupname);e(n,30,0,n.context.$implicit.message,t.component,t.componentId,60)},function(e,n){e(n,0,0,n.context.$implicit.timecreated==0-n.component.selectedDiscussion)})}function p(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"core-icon",[["name","fa-map-pin"]],null,null,null,re.b,re.a)),C._15(1,245760,null,0,le.a,[C.p],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"fa-map-pin")},null)}function h(e){return C._42(0,[(e()(),C._16(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),C._16(1,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,re.b,re.a)),C._15(2,245760,null,0,le.a,[C.p],{name:[0,"name"],color:[1,"color"]},null),(e()(),C._40(3,null,[" ",""])),C._33(4,{$a:0}),C._32(131072,A.a,[T.a,C.i])],function(e,n){e(n,2,0,"fa-circle","primary")},function(e,n){e(n,3,0,C._41(n,3,0,C._29(n,5).transform("addon.mod_forum.unreadpostsnumber",e(n,4,0,n.parent.context.$implicit.numunread))))})}function m(e){return C._42(0,[(e()(),C._16(0,0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),C._15(1,16384,null,0,se.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(3,0,null,null,5,"ion-note",[],null,null,null,null,null)),C._15(4,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                                "])),(e()(),C._16(6,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(7,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(8,null,[" ","\n                            "])),(e()(),C._40(-1,null,["\n                        "]))],function(e,n){e(n,7,0,"people")},function(e,n){e(n,6,0,C._29(n,7)._hidden);e(n,8,0,n.parent.context.$implicit.groupname)})}function _(e){return C._42(0,[(e()(),C._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),C._15(1,16384,null,0,se.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(3,0,null,null,6,"ion-note",[],null,null,null,null,null)),C._15(4,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                                "])),(e()(),C._16(6,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(7,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(8,null,[" ","\n                            "])),C._34(9,1),(e()(),C._40(-1,null,["\n                        "]))],function(e,n){e(n,7,0,"time")},function(e,n){e(n,6,0,C._29(n,7)._hidden);e(n,8,0,C._41(n,8,0,e(n,9,0,C._29(n.parent.parent.parent,1),n.parent.context.$implicit.timemodified)))})}function g(e){return C._42(0,[(e()(),C._16(0,0,null,null,62,"ion-card",[],[[2,"addon-forum-discussion-selected",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openDiscussion(e.context.$implicit)&&i}return i},null,null)),C._15(1,16384,null,0,O.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(3,0,null,null,28,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,M.b,M.a)),C._15(4,1097728,null,3,U.a,[N.a,k.a,C.p,C.K,[2,R.a]],null,null),C._37(335544320,6,{contentLabel:0}),C._37(603979776,7,{_buttons:1}),C._37(603979776,8,{_icons:1}),C._15(8,16384,null,0,F.a,[],null,null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,L.b,L.a)),C._15(11,16384,null,0,H.a,[],null,null),C._15(12,770048,null,0,K.a,[W.a,q.a,B.a,j.a,G.a],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._16(14,0,null,2,5,"h2",[],null,null,null,null,null)),(e()(),C._11(16777216,null,null,1,null,p)),C._15(16,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,[" "])),(e()(),C._16(18,0,null,null,1,"core-format-text",[],null,null,null,null,null)),C._15(19,540672,null,0,z.a,[C.p,q.a,V.a,$.a,T.a,Q.a,B.a,Y.a,X.a,J.a,j.a,Z.a,[2,W.a],[2,ee.a],[2,ne.a],te.a,G.a],{text:[0,"text"]},null),(e()(),C._40(-1,2,["\n                        "])),(e()(),C._16(21,0,null,2,9,"p",[],null,null,null,null,null)),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(23,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),C._15(24,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._40(25,null,["\n                                ","\n                                "])),C._34(26,1),(e()(),C._11(16777216,null,null,1,null,h)),C._15(28,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._40(30,null,["\n                            ","\n                        "])),(e()(),C._40(-1,2,["\n                    "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(33,0,null,null,5,"ion-card-content",[],null,null,null,null,null)),C._15(34,16384,null,0,oe.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(36,0,null,null,1,"core-format-text",[],null,null,null,null,null)),C._15(37,540672,null,0,z.a,[C.p,q.a,V.a,$.a,T.a,Q.a,B.a,Y.a,X.a,J.a,j.a,Z.a,[2,W.a],[2,ee.a],[2,ne.a],te.a,G.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"]},null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(40,0,null,null,21,"ion-row",[["class","row"],["text-center",""]],null,null,null,null,null)),C._15(41,16384,null,0,ae.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._11(16777216,null,null,1,null,m)),C._15(44,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(46,0,null,null,11,"ion-col",[["class","col"]],null,null,null,null,null)),C._15(47,16384,null,0,se.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(49,0,null,null,7,"ion-note",[],null,null,null,null,null)),C._15(50,16384,null,0,x.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n                                "])),(e()(),C._16(52,0,null,null,1,"ion-icon",[["name","chatboxes"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(53,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(54,null,[" ","\n                            "])),C._33(55,{numreplies:0}),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._11(16777216,null,null,1,null,_)),C._15(60,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,n.context.$implicit,t.courseId);e(n,16,0,n.context.$implicit.pinned);e(n,19,0,n.context.$implicit.subject);e(n,28,0,n.context.$implicit.numunread);e(n,37,0,n.context.$implicit.message,t.component,t.componentId,60);e(n,44,0,n.context.$implicit.groupname);e(n,53,0,"chatboxes");e(n,60,0,n.context.$implicit.timemodified>n.context.$implicit.created)},function(e,n){e(n,0,0,n.context.$implicit.discussion==n.component.selectedDiscussion);e(n,25,0,C._41(n,25,0,e(n,26,0,C._29(n.parent.parent,0),n.context.$implicit.created)));e(n,30,0,n.context.$implicit.userfullname);e(n,52,0,C._29(n,53)._hidden);e(n,54,0,C._41(n,54,0,C._29(n,56).transform("addon.mod_forum.numreplies",e(n,55,0,n.context.$implicit.numreplies))))})}function v(e){return C._42(0,[(e()(),C._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),C._40(-1,null,["\n                "])),(e()(),C._11(16777216,null,null,1,null,f)),C._15(3,802816,null,0,ie.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n                "])),(e()(),C._11(16777216,null,null,1,null,g)),C._15(6,802816,null,0,ie.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.offlineDiscussions);e(n,6,0,t.discussions)},null)}function y(e){return C._42(0,[(e()(),C._16(0,0,null,null,6,"div",[["padding",""]],null,null,null,null,null)),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(2,0,null,null,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openNewDiscussion()&&i}return i},ue.b,ue.a)),C._15(3,1097728,null,0,ce.a,[[8,""],k.a,C.p,C.K],{block:[0,"block"]},null),(e()(),C._40(4,0,["\n                        ","\n                    "])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,"")},function(e,n){e(n,4,0,C._41(n,4,0,C._29(n,5).transform("addon.mod_forum.addanewdiscussion")))})}function b(e){return C._42(0,[(e()(),C._16(0,0,null,null,6,"core-empty-box",[["class","core-empty-box-clickable"],["icon","chatbubbles"]],null,null,null,de.b,de.a)),C._15(1,49152,null,0,fe.a,[],{message:[0,"message"],icon:[1,"icon"]},null),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,0,["\n                "])),(e()(),C._11(16777216,null,0,1,null,y)),C._15(5,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("addon.mod_forum.forumnodiscussionsyet")),"chatbubbles");e(n,5,0,t.forum.cancreatediscussions)},null)}function P(e){return C._42(0,[(e()(),C._16(0,0,null,null,12,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,pe.b,pe.a)),C._15(1,1228800,null,2,he.a,[Q.a],null,null),C._37(335544320,9,{_mainButton:0}),C._37(603979776,10,{_fabLists:1}),C._15(4,212992,null,0,me.a,[C.p,ee.a],null,null),(e()(),C._40(-1,0,["\n            "])),(e()(),C._16(6,0,null,0,5,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openNewDiscussion()&&i}return i},_e.b,_e.a)),C._15(7,49152,[[9,4]],0,ge.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,0,["\n                "])),(e()(),C._16(9,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(10,147456,null,0,D.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(-1,0,["\n            "])),(e()(),C._40(-1,0,["\n        "]))],function(e,n){e(n,4,0);e(n,10,0,"add")},function(e,n){e(n,6,0,n.component.addDiscussionText);e(n,9,0,C._29(n,10)._hidden)})}function E(e){return C._42(0,[C._32(0,ve.a,[X.a,T.a,ye.a]),C._32(0,be.a,[X.a,T.a]),C._37(402653184,1,{splitviewCtrl:0}),(e()(),C._40(-1,null,["\n"])),(e()(),C._16(4,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Pe.b,Pe.a)),C._15(5,245760,null,1,Ee.a,[C.p,X.a,V.a],null,null),C._37(603979776,2,{buttons:1}),(e()(),C._40(-1,0,["\n    "])),(e()(),C._16(8,0,null,0,20,"core-context-menu",[],null,null,null,Ce.b,Ce.a)),C._15(9,245760,null,0,w.a,[T.a,Ie.a,C.p,V.a,[2,Se.a]],null,null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,i)),C._15(12,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,o)),C._15(15,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,r)),C._15(18,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,l)),C._15(21,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,s)),C._15(24,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,a)),C._15(27,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n    "])),(e()(),C._40(-1,0,["\n"])),(e()(),C._40(-1,null,["\n\n"])),(e()(),C._40(-1,null,["\n"])),(e()(),C._16(32,0,null,null,37,"core-split-view",[],null,null,null,we.b,we.a)),C._15(33,245760,[[1,4]],0,ne.a,[[2,W.a],C.p,Ae.a,Q.a,T.a],null,null),(e()(),C._40(-1,0,["\n    "])),(e()(),C._16(35,0,null,0,33,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Te.b,Te.a)),C._15(36,4374528,null,0,ee.a,[k.a,Q.a,Oe.a,C.p,C.K,ke.a,De.a,C.D,[2,xe.a],[2,W.a]],null,null),(e()(),C._40(-1,1,["\n        "])),(e()(),C._16(38,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.doRefresh(t)&&i}return i},null,null)),C._15(39,212992,null,0,Me.a,[Q.a,ee.a,C.D,Ue.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),C._40(-1,null,["\n            "])),(e()(),C._16(41,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ne.b,Ne.a)),C._15(42,114688,null,0,Re.a,[Me.a,k.a],{pullingText:[0,"pullingText"]},null),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n        "])),(e()(),C._40(-1,1,["\n        "])),(e()(),C._16(46,0,null,1,18,"core-loading",[["class","core-loading-center"]],null,null,null,Fe.b,Fe.a)),C._15(47,638976,null,0,Le.a,[T.a,C.p,G.a,B.a],{hideUntil:[0,"hideUntil"]},null),(e()(),C._40(-1,0,["\n            "])),(e()(),C._16(49,0,null,0,1,"core-course-module-description",[],null,null,null,He.b,He.a)),C._15(50,49152,null,0,Ke.a,[],{description:[0,"description"],note:[1,"note"],component:[2,"component"],componentId:[3,"componentId"]},null),(e()(),C._40(-1,0,["\n\n            "])),(e()(),C._40(-1,0,["\n            "])),(e()(),C._11(16777216,null,0,1,null,u)),C._15(54,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n            "])),(e()(),C._11(16777216,null,0,1,null,v)),C._15(57,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n            "])),(e()(),C._11(16777216,null,0,1,null,b)),C._15(60,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n            "])),(e()(),C._16(62,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.fetchMoreDiscussions(t)&&i}return i},We.b,We.a)),C._15(63,49152,null,0,qe.a,[],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),C._40(-1,0,["\n        "])),(e()(),C._40(-1,1,["\n\n        "])),(e()(),C._11(16777216,null,0,1,null,P)),C._15(67,16384,null,0,ie.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,1,["\n    "])),(e()(),C._40(-1,0,["\n"])),(e()(),C._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0),e(n,9,0);e(n,12,0,t.externalUrl);e(n,15,0,t.description);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size),e(n,33,0);e(n,39,0,t.loaded);e(n,42,0,C._19(1,"",C._41(n,42,0,C._29(n,43).transform("core.pulltorefresh")),""));e(n,47,0,t.loaded);e(n,50,0,t.description,t.descriptionNote,t.component,t.componentId);e(n,54,0,t.hasOffline);e(n,57,0,t.forum&&t.discussions.length>0);e(n,60,0,t.forum&&0==t.discussions.length);e(n,63,0,t.canLoadMore,t.loadMoreError);e(n,67,0,t.forum&&t.forum.cancreatediscussions)},function(e,n){e(n,35,0,C._29(n,36).statusbarPadding,C._29(n,36)._hasRefresher);e(n,38,0,"inactive"!==C._29(n,39).state,C._29(n,39)._top);e(n,41,0,C._29(n,42).r.state)})}t.d(n,"b",function(){return Je}),n.c=E,t.d(n,"a",function(){return Ze});var C=t(1),I=t(81),S=t(74),w=t(70),A=t(27),T=t(19),O=t(87),k=t(7),D=t(47),x=t(225),M=t(31),U=t(21),N=t(20),R=t(28),F=t(33),L=t(222),H=t(186),K=t(187),W=t(22),q=t(2),B=t(3),j=t(10),G=t(13),z=t(42),V=t(5),$=t(11),Q=t(15),Y=t(26),X=t(6),J=t(17),Z=t(18),ee=t(24),ne=t(35),te=t(38),ie=t(8),oe=t(450),re=t(131),le=t(121),se=t(113),ae=t(114),ue=t(46),ce=t(43),de=t(120),fe=t(109),pe=t(355),he=t(232),me=t(291),_e=t(356),ge=t(196),ve=t(341),ye=t(25),be=t(519),Pe=t(89),Ee=t(82),Ce=t(80),Ie=t(63),Se=t(69),we=t(437),Ae=t(67),Te=t(185),Oe=t(32),ke=t(34),De=t(107),xe=t(37),Me=t(145),Ue=t(39),Ne=t(201),Re=t(159),Fe=t(49),Le=t(48),He=t(103),Ke=t(91),We=t(440),qe=t(276),Be=t(464),je=t(68),Ge=t(45),ze=t(166),Ve=t(252),$e=t(207),Qe=t(253),Ye=t(53),Xe=t(365),Je=C._14({encapsulation:2,styles:[],data:{}}),Ze=C._12("addon-mod-forum-index",Be.a,function(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"addon-mod-forum-index",[],null,null,null,E,Je)),C._15(1,245760,null,0,Be.a,[C.u,[2,ee.a],W.a,je.a,Ge.a,ze.a,Ve.a,$e.a,Qe.a,Ye.a,Xe.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,[[null,"onContentLoaded"],[null,"onLoadingContent"]],function(e,n,t){var i=!0,o=e.component;if("onContentLoaded"===n){i=!1!==o.contentLoaded(t)&&i}if("onLoadingContent"===n){i=!1!==o.contentLoading(t)&&i}return i},l.b,l.a)),r._15(1,376832,[[1,4]],0,s.a,[a.a,u.a,[2,c.a],r.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"]},{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"})],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult,t.jsData)},null)}function o(e){return r._42(0,[r._37(671088640,1,{content:0}),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(2,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,d.b,d.a)),r._15(3,245760,null,1,f.a,[r.p,p.a,a.a],null,null),r._37(603979776,2,{buttons:1}),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(6,0,null,0,20,"core-context-menu",[],null,null,null,h.b,h.a)),r._15(7,245760,null,0,m.a,[_.a,g.a,r.p,a.a,[2,v.a]],null,null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(9,0,null,0,2,"core-context-menu-item",[],null,null,null,y.b,y.a)),r._15(10,770048,null,0,b.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"],hidden:[4,"hidden"]},null),r._32(131072,P.a,[_.a,r.i]),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(13,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},y.b,y.a)),r._15(14,770048,null,0,b.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),r._32(131072,P.a,[_.a,r.i]),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},y.b,y.a)),r._15(18,770048,null,0,b.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),r._32(131072,P.a,[_.a,r.i]),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(21,0,null,0,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},y.b,y.a)),r._15(22,770048,null,0,b.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(24,0,null,0,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},y.b,y.a)),r._15(25,770048,null,0,b.a,[m.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(30,16384,null,0,E.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0),e(n,7,0);e(n,10,0,r._41(n,10,0,r._29(n,11).transform("core.openinbrowser")),"open",t.externalUrl,900,!t.displayOpenInBrowser||!t.externalUrl||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayOpenInBrowser);e(n,14,0,r._41(n,14,0,r._29(n,15).transform("core.moduleintro")),"arrow-forward",800,!t.displayDescription||!t.description||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayDescription);e(n,18,0,r._41(n,18,0,r._29(n,19).transform("core.refresh")),t.refreshIcon,!1,700,!t.displayRefresh||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayRefresh);e(n,22,0,t.prefetchText,t.prefetchStatusIcon,!1,600,!t.displayPrefetch||!t.prefetchStatusIcon||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayPrefetch);e(n,25,0,t.size,"cube","trash",500,!t.displaySize||!t.size||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displaySize);e(n,30,0,t.component&&t.method)},null)}t.d(n,"b",function(){return T}),n.c=o,t.d(n,"a",function(){return O});var r=t(1),l=t(484),s=t(155),a=t(5),u=t(57),c=t(22),d=t(89),f=t(82),p=t(6),h=t(80),m=t(70),_=t(19),g=t(63),v=t(69),y=t(81),b=t(74),P=t(27),E=t(8),C=t(357),I=t(41),S=t(53),w=t(11),A=t(3),T=r._14({encapsulation:2,styles:[],data:{}}),O=r._12("core-site-plugins-module-index",C.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-module-index",[],null,null,null,o,T)),r._15(1,245760,null,0,C.a,[u.a,I.a,S.a,w.a,_.a,A.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.timeUtils=n,this.logger=e.getInstance("CoreBytesToSizePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.timeUtils.formatTime(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=function(){function e(e){this.cdr=e,this.startTime=0,this.time=0,this.onEnd=new i.r}return e.prototype.ngOnInit=function(){this.time=this.startTime||0},e.prototype.ngOnChanges=function(e){e&&e.running&&(e.running.currentValue?this.start():this.stop()),e&&e.reset&&e.reset.currentValue&&this.resetChrono()},e.prototype.resetChrono=function(){this.stop(),this.time=this.startTime||0},e.prototype.start=function(){var e=this;if(!this.interval){var n=Date.now();this.interval=setInterval(function(){e.time+=Date.now()-n,n=Date.now(),void 0!==e.endTime&&e.time>e.endTime&&(e.stop(),e.onEnd.emit()),e.cdr.detectChanges()},200)}},e.prototype.stop=function(){clearInterval(this.interval),delete this.interval},e.prototype.ngOnDestroy=function(){this.stop()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var i=t(1),o=(t(4),function(){function e(e,n,t){this.translate=e,this.sitesProvider=n,this.textUtils=t,this.siteSelected=new i.r}return e.prototype.ngOnInit=function(){var e=this;this.selectedSite=this.initialSite||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSites().then(function(n){var t=[];return n.forEach(function(n){t.push(e.textUtils.formatText(n.siteName,!0,!0).catch(function(){return n.siteName}).then(function(t){n.fullNameAndSiteName=e.translate.instant("core.fullnameandsitename",{fullname:n.fullName,sitename:t})}))}),!e.selectedSite&&n.length&&(e.selectedSite=n[0].id,e.siteSelected.emit(e.selectedSite)),Promise.all(t).then(function(){e.sites=n})})},e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var i=t(0),o=t(1),r=t(9),l=(t(673),function(e){function n(n,t,i,o,r,l,s,a,u,c,d,f,p,h){return e.call(this,n,t,i,o,r,l,s,a,u,c,d,f,p,h)||this}return Object(i.__extends)(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.parent.add(this,!0)},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.parent.remove(this)},n=Object(i.__decorate)([Object(i.__param)(11,Object(o.E)())],n)}(r.i))},function(e,n,t){"use strict";function i(e){return b._42(0,[(e()(),b._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(1,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,2,{contentLabel:0}),b._37(603979776,3,{_buttons:1}),b._37(603979776,4,{_icons:1}),b._15(5,16384,null,0,w.a,[],null,null),(e()(),b._40(6,2,["\n                ","\n            "])),b._32(131072,A.a,[T.a,b.i])],null,function(e,n){e(n,6,0,b._41(n,6,0,b._29(n,7).transform("addon.competency.coursecompetencyratingsarepushedtouserplans")))})}function o(e){return b._42(0,[(e()(),b._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(1,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,5,{contentLabel:0}),b._37(603979776,6,{_buttons:1}),b._37(603979776,7,{_icons:1}),b._15(5,16384,null,0,w.a,[],null,null),(e()(),b._40(6,2,["\n                ","\n            "])),b._32(131072,A.a,[T.a,b.i])],null,function(e,n){e(n,6,0,b._41(n,6,0,b._29(n,7).transform("addon.competency.coursecompetencyratingsarenotpushedtouserplans")))})}function r(e){return b._42(0,[(e()(),b._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                    "])),(e()(),b._16(2,0,null,null,1,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openCompetencySummary(e.context.$implicit.id)&&i}return i},null,null)),(e()(),b._40(3,null,["\n                        "," - ","\n                    "])),(e()(),b._40(-1,null,["\n                "]))],null,function(e,n){e(n,3,0,n.context.$implicit.shortname,n.context.$implicit.idnumber)})}function l(e){return b._42(0,[(e()(),b._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(1,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,11,{contentLabel:0}),b._37(603979776,12,{_buttons:1}),b._37(603979776,13,{_icons:1}),b._15(5,16384,null,0,w.a,[],null,null),(e()(),b._40(-1,2,["\n                "])),(e()(),b._16(7,0,null,2,2,"strong",[],null,null,null,null,null)),(e()(),b._40(8,null,["",""])),b._32(131072,A.a,[T.a,b.i]),(e()(),b._40(-1,2,[":\n                "])),(e()(),b._11(16777216,null,2,1,null,r)),b._15(12,802816,null,0,O.j,[b.W,b.T,b.v],{ngForOf:[0,"ngForOf"]},null),(e()(),b._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.competencies.statistics.leastproficient)},function(e,n){e(n,8,0,b._41(n,8,0,b._29(n,9).transform("addon.competency.competenciesmostoftennotproficientincourse")))})}function s(e){return b._42(0,[(e()(),b._16(0,0,null,null,29,"ion-card",[],null,null,null,null,null)),b._15(1,16384,null,0,k.a,[I.a,b.p,b.K],null,null),(e()(),b._40(-1,null,["\n            "])),(e()(),b._11(16777216,null,null,1,null,i)),b._15(4,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n            "])),(e()(),b._11(16777216,null,null,1,null,o)),b._15(7,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n            "])),(e()(),b._16(9,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(10,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,8,{contentLabel:0}),b._37(603979776,9,{_buttons:1}),b._37(603979776,10,{_icons:1}),b._15(14,16384,null,0,w.a,[],null,null),(e()(),b._40(-1,2,["\n                "])),(e()(),b._16(16,0,null,2,2,"strong",[],null,null,null,null,null)),(e()(),b._40(17,null,["",""])),b._32(131072,A.a,[T.a,b.i]),(e()(),b._40(19,2,[":\n                "," (","%)\n                "])),b._33(20,{x:0,y:1}),b._33(21,{$a:0}),b._32(131072,A.a,[T.a,b.i]),(e()(),b._16(23,0,null,2,1,"core-progress-bar",[],null,null,null,D.b,D.a)),b._15(24,573440,null,0,x.a,[M.c],{progress:[0,"progress"]},null),(e()(),b._40(-1,2,["\n            "])),(e()(),b._40(-1,null,["\n            "])),(e()(),b._11(16777216,null,null,1,null,l)),b._15(28,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.competencies.settings.pushratingstouserplans);e(n,7,0,!t.competencies.settings.pushratingstouserplans);e(n,24,0,t.competencies.statistics.proficientcompetencypercentage);e(n,28,0,t.competencies.statistics.leastproficientcount>0)},function(e,n){var t=n.component;e(n,17,0,b._41(n,17,0,b._29(n,18).transform("addon.competency.progress")));e(n,19,0,b._41(n,19,0,b._29(n,22).transform("addon.competency.xcompetenciesproficientoutofyincourse",e(n,21,0,e(n,20,0,t.competencies.statistics.proficientcompetencycount,t.competencies.statistics.competencycount)))),t.competencies.statistics.proficientcompetencypercentageformatted)})}function a(e){return b._42(0,[(e()(),b._16(0,0,null,null,2,"h3",[["margin-horizontal",""]],null,null,null,null,null)),(e()(),b._40(1,null,["",""])),b._32(131072,A.a,[T.a,b.i])],null,function(e,n){e(n,1,0,b._41(n,1,0,b._29(n,2).transform("addon.competency.competencies")))})}function u(e){return b._42(0,[(e()(),b._16(0,0,null,null,18,"ion-card",[],null,null,null,null,null)),b._15(1,16384,null,0,k.a,[I.a,b.p,b.K],null,null),(e()(),b._40(-1,null,["\n             "])),(e()(),b._16(3,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(4,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,14,{contentLabel:0}),b._37(603979776,15,{_buttons:1}),b._37(603979776,16,{_icons:1}),b._15(8,16384,null,0,w.a,[],null,null),(e()(),b._40(-1,2,["\n                "])),(e()(),b._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,U.b,U.a)),b._15(11,16384,null,0,N.a,[],null,null),b._15(12,770048,null,0,R.a,[F.a,L.a,H.a,K.a,W.a],{user:[0,"user"]},null),(e()(),b._40(-1,2,["\n                "])),(e()(),b._16(14,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),b._16(15,0,null,null,1,"core-format-text",[],null,null,null,null,null)),b._15(16,540672,null,0,q.a,[b.p,L.a,B.a,j.a,T.a,G.a,H.a,z.a,V.a,$.a,K.a,Q.a,[2,F.a],[2,Y.a],[2,X.a],J.a,W.a],{text:[0,"text"]},null),(e()(),b._40(-1,2,["\n            "])),(e()(),b._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,12,0,t.user);e(n,16,0,t.user.fullname)},null)}function c(e){return b._42(0,[(e()(),b._16(0,0,null,null,2,"core-empty-box",[["icon","ribbon"]],null,null,null,Z.b,Z.a)),b._15(1,49152,null,0,ee.a,[],{message:[0,"message"],icon:[1,"icon"]},null),b._32(131072,A.a,[T.a,b.i])],function(e,n){e(n,1,0,b._19(1,"",b._41(n,1,0,b._29(n,2).transform("addon.competency.nocompetencies")),""),"ribbon")},null)}function d(e){return b._42(0,[(e()(),b._16(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),b._15(1,16384,null,0,ne.a,[I.a,b.p,b.K],{color:[0,"color"]},null),(e()(),b._40(2,null,["",""]))],function(e,n){e(n,1,0,n.parent.context.$implicit.usercompetencycourse.proficiency?"success":"danger")},function(e,n){e(n,2,0,n.parent.context.$implicit.usercompetencycourse.gradename)})}function f(e){return b._42(0,[(e()(),b._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                        "])),(e()(),b._16(2,0,null,null,1,"core-format-text",[],null,null,null,null,null)),b._15(3,540672,null,0,q.a,[b.p,L.a,B.a,j.a,T.a,G.a,H.a,z.a,V.a,$.a,K.a,Q.a,[2,F.a],[2,Y.a],[2,X.a],J.a,W.a],{text:[0,"text"]},null),(e()(),b._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.competency.description)},null)}function p(e){return b._42(0,[(e()(),b._16(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                            /"])),(e()(),b._16(2,0,null,null,1,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openCompetencySummary(e.context.$implicit.id)&&i}return i},null,null)),(e()(),b._40(3,null,["",""])),(e()(),b._40(-1,null,["\n                        "]))],null,function(e,n){e(n,3,0,n.context.$implicit.name)})}function h(e){return b._42(0,[(e()(),b._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),b._40(1,null,["\n                            ","\n                        "])),b._32(131072,A.a,[T.a,b.i])],null,function(e,n){e(n,1,0,b._41(n,1,0,b._29(n,2).transform("addon.competency.noactivities")))})}function m(e){return b._42(0,[(e()(),b._16(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),b._15(1,4210688,null,0,te.a,[b.p,V.a,$.a,G.a,L.a,B.a,z.a,K.a,H.a],null,null)],null,function(e,n){e(n,0,0,n.parent.context.$implicit.iconurl)})}function _(e){return b._42(0,[(e()(),b._16(0,0,null,null,13,"a",[["capture","true"],["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[8,"title",0]],null,null,P.b,P.a)),b._15(1,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,23,{contentLabel:0}),b._37(603979776,24,{_buttons:1}),b._37(603979776,25,{_icons:1}),b._15(5,16384,null,0,w.a,[],null,null),b._15(6,81920,null,0,ie.a,[b.p,B.a,H.a,L.a,z.a,Q.a,[2,F.a],[2,Y.a],[2,X.a]],{capture:[0,"capture"]},null),(e()(),b._40(-1,2,["\n                            "])),(e()(),b._11(16777216,null,0,1,null,m)),b._15(9,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,2,["\n                            "])),(e()(),b._16(11,0,null,2,1,"core-format-text",[],null,null,null,null,null)),b._15(12,540672,null,0,q.a,[b.p,L.a,B.a,j.a,T.a,G.a,H.a,z.a,V.a,$.a,K.a,Q.a,[2,F.a],[2,Y.a],[2,X.a],J.a,W.a],{text:[0,"text"]},null),(e()(),b._40(-1,2,["\n                        "]))],function(e,n){e(n,6,0,"true");e(n,9,0,n.context.$implicit.iconurl);e(n,12,0,n.context.$implicit.name)},function(e,n){e(n,0,0,n.context.$implicit.url,n.context.$implicit.name)})}function g(e){return b._42(0,[(e()(),b._16(0,0,null,null,50,"ion-card",[],null,null,null,null,null)),b._15(1,16384,null,0,k.a,[I.a,b.p,b.K],null,null),(e()(),b._40(-1,null,["\n                "])),(e()(),b._16(3,0,null,null,12,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openCompetency(e.context.$implicit.competency.id)&&i}return i},P.b,P.a)),b._15(4,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,17,{contentLabel:0}),b._37(603979776,18,{_buttons:1}),b._37(603979776,19,{_icons:1}),b._15(8,16384,null,0,w.a,[],null,null),(e()(),b._40(9,2,["\n                    "," "])),(e()(),b._16(10,0,null,2,1,"small",[],null,null,null,null,null)),(e()(),b._40(11,null,["",""])),(e()(),b._40(-1,2,["\n                    "])),(e()(),b._11(16777216,null,4,1,null,d)),b._15(14,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,2,["\n                "])),(e()(),b._40(-1,null,["\n                "])),(e()(),b._16(17,0,null,null,32,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),b._15(18,1097728,null,3,E.a,[C.a,I.a,b.p,b.K,[2,S.a]],null,null),b._37(335544320,20,{contentLabel:0}),b._37(603979776,21,{_buttons:1}),b._37(603979776,22,{_icons:1}),b._15(22,16384,null,0,w.a,[],null,null),(e()(),b._40(-1,2,["\n                    "])),(e()(),b._11(16777216,null,2,1,null,f)),b._15(25,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,2,["\n                    "])),(e()(),b._16(27,0,null,2,8,"div",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                        "])),(e()(),b._16(29,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),b._40(30,null,["",""])),b._32(131072,A.a,[T.a,b.i]),(e()(),b._40(32,null,["\n                        ","\n                        "])),(e()(),b._11(16777216,null,null,1,null,p)),b._15(34,802816,null,0,O.j,[b.W,b.T,b.v],{ngForOf:[0,"ngForOf"]},null),(e()(),b._40(-1,null,["\n                    "])),(e()(),b._40(-1,2,["\n                    "])),(e()(),b._16(37,0,null,2,11,"div",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n                        "])),(e()(),b._16(39,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),b._40(40,null,["",""])),b._32(131072,A.a,[T.a,b.i]),(e()(),b._40(-1,null,[":\n                        "])),(e()(),b._11(16777216,null,null,1,null,h)),b._15(44,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,null,["\n                        "])),(e()(),b._11(16777216,null,null,1,null,_)),b._15(47,802816,null,0,O.j,[b.W,b.T,b.v],{ngForOf:[0,"ngForOf"]},null),(e()(),b._40(-1,null,["\n                    "])),(e()(),b._40(-1,2,["\n                "])),(e()(),b._40(-1,null,["\n            "]))],function(e,n){e(n,14,0,n.context.$implicit.usercompetencycourse&&n.context.$implicit.usercompetencycourse.gradename);e(n,25,0,n.context.$implicit.competency.description);e(n,34,0,n.context.$implicit.comppath.ancestors);e(n,44,0,0==n.context.$implicit.coursemodules.length);e(n,47,0,n.context.$implicit.coursemodules)},function(e,n){e(n,3,0,n.context.$implicit.competency.shortname);e(n,9,0,n.context.$implicit.competency.shortname);e(n,11,0,n.context.$implicit.competency.idnumber);e(n,30,0,b._41(n,30,0,b._29(n,31).transform("addon.competency.path")));e(n,32,0,n.context.$implicit.comppath.framework.name);e(n,40,0,b._41(n,40,0,b._29(n,41).transform("addon.competency.activities")))})}function v(e){return b._42(0,[(e()(),b._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),b._40(-1,null,["\n            "])),(e()(),b._11(16777216,null,null,1,null,g)),b._15(3,802816,null,0,O.j,[b.W,b.T,b.v],{ngForOf:[0,"ngForOf"]},null),(e()(),b._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.competencies.competencies)},null)}function y(e){return b._42(0,[b._37(402653184,1,{content:0}),(e()(),b._16(1,0,null,null,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,oe.b,oe.a)),b._15(2,4374528,[[1,4]],0,Y.a,[I.a,G.a,re.a,b.p,b.K,le.a,se.a,b.D,[2,ae.a],[2,F.a]],null,null),(e()(),b._40(-1,1,["\n    "])),(e()(),b._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshCourseCompetencies(t)&&i}return i},null,null)),b._15(5,212992,null,0,ue.a,[G.a,Y.a,b.D,ce.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),b._40(-1,null,["\n        "])),(e()(),b._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,de.b,de.a)),b._15(8,114688,null,0,fe.a,[ue.a,I.a],{pullingText:[0,"pullingText"]},null),b._32(131072,A.a,[T.a,b.i]),(e()(),b._40(-1,null,["\n    "])),(e()(),b._40(-1,1,["\n    "])),(e()(),b._16(12,0,null,1,17,"core-loading",[],null,null,null,pe.b,pe.a)),b._15(13,638976,null,0,he.a,[T.a,b.p,W.a,H.a],{hideUntil:[0,"hideUntil"]},null),(e()(),b._40(-1,0,["\n        "])),(e()(),b._11(16777216,null,0,1,null,s)),b._15(16,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,0,["\n\n        "])),(e()(),b._11(16777216,null,0,1,null,a)),b._15(19,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,0,["\n        "])),(e()(),b._11(16777216,null,0,1,null,u)),b._15(22,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,0,["\n        "])),(e()(),b._11(16777216,null,0,1,null,c)),b._15(25,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,0,["\n\n        "])),(e()(),b._11(16777216,null,0,1,null,v)),b._15(28,16384,null,0,O.k,[b.W,b.T],{ngIf:[0,"ngIf"]},null),(e()(),b._40(-1,0,["\n    "])),(e()(),b._40(-1,1,["\n"])),(e()(),b._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.competenciesLoaded);e(n,8,0,b._19(1,"",b._41(n,8,0,b._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.competenciesLoaded);e(n,16,0,!t.user&&t.competencies&&t.competencies.statistics.competencycount>0);e(n,19,0,t.competencies&&t.competencies.statistics.competencycount>0);e(n,22,0,t.user);e(n,25,0,t.competencies&&0==t.competencies.statistics.competencycount);e(n,28,0,t.competencies)},function(e,n){e(n,1,0,b._29(n,2).statusbarPadding,b._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==b._29(n,5).state,b._29(n,5)._top);e(n,7,0,b._29(n,8).r.state)})}t.d(n,"b",function(){return ve}),n.c=y,t.d(n,"a",function(){return ye});var b=t(1),P=t(31),E=t(21),C=t(20),I=t(7),S=t(28),w=t(33),A=t(27),T=t(19),O=t(8),k=t(87),D=t(448),x=t(282),M=t(75),U=t(222),N=t(186),R=t(187),F=t(22),L=t(2),H=t(3),K=t(10),W=t(13),q=t(42),B=t(5),j=t(11),G=t(15),z=t(26),V=t(6),$=t(17),Q=t(18),Y=t(24),X=t(35),J=t(38),Z=t(120),ee=t(109),ne=t(146),te=t(226),ie=t(189),oe=t(185),re=t(32),le=t(34),se=t(107),ae=t(37),ue=t(145),ce=t(39),de=t(201),fe=t(159),pe=t(49),he=t(48),me=t(480),_e=t(205),ge=t(338),ve=b._14({encapsulation:2,styles:[],data:{}}),ye=b._12("addon-competency-course",me.a,function(e){return b._42(0,[(e()(),b._16(0,0,null,null,1,"addon-competency-course",[],null,null,null,y,ve)),b._15(1,114688,null,0,me.a,[F.a,K.a,B.a,_e.a,ge.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,n,t){"use strict";function i(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),p._40(1,null,["",""])),p._32(131072,h.a,[m.a,p.i])],null,function(e,n){e(n,1,0,p._41(n,1,0,p._29(n,2).transform("addon.coursecompletion.criteriarequiredall")))})}function o(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),p._40(1,null,["",""])),p._32(131072,h.a,[m.a,p.i])],null,function(e,n){e(n,1,0,p._41(n,1,0,p._29(n,2).transform("addon.coursecompletion.criteriarequiredany")))})}function r(e){return p._42(0,[(e()(),p._16(0,0,null,null,36,"ion-card",[],null,null,null,null,null)),p._15(1,16384,null,0,_.a,[g.a,p.p,p.K],null,null),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(3,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),p._15(4,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,1,{contentLabel:0}),p._37(603979776,2,{_buttons:1}),p._37(603979776,3,{_icons:1}),p._15(8,16384,null,0,E.a,[],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),p._40(11,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(14,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),p._40(15,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,2,["\n            "])),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(19,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),p._15(20,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,4,{contentLabel:0}),p._37(603979776,5,{_buttons:1}),p._37(603979776,6,{_icons:1}),p._15(24,16384,null,0,E.a,[],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(26,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),p._40(27,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,2,["\n                "])),(e()(),p._11(16777216,null,2,1,null,i)),p._15(31,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._11(16777216,null,2,1,null,o)),p._15(34,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,31,0,1===t.completion.aggregation);e(n,34,0,2===t.completion.aggregation)},function(e,n){var t=n.component;e(n,11,0,p._41(n,11,0,p._29(n,12).transform("addon.coursecompletion.status")));e(n,15,0,p._41(n,15,0,p._29(n,16).transform(t.completion.statusText)));e(n,27,0,p._41(n,27,0,p._29(n,28).transform("addon.coursecompletion.required")))})}function l(e){return p._42(0,[(e()(),p._16(0,0,null,null,17,"ion-item",[["class","hidden-tablet item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),p._15(1,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,10,{contentLabel:0}),p._37(603979776,11,{_buttons:1}),p._37(603979776,12,{_icons:1}),p._15(5,16384,null,0,E.a,[],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),p._16(8,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(9,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),p._16(12,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(13,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(15,0,null,4,1,"strong",[["item-end",""]],null,null,null,null,null)),(e()(),p._40(16,null,["",""])),(e()(),p._40(-1,2,["\n            "]))],function(e,n){e(n,9,0,n.context.$implicit.details.criteria,"true");e(n,13,0,n.context.$implicit.details.requirement,"true")},function(e,n){e(n,16,0,n.context.$implicit.status)})}function s(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(1,16384,null,0,K.a,[],null,null),(e()(),p._40(2,null,["",""])),p._34(3,2)],null,function(e,n){e(n,2,0,p._41(n,2,0,e(n,3,0,p._29(n.parent.parent.parent,0),1e3*n.parent.context.$implicit.timecompleted,"strftimedatetimeshort")))})}function a(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(1,16384,null,0,K.a,[],null,null)],null,null)}function u(e){return p._42(0,[(e()(),p._16(0,0,null,null,32,"ion-row",[["class","row"]],null,null,null,null,null)),p._15(1,16384,null,0,W.a,[],null,null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(3,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(4,16384,null,0,K.a,[],null,null),(e()(),p._16(5,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(6,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(8,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(9,16384,null,0,K.a,[],null,null),(e()(),p._16(10,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(11,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(13,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(14,16384,null,0,K.a,[],null,null),(e()(),p._16(15,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(16,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(18,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(19,16384,null,0,K.a,[],null,null),(e()(),p._16(20,0,null,null,1,"core-format-text",[],null,null,null,null,null)),p._15(21,540672,null,0,I.a,[p.p,S.a,w.a,A.a,m.a,T.a,O.a,k.a,D.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],L.a,H.a],{text:[0,"text"]},null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(23,0,null,null,2,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(24,16384,null,0,K.a,[],null,null),(e()(),p._40(25,null,["",""])),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._11(16777216,null,null,1,null,s)),p._15(28,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._11(16777216,null,null,1,null,a)),p._15(31,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n                "]))],function(e,n){e(n,6,0,n.context.$implicit.title,"true");e(n,11,0,n.context.$implicit.details.criteria,"true");e(n,16,0,n.context.$implicit.details.requirement,"true");e(n,21,0,n.context.$implicit.details.status);e(n,28,0,n.context.$implicit.timecompleted);e(n,31,0,!n.context.$implicit.timecompleted)},function(e,n){e(n,25,0,n.context.$implicit.status)})}function c(e){return p._42(0,[(e()(),p._16(0,0,null,null,65,"ion-card",[],null,null,null,null,null)),p._15(1,16384,null,0,_.a,[g.a,p.p,p.K],null,null),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,v.b,v.a)),p._15(4,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,7,{contentLabel:0}),p._37(603979776,8,{_buttons:1}),p._37(603979776,9,{_icons:1}),p._15(8,16384,null,0,q.a,[g.a,p.p,p.K],null,null),(e()(),p._40(9,2,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n            "])),(e()(),p._11(16777216,null,null,1,null,l)),p._15(13,802816,null,0,C.j,[p.W,p.T,p.v],{ngForOf:[0,"ngForOf"]},null),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(15,0,null,null,49,"ion-item",[["class","hidden-phone item item-block"],["text-wrap",""]],null,null,null,v.b,v.a)),p._15(16,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,13,{contentLabel:0}),p._37(603979776,14,{_buttons:1}),p._37(603979776,15,{_icons:1}),p._15(20,16384,null,0,E.a,[],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(22,0,null,2,38,"ion-row",[["class","row"]],null,null,null,null,null)),p._15(23,16384,null,0,W.a,[],null,null),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(25,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(26,16384,null,0,K.a,[],null,null),(e()(),p._16(27,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(28,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(31,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(32,16384,null,0,K.a,[],null,null),(e()(),p._16(33,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(34,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(37,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(38,16384,null,0,K.a,[],null,null),(e()(),p._16(39,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(40,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(43,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(44,16384,null,0,K.a,[],null,null),(e()(),p._16(45,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(46,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(49,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(50,16384,null,0,K.a,[],null,null),(e()(),p._16(51,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(52,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                    "])),(e()(),p._16(55,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),p._15(56,16384,null,0,K.a,[],null,null),(e()(),p._16(57,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),p._40(58,null,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n                "])),(e()(),p._40(-1,2,["\n                "])),(e()(),p._11(16777216,null,2,1,null,u)),p._15(63,802816,null,0,C.j,[p.W,p.T,p.v],{ngForOf:[0,"ngForOf"]},null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,13,0,t.completion.completions);e(n,63,0,t.completion.completions)},function(e,n){e(n,9,0,p._41(n,9,0,p._29(n,10).transform("addon.coursecompletion.requiredcriteria")));e(n,28,0,p._41(n,28,0,p._29(n,29).transform("addon.coursecompletion.criteriagroup")));e(n,34,0,p._41(n,34,0,p._29(n,35).transform("addon.coursecompletion.criteria")));e(n,40,0,p._41(n,40,0,p._29(n,41).transform("addon.coursecompletion.requirement")));e(n,46,0,p._41(n,46,0,p._29(n,47).transform("addon.coursecompletion.status")));e(n,52,0,p._41(n,52,0,p._29(n,53).transform("addon.coursecompletion.complete")));e(n,58,0,p._41(n,58,0,p._29(n,59).transform("addon.coursecompletion.completiondate")))})}function d(e){return p._42(0,[(e()(),p._16(0,0,null,null,24,"ion-card",[],null,null,null,null,null)),p._15(1,16384,null,0,_.a,[g.a,p.p,p.K],null,null),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,v.b,v.a)),p._15(4,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,16,{contentLabel:0}),p._37(603979776,17,{_buttons:1}),p._37(603979776,18,{_icons:1}),p._15(8,16384,null,0,q.a,[g.a,p.p,p.K],null,null),(e()(),p._40(9,2,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(12,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,v.b,v.a)),p._15(13,1097728,null,3,y.a,[b.a,g.a,p.p,p.K,[2,P.a]],null,null),p._37(335544320,19,{contentLabel:0}),p._37(603979776,20,{_buttons:1}),p._37(603979776,21,{_icons:1}),p._15(17,16384,null,0,E.a,[],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(19,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.completeCourse()&&i}return i},B.b,B.a)),p._15(20,1097728,[[20,4]],0,j.a,[[8,""],g.a,p.p,p.K],{block:[0,"block"]},null),(e()(),p._40(21,0,["",""])),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,2,["\n            "])),(e()(),p._40(-1,null,["\n        "]))],function(e,n){e(n,20,0,"")},function(e,n){e(n,9,0,p._41(n,9,0,p._29(n,10).transform("addon.coursecompletion.manualselfcompletion")));e(n,21,0,p._41(n,21,0,p._29(n,22).transform("addon.coursecompletion.completecourse")))})}function f(e){return p._42(0,[p._32(0,G.a,[D.a,z.a]),(e()(),p._16(1,0,null,null,23,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,V.b,V.a)),p._15(2,4374528,null,0,R.a,[g.a,T.a,$.a,p.p,p.K,Q.a,Y.a,p.D,[2,X.a],[2,N.a]],null,null),(e()(),p._40(-1,1,["\n    "])),(e()(),p._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshCompletion(t)&&i}return i},null,null)),p._15(5,212992,null,0,J.a,[T.a,R.a,p.D,Z.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),p._40(-1,null,["\n        "])),(e()(),p._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,ee.b,ee.a)),p._15(8,114688,null,0,ne.a,[J.a,g.a],{pullingText:[0,"pullingText"]},null),p._32(131072,h.a,[m.a,p.i]),(e()(),p._40(-1,null,["\n    "])),(e()(),p._40(-1,1,["\n    "])),(e()(),p._16(12,0,null,1,11,"core-loading",[],null,null,null,te.b,te.a)),p._15(13,638976,null,0,ie.a,[m.a,p.p,H.a,O.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,r)),p._15(16,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,c)),p._15(19,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,d)),p._15(22,16384,null,0,C.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n    "])),(e()(),p._40(-1,1,["\n"])),(e()(),p._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.completionLoaded);e(n,8,0,p._19(1,"",p._41(n,8,0,p._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.completionLoaded);e(n,16,0,t.completion);e(n,19,0,t.completion);e(n,22,0,t.showSelfComplete)},function(e,n){e(n,1,0,p._29(n,2).statusbarPadding,p._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==p._29(n,5).state,p._29(n,5)._top);e(n,7,0,p._29(n,8).r.state)})}t.d(n,"b",function(){return le}),n.c=f,t.d(n,"a",function(){return se});var p=t(1),h=t(27),m=t(19),_=t(87),g=t(7),v=t(31),y=t(21),b=t(20),P=t(28),E=t(33),C=t(8),I=t(42),S=t(2),w=t(5),A=t(11),T=t(15),O=t(3),k=t(26),D=t(6),x=t(17),M=t(10),U=t(18),N=t(22),R=t(24),F=t(35),L=t(38),H=t(13),K=t(113),W=t(114),q=t(108),B=t(46),j=t(43),G=t(223),z=t(25),V=t(185),$=t(32),Q=t(34),Y=t(107),X=t(37),J=t(145),Z=t(39),ee=t(201),ne=t(159),te=t(49),ie=t(48),oe=t(481),re=t(144),le=p._14({encapsulation:2,styles:[],data:{}}),se=p._12("addon-course-completion-report",oe.a,function(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"addon-course-completion-report",[],null,null,null,f,le)),p._15(1,114688,null,0,oe.a,[S.a,w.a,re.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,n,t){"use strict";function i(e){return a._42(0,[(e()(),a._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),a._32(131072,f.a,[p.a,a.i])],function(e,n){var t=n.component;e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return a._42(0,[(e()(),a._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),a._32(131072,f.a,[p.a,a.i])],function(e,n){e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function l(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",500)},null)}function s(e){return a._42(0,[(e()(),a._40(-1,null,["\n"])),(e()(),a._16(1,0,null,null,30,"core-navbar-buttons",[["end",""]],null,null,null,h.b,h.a)),a._15(2,245760,null,1,m.a,[a.p,_.a,g.a],null,null),a._37(603979776,1,{buttons:1}),(e()(),a._40(-1,0,["\n    "])),(e()(),a._16(5,0,null,0,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showToc(t)&&i}return i},v.b,v.a)),a._15(6,1097728,[[1,4]],0,y.a,[[8,""],b.a,a.p,a.K],null,null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._16(8,0,null,0,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(9,147456,null,0,P.a,[b.a,a.p,a.K],{name:[0,"name"]},null),(e()(),a._40(-1,0,["\n    "])),(e()(),a._40(-1,0,["\n    "])),(e()(),a._16(12,0,null,0,18,"core-context-menu",[],null,null,null,E.b,E.a)),a._15(13,245760,null,0,d.a,[p.a,C.a,a.p,g.a,[2,I.a]],null,null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,i)),a._15(16,16384,null,0,S.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,o)),a._15(19,16384,null,0,S.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._16(21,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},u.b,u.a)),a._15(22,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),a._32(131072,f.a,[p.a,a.i]),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,r)),a._15(26,16384,null,0,S.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,l)),a._15(29,16384,null,0,S.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n    "])),(e()(),a._40(-1,0,["\n"])),(e()(),a._40(-1,null,["\n\n"])),(e()(),a._40(-1,null,["\n"])),(e()(),a._16(34,0,null,null,17,"core-loading",[["class","core-loading-center"]],null,null,null,w.b,w.a)),a._15(35,638976,null,0,A.a,[p.a,a.p,T.a,O.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._40(-1,0,["\n\n    "])),(e()(),a._16(37,0,null,0,1,"core-course-module-description",[],null,null,null,k.b,k.a)),a._15(38,49152,null,0,D.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),a._40(-1,0,["\n\n    "])),(e()(),a._16(40,0,null,0,10,"div",[["padding",""]],null,null,null,null,null)),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(42,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.changeChapter(t)&&i}return i},x.b,x.a)),a._15(43,49152,null,0,M.a,[U.a],{previous:[0,"previous"],next:[1,"next"]},{action:"action"}),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(45,0,null,null,1,"core-format-text",[],null,null,null,null,null)),a._15(46,540672,null,0,N.a,[a.p,R.a,g.a,U.a,p.a,F.a,O.a,L.a,_.a,H.a,K.a,W.a,[2,q.a],[2,B.a],[2,j.a],G.a,T.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(48,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.changeChapter(t)&&i}return i},x.b,x.a)),a._15(49,49152,null,0,M.a,[U.a],{previous:[0,"previous"],next:[1,"next"]},{action:"action"}),(e()(),a._40(-1,null,["\n    "])),(e()(),a._40(-1,0,["\n\n"])),(e()(),a._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,9,0,"bookmark"),e(n,13,0);e(n,16,0,t.externalUrl);e(n,19,0,t.description);e(n,22,0,a._41(n,22,0,a._29(n,23).transform("core.refresh")),t.refreshIcon,!1,700);e(n,26,0,t.prefetchStatusIcon);e(n,29,0,t.size);e(n,35,0,t.loaded);e(n,38,0,t.description,t.component,t.componentId);e(n,43,0,t.previousChapter>0&&t.previousChapter,t.nextChapter>0&&t.nextChapter);e(n,46,0,t.chapterContent,t.component,t.componentId);e(n,49,0,t.previousChapter>0&&t.previousChapter,t.nextChapter>0&&t.nextChapter)},function(e,n){e(n,8,0,a._29(n,9)._hidden)})}t.d(n,"b",function(){return Y}),n.c=s,t.d(n,"a",function(){return X});var a=t(1),u=t(81),c=t(74),d=t(70),f=t(27),p=t(19),h=t(89),m=t(82),_=t(6),g=t(5),v=t(46),y=t(43),b=t(7),P=t(47),E=t(80),C=t(63),I=t(69),S=t(8),w=t(49),A=t(48),T=t(13),O=t(3),k=t(103),D=t(91),x=t(708),M=t(359),U=t(11),N=t(42),R=t(2),F=t(15),L=t(26),H=t(17),K=t(10),W=t(18),q=t(22),B=t(24),j=t(35),G=t(38),z=t(455),V=t(234),$=t(16),Q=t(362),Y=a._14({encapsulation:2,styles:[],data:{}}),X=a._12("addon-mod-book-index",z.a,function(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"addon-mod-book-index",[],null,null,null,s,Y)),a._15(1,245760,null,0,z.a,[a.u,V.a,$.a,K.a,Q.a,C.a,[2,B.a]],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return a._42(0,[(e()(),a._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),a._32(131072,f.a,[p.a,a.i])],function(e,n){var t=n.component;e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return a._42(0,[(e()(),a._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),a._32(131072,f.a,[p.a,a.i])],function(e,n){e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return a._42(0,[(e()(),a._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},u.b,u.a)),a._15(1,770048,null,0,c.a,[d.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),a._32(131072,f.a,[p.a,a.i])],function(e,n){var t=n.component;e(n,1,0,a._41(n,1,0,a._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return a._42(0,[(e()(),a._16(0,0,null,null,7,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),a._15(1,16384,null,0,h.a,[m.a,a.p,a.K],null,null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(4,147456,null,0,_.a,[m.a,a.p,a.K],{name:[0,"name"]},null),(e()(),a._40(5,null,[" ","\n    "])),a._33(6,{$a:0}),a._32(131072,f.a,[p.a,a.i])],function(e,n){e(n,4,0,"time")},function(e,n){var t=n.component;e(n,3,0,a._29(n,4)._hidden);e(n,5,0,a._41(n,5,0,a._29(n,7).transform("addon.mod_chat.sessionstart",e(n,6,0,t.chatInfo))))})}function s(e){return a._42(0,[(e()(),a._40(-1,null,["\n"])),(e()(),a._16(1,0,null,null,16,"core-navbar-buttons",[["end",""]],null,null,null,g.b,g.a)),a._15(2,245760,null,1,v.a,[a.p,y.a,b.a],null,null),a._37(603979776,1,{buttons:1}),(e()(),a._40(-1,0,["\n    "])),(e()(),a._16(5,0,null,0,11,"core-context-menu",[],null,null,null,P.b,P.a)),a._15(6,245760,null,0,d.a,[p.a,E.a,a.p,b.a,[2,C.a]],null,null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,i)),a._15(9,16384,null,0,I.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,o)),a._15(12,16384,null,0,I.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n        "])),(e()(),a._11(16777216,null,0,1,null,r)),a._15(15,16384,null,0,I.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n    "])),(e()(),a._40(-1,0,["\n"])),(e()(),a._40(-1,null,["\n\n"])),(e()(),a._40(-1,null,["\n"])),(e()(),a._16(20,0,null,null,16,"core-loading",[["class","core-loading-center"]],null,null,null,S.b,S.a)),a._15(21,638976,null,0,w.a,[p.a,a.p,A.a,T.a],{hideUntil:[0,"hideUntil"]},null),(e()(),a._40(-1,0,["\n\n    "])),(e()(),a._16(23,0,null,0,1,"core-course-module-description",[],null,null,null,O.b,O.a)),a._15(24,49152,null,0,k.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),a._40(-1,0,["\n\n    "])),(e()(),a._11(16777216,null,0,1,null,l)),a._15(27,16384,null,0,I.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,0,["\n\n    "])),(e()(),a._16(29,0,null,0,6,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),a._40(-1,null,["\n        "])),(e()(),a._16(31,0,null,null,3,"a",[["block",""],["color","primary"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.enterChat()&&i}return i},D.b,D.a)),a._15(32,1097728,null,0,x.a,[[8,""],m.a,a.p,a.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),a._40(33,0,["",""])),a._32(131072,f.a,[p.a,a.i]),(e()(),a._40(-1,null,["\n    "])),(e()(),a._40(-1,0,["\n"])),(e()(),a._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded);e(n,24,0,t.description,t.component,t.componentId);e(n,27,0,t.chatInfo);e(n,32,0,"primary","")},function(e,n){e(n,33,0,a._41(n,33,0,a._29(n,34).transform("addon.mod_chat.enterchat")))})}t.d(n,"b",function(){return F}),n.c=s,t.d(n,"a",function(){return L});var a=t(1),u=t(81),c=t(74),d=t(70),f=t(27),p=t(19),h=t(87),m=t(7),_=t(47),g=t(89),v=t(82),y=t(6),b=t(5),P=t(80),E=t(63),C=t(69),I=t(8),S=t(49),w=t(48),A=t(13),T=t(3),O=t(103),k=t(91),D=t(46),x=t(43),M=t(456),U=t(344),N=t(25),R=t(22),F=a._14({encapsulation:2,styles:[],data:{}}),L=a._12("addon-mod-chat-index",M.a,function(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"addon-mod-chat-index",[],null,null,null,s,F)),a._15(1,245760,null,0,M.a,[a.u,U.a,N.a,R.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),x._32(131072,R.a,[F.a,x.i])],function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},M.b,M.a)),x._15(1,770048,null,0,U.a,[N.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""])),x._33(2,{$a:0}),x._32(131072,R.a,[F.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_choice.previewonly",e(n,2,0,t.choice.openTimeReadable))))})}function c(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""])),x._33(2,{$a:0}),x._32(131072,R.a,[F.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_choice.notopenyet",e(n,2,0,t.choice.openTimeReadable))))})}function d(e){return x._42(0,[(e()(),x._16(0,0,null,null,11,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),x._15(1,16384,null,0,L.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(4,147456,null,0,K.a,[H.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,u)),x._15(7,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,c)),x._15(10,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,"information-circle");e(n,7,0,t.options&&t.options.length);e(n,10,0,!t.options||!t.options.length)},function(e,n){e(n,3,0,x._29(n,4)._hidden)})}function f(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,[""," "])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._16(3,0,null,null,1,"core-format-text",[],null,null,null,null,null)),x._15(4,540672,null,0,q.a,[x.p,B.a,j.a,G.a,F.a,z.a,V.a,$.a,Q.a,Y.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,ne.a],te.a,ie.a],{text:[0,"text"]},null)],function(e,n){e(n,4,0,n.component.options[0].text)},function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_choice.yourselection")))})}function p(e){return x._42(0,[(e()(),x._16(0,0,null,null,13,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),x._15(1,16384,null,0,L.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(4,147456,null,0,K.a,[H.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,f)),x._15(7,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(9,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(10,null,["",""])),x._33(11,{$a:0}),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,"information-circle");e(n,7,0,t.options&&t.options.length)},function(e,n){var t=n.component;e(n,3,0,x._29(n,4)._hidden);e(n,10,0,x._41(n,10,0,x._29(n,12).transform("addon.mod_choice.expired",e(n,11,0,t.choice.closeTimeReadable))))})}function h(e){return x._42(0,[(e()(),x._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),x._15(1,16384,null,0,L.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(4,147456,null,0,K.a,[H.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(5,null,[" ","\n    "])),x._33(6,{$a:0}),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,x._29(n,4)._hidden);e(n,5,0,x._41(n,5,0,x._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function m(e){return x._42(0,[(e()(),x._16(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(3,147456,null,0,K.a,[H.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(4,null,["\n        ","\n    "])),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,x._29(n,3)._hidden);e(n,4,0,x._41(n,4,0,x._29(n,5).transform(t.publishInfo)))})}function _(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""])),x._32(131072,R.a,[F.a,x.i])],null,function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_choice.full")))})}function g(e){return x._42(0,[(e()(),x._16(0,0,null,null,21,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,oe.b,oe.a)),x._15(1,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,2,{contentLabel:0}),x._37(603979776,3,{_buttons:1}),x._37(603979776,4,{_icons:1}),x._15(5,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n                "])),(e()(),x._16(7,0,null,1,6,"ion-label",[],null,null,null,null,null)),x._15(8,16384,[[2,4]],0,ue.a,[H.a,x.p,x.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),x._16(9,0,null,null,1,"core-format-text",[],null,null,null,null,null)),x._15(10,540672,null,0,q.a,[x.p,B.a,j.a,G.a,F.a,z.a,V.a,$.a,Q.a,Y.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,ne.a],te.a,ie.a],{text:[0,"text"]},null),(e()(),x._40(-1,null,[" "])),(e()(),x._11(16777216,null,null,1,null,_)),x._15(13,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n                "])),(e()(),x._16(15,0,null,4,5,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==x._29(e,16)._click(t)&&i}if("ngModelChange"===n){i=!1!==(e.context.$implicit.checked=t)&&i}return i},ce.b,ce.a)),x._15(16,1228800,null,0,de.a,[H.a,le.a,[2,re.a],x.p,x.K],{disabled:[0,"disabled"]},null),x._35(1024,null,fe.l,function(e){return[e]},[de.a]),x._15(18,671744,null,0,fe.q,[[8,null],[8,null],[8,null],[2,fe.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),x._35(2048,null,fe.m,null,[fe.q]),x._15(20,16384,null,0,fe.n,[fe.m],null,null),(e()(),x._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.text);e(n,13,0,t.choice.limitanswers&&n.context.$implicit.countanswers>=n.context.$implicit.maxanswers);e(n,16,0,n.context.$implicit.disabled||!t.canEdit);e(n,18,0,n.context.$implicit.disabled||!t.canEdit,n.context.$implicit.checked)},function(e,n){e(n,15,0,x._29(n,16)._disabled,x._29(n,20).ngClassUntouched,x._29(n,20).ngClassTouched,x._29(n,20).ngClassPristine,x._29(n,20).ngClassDirty,x._29(n,20).ngClassValid,x._29(n,20).ngClassInvalid,x._29(n,20).ngClassPending)})}function v(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,g)),x._15(3,802816,null,0,W.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.options)},null)}function y(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""])),x._32(131072,R.a,[F.a,x.i])],null,function(e,n){e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_choice.full")))})}function b(e){return x._42(0,[(e()(),x._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["radio-group",""],["role","radiogroup"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.selectedOption.id=t)&&i}return i},oe.b,oe.a)),x._15(1,1064960,null,1,pe.a,[x.K,x.p,x.i],null,null),x._37(335544320,8,{_header:0}),x._35(1024,null,fe.l,function(e){return[e]},[pe.a]),x._15(4,671744,null,0,fe.q,[[8,null],[8,null],[8,null],[2,fe.l]],{model:[0,"model"]},{update:"ngModelChange"}),x._35(2048,null,fe.m,null,[fe.q]),x._15(6,16384,null,0,fe.n,[fe.m],null,null),x._15(7,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,5,{contentLabel:0}),x._37(603979776,6,{_buttons:1}),x._37(603979776,7,{_icons:1}),x._15(11,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n                "])),(e()(),x._16(13,0,null,1,6,"ion-label",[],null,null,null,null,null)),x._15(14,16384,[[5,4]],0,ue.a,[H.a,x.p,x.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),x._16(15,0,null,null,1,"core-format-text",[],null,null,null,null,null)),x._15(16,540672,null,0,q.a,[x.p,B.a,j.a,G.a,F.a,z.a,V.a,$.a,Q.a,Y.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,ne.a],te.a,ie.a],{text:[0,"text"]},null),(e()(),x._40(-1,null,[" "])),(e()(),x._11(16777216,null,null,1,null,y)),x._15(19,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n                "])),(e()(),x._16(21,0,null,4,1,"ion-radio",[["color","primary"]],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==x._29(e,22)._click(t)&&i}return i},he.b,he.a)),x._15(22,245760,null,0,me.a,[le.a,H.a,x.p,x.K,[2,re.a],[2,pe.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),x._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,4,0,t.selectedOption.id);e(n,16,0,n.context.$implicit.text);e(n,19,0,t.choice.limitanswers&&n.context.$implicit.countanswers>=n.context.$implicit.maxanswers);e(n,22,0,"primary",n.context.$implicit.id,n.context.$implicit.disabled||!t.canEdit)},function(e,n){e(n,0,0,x._29(n,6).ngClassUntouched,x._29(n,6).ngClassTouched,x._29(n,6).ngClassPristine,x._29(n,6).ngClassDirty,x._29(n,6).ngClassValid,x._29(n,6).ngClassInvalid,x._29(n,6).ngClassPending);e(n,21,0,x._29(n,22)._disabled)})}function P(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,b)),x._15(3,802816,null,0,W.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.options)},null)}function E(e){return x._42(0,[(e()(),x._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,oe.b,oe.a)),x._15(1,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,9,{contentLabel:0}),x._37(603979776,10,{_buttons:1}),x._37(603979776,11,{_icons:1}),x._15(5,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.save()&&i}return i},_e.b,_e.a)),x._15(8,1097728,[[10,4]],0,ge.a,[[8,""],H.a,x.p,x.K],{block:[0,"block"]},null),(e()(),x._40(9,0,["",""])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"")},function(e,n){e(n,7,0,!n.component.canSave());e(n,9,0,x._41(n,9,0,x._29(n,10).transform("addon.mod_choice.savemychoice")))})}function C(e){return x._42(0,[(e()(),x._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,oe.b,oe.a)),x._15(1,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,12,{contentLabel:0}),x._37(603979776,13,{_buttons:1}),x._37(603979776,14,{_icons:1}),x._15(5,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,2,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.delete()&&i}return i},_e.b,_e.a)),x._15(8,1097728,[[13,4]],0,ge.a,[[8,""],H.a,x.p,x.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),x._40(9,0,["",""])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"light","")},function(e,n){e(n,9,0,x._41(n,9,0,x._29(n,10).transform("addon.mod_choice.removemychoice")))})}function I(e){return x._42(0,[(e()(),x._16(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),x._15(1,16384,null,0,L.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,v)),x._15(4,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,P)),x._15(7,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,E)),x._15(10,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,C)),x._15(13,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.choice.allowmultiple);e(n,7,0,!t.choice.allowmultiple);e(n,10,0,t.canEdit);e(n,13,0,t.canDelete)},null)}function S(e){return x._42(0,[(e()(),x._16(0,0,null,null,10,"ion-item",[["class","core-warning-item item item-block"],["text-wrap",""]],null,null,null,oe.b,oe.a)),x._15(1,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,18,{contentLabel:0}),x._37(603979776,19,{_buttons:1}),x._37(603979776,20,{_icons:1}),x._15(5,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n                        "])),(e()(),x._16(7,0,null,0,1,"ion-icon",[["color","warning"],["item-start",""],["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(8,147456,[[20,4]],0,K.a,[H.a,x.p,x.K],{color:[0,"color"],name:[1,"name"]},null),(e()(),x._40(9,2,[" ","\n                    "])),x._32(131072,R.a,[F.a,x.i])],function(e,n){e(n,8,0,"warning","warning")},function(e,n){e(n,7,0,x._29(n,8)._hidden);e(n,9,0,x._41(n,9,0,x._29(n,10).transform("addon.mod_choice.resultsnotsynced")))})}function w(e){return x._42(0,[(e()(),x._16(0,0,null,null,14,"a",[["class","item item-block"],["core-user-link",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],null,null,oe.b,oe.a)),x._15(1,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,27,{contentLabel:0}),x._37(603979776,28,{_buttons:1}),x._37(603979776,29,{_icons:1}),x._15(5,16384,null,0,ae.a,[],null,null),x._15(6,81920,null,0,ve.a,[x.p,[2,Z.a]],{userId:[0,"userId"],courseId:[1,"courseId"]},null),(e()(),x._40(-1,2,["\n                            "])),(e()(),x._16(8,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,ye.b,ye.a)),x._15(9,16384,null,0,be.a,[],null,null),x._15(10,770048,null,0,Pe.a,[Z.a,B.a,V.a,X.a,ie.a],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),x._40(-1,2,["\n                            "])),(e()(),x._16(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),x._40(13,null,["",""])),(e()(),x._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,6,0,n.context.$implicit.userid,t.courseid);e(n,10,0,n.context.$implicit,t.courseid)},function(e,n){e(n,0,0,n.context.$implicit.fullname);e(n,13,0,n.context.$implicit.fullname)})}function A(e){return x._42(0,[(e()(),x._16(0,0,null,null,23,"ion-item-group",[],null,null,null,null,null)),x._15(1,16384,null,0,Ee.a,[],null,null),(e()(),x._40(-1,null,["\n                        "])),(e()(),x._16(3,0,null,null,16,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,oe.b,oe.a)),x._15(4,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,24,{contentLabel:0}),x._37(603979776,25,{_buttons:1}),x._37(603979776,26,{_icons:1}),x._15(8,16384,null,0,Ce.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,2,["\n                            "])),(e()(),x._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),x._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),x._15(12,540672,null,0,q.a,[x.p,B.a,j.a,G.a,F.a,z.a,V.a,$.a,Q.a,Y.a,X.a,J.a,[2,Z.a],[2,ee.a],[2,ne.a],te.a,ie.a],{text:[0,"text"]},null),(e()(),x._40(-1,2,["\n                            "])),(e()(),x._16(14,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),x._40(15,null,["",": "," (",")"])),x._32(131072,R.a,[F.a,x.i]),x._33(17,{$a:0}),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,2,["\n                        "])),(e()(),x._40(-1,null,["\n                        "])),(e()(),x._11(16777216,null,null,1,null,w)),x._15(22,802816,null,0,W.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n                    "]))],function(e,n){e(n,12,0,n.context.$implicit.text);e(n,22,0,n.context.$implicit.userresponses)},function(e,n){e(n,15,0,x._41(n,15,0,x._29(n,16).transform("addon.mod_choice.numberofuser")),n.context.$implicit.numberofuser,x._41(n,15,2,x._29(n,18).transform("core.percentagenumber",e(n,17,0,n.context.$implicit.percentageamount))))})}function T(e){return x._42(0,[(e()(),x._16(0,0,null,null,5,"ion-col",[["class","col"],["col-12",""],["col-lg-7",""]],null,null,null,null,null)),x._15(1,16384,null,0,Ie.a,[],null,null),(e()(),x._40(-1,null,["\n                    "])),(e()(),x._11(16777216,null,null,1,null,A)),x._15(4,802816,null,0,W.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n                "]))],function(e,n){e(n,4,0,n.component.results)},null)}function O(e){return x._42(0,[(e()(),x._16(0,0,null,null,39,"div",[],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,7,"ion-item-divider",[["class","item item-divider"],["text-center",""]],null,null,null,oe.b,oe.a)),x._15(3,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,15,{contentLabel:0}),x._37(603979776,16,{_buttons:1}),x._37(603979776,17,{_icons:1}),x._15(7,16384,null,0,Ce.a,[H.a,x.p,x.K],null,null),(e()(),x._40(8,2,["\n            ","\n        "])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(11,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),x._15(12,16384,null,0,Se.a,[],null,null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._16(14,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),x._15(15,16384,null,0,we.a,[],null,null),(e()(),x._40(-1,null,["\n                "])),(e()(),x._16(17,0,null,null,16,"ion-col",[["class","col"],["col-12",""],["col-lg-5",""]],null,null,null,null,null)),x._15(18,16384,null,0,Ie.a,[],null,null),(e()(),x._40(-1,null,["\n                    "])),(e()(),x._11(16777216,null,null,1,null,S)),x._15(21,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n                    "])),(e()(),x._16(23,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,oe.b,oe.a)),x._15(24,1097728,null,3,re.a,[le.a,H.a,x.p,x.K,[2,se.a]],null,null),x._37(335544320,21,{contentLabel:0}),x._37(603979776,22,{_buttons:1}),x._37(603979776,23,{_icons:1}),x._15(28,16384,null,0,ae.a,[],null,null),(e()(),x._40(-1,2,["\n                        "])),(e()(),x._16(30,0,null,2,1,"core-chart",[["height","300"],["type","pie"]],null,null,null,Ae.b,Ae.a)),x._15(31,770048,null,0,Te.a,[],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"]},null),(e()(),x._40(-1,2,["\n                    "])),(e()(),x._40(-1,null,["\n                "])),(e()(),x._40(-1,null,["\n                "])),(e()(),x._11(16777216,null,null,1,null,T)),x._15(36,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._40(-1,null,["\n        "])),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,21,0,t.hasOffline);e(n,31,0,t.data,t.labels,"pie","300");e(n,36,0,t.choice.publish&&t.results)},function(e,n){e(n,8,0,x._41(n,8,0,x._29(n,9).transform("addon.mod_choice.responses")))})}function k(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"ion-card",[["class","core-info-card"]],null,null,null,null,null)),x._15(1,16384,null,0,L.a,[H.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(3,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),x._40(4,null,["",""])),x._32(131072,R.a,[F.a,x.i]),(e()(),x._40(-1,null,["\n    "]))],null,function(e,n){e(n,4,0,x._41(n,4,0,x._29(n,5).transform("addon.mod_choice.noresultsviewable")))})}function D(e){return x._42(0,[(e()(),x._40(-1,null,["\n"])),(e()(),x._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Oe.b,Oe.a)),x._15(2,245760,null,1,ke.a,[x.p,Q.a,j.a],null,null),x._37(603979776,1,{buttons:1}),(e()(),x._40(-1,0,["\n    "])),(e()(),x._16(5,0,null,0,20,"core-context-menu",[],null,null,null,De.b,De.a)),x._15(6,245760,null,0,N.a,[F.a,xe.a,x.p,j.a,[2,Me.a]],null,null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,i)),x._15(9,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,o)),x._15(12,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,r)),x._15(15,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,l)),x._15(18,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,s)),x._15(21,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n        "])),(e()(),x._11(16777216,null,0,1,null,a)),x._15(24,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._40(-1,0,["\n"])),(e()(),x._40(-1,null,["\n\n"])),(e()(),x._40(-1,null,["\n"])),(e()(),x._16(29,0,null,null,31,"core-loading",[["class","core-loading-center"]],null,null,null,Ue.b,Ue.a)),x._15(30,638976,null,0,Ne.a,[F.a,x.p,ie.a,V.a],{hideUntil:[0,"hideUntil"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._16(32,0,null,0,1,"core-course-module-description",[],null,null,null,Re.b,Re.a)),x._15(33,49152,null,0,Fe.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,d)),x._15(37,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,p)),x._15(40,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,h)),x._15(44,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,m)),x._15(48,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,I)),x._15(52,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,O)),x._15(56,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,k)),x._15(59,16384,null,0,W.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n"])),(e()(),x._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,18,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description,t.component,t.componentId);e(n,37,0,t.choiceNotOpenYet);e(n,40,0,t.choiceClosed);e(n,44,0,t.hasOffline);e(n,48,0,t.canEdit&&t.publishInfo&&t.options&&t.options.length);e(n,52,0,t.options&&t.options.length);e(n,56,0,t.canSeeResults);e(n,59,0,!t.canSeeResults&&!t.choiceNotOpenYet)},null)}t.d(n,"b",function(){return Be}),n.c=D,t.d(n,"a",function(){return je});var x=t(1),M=t(81),U=t(74),N=t(70),R=t(27),F=t(19),L=t(87),H=t(7),K=t(47),W=t(8),q=t(42),B=t(2),j=t(5),G=t(11),z=t(15),V=t(3),$=t(26),Q=t(6),Y=t(17),X=t(10),J=t(18),Z=t(22),ee=t(24),ne=t(35),te=t(38),ie=t(13),oe=t(31),re=t(21),le=t(20),se=t(28),ae=t(33),ue=t(62),ce=t(229),de=t(174),fe=t(23),pe=t(127),he=t(167),me=t(136),_e=t(46),ge=t(43),ve=t(672),ye=t(222),be=t(186),Pe=t(187),Ee=t(348),Ce=t(108),Ie=t(113),Se=t(142),we=t(114),Ae=t(993),Te=t(404),Oe=t(89),ke=t(82),De=t(80),xe=t(63),Me=t(69),Ue=t(49),Ne=t(48),Re=t(103),Fe=t(91),Le=t(457),He=t(258),Ke=t(259),We=t(260),qe=t(25),Be=x._14({encapsulation:2,styles:[],data:{}}),je=x._12("addon-mod-choice-index",Le.a,function(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"addon-mod-choice-index",[],null,null,null,D,Be)),x._15(1,245760,null,0,Le.a,[x.u,He.a,[2,ee.a],Ke.a,We.a,qe.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var i=t(0),o=t(1),r=t(23),l=(t(9),t(4),t(35),t(166)),s=(t(252),t(207),function(){function e(e,n,t,i,l,s,a,u,c,d,f){this.navCtrl=e,this.uploaderProvider=n,this.syncProvider=t,this.domUtils=i,this.textUtils=l,this.translate=s,this.forumProvider=a,this.forumHelper=u,this.forumOffline=c,this.forumSync=d,this.svComponent=f,this.messageControl=new r.e,this.onPostChange=new o.r}return e.prototype.ngOnInit=function(){this.uniqueId=this.post.id?"reply"+this.post.id:"edit"+this.post.parent},e.prototype.openUserProfile=function(e){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:e,courseId:this.courseId})},e.prototype.setReplyData=function(e,n,t,i,o){this.uploaderProvider.clearTmpFiles(this.replyData.files),this.replyData.replyingTo=e||0,this.replyData.isEditing=!!n,this.replyData.subject=t||this.defaultSubject||"",this.replyData.message=i||null,this.replyData.files=o||[],this.messageControl.setValue(this.replyData.message),this.originalData.subject=this.replyData.subject,this.originalData.message=this.replyData.message,this.originalData.files=this.replyData.files.slice()},e.prototype.showReply=function(){var e=this;this.replyData.isEditing?this.confirmDiscard().then(function(){e.setReplyData(e.post.id)}).catch(function(){}):this.replyData.replyingTo?(this.replyData.replyingTo=this.post.id,this.messageControl.setValue(this.replyData.message)):this.setReplyData(this.post.id)},e.prototype.editReply=function(){var e=this;this.confirmDiscard().then(function(){e.syncId=e.forumSync.getDiscussionSyncId(e.discussionId),e.syncProvider.blockOperation(l.a.COMPONENT,e.syncId),e.setReplyData(e.post.parent,!0,e.post.subject,e.post.message,e.post.attachments)}).catch(function(){})},e.prototype.onMessageChange=function(e){this.replyData.message=e},e.prototype.reply=function(){var e=this;if(this.replyData.subject)if(this.replyData.message){var n=!1,t=this.replyData.message,i=this.replyData.subject,o=this.replyData.replyingTo,r=this.replyData.files||[],s={},a=this.domUtils.showModalLoading("core.sending",!0);t=this.textUtils.formatHtmlLines(t),(r.length?this.forumHelper.uploadOrStoreReplyFiles(this.forum.id,o,r,!1).catch(function(t){return e.forum.id?(n=!0,e.forumHelper.uploadOrStoreReplyFiles(e.forum.id,o,r,!0)):Promise.reject(t)}):Promise.resolve()).then(function(l){return l&&(s.attachmentsid=l),n?e.forumOffline.replyPost(o,e.discussionId,e.forum.id,e.forum.name,e.courseId,i,t,s).then(function(){return!1}):e.forumProvider.replyPost(o,e.discussionId,e.forum.id,e.forum.name,e.courseId,i,t,s,void 0,!r.length)}).then(function(n){n&&e.forum.id&&e.forumHelper.deleteReplyStoredFiles(e.forum.id,o),e.setReplyData(),e.onPostChange.emit(),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_forum.couldnotadd",!0)}).finally(function(){a.dismiss()})}else this.domUtils.showErrorModal("addon.mod_forum.erroremptymessage",!0);else this.domUtils.showErrorModal("addon.mod_forum.erroremptysubject",!0)},e.prototype.cancel=function(){var e=this;this.confirmDiscard().then(function(){e.setReplyData(),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)}).catch(function(){})},e.prototype.discard=function(){var e=this;this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var n=[];return n.push(e.forumOffline.deleteReply(e.post.parent)),e.forum.id&&n.push(e.forumHelper.deleteReplyStoredFiles(e.forum.id,e.post.parent).catch(function(){})),Promise.all(n).finally(function(){e.setReplyData(),e.onPostChange.emit(),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)})}).catch(function(){})},e.prototype.ngOnDestroy=function(){this.syncId&&this.syncProvider.unblockOperation(l.a.COMPONENT,this.syncId)},e.prototype.confirmDiscard=function(){return this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmloss")):Promise.resolve()},e=Object(i.__decorate)([Object(i.__param)(10,Object(o.E)())],e)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(9),t(173),t(163);var i=function(){function e(e,n,t,i,o,r){this.workshopOffline=e,this.workshopHelper=n,this.navCtrl=t,this.userProvider=i,this.domUtils=o,this.canViewAssessment=!1,this.canSelfAssess=!1,this.offline=!1,this.loaded=!1,this.currentUserId=r.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return e.prototype.ngOnInit=function(){var e=this,n=this.access&&this.access.assessingallowed,t=this.assessment.userid||this.assessment.reviewerid,i=[];this.assessmentId=this.assessment.assessmentid||this.assessment.id,this.canViewAssessment=this.assessment.grade,this.canSelfAssess=n&&t==this.currentUserId,t&&i.push(this.userProvider.getProfile(t,this.courseId,!0).then(function(n){e.profile=n}));var o;o=t==this.currentUserId?this.workshopOffline.getAssessment(this.workshop.id,this.assessmentId).then(function(n){e.offline=!0,e.assessment.weight=n.inputdata.weight}):this.workshopOffline.getEvaluateAssessment(this.workshop.id,this.assessmentId).then(function(n){e.offline=!0,e.assessment.gradinggradeover=n.gradinggradeover,e.assessment.weight=n.weight}),i.push(o.catch(function(){e.offline=!1})),Promise.all(i).finally(function(){e.loaded=!0})},e.prototype.gotoAssessment=function(){var e=this;if(!this.canSelfAssess&&this.canViewAssessment){var n={assessment:this.assessment,submission:this.submission,profile:this.profile,courseId:this.courseId,assessmentId:this.assessmentId};if(this.submission)this.navCtrl.push("AddonModWorkshopAssessmentPage",n);else{var t=this.domUtils.showModalLoading("core.sending",!0);this.workshopHelper.getSubmissionById(this.workshop.id,this.assessment.submissionid).then(function(t){n.submission=t,e.navCtrl.push("AddonModWorkshopAssessmentPage",n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Cannot load submission")}).finally(function(){t.dismiss()})}}},e.prototype.gotoOwnAssessment=function(){if(this.canSelfAssess){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},e}()},function(e,n,t){"use strict";function i(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),p._32(131072,g.a,[v.a,p.i])],function(e,n){var t=n.component;e(n,1,0,p._41(n,1,0,p._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,p._41(n,1,0,p._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function l(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",500)},null)}function s(e){return p._42(0,[(e()(),p._16(0,0,null,null,14,"a",[["class","item-media item item-block"],["ion-item",""]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==p._29(e,6).onClick()&&i}return i},y.b,y.a)),p._15(1,1097728,null,3,b.a,[P.a,E.a,p.p,p.K,[2,C.a]],null,null),p._37(335544320,2,{contentLabel:0}),p._37(603979776,3,{_buttons:1}),p._37(603979776,4,{_icons:1}),p._15(5,16384,null,0,I.a,[],null,null),p._15(6,16384,null,0,S.a,[[2,w.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),p._33(7,{path:0,courseId:1,module:2}),p._15(8,1064960,null,0,A.a,[S.a,[2,T.a]],null,null),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(10,0,null,0,0,"img",[["alt",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),p._40(-1,2,["\n                "])),(e()(),p._16(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),p._40(13,null,["",""])),(e()(),p._40(-1,2,["\n            "]))],function(e,n){e(n,6,0,"AddonModFolderIndexPage",e(n,7,0,n.parent.context.$implicit.filepath,n.component.courseId,n.parent.context.$implicit))},function(e,n){e(n,0,0,p._29(n,8)._href);e(n,10,0,n.parent.context.$implicit.fileicon);e(n,13,0,n.parent.context.$implicit.name)})}function a(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"core-file",[],null,null,null,O.b,O.a)),p._15(1,245760,null,0,k.a,[D.a,x.a,M.a,U.a,N.a,R.a,F.a,L.a,H.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit,n.component.component,n.parent.context.$implicit.contextid)},null)}function u(e){return p._42(0,[(e()(),p._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),p._40(-1,null,["\n            "])),(e()(),p._11(16777216,null,null,1,null,s)),p._15(3,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n            "])),(e()(),p._11(16777216,null,null,1,null,a)),p._15(6,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,"folder"===n.context.$implicit.type);e(n,6,0,"folder"!==n.context.$implicit.type)},null)}function c(e){return p._42(0,[(e()(),p._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),p._15(1,16384,null,0,W.a,[E.a,p.p,p.K,q.a,B.l,j.a],null,null),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,u)),p._15(4,802816,null,0,K.j,[p.W,p.T,p.v],{ngForOf:[0,"ngForOf"]},null),(e()(),p._40(-1,null,["\n    "]))],function(e,n){e(n,4,0,n.component.contents)},null)}function d(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"core-empty-box",[["icon","folder"]],null,null,null,G.b,G.a)),p._15(1,49152,null,0,z.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,p._41(n,1,0,p._29(n,2).transform("addon.mod_folder.emptyfilelist")),"folder")},null)}function f(e){return p._42(0,[(e()(),p._40(-1,null,["\n"])),(e()(),p._16(1,0,null,null,23,"core-navbar-buttons",[["end",""]],null,null,null,V.b,V.a)),p._15(2,245760,null,1,$.a,[p.p,Q.a,M.a],null,null),p._37(603979776,1,{buttons:1}),(e()(),p._40(-1,0,["\n    "])),(e()(),p._16(5,0,null,0,18,"core-context-menu",[],null,null,null,Y.b,Y.a)),p._15(6,245760,null,0,_.a,[v.a,X.a,p.p,M.a,[2,J.a]],null,null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,i)),p._15(9,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,o)),p._15(12,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._16(14,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},h.b,h.a)),p._15(15,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),p._32(131072,g.a,[v.a,p.i]),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,r)),p._15(19,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,l)),p._15(22,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n    "])),(e()(),p._40(-1,0,["\n"])),(e()(),p._40(-1,null,["\n\n"])),(e()(),p._40(-1,null,["\n"])),(e()(),p._16(27,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,Z.b,Z.a)),p._15(28,638976,null,0,ee.a,[v.a,p.p,L.a,x.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._16(30,0,null,0,1,"core-course-module-description",[],null,null,null,ne.b,ne.a)),p._15(31,49152,null,0,te.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._11(16777216,null,0,1,null,c)),p._15(34,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._11(16777216,null,0,1,null,d)),p._15(37,16384,null,0,K.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n\n"])),(e()(),p._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,p._41(n,15,0,p._29(n,16).transform("core.refresh")),t.refreshIcon,!1,700);e(n,19,0,t.prefetchStatusIcon);e(n,22,0,t.size);e(n,28,0,t.loaded);e(n,31,0,t.description,t.component,t.componentId);e(n,34,0,t.contents&&t.contents.length>0);e(n,37,0,!t.contents||0==t.contents.length)},null)}t.d(n,"b",function(){return se}),n.c=f,t.d(n,"a",function(){return ae});var p=t(1),h=t(81),m=t(74),_=t(70),g=t(27),v=t(19),y=t(31),b=t(21),P=t(20),E=t(7),C=t(28),I=t(33),S=t(224),w=t(22),A=t(250),T=t(52),O=t(203),k=t(172),D=t(2),x=t(3),M=t(5),U=t(17),N=t(10),R=t(132),F=t(65),L=t(13),H=t(11),K=t(8),W=t(78),q=t(15),B=t(39),j=t(32),G=t(120),z=t(109),V=t(89),$=t(82),Q=t(6),Y=t(80),X=t(63),J=t(69),Z=t(49),ee=t(48),ne=t(103),te=t(91),ie=t(463),oe=t(294),re=t(16),le=t(364),se=p._14({encapsulation:2,styles:[],data:{}}),ae=p._12("addon-mod-folder-index",ie.a,function(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"addon-mod-folder-index",[],null,null,null,f,se)),p._15(1,245760,null,0,ie.a,[p.u,oe.a,re.a,N.a,le.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",path:"path"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return P._42(0,[(e()(),P._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openModePicker(t)&&i}return i},E.b,E.a)),P._15(1,1097728,[[3,4]],0,C.a,[[8,""],I.a,P.p,P.K],null,null),P._32(131072,S.a,[w.a,P.i]),(e()(),P._40(-1,0,["\n        "])),(e()(),P._16(4,0,null,0,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._15(5,147456,null,0,A.a,[I.a,P.p,P.K],{name:[0,"name"]},null),(e()(),P._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"funnel")},function(e,n){e(n,0,0,P._41(n,0,0,P._29(n,2).transform("addon.mod_glossary.browsemode")));e(n,4,0,P._29(n,5)._hidden)})}function o(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),P._32(131072,S.a,[w.a,P.i])],function(e,n){var t=n.component;e(n,1,0,P._41(n,1,0,P._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function r(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),P._32(131072,S.a,[w.a,P.i])],function(e,n){e(n,1,0,P._41(n,1,0,P._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),P._32(131072,S.a,[w.a,P.i])],function(e,n){var t=n.component;e(n,1,0,P._41(n,1,0,P._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function s(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),P._32(131072,S.a,[w.a,P.i])],function(e,n){var t=n.component;e(n,1,0,P._41(n,1,0,P._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,650)},null)}function a(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.openNewEntry()&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),P._32(131072,S.a,[w.a,P.i])],function(e,n){e(n,1,0,P._41(n,1,0,P._29(n,2).transform("addon.mod_glossary.addentry")),"add",600)},null)}function u(e){return P._42(0,[(e()(),P._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function c(e){return P._42(0,[(e()(),P._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},T.b,T.a)),P._15(1,770048,null,0,O.a,[k.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function d(e){return P._42(0,[(e()(),P._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),P._15(1,16384,null,0,D.a,[I.a,P.p,P.K],null,null),(e()(),P._40(-1,null,["\n            "])),(e()(),P._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._15(4,147456,null,0,A.a,[I.a,P.p,P.K],{name:[0,"name"]},null),(e()(),P._40(5,null,[" ","\n        "])),P._33(6,{$a:0}),P._32(131072,S.a,[w.a,P.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,P._29(n,4)._hidden);e(n,5,0,P._41(n,5,0,P._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function f(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-search-box",[],null,[[null,"onSubmit"]],function(e,n,t){var i=!0;if("onSubmit"===n){i=!1!==e.component.search(t)&&i}return i},x.b,x.a)),P._15(1,114688,null,0,M.a,[w.a,U.a],{placeholder:[0,"placeholder"],autoFocus:[1,"autoFocus"],lengthCheck:[2,"lengthCheck"],showClear:[3,"showClear"]},{onSubmit:"onSubmit"}),P._32(131072,S.a,[w.a,P.i])],function(e,n){e(n,1,0,P._41(n,1,0,P._29(n,2).transform("addon.mod_glossary.searchquery")),!0,2,!1)},null)}function p(e){return P._42(0,[(e()(),P._16(0,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openNewEntry(e.context.$implicit)&&i}return i},N.b,N.a)),P._15(1,1097728,null,3,R.a,[F.a,I.a,P.p,P.K,[2,L.a]],null,null),P._37(335544320,7,{contentLabel:0}),P._37(603979776,8,{_buttons:1}),P._37(603979776,9,{_icons:1}),P._15(5,16384,null,0,H.a,[],null,null),(e()(),P._40(-1,2,["\n                    "])),(e()(),P._16(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),P._40(8,null,["",""])),(e()(),P._40(-1,2,["\n                "]))],null,function(e,n){e(n,8,0,n.context.$implicit.concept)})}function h(e){return P._42(0,[(e()(),P._16(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),P._15(1,16384,null,0,K.a,[I.a,P.p,P.K,W.a,q.l,B.a],null,null),(e()(),P._40(-1,null,["\n                "])),(e()(),P._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,N.b,N.a)),P._15(4,1097728,null,3,R.a,[F.a,I.a,P.p,P.K,[2,L.a]],null,null),P._37(335544320,4,{contentLabel:0}),P._37(603979776,5,{_buttons:1}),P._37(603979776,6,{_icons:1}),P._15(8,16384,null,0,j.a,[I.a,P.p,P.K],null,null),(e()(),P._40(9,2,["\n                    ","\n                "])),P._32(131072,S.a,[w.a,P.i]),(e()(),P._40(-1,null,["\n                "])),(e()(),P._11(16777216,null,null,1,null,p)),P._15(13,802816,null,0,G.j,[P.W,P.T,P.v],{ngForOf:[0,"ngForOf"]},null),(e()(),P._40(-1,null,["\n            "]))],function(e,n){e(n,13,0,n.component.offlineEntries)},function(e,n){e(n,9,0,P._41(n,9,0,P._29(n,10).transform("addon.mod_glossary.entriestobesynced")))})}function m(e){return P._42(0,[(e()(),P._16(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,N.b,N.a)),P._15(1,1097728,null,3,R.a,[F.a,I.a,P.p,P.K,[2,L.a]],null,null),P._37(335544320,10,{contentLabel:0}),P._37(603979776,11,{_buttons:1}),P._37(603979776,12,{_icons:1}),P._15(5,16384,null,0,j.a,[I.a,P.p,P.K],null,null),(e()(),P._40(6,2,["\n                        ","\n                    "]))],null,function(e,n){e(n,6,0,n.component.getDivider(n.parent.context.$implicit))})}function _(e){return P._42(0,[(e()(),P._16(0,0,null,null,15,null,null,null,null,null,null,null)),(e()(),P._40(-1,null,["\n\n                    "])),(e()(),P._11(16777216,null,null,1,null,m)),P._15(3,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,null,["\n\n                    "])),(e()(),P._16(5,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openEntry(e.context.$implicit.id)&&i}return i},N.b,N.a)),P._15(6,1097728,null,3,R.a,[F.a,I.a,P.p,P.K,[2,L.a]],null,null),P._37(335544320,13,{contentLabel:0}),P._37(603979776,14,{_buttons:1}),P._37(603979776,15,{_icons:1}),P._15(10,16384,null,0,H.a,[],null,null),(e()(),P._40(-1,2,["\n                        "])),(e()(),P._16(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),P._40(13,null,["",""])),(e()(),P._40(-1,2,["\n                    "])),(e()(),P._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,t.showDivider(n.context.$implicit,t.entries[n.context.index-1]))},function(e,n){e(n,5,0,n.context.$implicit.id==n.component.selectedEntry);e(n,13,0,n.context.$implicit.concept)})}function g(e){return P._42(0,[(e()(),P._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),P._15(1,16384,null,0,K.a,[I.a,P.p,P.K,W.a,q.l,B.a],null,null),(e()(),P._40(-1,null,["\n                "])),(e()(),P._11(16777216,null,null,1,null,_)),P._15(4,802816,null,0,G.j,[P.W,P.T,P.v],{ngForOf:[0,"ngForOf"]},null),(e()(),P._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.entries)},null)}function v(e){return P._42(0,[(e()(),P._16(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,z.b,z.a)),P._15(1,49152,null,0,V.a,[],{message:[0,"message"],icon:[1,"icon"]},null),P._32(131072,S.a,[w.a,P.i])],function(e,n){e(n,1,0,P._41(n,1,0,P._29(n,2).transform("addon.mod_glossary.noentriesfound")),"list")},null)}function y(e){return P._42(0,[(e()(),P._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,$.b,$.a)),P._15(1,1228800,null,2,Q.a,[W.a],null,null),P._37(335544320,16,{_mainButton:0}),P._37(603979776,17,{_fabLists:1}),P._15(4,212992,null,0,Y.a,[P.p,X.a],null,null),(e()(),P._40(-1,0,["\n            "])),(e()(),P._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openNewEntry()&&i}return i},J.b,J.a)),P._15(7,49152,[[16,4]],0,Z.a,[I.a,P.p,P.K],null,null),P._32(131072,S.a,[w.a,P.i]),(e()(),P._40(-1,0,["\n                "])),(e()(),P._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),P._15(11,147456,null,0,A.a,[I.a,P.p,P.K],{name:[0,"name"]},null),(e()(),P._40(-1,0,["\n            "])),(e()(),P._40(-1,0,["\n        "]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,P._41(n,6,0,P._29(n,8).transform("addon.mod_glossary.addentry")));e(n,10,0,P._29(n,11)._hidden)})}function b(e){return P._42(0,[P._37(402653184,1,{splitviewCtrl:0}),P._37(402653184,2,{content:0}),(e()(),P._40(-1,null,["\n"])),(e()(),P._16(3,0,null,null,31,"core-navbar-buttons",[["end",""]],null,null,null,ee.b,ee.a)),P._15(4,245760,null,1,ne.a,[P.p,te.a,ie.a],null,null),P._37(603979776,3,{buttons:1}),(e()(),P._40(-1,0,["\n    "])),(e()(),P._11(16777216,null,0,1,null,i)),P._15(8,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n    "])),(e()(),P._16(10,0,null,0,23,"core-context-menu",[],null,null,null,oe.b,oe.a)),P._15(11,245760,null,0,k.a,[w.a,re.a,P.p,ie.a,[2,le.a]],null,null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,o)),P._15(14,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,r)),P._15(17,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,l)),P._15(20,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,s)),P._15(23,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,a)),P._15(26,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,u)),P._15(29,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n        "])),(e()(),P._11(16777216,null,0,1,null,c)),P._15(32,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n    "])),(e()(),P._40(-1,0,["\n"])),(e()(),P._40(-1,null,["\n\n"])),(e()(),P._40(-1,null,["\n"])),(e()(),P._16(37,0,null,null,43,"core-split-view",[],null,null,null,se.b,se.a)),P._15(38,245760,[[1,4]],0,ae.a,[[2,ue.a],P.p,ce.a,W.a,w.a],null,null),(e()(),P._40(-1,0,["\n    "])),(e()(),P._16(40,0,null,0,39,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,de.b,de.a)),P._15(41,4374528,[[2,4]],0,X.a,[I.a,W.a,B.a,P.p,P.K,fe.a,pe.a,P.D,[2,he.a],[2,ue.a]],null,null),(e()(),P._40(-1,1,["\n        "])),(e()(),P._16(43,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.doRefresh(t)&&i}return i},null,null)),P._15(44,212992,null,0,me.a,[W.a,X.a,P.D,q.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),P._40(-1,null,["\n            "])),(e()(),P._16(46,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,_e.b,_e.a)),P._15(47,114688,null,0,ge.a,[me.a,I.a],{pullingText:[0,"pullingText"]},null),P._32(131072,S.a,[w.a,P.i]),(e()(),P._40(-1,null,["\n        "])),(e()(),P._40(-1,1,["\n\n        "])),(e()(),P._16(51,0,null,1,1,"core-course-module-description",[],null,null,null,ve.b,ve.a)),P._15(52,49152,null,0,ye.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),P._40(-1,1,["\n\n        "])),(e()(),P._40(-1,1,["\n        "])),(e()(),P._11(16777216,null,1,1,null,d)),P._15(56,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,1,["\n\n        "])),(e()(),P._11(16777216,null,1,1,null,f)),P._15(59,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,1,["\n\n        "])),(e()(),P._16(61,0,null,1,14,"core-loading",[["class","core-loading-center"]],null,null,null,be.b,be.a)),P._15(62,638976,null,0,Pe.a,[w.a,P.p,Ee.a,U.a],{hideUntil:[0,"hideUntil"]},null),(e()(),P._40(-1,0,["\n\n            "])),(e()(),P._11(16777216,null,0,1,null,h)),P._15(65,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n\n            "])),(e()(),P._11(16777216,null,0,1,null,g)),P._15(68,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n\n            "])),(e()(),P._11(16777216,null,0,1,null,v)),P._15(71,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,0,["\n\n            "])),(e()(),P._16(73,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.loadMoreEntries(t)&&i}return i},Ce.b,Ce.a)),P._15(74,49152,null,0,Ie.a,[],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),P._40(-1,0,["\n        "])),(e()(),P._40(-1,1,["\n\n        "])),(e()(),P._11(16777216,null,0,1,null,y)),P._15(78,16384,null,0,G.k,[P.W,P.T],{ngIf:[0,"ngIf"]},null),(e()(),P._40(-1,1,["\n    "])),(e()(),P._40(-1,0,["\n"])),(e()(),P._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,8,0,t.glossary),e(n,11,0);e(n,14,0,t.externalUrl);e(n,17,0,t.description);e(n,20,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,23,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,26,0,t.canAdd);e(n,29,0,t.prefetchStatusIcon);e(n,32,0,t.size),e(n,38,0);e(n,44,0,t.loaded);e(n,47,0,P._19(1,"",P._41(n,47,0,P._29(n,48).transform("core.pulltorefresh")),""));e(n,52,0,t.description,t.component,t.componentId);e(n,56,0,t.hasOffline);e(n,59,0,"search"==t.viewMode);e(n,62,0,t.loaded);e(n,65,0,"search"!=t.viewMode&&t.offlineEntries.length>0);e(n,68,0,t.entries.length>0);e(n,71,0,!t.entries.length&&!t.offlineEntries.length);e(n,74,0,t.canLoadMore,t.loadMoreError);e(n,78,0,t.canAdd)},function(e,n){e(n,40,0,P._29(n,41).statusbarPadding,P._29(n,41)._hasRefresher);e(n,43,0,"inactive"!==P._29(n,44).state,P._29(n,44)._top);e(n,46,0,P._29(n,47).r.state)})}t.d(n,"b",function(){return Oe}),n.c=b,t.d(n,"a",function(){return ke});var P=t(1),E=t(46),C=t(43),I=t(7),S=t(27),w=t(19),A=t(47),T=t(81),O=t(74),k=t(70),D=t(87),x=t(1373),M=t(449),U=t(3),N=t(31),R=t(21),F=t(20),L=t(28),H=t(33),K=t(78),W=t(15),q=t(39),B=t(32),j=t(108),G=t(8),z=t(120),V=t(109),$=t(355),Q=t(232),Y=t(291),X=t(24),J=t(356),Z=t(196),ee=t(89),ne=t(82),te=t(6),ie=t(5),oe=t(80),re=t(63),le=t(69),se=t(437),ae=t(35),ue=t(22),ce=t(67),de=t(185),fe=t(34),pe=t(107),he=t(37),me=t(145),_e=t(201),ge=t(159),ve=t(103),ye=t(91),be=t(49),Pe=t(48),Ee=t(13),Ce=t(440),Ie=t(276),Se=t(466),we=t(192),Ae=t(230),Te=t(295),Oe=P._14({encapsulation:2,styles:[],data:{}}),ke=P._12("addon-mod-glossary-index",Se.a,function(e){return P._42(0,[(e()(),P._16(0,0,null,null,1,"addon-mod-glossary-index",[],null,null,null,b,Oe)),P._15(1,245760,null,0,Se.a,[P.u,re.a,we.a,Ae.a,Te.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._15(1,147456,null,0,c.a,[d.a,u.p,u.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"bookmark")},function(e,n){e(n,0,0,u._29(n,1)._hidden)})}function o(e){return u._42(0,[(e()(),u._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,f.b,f.a)),u._15(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),u._32(131072,m.a,[_.a,u.i])],function(e,n){var t=n.component;e(n,1,0,u._41(n,1,0,u._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function r(e){return u._42(0,[(e()(),u._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},f.b,f.a)),u._15(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),u._32(131072,m.a,[_.a,u.i])],function(e,n){e(n,1,0,u._41(n,1,0,u._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function l(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},f.b,f.a)),u._15(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function s(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},f.b,f.a)),u._15(1,770048,null,0,p.a,[h.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",500)},null)}function a(e){return u._42(0,[(e()(),u._40(-1,null,["\n"])),(e()(),u._16(1,0,null,null,30,"core-navbar-buttons",[["end",""]],null,null,null,g.b,g.a)),u._15(2,245760,null,1,v.a,[u.p,y.a,b.a],null,null),u._37(603979776,1,{buttons:1}),(e()(),u._40(-1,0,["\n    "])),(e()(),u._16(5,0,null,0,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showToc(t)&&i}return i},P.b,P.a)),u._15(6,1097728,[[1,4]],0,E.a,[[8,""],d.a,u.p,u.K],null,null),(e()(),u._40(-1,0,["\n        "])),(e()(),u._11(16777216,null,0,1,null,i)),u._15(9,16384,null,0,C.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,0,["\n    "])),(e()(),u._40(-1,0,["\n    "])),(e()(),u._16(12,0,null,0,18,"core-context-menu",[],null,null,null,I.b,I.a)),u._15(13,245760,null,0,h.a,[_.a,S.a,u.p,b.a,[2,w.a]],null,null),(e()(),u._40(-1,0,["\n        "])),(e()(),u._11(16777216,null,0,1,null,o)),u._15(16,16384,null,0,C.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,0,["\n        "])),(e()(),u._11(16777216,null,0,1,null,r)),u._15(19,16384,null,0,C.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,0,["\n        "])),(e()(),u._16(21,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},f.b,f.a)),u._15(22,770048,null,0,p.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),u._32(131072,m.a,[_.a,u.i]),(e()(),u._40(-1,0,["\n        "])),(e()(),u._11(16777216,null,0,1,null,l)),u._15(26,16384,null,0,C.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,0,["\n        "])),(e()(),u._11(16777216,null,0,1,null,s)),u._15(29,16384,null,0,C.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,0,["\n    "])),(e()(),u._40(-1,0,["\n"])),(e()(),u._40(-1,null,["\n\n"])),(e()(),u._40(-1,null,["\n"])),(e()(),u._16(34,0,null,null,12,"core-loading",[["class","core-loading-center"]],null,null,null,A.b,A.a)),u._15(35,638976,null,0,T.a,[_.a,u.p,O.a,k.a],{hideUntil:[0,"hideUntil"]},null),(e()(),u._40(-1,0,["\n    "])),(e()(),u._16(37,0,null,0,8,"div",[["class","addon-mod-imscp-container"]],null,null,null,null,null)),(e()(),u._40(-1,null,["\n        "])),(e()(),u._16(39,0,null,null,2,"core-navigation-bar",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.loadItem(t)&&i}return i},D.b,D.a)),u._15(40,49152,null,0,x.a,[M.a],{previous:[0,"previous"],next:[1,"next"],info:[2,"info"],title:[3,"title"],component:[4,"component"],componentId:[5,"componentId"]},{action:"action"}),u._32(131072,m.a,[_.a,u.i]),(e()(),u._40(-1,null,["\n        "])),(e()(),u._16(43,0,null,null,1,"core-iframe",[],null,null,null,U.b,U.a)),u._15(44,638976,null,0,N.a,[y.a,R.a,b.a,F.c],{src:[0,"src"]},null),(e()(),u._40(-1,null,["\n    "])),(e()(),u._40(-1,0,["\n"])),(e()(),u._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,9,0,t.items.length),e(n,13,0);e(n,16,0,t.externalUrl);e(n,19,0,t.description);e(n,22,0,u._41(n,22,0,u._29(n,23).transform("core.refresh")),t.refreshIcon,!1,700);e(n,26,0,t.prefetchStatusIcon);e(n,29,0,t.size);e(n,35,0,t.loaded);e(n,40,0,t.previousItem,t.nextItem,t.description,u._41(n,40,3,u._29(n,41).transform("core.description")),t.component,t.componentId);e(n,44,0,t.src)},null)}t.d(n,"b",function(){return B}),n.c=a,t.d(n,"a",function(){return j});var u=t(1),c=t(47),d=t(7),f=t(81),p=t(74),h=t(70),m=t(27),_=t(19),g=t(89),v=t(82),y=t(6),b=t(5),P=t(46),E=t(43),C=t(8),I=t(80),S=t(63),w=t(69),A=t(49),T=t(48),O=t(13),k=t(3),D=t(708),x=t(359),M=t(11),U=t(350),N=t(255),R=t(38),F=t(75),L=t(467),H=t(235),K=t(16),W=t(10),q=t(366),B=u._14({encapsulation:2,styles:[],data:{}}),j=u._12("addon-mod-imscp-index",L.a,function(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"addon-mod-imscp-index",[],null,null,null,a,B)),u._15(1,245760,null,0,L.a,[u.u,H.a,K.a,W.a,S.a,q.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),se._32(131072,de.a,[fe.a,se.i])],function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),se._32(131072,de.a,[fe.a,se.i])],function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),se._32(131072,de.a,[fe.a,se.i])],function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),se._32(131072,de.a,[fe.a,se.i])],function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},ae.b,ae.a)),se._15(1,770048,null,0,ue.a,[ce.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return se._42(0,[(e()(),se._16(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),se._40(-1,null,["\n                    "])),(e()(),se._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(3,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"]},null),(e()(),se._40(-1,null,["\n                    "])),(e()(),se._16(5,0,null,null,1,"core-format-text",[],null,null,null,null,null)),se._15(6,540672,null,0,me.a,[se.p,_e.a,ge.a,ve.a,fe.a,ye.a,be.a,Pe.a,Ee.a,Ce.a,Ie.a,Se.a,[2,we.a],[2,Ae.a],[2,Te.a],Oe.a,ke.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),se._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,"information-circle");e(n,6,0,t.preventMessages[0].message,t.component,t.componentId)},function(e,n){e(n,2,0,se._29(n,3)._hidden)})}function c(e){return se._42(0,[(e()(),se._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),se._40(-1,null,["\n                    "])),(e()(),se._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(3,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"]},null),(e()(),se._40(4,null,["\n                    ","\n                "])),se._33(5,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,se._29(n,3)._hidden);e(n,4,0,se._41(n,4,0,se._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function d(e){return se._42(0,[(e()(),se._16(0,0,null,null,47,"ion-card",[],null,null,null,null,null)),se._15(1,16384,null,0,De.a,[he.a,se.p,se.K],null,null),(e()(),se._40(-1,null,["\n                    "])),(e()(),se._16(3,0,null,null,43,"form",[["ion-list",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;if("submit"===n){i=!1!==se._29(e,5).onSubmit(t)&&i}if("reset"===n){i=!1!==se._29(e,5).onReset()&&i}if("ngSubmit"===n){i=!1!==o.submitPassword(t,se._29(e,25))&&i}return i},null,null)),se._15(4,16384,null,0,xe.w,[],null,null),se._15(5,4210688,null,0,xe.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),se._35(2048,null,xe.b,null,[xe.p]),se._15(7,16384,null,0,xe.o,[xe.b],null,null),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(9,0,null,null,20,"ion-item",[["class","item item-block"]],null,null,null,Me.b,Me.a)),se._15(10,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,5,{contentLabel:0}),se._37(603979776,6,{_buttons:1}),se._37(603979776,7,{_icons:1}),se._15(14,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(16,0,null,3,12,"core-show-password",[["item-content",""]],null,null,null,Le.b,Le.a)),se._15(17,4308992,null,0,He.a,[se.p,be.a,ge.a,ye.a],{name:[0,"name"]},null),(e()(),se._40(-1,0,["\n                                "])),(e()(),se._16(19,0,null,0,3,"ion-label",[],null,null,null,null,null)),se._15(20,16384,[[5,4]],0,Ke.a,[he.a,se.p,se.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),se._40(21,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,0,["\n                                "])),(e()(),se._16(24,0,null,0,3,"ion-input",[["name","password"],["type","password"]],null,null,null,We.b,We.a)),se._15(25,5423104,[["passwordinput",4]],0,qe.a,[he.a,ye.a,Ne.a,Be.a,se.p,se.K,[2,Ae.a],[2,Ue.a],[2,xe.m],je.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),se._32(131072,de.a,[fe.a,se.i]),se._15(27,81920,null,0,Ge.a,[se.p,ge.a,be.a,[2,we.a]],null,null),(e()(),se._40(-1,0,["\n                            "])),(e()(),se._40(-1,2,["\n                        "])),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(31,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,Me.b,Me.a)),se._15(32,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,8,{contentLabel:0}),se._37(603979776,9,{_buttons:1}),se._37(603979776,10,{_icons:1}),se._15(36,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(38,0,null,2,6,"button",[["block",""],["icon-end",""],["ion-button",""],["type","submit"]],null,null,null,ze.b,ze.a)),se._15(39,1097728,[[9,4]],0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(40,0,["\n                                ","\n                                "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._16(42,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(43,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),se._40(-1,0,["\n                            "])),(e()(),se._40(-1,2,["\n                        "])),(e()(),se._40(-1,null,["\n                    "])),(e()(),se._40(-1,null,["\n                "]))],function(e,n){e(n,17,0,"password");e(n,25,0,"password",!1,se._19(1,"",se._41(n,25,2,se._29(n,26).transform("core.login.password")),"")),e(n,27,0);e(n,39,0,"");e(n,43,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,3,0,se._29(n,7).ngClassUntouched,se._29(n,7).ngClassTouched,se._29(n,7).ngClassPristine,se._29(n,7).ngClassDirty,se._29(n,7).ngClassValid,se._29(n,7).ngClassInvalid,se._29(n,7).ngClassPending);e(n,21,0,se._41(n,21,0,se._29(n,22).transform("addon.mod_lesson.enterpassword")));e(n,40,0,se._41(n,40,0,se._29(n,41).transform("addon.mod_lesson.continue")));e(n,42,0,se._29(n,43)._hidden)})}function f(e){return se._42(0,[(e()(),se._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,11,{contentLabel:0}),se._37(603979776,12,{_buttons:1}),se._37(603979776,13,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(8,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),se._40(9,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.review()&&i}return i},ze.b,ze.a)),se._15(13,1097728,[[12,4]],0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(14,0,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,2,["\n                        "]))],function(e,n){e(n,13,0,"")},function(e,n){e(n,9,0,se._41(n,9,0,se._29(n,10).transform("addon.mod_lesson.retakefinishedinsync")));e(n,14,0,se._41(n,14,0,se._29(n,15).transform("addon.mod_lesson.review")))})}function p(e){return se._42(0,[(e()(),se._16(0,0,null,null,36,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,14,{contentLabel:0}),se._37(603979776,15,{_buttons:1}),se._37(603979776,16,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(11,0,null,2,24,"ion-grid",[["class","grid"]],null,null,null,null,null)),se._15(12,16384,null,0,$e.a,[],null,null),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._16(14,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(15,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._16(17,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),se._15(18,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(20,0,null,null,3,"a",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.start(!1)&&i}return i},ze.b,ze.a)),se._15(21,1097728,null,0,Ve.a,[[8,""],he.a,se.p,se.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),se._40(22,0,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._16(26,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),se._15(27,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(29,0,null,null,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.start(!0)&&i}return i},ze.b,ze.a)),se._15(30,1097728,null,0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(31,0,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,null,["\n                            "])),(e()(),se._40(-1,2,["\n                        "]))],function(e,n){e(n,21,0,"light","");e(n,30,0,"")},function(e,n){e(n,8,0,se._41(n,8,0,se._29(n,9).transform("addon.mod_lesson.youhaveseen")));e(n,22,0,se._41(n,22,0,se._29(n,23).transform("core.no")));e(n,31,0,se._41(n,31,0,se._29(n,32).transform("core.yes")))})}function h(e){return se._42(0,[(e()(),se._16(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,17,{contentLabel:0}),se._37(603979776,18,{_buttons:1}),se._37(603979776,19,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(11,0,null,2,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.start(!1)&&i}return i},ze.b,ze.a)),se._15(12,1097728,[[18,4]],0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(13,0,["\n                                ","\n                                "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._16(15,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(16,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),se._40(-1,0,["\n                            "])),(e()(),se._40(-1,2,["\n                        "]))],function(e,n){e(n,12,0,"");e(n,16,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,8,0,se._41(n,8,0,se._29(n,9).transform("addon.mod_lesson.leftduringtimed")));e(n,13,0,se._41(n,13,0,se._29(n,14).transform("addon.mod_lesson.continue")));e(n,15,0,se._29(n,16)._hidden)})}function m(e){return se._42(0,[(e()(),se._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,20,{contentLabel:0}),se._37(603979776,21,{_buttons:1}),se._37(603979776,22,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,2,["\n                        "]))],null,function(e,n){e(n,8,0,se._41(n,8,0,se._29(n,9).transform("addon.mod_lesson.leftduringtimednoretake")))})}function _(e){return se._42(0,[(e()(),se._16(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.start(!1)&&i}return i},ze.b,ze.a)),se._15(1,1097728,[[24,4]],0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(2,0,["\n                                ","\n                                "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._16(4,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(5,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),se._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,2,0,se._41(n,2,0,se._29(n,3).transform("core.start")));e(n,4,0,se._29(n,5)._hidden)})}function g(e){return se._42(0,[(e()(),se._16(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.start(!1)&&i}return i},ze.b,ze.a)),se._15(1,1097728,[[24,4]],0,Ve.a,[[8,""],he.a,se.p,se.K],{block:[0,"block"]},null),(e()(),se._40(2,0,["\n                                ","\n                                "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),se._15(5,147456,null,0,pe.a,[he.a,se.p,se.K],{name:[0,"name"]},null),(e()(),se._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"search")},function(e,n){e(n,2,0,se._41(n,2,0,se._29(n,3).transform("addon.mod_lesson.preview")));e(n,4,0,se._29(n,5)._hidden)})}function v(e){return se._42(0,[(e()(),se._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,23,{contentLabel:0}),se._37(603979776,24,{_buttons:1}),se._37(603979776,25,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._11(16777216,[[3,2]],2,1,null,_)),se._15(9,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._11(16777216,[[3,2]],2,1,null,g)),se._15(12,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,9,0,!t.canManage);e(n,12,0,t.canManage)},null)}function y(e){return se._42(0,[(e()(),se._16(0,0,null,null,17,"ion-list",[],null,null,null,null,null)),se._15(1,16384,null,0,Je.a,[he.a,se.p,se.K,ye.a,Ze.l,je.a],null,null),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._11(16777216,[[3,2]],null,1,null,f)),se._15(4,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._11(16777216,[[3,2]],null,1,null,p)),se._15(7,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._11(16777216,[[3,2]],null,1,null,h)),se._15(10,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._11(16777216,[[3,2]],null,1,null,m)),se._15(13,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._11(16777216,[[3,2]],null,1,null,v)),se._15(16,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,4,0,t.retakeToReview);e(n,7,0,t.leftDuringTimed&&!t.lesson.timelimit);e(n,10,0,t.leftDuringTimed&&t.lesson.timelimit&&t.lesson.retake);e(n,13,0,t.leftDuringTimed&&t.lesson.timelimit&&!t.lesson.retake);e(n,16,0,!t.leftDuringTimed)},null)}function b(e){return se._42(0,[(e()(),se._40(-1,null,["\n                "])),(e()(),se._16(1,0,null,null,1,"core-course-module-description",[],null,null,null,en.b,en.a)),se._15(2,49152,null,0,nn.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),se._40(-1,null,["\n\n                "])),(e()(),se._40(-1,null,["\n                "])),(e()(),se._11(16777216,[[3,2]],null,1,null,u)),se._15(6,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                "])),(e()(),se._40(-1,null,["\n                "])),(e()(),se._11(16777216,[[3,2]],null,1,null,c)),se._15(10,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                "])),(e()(),se._40(-1,null,["\n                "])),(e()(),se._11(16777216,[[3,2]],null,1,null,d)),se._15(14,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                "])),(e()(),se._16(16,0,null,null,5,"core-loading",[],null,null,null,tn.b,tn.a)),se._15(17,638976,null,0,on.a,[fe.a,se.p,ke.a,be.a],{hideUntil:[0,"hideUntil"]},null),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[3,2]],0,1,null,y)),se._15(20,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n                "])),(e()(),se._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,2,0,t.description,t.component,t.componentId);e(n,6,0,t.lesson&&t.preventMessages&&t.preventMessages.length);e(n,10,0,t.hasOffline);e(n,14,0,t.askPassword);e(n,17,0,!t.showSpinner);e(n,20,0,t.lesson&&(!t.preventMessages||!t.preventMessages.length))},null)}function P(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),se._15(1,16384,[[28,4]],0,Ke.a,[he.a,se.p,se.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),se._40(2,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],function(e,n){e(n,1,0,"addon-mod_lesson-groupslabel")},function(e,n){e(n,2,0,se._41(n,2,0,se._29(n,3).transform("core.groupsseparate")))})}function E(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),se._15(1,16384,[[28,4]],0,Ke.a,[he.a,se.p,se.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),se._40(2,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],function(e,n){e(n,1,0,"addon-mod_lesson-groupslabel")},function(e,n){e(n,2,0,se._41(n,2,0,se._29(n,3).transform("core.groupsvisible")))})}function C(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),se._15(1,16384,[[31,4]],0,rn.a,[se.p],{value:[0,"value"]},null),(e()(),se._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function I(e){return se._42(0,[(e()(),se._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(603979776,28,{contentLabel:0}),se._37(603979776,29,{_buttons:1}),se._37(603979776,30,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                        "])),(e()(),se._11(16777216,[[26,2]],1,1,null,P)),se._15(8,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,2,["\n                        "])),(e()(),se._11(16777216,[[26,2]],1,1,null,E)),se._15(11,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,2,["\n                        "])),(e()(),se._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-mod_lesson-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==se._29(e,14)._click(t)&&i}if("keyup.space"===n){i=!1!==se._29(e,14)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.group=t)&&i}if("ionChange"===n){i=!1!==o.setGroup(o.group)&&i}return i},ln.b,ln.a)),se._15(14,1228800,null,1,sn.a,[Be.a,Ne.a,he.a,se.p,se.K,[2,Ue.a],an.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),se._37(603979776,31,{options:1}),se._35(1024,null,xe.l,function(e){return[e]},[sn.a]),se._15(17,671744,null,0,xe.q,[[8,null],[8,null],[8,null],[2,xe.l]],{model:[0,"model"]},{update:"ngModelChange"}),se._35(2048,null,xe.m,null,[xe.q]),se._15(19,16384,null,0,xe.n,[xe.m],null,null),(e()(),se._40(-1,null,["\n                            "])),(e()(),se._11(16777216,[[26,2]],null,1,null,C)),se._15(22,802816,null,0,Xe.j,[se.W,se.T,se.v],{ngForOf:[0,"ngForOf"]},null),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._40(-1,2,["\n                    "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.group);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,se._29(n,14)._disabled,se._29(n,19).ngClassUntouched,se._29(n,19).ngClassTouched,se._29(n,19).ngClassPristine,se._29(n,19).ngClassDirty,se._29(n,19).ngClassValid,se._29(n,19).ngClassInvalid,se._29(n,19).ngClassPending)})}function S(e){return se._42(0,[(e()(),se._16(0,0,null,null,4,"core-empty-box",[["icon","stats"]],null,null,null,un.b,un.a)),se._15(1,49152,null,0,cn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,0,["\n                    "]))],function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("addon.mod_lesson.nolessonattemptsgroup",e(n,2,0,t.selectedGroupName))),"stats")},null)}function w(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,un.b,un.a)),se._15(1,49152,null,0,cn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,0,["\n                    "]))],function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.nolessonattempts")),"stats")},null)}function A(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.avescore))))})}function T(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function O(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.highscore))))})}function k(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function D(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.lowscore))))})}function x(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function M(e){return se._42(0,[(e()(),se._16(0,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,32,{contentLabel:0}),se._37(603979776,33,{_buttons:1}),se._37(603979776,34,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                                "])),(e()(),se._16(7,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(8,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._16(10,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(11,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(13,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(14,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,A)),se._15(18,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,T)),se._15(21,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(24,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(25,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(27,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(28,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,O)),se._15(32,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,k)),se._15(35,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(38,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(39,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(41,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(42,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,D)),se._15(46,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,x)),se._15(49,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,2,["\n                            "]))],function(e,n){var t=n.component;e(n,18,0,t.overview.numofattempts>0);e(n,21,0,t.overview.numofattempts<=0);e(n,32,0,null!=t.overview.highscore);e(n,35,0,null==t.overview.highscore);e(n,46,0,null!=t.overview.lowscore);e(n,49,0,null==t.overview.lowscore)},function(e,n){e(n,14,0,se._41(n,14,0,se._29(n,15).transform("addon.mod_lesson.averagescore")));e(n,28,0,se._41(n,28,0,se._29(n,29).transform("addon.mod_lesson.highscore")));e(n,42,0,se._41(n,42,0,se._29(n,43).transform("addon.mod_lesson.lowscore")))})}function U(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.avetimeReadable)})}function N(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function R(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.hightimeReadable)})}function F(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function L(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.lowtimeReadable)})}function H(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function K(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.avescore))))})}function W(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function q(e){return se._42(0,[(e()(),se._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(1,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(4,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,K)),se._15(8,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,W)),se._15(11,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,t.overview.numofattempts>0);e(n,11,0,t.overview.numofattempts<=0)},function(e,n){e(n,4,0,se._41(n,4,0,se._29(n,5).transform("addon.mod_lesson.averagescore")))})}function B(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.avetimeReadable)})}function j(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function G(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.highscore))))})}function z(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function V(e){return se._42(0,[(e()(),se._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(1,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(4,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,G)),se._15(8,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,z)),se._15(11,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,null!=t.overview.highscore);e(n,11,0,null==t.overview.highscore)},function(e,n){e(n,4,0,se._41(n,4,0,se._29(n,5).transform("addon.mod_lesson.highscore")))})}function $(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.hightimeReadable)})}function Q(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function Y(e){return se._42(0,[(e()(),se._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._33(2,{$a:0}),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){var t=n.component;e(n,1,0,se._41(n,1,0,se._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.lowscore))))})}function X(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function J(e){return se._42(0,[(e()(),se._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(1,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(4,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,Y)),se._15(8,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,X)),se._15(11,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,null!=t.overview.lowscore);e(n,11,0,null==t.overview.lowscore)},function(e,n){e(n,4,0,se._41(n,4,0,se._29(n,5).transform("addon.mod_lesson.lowscore")))})}function Z(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.lowtimeReadable)})}function ee(e){return se._42(0,[(e()(),se._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),se._40(1,null,["",""])),se._32(131072,de.a,[fe.a,se.i])],null,function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function ne(e){return se._42(0,[(e()(),se._16(0,0,null,null,161,"ion-card",[["class","addon-mod_lesson-lessonstats"]],null,null,null,null,null)),se._15(1,16384,null,0,De.a,[he.a,se.p,se.K],null,null),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),se._15(4,16384,null,0,dn.a,[he.a,se.p,se.K],null,null),(e()(),se._40(5,null,["\n                            ","\n                        "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(9,0,null,null,59,"ion-list",[["class","hidden-phone"]],null,null,null,null,null)),se._15(10,16384,null,0,Je.a,[he.a,se.p,se.K,ye.a,Ze.l,je.a],null,null),(e()(),se._40(-1,null,["\n                            "])),(e()(),se._11(16777216,[[26,2]],null,1,null,M)),se._15(13,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                            "])),(e()(),se._16(15,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(16,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,35,{contentLabel:0}),se._37(603979776,36,{_buttons:1}),se._37(603979776,37,{_icons:1}),se._15(20,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                                "])),(e()(),se._16(22,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(23,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._16(25,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(26,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(28,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(29,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,U)),se._15(33,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,N)),se._15(36,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(39,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(40,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(42,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(43,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,R)),se._15(47,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,F)),se._15(50,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(53,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),se._15(54,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(56,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(57,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,L)),se._15(61,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,H)),se._15(64,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(71,0,null,null,89,"ion-list",[["class","hidden-tablet"]],null,null,null,null,null)),se._15(72,16384,null,0,Je.a,[he.a,se.p,se.K,ye.a,Ze.l,je.a],null,null),(e()(),se._40(-1,null,["\n                            "])),(e()(),se._16(74,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(75,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,38,{contentLabel:0}),se._37(603979776,39,{_buttons:1}),se._37(603979776,40,{_icons:1}),se._15(79,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                                "])),(e()(),se._16(81,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(82,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._11(16777216,[[26,2]],null,1,null,q)),se._15(85,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(87,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),se._15(88,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(90,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(91,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,B)),se._15(95,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,j)),se._15(98,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,null,["\n\n                            "])),(e()(),se._16(103,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(104,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,41,{contentLabel:0}),se._37(603979776,42,{_buttons:1}),se._37(603979776,43,{_icons:1}),se._15(108,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                                "])),(e()(),se._16(110,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(111,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._11(16777216,[[26,2]],null,1,null,V)),se._15(114,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(116,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),se._15(117,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(119,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(120,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,$)),se._15(124,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,Q)),se._15(127,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,null,["\n\n                            "])),(e()(),se._16(132,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Me.b,Me.a)),se._15(133,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,44,{contentLabel:0}),se._37(603979776,45,{_buttons:1}),se._37(603979776,46,{_icons:1}),se._15(137,16384,null,0,Fe.a,[],null,null),(e()(),se._40(-1,2,["\n                                "])),(e()(),se._16(139,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),se._15(140,16384,null,0,Qe.a,[],null,null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._11(16777216,[[26,2]],null,1,null,J)),se._15(143,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n\n                                    "])),(e()(),se._16(145,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),se._15(146,16384,null,0,Ye.a,[],null,null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._16(148,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),se._40(149,null,["",""])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,Z)),se._15(153,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,ee)),se._15(156,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,null,["\n                                    "])),(e()(),se._40(-1,null,["\n                                "])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,13,0,t.overview.lessonscored);e(n,33,0,null!=t.overview.avetime&&t.overview.numofattempts);e(n,36,0,null==t.overview.avetime||!t.overview.numofattempts);e(n,47,0,null!=t.overview.hightime);e(n,50,0,null==t.overview.hightime);e(n,61,0,null!=t.overview.lowtime);e(n,64,0,null==t.overview.lowtime);e(n,85,0,t.overview.lessonscored);e(n,95,0,null!=t.overview.avetime&&t.overview.numofattempts);e(n,98,0,null==t.overview.avetime||!t.overview.numofattempts);e(n,114,0,t.overview.lessonscored);e(n,124,0,null!=t.overview.hightime);e(n,127,0,null==t.overview.hightime);e(n,143,0,t.overview.lessonscored);e(n,153,0,null!=t.overview.lowtime);e(n,156,0,null==t.overview.lowtime)},function(e,n){var t=n.component;e(n,5,0,se._41(n,5,0,se._29(n,6).transform("addon.mod_lesson.lessonstats")));e(n,29,0,se._41(n,29,0,se._29(n,30).transform("addon.mod_lesson.averagetime")));e(n,43,0,se._41(n,43,0,se._29(n,44).transform("addon.mod_lesson.hightime")));e(n,57,0,se._41(n,57,0,se._29(n,58).transform("addon.mod_lesson.lowtime")));e(n,87,0,!!t.overview.lessonscored||null);e(n,91,0,se._41(n,91,0,se._29(n,92).transform("addon.mod_lesson.averagetime")));e(n,116,0,!!t.overview.lessonscored||null);e(n,120,0,se._41(n,120,0,se._29(n,121).transform("addon.mod_lesson.hightime")));e(n,145,0,!!t.overview.lessonscored||null);e(n,149,0,se._41(n,149,0,se._29(n,150).transform("addon.mod_lesson.lowtime")))})}function te(e){return se._42(0,[(e()(),se._16(0,0,null,null,19,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==se._29(e,6).onClick()&&i}return i},Me.b,Me.a)),se._15(1,1097728,null,3,Ue.a,[Ne.a,he.a,se.p,se.K,[2,Re.a]],null,null),se._37(335544320,47,{contentLabel:0}),se._37(603979776,48,{_buttons:1}),se._37(603979776,49,{_icons:1}),se._15(5,16384,null,0,Fe.a,[],null,null),se._15(6,16384,null,0,fn.a,[[2,we.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),se._33(7,{courseId:0,lessonId:1,userId:2}),se._15(8,1064960,null,0,pn.a,[fn.a,[2,an.a]],null,null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,hn.b,hn.a)),se._15(11,16384,null,0,mn.a,[],null,null),se._15(12,770048,null,0,_n.a,[we.a,_e.a,be.a,Ie.a,ke.a],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),se._40(15,null,["",""])),(e()(),se._40(-1,2,["\n                            "])),(e()(),se._16(17,0,null,2,1,"core-progress-bar",[],null,null,null,gn.b,gn.a)),se._15(18,573440,null,0,vn.a,[yn.c],{progress:[0,"progress"]},null),(e()(),se._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,6,0,"AddonModLessonUserRetakePage",e(n,7,0,t.courseId,t.lesson.id,n.context.$implicit.id));e(n,12,0,n.context.$implicit,n.context.$implicit.id,t.courseId);e(n,18,0,n.context.$implicit.bestgrade)},function(e,n){e(n,0,0,se._29(n,8)._href);e(n,15,0,n.context.$implicit.fullname)})}function ie(e){return se._42(0,[(e()(),se._16(0,0,null,null,10,"ion-card",[],null,null,null,null,null)),se._15(1,16384,null,0,De.a,[he.a,se.p,se.K],null,null),(e()(),se._40(-1,null,["\n                        "])),(e()(),se._16(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),se._15(4,16384,null,0,dn.a,[he.a,se.p,se.K],null,null),(e()(),se._40(5,null,["\n                            ","\n                        "])),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n\n                        "])),(e()(),se._11(16777216,[[26,2]],null,1,null,te)),se._15(9,802816,null,0,Xe.j,[se.W,se.T,se.v],{ngForOf:[0,"ngForOf"]},null),(e()(),se._40(-1,null,["\n                    "]))],function(e,n){e(n,9,0,n.component.overview.students)},function(e,n){e(n,5,0,se._41(n,5,0,se._29(n,6).transform("addon.mod_lesson.overview")))})}function oe(e){return se._42(0,[(e()(),se._40(-1,null,["\n                "])),(e()(),se._16(1,0,null,null,21,"core-loading",[],null,null,null,tn.b,tn.a)),se._15(2,638976,null,0,on.a,[fe.a,se.p,ke.a,be.a],{hideUntil:[0,"hideUntil"]},null),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[26,2]],0,1,null,I)),se._15(6,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n\n                    "])),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[26,2]],0,1,null,S)),se._15(10,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[26,2]],0,1,null,w)),se._15(13,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n\n                    "])),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[26,2]],0,1,null,ne)),se._15(17,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n\n                    "])),(e()(),se._40(-1,0,["\n                    "])),(e()(),se._11(16777216,[[26,2]],0,1,null,ie)),se._15(21,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n                "])),(e()(),se._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,2,0,t.reportLoaded);e(n,6,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,10,0,!t.overview&&t.selectedGroupName);e(n,13,0,!t.overview&&!t.selectedGroupName);e(n,17,0,t.overview);e(n,21,0,t.overview)},null)}function re(e){return se._42(0,[(e()(),se._16(0,0,null,null,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var i=!0;if("ionSelect"===n){i=!1!==e.component.reportsSelected()&&i}return i},bn.b,bn.a)),se._15(1,245760,null,2,Pn.a,[En.a,se.p,ge.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),se._37(603979776,26,{template:0}),se._37(335544320,27,{scroll:0}),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n            "])),(e()(),se._11(0,[[26,2]],null,0,null,oe)),(e()(),se._40(-1,null,["\n        "]))],function(e,n){e(n,1,0,se._41(n,1,0,se._29(n,4).transform("addon.mod_lesson.reports")))},null)}function le(e){return se._42(0,[se._37(402653184,1,{tabsComponent:0}),(e()(),se._40(-1,null,["\n"])),(e()(),se._16(2,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Cn.b,Cn.a)),se._15(3,245760,null,1,In.a,[se.p,Ee.a,ge.a],null,null),se._37(603979776,2,{buttons:1}),(e()(),se._40(-1,0,["\n    "])),(e()(),se._16(6,0,null,0,20,"core-context-menu",[],null,null,null,Sn.b,Sn.a)),se._15(7,245760,null,0,ce.a,[fe.a,wn.a,se.p,ge.a,[2,Pn.a]],null,null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,i)),se._15(10,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,o)),se._15(13,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,r)),se._15(16,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,l)),se._15(19,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,s)),se._15(22,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,a)),se._15(25,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n    "])),(e()(),se._40(-1,0,["\n"])),(e()(),se._40(-1,null,["\n\n"])),(e()(),se._40(-1,null,["\n"])),(e()(),se._16(30,0,null,null,20,"core-loading",[["class","core-loading-center"]],null,null,null,tn.b,tn.a)),se._15(31,638976,null,0,on.a,[fe.a,se.p,ke.a,be.a],{hideUntil:[0,"hideUntil"]},null),(e()(),se._40(-1,0,["\n\n    "])),(e()(),se._16(33,0,null,0,16,"core-tabs",[],null,null,null,An.b,An.a)),se._15(34,4964352,[[1,4]],0,En.a,[se.p,Ae.a,ge.a,Ie.a,ye.a,fe.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),se._40(-1,0,["\n        "])),(e()(),se._40(-1,0,["\n        "])),(e()(),se._16(37,0,null,0,7,"core-tab",[],null,null,null,bn.b,bn.a)),se._15(38,245760,null,2,Pn.a,[En.a,se.p,ge.a],{title:[0,"title"]},null),se._37(603979776,3,{template:0}),se._37(335544320,4,{scroll:0}),se._32(131072,de.a,[fe.a,se.i]),(e()(),se._40(-1,null,["\n            "])),(e()(),se._11(0,[[3,2]],null,0,null,b)),(e()(),se._40(-1,null,["\n        "])),(e()(),se._40(-1,0,["\n\n        "])),(e()(),se._40(-1,0,["\n        "])),(e()(),se._11(16777216,null,0,1,null,re)),se._15(48,16384,null,0,Xe.k,[se.W,se.T],{ngIf:[0,"ngIf"]},null),(e()(),se._40(-1,0,["\n    "])),(e()(),se._40(-1,0,["\n"])),(e()(),se._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0),e(n,7,0);e(n,10,0,t.externalUrl);e(n,13,0,t.description);e(n,16,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,19,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,22,0,t.prefetchStatusIcon);e(n,25,0,t.size);e(n,31,0,t.loaded);e(n,34,0,t.selectedTab,t.loaded);e(n,38,0,se._41(n,38,0,se._29(n,41).transform("addon.mod_lesson.preview")));e(n,48,0,t.canViewReports)},null)}t.d(n,"b",function(){return Rn}),n.c=le,t.d(n,"a",function(){return Fn});var se=t(1),ae=t(81),ue=t(74),ce=t(70),de=t(27),fe=t(19),pe=t(47),he=t(7),me=t(42),_e=t(2),ge=t(5),ve=t(11),ye=t(15),be=t(3),Pe=t(26),Ee=t(6),Ce=t(17),Ie=t(10),Se=t(18),we=t(22),Ae=t(24),Te=t(35),Oe=t(38),ke=t(13),De=t(87),xe=t(23),Me=t(31),Ue=t(21),Ne=t(20),Re=t(28),Fe=t(33),Le=t(671),He=t(343),Ke=t(62),We=t(94),qe=t(79),Be=t(34),je=t(32),Ge=t(340),ze=t(46),Ve=t(43),$e=t(142),Qe=t(114),Ye=t(113),Xe=t(8),Je=t(78),Ze=t(39),en=t(103),nn=t(91),tn=t(49),on=t(48),rn=t(92),ln=t(111),sn=t(93),an=t(52),un=t(120),cn=t(109),dn=t(281),fn=t(224),pn=t(250),hn=t(222),mn=t(186),_n=t(187),gn=t(448),vn=t(282),yn=t(75),bn=t(442),Pn=t(69),En=t(149),Cn=t(89),In=t(82),Sn=t(80),wn=t(63),An=t(441),Tn=t(468),On=t(143),kn=t(68),Dn=t(256),xn=t(287),Mn=t(296),Un=t(25),Nn=t(45),Rn=se._14({encapsulation:2,styles:[],data:{}}),Fn=se._12("addon-mod-lesson-index",Tn.a,function(e){return se._42(0,[(e()(),se._16(0,0,null,null,1,"addon-mod-lesson-index",[],null,null,null,le,Rn)),se._15(1,245760,null,0,Tn.a,[se.u,On.a,[2,Ae.a],kn.a,Dn.a,xn.a,be.a,Mn.a,we.a,Un.a,Nn.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return s._42(0,[(e()(),s._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,a.b,a.a)),s._15(1,770048,null,0,u.a,[c.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),s._32(131072,d.a,[f.a,s.i])],function(e,n){var t=n.component;e(n,1,0,s._41(n,1,0,s._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return s._42(0,[(e()(),s._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},a.b,a.a)),s._15(1,770048,null,0,u.a,[c.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),s._32(131072,d.a,[f.a,s.i])],function(e,n){e(n,1,0,s._41(n,1,0,s._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return s._42(0,[(e()(),s._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},a.b,a.a)),s._15(1,770048,null,0,u.a,[c.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),s._32(131072,d.a,[f.a,s.i])],function(e,n){var t=n.component;e(n,1,0,s._41(n,1,0,s._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return s._42(0,[(e()(),s._40(-1,null,["\n"])),(e()(),s._16(1,0,null,null,16,"core-navbar-buttons",[["end",""]],null,null,null,p.b,p.a)),s._15(2,245760,null,1,h.a,[s.p,m.a,_.a],null,null),s._37(603979776,1,{buttons:1}),(e()(),s._40(-1,0,["\n    "])),(e()(),s._16(5,0,null,0,11,"core-context-menu",[],null,null,null,g.b,g.a)),s._15(6,245760,null,0,c.a,[f.a,v.a,s.p,_.a,[2,y.a]],null,null),(e()(),s._40(-1,0,["\n        "])),(e()(),s._11(16777216,null,0,1,null,i)),s._15(9,16384,null,0,b.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,0,["\n        "])),(e()(),s._11(16777216,null,0,1,null,o)),s._15(12,16384,null,0,b.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,0,["\n        "])),(e()(),s._11(16777216,null,0,1,null,r)),s._15(15,16384,null,0,b.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(e()(),s._40(-1,0,["\n    "])),(e()(),s._40(-1,0,["\n"])),(e()(),s._40(-1,null,["\n\n"])),(e()(),s._40(-1,null,["\n"])),(e()(),s._16(20,0,null,null,16,"core-loading",[["class","core-loading-center"]],null,null,null,P.b,P.a)),s._15(21,638976,null,0,E.a,[f.a,s.p,C.a,I.a],{hideUntil:[0,"hideUntil"]},null),(e()(),s._40(-1,0,["\n\n    "])),(e()(),s._16(23,0,null,0,1,"core-course-module-description",[],null,null,null,S.b,S.a)),s._15(24,49152,null,0,w.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),s._40(-1,0,["\n\n    "])),(e()(),s._16(26,0,null,0,9,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),s._40(-1,null,["\n        "])),(e()(),s._16(28,0,null,null,6,"button",[["block",""],["icon-left",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.launch()&&i}return i},A.b,A.a)),s._15(29,1097728,null,0,T.a,[[8,""],O.a,s.p,s.K],{block:[0,"block"]},null),(e()(),s._40(-1,0,["\n            "])),(e()(),s._16(31,0,null,0,1,"ion-icon",[["name","link"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._15(32,147456,null,0,k.a,[O.a,s.p,s.K],{name:[0,"name"]},null),(e()(),s._40(33,0,["\n            ","\n        "])),s._32(131072,d.a,[f.a,s.i]),(e()(),s._40(-1,null,["\n    "])),(e()(),s._40(-1,0,["\n"])),(e()(),s._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&t.isOnline);e(n,21,0,t.loaded);e(n,24,0,t.description,t.component,t.componentId);e(n,29,0,"");e(n,32,0,"link")},function(e,n){e(n,31,0,s._29(n,32)._hidden);e(n,33,0,s._41(n,33,0,s._29(n,34).transform("addon.mod_lti.launchactivity")))})}t.d(n,"b",function(){return U}),n.c=l,t.d(n,"a",function(){return N});var s=t(1),a=t(81),u=t(74),c=t(70),d=t(27),f=t(19),p=t(89),h=t(82),m=t(6),_=t(5),g=t(80),v=t(63),y=t(69),b=t(8),P=t(49),E=t(48),C=t(13),I=t(3),S=t(103),w=t(91),A=t(46),T=t(43),O=t(7),k=t(47),D=t(469),x=t(24),M=t(297),U=s._14({encapsulation:2,styles:[],data:{}}),N=s._12("addon-mod-lti-index",D.a,function(e){return s._42(0,[(e()(),s._16(0,0,null,null,1,"addon-mod-lti-index",[],null,null,null,l,U)),s._15(1,245760,null,0,D.a,[s.u,[2,x.a],M.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return c._42(0,[(e()(),c._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,d.b,d.a)),c._15(1,770048,null,0,f.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),c._32(131072,h.a,[m.a,c.i])],function(e,n){var t=n.component;e(n,1,0,c._41(n,1,0,c._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return c._42(0,[(e()(),c._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},d.b,d.a)),c._15(1,770048,null,0,f.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),c._32(131072,h.a,[m.a,c.i])],function(e,n){e(n,1,0,c._41(n,1,0,c._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},d.b,d.a)),c._15(1,770048,null,0,f.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function l(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},d.b,d.a)),c._15(1,770048,null,0,f.a,[p.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",500)},null)}function s(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"core-course-module-description",[],null,null,null,_.b,_.a)),c._15(1,49152,null,0,g.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId)},null)}function a(e){return c._42(0,[(e()(),c._16(0,0,null,null,3,"p",[["class","addon-mod_page-timemodified"],["padding-bottom",""]],null,null,null,null,null)),(e()(),c._40(1,null,["\n            ",": ","\n        "])),c._32(131072,h.a,[m.a,c.i]),c._34(3,1)],null,function(e,n){var t=n.component;e(n,1,0,c._41(n,1,0,c._29(n,2).transform("core.lastmodified")),c._41(n,1,1,e(n,3,0,c._29(n.parent,0),1e3*t.page.timemodified)))})}function u(e){return c._42(0,[c._32(0,v.a,[y.a,b.a]),(e()(),c._40(-1,null,["\n"])),(e()(),c._16(2,0,null,null,23,"core-navbar-buttons",[["end",""]],null,null,null,P.b,P.a)),c._15(3,245760,null,1,E.a,[c.p,y.a,C.a],null,null),c._37(603979776,1,{buttons:1}),(e()(),c._40(-1,0,["\n    "])),(e()(),c._16(6,0,null,0,18,"core-context-menu",[],null,null,null,I.b,I.a)),c._15(7,245760,null,0,p.a,[m.a,S.a,c.p,C.a,[2,w.a]],null,null),(e()(),c._40(-1,0,["\n        "])),(e()(),c._11(16777216,null,0,1,null,i)),c._15(10,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,0,["\n        "])),(e()(),c._11(16777216,null,0,1,null,o)),c._15(13,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,0,["\n        "])),(e()(),c._16(15,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},d.b,d.a)),c._15(16,770048,null,0,f.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),c._32(131072,h.a,[m.a,c.i]),(e()(),c._40(-1,0,["\n        "])),(e()(),c._11(16777216,null,0,1,null,r)),c._15(20,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,0,["\n        "])),(e()(),c._11(16777216,null,0,1,null,l)),c._15(23,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,0,["\n    "])),(e()(),c._40(-1,0,["\n"])),(e()(),c._40(-1,null,["\n\n"])),(e()(),c._40(-1,null,["\n"])),(e()(),c._16(28,0,null,null,14,"core-loading",[["class","core-loading-center"]],null,null,null,T.b,T.a)),c._15(29,638976,null,0,O.a,[m.a,c.p,k.a,D.a],{hideUntil:[0,"hideUntil"]},null),(e()(),c._40(-1,0,["\n\n    "])),(e()(),c._11(16777216,null,0,1,null,s)),c._15(32,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,0,["\n\n    "])),(e()(),c._16(34,0,null,0,7,"div",[["padding",""]],null,null,null,null,null)),(e()(),c._40(-1,null,["\n        "])),(e()(),c._16(36,0,null,null,1,"core-format-text",[],null,null,null,null,null)),c._15(37,540672,null,0,x.a,[c.p,M.a,C.a,U.a,m.a,N.a,D.a,R.a,y.a,F.a,L.a,H.a,[2,K.a],[2,W.a],[2,q.a],B.a,k.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),c._40(-1,null,["\n        "])),(e()(),c._11(16777216,null,null,1,null,a)),c._15(40,16384,null,0,A.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(e()(),c._40(-1,null,["\n    "])),(e()(),c._40(-1,0,["\n\n"])),(e()(),c._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0),e(n,7,0);e(n,10,0,t.externalUrl);e(n,13,0,t.description);e(n,16,0,c._41(n,16,0,c._29(n,17).transform("core.refresh")),t.refreshIcon,!1,700);e(n,20,0,t.prefetchStatusIcon);e(n,23,0,t.size);e(n,29,0,t.loaded);e(n,32,0,t.displayDescription);e(n,37,0,t.contents,t.component,t.componentId);e(n,40,0,t.displayTimemodified&&t.page&&t.page.timemodified)},null)}t.d(n,"b",function(){return Q}),n.c=u,t.d(n,"a",function(){return Y});var c=t(1),d=t(81),f=t(74),p=t(70),h=t(27),m=t(19),_=t(103),g=t(91),v=t(223),y=t(6),b=t(25),P=t(89),E=t(82),C=t(5),I=t(80),S=t(63),w=t(69),A=t(8),T=t(49),O=t(48),k=t(13),D=t(3),x=t(42),M=t(2),U=t(11),N=t(15),R=t(26),F=t(17),L=t(10),H=t(18),K=t(22),W=t(24),q=t(35),B=t(38),j=t(470),G=t(210),z=t(16),V=t(298),$=t(367),Q=c._14({encapsulation:2,styles:[],data:{}}),Y=c._12("addon-mod-page-index",j.a,function(e){return c._42(0,[(e()(),c._16(0,0,null,null,1,"addon-mod-page-index",[],null,null,null,u,Q)),c._15(1,245760,null,0,j.a,[c.u,G.a,z.a,L.a,V.a,$.a,D.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return q._42(0,[(e()(),q._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),q._32(131072,z.a,[V.a,q.i])],function(e,n){var t=n.component;e(n,1,0,q._41(n,1,0,q._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return q._42(0,[(e()(),q._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),q._32(131072,z.a,[V.a,q.i])],function(e,n){e(n,1,0,q._41(n,1,0,q._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return q._42(0,[(e()(),q._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),q._32(131072,z.a,[V.a,q.i])],function(e,n){var t=n.component;e(n,1,0,q._41(n,1,0,q._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return q._42(0,[(e()(),q._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),q._32(131072,z.a,[V.a,q.i])],function(e,n){var t=n.component;e(n,1,0,q._41(n,1,0,q._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},B.b,B.a)),q._15(1,770048,null,0,j.a,[G.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return q._42(0,[(e()(),q._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,2,{contentLabel:0}),q._37(603979776,3,{_buttons:1}),q._37(603979776,4,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,n.context.$implicit)})}function c(e){return q._42(0,[(e()(),q._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,5,{contentLabel:0}),q._37(603979776,6,{_buttons:1}),q._37(603979776,7,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),q._40(12,null,["",""])),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.grademethod")));e(n,12,0,t.quiz.gradeMethodReadable)})}function d(e){return q._42(0,[(e()(),q._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,8,{contentLabel:0}),q._37(603979776,9,{_buttons:1}),q._37(603979776,10,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),q._40(12,null,["",""])),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,q._41(n,8,0,q._29(n,9).transform("core.lastsync")));e(n,12,0,t.syncTime)})}function f(e){return q._42(0,[(e()(),q._16(0,0,null,null,15,"ion-card",[],null,null,null,null,null)),q._15(1,16384,null,0,ee.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._16(3,0,null,null,11,"ion-list",[],null,null,null,null,null)),q._15(4,16384,null,0,ne.a,[X.a,q.p,q.K,te.a,ie.l,oe.a],null,null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,u)),q._15(7,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,c)),q._15(10,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,d)),q._15(13,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.accessRules);e(n,10,0,t.quiz&&t.quiz.gradeMethodReadable);e(n,13,0,t.syncTime)},null)}function p(e){return q._42(0,[(e()(),q._16(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),q._40(3,null,["",""])),q._32(131072,z.a,[V.a,q.i])],null,function(e,n){e(n,3,0,q._41(n,3,0,q._29(n,4).transform("addon.mod_quiz.attemptnumber")))})}function h(e){return q._42(0,[(e()(),q._16(0,0,null,null,3,"ion-col",[["class","hidden-tablet col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),q._40(-1,null,["#"]))],null,null)}function m(e){return q._42(0,[(e()(),q._16(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),q._40(3,null,[""," / ",""])),q._32(131072,z.a,[V.a,q.i])],null,function(e,n){var t=n.component;e(n,3,0,q._41(n,3,0,q._29(n,4).transform("addon.mod_quiz.marks")),t.quiz.sumGradesFormatted)})}function _(e){return q._42(0,[(e()(),q._16(0,0,null,null,4,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),q._40(3,null,[""," / ",""])),q._32(131072,z.a,[V.a,q.i])],null,function(e,n){var t=n.component;e(n,3,0,q._41(n,3,0,q._29(n,4).transform("addon.mod_quiz.grade")),t.quiz.gradeFormatted)})}function g(e){return q._42(0,[(e()(),q._16(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._40(2,null,["",""])),q._32(131072,z.a,[V.a,q.i])],null,function(e,n){e(n,2,0,q._41(n,2,0,q._29(n,3).transform("addon.mod_quiz.preview")))})}function v(e){return q._42(0,[(e()(),q._16(0,0,null,null,2,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.attempt)})}function y(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),q._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function b(e){return q._42(0,[(e()(),q._16(0,0,null,null,3,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),q._40(3,null,["",""]))],null,function(e,n){e(n,3,0,n.parent.context.$implicit.readableMark)})}function P(e){return q._42(0,[(e()(),q._16(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),q._15(1,16384,null,0,le.a,[],null,null),(e()(),q._16(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),q._40(3,null,["",""]))],null,function(e,n){e(n,3,0,n.parent.context.$implicit.readableGrade)})}function E(e){return q._42(0,[(e()(),q._16(0,0,null,null,35,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"aria-label",0],[1,"href",4]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==q._29(e,8).onClick()&&i}return i},$.b,$.a)),q._15(1,278528,null,0,re.i,[q.v,q.w,q.p,q.L],{ngClass:[0,"ngClass"]},null),q._33(2,{"addon-mod_quiz-highlighted core-white-push-arrow":0}),q._15(3,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,14,{contentLabel:0}),q._37(603979776,15,{_buttons:1}),q._37(603979776,16,{_icons:1}),q._15(7,16384,null,0,Z.a,[],null,null),q._15(8,16384,null,0,se.a,[[2,ae.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),q._33(9,{courseId:0,quizId:1,attemptId:2}),q._15(10,1064960,null,0,ue.a,[se.a,[2,ce.a]],null,null),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(13,0,null,2,21,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),q._15(14,16384,null,0,de.a,[],null,null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,g)),q._15(17,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,v)),q._15(20,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._16(22,0,null,null,5,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),q._15(23,16384,null,0,le.a,[],null,null),(e()(),q._40(-1,null,["\n                        "])),(e()(),q._11(16777216,null,null,1,null,y)),q._15(26,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,b)),q._15(30,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,P)),q._15(33,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                "])),(e()(),q._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,n.context.$implicit.highlightGrade));e(n,8,0,"AddonModQuizAttemptPage",e(n,9,0,t.courseId,t.quiz.id,n.context.$implicit.id));e(n,17,0,t.quiz.showAttemptColumn&&n.context.$implicit.preview);e(n,20,0,t.quiz.showAttemptColumn&&!n.context.$implicit.preview);e(n,26,0,n.context.$implicit.readableState);e(n,30,0,t.quiz.showMarkColumn);e(n,33,0,t.quiz.showGradeColumn)},function(e,n){e(n,0,0,q._41(n,0,0,q._29(n,11).transform("core.seemoredetail")),q._29(n,10)._href)})}function C(e){return q._42(0,[(e()(),q._16(0,0,null,null,49,"ion-card",[["class","addon-mod_quiz-table"]],null,null,null,null,null)),q._15(1,16384,null,0,ee.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._16(3,0,null,null,6,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),q._15(4,16384,null,0,fe.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._16(6,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),q._40(7,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,null,["\n        "])),(e()(),q._40(-1,null,["\n        "])),(e()(),q._16(11,0,null,null,37,"ion-list",[],null,null,null,null,null)),q._15(12,16384,null,0,ne.a,[X.a,q.p,q.K,te.a,ie.l,oe.a],null,null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._16(15,0,null,null,28,"ion-item",[["class","addon-mod_quiz-table-header item item-block"],["detail-push",""],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(16,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,11,{contentLabel:0}),q._37(603979776,12,{_buttons:1}),q._37(603979776,13,{_icons:1}),q._15(20,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(22,0,null,2,20,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),q._15(23,16384,null,0,de.a,[],null,null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,p)),q._15(26,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,h)),q._15(29,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._16(31,0,null,null,4,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),q._15(32,16384,null,0,le.a,[],null,null),(e()(),q._16(33,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),q._40(34,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,m)),q._15(38,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                    "])),(e()(),q._11(16777216,null,null,1,null,_)),q._15(41,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n                "])),(e()(),q._40(-1,2,["\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,E)),q._15(47,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,26,0,t.quiz.showAttemptColumn);e(n,29,0,t.quiz.showAttemptColumn);e(n,38,0,t.quiz.showMarkColumn);e(n,41,0,t.quiz.showGradeColumn);e(n,47,0,t.attempts)},function(e,n){e(n,7,0,q._41(n,7,0,q._29(n,8).transform("addon.mod_quiz.summaryofattempts")));e(n,34,0,q._41(n,34,0,q._29(n,35).transform("addon.mod_quiz.attemptstate")))})}function I(e){return q._42(0,[(e()(),q._16(0,0,null,null,6,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,17,{contentLabel:0}),q._37(603979776,18,{_buttons:1}),q._37(603979776,19,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(6,2,["",""]))],null,function(e,n){e(n,6,0,n.component.gradeResult)})}function S(e){return q._42(0,[(e()(),q._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,20,{contentLabel:0}),q._37(603979776,21,{_buttons:1}),q._37(603979776,22,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(6,2,["",""])),q._32(131072,z.a,[V.a,q.i])],null,function(e,n){e(n,6,0,q._41(n,6,0,q._29(n,7).transform("core.course.overriddennotice")))})}function w(e){return q._42(0,[(e()(),q._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,23,{contentLabel:0}),q._37(603979776,24,{_buttons:1}),q._37(603979776,25,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),q._15(13,540672,null,0,pe.a,[q.p,he.a,me.a,_e.a,V.a,te.a,ge.a,ve.a,ye.a,be.a,Pe.a,Ee.a,[2,ae.a],[2,Ce.a],[2,Ie.a],Se.a,we.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),q._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,13,0,t.gradebookFeedback,t.component,t.componentId)},function(e,n){e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.comment")))})}function A(e){return q._42(0,[(e()(),q._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,26,{contentLabel:0}),q._37(603979776,27,{_buttons:1}),q._37(603979776,28,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),q._15(13,540672,null,0,pe.a,[q.p,he.a,me.a,_e.a,V.a,te.a,ge.a,ve.a,ye.a,be.a,Pe.a,Ee.a,[2,ae.a],[2,Ce.a],[2,Ie.a],Se.a,we.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),q._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,13,0,t.overallFeedback,t.component,t.componentId)},function(e,n){e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.overallfeedback")))})}function T(e){return q._42(0,[(e()(),q._16(0,0,null,null,18,"ion-card",[],null,null,null,null,null)),q._15(1,16384,null,0,ee.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._16(3,0,null,null,14,"ion-list",[],null,null,null,null,null)),q._15(4,16384,null,0,ne.a,[X.a,q.p,q.K,te.a,ie.l,oe.a],null,null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,I)),q._15(7,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,S)),q._15(10,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,w)),q._15(13,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,A)),q._15(16,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.gradeResult);e(n,10,0,t.gradeOverridden);e(n,13,0,t.gradebookFeedback);e(n,16,0,t.quiz.showFeedbackColumn&&t.overallFeedback)},null)}function O(e){return q._42(0,[(e()(),q._16(0,0,null,null,9,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,29,{contentLabel:0}),q._37(603979776,30,{_buttons:1}),q._37(603979776,31,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,n.context.$implicit)})}function k(e){return q._42(0,[(e()(),q._16(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,32,{contentLabel:0}),q._37(603979776,33,{_buttons:1}),q._37(603979776,34,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.noquestions")))})}function D(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),q._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function x(e){return q._42(0,[(e()(),q._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,35,{contentLabel:0}),q._37(603979776,36,{_buttons:1}),q._37(603979776,37,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._11(16777216,null,2,1,null,D)),q._15(12,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.unsupportedQuestions)},function(e,n){e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.errorquestionsnotsupported")))})}function M(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),q._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function U(e){return q._42(0,[(e()(),q._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,38,{contentLabel:0}),q._37(603979776,39,{_buttons:1}),q._37(603979776,40,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._11(16777216,null,2,1,null,M)),q._15(12,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.unsupportedRules)},function(e,n){e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.errorrulesnotsupported")))})}function N(e){return q._42(0,[(e()(),q._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,41,{contentLabel:0}),q._37(603979776,42,{_buttons:1}),q._37(603979776,43,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),q._40(8,null,["",""])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),q._40(12,null,["",""])),(e()(),q._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,q._41(n,8,0,q._29(n,9).transform("addon.mod_quiz.errorbehaviournotsupported")));e(n,12,0,t.quiz.preferredbehaviour)})}function R(e){return q._42(0,[(e()(),q._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),q._40(-1,null,["\n                "])),(e()(),q._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),q._15(3,147456,null,0,Ae.a,[X.a,q.p,q.K],{name:[0,"name"]},null),(e()(),q._40(4,null,["\n                ","\n            "])),q._33(5,{$a:0}),q._32(131072,z.a,[V.a,q.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,q._29(n,3)._hidden);e(n,4,0,q._41(n,4,0,q._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function F(e){return q._42(0,[(e()(),q._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,44,{contentLabel:0}),q._37(603979776,45,{_buttons:1}),q._37(603979776,46,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.attemptQuiz()&&i}return i},Te.b,Te.a)),q._15(8,1097728,[[45,4]],0,Oe.a,[[8,""],X.a,q.p,q.K],{block:[0,"block"]},null),(e()(),q._40(9,0,["\n                    ","\n                "])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,"")},function(e,n){var t=n.component;e(n,9,0,q._41(n,9,0,q._29(n,10).transform(t.buttonText)))})}function L(e){return q._42(0,[(e()(),q._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,47,{contentLabel:0}),q._37(603979776,48,{_buttons:1}),q._37(603979776,49,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,Te.b,Te.a)),q._15(8,1097728,[[48,4]],0,Oe.a,[[8,""],X.a,q.p,q.K],{block:[0,"block"]},null),q._15(9,81920,null,0,ke.a,[q.p,me.a,ge.a,he.a,ve.a,Ee.a,[2,ae.a],[2,Ce.a],[2,Ie.a]],null,null),(e()(),q._40(10,0,["\n                    ","\n                    "])),q._32(131072,z.a,[V.a,q.i]),(e()(),q._16(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),q._15(13,147456,null,0,Ae.a,[X.a,q.p,q.K],{name:[0,"name"]},null),(e()(),q._40(-1,0,["\n                "])),(e()(),q._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,13,0,"open")},function(e,n){e(n,7,0,n.component.externalUrl);e(n,10,0,q._41(n,10,0,q._29(n,11).transform("core.openinbrowser")));e(n,12,0,q._29(n,13)._hidden)})}function H(e){return q._42(0,[(e()(),q._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,$.b,$.a)),q._15(1,1097728,null,3,Q.a,[Y.a,X.a,q.p,q.K,[2,J.a]],null,null),q._37(335544320,50,{contentLabel:0}),q._37(603979776,51,{_buttons:1}),q._37(603979776,52,{_icons:1}),q._15(5,16384,null,0,Z.a,[],null,null),(e()(),q._40(-1,2,["\n                "])),(e()(),q._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,De.b,De.a)),q._15(8,114688,null,0,xe.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,2,["\n            "]))],function(e,n){e(n,8,0)},function(e,n){e(n,7,0,q._29(n,8)._paused)})}function K(e){return q._42(0,[(e()(),q._16(0,0,null,null,38,"ion-card",[],null,null,null,null,null)),q._15(1,16384,null,0,ee.a,[X.a,q.p,q.K],null,null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._16(3,0,null,null,34,"ion-list",[],null,null,null,null,null)),q._15(4,16384,null,0,ne.a,[X.a,q.p,q.K,te.a,ie.l,oe.a],null,null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,O)),q._15(8,802816,null,0,re.j,[q.W,q.T,q.v],{ngForOf:[0,"ngForOf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,k)),q._15(11,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,x)),q._15(14,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,U)),q._15(17,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,N)),q._15(20,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,R)),q._15(24,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,F)),q._15(28,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,L)),q._15(32,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n\n            "])),(e()(),q._40(-1,null,["\n            "])),(e()(),q._11(16777216,null,null,1,null,H)),q._15(36,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,null,["\n        "])),(e()(),q._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.preventMessages);e(n,11,0,0===t.quiz.hasquestions);e(n,14,0,t.unsupportedQuestions&&t.unsupportedQuestions.length);e(n,17,0,t.unsupportedRules&&t.unsupportedRules.length);e(n,20,0,!1===t.behaviourSupported);e(n,24,0,t.buttonText&&t.hasOffline&&!t.showStatusSpinner);e(n,28,0,t.buttonText&&!t.showStatusSpinner);e(n,32,0,!t.buttonText&&(t.unsupportedQuestions&&t.unsupportedQuestions.length||t.unsupportedRules&&t.unsupportedRules.length||!1===t.behaviourSupported));e(n,36,0,t.showStatusSpinner)},null)}function W(e){return q._42(0,[(e()(),q._40(-1,null,["\n"])),(e()(),q._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Me.b,Me.a)),q._15(2,245760,null,1,Ue.a,[q.p,ye.a,me.a],null,null),q._37(603979776,1,{buttons:1}),(e()(),q._40(-1,0,["\n    "])),(e()(),q._16(5,0,null,0,20,"core-context-menu",[],null,null,null,Ne.b,Ne.a)),q._15(6,245760,null,0,G.a,[V.a,Re.a,q.p,me.a,[2,Fe.a]],null,null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,i)),q._15(9,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,o)),q._15(12,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,r)),q._15(15,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,l)),q._15(18,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,s)),q._15(21,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n        "])),(e()(),q._11(16777216,null,0,1,null,a)),q._15(24,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n    "])),(e()(),q._40(-1,0,["\n"])),(e()(),q._40(-1,null,["\n\n"])),(e()(),q._40(-1,null,["\n"])),(e()(),q._16(29,0,null,null,21,"core-loading",[["class","core-loading-center"]],null,null,null,Le.b,Le.a)),q._15(30,638976,null,0,He.a,[V.a,q.p,we.a,ge.a],{hideUntil:[0,"hideUntil"]},null),(e()(),q._40(-1,0,["\n\n    "])),(e()(),q._16(32,0,null,0,1,"core-course-module-description",[],null,null,null,Ke.b,Ke.a)),q._15(33,49152,null,0,We.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),q._40(-1,0,["\n\n    "])),(e()(),q._40(-1,0,["\n    "])),(e()(),q._11(16777216,null,0,1,null,f)),q._15(37,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n\n    "])),(e()(),q._40(-1,0,["\n    "])),(e()(),q._11(16777216,null,0,1,null,C)),q._15(41,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n\n    "])),(e()(),q._40(-1,0,["\n    "])),(e()(),q._11(16777216,null,0,1,null,T)),q._15(45,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n\n    "])),(e()(),q._40(-1,0,["\n    "])),(e()(),q._11(16777216,null,0,1,null,K)),q._15(49,16384,null,0,re.k,[q.W,q.T],{ngIf:[0,"ngIf"]},null),(e()(),q._40(-1,0,["\n"])),(e()(),q._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,18,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description,t.component,t.componentId);e(n,37,0,t.quiz&&t.quiz.gradeMethodReadable||t.accessRules&&t.accessRules.length||t.syncTime);e(n,41,0,t.quiz&&t.attempts&&t.attempts.length);e(n,45,0,t.quiz&&t.showResults&&(t.gradeResult||t.gradeOverridden||t.gradebookFeedback||t.quiz.showFeedbackColumn&&t.overallFeedback));e(n,49,0,t.quiz)},null)}t.d(n,"b",function(){return Qe}),n.c=W,t.d(n,"a",function(){return Ye});var q=t(1),B=t(81),j=t(74),G=t(70),z=t(27),V=t(19),$=t(31),Q=t(21),Y=t(20),X=t(7),J=t(28),Z=t(33),ee=t(87),ne=t(78),te=t(15),ie=t(39),oe=t(32),re=t(8),le=t(113),se=t(224),ae=t(22),ue=t(250),ce=t(52),de=t(114),fe=t(281),pe=t(42),he=t(2),me=t(5),_e=t(11),ge=t(3),ve=t(26),ye=t(6),be=t(17),Pe=t(10),Ee=t(18),Ce=t(24),Ie=t(35),Se=t(38),we=t(13),Ae=t(47),Te=t(46),Oe=t(43),ke=t(189),De=t(112),xe=t(95),Me=t(89),Ue=t(82),Ne=t(80),Re=t(63),Fe=t(69),Le=t(49),He=t(48),Ke=t(103),We=t(91),qe=t(471),Be=t(151),je=t(279),Ge=t(236),ze=t(231),Ve=t(116),$e=t(299),Qe=q._14({encapsulation:2,styles:[],data:{}}),Ye=q._12("addon-mod-quiz-index",qe.a,function(e){return q._42(0,[(e()(),q._16(0,0,null,null,1,"addon-mod-quiz-index",[],null,null,null,W,Qe)),q._15(1,245760,null,0,qe.a,[q.u,Be.a,[2,Ce.a],je.a,Ge.a,ze.a,Ve.a,$e.a,ae.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return f._42(0,[(e()(),f._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,p.b,p.a)),f._15(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),f._32(131072,_.a,[g.a,f.i])],function(e,n){var t=n.component;e(n,1,0,f._41(n,1,0,f._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return f._42(0,[(e()(),f._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},p.b,p.a)),f._15(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),f._32(131072,_.a,[g.a,f.i])],function(e,n){e(n,1,0,f._41(n,1,0,f._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},p.b,p.a)),f._15(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function l(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},p.b,p.a)),f._15(1,770048,null,0,h.a,[m.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",500)},null)}function s(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"core-course-module-description",[],null,null,null,v.b,v.a)),f._15(1,49152,null,0,y.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId)},null)}function a(e){return f._42(0,[(e()(),f._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),f._40(-1,null,["\n        "])),(e()(),f._16(2,0,null,null,1,"core-iframe",[],null,null,null,b.b,b.a)),f._15(3,638976,null,0,P.a,[E.a,C.a,I.a,S.c],{src:[0,"src"]},null),(e()(),f._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.src)},null)}function u(e){return f._42(0,[(e()(),f._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),f._40(-1,null,["\n        "])),(e()(),f._16(2,0,null,null,1,"core-format-text",[],null,null,null,null,null)),f._15(3,540672,null,0,w.a,[f.p,A.a,I.a,T.a,g.a,O.a,k.a,D.a,E.a,x.a,M.a,U.a,[2,N.a],[2,R.a],[2,F.a],C.a,L.a],{text:[0,"text"]},null),(e()(),f._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.contentText)},null)}function c(e){return f._42(0,[(e()(),f._16(0,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),f._40(-1,null,["\n        "])),(e()(),f._16(2,0,null,null,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.open()&&i}return i},H.b,H.a)),f._15(3,1097728,null,0,K.a,[[8,""],W.a,f.p,f.K],{block:[0,"block"]},null),(e()(),f._40(-1,0,["\n            "])),(e()(),f._16(5,0,null,0,1,"ion-icon",[["name","document"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),f._15(6,147456,null,0,q.a,[W.a,f.p,f.K],{name:[0,"name"]},null),(e()(),f._40(7,0,["\n            ","\n        "])),f._32(131072,_.a,[g.a,f.i]),(e()(),f._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,"");e(n,6,0,"document")},function(e,n){e(n,5,0,f._29(n,6)._hidden);e(n,7,0,f._41(n,7,0,f._29(n,8).transform("addon.mod_resource.openthefile")))})}function d(e){return f._42(0,[(e()(),f._40(-1,null,["\n"])),(e()(),f._16(1,0,null,null,23,"core-navbar-buttons",[["end",""]],null,null,null,B.b,B.a)),f._15(2,245760,null,1,j.a,[f.p,E.a,I.a],null,null),f._37(603979776,1,{buttons:1}),(e()(),f._40(-1,0,["\n    "])),(e()(),f._16(5,0,null,0,18,"core-context-menu",[],null,null,null,G.b,G.a)),f._15(6,245760,null,0,m.a,[g.a,z.a,f.p,I.a,[2,V.a]],null,null),(e()(),f._40(-1,0,["\n        "])),(e()(),f._11(16777216,null,0,1,null,i)),f._15(9,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n        "])),(e()(),f._11(16777216,null,0,1,null,o)),f._15(12,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n        "])),(e()(),f._16(14,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},p.b,p.a)),f._15(15,770048,null,0,h.a,[m.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),f._32(131072,_.a,[g.a,f.i]),(e()(),f._40(-1,0,["\n        "])),(e()(),f._11(16777216,null,0,1,null,r)),f._15(19,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n        "])),(e()(),f._11(16777216,null,0,1,null,l)),f._15(22,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n    "])),(e()(),f._40(-1,0,["\n"])),(e()(),f._40(-1,null,["\n\n"])),(e()(),f._40(-1,null,["\n"])),(e()(),f._16(27,0,null,null,14,"core-loading",[["class","core-loading-center"]],null,null,null,Q.b,Q.a)),f._15(28,638976,null,0,Y.a,[g.a,f.p,L.a,k.a],{hideUntil:[0,"hideUntil"]},null),(e()(),f._40(-1,0,["\n\n    "])),(e()(),f._11(16777216,null,0,1,null,s)),f._15(31,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n\n    "])),(e()(),f._11(16777216,null,0,1,null,a)),f._15(34,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n\n    "])),(e()(),f._11(16777216,null,0,1,null,u)),f._15(37,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n\n    "])),(e()(),f._11(16777216,null,0,1,null,c)),f._15(40,16384,null,0,$.k,[f.W,f.T],{ngIf:[0,"ngIf"]},null),(e()(),f._40(-1,0,["\n\n"])),(e()(),f._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,f._41(n,15,0,f._29(n,16).transform("core.refresh")),t.refreshIcon,!1,700);e(n,19,0,t.prefetchStatusIcon);e(n,22,0,t.size);e(n,28,0,t.loaded);e(n,31,0,"iframe"!=t.mode);e(n,34,0,"iframe"==t.mode);e(n,37,0,"embedded"==t.mode);e(n,40,0,"external"==t.mode)},null)}t.d(n,"b",function(){return te}),n.c=d,t.d(n,"a",function(){return ie});var f=t(1),p=t(81),h=t(74),m=t(70),_=t(27),g=t(19),v=t(103),y=t(91),b=t(350),P=t(255),E=t(6),C=t(38),I=t(5),S=t(75),w=t(42),A=t(2),T=t(11),O=t(15),k=t(3),D=t(26),x=t(17),M=t(10),U=t(18),N=t(22),R=t(24),F=t(35),L=t(13),H=t(46),K=t(43),W=t(7),q=t(47),B=t(89),j=t(82),G=t(80),z=t(63),V=t(69),$=t(8),Q=t(49),Y=t(48),X=t(472),J=t(211),Z=t(16),ee=t(368),ne=t(263),te=f._14({encapsulation:2,styles:[],data:{}}),ie=f._12("addon-mod-resource-index",X.a,function(e){return f._42(0,[(e()(),f._16(0,0,null,null,1,"addon-mod-resource-index",[],null,null,null,d,te)),f._15(1,245760,null,0,X.a,[f.u,J.a,Z.a,M.a,ee.a,ne.a,A.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),J._32(131072,te.a,[ie.a,J.i])],function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),J._32(131072,te.a,[ie.a,J.i])],function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),J._32(131072,te.a,[ie.a,J.i])],function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),J._32(131072,te.a,[ie.a,J.i])],function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},Z.b,Z.a)),J._15(1,770048,null,0,ee.a,[ne.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return J._42(0,[(e()(),J._16(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),J._40(-1,null,["\n        "])),(e()(),J._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),J._15(3,147456,null,0,oe.a,[re.a,J.p,J.K],{name:[0,"name"]},null),(e()(),J._40(4,null,["\n        ","\n    "]))],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,J._29(n,3)._hidden);e(n,4,0,t.scorm.warningMessage)})}function c(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("core.unlimited")))})}function d(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.scorm.maxattempt)})}function f(e){return J._42(0,[(e()(),J._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,2,{contentLabel:0}),J._37(603979776,3,{_buttons:1}),J._37(603979776,4,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._11(16777216,null,2,1,null,c)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._11(16777216,null,2,1,null,d)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "]))],function(e,n){var t=n.component;e(n,12,0,0==t.scorm.maxattempt);e(n,15,0,t.scorm.maxattempt>0)},function(e,n){e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.noattemptsallowed")))})}function p(e){return J._42(0,[(e()(),J._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,5,{contentLabel:0}),J._37(603979776,6,{_buttons:1}),J._37(603979776,7,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),J._40(12,null,["",""])),(e()(),J._40(-1,2,["\n                    "]))],null,function(e,n){var t=n.component;e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.noattemptsmade")));e(n,12,0,t.scorm.numAttempts)})}function h(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.grade)})}function m(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function _(e){return J._42(0,[(e()(),J._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,8,{contentLabel:0}),J._37(603979776,9,{_buttons:1}),J._37(603979776,10,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,[""," ",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._11(16777216,null,2,1,null,h)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._11(16777216,null,2,1,null,m)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "]))],function(e,n){e(n,12,0,-1!=n.context.$implicit.grade);e(n,15,0,-1==n.context.$implicit.grade)},function(e,n){e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.gradeforattempt")),n.context.$implicit.number)})}function g(e){return J._42(0,[(e()(),J._16(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._11(16777216,null,null,1,null,f)),J._15(3,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._11(16777216,null,null,1,null,p)),J._15(6,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._11(16777216,null,null,1,null,_)),J._15(9,802816,null,0,de.j,[J.W,J.T,J.v],{ngForOf:[0,"ngForOf"]},null),(e()(),J._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,t.scorm.maxattempt>=0);e(n,6,0,t.scorm.numAttempts>=0);e(n,9,0,t.scorm.onlineAttempts)},null)}function v(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.grade)})}function y(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function b(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("addon.mod_scorm.offlineattemptnote")))})}function P(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("addon.mod_scorm.offlineattemptovermax")))})}function E(e){return J._42(0,[(e()(),J._16(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,11,{contentLabel:0}),J._37(603979776,12,{_buttons:1}),J._37(603979776,13,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,[""," ",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,v)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,y)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,b)),J._15(18,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,P)),J._15(21,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,-1!=n.context.$implicit.grade);e(n,15,0,-1==n.context.$implicit.grade);e(n,18,0,0==t.scorm.maxattempt||n.context.$implicit.number<=t.scorm.maxattempt);e(n,21,0,0!=t.scorm.maxattempt&&n.context.$implicit.number>t.scorm.maxattempt)},function(e,n){e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.gradeforattempt")),n.context.$implicit.number)})}function C(e){return J._42(0,[(e()(),J._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,14,{contentLabel:0}),J._37(603979776,15,{_buttons:1}),J._37(603979776,16,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),J._40(12,null,["",""])),(e()(),J._40(-1,2,["\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.grademethod")));e(n,12,0,t.scorm.gradeMethodReadable)})}function I(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.scorm.grade)})}function S(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){e(n,1,0,J._41(n,1,0,J._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function w(e){return J._42(0,[(e()(),J._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,17,{contentLabel:0}),J._37(603979776,18,{_buttons:1}),J._37(603979776,19,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,I)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,S)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,-1!=t.scorm.grade);e(n,15,0,-1==t.scorm.grade)},function(e,n){e(n,8,0,J._41(n,8,0,J._29(n,9).transform("addon.mod_scorm.gradereported")))})}function A(e){return J._42(0,[(e()(),J._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,20,{contentLabel:0}),J._37(603979776,21,{_buttons:1}),J._37(603979776,22,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),J._40(12,null,["",""])),(e()(),J._40(-1,2,["\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,J._41(n,8,0,J._29(n,9).transform("core.lastsync")));e(n,12,0,t.syncTime)})}function T(e){return J._42(0,[(e()(),J._16(0,0,null,null,29,"ion-card",[],null,null,null,null,null)),J._15(1,16384,null,0,fe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(3,0,null,null,6,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),J._15(4,16384,null,0,pe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._16(6,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),J._40(7,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,null,["\n            "])),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(11,0,null,null,17,"ion-list",[],null,null,null,null,null)),J._15(12,16384,null,0,he.a,[re.a,J.p,J.K,me.a,_e.l,ge.a],null,null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,g)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,E)),J._15(18,802816,null,0,de.j,[J.W,J.T,J.v],{ngForOf:[0,"ngForOf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,C)),J._15(21,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,w)),J._15(24,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,A)),J._15(27,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,15,0,t.scorm.displayattemptstatus);e(n,18,0,t.scorm.offlineAttempts);e(n,21,0,t.scorm.displayattemptstatus&&t.scorm.gradeMethodReadable);e(n,24,0,t.scorm.displayattemptstatus&&t.scorm.grade);e(n,27,0,t.syncTime)},function(e,n){e(n,7,0,J._41(n,7,0,J._29(n,8).transform("addon.mod_scorm.attempts")))})}function O(e){return J._42(0,[(e()(),J._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),J._15(3,147456,null,0,oe.a,[re.a,J.p,J.K],{name:[0,"name"]},null),(e()(),J._40(4,null,["\n            ","\n        "])),J._33(5,{$a:0}),J._32(131072,te.a,[ie.a,J.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,J._29(n,3)._hidden);e(n,4,0,J._41(n,4,0,J._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function k(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),J._15(1,16384,[[26,4]],0,ve.a,[J.p],{value:[0,"value"]},null),(e()(),J._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.identifier)},function(e,n){e(n,2,0,n.context.$implicit.title)})}function D(e){return J._42(0,[(e()(),J._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,23,{contentLabel:0}),J._37(603979776,24,{_buttons:1}),J._37(603979776,25,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),J._15(8,16384,[[23,4]],0,ye.a,[re.a,J.p,J.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),J._40(9,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(12,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==J._29(e,13)._click(t)&&i}if("keyup.space"===n){i=!1!==J._29(e,13)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.currentOrganization.identifier=t)&&i}if("ionChange"===n){i=!1!==o.loadOrganization()&&i}return i},be.b,be.a)),J._15(13,1228800,null,1,Pe.a,[Ee.a,ae.a,re.a,J.p,J.K,[2,se.a],Ce.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),J._37(603979776,26,{options:1}),J._35(1024,null,Ie.l,function(e){return[e]},[Pe.a]),J._15(16,671744,null,0,Ie.q,[[8,null],[8,null],[8,null],[2,Ie.l]],{model:[0,"model"]},{update:"ngModelChange"}),J._35(2048,null,Ie.m,null,[Ie.q]),J._15(18,16384,null,0,Ie.n,[Ie.m],null,null),(e()(),J._40(-1,null,["\n                        "])),(e()(),J._11(16777216,null,null,1,null,k)),J._15(21,802816,null,0,de.j,[J.W,J.T,J.v],{ngForOf:[0,"ngForOf"]},null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,13,0,"action-sheet");e(n,16,0,t.currentOrganization.identifier);e(n,21,0,t.organizations)},function(e,n){e(n,9,0,J._41(n,9,0,J._29(n,10).transform("addon.mod_scorm.organizations")));e(n,12,0,J._29(n,13)._disabled,J._29(n,18).ngClassUntouched,J._29(n,18).ngClassTouched,J._29(n,18).ngClassPristine,J._29(n,18).ngClassDirty,J._29(n,18).ngClassValid,J._29(n,18).ngClassInvalid,J._29(n,18).ngClassPending)})}function x(e){return J._42(0,[(e()(),J._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,27,{contentLabel:0}),J._37(603979776,28,{_buttons:1}),J._37(603979776,29,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Se.b,Se.a)),J._15(8,114688,null,0,we.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,2,["\n                "]))],function(e,n){e(n,8,0)},function(e,n){e(n,7,0,J._29(n,8)._paused)})}function M(e){return J._42(0,[(e()(),J._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._33(2,{number:0}),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,3).transform("addon.mod_scorm.dataattemptshown",e(n,2,0,t.attemptToContinue))))})}function U(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"a",[],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.open(t,e.parent.parent.context.$implicit.id)&&i}return i},null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.title)})}function N(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.title)})}function R(e){return J._42(0,[(e()(),J._16(0,0,null,null,9,"p",[],null,null,null,null,null)),(e()(),J._40(-1,null,["\n                            "])),(e()(),J._16(2,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),J._40(-1,null,["\n                            "])),(e()(),J._11(16777216,null,null,1,null,U)),J._15(5,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                            "])),(e()(),J._11(16777216,null,null,1,null,N)),J._15(8,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                        "]))],function(e,n){e(n,5,0,n.parent.context.$implicit.prereq&&n.parent.context.$implicit.launch);e(n,8,0,!n.parent.context.$implicit.prereq||!n.parent.context.$implicit.launch)},function(e,n){e(n,2,0,n.parent.context.$implicit.image.url,n.parent.context.$implicit.image.description)})}function F(e){return J._42(0,[(e()(),J._16(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),J._40(-1,null,["\n                        "])),(e()(),J._11(16777216,null,null,1,null,R)),J._15(3,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.isvisible)},function(e,n){e(n,0,0,J._19(1,"core-padding-",n.context.$implicit.level,""))})}function L(e){return J._42(0,[(e()(),J._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,30,{contentLabel:0}),J._37(603979776,31,{_buttons:1}),J._37(603979776,32,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,M)),J._15(9,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),J._40(12,null,["",""])),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,F)),J._15(15,802816,null,0,de.j,[J.W,J.T,J.v],{ngForOf:[0,"ngForOf"]},null),(e()(),J._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,9,0,t.attemptToContinue);e(n,15,0,t.toc)},function(e,n){e(n,12,0,n.component.currentOrganization.title)})}function H(e){return J._42(0,[(e()(),J._16(0,0,null,null,23,"ion-card",[["class","addon-mod_scorm-toc"]],null,null,null,null,null)),J._15(1,16384,null,0,fe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(3,0,null,null,6,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),J._15(4,16384,null,0,pe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._16(6,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),J._40(7,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,null,["\n            "])),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(11,0,null,null,11,"ion-list",[],null,null,null,null,null)),J._15(12,16384,null,0,he.a,[re.a,J.p,J.K,me.a,_e.l,ge.a],null,null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,D)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,x)),J._15(18,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,L)),J._15(21,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,15,0,t.organizations.length>1);e(n,18,0,t.scorm.displaycoursestructure&&t.loadingToc);e(n,21,0,t.scorm.displaycoursestructure&&!t.loadingToc)},function(e,n){e(n,7,0,J._41(n,7,0,J._29(n,8).transform("addon.mod_scorm.contents")))})}function K(e){return J._42(0,[(e()(),J._16(0,0,null,null,31,"ion-card",[],null,null,null,null,null)),J._15(1,16384,null,0,fe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(4,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,33,{contentLabel:0}),J._37(603979776,34,{_buttons:1}),J._37(603979776,35,{_icons:1}),J._15(8,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                "])),(e()(),J._16(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),J._40(11,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n            "])),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(15,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(16,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,36,{contentLabel:0}),J._37(603979776,37,{_buttons:1}),J._37(603979776,38,{_icons:1}),J._15(20,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                "])),(e()(),J._16(22,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,Ae.b,Ae.a)),J._15(23,1097728,[[37,4]],0,Te.a,[[8,""],re.a,J.p,J.K],{block:[0,"block"]},null),J._15(24,81920,null,0,Oe.a,[J.p,ke.a,De.a,xe.a,Me.a,Ue.a,[2,Ne.a],[2,Re.a],[2,Fe.a]],null,null),(e()(),J._40(25,0,["\n                    ","\n                    "])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._16(27,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),J._15(28,147456,null,0,oe.a,[re.a,J.p,J.K],{name:[0,"name"]},null),(e()(),J._40(-1,0,["\n                "])),(e()(),J._40(-1,2,["\n            "])),(e()(),J._40(-1,null,["\n        "]))],function(e,n){e(n,23,0,""),e(n,24,0);e(n,28,0,"open")},function(e,n){var t=n.component;e(n,11,0,J._41(n,11,0,J._29(n,12).transform(t.errorMessage)));e(n,22,0,t.externalUrl);e(n,25,0,J._41(n,25,0,J._29(n,26).transform("core.openinbrowser")));e(n,27,0,J._29(n,28)._hidden)})}function W(e){return J._42(0,[(e()(),J._16(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),J._15(1,16384,null,0,fe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(4,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,39,{contentLabel:0}),J._37(603979776,40,{_buttons:1}),J._37(603979776,41,{_icons:1}),J._15(8,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                "])),(e()(),J._16(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),J._40(11,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n            "])),(e()(),J._40(-1,null,["\n        "]))],null,function(e,n){e(n,11,0,J._41(n,11,0,J._29(n,12).transform("addon.mod_scorm.exceededmaxattempts")))})}function q(e){return J._42(0,[(e()(),J._16(0,0,null,null,51,"div",[["name","mode"],["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.scormOptions.mode=t)&&i}return i},null,null)),J._15(1,1064960,null,1,Le.a,[J.K,J.p,J.i],null,null),J._37(335544320,42,{_header:0}),J._35(1024,null,Ie.l,function(e){return[e]},[Le.a]),J._15(4,671744,null,0,Ie.q,[[8,null],[8,null],[8,null],[2,Ie.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),J._35(2048,null,Ie.m,null,[Ie.q]),J._15(6,16384,null,0,Ie.n,[Ie.m],null,null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._16(8,0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,le.b,le.a)),J._15(9,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,43,{contentLabel:0}),J._37(603979776,44,{_buttons:1}),J._37(603979776,45,{_icons:1}),J._15(13,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(15,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),J._40(16,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._16(20,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,le.b,le.a)),J._15(21,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,46,{contentLabel:0}),J._37(603979776,47,{_buttons:1}),J._37(603979776,48,{_icons:1}),J._15(25,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(27,0,null,1,3,"ion-label",[],null,null,null,null,null)),J._15(28,16384,[[46,4]],0,ye.a,[re.a,J.p,J.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),J._40(29,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(32,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==J._29(e,33)._click(t)&&i}return i},He.b,He.a)),J._15(33,245760,null,0,Ke.a,[ae.a,re.a,J.p,J.K,[2,se.a],[2,Le.a]],{value:[0,"value"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._16(36,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,le.b,le.a)),J._15(37,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,49,{contentLabel:0}),J._37(603979776,50,{_buttons:1}),J._37(603979776,51,{_icons:1}),J._15(41,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(43,0,null,1,3,"ion-label",[],null,null,null,null,null)),J._15(44,16384,[[49,4]],0,ye.a,[re.a,J.p,J.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),J._40(45,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(48,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==J._29(e,49)._click(t)&&i}return i},He.b,He.a)),J._15(49,245760,null,0,Ke.a,[ae.a,re.a,J.p,J.K,[2,se.a],[2,Le.a]],{value:[0,"value"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,4,0,"mode",t.scormOptions.mode);e(n,33,0,t.modeBrowser);e(n,49,0,t.modeNormal)},function(e,n){e(n,0,0,J._29(n,6).ngClassUntouched,J._29(n,6).ngClassTouched,J._29(n,6).ngClassPristine,J._29(n,6).ngClassDirty,J._29(n,6).ngClassValid,J._29(n,6).ngClassInvalid,J._29(n,6).ngClassPending);e(n,16,0,J._41(n,16,0,J._29(n,17).transform("addon.mod_scorm.mode")));e(n,29,0,J._41(n,29,0,J._29(n,30).transform("addon.mod_scorm.browse")));e(n,32,0,J._29(n,33)._disabled);e(n,45,0,J._41(n,45,0,J._29(n,46).transform("addon.mod_scorm.normal")));e(n,48,0,J._29(n,49)._disabled)})}function B(e){return J._42(0,[(e()(),J._16(0,0,null,null,19,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,52,{contentLabel:0}),J._37(603979776,53,{_buttons:1}),J._37(603979776,54,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),J._15(8,16384,[[52,4]],0,ye.a,[re.a,J.p,J.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),J._40(9,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(12,0,null,4,6,"ion-checkbox",[["item-end",""],["name","newAttempt"]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==J._29(e,13)._click(t)&&i}if("ngModelChange"===n){i=!1!==(o.scormOptions.newAttempt=t)&&i}return i},We.b,We.a)),J._15(13,1228800,null,0,qe.a,[re.a,ae.a,[2,se.a],J.p,J.K],null,null),J._35(1024,null,Ie.l,function(e){return[e]},[qe.a]),J._15(15,671744,null,0,Ie.q,[[8,null],[8,null],[8,null],[2,Ie.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),J._35(2048,null,Ie.m,null,[Ie.q]),J._15(17,16384,null,0,Ie.n,[Ie.m],null,null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._40(-1,2,["\n                "]))],function(e,n){e(n,15,0,"newAttempt",n.component.scormOptions.newAttempt)},function(e,n){e(n,9,0,J._41(n,9,0,J._29(n,10).transform("addon.mod_scorm.newattempt")));e(n,12,0,J._29(n,13)._disabled,J._29(n,17).ngClassUntouched,J._29(n,17).ngClassTouched,J._29(n,17).ngClassPristine,J._29(n,17).ngClassDirty,J._29(n,17).ngClassValid,J._29(n,17).ngClassInvalid,J._29(n,17).ngClassPending)})}function j(e){return J._42(0,[(e()(),J._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,55,{contentLabel:0}),J._37(603979776,56,{_buttons:1}),J._37(603979776,57,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),J._40(8,null,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "]))],null,function(e,n){var t=n.component;e(n,8,0,J._41(n,8,0,J._29(n,9).transform(t.statusMessage)))})}function G(e){return J._42(0,[(e()(),J._16(0,0,null,null,17,null,null,null,null,null,null,null)),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._11(16777216,null,null,1,null,j)),J._15(3,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n                    "])),(e()(),J._16(5,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,le.b,le.a)),J._15(6,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,58,{contentLabel:0}),J._37(603979776,59,{_buttons:1}),J._37(603979776,60,{_icons:1}),J._15(10,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                        "])),(e()(),J._16(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.open(t)&&i}return i},Ae.b,Ae.a)),J._15(13,1097728,[[59,4]],0,Te.a,[[8,""],re.a,J.p,J.K],{block:[0,"block"]},null),(e()(),J._40(14,0,["",""])),J._32(131072,te.a,[ie.a,J.i]),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,n.component.statusMessage);e(n,13,0,"")},function(e,n){e(n,14,0,J._41(n,14,0,J._29(n,15).transform("addon.mod_scorm.enter")))})}function z(e){return J._42(0,[(e()(),J._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,2).transform(t.progressMessage)))})}function V(e){return J._42(0,[(e()(),J._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),J._40(1,null,["",""])),J._33(2,{$a:0}),J._32(131072,te.a,[ie.a,J.i])],null,function(e,n){var t=n.component;e(n,1,0,J._41(n,1,0,J._29(n,3).transform("core.percentagenumber",e(n,2,0,t.percentage))))})}function $(e){return J._42(0,[(e()(),J._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,le.b,le.a)),J._15(1,1097728,null,3,se.a,[ae.a,re.a,J.p,J.K,[2,ue.a]],null,null),J._37(335544320,61,{contentLabel:0}),J._37(603979776,62,{_buttons:1}),J._37(603979776,63,{_icons:1}),J._15(5,16384,null,0,ce.a,[],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,Se.b,Se.a)),J._15(8,114688,null,0,we.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,z)),J._15(11,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                    "])),(e()(),J._11(16777216,null,2,1,null,V)),J._15(14,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,8,0);e(n,11,0,t.progressMessage);e(n,14,0,t.percentage<=100)},function(e,n){e(n,7,0,J._29(n,8)._paused)})}function Q(e){return J._42(0,[(e()(),J._16(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),J._15(1,16384,null,0,fe.a,[re.a,J.p,J.K],null,null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._16(3,0,null,null,18,"ion-list",[],null,null,null,null,null)),J._15(4,16384,null,0,he.a,[re.a,J.p,J.K,me.a,_e.l,ge.a],null,null),(e()(),J._40(-1,null,["\n                "])),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,q)),J._15(8,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n                "])),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,B)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n                "])),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,G)),J._15(16,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n                "])),(e()(),J._40(-1,null,["\n                "])),(e()(),J._11(16777216,null,null,1,null,$)),J._15(20,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n            "])),(e()(),J._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,!t.scorm.hidebrowse);e(n,12,0,!t.scorm.forcenewattempt&&t.scorm.numAttempts>0&&!t.scorm.incomplete&&t.scorm.attemptsLeft>0);e(n,16,0,!t.downloading);e(n,20,0,t.downloading)},null)}function Y(e){return J._42(0,[(e()(),J._16(0,0,null,null,25,"div",[],null,null,null,null,null)),(e()(),J._40(-1,null,["\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,T)),J._15(4,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,O)),J._15(8,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,H)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,K)),J._15(16,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,W)),J._15(20,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n\n        "])),(e()(),J._40(-1,null,["\n        "])),(e()(),J._11(16777216,null,null,1,null,Q)),J._15(24,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.scorm.displayattemptstatus||t.scorm.offlineAttempts&&t.scorm.offlineAttempts.length);e(n,8,0,!t.errorMessage&&t.hasOffline);e(n,12,0,t.scorm&&t.organizations&&(t.scorm.displaycoursestructure&&t.organizations.length||t.organizations.length>1));e(n,16,0,t.errorMessage);e(n,20,0,!t.errorMessage&&t.scorm&&t.scorm.attemptsLeft<=0);e(n,24,0,!t.errorMessage&&t.scorm&&(!t.scorm.lastattemptlock||t.scorm.attemptsLeft>0))},null)}function X(e){return J._42(0,[(e()(),J._40(-1,null,["\n"])),(e()(),J._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Be.b,Be.a)),J._15(2,245760,null,1,je.a,[J.p,Ge.a,ke.a],null,null),J._37(603979776,1,{buttons:1}),(e()(),J._40(-1,0,["\n    "])),(e()(),J._16(5,0,null,0,20,"core-context-menu",[],null,null,null,ze.b,ze.a)),J._15(6,245760,null,0,ne.a,[ie.a,Ve.a,J.p,ke.a,[2,$e.a]],null,null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,i)),J._15(9,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,o)),J._15(12,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,r)),J._15(15,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,l)),J._15(18,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,s)),J._15(21,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n        "])),(e()(),J._11(16777216,null,0,1,null,a)),J._15(24,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n    "])),(e()(),J._40(-1,0,["\n"])),(e()(),J._40(-1,null,["\n\n"])),(e()(),J._40(-1,null,["\n"])),(e()(),J._16(29,0,null,null,12,"core-loading",[["class","core-loading-center"]],null,null,null,Qe.b,Qe.a)),J._15(30,638976,null,0,Ye.a,[ie.a,J.p,Xe.a,De.a],{hideUntil:[0,"hideUntil"]},null),(e()(),J._40(-1,0,["\n\n    "])),(e()(),J._16(32,0,null,0,1,"core-course-module-description",[],null,null,null,Je.b,Je.a)),J._15(33,49152,null,0,Ze.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),J._40(-1,0,["\n\n    "])),(e()(),J._40(-1,0,["\n    "])),(e()(),J._11(16777216,null,0,1,null,u)),J._15(37,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n\n    "])),(e()(),J._11(16777216,null,0,1,null,Y)),J._15(40,16384,null,0,de.k,[J.W,J.T],{ngIf:[0,"ngIf"]},null),(e()(),J._40(-1,0,["\n"])),(e()(),J._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,18,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description,t.component,t.componentId);e(n,37,0,t.scorm&&t.scorm.warningMessage);e(n,40,0,t.scorm&&t.loaded&&!t.scorm.warningMessage)},null)}t.d(n,"b",function(){return an}),n.c=X,t.d(n,"a",function(){return un});var J=t(1),Z=t(81),ee=t(74),ne=t(70),te=t(27),ie=t(19),oe=t(47),re=t(7),le=t(31),se=t(21),ae=t(20),ue=t(28),ce=t(33),de=t(8),fe=t(87),pe=t(281),he=t(78),me=t(15),_e=t(39),ge=t(32),ve=t(92),ye=t(62),be=t(111),Pe=t(93),Ee=t(34),Ce=t(52),Ie=t(23),Se=t(112),we=t(95),Ae=t(46),Te=t(43),Oe=t(189),ke=t(5),De=t(3),xe=t(2),Me=t(26),Ue=t(18),Ne=t(22),Re=t(24),Fe=t(35),Le=t(127),He=t(167),Ke=t(136),We=t(229),qe=t(174),Be=t(89),je=t(82),Ge=t(6),ze=t(80),Ve=t(63),$e=t(69),Qe=t(49),Ye=t(48),Xe=t(13),Je=t(103),Ze=t(91),en=t(473),nn=t(193),tn=t(351),on=t(237),rn=t(288),ln=t(300),sn=t(53),an=J._14({encapsulation:2,styles:[],data:{}}),un=J._12("addon-mod-scorm-index",en.a,function(e){return J._42(0,[(e()(),J._16(0,0,null,null,1,"addon-mod-scorm-index",[],null,null,null,X,an)),J._15(1,245760,null,0,en.a,[J.u,nn.a,[2,Re.a],tn.a,on.a,rn.a,ln.a,Ne.a,sn.a,De.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function l(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),C._32(131072,A.a,[T.a,C.i])],function(e,n){var t=n.component;e(n,1,0,C._41(n,1,0,C._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function s(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function a(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},I.b,I.a)),C._15(1,770048,null,0,S.a,[w.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function u(e){return C._42(0,[(e()(),C._16(0,0,null,null,15,"ion-card",[["padding",""]],null,null,null,null,null)),C._15(1,16384,null,0,O.a,[k.a,C.p,C.K],null,null),(e()(),C._40(-1,null,["\n        "])),(e()(),C._16(3,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(e()(),C._40(4,null,["",""])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n        "])),(e()(),C._16(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-start",""],["ion-button",""]],[[8,"href",4]],null,null,D.b,D.a)),C._15(8,1097728,null,0,x.a,[[8,""],k.a,C.p,C.K],{block:[0,"block"]},null),C._15(9,81920,null,0,M.a,[C.p,U.a,N.a,R.a,F.a,L.a,[2,H.a],[2,K.a],[2,W.a]],null,null),(e()(),C._40(-1,0,["\n            "])),(e()(),C._16(11,0,null,0,1,"ion-icon",[["name","open"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),C._15(12,147456,null,0,q.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(13,0,["\n            ","\n        "])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n    "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,12,0,"open")},function(e,n){var t=n.component;e(n,4,0,C._41(n,4,0,C._29(n,5).transform("addon.mod_survey.surveycompletednograph")));e(n,7,0,t.externalUrl);e(n,11,0,C._29(n,12)._hidden);e(n,13,0,C._41(n,13,0,C._29(n,14).transform("addon.mod_survey.results")))})}function c(e){return C._42(0,[(e()(),C._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),C._40(-1,null,["\n        "])),(e()(),C._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C._15(3,147456,null,0,q.a,[k.a,C.p,C.K],{name:[0,"name"]},null),(e()(),C._40(4,null,["\n        ","\n    "])),C._33(5,{$a:0}),C._32(131072,A.a,[T.a,C.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,C._29(n,3)._hidden);e(n,4,0,C._41(n,4,0,C._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function d(e){return C._42(0,[(e()(),C._16(0,0,null,null,5,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),C._15(1,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(3,0,null,null,1,"div",[["padding",""]],null,null,null,null,null)),(e()(),C._40(4,null,["",""])),(e()(),C._40(-1,null,["\n                        "]))],null,function(e,n){e(n,4,0,n.context.$implicit)})}function f(e){return C._42(0,[(e()(),C._16(0,0,null,null,34,"div",[],[[1,"padding-top",0]],null,null,null,null)),(e()(),C._40(-1,null,["\n                "])),(e()(),C._16(2,0,null,null,1,"h3",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),C._40(3,null,["",""])),(e()(),C._40(-1,null,["\n                "])),(e()(),C._16(5,0,null,null,17,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),C._15(6,16384,null,0,j.a,[],null,null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(8,0,null,null,13,"ion-row",[["align-items-center",""],["class","hidden-phone row"],["no-padding",""]],null,null,null,null,null)),C._15(9,16384,null,0,G.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(11,0,null,null,6,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),C._15(12,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(14,0,null,null,2,"div",[["padding",""]],null,null,null,null,null)),(e()(),C._40(15,null,["",""])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._11(16777216,null,null,1,null,d)),C._15(20,802816,null,0,z.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                "])),(e()(),C._40(-1,null,["\n                "])),(e()(),C._16(24,0,null,null,9,"ion-item",[["class","addon-mod_survey-question item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,V.b,V.a)),C._15(25,1097728,null,3,$.a,[Q.a,k.a,C.p,C.K,[2,Y.a]],null,null),C._37(335544320,2,{contentLabel:0}),C._37(603979776,3,{_buttons:1}),C._37(603979776,4,{_icons:1}),C._15(29,16384,null,0,X.a,[],null,null),(e()(),C._40(-1,2,["\n                    "])),(e()(),C._16(31,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),C._40(32,null,["",""])),(e()(),C._40(-1,2,["\n                "])),(e()(),C._40(-1,null,["\n            "]))],function(e,n){e(n,20,0,n.parent.context.$implicit.options)},function(e,n){e(n,0,0,1==n.parent.context.index);e(n,3,0,n.parent.context.$implicit.text);e(n,15,0,C._41(n,15,0,C._29(n,16).transform("addon.mod_survey.responses")));e(n,24,0,n.parent.context.even);e(n,32,0,n.parent.context.$implicit.intro)})}function p(e){return C._42(0,[(e()(),C._16(0,0,null,null,5,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),C._15(1,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(3,0,null,null,1,"ion-radio",[],[[1,"aria-labelledby",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==C._29(e,4)._click(t)&&i}return i},J.b,J.a)),C._15(4,245760,null,0,Z.a,[Q.a,k.a,C.p,C.K,[2,$.a],[2,ee.a]],{value:[0,"value"]},null),(e()(),C._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,n.context.index+1)},function(e,n){e(n,3,0,"addon-mod_survey-"+n.parent.parent.context.$implicit.name,C._29(n,4)._disabled)})}function h(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),C._15(1,16384,[[6,4]],0,ne.a,[C.p],{value:[0,"value"]},null),(e()(),C._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.index+1)},function(e,n){e(n,2,0,n.context.$implicit)})}function m(e){return C._42(0,[(e()(),C._16(0,0,null,null,52,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),C._15(1,16384,null,0,j.a,[],null,null),(e()(),C._40(-1,null,["\n                "])),(e()(),C._16(3,0,null,null,48,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""],["nowrap",""],["radio-group",""],["role","radiogroup"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.answers[e.parent.context.$implicit.name]=t)&&i}return i},null,null)),C._15(4,16384,null,0,te.t,[],{required:[0,"required"]},null),C._35(1024,null,te.k,function(e){return[e]},[te.t]),C._15(6,1064960,null,1,ee.a,[C.K,C.p,C.i],null,null),C._37(335544320,5,{_header:0}),C._35(1024,null,te.l,function(e){return[e]},[ee.a]),C._15(9,671744,null,0,te.q,[[8,null],[2,te.k],[8,null],[2,te.l]],{model:[0,"model"]},{update:"ngModelChange"}),C._35(2048,null,te.m,null,[te.q]),C._15(11,16384,null,0,te.n,[te.m],null,null),C._15(12,16384,null,0,G.a,[],null,null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(14,0,null,null,9,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),C._15(15,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(17,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,ie.b,ie.a)),C._15(18,16384,null,0,oe.a,[k.a,C.p,C.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),C._15(19,4308992,null,0,re.a,[C.p,T.a,le.a,N.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),C._16(20,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),C._40(21,null,["","."])),(e()(),C._40(22,0,[" ",""])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n\n                    "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._11(16777216,null,null,1,null,p)),C._15(27,802816,null,0,z.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(29,0,null,null,21,"ion-col",[["class","hidden-tablet col"]],null,null,null,null,null)),C._15(30,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(32,0,null,null,17,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==C._29(e,35)._click(t)&&i}if("keyup.space"===n){i=!1!==C._29(e,35)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.answers[e.parent.context.$implicit.name]=t)&&i}return i},se.b,se.a)),C._15(33,16384,null,0,te.t,[],{required:[0,"required"]},null),C._35(1024,null,te.k,function(e){return[e]},[te.t]),C._15(35,1228800,null,1,ae.a,[ue.a,Q.a,k.a,C.p,C.K,[2,$.a],ce.a],{interface:[0,"interface"]},null),C._37(603979776,6,{options:1}),C._35(1024,null,te.l,function(e){return[e]},[ae.a]),C._15(38,671744,null,0,te.q,[[8,null],[2,te.k],[8,null],[2,te.l]],{model:[0,"model"]},{update:"ngModelChange"}),C._35(2048,null,te.m,null,[te.q]),C._15(40,16384,null,0,te.n,[te.m],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(42,0,null,null,3,"ion-option",[["disabled",""],["selected",""],["value","-1"]],null,null,null,null,null)),C._15(43,16384,[[6,4]],0,ne.a,[C.p],{disabled:[0,"disabled"],selected:[1,"selected"],value:[2,"value"]},null),(e()(),C._40(44,null,["",""])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._11(16777216,null,null,1,null,h)),C._15(48,802816,null,0,z.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                "])),(e()(),C._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,4,0,n.parent.context.$implicit.required);e(n,9,0,t.answers[n.parent.context.$implicit.name]);e(n,18,0,C._19(1,"addon-mod_survey-",n.parent.context.$implicit.name,""));e(n,19,0,n.parent.context.$implicit.required);e(n,27,0,n.parent.context.$implicit.options);e(n,33,0,n.parent.context.$implicit.required);e(n,35,0,"action-sheet");e(n,38,0,t.answers[n.parent.context.$implicit.name]);e(n,43,0,"","","-1");e(n,48,0,n.parent.context.$implicit.options)},function(e,n){e(n,0,0,n.parent.context.even);e(n,3,0,C._29(n,4).required?"":null,C._29(n,11).ngClassUntouched,C._29(n,11).ngClassTouched,C._29(n,11).ngClassPristine,C._29(n,11).ngClassDirty,C._29(n,11).ngClassValid,C._29(n,11).ngClassInvalid,C._29(n,11).ngClassPending);e(n,21,0,n.parent.context.$implicit.num);e(n,22,0,n.parent.context.$implicit.text);e(n,32,0,"addon-mod_survey-"+n.parent.context.$implicit.name,C._29(n,33).required?"":null,C._29(n,35)._disabled,C._29(n,40).ngClassUntouched,C._29(n,40).ngClassTouched,C._29(n,40).ngClassPristine,C._29(n,40).ngClassDirty,C._29(n,40).ngClassValid,C._29(n,40).ngClassInvalid,C._29(n,40).ngClassPending);e(n,44,0,C._41(n,44,0,C._29(n,45).transform("core.choose")))})}function _(e){return C._42(0,[(e()(),C._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),C._15(1,16384,[[7,4]],0,ne.a,[C.p],{value:[0,"value"]},null),(e()(),C._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.index)},function(e,n){e(n,2,0,n.context.$implicit)})}function g(e){return C._42(0,[(e()(),C._16(0,0,null,null,35,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),C._15(1,16384,null,0,j.a,[],null,null),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._16(3,0,null,null,31,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""]],null,null,null,null,null)),C._15(4,16384,null,0,G.a,[],null,null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(6,0,null,null,9,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),C._15(7,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(9,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,ie.b,ie.a)),C._15(10,16384,null,0,oe.a,[k.a,C.p,C.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),C._15(11,4308992,null,0,re.a,[C.p,T.a,le.a,N.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),C._16(12,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),C._40(13,null,["","."])),(e()(),C._40(14,0,[" ",""])),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._16(17,0,null,null,16,"ion-col",[["class","col"],["col-5",""]],null,null,null,null,null)),C._15(18,16384,null,0,B.a,[],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._16(20,0,null,null,12,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==C._29(e,23)._click(t)&&i}if("keyup.space"===n){i=!1!==C._29(e,23)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.answers[e.parent.parent.context.$implicit.name]=t)&&i}return i},se.b,se.a)),C._15(21,16384,null,0,te.t,[],{required:[0,"required"]},null),C._35(1024,null,te.k,function(e){return[e]},[te.t]),C._15(23,1228800,null,1,ae.a,[ue.a,Q.a,k.a,C.p,C.K,[2,$.a],ce.a],{interface:[0,"interface"]},null),C._37(603979776,7,{options:1}),C._35(1024,null,te.l,function(e){return[e]},[ae.a]),C._15(26,671744,null,0,te.q,[[8,null],[2,te.k],[8,null],[2,te.l]],{model:[0,"model"]},{update:"ngModelChange"}),C._35(2048,null,te.m,null,[te.q]),C._15(28,16384,null,0,te.n,[te.m],null,null),(e()(),C._40(-1,null,["\n                            "])),(e()(),C._11(16777216,null,null,1,null,_)),C._15(31,802816,null,0,z.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                        "])),(e()(),C._40(-1,null,["\n                    "])),(e()(),C._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,10,0,C._19(1,"addon-mod_survey-",n.parent.parent.context.$implicit.name,""));e(n,11,0,n.parent.parent.context.$implicit.required);e(n,21,0,n.parent.parent.context.$implicit.required);e(n,23,0,"action-sheet");e(n,26,0,t.answers[n.parent.parent.context.$implicit.name]);e(n,31,0,n.parent.parent.context.$implicit.options)},function(e,n){e(n,0,0,n.parent.parent.context.even);e(n,13,0,n.parent.parent.context.$implicit.num);e(n,14,0,n.parent.parent.context.$implicit.text);e(n,20,0,"addon-mod_survey-"+n.parent.parent.context.$implicit.name,C._29(n,21).required?"":null,C._29(n,23)._disabled,C._29(n,28).ngClassUntouched,C._29(n,28).ngClassTouched,C._29(n,28).ngClassPristine,C._29(n,28).ngClassDirty,C._29(n,28).ngClassValid,C._29(n,28).ngClassInvalid,C._29(n,28).ngClassPending)})}function v(e){return C._42(0,[(e()(),C._16(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,V.b,V.a)),C._15(1,1097728,null,3,$.a,[Q.a,k.a,C.p,C.K,[2,Y.a]],null,null),C._37(335544320,8,{contentLabel:0}),C._37(603979776,9,{_buttons:1}),C._37(603979776,10,{_icons:1}),C._15(5,16384,null,0,X.a,[],null,null),(e()(),C._40(-1,2,["\n                    "])),(e()(),C._16(7,0,null,1,6,"ion-label",[["stacked",""]],null,null,null,ie.b,ie.a)),C._15(8,16384,[[8,4]],0,oe.a,[k.a,C.p,C.K,[8,null],[8,""],[8,null],[8,null]],{id:[0,"id"]},null),C._15(9,4308992,null,0,re.a,[C.p,T.a,le.a,N.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),C._40(-1,0,["\n                        "])),(e()(),C._16(11,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),C._40(12,null,["","."])),(e()(),C._40(13,0,[" ","\n                    "])),(e()(),C._40(-1,2,["\n                    "])),(e()(),C._16(15,0,null,3,6,"ion-textarea",[["class","addon-mod_survey-textarea"]],[[1,"aria-label",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.answers[e.parent.parent.context.$implicit.name]=t)&&i}return i},de.b,de.a)),C._15(16,16384,null,0,te.t,[],{required:[0,"required"]},null),C._35(1024,null,te.k,function(e){return[e]},[te.t]),C._15(18,671744,null,0,te.q,[[8,null],[2,te.k],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),C._35(2048,null,te.m,null,[te.q]),C._15(20,16384,null,0,te.n,[te.m],null,null),C._15(21,5423104,null,0,fe.a,[k.a,pe.a,Q.a,ue.a,C.p,C.K,[2,K.a],[2,$.a],[2,te.m],he.a],null,null),(e()(),C._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,8,0,C._19(1,"addon-mod_survey-",n.parent.parent.context.$implicit.name,""));e(n,9,0,n.parent.parent.context.$implicit.required);e(n,16,0,n.parent.parent.context.$implicit.required);e(n,18,0,t.answers[n.parent.parent.context.$implicit.name])},function(e,n){e(n,0,0,n.parent.parent.context.even);e(n,12,0,n.parent.parent.context.$implicit.num);e(n,13,0,n.parent.parent.context.$implicit.text);e(n,15,0,n.parent.parent.context.$implicit.text,C._29(n,16).required?"":null,C._29(n,20).ngClassUntouched,C._29(n,20).ngClassTouched,C._29(n,20).ngClassPristine,C._29(n,20).ngClassDirty,C._29(n,20).ngClassValid,C._29(n,20).ngClassInvalid,C._29(n,20).ngClassPending)})}function y(e){return C._42(0,[(e()(),C._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),C._40(-1,null,["\n                "])),(e()(),C._11(16777216,null,null,1,null,g)),C._15(3,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n\n                "])),(e()(),C._11(16777216,null,null,1,null,v)),C._15(6,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.type>0);e(n,6,0,0===n.parent.context.$implicit.type)},null)}function b(e){return C._42(0,[(e()(),C._16(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),C._40(-1,null,["\n            "])),(e()(),C._40(-1,null,["\n            "])),(e()(),C._11(16777216,null,null,1,null,f)),C._15(4,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n\n            "])),(e()(),C._40(-1,null,["\n            "])),(e()(),C._11(16777216,null,null,1,null,m)),C._15(8,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n\n            "])),(e()(),C._40(-1,null,["\n            "])),(e()(),C._11(16777216,null,null,1,null,y)),C._15(12,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,null,["\n\n        "]))],function(e,n){e(n,4,0,n.context.$implicit.multi&&n.context.$implicit.multi.length);e(n,8,0,0!==n.context.$implicit.parent);e(n,12,0,(!n.context.$implicit.multi||0==n.context.$implicit.multi.length)&&0===n.context.$implicit.parent)},null)}function P(e){return C._42(0,[(e()(),C._16(0,0,null,null,17,"section",[],null,null,null,null,null)),(e()(),C._40(-1,null,["\n\n        "])),(e()(),C._11(16777216,null,null,1,null,b)),C._15(3,802816,null,0,z.j,[C.W,C.T,C.v],{ngForOf:[0,"ngForOf"]},null),(e()(),C._40(-1,null,["\n\n        "])),(e()(),C._16(5,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,V.b,V.a)),C._15(6,1097728,null,3,$.a,[Q.a,k.a,C.p,C.K,[2,Y.a]],null,null),C._37(335544320,11,{contentLabel:0}),C._37(603979776,12,{_buttons:1}),C._37(603979776,13,{_icons:1}),C._15(10,16384,null,0,X.a,[],null,null),(e()(),C._40(-1,2,["\n            "])),(e()(),C._16(12,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.submit()&&i}return i},D.b,D.a)),C._15(13,1097728,[[12,4]],0,x.a,[[8,""],k.a,C.p,C.K],{block:[0,"block"]},null),(e()(),C._40(14,0,["",""])),C._32(131072,A.a,[T.a,C.i]),(e()(),C._40(-1,2,["\n        "])),(e()(),C._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.questions);e(n,13,0,"")},function(e,n){e(n,12,0,!n.component.isValidResponse());e(n,14,0,C._41(n,14,0,C._29(n,15).transform("core.submit")))})}function E(e){return C._42(0,[(e()(),C._40(-1,null,["\n"])),(e()(),C._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,me.b,me.a)),C._15(2,245760,null,1,_e.a,[C.p,ge.a,U.a],null,null),C._37(603979776,1,{buttons:1}),(e()(),C._40(-1,0,["\n    "])),(e()(),C._16(5,0,null,0,20,"core-context-menu",[],null,null,null,ve.b,ve.a)),C._15(6,245760,null,0,w.a,[T.a,ye.a,C.p,U.a,[2,be.a]],null,null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,i)),C._15(9,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,o)),C._15(12,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,r)),C._15(15,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,l)),C._15(18,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,s)),C._15(21,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n        "])),(e()(),C._11(16777216,null,0,1,null,a)),C._15(24,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n    "])),(e()(),C._40(-1,0,["\n"])),(e()(),C._40(-1,null,["\n\n"])),(e()(),C._40(-1,null,["\n"])),(e()(),C._16(29,0,null,null,17,"core-loading",[["class","core-loading-center"]],null,null,null,Pe.b,Pe.a)),C._15(30,638976,null,0,Ee.a,[T.a,C.p,Ce.a,N.a],{hideUntil:[0,"hideUntil"]},null),(e()(),C._40(-1,0,["\n\n    "])),(e()(),C._16(32,0,null,0,1,"core-course-module-description",[],null,null,null,Ie.b,Ie.a)),C._15(33,49152,null,0,Se.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),C._40(-1,0,["\n\n    "])),(e()(),C._40(-1,0,["\n    "])),(e()(),C._11(16777216,null,0,1,null,u)),C._15(37,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n    "])),(e()(),C._40(-1,0,["\n    "])),(e()(),C._11(16777216,null,0,1,null,c)),C._15(41,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n    "])),(e()(),C._40(-1,0,["\n    "])),(e()(),C._11(16777216,null,0,1,null,P)),C._15(45,16384,null,0,z.k,[C.W,C.T],{ngIf:[0,"ngIf"]},null),(e()(),C._40(-1,0,["\n\n"])),(e()(),C._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,18,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description,t.component,t.componentId);e(n,37,0,t.survey&&t.survey.surveydone);e(n,41,0,t.hasOffline);e(n,45,0,t.survey&&!t.survey.surveydone&&!t.hasOffline&&t.questions&&t.questions.length)},null)}t.d(n,"b",function(){return De}),n.c=E,t.d(n,"a",function(){return xe});var C=t(1),I=t(81),S=t(74),w=t(70),A=t(27),T=t(19),O=t(87),k=t(7),D=t(46),x=t(43),M=t(189),U=t(5),N=t(3),R=t(2),F=t(26),L=t(18),H=t(22),K=t(24),W=t(35),q=t(47),B=t(113),j=t(142),G=t(114),z=t(8),V=t(31),$=t(21),Q=t(20),Y=t(28),X=t(33),J=t(167),Z=t(136),ee=t(127),ne=t(92),te=t(23),ie=t(83),oe=t(62),re=t(76),le=t(11),se=t(111),ae=t(93),ue=t(34),ce=t(52),de=t(94),fe=t(79),pe=t(15),he=t(32),me=t(89),_e=t(82),ge=t(6),ve=t(80),ye=t(63),be=t(69),Pe=t(49),Ee=t(48),Ce=t(13),Ie=t(103),Se=t(91),we=t(474),Ae=t(264),Te=t(301),Oe=t(265),ke=t(302),De=C._14({encapsulation:2,styles:[],data:{}}),xe=C._12("addon-mod-survey-index",we.a,function(e){return C._42(0,[(e()(),C._16(0,0,null,null,1,"addon-mod-survey-index",[],null,null,null,E,De)),C._15(1,245760,null,0,we.a,[C.u,Ae.a,[2,K.a],Te.a,Oe.a,ke.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),p._32(131072,g.a,[v.a,p.i])],function(e,n){var t=n.component;e(n,1,0,p._41(n,1,0,p._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function o(e){return p._42(0,[(e()(),p._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},h.b,h.a)),p._15(1,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),p._32(131072,g.a,[v.a,p.i])],function(e,n){e(n,1,0,p._41(n,1,0,p._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function r(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"core-course-module-description",[],null,null,null,y.b,y.a)),p._15(1,49152,null,0,b.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId)},null)}function l(e){return p._42(0,[(e()(),p._16(0,0,null,null,4,"div",[["class","addon-mod_url-embedded-url"]],null,null,null,null,null)),(e()(),p._40(-1,null,["\n        "])),(e()(),p._16(2,0,null,null,1,"core-iframe",[],null,null,null,P.b,P.a)),p._15(3,638976,null,0,E.a,[C.a,I.a,S.a,w.c],{src:[0,"src"]},null),(e()(),p._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.url)},null)}function s(e){return p._42(0,[(e()(),p._16(0,0,null,null,0,"img",[],[[8,"title",0],[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,p._19(1,"",t.name,""),t.url)})}function a(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"video",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),p._40(-1,null,["\n                "])),(e()(),p._16(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),p._40(-1,null,["\n            "]))],null,function(e,n){var t=n.component;e(n,0,0,p._19(1,"",t.name,""));e(n,2,0,t.url,t.mimetype)})}function u(e){return p._42(0,[(e()(),p._16(0,0,null,null,3,"audio",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),p._40(-1,null,["\n                "])),(e()(),p._16(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),p._40(-1,null,["\n            "]))],null,function(e,n){var t=n.component;e(n,0,0,p._19(1,"",t.name,""));e(n,2,0,t.url,t.mimetype)})}function c(e){return p._42(0,[(e()(),p._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,A.b,A.a)),p._15(1,1097728,null,3,T.a,[O.a,k.a,p.p,p.K,[2,D.a]],null,null),p._37(335544320,2,{contentLabel:0}),p._37(603979776,3,{_buttons:1}),p._37(603979776,4,{_icons:1}),p._15(5,16384,null,0,x.a,[],null,null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._11(16777216,null,2,1,null,s)),p._15(8,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._11(16777216,null,2,1,null,a)),p._15(11,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._11(16777216,null,2,1,null,u)),p._15(14,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.isImage);e(n,11,0,t.isVideo);e(n,14,0,t.isAudio)},null)}function d(e){return p._42(0,[(e()(),p._16(0,0,null,null,31,"ion-list",[],null,null,null,null,null)),p._15(1,16384,null,0,U.a,[k.a,p.p,p.K,N.a,R.l,F.a],null,null),(e()(),p._40(-1,null,["\n        "])),(e()(),p._11(16777216,null,null,1,null,c)),p._15(4,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,null,["\n        "])),(e()(),p._16(6,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,A.b,A.a)),p._15(7,1097728,null,3,T.a,[O.a,k.a,p.p,p.K,[2,D.a]],null,null),p._37(335544320,5,{contentLabel:0}),p._37(603979776,6,{_buttons:1}),p._37(603979776,7,{_icons:1}),p._15(11,16384,null,0,x.a,[],null,null),(e()(),p._40(-1,2,["\n            "])),(e()(),p._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),p._40(14,null,["",""])),p._32(131072,g.a,[v.a,p.i]),(e()(),p._40(-1,2,["\n            "])),(e()(),p._16(17,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),p._40(18,null,["",""])),(e()(),p._40(-1,2,["\n        "])),(e()(),p._40(-1,null,["\n        "])),(e()(),p._16(21,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),p._40(-1,null,["\n            "])),(e()(),p._16(23,0,null,null,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.go()&&i}return i},L.b,L.a)),p._15(24,1097728,null,0,H.a,[[8,""],k.a,p.p,p.K],{block:[0,"block"]},null),(e()(),p._40(-1,0,["\n                "])),(e()(),p._16(26,0,null,0,1,"ion-icon",[["name","link"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),p._15(27,147456,null,0,K.a,[k.a,p.p,p.K],{name:[0,"name"]},null),(e()(),p._40(28,0,["\n                ","\n            "])),p._32(131072,g.a,[v.a,p.i]),(e()(),p._40(-1,null,["\n        "])),(e()(),p._40(-1,null,["\n    "]))],function(e,n){e(n,4,0,n.component.shouldEmbed);e(n,24,0,"");e(n,27,0,"link")},function(e,n){var t=n.component;e(n,14,0,p._41(n,14,0,p._29(n,15).transform("addon.mod_url.pointingtourl")));e(n,18,0,t.url);e(n,26,0,p._29(n,27)._hidden);e(n,28,0,p._41(n,28,0,p._29(n,29).transform("addon.mod_url.accessurl")))})}function f(e){return p._42(0,[(e()(),p._40(-1,null,["\n"])),(e()(),p._16(1,0,null,null,17,"core-navbar-buttons",[["end",""]],null,null,null,W.b,W.a)),p._15(2,245760,null,1,q.a,[p.p,C.a,S.a],null,null),p._37(603979776,1,{buttons:1}),(e()(),p._40(-1,0,["\n    "])),(e()(),p._16(5,0,null,0,12,"core-context-menu",[],null,null,null,B.b,B.a)),p._15(6,245760,null,0,_.a,[v.a,j.a,p.p,S.a,[2,G.a]],null,null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,i)),p._15(9,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._11(16777216,null,0,1,null,o)),p._15(12,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n        "])),(e()(),p._16(14,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},h.b,h.a)),p._15(15,770048,null,0,m.a,[_.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),p._32(131072,g.a,[v.a,p.i]),(e()(),p._40(-1,0,["\n    "])),(e()(),p._40(-1,0,["\n"])),(e()(),p._40(-1,null,["\n\n"])),(e()(),p._40(-1,null,["\n"])),(e()(),p._16(21,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,z.b,z.a)),p._15(22,638976,null,0,V.a,[v.a,p.p,$.a,Q.a],{hideUntil:[0,"hideUntil"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._11(16777216,null,0,1,null,r)),p._15(25,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._11(16777216,null,0,1,null,l)),p._15(28,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n\n    "])),(e()(),p._11(16777216,null,0,1,null,d)),p._15(31,16384,null,0,M.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(e()(),p._40(-1,0,["\n"])),(e()(),p._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,p._41(n,15,0,p._29(n,16).transform("core.refresh")),t.refreshIcon,!1,700);e(n,22,0,t.loaded);e(n,25,0,t.displayDescription);e(n,28,0,t.shouldIframe||t.shouldEmbed&&t.isOther);e(n,31,0,!(t.shouldIframe||t.shouldEmbed&&t.isOther))},null)}t.d(n,"b",function(){return te}),n.c=f,t.d(n,"a",function(){return ie});var p=t(1),h=t(81),m=t(74),_=t(70),g=t(27),v=t(19),y=t(103),b=t(91),P=t(350),E=t(255),C=t(6),I=t(38),S=t(5),w=t(75),A=t(31),T=t(21),O=t(20),k=t(7),D=t(28),x=t(33),M=t(8),U=t(78),N=t(15),R=t(39),F=t(32),L=t(46),H=t(43),K=t(47),W=t(89),q=t(82),B=t(80),j=t(63),G=t(69),z=t(49),V=t(48),$=t(13),Q=t(3),Y=t(475),X=t(303),J=t(16),Z=t(304),ee=t(65),ne=t(2),te=p._14({encapsulation:2,styles:[],data:{}}),ie=p._12("addon-mod-url-index",Y.a,function(e){return p._42(0,[(e()(),p._16(0,0,null,null,1,"addon-mod-url-index",[],null,null,null,f,te)),p._15(1,245760,null,0,Y.a,[p.u,X.a,J.a,Z.a,ee.a,ne.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function i(e){return T._42(0,[(e()(),T._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showSubwikiPicker(t)&&i}return i},O.b,O.a)),T._15(1,1097728,[[2,4]],0,k.a,[[8,""],D.a,T.p,T.K],null,null),T._32(131072,x.a,[M.a,T.i]),(e()(),T._40(-1,0,["\n        "])),(e()(),T._16(4,0,null,0,1,"ion-icon",[["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._15(5,147456,null,0,U.a,[D.a,T.p,T.K],{name:[0,"name"]},null),(e()(),T._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"person")},function(e,n){e(n,0,0,T._41(n,0,0,T._29(n,2).transform("addon.mod_wiki.subwiki")));e(n,4,0,T._29(n,5)._hidden)})}function o(e){return T._42(0,[(e()(),T._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.goToWikiHome()&&i}return i},O.b,O.a)),T._15(1,1097728,[[2,4]],0,k.a,[[8,""],D.a,T.p,T.K],null,null),T._32(131072,x.a,[M.a,T.i]),(e()(),T._40(-1,0,["\n        "])),(e()(),T._16(4,0,null,0,1,"ion-icon",[["name","home"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._15(5,147456,null,0,U.a,[D.a,T.p,T.K],{name:[0,"name"]},null),(e()(),T._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"home")},function(e,n){e(n,0,0,T._41(n,0,0,T._29(n,2).transform("addon.mod_wiki.gowikihome")));e(n,4,0,T._29(n,5)._hidden)})}function r(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),T._32(131072,x.a,[M.a,T.i])],function(e,n){var t=n.component;e(n,1,0,T._41(n,1,0,T._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function l(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.expandDescription()&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._32(131072,x.a,[M.a,T.i])],function(e,n){e(n,1,0,T._41(n,1,0,T._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function s(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t)&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._32(131072,x.a,[M.a,T.i])],function(e,n){var t=n.component;e(n,1,0,T._41(n,1,0,T._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function a(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.doRefresh(null,t,!0)&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._32(131072,x.a,[M.a,T.i])],function(e,n){var t=n.component;e(n,1,0,T._41(n,1,0,T._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function u(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","create"]],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.goToEditPage()&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._32(131072,x.a,[M.a,T.i])],function(e,n){e(n,1,0,T._41(n,1,0,T._29(n,2).transform("core.edit")),"create",590)},null)}function c(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.goToNewPage()&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),T._32(131072,x.a,[M.a,T.i])],function(e,n){e(n,1,0,T._41(n,1,0,T._29(n,2).transform("addon.mod_wiki.createpage")),"add",580)},null)}function d(e){return T._42(0,[(e()(),T._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.prefetch()&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function f(e){return T._42(0,[(e()(),T._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.removeFiles()&&i}return i},N.b,N.a)),T._15(1,770048,null,0,R.a,[F.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"})],function(e,n){e(n,1,0,n.component.size,"cube","trash",400)},null)}function p(e){return T._42(0,[(e()(),T._16(0,0,null,null,1,"core-course-module-description",[],null,null,null,L.b,L.a)),T._15(1,49152,null,0,H.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId)},null)}function h(e){return T._42(0,[(e()(),T._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),T._40(1,null,["",""])),T._33(2,{$a:0}),T._32(131072,x.a,[M.a,T.i])],null,function(e,n){var t=n.component;e(n,1,0,T._41(n,1,0,T._29(n,3).transform("core.hasdatatosync",e(n,2,0,t.pageStr))))})}function m(e){return T._42(0,[(e()(),T._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),T._40(1,null,["",""])),T._33(2,{$a:0}),T._32(131072,x.a,[M.a,T.i])],null,function(e,n){var t=n.component;e(n,1,0,T._41(n,1,0,T._29(n,3).transform("core.hasdatatosync",e(n,2,0,t.moduleName))))})}function _(e){return T._42(0,[(e()(),T._16(0,0,null,null,10,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._15(3,147456,null,0,U.a,[D.a,T.p,T.K],{name:[0,"name"]},null),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[3,2]],null,1,null,h)),T._15(6,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[3,2]],null,1,null,m)),T._15(9,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,3,0,"warning");e(n,6,0,t.pageIsOffline);e(n,9,0,!t.pageIsOffline)},function(e,n){e(n,2,0,T._29(n,3)._hidden)})}function g(e){return T._42(0,[(e()(),T._16(0,0,null,null,4,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._15(3,147456,null,0,U.a,[D.a,T.p,T.K],{name:[0,"name"]},null),(e()(),T._40(4,null,["\n                        ","\n                    "]))],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,T._29(n,3)._hidden);e(n,4,0,t.pageWarning)})}function v(e){return T._42(0,[(e()(),T._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),T._15(1,540672,null,0,W.a,[T.p,q.a,B.a,j.a,M.a,G.a,z.a,V.a,$.a,Q.a,Y.a,X.a,[2,J.a],[2,Z.a],[2,ee.a],ne.a,te.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pageContent,t.component,t.componentId)},null)}function y(e){return T._42(0,[(e()(),T._16(0,0,null,null,2,"core-empty-box",[["icon","document"]],null,null,null,ie.b,ie.a)),T._15(1,49152,null,0,oe.a,[],{message:[0,"message"],icon:[1,"icon"],inline:[2,"inline"]},null),T._32(131072,x.a,[M.a,T.i])],function(e,n){e(n,1,0,T._41(n,1,0,T._29(n,2).transform("addon.mod_wiki.nocontent")),"document",!0)},null)}function b(e){return T._42(0,[(e()(),T._40(-1,null,["\n                "])),(e()(),T._16(1,0,null,null,23,"div",[["class","addon-mod_wiki-page-content"],["padding",""]],null,null,null,null,null)),(e()(),T._40(-1,null,["\n                    "])),(e()(),T._11(16777216,[[3,2]],null,1,null,p)),T._15(4,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n\n                    "])),(e()(),T._40(-1,null,["\n                    "])),(e()(),T._11(16777216,[[3,2]],null,1,null,_)),T._15(8,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n\n                    "])),(e()(),T._40(-1,null,["\n                    "])),(e()(),T._11(16777216,[[3,2]],null,1,null,g)),T._15(12,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n\n                    "])),(e()(),T._16(14,0,null,null,9,"article",[],null,null,null,null,null)),T._15(15,278528,null,0,K.i,[T.v,T.w,T.p,T.L],{ngClass:[0,"ngClass"]},null),T._33(16,{"addon-mod_wiki-noedit":0}),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[3,2]],null,1,null,v)),T._15(19,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[3,2]],null,1,null,y)),T._15(22,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n                    "])),(e()(),T._40(-1,null,["\n                "])),(e()(),T._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,4,0,t.isMainPage);e(n,8,0,t.pageIsOffline||t.hasOffline);e(n,12,0,t.pageWarning);e(n,15,0,e(n,16,0,!t.canEdit));e(n,19,0,t.pageContent);e(n,22,0,!t.pageContent)},null)}function P(e){return T._42(0,[(e()(),T._16(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,re.b,re.a)),T._15(1,1097728,null,3,le.a,[se.a,D.a,T.p,T.K,[2,ae.a]],null,null),T._37(335544320,7,{contentLabel:0}),T._37(603979776,8,{_buttons:1}),T._37(603979776,9,{_icons:1}),T._15(5,16384,null,0,ue.a,[D.a,T.p,T.K],null,null),(e()(),T._40(6,2,["\n                            ","\n                        "]))],null,function(e,n){e(n,6,0,n.parent.context.$implicit.label)})}function E(e){return T._42(0,[(e()(),T._16(0,0,null,null,3,"ion-note",[["color","danger"],["item-end",""]],null,null,null,null,null)),T._15(1,16384,null,0,ce.a,[D.a,T.p,T.K],{color:[0,"color"]},null),(e()(),T._40(2,null,["",""])),T._32(131072,x.a,[M.a,T.i])],function(e,n){e(n,1,0,"danger")},function(e,n){e(n,2,0,T._41(n,2,0,T._29(n,3).transform("core.offline")))})}function C(e){return T._42(0,[(e()(),T._16(0,0,null,null,9,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.goToPage(e.context.$implicit)&&i}return i},re.b,re.a)),T._15(1,1097728,null,3,le.a,[se.a,D.a,T.p,T.K,[2,ae.a]],null,null),T._37(335544320,10,{contentLabel:0}),T._37(603979776,11,{_buttons:1}),T._37(603979776,12,{_icons:1}),T._15(5,16384,null,0,de.a,[],null,null),(e()(),T._40(6,2,["\n                            ","\n                            "])),(e()(),T._11(16777216,[[5,2]],4,1,null,E)),T._15(8,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,2,["\n                        "]))],function(e,n){e(n,8,0,!n.context.$implicit.id)},function(e,n){e(n,6,0,n.context.$implicit.title)})}function I(e){return T._42(0,[(e()(),T._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[5,2]],null,1,null,P)),T._15(3,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n                        "])),(e()(),T._11(16777216,[[5,2]],null,1,null,C)),T._15(6,802816,null,0,K.j,[T.W,T.T,T.v],{ngForOf:[0,"ngForOf"]},null),(e()(),T._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.label);e(n,6,0,n.context.$implicit.pages)},null)}function S(e){return T._42(0,[(e()(),T._40(-1,null,["\n                "])),(e()(),T._16(1,0,null,null,5,"ion-list",[],null,null,null,null,null)),T._15(2,16384,null,0,fe.a,[D.a,T.p,T.K,G.a,pe.l,he.a],null,null),(e()(),T._40(-1,null,["\n                    "])),(e()(),T._11(16777216,[[5,2]],null,1,null,I)),T._15(5,802816,null,0,K.j,[T.W,T.T,T.v],{ngForOf:[0,"ngForOf"]},null),(e()(),T._40(-1,null,["\n                "])),(e()(),T._40(-1,null,["\n            "]))],function(e,n){e(n,5,0,n.component.map)},null)}function w(e){return T._42(0,[(e()(),T._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,me.b,me.a)),T._15(1,1228800,null,2,_e.a,[G.a],null,null),T._37(335544320,13,{_mainButton:0}),T._37(603979776,14,{_fabLists:1}),T._15(4,212992,null,0,ge.a,[T.p,Z.a],null,null),(e()(),T._40(-1,0,["\n    "])),(e()(),T._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.goToNewPage()&&i}return i},ve.b,ve.a)),T._15(7,49152,[[13,4]],0,ye.a,[D.a,T.p,T.K],null,null),T._32(131072,x.a,[M.a,T.i]),(e()(),T._40(-1,0,["\n        "])),(e()(),T._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._15(11,147456,null,0,U.a,[D.a,T.p,T.K],{name:[0,"name"]},null),(e()(),T._40(-1,0,["\n    "])),(e()(),T._40(-1,0,["\n"]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,T._41(n,6,0,T._29(n,8).transform("addon.mod_wiki.createpage")));e(n,10,0,T._29(n,11)._hidden)})}function A(e){return T._42(0,[T._37(402653184,1,{tabs:0}),(e()(),T._40(-1,null,["\n"])),(e()(),T._16(2,0,null,null,39,"core-navbar-buttons",[["end",""]],null,null,null,be.b,be.a)),T._15(3,245760,null,1,Pe.a,[T.p,$.a,B.a],null,null),T._37(603979776,2,{buttons:1}),(e()(),T._40(-1,0,["\n    "])),(e()(),T._40(-1,0,["\n    "])),(e()(),T._11(16777216,null,0,1,null,i)),T._15(8,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n\n    "])),(e()(),T._40(-1,0,["\n    "])),(e()(),T._11(16777216,null,0,1,null,o)),T._15(12,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n\n    "])),(e()(),T._16(14,0,null,0,26,"core-context-menu",[],null,null,null,Ee.b,Ee.a)),T._15(15,245760,null,0,F.a,[M.a,Ce.a,T.p,B.a,[2,Ie.a]],null,null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,r)),T._15(18,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,l)),T._15(21,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,s)),T._15(24,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,a)),T._15(27,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,u)),T._15(30,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,c)),T._15(33,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,d)),T._15(36,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._11(16777216,null,0,1,null,f)),T._15(39,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,0,["\n    "])),(e()(),T._40(-1,0,["\n"])),(e()(),T._40(-1,null,["\n\n"])),(e()(),T._40(-1,null,["\n"])),(e()(),T._16(44,0,null,null,26,"core-loading",[["class","core-loading-center"]],null,null,null,Se.b,Se.a)),T._15(45,638976,null,0,we.a,[M.a,T.p,te.a,z.a],{hideUntil:[0,"hideUntil"]},null),(e()(),T._40(-1,0,["\n\n    "])),(e()(),T._16(47,0,null,0,22,"core-tabs",[],null,null,null,Ae.b,Ae.a)),T._15(48,4964352,[[1,4]],0,Te.a,[T.p,Z.a,B.a,Y.a,G.a,M.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),T._40(-1,0,["\n        "])),(e()(),T._40(-1,0,["\n        "])),(e()(),T._16(51,0,null,0,7,"core-tab",[["icon","document"]],null,null,null,Oe.b,Oe.a)),T._15(52,245760,null,2,Ie.a,[Te.a,T.p,B.a],{title:[0,"title"],icon:[1,"icon"]},null),T._37(603979776,3,{template:0}),T._37(335544320,4,{scroll:0}),T._32(131072,x.a,[M.a,T.i]),(e()(),T._40(-1,null,["\n            "])),(e()(),T._11(0,[[3,2]],null,0,null,b)),(e()(),T._40(-1,null,["\n        "])),(e()(),T._40(-1,0,["\n\n        "])),(e()(),T._40(-1,0,["\n        "])),(e()(),T._16(61,0,null,0,7,"core-tab",[["icon","map"]],null,null,null,Oe.b,Oe.a)),T._15(62,245760,null,2,Ie.a,[Te.a,T.p,B.a],{title:[0,"title"],icon:[1,"icon"]},null),T._37(603979776,5,{template:0}),T._37(335544320,6,{scroll:0}),T._32(131072,x.a,[M.a,T.i]),(e()(),T._40(-1,null,["\n            "])),(e()(),T._11(0,[[5,2]],null,0,null,S)),(e()(),T._40(-1,null,["\n        "])),(e()(),T._40(-1,0,["\n    "])),(e()(),T._40(-1,0,["\n\n"])),(e()(),T._40(-1,null,["\n\n"])),(e()(),T._11(16777216,null,null,1,null,w)),T._15(73,16384,null,0,K.k,[T.W,T.T],{ngIf:[0,"ngIf"]},null),(e()(),T._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0);e(n,8,0,t.subwikiData.count>1);e(n,12,0,t.showHomeButton),e(n,15,0);e(n,18,0,t.externalUrl);e(n,21,0,t.description);e(n,24,0,t.loaded&&!t.hasOffline&&t.isOnline&&!t.pageIsOffline);e(n,27,0,t.loaded&&t.isOnline&&(t.hasOffline||t.pageIsOffline));e(n,30,0,t.canEdit&&(t.isOnline||t.pageIsOffline));e(n,33,0,t.canEdit);e(n,36,0,t.prefetchStatusIcon);e(n,39,0,t.size);e(n,45,0,t.loaded);e(n,48,0,t.selectedTab,t.loaded);e(n,52,0,T._41(n,52,0,T._29(n,55).transform("addon.mod_wiki.viewpage")),"document");e(n,62,0,T._41(n,62,0,T._29(n,65).transform("addon.mod_wiki.map")),"map");e(n,73,0,t.canEdit)},null)}t.d(n,"b",function(){return Re}),n.c=A,t.d(n,"a",function(){return Fe});var T=t(1),O=t(46),k=t(43),D=t(7),x=t(27),M=t(19),U=t(47),N=t(81),R=t(74),F=t(70),L=t(103),H=t(91),K=t(8),W=t(42),q=t(2),B=t(5),j=t(11),G=t(15),z=t(3),V=t(26),$=t(6),Q=t(17),Y=t(10),X=t(18),J=t(22),Z=t(24),ee=t(35),ne=t(38),te=t(13),ie=t(120),oe=t(109),re=t(31),le=t(21),se=t(20),ae=t(28),ue=t(108),ce=t(225),de=t(33),fe=t(78),pe=t(39),he=t(32),me=t(355),_e=t(232),ge=t(291),ve=t(356),ye=t(196),be=t(89),Pe=t(82),Ee=t(80),Ce=t(63),Ie=t(69),Se=t(49),we=t(48),Ae=t(441),Te=t(149),Oe=t(442),ke=t(476),De=t(209),xe=t(257),Me=t(289),Ue=t(68),Ne=t(45),Re=T._14({encapsulation:2,styles:[],data:{}}),Fe=T._12("addon-mod-wiki-index",ke.a,function(e){return T._42(0,[(e()(),T._16(0,0,null,null,1,"addon-mod-wiki-index",[],null,null,null,A,Re)),T._15(1,245760,null,0,ke.a,[T.u,De.a,[2,Z.a],xe.a,Me.a,J.a,z.a,Ue.a,Ne.a,Ce.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action",pageId:"pageId",pageTitle:"pageTitle",wikiId:"wikiId",subwikiId:"subwikiId",userId:"userId",groupId:"groupId"},{dataRetrieved:"dataRetrieved"},[])},,function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,l.b,l.a)),r._15(1,376832,[[1,4]],0,s.a,[a.a,u.a,[2,c.a],r.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"]},null)],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult)},null)}function o(e){return r._42(0,[r._37(671088640,1,{content:0}),(e()(),r._16(1,0,null,null,13,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,d.b,d.a)),r._15(2,4374528,null,0,f.a,[p.a,h.a,m.a,r.p,r.K,_.a,g.a,r.D,[2,v.a],[2,c.a]],null,null),(e()(),r._40(-1,1,["\n    "])),(e()(),r._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshData(t)&&i}return i},null,null)),r._15(5,212992,null,0,y.a,[h.a,f.a,r.D,b.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,P.b,P.a)),r._15(8,114688,null,0,E.a,[y.a,p.a],{pullingText:[0,"pullingText"]},null),r._32(131072,C.a,[I.a,r.i]),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,1,["\n    "])),(e()(),r._11(16777216,null,1,1,null,i)),r._15(13,16384,null,0,S.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.content&&t.content.dataLoaded);e(n,8,0,r._19(1,"",r._41(n,8,0,r._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.component&&t.method)},function(e,n){e(n,1,0,r._29(n,2).statusbarPadding,r._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==r._29(n,5).state,r._29(n,5)._top);e(n,7,0,r._29(n,8).r.state)})}t.d(n,"a",function(){return T});var r=t(1),l=t(484),s=t(155),a=t(5),u=t(57),c=t(22),d=t(185),f=t(24),p=t(7),h=t(15),m=t(32),_=t(34),g=t(107),v=t(37),y=t(145),b=t(39),P=t(201),E=t(159),C=t(27),I=t(19),S=t(8),w=t(418),A=r._14({encapsulation:2,styles:[],data:{}}),T=r._12("core-site-plugins-course-option",w.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-course-option",[],null,null,null,o,A)),r._15(1,114688,null,0,w.a,[u.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",handlerUniqueName:"handlerUniqueName"},{},[])},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,l.b,l.a)),r._15(1,376832,[[1,4]],0,s.a,[a.a,u.a,[2,c.a],r.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"]},null)],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult,t.data)},null)}function o(e){return r._42(0,[r._37(671088640,1,{content:0}),(e()(),r._11(16777216,null,null,1,null,i)),r._15(2,16384,null,0,d.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.component&&t.method)},null)}t.d(n,"a",function(){return h});var r=t(1),l=t(484),s=t(155),a=t(5),u=t(57),c=t(22),d=t(8),f=t(419),p=r._14({encapsulation:2,styles:[],data:{}}),h=r._12("core-site-plugins-course-format",f.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-site-plugins-course-format",[],null,null,null,o,p)),r._15(1,573440,null,0,f.a,[u.a],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId",coreCourseFormatComponent:"coreCourseFormatComponent"},{completionChanged:"completionChanged"},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(422),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-user-profile-field",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-user-profile-field",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",signup:"signup",registerAuth:"registerAuth"},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(420),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-question",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-question",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(421),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-question-behaviour",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-question-behaviour",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(423),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-quiz-access-rule",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-quiz-access-rule",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(424),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-assign-feedback",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-assign-feedback",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(425),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-assign-submission",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-assign-submission",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var i=!0;if("created"===n){i=!1!==e.component.componentCreated(t)&&i}return i},r.b,r.a)),o._15(1,966656,null,0,l.a,[s.a,o.i,o.p,[2,a.a],o.w,u.a,c.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(195),l=t(169),s=t(138),a=t(22),u=t(5),c=t(3),d=t(620),f=t(57),p=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-siteplugins-workshop-assessment-strategy",d.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-siteplugins-workshop-assessment-strategy",[],null,null,null,i,p)),o._15(1,114688,null,0,d.a,[f.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var i=t(1),o=t(969),r=function(){function e(e){this.longPress=new i.r,this.el=e.nativeElement,this.el.setAttribute("tappable","")}return e.prototype.ngOnInit=function(){var e=this;this.pressGesture=new o.a(this.el),this.pressGesture.listen(),this.pressGesture.on("press",function(n){e.longPress.emit(n)})},e.prototype.ngOnDestroy=function(){this.pressGesture.destroy()},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(e,n){this.textUtils=n,this.logger=e.getInstance("CoreBytesToSizePipe")}return e.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.textUtils.bytesToSize(e)},e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var i=function(){function e(){this.replacePattern=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])(?![^<]*>|[^<>]*<\/)/gim}return e.prototype.transform=function(e){return e.replace(this.replacePattern,'<a href="$1">$1</a>')},e}()},function(e,n,t){"use strict";var i=t(375);Object(i.j)("coreShowHideAnimation",[Object(i.i)(":enter",[Object(i.h)({opacity:0}),Object(i.e)("500ms ease-in-out",Object(i.h)({opacity:1}))]),Object(i.i)(":leave",[Object(i.h)({opacity:1}),Object(i.e)("500ms ease-in-out",Object(i.h)({opacity:0}))])]),Object(i.j)("coreSlideInOut",[Object(i.i)("void => fromLeft",[Object(i.h)({transform:"translateX(0)",opacity:1}),Object(i.e)(300,Object(i.f)([Object(i.h)({opacity:0,transform:"translateX(-100%)",offset:0}),Object(i.h)({opacity:1,transform:"translateX(5%)",offset:.7}),Object(i.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(i.i)("fromLeft => void",[Object(i.h)({transform:"translateX(-100%)",opacity:0}),Object(i.e)(300,Object(i.f)([Object(i.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(i.h)({opacity:1,transform:"translateX(5%)",offset:.3}),Object(i.h)({opacity:0,transform:"translateX(-100%)",offset:1})]))]),Object(i.i)("void => fromRight",[Object(i.h)({transform:"translateX(0)",opacity:1}),Object(i.e)(300,Object(i.f)([Object(i.h)({opacity:0,transform:"translateX(100%)",offset:0}),Object(i.h)({opacity:1,transform:"translateX(-5%)",offset:.7}),Object(i.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(i.i)("fromRight => void",[Object(i.h)({transform:"translateX(-100%)",opacity:0}),Object(i.e)(300,Object(i.f)([Object(i.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(i.h)({opacity:1,transform:"translateX(-5%)",offset:.3}),Object(i.h)({opacity:0,transform:"translateX(100%)",offset:1})]))])])},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadChapter(e.context.$implicit.id)&&i}return i},l.b,l.a)),r._15(1,1097728,null,3,s.a,[a.a,u.a,r.p,r.K,[2,c.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,d.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,2,1,"p",[],[[1,"padding-left",0]],null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "]))],null,function(e,n){e(n,7,0,1==n.context.$implicit.level||null);e(n,8,0,n.context.$implicit.title)})}function o(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),r._15(1,16384,null,0,f.a,[u.a,r.p,r.K,p.a,h.l,m.a],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(4,802816,null,0,_.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.chapters)},null)}t.d(n,"a",function(){return P});var r=t(1),l=t(31),s=t(21),a=t(20),u=t(7),c=t(28),d=t(33),f=t(78),p=t(15),h=t(39),m=t(32),_=t(8),g=t(542),v=t(61),y=t(37),b=r._14({encapsulation:2,styles:[],data:{}}),P=r._12("addon-mod-book-toc-popover",g.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-book-toc-popover",[],null,null,null,o,b)),r._15(1,49152,null,0,g.a,[v.a,y.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return r._42(0,[(e()(),r._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,l.b,l.a)),r._15(1,1097728,null,3,s.a,[a.a,u.a,r.p,r.K,[2,c.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(5,16384,null,0,d.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[2,4]],0,f.a,[u.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._32(131072,p.a,[h.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==r._29(e,13)._click(t)&&i}if("ionSelect"===n){i=!1!==o.modePicked(t,e.context.$implicit.key)&&i}return i},m.b,m.a)),r._15(13,245760,null,0,_.a,[a.a,u.a,r.p,r.K,[2,s.a],[2,g.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),r._40(-1,2,["\n    "]))],function(e,n){e(n,13,0,n.context.$implicit.key)},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,10).transform(n.context.$implicit.langkey)));e(n,12,0,r._29(n,13)._disabled)})}function o(e){return r._42(0,[(e()(),r._16(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.selectedMode=t)&&i}return i},null,null)),r._15(1,1064960,null,1,g.a,[r.K,r.p,r.i],null,null),r._37(335544320,1,{_header:0}),r._35(1024,null,v.l,function(e){return[e]},[g.a]),r._15(4,671744,null,0,v.q,[[8,null],[8,null],[8,null],[2,v.l]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,v.m,null,[v.q]),r._15(6,16384,null,0,v.n,[v.m],null,null),r._15(7,16384,null,0,y.a,[u.a,r.p,r.K,b.a,P.l,E.a],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,i)),r._15(10,802816,null,0,C.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.selectedMode);e(n,10,0,t.modes)},function(e,n){e(n,0,0,r._29(n,6).ngClassUntouched,r._29(n,6).ngClassTouched,r._29(n,6).ngClassPristine,r._29(n,6).ngClassDirty,r._29(n,6).ngClassValid,r._29(n,6).ngClassInvalid,r._29(n,6).ngClassPending)})}t.d(n,"a",function(){return T});var r=t(1),l=t(31),s=t(21),a=t(20),u=t(7),c=t(28),d=t(33),f=t(62),p=t(27),h=t(19),m=t(167),_=t(136),g=t(127),v=t(23),y=t(78),b=t(15),P=t(39),E=t(32),C=t(8),I=t(593),S=t(61),w=t(37),A=r._14({encapsulation:2,styles:[],data:{}}),T=r._12("addon-mod-glossary-mode-picker-popover",I.a,function(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-glossary-mode-picker-popover",[],null,null,null,o,A)),r._15(1,49152,null,0,I.a,[S.a,w.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return l._42(0,[(e()(),l._16(0,0,null,null,0,"span",[["padding-left",""]],null,null,null,null,null))],null,null)}function o(e){return l._42(0,[(e()(),l._16(0,0,null,null,9,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],[[2,"core-bold",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadItem(e.context.$implicit.href)&&i}return i},s.b,s.a)),l._15(1,1097728,null,3,a.a,[u.a,c.a,l.p,l.K,[2,d.a]],null,null),l._37(335544320,1,{contentLabel:0}),l._37(603979776,2,{_buttons:1}),l._37(603979776,3,{_icons:1}),l._15(5,16384,null,0,f.a,[],null,null),(e()(),l._40(-1,2,["\n        "])),(e()(),l._11(16777216,null,2,1,null,i)),l._15(8,802816,null,0,p.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(e()(),l._40(9,2,["","\n    "]))],function(e,n){e(n,8,0,n.component.getNumberForPadding(n.context.$implicit.level))},function(e,n){e(n,0,0,!n.context.$implicit.href);e(n,9,0,n.context.$implicit.title)})}function r(e){return l._42(0,[(e()(),l._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),l._15(1,16384,null,0,h.a,[c.a,l.p,l.K,m.a,_.l,g.a],null,null),(e()(),l._40(-1,null,["\n    "])),(e()(),l._11(16777216,null,null,1,null,o)),l._15(4,802816,null,0,p.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(e()(),l._40(-1,null,["\n"])),(e()(),l._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.items)},null)}t.d(n,"a",function(){return E});var l=t(1),s=t(31),a=t(21),u=t(20),c=t(7),d=t(28),f=t(33),p=t(8),h=t(78),m=t(15),_=t(39),g=t(32),v=t(595),y=t(61),b=t(37),P=l._14({encapsulation:2,styles:[],data:{}}),E=l._12("addon-mod-imscp-toc-popover",v.a,function(e){return l._42(0,[(e()(),l._16(0,0,null,null,1,"addon-mod-imscp-toc-popover",[],null,null,null,r,P)),l._15(1,49152,null,0,v.a,[y.a,b.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,c.a,[],null,null),(e()(),o._40(6,2,["",""])),o._32(131072,d.a,[f.a,o.i])],null,function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,7).transform("addon.mod_quiz.connectionerror")))})}t.d(n,"a",function(){return m});var o=t(1),r=t(31),l=t(21),s=t(20),a=t(7),u=t(28),c=t(33),d=t(27),f=t(19),p=t(709),h=o._14({encapsulation:2,styles:[],data:{}}),m=o._12("addon-mod-quiz-connection-error",p.a,function(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-quiz-connection-error",[],null,null,null,i,h)),o._15(1,49152,null,0,p.a,[],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return u._42(0,[(e()(),u._16(0,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),u._15(1,1097728,null,3,d.a,[f.a,p.a,u.p,u.K,[2,h.a]],null,null),u._37(335544320,1,{contentLabel:0}),u._37(603979776,2,{_buttons:1}),u._37(603979776,3,{_icons:1}),u._15(5,16384,null,0,m.a,[],null,null),(e()(),u._40(-1,2,["\n        "])),(e()(),u._16(7,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),u._40(8,null,["",""])),u._33(9,{number:0}),u._32(131072,_.a,[g.a,u.i]),(e()(),u._40(-1,2,["\n    "]))],null,function(e,n){var t=n.component;e(n,8,0,u._41(n,8,0,u._29(n,10).transform("addon.mod_scorm.dataattemptshown",e(n,9,0,t.attemptToContinue))))})}function o(e){return u._42(0,[(e()(),u._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,c.b,c.a)),u._15(1,1097728,null,3,d.a,[f.a,p.a,u.p,u.K,[2,h.a]],null,null),u._37(335544320,4,{contentLabel:0}),u._37(603979776,5,{_buttons:1}),u._37(603979776,6,{_icons:1}),u._15(5,16384,null,0,m.a,[],null,null),(e()(),u._40(-1,2,["\n        "])),(e()(),u._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),u._40(8,null,["",""])),u._32(131072,_.a,[g.a,u.i]),(e()(),u._40(-1,2,["\n    "]))],null,function(e,n){e(n,8,0,u._41(n,8,0,u._29(n,9).transform("addon.mod_scorm.browsemode")))})}function r(e){return u._42(0,[(e()(),u._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,c.b,c.a)),u._15(1,1097728,null,3,d.a,[f.a,p.a,u.p,u.K,[2,h.a]],null,null),u._37(335544320,7,{contentLabel:0}),u._37(603979776,8,{_buttons:1}),u._37(603979776,9,{_icons:1}),u._15(5,16384,null,0,m.a,[],null,null),(e()(),u._40(-1,2,["\n        "])),(e()(),u._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),u._40(8,null,["",""])),u._32(131072,_.a,[g.a,u.i]),(e()(),u._40(-1,2,["\n    "]))],null,function(e,n){e(n,8,0,u._41(n,8,0,u._29(n,9).transform("addon.mod_scorm.reviewmode")))})}function l(e){return u._42(0,[(e()(),u._16(0,0,null,null,13,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[1,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadSco(e.parent.context.$implicit)&&i}return i},c.b,c.a)),u._15(1,278528,null,0,v.i,[u.v,u.w,u.p,u.L],{ngClass:[0,"ngClass"]},null),u._31(2,1),u._15(3,1097728,null,3,d.a,[f.a,p.a,u.p,u.K,[2,h.a]],null,null),u._37(335544320,10,{contentLabel:0}),u._37(603979776,11,{_buttons:1}),u._37(603979776,12,{_icons:1}),u._15(7,16384,null,0,m.a,[],null,null),(e()(),u._40(-1,2,["\n            "])),(e()(),u._16(9,0,null,2,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),u._40(-1,2,["\n            "])),(e()(),u._16(11,0,null,2,1,"span",[],null,null,null,null,null)),(e()(),u._40(12,null,["",""])),(e()(),u._40(-1,2,["\n        "]))],function(e,n){e(n,1,0,e(n,2,0,"core-padding-"+n.parent.context.$implicit.level))},function(e,n){e(n,0,0,!n.parent.context.$implicit.prereq||!n.parent.context.$implicit.launch||null);e(n,9,0,n.parent.context.$implicit.image.url,n.parent.context.$implicit.image.description);e(n,12,0,n.parent.context.$implicit.title)})}function s(e){return u._42(0,[(e()(),u._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),u._40(-1,null,["\n        "])),(e()(),u._11(16777216,null,null,1,null,l)),u._15(3,16384,null,0,v.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.context.$implicit.isvisible)},null)}function a(e){return u._42(0,[(e()(),u._16(0,0,null,null,15,"ion-list",[],null,null,null,null,null)),u._15(1,16384,null,0,y.a,[p.a,u.p,u.K,b.a,P.l,E.a],null,null),(e()(),u._40(-1,null,["\n    "])),(e()(),u._11(16777216,null,null,1,null,i)),u._15(4,16384,null,0,v.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n    "])),(e()(),u._11(16777216,null,null,1,null,o)),u._15(7,16384,null,0,v.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n    "])),(e()(),u._11(16777216,null,null,1,null,r)),u._15(10,16384,null,0,v.k,[u.W,u.T],{ngIf:[0,"ngIf"]},null),(e()(),u._40(-1,null,["\n\n    "])),(e()(),u._40(-1,null,["\n    "])),(e()(),u._11(16777216,null,null,1,null,s)),u._15(14,802816,null,0,v.j,[u.W,u.T,u.v],{ngForOf:[0,"ngForOf"]},null),(e()(),u._40(-1,null,["\n"])),(e()(),u._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.attemptToContinue);e(n,7,0,t.isBrowse);e(n,10,0,t.isReview);e(n,14,0,t.toc)},null)}t.d(n,"a",function(){return A});var u=t(1),c=t(31),d=t(21),f=t(20),p=t(7),h=t(28),m=t(33),_=t(27),g=t(19),v=t(8),y=t(78),b=t(15),P=t(39),E=t(32),C=t(710),I=t(61),S=t(37),w=u._14({encapsulation:2,styles:[],data:{}}),A=u._12("addon-mod-scorm-toc-popover",C.a,function(e){return u._42(0,[(e()(),u._16(0,0,null,null,1,"addon-mod-scorm-toc-popover",[],null,null,null,a,w)),u._15(1,49152,null,0,C.a,[I.a,S.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return a._42(0,[(e()(),a._16(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,u.b,u.a)),a._15(1,1097728,null,3,c.a,[d.a,f.a,a.p,a.K,[2,p.a]],null,null),a._37(335544320,1,{contentLabel:0}),a._37(603979776,2,{_buttons:1}),a._37(603979776,3,{_icons:1}),a._15(5,16384,null,0,h.a,[f.a,a.p,a.K],null,null),(e()(),a._40(6,2,["\n            ","\n        "]))],null,function(e,n){e(n,6,0,n.parent.context.$implicit.label)})}function o(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"ion-icon",[["item-end",""],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a._15(1,147456,[[6,4]],0,m.a,[f.a,a.p,a.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"checkmark")},function(e,n){e(n,0,0,a._29(n,1)._hidden)})}function r(e){return a._42(0,[(e()(),a._16(0,0,null,null,11,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[1,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.openSubwiki(e.context.$implicit)&&i}return i},u.b,u.a)),a._15(1,278528,null,0,_.i,[a.v,a.w,a.p,a.L],{ngClass:[0,"ngClass"]},null),a._33(2,{"addon-mod_wiki-subwiki-selected":0}),a._15(3,1097728,null,3,c.a,[d.a,f.a,a.p,a.K,[2,p.a]],null,null),a._37(335544320,4,{contentLabel:0}),a._37(603979776,5,{_buttons:1}),a._37(603979776,6,{_icons:1}),a._15(7,16384,null,0,g.a,[],null,null),(e()(),a._40(8,2,["\n            ","\n            "])),(e()(),a._11(16777216,null,4,1,null,o)),a._15(10,16384,null,0,_.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,t.isSubwikiSelected(n.context.$implicit)));e(n,10,0,t.isSubwikiSelected(n.context.$implicit))},function(e,n){e(n,0,0,!n.context.$implicit.canedit&&n.context.$implicit.id<=0||null);e(n,8,0,n.context.$implicit.name)})}function l(e){return a._42(0,[(e()(),a._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),a._40(-1,null,["\n        "])),(e()(),a._11(16777216,null,null,1,null,i)),a._15(3,16384,null,0,_.k,[a.W,a.T],{ngIf:[0,"ngIf"]},null),(e()(),a._40(-1,null,["\n        "])),(e()(),a._11(16777216,null,null,1,null,r)),a._15(6,802816,null,0,_.j,[a.W,a.T,a.v],{ngForOf:[0,"ngForOf"]},null),(e()(),a._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.context.$implicit.label);e(n,6,0,n.context.$implicit.subwikis)},null)}function s(e){return a._42(0,[(e()(),a._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),a._15(1,16384,null,0,v.a,[f.a,a.p,a.K,y.a,b.l,P.a],null,null),(e()(),a._40(-1,null,["\n    "])),(e()(),a._11(16777216,null,null,1,null,l)),a._15(4,802816,null,0,_.j,[a.W,a.T,a.v],{ngForOf:[0,"ngForOf"]},null),(e()(),a._40(-1,null,["\n"])),(e()(),a._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.subwikis)},null)}t.d(n,"a",function(){return w});var a=t(1),u=t(31),c=t(21),d=t(20),f=t(7),p=t(28),h=t(108),m=t(47),_=t(8),g=t(33),v=t(78),y=t(15),b=t(39),P=t(32),E=t(608),C=t(61),I=t(37),S=a._14({encapsulation:2,styles:[],data:{}}),w=a._12("addon-mod-wiki-subwiki-picker",E.a,function(e){return a._42(0,[(e()(),a._16(0,0,null,null,1,"addon-mod-wiki-subwiki-picker",[],null,null,null,s,S)),a._15(1,49152,null,0,E.a,[C.a,I.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function i(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.profile.fullname)})}function o(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],[[2,"addon-has-overriden-grade",null]],null,null,null,null)),(e()(),x._40(1,null,["\n                ",": ","\n            "])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,0,0,t.showGrade(t.submission.submissiongradeover));e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongrade)})}function r(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),x._40(1,null,["\n                ",": ","\n            "])),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_workshop.gradeover")),t.submission.submissiongradeover)})}function l(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["\n                ",": ","\n            "])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.gradinggradeof",e(n,2,0,t.workshop.gradinggrade))),t.submission.gradinggrade)})}function s(e){return x._42(0,[(e()(),x._16(0,0,null,null,6,"ion-note",[["item-end",""]],null,null,null,null,null)),x._15(1,16384,null,0,N.a,[R.a,x.p,x.K],null,null),(e()(),x._40(-1,null,["\n                "])),(e()(),x._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(4,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(5,null,[" ","\n            "])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,4,0,"time")},function(e,n){e(n,3,0,x._29(n,4)._hidden);e(n,5,0,x._41(n,5,0,x._29(n,6).transform("core.notsent")))})}function a(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),x._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(2,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(3,null,[" ",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,2,0,"time")},function(e,n){e(n,1,0,x._29(n,2)._hidden);e(n,3,0,x._41(n,3,0,x._29(n,4).transform("core.notsent")))})}function u(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),x._16(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(2,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(3,null,[" ",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,2,0,"trash")},function(e,n){e(n,1,0,x._29(n,2)._hidden);e(n,3,0,x._41(n,3,0,x._29(n,4).transform("core.deletedoffline")))})}function c(e){return x._42(0,[(e()(),x._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),x._15(1,16384,null,0,N.a,[R.a,x.p,x.K],null,null),(e()(),x._40(2,null,["\n                ","\n                "])),x._34(3,1),(e()(),x._11(16777216,null,null,1,null,a)),x._15(5,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n                "])),(e()(),x._11(16777216,null,null,1,null,u)),x._15(8,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,5,0,t.submission.offline);e(n,8,0,t.submission.deleted)},function(e,n){var t=n.component;e(n,2,0,x._41(n,2,0,e(n,3,0,x._29(n.parent.parent,0),t.submission.timemodified)))})}function d(e){return x._42(0,[(e()(),x._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,H.b,H.a)),x._15(1,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,4,{contentLabel:0}),x._37(603979776,5,{_buttons:1}),x._37(603979776,6,{_icons:1}),x._15(5,16384,null,0,B.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,2,1,"core-format-text",[],null,null,null,null,null)),x._15(8,540672,null,0,j.a,[x.p,G.a,z.a,V.a,U.a,$.a,Q.a,Y.a,X.a,J.a,Z.a,ee.a,[2,ne.a],[2,te.a],[2,ie.a],oe.a,re.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),x._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.submission.content,t.component,t.componentId)},null)}function f(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-file",[],null,null,null,le.b,le.a)),x._15(1,245760,null,0,se.a,[G.a,Q.a,z.a,J.a,Z.a,ae.a,ue.a,re.a,V.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.componentId)},null)}function p(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"core-local-file",[],null,null,null,ce.b,ce.a)),x._15(1,114688,null,0,de.a,[ue.a,Q.a,U.a,V.a,fe.a,z.a,pe.a],{file:[0,"file"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function h(e){return x._42(0,[(e()(),x._16(0,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),x._15(1,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,7,{contentLabel:0}),x._37(603979776,8,{_buttons:1}),x._37(603979776,9,{_icons:1}),x._15(5,16384,null,0,B.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,f)),x._15(9,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,p)),x._15(13,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "]))],function(e,n){e(n,9,0,!n.context.$implicit.name);e(n,13,0,n.context.$implicit.name)},null)}function m(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"h2",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.feedbackby",e(n,2,0,t.evaluateByProfile.fullname))))})}function _(e){return x._42(0,[(e()(),x._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,H.b,H.a)),x._15(1,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,10,{contentLabel:0}),x._37(603979776,11,{_buttons:1}),x._37(603979776,12,{_icons:1}),x._15(5,16384,null,0,B.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,he.b,he.a)),x._15(8,16384,null,0,me.a,[],null,null),x._15(9,770048,null,0,_e.a,[ne.a,G.a,Q.a,Z.a,re.a],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),x._40(-1,2,["\n\n            "])),(e()(),x._11(16777216,null,2,1,null,m)),x._15(12,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(14,0,null,2,1,"core-format-text",[],null,null,null,null,null)),x._15(15,540672,null,0,j.a,[x.p,G.a,z.a,V.a,U.a,$.a,Q.a,Y.a,X.a,J.a,Z.a,ee.a,[2,ne.a],[2,te.a],[2,ie.a],oe.a,re.a],{text:[0,"text"]},null),(e()(),x._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,t.evaluateByProfile,t.evaluateByProfile.id,t.courseId);e(n,12,0,t.evaluateByProfile&&t.evaluateByProfile.fullname);e(n,15,0,t.submission.feedbackauthor)},null)}function g(e){return x._42(0,[(e()(),x._16(0,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),x._15(1,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,13,{contentLabel:0}),x._37(603979776,14,{_buttons:1}),x._37(603979776,15,{_icons:1}),x._15(5,16384,null,0,B.a,[],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(7,0,null,2,6,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoSubmission()&&i}return i},ge.b,ge.a)),x._15(8,1097728,[[14,4]],0,ve.a,[[8,""],R.a,x.p,x.K],{block:[0,"block"]},null),(e()(),x._40(9,0,["\n                ","\n                "])),x._32(131072,M.a,[U.a,x.i]),(e()(),x._16(11,0,null,0,1,"ion-icon",[["item-end",""],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(12,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(-1,0,["\n            "])),(e()(),x._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"");e(n,12,0,"arrow-forward")},function(e,n){e(n,9,0,x._41(n,9,0,x._29(n,10).transform("core.showmore")));e(n,11,0,x._29(n,12)._hidden)})}function v(e){return x._42(0,[(e()(),x._16(0,0,null,null,46,"div",[],null,null,null,null,null)),(e()(),x._40(-1,null,["\n        "])),(e()(),x._16(2,0,null,null,31,"ion-list-header",[["class","item"],["text-wrap",""]],null,null,null,H.b,H.a)),x._15(3,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,1,{contentLabel:0}),x._37(603979776,2,{_buttons:1}),x._37(603979776,3,{_icons:1}),x._15(7,16384,null,0,ye.a,[R.a,x.K,x.p,[8,null]],null,null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,he.b,he.a)),x._15(10,16384,null,0,me.a,[],null,null),x._15(11,770048,null,0,_e.a,[ne.a,G.a,Q.a,Z.a,re.a],{user:[0,"user"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._16(13,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),x._40(14,null,["",""])),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,i)),x._15(17,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,o)),x._15(20,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,r)),x._15(23,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,2,1,null,l)),x._15(26,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,4,1,null,s)),x._15(29,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n            "])),(e()(),x._11(16777216,null,4,1,null,c)),x._15(32,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,d)),x._15(36,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,h)),x._15(39,802816,null,0,L.j,[x.W,x.T,x.v],{ngForOf:[0,"ngForOf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,_)),x._15(42,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "])),(e()(),x._11(16777216,null,null,1,null,g)),x._15(45,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,11,0,t.profile);e(n,17,0,t.profile&&t.profile.fullname);e(n,20,0,t.showGrade(t.submission.submissiongrade));e(n,23,0,t.showGrade(t.submission.submissiongradeover));e(n,26,0,t.access.canviewallsubmissions&&t.showGrade(t.submission.gradinggrade));e(n,29,0,!t.submission.timemodified);e(n,32,0,t.submission.timemodified);e(n,36,0,t.submission.content);e(n,39,0,t.submission.attachmentfiles);e(n,42,0,t.viewDetails&&t.submission.feedbackauthor);e(n,45,0,t.viewDetails)},function(e,n){e(n,14,0,n.component.submission.title)})}function y(e){return x._42(0,[(e()(),x._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.profile.fullname)})}function b(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["\n            ",": "," / ","\n        "])),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_workshop.receivedgrades")),t.submission.reviewedbycount,t.submission.reviewedby.length)})}function P(e){return x._42(0,[(e()(),x._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["\n            ",": "," / ","\n        "])),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,2).transform("addon.mod_workshop.givengrades")),t.submission.reviewerofcount,t.submission.reviewerof.length)})}function E(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["\n            ",": ","\n        "])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongrade)})}function C(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),x._40(1,null,["\n            ",": ","\n        "])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongradeover)})}function I(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),x._40(1,null,["\n            ",": ","\n        "])),x._33(2,{$a:0}),x._32(131072,M.a,[U.a,x.i])],null,function(e,n){var t=n.component;e(n,1,0,x._41(n,1,0,x._29(n,3).transform("addon.mod_workshop.gradinggradeof",e(n,2,0,t.workshop.gradinggrade))),t.submission.gradinggrade)})}function S(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"ion-badge",[["color","success"]],null,null,null,null,null)),x._15(1,16384,null,0,be.a,[R.a,x.p,x.K],{color:[0,"color"]},null),(e()(),x._40(2,null,["",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,1,0,"success")},function(e,n){e(n,2,0,x._41(n,2,0,x._29(n,3).transform("addon.mod_workshop.assessedsubmission")))})}function w(e){return x._42(0,[(e()(),x._16(0,0,null,null,3,"ion-badge",[["color","danger"]],null,null,null,null,null)),x._15(1,16384,null,0,be.a,[R.a,x.p,x.K],{color:[0,"color"]},null),(e()(),x._40(2,null,["",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,1,0,"danger")},function(e,n){e(n,2,0,x._41(n,2,0,x._29(n,3).transform("addon.mod_workshop.notassessed")))})}function A(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),x._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(2,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(3,null,[" ",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,2,0,"time")},function(e,n){e(n,1,0,x._29(n,2)._hidden);e(n,3,0,x._41(n,3,0,x._29(n,4).transform("core.notsent")))})}function T(e){return x._42(0,[(e()(),x._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),x._16(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),x._15(2,147456,null,0,F.a,[R.a,x.p,x.K],{name:[0,"name"]},null),(e()(),x._40(3,null,[" ",""])),x._32(131072,M.a,[U.a,x.i])],function(e,n){e(n,2,0,"trash")},function(e,n){e(n,1,0,x._29(n,2)._hidden);e(n,3,0,x._41(n,3,0,x._29(n,4).transform("core.deletedoffline")))})}function O(e){return x._42(0,[(e()(),x._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),x._15(1,16384,null,0,N.a,[R.a,x.p,x.K],null,null),(e()(),x._40(2,null,["\n            ","\n            "])),x._34(3,1),(e()(),x._11(16777216,null,null,1,null,A)),x._15(5,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n            "])),(e()(),x._11(16777216,null,null,1,null,T)),x._15(8,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,5,0,t.offline);e(n,8,0,t.submission.deleted)},function(e,n){var t=n.component;e(n,2,0,x._41(n,2,0,e(n,3,0,x._29(n.parent.parent,0),t.submission.timemodified)))})}function k(e){return x._42(0,[(e()(),x._16(0,0,null,null,40,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.gotoSubmission()&&i}return i},H.b,H.a)),x._15(1,1097728,null,3,K.a,[W.a,R.a,x.p,x.K,[2,q.a]],null,null),x._37(335544320,16,{contentLabel:0}),x._37(603979776,17,{_buttons:1}),x._37(603979776,18,{_icons:1}),x._15(5,16384,null,0,B.a,[],null,null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,he.b,he.a)),x._15(8,16384,null,0,me.a,[],null,null),x._15(9,770048,null,0,_e.a,[ne.a,G.a,Q.a,Z.a,re.a],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),x._40(-1,2,["\n\n        "])),(e()(),x._16(11,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),x._40(12,null,["",""])),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,y)),x._15(15,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,b)),x._15(18,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,P)),x._15(21,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,E)),x._15(24,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,C)),x._15(27,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,I)),x._15(30,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n\n        "])),(e()(),x._11(16777216,null,2,1,null,S)),x._15(33,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n        "])),(e()(),x._11(16777216,null,2,1,null,w)),x._15(36,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n\n        "])),(e()(),x._11(16777216,null,4,1,null,O)),x._15(39,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,t.profile,t.profile&&t.profile.id,t.courseId);e(n,15,0,t.profile&&t.profile.fullname);e(n,18,0,t.submission.reviewedbycount);e(n,21,0,t.submission.reviewerofcount);e(n,24,0,!t.showGrade(t.submission.submissiongradeover)&&t.showGrade(t.submission.submissiongrade));e(n,27,0,t.showGrade(t.submission.submissiongradeover));e(n,30,0,t.access.canviewallsubmissions&&t.showGrade(t.submission.gradinggrade));e(n,33,0,t.assessment&&(t.showGrade(t.assessment.grade)||t.assessment.offline));e(n,36,0,t.assessment&&!t.showGrade(t.assessment.grade)&&!t.assessment.offline);e(n,39,0,t.submission.timemodified)},function(e,n){var t=n.component;e(n,0,0,!t.submission.timemodified||null);e(n,12,0,t.submission.title)})}function D(e){return x._42(0,[x._32(0,Pe.a,[X.a,U.a,pe.a]),(e()(),x._16(1,0,null,null,8,"core-loading",[],null,null,null,Ee.b,Ee.a)),x._15(2,638976,null,0,Ce.a,[U.a,x.p,re.a,Q.a],{hideUntil:[0,"hideUntil"]},null),(e()(),x._40(-1,0,["\n    "])),(e()(),x._11(16777216,null,0,1,null,v)),x._15(5,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n\n    "])),(e()(),x._11(16777216,null,0,1,null,k)),x._15(8,16384,null,0,L.k,[x.W,x.T],{ngIf:[0,"ngIf"]},null),(e()(),x._40(-1,0,["\n"])),(e()(),x._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.loaded);e(n,5,0,!t.summary);e(n,8,0,t.summary)},null)}t.d(n,"a",function(){return Ie}),n.b=D;var x=t(1),M=t(27),U=t(19),N=t(225),R=t(7),F=t(47),L=t(8),H=t(31),K=t(21),W=t(20),q=t(28),B=t(33),j=t(42),G=t(2),z=t(5),V=t(11),$=t(15),Q=t(3),Y=t(26),X=t(6),J=t(17),Z=t(10),ee=t(18),ne=t(22),te=t(24),ie=t(35),oe=t(38),re=t(13),le=t(203),se=t(172),ae=t(132),ue=t(65),ce=t(347),de=t(254),fe=t(50),pe=t(25),he=t(222),me=t(186),_e=t(187),ge=t(46),ve=t(43),ye=t(283),be=t(146),Pe=t(341),Ee=t(49),Ce=t(48),Ie=(t(163),t(173),x._14({encapsulation:2,styles:[],data:{}}))},function(e,n,t){"use strict";function i(e){return ho._42(0,[ho._37(402653184,1,{dynamicComponent:0}),(e()(),ho._16(1,0,null,null,1,"core-dynamic-component",[],null,null,null,Oo.b,Oo.a)),ho._15(2,901120,[[1,4]],0,ko.a,[Do.a,ho.n,ho.w,[2,xo.a],ho.i,ho.p,Mo.a],{component:[0,"component"],data:[1,"data"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.componentClass,t.data)},null)}function o(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ho._40(1,null,["\n        ","\n    "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],null,function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("core.yes")))})}function r(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ho._40(1,null,["\n        ","\n    "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],null,function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("core.no")))})}function l(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,2,1,null,o)),ho._15(11,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,2,1,null,r)),ho._15(14,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,11,0,"0"!=t.field.value);e(n,14,0,"0"==t.field.value)},function(e,n){e(n,8,0,n.component.field.name)})}function s(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,28,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},er.b,er.a)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,1,9,"ion-label",[],null,null,null,null,null)),ho._15(11,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(13,0,null,null,2,"span",[],null,null,null,ur.b,ur.a)),ho._15(14,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(15,0,["",""])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(17,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(18,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(21,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,22)._click(t)&&i}return i},mr.b,mr.a)),ho._15(22,1228800,null,0,_r.a,[ir.a,tr.a,[2,nr.a],ho.p,ho.K],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[_r.a]),ho._15(24,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(26,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,14,0,t.field.required);e(n,18,0,t.form.controls[t.field.modelName]);e(n,24,0,t.field.modelName)},function(e,n){var t=n.component;e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,15,0,t.field.name);e(n,21,0,ho._29(n,22)._disabled,ho._29(n,26).ngClassUntouched,ho._29(n,26).ngClassTouched,ho._29(n,26).ngClassPristine,ho._29(n,26).ngClassDirty,ho._29(n,26).ngClassValid,ho._29(n,26).ngClassInvalid,ho._29(n,26).ngClassPending)})}function a(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,l)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,s)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function u(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),ho._34(12,1),(e()(),ho._40(-1,2,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,t.field.name);e(n,11,0,ho._41(n,11,0,e(n,12,0,ho._29(n.parent,0),1e3*t.field.value)))})}function c(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},er.b,er.a)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(11,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(12,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(13,0,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(15,0,null,3,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,16)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,16)._keyup()&&i}return i},br.b,br.a)),ho._15(16,1228800,null,0,Pr.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Er.a]],{min:[0,"min"],max:[1,"max"],displayFormat:[2,"displayFormat"],placeholder:[3,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._35(1024,null,sr.l,function(e){return[e]},[Pr.a]),ho._15(19,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(21,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(24,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,t.field.min,t.field.max,t.field.format,ho._41(n,16,3,ho._29(n,17).transform("core.choosedots")));e(n,19,0,t.field.modelName);e(n,24,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,ho._29(n,16)._disabled,ho._29(n,21).ngClassUntouched,ho._29(n,21).ngClassTouched,ho._29(n,21).ngClassPristine,ho._29(n,21).ngClassDirty,ho._29(n,21).ngClassValid,ho._29(n,21).ngClassInvalid,ho._29(n,21).ngClassPending)})}function d(e){return ho._42(0,[ho._32(0,Cr.a,[Do.a,Ir.a]),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,u)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,c)),ho._15(7,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,!t.edit&&t.field&&t.field.name);e(n,7,0,t.edit&&t.field&&t.field.shortname)},null)}function f(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(12,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,12,0,n.component.field.value)},function(e,n){e(n,8,0,n.component.field.name)})}function p(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[7,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function h(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,35,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},er.b,er.a)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(11,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(12,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(13,0,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(15,0,null,3,16,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,16)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,16)._keyup()&&i}return i},Kr.b,Kr.a)),ho._15(16,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),ho._37(603979776,7,{options:1}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(20,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(22,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(24,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),ho._15(25,16384,[[7,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(26,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,p)),ho._15(30,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(33,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(34,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,ho._41(n,16,0,ho._29(n,18).transform("core.choosedots")),"action-sheet");e(n,20,0,t.field.modelName);e(n,25,0,"");e(n,30,0,t.field.options);e(n,34,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,ho._29(n,16)._disabled,ho._29(n,22).ngClassUntouched,ho._29(n,22).ngClassTouched,ho._29(n,22).ngClassPristine,ho._29(n,22).ngClassDirty,ho._29(n,22).ngClassValid,ho._29(n,22).ngClassInvalid,ho._29(n,22).ngClassPending);e(n,26,0,ho._41(n,26,0,ho._29(n,27).transform("core.choosedots")))})}function m(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,f)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,h)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function _(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(12,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,12,0,n.component.field.value)},function(e,n){e(n,8,0,n.component.field.name)})}function g(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},er.b,er.a)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(11,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(12,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(13,0,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(15,0,null,3,6,"ion-input",[],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(16,540672,null,0,sr.j,[],{maxlength:[0,"maxlength"]},null),ho._35(1024,null,sr.k,function(e){return[e]},[sr.j]),ho._15(18,671744,null,0,sr.f,[[3,sr.b],[2,sr.k],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(20,16384,null,0,sr.n,[sr.m],null,null),ho._15(21,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(24,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,ho._19(1,"",t.field.maxlength,""));e(n,18,0,t.field.modelName);e(n,21,0,t.field.inputType,t.field.name);e(n,24,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,ho._29(n,16).maxlength?ho._29(n,16).maxlength:null,ho._29(n,20).ngClassUntouched,ho._29(n,20).ngClassTouched,ho._29(n,20).ngClassPristine,ho._29(n,20).ngClassDirty,ho._29(n,20).ngClassValid,ho._29(n,20).ngClassInvalid,ho._29(n,20).ngClassPending)})}function v(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,_)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,g)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function y(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(12,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,12,0,n.component.field.value)},function(e,n){e(n,8,0,n.component.field.name)})}function b(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},er.b,er.a)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,1,9,"ion-label",[["stacked",""]],null,null,null,null,null)),ho._15(11,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(13,0,null,null,2,"span",[],null,null,null,ur.b,ur.a)),ho._15(14,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(15,0,["",""])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(17,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(18,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(21,0,null,3,1,"core-rich-text-editor",[["item-content",""]],null,null,null,Zr.b,Zr.a)),ho._15(22,1228800,null,0,el.a,[Mo.a,Dr.a,Or.a,xr.a,[2,Nr.a],ho.p,Lr.a,fr.a,kr.a],{placeholder:[0,"placeholder"],control:[1,"control"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,14,0,t.field.required);e(n,18,0,t.control);e(n,22,0,t.field.name,t.control)},function(e,n){var t=n.component;e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,15,0,t.field.name)})}function P(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,y)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,b)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function E(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,14,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,6).onClick()&&i}return i},er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),ho._15(6,16384,null,0,rl.a,[[2,xo.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),ho._33(7,{title:0,courseId:1,modName:2}),ho._15(8,1064960,null,0,ll.a,[rl.a,[2,Br.a]],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(10,0,null,0,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(12,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(13,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){e(n,6,0,"CoreCourseListModTypePage",e(n,7,0,n.context.$implicit.name,n.component.instanceId,n.context.$implicit.modName));e(n,13,0,n.context.$implicit.name)},function(e,n){e(n,0,0,ho._29(n,8)._href);e(n,10,0,n.context.$implicit.icon)})}function C(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(12,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(13,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,E)),ho._15(16,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.entries)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_activitymodules.pluginname")))})}function I(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.prefetchCourses()&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[3,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),ho._40(-1,0,["\n            "])),(e()(),ho._16(3,0,null,0,1,"core-icon",[],null,null,null,gl.b,gl.a)),ho._15(4,245760,null,0,vl.a,[ho.p],{name:[0,"name"]},null),(e()(),ho._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData[t.selectedFilter].icon)},null)}function S(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),ho._15(1,16384,null,0,yl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(2,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.prefetchCoursesData[t.selectedFilter].badge)})}function w(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,bl.b,bl.a)),ho._15(1,114688,null,0,Pl.a,[ir.a,ho.p,ho.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,ho._29(n,1)._paused)})}function A(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,I)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,S)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,w)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData[t.selectedFilter].icon&&"spinner"!=t.prefetchCoursesData[t.selectedFilter].icon);e(n,6,0,t.prefetchCoursesData[t.selectedFilter].badge);e(n,9,0,!t.prefetchCoursesData[t.selectedFilter].icon||"spinner"==t.prefetchCoursesData[t.selectedFilter].icon)},null)}function T(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","funnel"]],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.switchFilter()&&i}return i},El.b,El.a)),ho._15(1,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("core.courses.filtermycourses")),"funnel",1e3)},null)}function O(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.switchSort("fullname")&&i}return i},El.b,El.a)),ho._15(1,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._19(1,"",ho._41(n,1,0,ho._29(n,2).transform("core.sortby"))+" "+ho._41(n,1,0,ho._29(n,3).transform("addon.block_myoverview.title")),""),"fullname"==t.sort?"radio-button-on":"radio-button-off",900)},null)}function k(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.switchSort("lastaccess")&&i}return i},El.b,El.a)),ho._15(1,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._19(1,"",ho._41(n,1,0,ho._29(n,2).transform("core.sortby"))+" "+ho._41(n,1,0,ho._29(n,3).transform("addon.block_myoverview.lastaccessed")),""),"lastaccess"==t.sort?"radio-button-on":"radio-button-off",800)},null)}function D(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"ion-option",[["value","favourite"]],null,null,null,null,null)),ho._15(1,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,"favourite")},function(e,n){e(n,2,0,ho._41(n,2,0,ho._29(n,3).transform("addon.block_myoverview.favourites")))})}function x(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"ion-option",[["value","hidden"]],null,null,null,null,null)),ho._15(1,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,"hidden")},function(e,n){e(n,2,0,ho._41(n,2,0,ho._29(n,3).transform("addon.block_myoverview.hiddencourses")))})}function M(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_myoverview.nocourses")),"assets/img/icons/courses.svg")},null)}function U(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,6,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(e,n,t){var i=!0,o=e.component;if("ngModelChange"===n){i=!1!==(o.courses.filter=t)&&i}if("ionInput"===n){i=!1!==o.filterChanged(t)&&i}if("ionCancel"===n){i=!1!==o.filterChanged()&&i}return i},Al.b,Al.a)),ho._15(1,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(3,16384,null,0,sr.n,[sr.m],null,null),ho._15(4,1294336,[[1,4],["searchbar",4]],0,Tl.a,[ir.a,kr.a,ho.p,ho.K,[2,sr.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){e(n,1,0,n.component.courses.filter);e(n,4,0,ho._41(n,4,0,ho._29(n,5).transform("core.courses.filtermycourses")))},function(e,n){e(n,0,1,[ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending,ho._29(n,4)._animated,ho._29(n,4)._value,ho._29(n,4)._isActive,ho._29(n,4)._showCancelButton,ho._29(n,4)._shouldAlignLeft,ho._29(n,4)._isFocus])})}function N(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"ion-col",[["align-self-stretch",""],["class","col"],["col-12",""],["col-lg-4",""],["col-md-6",""],["col-sm-6",""],["col-xl-4",""],["no-padding",""]],null,null,null,null,null)),ho._15(1,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._16(3,0,null,null,1,"core-courses-course-progress",[["class","core-courseoverview"],["showAll","true"]],null,null,null,kl.b,kl.a)),ho._15(4,245760,null,0,Dl.a,[[2,xo.a],xl.a,Mo.a,dl.a,Lr.a,Or.a,Ml.a,Ul.a,Nl.a],{course:[0,"course"],showAll:[1,"showAll"],showDownload:[2,"showDownload"]},null),(e()(),ho._40(-1,null,["\n                "]))],function(e,n){e(n,4,0,n.context.$implicit,"true",n.component.downloadEnabled)},null)}function R(e){return ho._42(0,[ho._37(671088640,1,{searchbar:0}),(e()(),ho._16(1,0,null,null,27,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(2,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(6,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(8,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(9,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,4,1,null,A)),ho._15(14,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(16,0,null,4,11,"core-context-menu",[["item-end",""]],null,null,null,Rl.b,Rl.a)),ho._15(17,245760,null,0,Il.a,[Zo.a,Ul.a,ho.p,Mo.a,[2,Fl.a]],null,null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,T)),ho._15(20,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,O)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,k)),ho._15(26,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(30,0,null,null,64,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(31,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(33,0,null,0,38,"div",[["class","safe-padding-horizontal"],["padding",""]],[[8,"hidden",0]],null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(36,0,null,null,34,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[8,"title",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,37)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,37)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.selectedFilter=t)&&i}if("ngModelChange"===n){i=!1!==o.selectedChanged()&&i}return i},Kr.b,Kr.a)),ho._15(37,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{interface:[0,"interface"]},null),ho._37(603979776,5,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(40,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(42,16384,null,0,sr.n,[sr.m],null,null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(45,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),ho._15(46,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(47,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(50,0,null,null,3,"ion-option",[["value","inprogress"]],null,null,null,null,null)),ho._15(51,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(52,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(55,0,null,null,3,"ion-option",[["value","future"]],null,null,null,null,null)),ho._15(56,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(57,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(60,0,null,null,3,"ion-option",[["value","past"]],null,null,null,null,null)),ho._15(61,16384,[[5,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(62,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,D)),ho._15(66,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,x)),ho._15(69,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,M)),ho._15(74,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,U)),ho._15(78,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(81,0,null,0,12,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(83,0,null,null,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),ho._15(84,16384,null,0,Ll.a,[],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(86,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),ho._15(87,16384,null,0,Hl.a,[],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,N)),ho._15(90,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,14,0,t.downloadEnabled&&t.courses[t.selectedFilter]&&t.courses[t.selectedFilter].length>1&&!t.showFilter),e(n,17,0);e(n,20,0,t.loaded&&t.showFilterSwitchButton());e(n,23,0,t.loaded&&t.showSortFilter);e(n,26,0,t.loaded&&t.showSortFilter);e(n,31,0,t.loaded);e(n,37,0,"popover");e(n,40,0,t.selectedFilter);e(n,46,0,"all");e(n,51,0,"inprogress");e(n,56,0,"future");e(n,61,0,"past");e(n,66,0,t.showFavourite);e(n,69,0,t.showHidden);e(n,74,0,0==t.courses[t.selectedFilter].length);e(n,78,0,t.showFilter);e(n,90,0,t.filteredCourses)},function(e,n){var t=n.component;e(n,9,0,ho._41(n,9,0,ho._29(n,10).transform("addon.block_myoverview.pluginname")));e(n,33,0,t.showFilter||!t.showSelectorFilter);e(n,36,0,ho._41(n,36,0,ho._29(n,43).transform("core.show")),ho._29(n,37)._disabled,ho._29(n,42).ngClassUntouched,ho._29(n,42).ngClassTouched,ho._29(n,42).ngClassPristine,ho._29(n,42).ngClassDirty,ho._29(n,42).ngClassValid,ho._29(n,42).ngClassInvalid,ho._29(n,42).ngClassPending);e(n,47,0,ho._41(n,47,0,ho._29(n,48).transform("addon.block_myoverview.all")));e(n,52,0,ho._41(n,52,0,ho._29(n,53).transform("addon.block_myoverview.inprogress")));e(n,57,0,ho._41(n,57,0,ho._29(n,58).transform("addon.block_myoverview.future")));e(n,62,0,ho._41(n,62,0,ho._29(n,63).transform("addon.block_myoverview.past")))})}function F(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(8,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){e(n,8,0,n.component.block.summary)},null)}function L(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-course-module",[],null,null,null,zl.b,zl.a)),ho._15(1,245760,null,0,Vl.a,[[2,xo.a],$l.a,Mo.a,xl.a,Lr.a,Or.a],{module:[0,"module"],courseId:[1,"courseId"],section:[2,"section"],enabled:[3,"enabled"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.siteHomeId,t.block,!0)},null)}function H(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(12,0,null,null,8,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(13,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,F)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n    "])),(e()(),ho._11(16777216,null,0,1,null,L)),ho._15(19,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.block.summary);e(n,19,0,t.block.modules)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_sitemainmenu.pluginname")))})}function K(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),ho._15(1,4210688,null,0,Zl.a,[ho.p,Do.a,xr.a,kr.a,Or.a,Mo.a,Dr.a,Mr.a,fr.a],null,null)],null,function(e,n){e(n,0,0,n.parent.context.$implicit.iconUrl)})}function W(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(2,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(3,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.course.fullnamedisplay)},null)}function q(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),ho._15(1,16384,null,0,yl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.parent.context.$implicit.action.itemcount)})}function B(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["class","hidden-tablet"],["clear",""],["ion-button",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action(t,e.parent.context.$implicit.action.url)&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[5,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{clear:[0,"clear"]},null),(e()(),ho._40(2,0,["\n                ","\n                "])),(e()(),ho._11(16777216,null,0,1,null,q)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,n.parent.context.$implicit.action.showitemcount)},function(e,n){e(n,0,0,n.parent.context.$implicit.action.name,!n.parent.context.$implicit.action.actionable);e(n,2,0,n.parent.context.$implicit.action.name)})}function j(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),ho._15(1,16384,null,0,yl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.parent.context.$implicit.action.itemcount)})}function G(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["class","hidden-phone"],["clear",""],["ion-button",""],["item-end",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action(t,e.parent.context.$implicit.action.url)&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[5,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{clear:[0,"clear"]},null),(e()(),ho._40(2,0,["\n                ","\n                "])),(e()(),ho._11(16777216,null,0,1,null,j)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,n.parent.context.$implicit.action.showitemcount)},function(e,n){e(n,0,0,n.parent.context.$implicit.action.name,!n.parent.context.$implicit.action.actionable);e(n,2,0,n.parent.context.$implicit.action.name)})}function z(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,30,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(2,0,null,null,27,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action(t,e.context.$implicit.url)&&i}return i},er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,0,1,null,K)),ho._15(10,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(12,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._16(13,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,2,1,null,W)),ho._15(17,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n\n            "])),(e()(),ho._11(16777216,null,2,1,null,B)),ho._15(20,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n\n            "])),(e()(),ho._16(22,0,null,4,3,"ion-badge",[["color","light"],["item-end",""]],null,null,null,null,null)),ho._15(23,16384,null,0,yl.a,[ir.a,ho.p,ho.K],{color:[0,"color"]},null),(e()(),ho._40(24,null,["",""])),ho._34(25,2),(e()(),ho._40(-1,2,["\n\n            "])),(e()(),ho._11(16777216,null,4,1,null,G)),ho._15(28,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.iconUrl);e(n,14,0,n.context.$implicit.name);e(n,17,0,t.showCourse);e(n,20,0,n.context.$implicit.action);e(n,23,0,"light");e(n,28,0,n.context.$implicit.action)},function(e,n){e(n,2,0,n.context.$implicit.name);e(n,24,0,ho._41(n,24,0,e(n,25,0,ho._29(n.parent.parent,0),1e3*n.context.$implicit.timesort,"strftimetime24")))})}function V(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,17,"ion-item-group",[],null,null,null,null,null)),ho._15(1,16384,null,0,es.a,[],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],{color:[0,"color"]},null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,sl.a,[ir.a,ho.p,ho.K],{color:[0,"color"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),ho._34(12,2),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,z)),ho._15(16,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.context.$implicit.color);e(n,8,0,n.context.$implicit.color);e(n,16,0,n.context.$implicit.events)},function(e,n){e(n,11,0,ho._41(n,11,0,e(n,12,0,ho._29(n.parent,0),1e3*n.context.$implicit.dayTimestamp,"strftimedayshort")))})}function $(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.loadMoreEvents()&&i}return i},ml.b,ml.a)),ho._15(1,1097728,null,0,_l.a,[[8,""],ir.a,ho.p,ho.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),ho._40(2,0,["\n        ","\n    "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,ho._41(n,2,0,ho._29(n,3).transform("core.loadmore")))})}function Q(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,bl.b,bl.a)),ho._15(1,114688,null,0,Pl.a,[ir.a,ho.p,ho.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,ho._29(n,1)._paused)})}function Y(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,8,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,$)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Q)),ho._15(7,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,!t.loadingMore);e(n,7,0,t.loadingMore)},null)}function X(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"],inline:[2,"inline"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_timeline.noevents")),"assets/img/icons/activities.svg",!t.showCourse)},null)}function J(e){return ho._42(0,[ho._32(0,Cr.a,[Do.a,Ir.a]),(e()(),ho._11(16777216,null,null,1,null,V)),ho._15(2,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Y)),ho._15(5,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,X)),ho._15(8,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.filteredEvents);e(n,5,0,t.canLoadMore&&!t.empty);e(n,8,0,t.empty)},null)}function Z(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.switchSort("sortbydates")&&i}return i},El.b,El.a)),ho._15(1,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_timeline.sortbydates")),"sortbydates"==t.sort?"radio-button-on":"radio-button-off",900)},null)}function ee(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.switchSort("sortbycourses")&&i}return i},El.b,El.a)),ho._15(1,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_timeline.sortbycourses")),"sortbycourses"==t.sort?"radio-button-on":"radio-button-off",800)},null)}function ne(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,9,"ion-col",[["class","col"],["col-12",""],["col-md-6",""],["no-padding",""]],null,null,null,null,null)),ho._15(1,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n                        "])),(e()(),ho._16(3,0,null,null,5,"core-courses-course-progress",[],null,null,null,kl.b,kl.a)),ho._15(4,245760,null,0,Dl.a,[[2,xo.a],xl.a,Mo.a,dl.a,Lr.a,Or.a,Ml.a,Ul.a,Nl.a],{course:[0,"course"]},null),(e()(),ho._40(-1,0,["\n                            "])),(e()(),ho._16(6,0,null,0,1,"addon-block-timeline-events",[],null,[[null,"loadMore"]],function(e,n,t){var i=!0;if("loadMore"===n){i=!1!==e.component.loadMoreCourse(e.context.$implicit)&&i}return i},J,ts)),ho._15(7,573440,null,0,ns.a,[[2,xo.a],fr.a,dr.a,Mo.a,Or.a,dl.a,Ur.a,Ir.a],{events:[0,"events"],from:[1,"from"],to:[2,"to"],canLoadMore:[3,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),ho._40(-1,0,["\n                        "])),(e()(),ho._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,4,0,n.context.$implicit);e(n,7,0,n.context.$implicit.events,t.dataFrom,t.dataTo,n.context.$implicit.canLoadMore)},null)}function te(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_timeline.nocoursesinprogress")),"assets/img/icons/courses.svg")},null)}function ie(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,20,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(11,0,null,4,8,"core-context-menu",[["item-end",""]],null,null,null,Rl.b,Rl.a)),ho._15(12,245760,null,0,Il.a,[Zo.a,Ul.a,ho.p,Mo.a,[2,Fl.a]],null,null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,Z)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,ee)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(22,0,null,null,77,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(23,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(25,0,null,0,45,"div",[["class","safe-padding-horizontal"],["padding",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(27,0,null,null,42,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,28)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,28)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.filter=t)&&i}if("ngModelChange"===n){i=!1!==o.switchFilter()&&i}return i},Kr.b,Kr.a)),ho._15(28,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{interface:[0,"interface"]},null),ho._37(603979776,4,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(31,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(33,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(35,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),ho._15(36,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(37,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(40,0,null,null,3,"ion-option",[["value","overdue"]],null,null,null,null,null)),ho._15(41,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(42,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(45,0,null,null,3,"ion-option",[["disabled",""],["value","disabled"]],null,null,null,null,null)),ho._15(46,16384,[[4,4]],0,Hr.a,[ho.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),ho._40(47,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(50,0,null,null,3,"ion-option",[["value","next7days"]],null,null,null,null,null)),ho._15(51,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(52,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(55,0,null,null,3,"ion-option",[["value","next30days"]],null,null,null,null,null)),ho._15(56,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(57,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(60,0,null,null,3,"ion-option",[["value","next3months"]],null,null,null,null,null)),ho._15(61,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(62,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(65,0,null,null,3,"ion-option",[["value","next6months"]],null,null,null,null,null)),ho._15(66,16384,[[4,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(67,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(72,0,null,0,5,"core-loading",[["class","core-loading-center"]],[[8,"hidden",0]],null,null,al.b,al.a)),ho._15(73,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._16(75,0,null,0,1,"addon-block-timeline-events",[["showCourse","true"]],null,[[null,"loadMore"]],function(e,n,t){var i=!0;if("loadMore"===n){i=!1!==e.component.loadMoreTimeline()&&i}return i},J,ts)),ho._15(76,573440,null,0,ns.a,[[2,xo.a],fr.a,dr.a,Mo.a,Or.a,dl.a,Ur.a,Ir.a],{events:[0,"events"],showCourse:[1,"showCourse"],from:[2,"from"],to:[3,"to"],canLoadMore:[4,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(79,0,null,0,19,"core-loading",[["class","core-loading-center"]],[[8,"hidden",0]],null,null,al.b,al.a)),ho._15(80,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._16(82,0,null,0,12,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(84,0,null,null,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),ho._15(85,16384,null,0,Ll.a,[],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(87,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),ho._15(88,16384,null,0,Hl.a,[],null,null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._11(16777216,null,null,1,null,ne)),ho._15(91,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._11(16777216,null,0,1,null,te)),ho._15(97,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n"]))],function(e,n){var t=n.component;e(n,12,0);e(n,15,0,t.loaded);e(n,18,0,t.loaded);e(n,23,0,t.loaded);e(n,28,0,"popover");e(n,31,0,t.filter);e(n,36,0,"all");e(n,41,0,"overdue");e(n,46,0,"","disabled");e(n,51,0,"next7days");e(n,56,0,"next30days");e(n,61,0,"next3months");e(n,66,0,"next6months");e(n,73,0,t.timeline.loaded);e(n,76,0,t.timeline.events,"true",t.dataFrom,t.dataTo,t.timeline.canLoadMore);e(n,80,0,t.timelineCourses.loaded);e(n,91,0,t.timelineCourses.courses);e(n,97,0,0==t.timelineCourses.courses.length)},function(e,n){var t=n.component;e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_timeline.pluginname")));e(n,27,0,ho._29(n,28)._disabled,ho._29(n,33).ngClassUntouched,ho._29(n,33).ngClassTouched,ho._29(n,33).ngClassPristine,ho._29(n,33).ngClassDirty,ho._29(n,33).ngClassValid,ho._29(n,33).ngClassInvalid,ho._29(n,33).ngClassPending);e(n,37,0,ho._41(n,37,0,ho._29(n,38).transform("core.all")));e(n,42,0,ho._41(n,42,0,ho._29(n,43).transform("addon.block_timeline.overdue")));e(n,47,0,ho._41(n,47,0,ho._29(n,48).transform("addon.block_timeline.duedate")));e(n,52,0,ho._41(n,52,0,ho._29(n,53).transform("addon.block_timeline.next7days")));e(n,57,0,ho._41(n,57,0,ho._29(n,58).transform("addon.block_timeline.next30days")));e(n,62,0,ho._41(n,62,0,ho._29(n,63).transform("addon.block_timeline.next3months")));e(n,67,0,ho._41(n,67,0,ho._29(n,68).transform("addon.block_timeline.next6months")));e(n,72,0,"sortbydates"!=t.sort);e(n,79,0,"sortbycourses"!=t.sort)})}function oe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.prefetchCourses()&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[2,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),ho._40(-1,0,["\n            "])),(e()(),ho._16(3,0,null,0,1,"core-icon",[],null,null,null,gl.b,gl.a)),ho._15(4,245760,null,0,vl.a,[ho.p],{name:[0,"name"]},null),(e()(),ho._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData.icon)},null)}function re(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),ho._15(1,16384,null,0,yl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.component.prefetchCoursesData.badge)})}function le(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,bl.b,bl.a)),ho._15(1,114688,null,0,Pl.a,[ir.a,ho.p,ho.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,ho._29(n,1)._paused)})}function se(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,oe)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,re)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,le)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData.icon&&"spinner"!=t.prefetchCoursesData.icon);e(n,6,0,t.prefetchCoursesData.badge);e(n,9,0,!t.prefetchCoursesData.icon||"spinner"==t.prefetchCoursesData.icon)},null)}function ae(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_recentlyaccessedcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function ue(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(2,0,null,null,1,"core-courses-course-progress",[["class","core-recentlyaccessedcourses"]],null,null,null,kl.b,kl.a)),ho._15(3,245760,null,0,Dl.a,[[2,xo.a],xl.a,Mo.a,dl.a,Lr.a,Or.a,Ml.a,Ul.a,Nl.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),ho._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.context.$implicit,n.component.downloadEnabled)},null)}function ce(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,4,1,null,se)),ho._15(12,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(15,0,null,null,15,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(16,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,ae)),ho._15(19,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(22,0,null,0,7,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n         "])),(e()(),ho._16(24,0,null,null,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,ue)),ho._15(27,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.downloadEnabled&&t.courses&&t.courses.length>1);e(n,16,0,t.loaded);e(n,19,0,0==t.courses.length);e(n,27,0,t.courses)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_recentlyaccessedcourses.pluginname")))})}function de(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.context.$implicit.iconUrl)})}function fe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(2,0,null,null,21,"ion-card",[],null,null,null,null,null)),ho._15(3,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(5,0,null,null,17,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.action(t,e.context.$implicit)&&i}return i},er.b,er.a)),ho._15(6,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(10,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._11(16777216,null,0,1,null,de)),ho._15(13,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._16(15,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._16(16,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(17,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._16(19,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(20,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(21,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "]))],function(e,n){e(n,13,0,n.context.$implicit.iconUrl);e(n,17,0,n.context.$implicit.name);e(n,21,0,n.context.$implicit.coursename)},function(e,n){e(n,5,0,n.context.$implicit.name)})}function pe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,fe)),ho._15(3,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.items)},null)}function he(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_recentlyaccesseditems.noitems")),"assets/img/icons/activities.svg")},null)}function me(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(12,0,null,null,8,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(13,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,pe)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n    "])),(e()(),ho._11(16777216,null,0,1,null,he)),ho._15(19,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.items&&t.items.length>0);e(n,19,0,t.items.length<=0)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_recentlyaccesseditems.pluginname")))})}function _e(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.prefetchCourses()&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[2,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),ho._40(-1,0,["\n            "])),(e()(),ho._16(3,0,null,0,1,"core-icon",[],null,null,null,gl.b,gl.a)),ho._15(4,245760,null,0,vl.a,[ho.p],{name:[0,"name"]},null),(e()(),ho._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData.icon)},null)}function ge(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),ho._15(1,16384,null,0,yl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.component.prefetchCoursesData.badge)})}function ve(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,bl.b,bl.a)),ho._15(1,114688,null,0,Pl.a,[ir.a,ho.p,ho.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,ho._29(n,1)._paused)})}function ye(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,_e)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,ge)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,ve)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData.icon&&"spinner"!=t.prefetchCoursesData.icon);e(n,6,0,t.prefetchCoursesData.badge);e(n,9,0,!t.prefetchCoursesData.icon||"spinner"==t.prefetchCoursesData.icon)},null)}function be(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],image:[1,"image"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.block_starredcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function Pe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(2,0,null,null,1,"core-courses-course-progress",[["class","core-block_starredcourses"]],null,null,null,kl.b,kl.a)),ho._15(3,245760,null,0,Dl.a,[[2,xo.a],xl.a,Mo.a,dl.a,Lr.a,Or.a,Ml.a,Ul.a,Nl.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),ho._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.context.$implicit,n.component.downloadEnabled)},null)}function Ee(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,4,1,null,ye)),ho._15(12,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(15,0,null,null,15,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(16,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._11(16777216,null,0,1,null,be)),ho._15(19,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(22,0,null,0,7,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(24,0,null,null,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Pe)),ho._15(27,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.downloadEnabled&&t.courses&&t.courses.length>1);e(n,16,0,t.loaded);e(n,19,0,0==t.courses.length);e(n,27,0,t.courses)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.block_starredcourses.pluginname")))})}function Ce(e){return ho._42(0,[ho._37(402653184,1,{commentsComponent:0}),(e()(),ho._16(1,0,null,null,12,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.showComments()&&i}return i},er.b,er.a)),ho._15(2,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(6,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(8,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(9,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(11,0,null,2,1,"core-comments",[["area","submission_comments"],["component","assignsubmission_comments"],["contextLevel","module"]],null,null,null,ys.c,ys.b)),ho._15(12,638976,[[1,4]],0,bs.a,[Ps.a,xo.a,Es.a],{contextLevel:[0,"contextLevel"],instanceId:[1,"instanceId"],component:[2,"component"],itemId:[3,"itemId"],area:[4,"area"],title:[5,"title"]},null),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,"module",t.assign.cmid,"assignsubmission_comments",t.submission.id,"submission_comments",t.plugin.name)},function(e,n){e(n,9,0,n.component.plugin.name)})}function Ie(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-file",[],null,null,null,ws.b,ws.a)),ho._15(1,245760,null,0,As.a,[Or.a,fr.a,Mo.a,xr.a,Mr.a,Ts.a,Os.a,Lr.a,dr.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.assign.cmid,!0)},null)}function Se(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-local-file",[],null,null,null,ks.b,ks.a)),ho._15(1,114688,null,0,Ds.a,[Os.a,fr.a,Zo.a,dr.a,xs.a,Mo.a,Ir.a],{file:[0,"file"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function we(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Ie)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Se)),ho._15(8,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "]))],function(e,n){e(n,4,0,!n.context.$implicit.name);e(n,8,0,n.context.$implicit.name)},null)}function Ae(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,we)),ho._15(13,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,13,0,n.component.files)},function(e,n){e(n,8,0,n.component.plugin.name)})}function Te(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(7,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(8,2,["",""])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(10,0,null,null,1,"core-attachments",[],null,null,null,Ms.b,Ms.a)),ho._15(11,114688,null,0,Us.a,[Mr.a,Mo.a,dr.a,Ns.a,Zo.a,Rs.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.files,t.configs.maxsubmissionsizebytes,t.configs.maxfilesubmissions,t.component,t.assign.cmid,t.allowOffline,t.configs.filetypeslist)},function(e,n){e(n,8,0,n.component.plugin.name)})}function Oe(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,Ae)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,Te)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length&&!t.edit);e(n,6,0,t.edit)},null)}function ke(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ho._40(1,null,["",""])),ho._33(2,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i])],null,function(e,n){var t=n.component;e(n,1,0,ho._41(n,1,0,ho._29(n,3).transform("addon.mod_assign.numwords",e(n,2,0,t.words))))})}function De(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._11(16777216,null,2,1,null,ke)),ho._15(11,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(13,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(15,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(16,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.words);e(n,16,0,t.text,t.component,t.assign.cmid,80,!0,t.plugin.name)},function(e,n){e(n,8,0,n.component.plugin.name)})}function xe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,7,{contentLabel:0}),ho._37(603979776,8,{_buttons:1}),ho._37(603979776,9,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),ho._40(12,null,["",""])),ho._33(13,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "]))],null,function(e,n){var t=n.component;e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.mod_assign.wordlimit")));e(n,12,0,ho._41(n,12,0,ho._29(n,14).transform("core.numwords",e(n,13,0,t.words+" / "+t.configs.wordlimit))))})}function Me(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(7,16384,null,0,sl.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(8,2,["",""])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,xe)),ho._15(11,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(13,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(14,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,10,{contentLabel:0}),ho._37(603979776,11,{_buttons:1}),ho._37(603979776,12,{_icons:1}),ho._15(18,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(20,0,null,3,1,"core-rich-text-editor",[["item-content",""],["name","onlinetext_editor_text"]],null,[[null,"contentChanged"]],function(e,n,t){var i=!0;if("contentChanged"===n){i=!1!==e.component.onChange(t)&&i}return i},Zr.b,Zr.a)),ho._15(21,1228800,null,0,el.a,[Mo.a,Dr.a,Or.a,xr.a,[2,Nr.a],ho.p,Lr.a,fr.a,kr.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},{contentChanged:"contentChanged"}),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.configs.wordlimitenabled&&t.words>=0);e(n,21,0,t.plugin.name,t.control,"onlinetext_editor_text",t.component,t.assign.cmid)},function(e,n){e(n,8,0,n.component.plugin.name)})}function Ue(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,De)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,Me)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.text);e(n,6,0,t.edit&&t.loaded)},null)}function Ne(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==e.component.editComment()&&i}return i},ml.b,ml.a)),ho._15(1,1097728,[[2,4]],0,_l.a,[[8,""],ir.a,ho.p,ho.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),ho._40(-1,0,["\n                "])),(e()(),ho._16(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(4,147456,null,0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark","");e(n,4,0,"create")},function(e,n){e(n,3,0,ho._29(n,4)._hidden)})}function Re(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,6,"ion-note",[["color","dark"]],null,null,null,null,null)),ho._15(1,16384,null,0,$s.a,[ir.a,ho.p,ho.K],{color:[0,"color"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(4,147456,null,0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(5,null,["\n            ","\n        "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,"dark");e(n,4,0,"time")},function(e,n){e(n,3,0,ho._29(n,4)._hidden);e(n,5,0,ho._41(n,5,0,ho._29(n,6).transform("core.notsent")))})}function Fe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(13,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(16,0,null,4,10,"div",[["item-end",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(18,0,null,null,4,"div",[["text-end",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Ne)),ho._15(21,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Re)),ho._15(25,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.text,t.component,t.assign.cmid,80,!0,t.plugin.name);e(n,21,0,t.canEdit);e(n,25,0,!t.isSent)},function(e,n){e(n,8,0,n.component.plugin.name)})}function Le(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,3,1,"core-rich-text-editor",[["item-content",""],["name","assignfeedbackcomments_editor"]],null,null,null,Zr.b,Zr.a)),ho._15(8,1228800,null,0,el.a,[Mo.a,Dr.a,Or.a,xr.a,[2,Nr.a],ho.p,Lr.a,fr.a,kr.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},null),(e()(),ho._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,8,0,t.plugin.name,t.control,"assignfeedbackcomments_editor",t.component,t.assign.cmid)},null)}function He(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,Fe)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,Le)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,(t.text||t.canEdit)&&!t.edit);e(n,6,0,t.edit&&t.loaded)},null)}function Ke(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-file",[],null,null,null,ws.b,ws.a)),ho._15(1,245760,null,0,As.a,[Or.a,fr.a,Mo.a,xr.a,Mr.a,Ts.a,Os.a,Lr.a,dr.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.assign.cmid,!0)},null)}function We(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Ke)),ho._15(13,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,13,0,n.component.files)},function(e,n){e(n,8,0,n.component.plugin.name)})}function qe(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,We)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length)},null)}function Be(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-file",[],null,null,null,ws.b,ws.a)),ho._15(1,245760,null,0,As.a,[Or.a,fr.a,Mo.a,xr.a,Mr.a,Ts.a,Os.a,Lr.a,dr.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.assign.cmid,!0)},null)}function je(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Be)),ho._15(13,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,2,["\n"]))],function(e,n){e(n,13,0,n.component.files)},function(e,n){e(n,8,0,n.component.plugin.name)})}function Ge(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(16777216,null,null,1,null,je)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length)},null)}function ze(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function Ve(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.key)})}function $e(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function Qe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[2,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(9,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,13)._click(t)&&i}if("ngModelChange"===n){i=!1!==(o.search["f_"+o.field.id+"_allreq"]=t)&&i}return i},mr.b,mr.a)),ho._15(13,1228800,null,0,_r.a,[ir.a,tr.a,[2,nr.a],ho.p,ho.K],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[_r.a]),ho._15(15,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(17,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_allreq",t.search["f_"+t.field.id+"_allreq"])},function(e,n){e(n,9,0,ho._41(n,9,0,ho._29(n,10).transform("addon.mod_data.selectedrequired")));e(n,12,0,ho._29(n,13)._disabled,ho._29(n,17).ngClassUntouched,ho._29(n,17).ngClassTouched,ho._29(n,17).ngClassPristine,ho._29(n,17).ngClassDirty,ho._29(n,17).ngClassValid,ho._29(n,17).ngClassInvalid,ho._29(n,17).ngClassPending)})}function Ye(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,ze)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,9)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,9)._keyup()&&i}return i},Kr.b,Kr.a)),ho._15(9,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),ho._37(603979776,1,{options:1}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._33(12,{title:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(14,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Ve)),ho._15(19,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,$e)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,Qe)),ho._15(26,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet","true");e(n,14,0,"f_"+t.field.id);e(n,19,0,t.options);e(n,23,0,t.error&&"edit"==t.mode);e(n,26,0,"search"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,9)._disabled,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending)})}function Xe(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function Je(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Ye)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Xe)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function Ze(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function en(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function nn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[1,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(9,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,13)._click(t)&&i}if("ngModelChange"===n){i=!1!==(o.search["f_"+o.field.id+"_z"]=t)&&i}return i},mr.b,mr.a)),ho._15(13,1228800,null,0,_r.a,[ir.a,tr.a,[2,nr.a],ho.p,ho.K],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[_r.a]),ho._15(15,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(17,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_z",t.search["f_"+t.field.id+"_z"])},function(e,n){e(n,9,0,ho._41(n,9,0,ho._29(n,10).transform("addon.mod_data.usedate")));e(n,12,0,ho._29(n,13)._disabled,ho._29(n,17).ngClassUntouched,ho._29(n,17).ngClassTouched,ho._29(n,17).ngClassPristine,ho._29(n,17).ngClassDirty,ho._29(n,17).ngClassValid,ho._29(n,17).ngClassInvalid,ho._29(n,17).ngClassPending)})}function tn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,21,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Ze)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,9)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,9)._keyup()&&i}return i},br.b,br.a)),ho._15(9,1228800,null,0,Pr.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Er.a]],{disabled:[0,"disabled"],displayFormat:[1,"displayFormat"],placeholder:[2,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._35(1024,null,sr.l,function(e){return[e]},[Pr.a]),ho._15(12,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(14,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,en)),ho._15(17,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,nn)),ho._15(20,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"search"==t.mode&&!t.search["f_"+t.field.id+"_z"],t.format,ho._41(n,9,2,ho._29(n,10).transform("core.date")));e(n,12,0,"f_"+t.field.id,"search"==t.mode&&!t.search["f_"+t.field.id+"_z"]);e(n,17,0,t.error&&"edit"==t.mode);e(n,20,0,"search"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,9)._disabled,ho._29(n,14).ngClassUntouched,ho._29(n,14).ngClassTouched,ho._29(n,14).ngClassPristine,ho._29(n,14).ngClassDirty,ho._29(n,14).ngClassValid,ho._29(n,14).ngClassInvalid,ho._29(n,14).ngClassPending)})}function on(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),ho._34(2,2)],function(e,n){var t=n.component;e(n,1,0,ho._41(n,1,0,e(n,2,0,ho._29(n.parent,0),1e3*t.value.content,"strftimedate")))},null)}function rn(e){return ho._42(0,[ho._32(0,Cr.a,[Do.a,Ir.a]),(e()(),ho._11(16777216,null,null,1,null,tn)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,on)),ho._15(5,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.isShowOrListMode());e(n,5,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function ln(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.error)},null)}function sn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(3,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(5,0,null,null,1,"core-attachments",[["maxSubmissions","1"]],null,null,null,Ms.b,Ms.a)),ho._15(6,114688,null,0,Us.a,[Mr.a,Mo.a,dr.a,Ns.a,Zo.a,Rs.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,ln)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.field.required);e(n,6,0,t.files,t.maxSizeBytes,"1",t.component,t.componentId,!0);e(n,9,0,t.error)},null)}function an(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(6,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(8,16384,null,0,sr.n,[sr.m],null,null),ho._15(9,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"f_"+t.field.id);e(n,9,0,"text",t.field.name)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,5,0,ho._29(n,8).ngClassUntouched,ho._29(n,8).ngClassTouched,ho._29(n,8).ngClassPristine,ho._29(n,8).ngClassDirty,ho._29(n,8).ngClassValid,ho._29(n,8).ngClassInvalid,ho._29(n,8).ngClassPending)})}function un(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-file",[],null,null,null,ws.b,ws.a)),ho._15(1,245760,null,0,As.a,[Or.a,fr.a,Mo.a,xr.a,Mr.a,Ts.a,Os.a,Lr.a,dr.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.componentId,!0)},null)}function cn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-local-file",[],null,null,null,ks.b,ks.a)),ho._15(1,114688,null,0,Ds.a,[Os.a,fr.a,Zo.a,dr.a,xs.a,Mo.a,Ir.a],{file:[0,"file"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function dn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,un)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,cn)),ho._15(8,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "]))],function(e,n){e(n,4,0,!n.context.$implicit.name);e(n,8,0,n.context.$implicit.name)},null)}function fn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,dn)),ho._15(5,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,5,0,n.component.files)},null)}function pn(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,sn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,an)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,fn)),ho._15(7,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,"edit"==t.mode);e(n,4,0,"search"==t.mode);e(n,7,0,t.isShowOrListMode())},null)}function hn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(1,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(3,16384,null,0,sr.n,[sr.m],null,null),ho._15(4,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,"text",t.field.name)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending)})}function mn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function _n(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(3,540672,null,0,sr.j,[],{maxlength:[0,"maxlength"]},null),ho._35(1024,null,sr.k,function(e){return[e]},[sr.j]),ho._15(5,671744,null,0,sr.f,[[3,sr.b],[2,sr.k],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(7,16384,null,0,sr.n,[sr.m],null,null),ho._15(8,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["N"])),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,"10");e(n,5,0,"f_"+t.field.id+"_0");e(n,8,0,"text")},function(e,n){e(n,2,0,ho._29(n,3).maxlength?ho._29(n,3).maxlength:null,ho._29(n,7).ngClassUntouched,ho._29(n,7).ngClassTouched,ho._29(n,7).ngClassPristine,ho._29(n,7).ngClassDirty,ho._29(n,7).ngClassValid,ho._29(n,7).ngClassInvalid,ho._29(n,7).ngClassPending)})}function gn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(3,540672,null,0,sr.j,[],{maxlength:[0,"maxlength"]},null),ho._35(1024,null,sr.k,function(e){return[e]},[sr.j]),ho._15(5,671744,null,0,sr.f,[[3,sr.b],[2,sr.k],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(7,16384,null,0,sr.n,[sr.m],null,null),ho._15(8,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["E"])),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,"10");e(n,5,0,"f_"+t.field.id+"_1");e(n,8,0,"text")},function(e,n){e(n,2,0,ho._29(n,3).maxlength?ho._29(n,3).maxlength:null,ho._29(n,7).ngClassUntouched,ho._29(n,7).ngClassTouched,ho._29(n,7).ngClassPristine,ho._29(n,7).ngClassDirty,ho._29(n,7).ngClassValid,ho._29(n,7).ngClassInvalid,ho._29(n,7).ngClassPending)})}function vn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function yn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,hn)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,mn)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,_n)),ho._15(12,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,gn)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,vn)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"search"==t.mode);e(n,9,0,"edit"==t.mode);e(n,12,0,"edit"==t.mode);e(n,15,0,"edit"==t.mode);e(n,18,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending)})}function bn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),ho._40(3,null,["",""])),(e()(),ho._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.getLatLongLink(t.north,t.east));e(n,3,0,t.formatLatLong(t.north,t.east))})}function Pn(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,yn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n\n"])),(e()(),ho._11(16777216,null,null,1,null,bn)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value)},null)}function En(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function Cn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function In(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function Sn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,En)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,9)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,9)._keyup()&&i}return i},Kr.b,Kr.a)),ho._15(9,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),ho._37(603979776,1,{options:1}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._33(12,{title:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(14,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),ho._15(19,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(20,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Cn)),ho._15(24,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,In)),ho._15(28,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet");e(n,14,0,"f_"+t.field.id);e(n,19,0,"");e(n,24,0,t.options);e(n,28,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,9)._disabled,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending);e(n,20,0,ho._41(n,20,0,ho._29(n,21).transform("addon.mod_data.menuchoose")))})}function wn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function An(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Sn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,wn)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function Tn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function On(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.key)})}function kn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function Dn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[2,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(9,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,13)._click(t)&&i}if("ngModelChange"===n){i=!1!==(o.search["f_"+o.field.id+"_allreq"]=t)&&i}return i},mr.b,mr.a)),ho._15(13,1228800,null,0,_r.a,[ir.a,tr.a,[2,nr.a],ho.p,ho.K],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[_r.a]),ho._15(15,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(17,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_allreq",t.search["f_"+t.field.id+"_allreq"])},function(e,n){e(n,9,0,ho._41(n,9,0,ho._29(n,10).transform("addon.mod_data.selectedrequired")));e(n,12,0,ho._29(n,13)._disabled,ho._29(n,17).ngClassUntouched,ho._29(n,17).ngClassTouched,ho._29(n,17).ngClassPristine,ho._29(n,17).ngClassDirty,ho._29(n,17).ngClassValid,ho._29(n,17).ngClassInvalid,ho._29(n,17).ngClassPending)})}function xn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Tn)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,9)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,9)._keyup()&&i}return i},Kr.b,Kr.a)),ho._15(9,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),ho._37(603979776,1,{options:1}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._33(12,{title:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(14,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,On)),ho._15(19,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,kn)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,Dn)),ho._15(26,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet","true");e(n,14,0,"f_"+t.field.id);e(n,19,0,t.options);e(n,23,0,t.error&&"edit"==t.mode);e(n,26,0,"search"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,9)._disabled,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending)})}function Mn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function Un(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,xn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Mn)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function Nn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function Rn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function Fn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Nn)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(9,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(11,16384,null,0,sr.n,[sr.m],null,null),ho._15(12,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Rn)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"number",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,11).ngClassUntouched,ho._29(n,11).ngClassTouched,ho._29(n,11).ngClassPristine,ho._29(n,11).ngClassDirty,ho._29(n,11).ngClassValid,ho._29(n,11).ngClassInvalid,ho._29(n,11).ngClassPending)})}function Ln(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function Hn(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Fn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Ln)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function Kn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.error)},null)}function Wn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(5,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(6,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,1,"core-attachments",[["acceptedTypes","image"],["maxSubmissions","1"]],null,null,null,Ms.b,Ms.a)),ho._15(9,114688,null,0,Us.a,[Mr.a,Mo.a,dr.a,Ns.a,Zo.a,Rs.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Kn)),ho._15(12,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._16(14,0,null,null,3,"ion-label",[["stacked",""]],null,null,null,null,null)),ho._15(15,16384,null,0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),ho._40(16,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(19,0,null,null,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(20,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(22,16384,null,0,sr.n,[sr.m],null,null),ho._15(23,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,t.field.required);e(n,9,0,t.files,t.maxSizeBytes,"1",t.component,t.componentId,!0,"image");e(n,12,0,t.error);e(n,20,0,"f_"+t.field.id+"_alttext");e(n,23,0,"text",ho._41(n,23,1,ho._29(n,24).transform("addon.mod_data.alttext")))},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,16,0,ho._41(n,16,0,ho._29(n,17).transform("addon.mod_data.alttext")));e(n,19,0,ho._29(n,22).ngClassUntouched,ho._29(n,22).ngClassTouched,ho._29(n,22).ngClassPristine,ho._29(n,22).ngClassDirty,ho._29(n,22).ngClassValid,ho._29(n,22).ngClassInvalid,ho._29(n,22).ngClassPending)})}function qn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(6,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(8,16384,null,0,sr.n,[sr.m],null,null),ho._15(9,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"f_"+t.field.id);e(n,9,0,"text",t.field.name)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,5,0,ho._29(n,8).ngClassUntouched,ho._29(n,8).ngClassTouched,ho._29(n,8).ngClassPristine,ho._29(n,8).ngClassDirty,ho._29(n,8).ngClassValid,ho._29(n,8).ngClassInvalid,ho._29(n,8).ngClassPending)})}function Bn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"span",[],null,[[null,"click"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==o.gotoEntry.emit(o.entryId)&&i}return i},null,null)),(e()(),ho._16(1,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"src",4],[8,"alt",0],[8,"title",0]],null,null,null,null)),ho._15(2,4210688,null,0,Zl.a,[ho.p,Do.a,xr.a,kr.a,Or.a,Mo.a,Dr.a,Mr.a,fr.a],null,null)],null,function(e,n){var t=n.component;e(n,1,0,t.imageUrl,t.title,t.title)})}function jn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"src",4],[8,"alt",0],[8,"title",0],[1,"width",0],[1,"height",0]],null,null,null,null)),ho._15(1,4210688,null,0,Zl.a,[ho.p,Do.a,xr.a,kr.a,Or.a,Mo.a,Dr.a,Mr.a,fr.a],null,null)],null,function(e,n){var t=n.component;e(n,0,0,t.imageUrl,t.title,t.title,t.width,t.height)})}function Gn(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Wn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,qn)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Bn)),ho._15(7,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,jn)),ho._15(10,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,"edit"==t.mode);e(n,4,0,"search"==t.mode);e(n,7,0,"list"==t.mode&&t.imageUrl);e(n,10,0,"show"==t.mode&&t.imageUrl)},null)}function zn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function Vn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function $n(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function Qn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,zn)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,9)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,9)._keyup()&&i}return i},Kr.b,Kr.a)),ho._15(9,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),ho._37(603979776,1,{options:1}),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._33(12,{title:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(14,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[2,sr.l]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),ho._15(19,16384,[[1,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(20,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Vn)),ho._15(24,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,$n)),ho._15(28,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet");e(n,14,0,"f_"+t.field.id);e(n,19,0,"");e(n,24,0,t.options);e(n,28,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,9)._disabled,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending);e(n,20,0,ho._41(n,20,0,ho._29(n,21).transform("addon.mod_data.menuchoose")))})}function Yn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function Xn(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Qn)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,Yn)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function Jn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function Zn(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function et(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Jn)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(9,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(11,16384,null,0,sr.n,[sr.m],null,null),ho._15(12,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Zn)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"text",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,11).ngClassUntouched,ho._29(n,11).ngClassTouched,ho._29(n,11).ngClassPristine,ho._29(n,11).ngClassDirty,ho._29(n,11).ngClassValid,ho._29(n,11).ngClassInvalid,ho._29(n,11).ngClassPending)})}function nt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null)],function(e,n){e(n,1,0,n.component.value.content)},null)}function tt(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,et)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,nt)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function it(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(1,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(3,16384,null,0,sr.n,[sr.m],null,null),ho._15(4,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,"text",t.field.name)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending)})}function ot(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function rt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"core-rich-text-editor",[["item-content",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Zr.b,Zr.a)),ho._15(1,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(3,16384,null,0,sr.n,[sr.m],null,null),ho._15(4,1228800,null,0,el.a,[Mo.a,Dr.a,Or.a,xr.a,[2,Nr.a],ho.p,Lr.a,fr.a,kr.a],{placeholder:[0,"placeholder"],control:[1,"control"],component:[2,"component"],componentId:[3,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,t.field.name,t.form.controls["f_"+t.field.id],t.component,t.componentId)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending)})}function lt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function st(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,it)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,ot)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,rt)),ho._15(12,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,lt)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"search"==t.mode);e(n,9,0,"edit"==t.mode);e(n,12,0,"edit"==t.mode);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending)})}function at(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.format(t.value),t.component,t.componentId)},null)}function ut(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,st)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,at)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value)},null)}function ct(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,ur.b,ur.a)),ho._15(1,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function dt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function ft(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,1).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,1).onReset()&&i}return i},null,null)),ho._15(1,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(3,16384,null,0,sr.o,[sr.b],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,ct)),ho._15(6,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(8,0,null,null,4,"ion-input",[["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(9,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(11,16384,null,0,sr.n,[sr.m],null,null),ho._15(12,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,dt)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"url",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,ho._29(n,3).ngClassUntouched,ho._29(n,3).ngClassTouched,ho._29(n,3).ngClassPristine,ho._29(n,3).ngClassDirty,ho._29(n,3).ngClassValid,ho._29(n,3).ngClassInvalid,ho._29(n,3).ngClassPending);e(n,8,0,ho._29(n,11).ngClassUntouched,ho._29(n,11).ngClassTouched,ho._29(n,11).ngClassPristine,ho._29(n,11).ngClassDirty,ho._29(n,11).ngClassValid,ho._29(n,11).ngClassInvalid,ho._29(n,11).ngClassPending)})}function pt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"a",[["capture","true"],["core-link",""]],[[8,"href",4]],null,null,null,null)),ho._15(1,81920,null,0,ja.a,[ho.p,Mo.a,fr.a,Or.a,Dr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a]],{capture:[0,"capture"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,"true")},function(e,n){var t=n.component;e(n,0,0,t.value.content);e(n,2,0,t.value.content)})}function ht(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,ft)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._11(16777216,null,null,1,null,pt)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function mt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),ho._40(12,null,["",""])),ho._33(13,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("core.settings.synchronization")));e(n,12,0,ho._41(n,12,0,ho._29(n,14).transform("addon.mod_quiz.confirmcontinueoffline",e(n,13,0,t.quiz.syncTimeReadable))))})}function _t(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._40(12,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._16(16,0,null,null,20,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;if("submit"===n){i=!1!==ho._29(e,17).onSubmit(t)&&i}if("reset"===n){i=!1!==ho._29(e,17).onReset()&&i}return i},er.b,er.a)),ho._15(17,540672,null,0,sr.h,[[8,null],[8,null]],{form:[0,"form"]},null),ho._35(2048,null,sr.b,null,[sr.h]),ho._15(19,16384,null,0,sr.o,[sr.b],null,null),ho._15(20,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(24,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(26,0,null,3,9,"core-show-password",[["item-content",""]],null,null,null,au.b,au.a)),ho._15(27,4308992,null,0,uu.a,[ho.p,fr.a,Mo.a,kr.a],{name:[0,"name"]},null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._16(29,0,null,0,5,"ion-input",[["id","addon-mod_quiz-accessrule-password-input"],["name","quizpassword"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(30,671744,null,0,sr.f,[[3,sr.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),ho._35(2048,null,sr.m,null,[sr.f]),ho._15(32,16384,null,0,sr.n,[sr.m],null,null),ho._15(33,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,17,0,n.component.form);e(n,27,0,"quizpassword");e(n,30,0,"quizpassword");e(n,33,0,"password",!1,ho._19(1,"",ho._41(n,33,2,ho._29(n,34).transform("addon.mod_quiz.quizpassword")),""))},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.mod_quiz.quizpassword")));e(n,12,0,ho._41(n,12,0,ho._29(n,13).transform("addon.mod_quiz.requirepasswordmessage")));e(n,16,0,ho._29(n,19).ngClassUntouched,ho._29(n,19).ngClassTouched,ho._29(n,19).ngClassPristine,ho._29(n,19).ngClassDirty,ho._29(n,19).ngClassValid,ho._29(n,19).ngClassInvalid,ho._29(n,19).ngClassPending);e(n,29,0,ho._29(n,32).ngClassUntouched,ho._29(n,32).ngClassTouched,ho._29(n,32).ngClassPristine,ho._29(n,32).ngClassDirty,ho._29(n,32).ngClassValid,ho._29(n,32).ngClassInvalid,ho._29(n,32).ngClassPending)})}function gt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),ho._40(12,null,["",""])),ho._33(13,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n"])),(e()(),ho._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("addon.mod_quiz.confirmstartheader")));e(n,12,0,ho._41(n,12,0,ho._29(n,14).transform("addon.mod_quiz.confirmstart",e(n,13,0,t.quiz.readableTimeLimit))))})}function vt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[7,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function yt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["grade_"+n.parent.parent.parent.context.index])},null)}function bt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,28,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(8,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(9,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(10,0,["",""])),ho._33(11,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(14,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,15)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,15)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.selectedValues[e.parent.parent.context.index].grade=t)&&i}return i},Kr.b,Kr.a)),ho._15(15,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{interface:[0,"interface"]},null),ho._37(603979776,7,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(18,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(20,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,vt)),ho._15(23,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,3,1,null,yt)),ho._15(27,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,!0);e(n,15,0,"action-sheet");e(n,18,0,t.selectedValues[n.parent.parent.context.index].grade);e(n,23,0,n.parent.parent.context.$implicit.grades);e(n,27,0,t.fieldErrors["grade_"+n.parent.parent.context.index])},function(e,n){e(n,10,0,ho._41(n,10,0,ho._29(n,12).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(n,11,0,n.parent.parent.context.$implicit.dimtitle))));e(n,14,0,ho._29(n,15)._disabled,ho._29(n,20).ngClassUntouched,ho._29(n,20).ngClassTouched,ho._29(n,20).ngClassPristine,ho._29(n,20).ngClassDirty,ho._29(n,20).ngClassValid,ho._29(n,20).ngClassInvalid,ho._29(n,20).ngClassPending)})}function Pt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ho._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.label)})}function Et(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,Pt)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.context.$implicit.value===n.component.selectedValues[n.parent.parent.parent.context.index].grade)},null)}function Ct(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,8,{contentLabel:0}),ho._37(603979776,9,{_buttons:1}),ho._37(603979776,10,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._33(9,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,2,1,null,Et)),ho._15(13,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,13,0,n.parent.parent.context.$implicit.grades)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,10).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function It(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,11,{contentLabel:0}),ho._37(603979776,12,{_buttons:1}),ho._37(603979776,13,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),ho._15(8,16384,[[11,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),ho._40(9,null,["",""])),ho._33(10,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;if("input"===n){i=!1!==ho._29(e,18).onInput()&&i}if("change"===n){i=!1!==ho._29(e,18).onChange()&&i}if("ngModelChange"===n){i=!1!==(o.selectedValues[e.parent.parent.context.index].peercomment=t)&&i}return i},Vr.b,Vr.a)),ho._15(14,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),ho._15(17,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],null,{input:"input"}),ho._15(18,4210688,null,0,Pu.a,[ho.p],null,null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(n,10,0,n.parent.parent.context.$implicit.dimtitle))));e(n,13,0,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending)})}function St(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,14,{contentLabel:0}),ho._37(603979776,15,{_buttons:1}),ho._37(603979776,16,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._33(9,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(13,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,10).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function wt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,28,"ion-card",[],null,null,null,null,null)),ho._15(1,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(13,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,bt)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Ct)),ho._15(21,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,It)),ho._15(24,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,St)),ho._15(27,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description);e(n,18,0,t.edit&&n.parent.context.$implicit.grades);e(n,21,0,!t.edit&&n.parent.context.$implicit.grades);e(n,24,0,t.edit);e(n,27,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle)})}function At(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,wt)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function Tt(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,At)),ho._15(1,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function Ot(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["peercomment_"+n.parent.parent.parent.context.index])},null)}function kt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(8,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(9,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(10,0,["",""])),ho._33(11,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(14,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;if("input"===n){i=!1!==ho._29(e,19).onInput()&&i}if("change"===n){i=!1!==ho._29(e,19).onChange()&&i}if("ngModelChange"===n){i=!1!==(o.selectedValues[e.parent.parent.context.index].peercomment=t)&&i}return i},Vr.b,Vr.a)),ho._15(15,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(17,16384,null,0,sr.n,[sr.m],null,null),ho._15(18,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],null,{input:"input"}),ho._15(19,4210688,null,0,Pu.a,[ho.p],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,3,1,null,Ot)),ho._15(22,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,!0);e(n,15,0,t.selectedValues[n.parent.parent.context.index].peercomment);e(n,22,0,t.fieldErrors["peercomment_"+n.parent.parent.context.index])},function(e,n){e(n,10,0,ho._41(n,10,0,ho._29(n,12).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(n,11,0,n.parent.parent.context.$implicit.dimtitle))));e(n,14,0,ho._29(n,17).ngClassUntouched,ho._29(n,17).ngClassTouched,ho._29(n,17).ngClassPristine,ho._29(n,17).ngClassDirty,ho._29(n,17).ngClassValid,ho._29(n,17).ngClassInvalid,ho._29(n,17).ngClassPending)})}function Dt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,7,{contentLabel:0}),ho._37(603979776,8,{_buttons:1}),ho._37(603979776,9,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._33(9,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(13,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,10).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function xt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),ho._15(1,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(13,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,kt)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Dt)),ho._15(21,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description);e(n,18,0,t.edit);e(n,21,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle)})}function Mt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,xt)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function Ut(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Mt)),ho._15(1,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function Nt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["grade_"+n.parent.parent.context.index])},null)}function Rt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,14,{contentLabel:0}),ho._37(603979776,15,{_buttons:1}),ho._37(603979776,16,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),ho._15(8,16384,[[14,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),ho._40(9,null,["",""])),ho._33(10,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;if("input"===n){i=!1!==ho._29(e,18).onInput()&&i}if("change"===n){i=!1!==ho._29(e,18).onChange()&&i}if("ngModelChange"===n){i=!1!==(o.selectedValues[e.parent.parent.context.index].peercomment=t)&&i}return i},Vr.b,Vr.a)),ho._15(14,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(16,16384,null,0,sr.n,[sr.m],null,null),ho._15(17,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],null,{input:"input"}),ho._15(18,4210688,null,0,Pu.a,[ho.p],null,null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,"peercomment_"+n.parent.parent.context.index,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,9,0,ho._41(n,9,0,ho._29(n,11).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(n,10,0,n.parent.parent.context.$implicit.dimtitle))));e(n,13,0,ho._29(n,16).ngClassUntouched,ho._29(n,16).ngClassTouched,ho._29(n,16).ngClassPristine,ho._29(n,16).ngClassDirty,ho._29(n,16).ngClassValid,ho._29(n,16).ngClassInvalid,ho._29(n,16).ngClassPending)})}function Ft(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,17,{contentLabel:0}),ho._37(603979776,18,{_buttons:1}),ho._37(603979776,19,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._33(9,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(13,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,10).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function Lt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,82,"ion-card",[],null,null,null,null,null)),ho._15(1,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(13,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(14,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(17,0,null,null,58,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.selectedValues[e.parent.context.index].grade=t)&&i}return i},null,null)),ho._15(18,1064960,null,1,Tu.a,[ho.K,ho.p,ho.i],null,null),ho._37(335544320,4,{_header:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Tu.a]),ho._15(21,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(23,16384,null,0,sr.n,[sr.m],null,null),ho._15(24,16384,null,0,Ou.a,[ir.a,ho.p,ho.K,kr.a,ku.l,Qr.a],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(26,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(27,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,5,{contentLabel:0}),ho._37(603979776,6,{_buttons:1}),ho._37(603979776,7,{_icons:1}),ho._15(31,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(33,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,ur.b,ur.a)),ho._15(34,16384,[[5,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,""],[8,null],[8,null]],null,null),ho._15(35,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(36,0,["",""])),ho._33(37,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._11(16777216,null,3,1,null,Nt)),ho._15(41,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(44,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(45,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,8,{contentLabel:0}),ho._37(603979776,9,{_buttons:1}),ho._37(603979776,10,{_icons:1}),ho._15(49,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(51,0,null,1,3,"ion-label",[],null,null,null,null,null)),ho._15(52,16384,[[8,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._16(53,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(54,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(56,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,57)._click(t)&&i}return i},Du.b,Du.a)),ho._15(57,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(60,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(61,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,11,{contentLabel:0}),ho._37(603979776,12,{_buttons:1}),ho._37(603979776,13,{_icons:1}),ho._15(65,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(67,0,null,1,3,"ion-label",[],null,null,null,null,null)),ho._15(68,16384,[[11,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._16(69,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(70,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(72,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,73)._click(t)&&i}return i},Du.b,Du.a)),ho._15(73,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Rt)),ho._15(78,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Ft)),ho._15(81,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description);e(n,21,0,"grade_"+n.parent.context.index,t.selectedValues[n.parent.context.index].grade);e(n,35,0,t.edit);e(n,41,0,t.edit&&t.fieldErrors["grade_"+n.parent.context.index]);e(n,54,0,n.parent.context.$implicit.grade0);e(n,57,0,-1,!t.edit);e(n,70,0,n.parent.context.$implicit.grade1);e(n,73,0,1,!t.edit);e(n,78,0,t.edit);e(n,81,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle);e(n,17,0,ho._29(n,23).ngClassUntouched,ho._29(n,23).ngClassTouched,ho._29(n,23).ngClassPristine,ho._29(n,23).ngClassDirty,ho._29(n,23).ngClassValid,ho._29(n,23).ngClassInvalid,ho._29(n,23).ngClassPending);e(n,36,0,ho._41(n,36,0,ho._29(n,38).transform("addon.mod_workshop.yourassessmentfor",e(n,37,0,n.parent.context.$implicit.dimtitle))));e(n,56,0,ho._29(n,57)._disabled);e(n,72,0,ho._29(n,73)._disabled)})}function Ht(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Lt)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function Kt(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Ht)),ho._15(1,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function Wt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-input-errors",[],null,null,null,pr.b,pr.a)),ho._15(1,638976,null,0,hr.a,[Zo.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["chosenlevelid_"+n.parent.parent.context.index])},null)}function qt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,5,{contentLabel:0}),ho._37(603979776,6,{_buttons:1}),ho._37(603979776,7,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(7,0,null,1,4,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[5,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._16(9,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._16(13,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,14)._click(t)&&i}return i},Du.b,Du.a)),ho._15(14,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,11,0,n.context.$implicit.definition);e(n,14,0,n.context.$implicit.levelid,!t.edit)},function(e,n){e(n,13,0,ho._29(n,14)._disabled)})}function Bt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,33,"ion-card",[],null,null,null,null,null)),ho._15(1,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(3,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(10,0,null,2,2,"h2",[],null,null,null,ur.b,ur.a)),ho._15(11,4308992,null,0,cr.a,[ho.p,Zo.a,dr.a,fr.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),ho._40(12,0,["",""])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(14,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(15,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"]},null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._11(16777216,null,2,1,null,Wt)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(21,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.selectedValues[e.parent.context.index].chosenlevelid=t)&&i}return i},null,null)),ho._15(22,1064960,null,1,Tu.a,[ho.K,ho.p,ho.i],null,null),ho._37(335544320,4,{_header:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Tu.a]),ho._15(25,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(27,16384,null,0,sr.n,[sr.m],null,null),ho._15(28,16384,null,0,Ou.a,[ir.a,ho.p,ho.K,kr.a,ku.l,Qr.a],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,qt)),ho._15(31,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,11,0,t.edit);e(n,15,0,n.parent.context.$implicit.description);e(n,18,0,t.edit&&t.fieldErrors["chosenlevelid_"+n.parent.context.index]);e(n,25,0,"chosenlevelid_"+n.parent.context.index,t.selectedValues[n.parent.context.index].chosenlevelid);e(n,31,0,n.parent.context.$implicit.fields)},function(e,n){e(n,12,0,n.parent.context.$implicit.dimtitle);e(n,21,0,ho._29(n,27).ngClassUntouched,ho._29(n,27).ngClassTouched,ho._29(n,27).ngClassPristine,ho._29(n,27).ngClassDirty,ho._29(n,27).ngClassValid,ho._29(n,27).ngClassInvalid,ho._29(n,27).ngClassPending)})}function jt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Bt)),ho._15(3,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function Gt(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,jt)),ho._15(1,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function zt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,8,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(3,147456,null,0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(4,null,["\n            ","\n        "])),ho._32(131072,Jo.a,[Zo.a,ho.i]),ho._34(6,1),ho._33(7,{$a:0}),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,3,0,"warning")},function(e,n){e(n,2,0,ho._29(n,3)._hidden);e(n,4,0,ho._41(n,4,0,ho._29(n,8).transform("core.thereisdatatosync",e(n,7,0,ho._41(n,4,0,e(n,6,0,ho._29(n.parent,0),ho._41(n,4,0,ho._29(n,5).transform("addon.notes.notes"))))))))})}function Vt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,Sl.b,Sl.a)),ho._15(1,49152,null,0,wl.a,[],{message:[0,"message"],icon:[1,"icon"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,1,0,ho._41(n,1,0,ho._29(n,2).transform("addon.notes.nonotes")),"list")},null)}function $t(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[["item-end",""]],null,null,null,null,null)),(e()(),ho._40(1,null,["",""])),ho._34(2,1)],null,function(e,n){e(n,1,0,ho._41(n,1,0,e(n,2,0,ho._29(n.parent.parent.parent,1),n.parent.context.$implicit.lastmodified)))})}function Qt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,"p",[["item-end",""]],null,null,null,null,null)),(e()(),ho._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(2,147456,[[6,4]],0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(3,null,[" ",""])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,2,0,"time")},function(e,n){e(n,1,0,ho._29(n,2)._hidden);e(n,3,0,ho._41(n,3,0,ho._29(n,4).transform("core.notsent")))})}function Yt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,34,"ion-card",[],null,null,null,null,null)),ho._15(1,16384,null,0,ds.a,[ir.a,ho.p,ho.K],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(3,0,null,null,19,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Bu.b,Bu.a)),ho._15(11,16384,null,0,ju.a,[],null,null),ho._15(12,770048,null,0,Gu.a,[xo.a,Or.a,fr.a,Mr.a,Lr.a],{user:[0,"user"]},null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),ho._40(15,null,["",""])),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._11(16777216,null,4,1,null,$t)),ho._15(18,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._11(16777216,null,4,1,null,Qt)),ho._15(21,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(24,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(25,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,7,{contentLabel:0}),ho._37(603979776,8,{_buttons:1}),ho._37(603979776,9,{_icons:1}),ho._15(29,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n                    "])),(e()(),ho._16(31,0,null,2,1,"core-format-text",[],null,null,null,null,null)),ho._15(32,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],clean:[1,"clean"]},null),(e()(),ho._40(-1,2,["\n                "])),(e()(),ho._40(-1,null,["\n            "]))],function(e,n){e(n,12,0,n.context.$implicit);e(n,18,0,!n.context.$implicit.offline);e(n,21,0,n.context.$implicit.offline);e(n,32,0,n.context.$implicit.content,!0)},function(e,n){e(n,15,0,n.context.$implicit.userfullname)})}function Xt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),ho._15(1,16384,null,0,Ou.a,[ir.a,ho.p,ho.K,kr.a,ku.l,Qr.a],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Yt)),ho._15(4,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "]))],function(e,n){e(n,4,0,n.component.notes)},null)}function Jt(e){return ho._42(0,[ho._32(0,lr.h,[]),ho._32(0,zu.a,[Do.a,Zo.a,Ir.a]),ho._37(402653184,1,{content:0}),(e()(),ho._16(3,0,null,null,15,"core-navbar-buttons",[["end",""]],null,null,null,Vu.b,Vu.a)),ho._15(4,245760,null,1,$u.a,[ho.p,Do.a,Mo.a],null,null),ho._37(603979776,2,{buttons:1}),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._16(7,0,null,0,10,"core-context-menu",[],null,null,null,Rl.b,Rl.a)),ho._15(8,245760,null,0,Il.a,[Zo.a,Ul.a,ho.p,Mo.a,[2,Fl.a]],null,null),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._16(10,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.refreshNotes(!1)&&i}return i},El.b,El.a)),ho._15(11,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,0,["\n        "])),(e()(),ho._16(14,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var i=!0;if("action"===n){i=!1!==e.component.refreshNotes(!0)&&i}return i},El.b,El.a)),ho._15(15,770048,null,0,Cl.a,[Il.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,0,["\n"])),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._16(20,0,null,null,50,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Qu.b,Qu.a)),ho._15(21,4374528,[[1,4]],0,Nr.a,[ir.a,kr.a,Qr.a,ho.p,ho.K,qr.a,Yu.a,ho.D,[2,Xu.a],[2,xo.a]],null,null),(e()(),ho._40(-1,1,["\n    "])),(e()(),ho._16(23,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var i=!0;if("ionRefresh"===n){i=!1!==e.component.refreshNotes(!1,t)&&i}return i},null,null)),ho._15(24,212992,null,0,Ju.a,[kr.a,Nr.a,ho.D,ku.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(26,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Zu.b,Zu.a)),ho._15(27,114688,null,0,ec.a,[Ju.a,ir.a],{pullingText:[0,"pullingText"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,1,["\n    "])),(e()(),ho._16(31,0,null,1,38,"core-loading",[["class","core-loading-center"]],null,null,null,al.b,al.a)),ho._15(32,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,0,["\n\n        "])),(e()(),ho._16(34,0,null,0,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(36,0,null,null,22,"ion-select",[["class","core-button-select"],["interface","popover"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,37)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,37)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.type=t)&&i}if("ngModelChange"===n){i=!1!==o.typeChanged()&&i}return i},Kr.b,Kr.a)),ho._15(37,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{interface:[0,"interface"]},null),ho._37(603979776,3,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(40,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(42,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(44,0,null,null,3,"ion-option",[["value","site"]],null,null,null,null,null)),ho._15(45,16384,[[3,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(46,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(49,0,null,null,3,"ion-option",[["value","course"]],null,null,null,null,null)),ho._15(50,16384,[[3,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(51,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(54,0,null,null,3,"ion-option",[["value","personal"]],null,null,null,null,null)),ho._15(55,16384,[[3,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(56,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,0,["\n\n        "])),(e()(),ho._11(16777216,null,0,1,null,zt)),ho._15(62,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n        "])),(e()(),ho._11(16777216,null,0,1,null,Vt)),ho._15(65,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n\n        "])),(e()(),ho._11(16777216,null,0,1,null,Xt)),ho._15(68,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,0,["\n    "])),(e()(),ho._40(-1,1,["\n"])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0),e(n,8,0);e(n,11,0,ho._41(n,11,0,ho._29(n,12).transform("core.refresh")),t.refreshIcon,!0,100,!(t.notesLoaded&&!t.hasOffline));e(n,15,0,ho._41(n,15,0,ho._29(n,16).transform("core.settings.synchronizenow")),t.syncIcon,!1,100,!(t.notesLoaded&&t.hasOffline));e(n,24,0,t.notesLoaded);e(n,27,0,ho._19(1,"",ho._41(n,27,0,ho._29(n,28).transform("core.pulltorefresh")),""));e(n,32,0,t.notesLoaded);e(n,37,0,"popover");e(n,40,0,t.type);e(n,45,0,"site");e(n,50,0,"course");e(n,55,0,"personal");e(n,62,0,t.hasOffline);e(n,65,0,t.notes&&0==t.notes.length);e(n,68,0,t.notes&&t.notes.length>0)},function(e,n){e(n,20,0,ho._29(n,21).statusbarPadding,ho._29(n,21)._hasRefresher);e(n,23,0,"inactive"!==ho._29(n,24).state,ho._29(n,24)._top);e(n,26,0,ho._29(n,27).r.state);e(n,36,0,ho._29(n,37)._disabled,ho._29(n,42).ngClassUntouched,ho._29(n,42).ngClassTouched,ho._29(n,42).ngClassPristine,ho._29(n,42).ngClassDirty,ho._29(n,42).ngClassValid,ho._29(n,42).ngClassInvalid,ho._29(n,42).ngClassPending);e(n,46,0,ho._41(n,46,0,ho._29(n,47).transform("addon.notes.sitenotes")));e(n,51,0,ho._41(n,51,0,ho._29(n,52).transform("addon.notes.coursenotes")));e(n,56,0,ho._41(n,56,0,ho._29(n,57).transform("addon.notes.personalnotes")))})}function Zt(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,5,{contentLabel:0}),ho._37(603979776,6,{_buttons:1}),ho._37(603979776,7,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,5,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[5,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(14,0,null,4,1,"ion-radio",[],[[8,"id",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,15)._click(t)&&i}return i},Du.b,Du.a)),ho._15(15,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,11,0,n.context.$implicit.text,t.component,t.componentId);e(n,15,0,n.context.$implicit.value,n.context.$implicit.disabled)},function(e,n){e(n,14,0,ho._19(1,"",n.context.$implicit.id,""),ho._29(n,15)._disabled)})}function ei(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,33,"div",[],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","addon-qbehaviour-deferredcbm-certainty-title item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._40(10,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(14,0,null,null,10,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.question.behaviourCertaintySelected=t)&&i}return i},null,null)),ho._15(15,1064960,null,1,Tu.a,[ho.K,ho.p,ho.i],null,null),ho._37(335544320,4,{_header:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Tu.a]),ho._15(18,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(20,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,Zt)),ho._15(23,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(27,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,28)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,28).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,28)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,28)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(28,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(30,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(32,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,18,0,t.question.behaviourCertaintyOptions[0].name,t.question.behaviourCertaintySelected);e(n,23,0,t.question.behaviourCertaintyOptions);e(n,30,0,t.question.behaviourCertaintySelected)},function(e,n){var t=n.component;e(n,10,0,ho._41(n,10,0,ho._29(n,11).transform("core.question.certainty")));e(n,14,0,ho._29(n,20).ngClassUntouched,ho._29(n,20).ngClassTouched,ho._29(n,20).ngClassPristine,ho._29(n,20).ngClassDirty,ho._29(n,20).ngClassValid,ho._29(n,20).ngClassInvalid,ho._29(n,20).ngClassPending);e(n,27,0,t.question.behaviourCertaintyOptions[0].name,ho._29(n,32).ngClassUntouched,ho._29(n,32).ngClassTouched,ho._29(n,32).ngClassPristine,ho._29(n,32).ngClassDirty,ho._29(n,32).ngClassValid,ho._29(n,32).ngClassInvalid,ho._29(n,32).ngClassPending)})}function ni(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,ei)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.behaviourCertaintyOptions&&t.question.behaviourCertaintyOptions.length)},null)}function ti(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,ho._19(1,"",t.question.behaviourSeenInput.name,""),ho._19(1,"",t.question.behaviourSeenInput.value,""))})}function ii(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,ti)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.question.behaviourSeenInput)},null)}function oi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ri(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,oi)),ho._15(3,540672,null,0,lr.r,[ho.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,ho._29(n.parent.parent,7))},null)}function li(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function si(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._11(16777216,null,null,1,null,li)),ho._15(3,540672,null,0,lr.r,[ho.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ho._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,ho._29(n.parent.parent,4))},null)}function ai(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ui(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._11(16777216,null,null,1,null,ai)),ho._15(3,540672,null,0,lr.r,[ho.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ho._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,ho._29(n.parent.parent,4))},null)}function ci(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function di(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,ci)),ho._15(3,540672,null,0,lr.r,[ho.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,ho._29(n.parent.parent,7))},null)}function fi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,58,"section",[["class","addon-qtype-calculated-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,ri)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._16(18,0,null,null,35,"ion-item",[["class","grid item item-block"],["ion-grid",""],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(19,16384,null,0,Ll.a,[],null,null),ho._15(20,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(24,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(26,0,null,3,26,"ion-grid",[["class","grid"],["item-content",""]],null,null,null,null,null)),ho._15(27,16384,null,0,Ll.a,[],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(29,0,null,null,22,"ion-row",[["class","row"]],null,null,null,null,null)),ho._15(30,16384,null,0,Hl.a,[],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,si)),ho._15(34,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n                "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(37,0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),ho._15(38,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._16(40,0,null,null,5,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,Vr.b,Vr.a)),ho._15(41,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._31(42,1),ho._15(43,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._40(-1,null,["\n\n                "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,ui)),ho._15(50,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,di)),ho._15(57,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId);e(n,16,0,t.question.options&&t.question.options.length&&t.question.optionsFirst);e(n,34,0,t.question.select&&t.question.selectFirst);e(n,41,0,e(n,42,0,t.question.input.correctClass));e(n,43,0,t.question.input.value,t.question.input.readOnly,"text","off",ho._19(1,"",ho._41(n,43,4,ho._29(n,44).transform("core.question.answer")),""));e(n,50,0,t.question.select&&!t.question.selectFirst);e(n,57,0,t.question.options&&t.question.options.length&&!t.question.optionsFirst)},function(e,n){e(n,40,0,n.component.question.input.name)})}function pi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),ho._40(1,null,["",""]))],null,function(e,n){var t=n.component;e(n,0,0,ho._19(1,"",t.question.select.id,""));e(n,1,0,t.question.select.accessibilityLabel)})}function hi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[7,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function mi(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(1,0,null,null,25,"ion-col",[["class","col"]],null,null,null,null,null)),ho._15(2,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,pi)),ho._15(5,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(7,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0,o=e.component;if("click"===n){i=!1!==ho._29(e,8)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,8)._keyup()&&i}if("ngModelChange"===n){i=!1!==(o.question.select.selected=t)&&i}return i},Kr.b,Kr.a)),ho._15(8,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{disabled:[0,"disabled"],interface:[1,"interface"]},null),ho._37(603979776,7,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(11,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(13,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,hi)),ho._15(16,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,null,["\n\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(20,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,21)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,21).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,21)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,21)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(21,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(23,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(25,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.question.select.accessibilityLabel);e(n,8,0,t.question.select.disabled,"action-sheet");e(n,11,0,t.question.select.name,t.question.select.disabled,t.question.select.selected);e(n,16,0,t.question.select.options);e(n,23,0,t.question.select.selected)},function(e,n){var t=n.component;e(n,7,0,ho._19(1,"",t.question.select.id,""),ho._29(n,8)._disabled,ho._29(n,13).ngClassUntouched,ho._29(n,13).ngClassTouched,ho._29(n,13).ngClassPristine,ho._29(n,13).ngClassDirty,ho._29(n,13).ngClassValid,ho._29(n,13).ngClassInvalid,ho._29(n,13).ngClassPending);e(n,20,0,t.question.select.name,ho._29(n,25).ngClassUntouched,ho._29(n,25).ngClassTouched,ho._29(n,25).ngClassPristine,ho._29(n,25).ngClassDirty,ho._29(n,25).ngClassValid,ho._29(n,25).ngClassInvalid,ho._29(n,25).ngClassPending)})}function _i(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,9,{contentLabel:0}),ho._37(603979776,10,{_buttons:1}),ho._37(603979776,11,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(7,0,null,1,5,"ion-label",[],null,null,null,null,null)),ho._15(8,16384,[[9,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(10,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ho._40(11,null,["",""])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(14,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,15)._click(t)&&i}return i},Du.b,Du.a)),ho._15(15,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){e(n,15,0,n.context.$implicit.value,n.context.$implicit.disabled||n.component.question.input.readOnly)},function(e,n){e(n,11,0,n.context.$implicit.text);e(n,14,0,ho._29(n,15)._disabled)})}function gi(e){return ho._42(0,[(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(1,0,null,null,18,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.question.unit=t)&&i}return i},null,null)),ho._15(2,1064960,null,1,Tu.a,[ho.K,ho.p,ho.i],null,null),ho._37(335544320,8,{_header:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Tu.a]),ho._15(5,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(7,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,_i)),ho._15(10,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(13,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,14)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,14).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,14)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,14)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(14,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(16,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(18,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.question.optionsName,t.question.unit);e(n,10,0,t.question.options);e(n,16,0,t.question.unit)},function(e,n){var t=n.component;e(n,1,0,ho._29(n,7).ngClassUntouched,ho._29(n,7).ngClassTouched,ho._29(n,7).ngClassPristine,ho._29(n,7).ngClassDirty,ho._29(n,7).ngClassValid,ho._29(n,7).ngClassInvalid,ho._29(n,7).ngClassPending);e(n,13,0,t.question.optionsName,ho._29(n,18).ngClassUntouched,ho._29(n,18).ngClassTouched,ho._29(n,18).ngClassPristine,ho._29(n,18).ngClassDirty,ho._29(n,18).ngClassValid,ho._29(n,18).ngClassInvalid,ho._29(n,18).ngClassPending)})}function vi(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,fi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(0,[["selectUnits",2]],null,0,null,mi)),(e()(),ho._40(-1,null,["\n\n"])),(e()(),ho._40(-1,null,["\n"])),(e()(),ho._11(0,[["radioUnits",2]],null,0,null,gi)),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function yi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(3,147456,[[3,4]],0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(4,null,["\n            ","\n        "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,ho._29(n,3)._hidden);e(n,4,0,ho._41(n,4,0,ho._29(n,5).transform("core.question.howtodraganddrop")))})}function bi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var i=!0;if("afterRender"===n){i=!1!==e.component.questionRendered()&&i}return i},null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"]},{afterRender:"afterRender"})],function(e,n){var t=n.component;e(n,1,0,t.question.ddArea,t.component,t.componentId,!1)},null)}function Pi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"section",[["class","addon-qtype-ddimageortext-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,1,"core-loading",[],null,null,null,al.b,al.a)),ho._15(4,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._16(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(7,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(8,{invisible:0}),ho._15(9,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(13,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,yi)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(19,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(20,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,bi)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId);e(n,23,0,t.question.ddArea)},null)}function Ei(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Pi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function Ci(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(3,147456,[[4,4]],0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(4,null,["\n            ","\n        "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,ho._29(n,3)._hidden);e(n,4,0,ho._41(n,4,0,ho._29(n,5).transform("core.question.howtodraganddrop")))})}function Ii(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var i=!0;if("afterRender"===n){i=!1!==e.component.questionRendered()&&i}return i},null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"]},{afterRender:"afterRender"})],function(e,n){var t=n.component;e(n,1,0,t.question.ddArea,t.component,t.componentId,!1)},null)}function Si(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"section",[["class","addon-qtype-ddmarker-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,1,"core-loading",[],null,null,null,al.b,al.a)),ho._15(4,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._16(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(7,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(8,{invisible:0}),ho._15(9,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(13,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,Ci)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(19,0,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,null,null,null,null)),ho._15(20,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,Ii)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId);e(n,23,0,t.question.ddArea)},null)}function wi(e){return ho._42(0,[ho._37(671088640,1,{questionTextEl:0}),(e()(),ho._11(16777216,null,null,1,null,Si)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.question.text||""===t.question.text)},null)}function Ai(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ho._15(3,147456,[[4,4]],0,Vs.a,[ir.a,ho.p,ho.K],{name:[0,"name"]},null),(e()(),ho._40(4,null,["\n            ","\n        "])),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,ho._29(n,3)._hidden);e(n,4,0,ho._41(n,4,0,ho._29(n,5).transform("core.question.howtodraganddrop")))})}function Ti(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var i=!0;if("afterRender"===n){i=!1!==e.component.questionRendered()&&i}return i},null,null)),ho._15(1,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},{afterRender:"afterRender"})],function(e,n){var t=n.component;e(n,1,0,t.question.answers,t.component,t.componentId)},null)}function Oi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,27,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,1,"core-loading",[],null,null,null,al.b,al.a)),ho._15(4,638976,null,0,ul.a,[Zo.a,ho.p,Lr.a,fr.a],{hideUntil:[0,"hideUntil"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._16(6,0,null,null,20,"ion-item",[["class","addon-qtype-ddwtos-container item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(7,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho._33(8,{invisible:0}),ho._15(9,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,2,{contentLabel:0}),ho._37(603979776,3,{_buttons:1}),ho._37(603979776,4,{_icons:1}),ho._15(13,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,Ai)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(19,0,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,null,null,null,null)),ho._15(20,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,Ti)),ho._15(23,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(25,0,null,2,0,"div",[["class","drags"]],null,null,null,null,null)),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,"addon-qtype-ddwtos-container",e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId);e(n,23,0,t.question.answers)},null)}function ki(e){return ho._42(0,[ho._37(671088640,1,{questionTextEl:0}),(e()(),ho._11(16777216,null,null,1,null,Oi)),ho._15(2,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.question.text||""===t.question.text)},null)}function Di(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.question.seenInput.name,t.question.seenInput.value)})}function xi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,17,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Di)),ho._15(4,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(6,0,null,null,10,"ion-item",[["class","item item-text-wrap item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(7,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(11,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(13,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(14,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(15,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.seenInput);e(n,15,0,t.question.text,t.component,t.componentId)},null)}function Mi(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,xi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function Ui(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,0,"input",[["item-content",""],["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.question.formatInput.name,t.question.formatInput.value)})}function Ni(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,7,"ion-textarea",[["aria-multiline","true"],["class","core-question-textarea"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Vr.b,Vr.a)),ho._15(1,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ho._33(2,{"core-monospaced":0}),ho._15(3,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(5,16384,null,0,sr.n,[sr.m],null,null),ho._15(6,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{placeholder:[0,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,"core-question-textarea",e(n,2,0,t.question.isMonospaced));e(n,3,0,t.question.textarea.text);e(n,6,0,ho._19(1,"",ho._41(n,6,0,ho._29(n,7).transform("core.question.answer")),""))},function(e,n){e(n,0,0,n.component.question.textarea.name,ho._29(n,5).ngClassUntouched,ho._29(n,5).ngClassTouched,ho._29(n,5).ngClassPristine,ho._29(n,5).ngClassDirty,ho._29(n,5).ngClassValid,ho._29(n,5).ngClassInvalid,ho._29(n,5).ngClassPending)})}function Ri(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"core-rich-text-editor",[["item-content",""]],null,null,null,Zr.b,Zr.a)),ho._15(1,1228800,null,0,el.a,[Mo.a,Dr.a,Or.a,xr.a,[2,Nr.a],ho.p,Lr.a,fr.a,kr.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i])],function(e,n){var t=n.component;e(n,1,0,ho._19(1,"",ho._41(n,1,0,ho._29(n,2).transform("core.question.answer")),""),t.formControl,t.question.textarea.name,t.component,t.componentId)},null)}function Fi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,3,1,null,Ui)),ho._15(9,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,3,1,null,Ni)),ho._15(13,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,3,1,null,Ri)),ho._15(17,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,t.question.formatInput);e(n,13,0,t.question.isPlainText);e(n,17,0,!t.question.isPlainText)},null)}function Li(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,7,{contentLabel:0}),ho._37(603979776,8,{_buttons:1}),ho._37(603979776,9,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(9,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),ho._40(10,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(14,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(15,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,10,{contentLabel:0}),ho._37(603979776,11,{_buttons:1}),ho._37(603979776,12,{_icons:1}),ho._15(19,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(21,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(22,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(23,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,23,0,t.question.textarea.text,t.component,t.componentId)},function(e,n){e(n,10,0,ho._41(n,10,0,ho._29(n,11).transform("core.question.errorinlinefilesnotsupported")))})}function Hi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,13,{contentLabel:0}),ho._37(603979776,14,{_buttons:1}),ho._37(603979776,15,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),ho._40(8,null,["",""])),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,2,["\n    "]))],null,function(e,n){e(n,8,0,ho._41(n,8,0,ho._29(n,9).transform("core.question.errorattachmentsnotsupported")))})}function Ki(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,16,{contentLabel:0}),ho._37(603979776,17,{_buttons:1}),ho._37(603979776,18,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),ho._16(8,0,null,null,3,"core-format-text",[],null,null,null,null,null)),ho._15(9,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(10,{"core-monospaced":0}),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,e(n,10,0,t.question.isMonospaced));e(n,11,0,t.question.answer,t.component,t.componentId)},null)}function Wi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-file",[],null,null,null,ws.b,ws.a)),ho._15(1,245760,null,0,As.a,[Or.a,fr.a,Mo.a,xr.a,Mr.a,Ts.a,Os.a,Lr.a,dr.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.componentId)},null)}function qi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,19,{contentLabel:0}),ho._37(603979776,20,{_buttons:1}),ho._37(603979776,21,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._11(16777216,null,null,1,null,Wi)),ho._15(10,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){e(n,10,0,n.component.question.attachments)},null)}function Bi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,33,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(12,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Fi)),ho._15(17,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Li)),ho._15(21,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Hi)),ho._15(25,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Ki)),ho._15(29,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._11(16777216,null,null,1,null,qi)),ho._15(32,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.question.text,t.component,t.componentId);e(n,17,0,t.question.textarea&&!t.question.hasDraftFiles);e(n,21,0,t.question.textarea&&t.question.hasDraftFiles);e(n,25,0,t.question.allowsAttachments);e(n,29,0,!t.question.textarea&&(t.question.answer||!t.question.attachments.length&&!t.question.allowsAttachments));e(n,32,0,!t.question.textarea&&t.question.attachments&&t.question.attachments.length)},null)}function ji(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Bi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function Gi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"section",[["class","addon-qtype-gapselect-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var i=!0;if("afterRender"===n){i=!1!==e.component.questionRendered()&&i}return i},null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},{afterRender:"afterRender"}),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId)},null)}function zi(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Gi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function Vi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),ho._40(1,null,["",""]))],null,function(e,n){e(n,0,0,ho._19(1,"",n.parent.context.$implicit.id,""));e(n,1,0,n.parent.context.$implicit.accessibilityLabel)})}function $i(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),ho._15(1,16384,[[7,4]],0,Hr.a,[ho.p],{value:[0,"value"]},null),(e()(),ho._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function Qi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,51,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(5,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(7,0,null,3,43,"ion-grid",[["class","grid"],["item-content",""]],null,null,null,null,null)),ho._15(8,16384,null,0,Ll.a,[],null,null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._16(10,0,null,null,39,"ion-row",[["class","row"]],null,null,null,null,null)),ho._15(11,16384,null,0,Hl.a,[],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(13,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),ho._15(14,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._16(16,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ho._16(17,0,null,null,1,"core-format-text",[],[[8,"id",0]],null,null,null,null)),ho._15(18,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(21,0,null,null,27,"ion-col",[["class","col"]],null,null,null,null,null)),ho._15(22,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(23,{"core-question-answer-correct":0,"core-question-answer-incorrect":1}),ho._15(24,16384,null,0,Ol.a,[],null,null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._11(16777216,null,null,1,null,Vi)),ho._15(27,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._16(29,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[1,"aria-labelledby",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,30)._click(t)&&i}if("keyup.space"===n){i=!1!==ho._29(e,30)._keyup()&&i}if("ngModelChange"===n){i=!1!==(e.context.$implicit.selected=t)&&i}return i},Kr.b,Kr.a)),ho._15(30,1228800,null,1,Wr.a,[qr.a,tr.a,ir.a,ho.p,ho.K,[2,nr.a],Br.a],{interface:[0,"interface"]},null),ho._37(603979776,7,{options:1}),ho._35(1024,null,sr.l,function(e){return[e]},[Wr.a]),ho._15(33,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(35,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n                        "])),(e()(),ho._11(16777216,null,null,1,null,$i)),ho._15(38,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._40(-1,null,["\n\n                    "])),(e()(),ho._40(-1,null,["\n                    "])),(e()(),ho._16(42,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,43)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,43).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,43)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,43)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(43,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(45,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(47,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,18,0,n.context.$implicit.text,t.component,t.componentId);e(n,22,0,e(n,23,0,1===n.context.$implicit.isCorrect,0===n.context.$implicit.isCorrect));e(n,27,0,n.context.$implicit.accessibilityLabel);e(n,30,0,"action-sheet");e(n,33,0,n.context.$implicit.name,n.context.$implicit.selected);e(n,38,0,n.context.$implicit.options);e(n,45,0,n.context.$implicit.selected)},function(e,n){e(n,17,0,ho._19(1,"addon-qtype-match-question-",n.context.$implicit.id,""));e(n,29,0,ho._19(1,"",n.context.$implicit.id,""),"addon-qtype-match-question-"+n.context.$implicit.id,ho._29(n,30)._disabled,ho._29(n,35).ngClassUntouched,ho._29(n,35).ngClassTouched,ho._29(n,35).ngClassPristine,ho._29(n,35).ngClassDirty,ho._29(n,35).ngClassValid,ho._29(n,35).ngClassInvalid,ho._29(n,35).ngClassPending);e(n,42,0,n.context.$implicit.name,ho._29(n,47).ngClassUntouched,ho._29(n,47).ngClassTouched,ho._29(n,47).ngClassPristine,ho._29(n,47).ngClassDirty,ho._29(n,47).ngClassValid,ho._29(n,47).ngClassInvalid,ho._29(n,47).ngClassPending)})}function Yi(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,16,"section",[["class","addon-qtype-match-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,Qi)),ho._15(15,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId);e(n,15,0,t.question.rows)},null)}function Xi(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Yi)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.question.loaded)},null)}function Ji(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,13,"section",[["class","addon-qtype-multianswer-container"],["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var i=!0;if("afterRender"===n){i=!1!==e.component.questionRendered()&&i}return i},null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},{afterRender:"afterRender"}),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId)},null)}function Zi(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,Ji)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function eo(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),ho._16(1,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(2,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,2,0,t.question.prompt,t.component,t.componentId)},null)}function no(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[["class","core-question-feedback-container"]],null,null,null,null,null)),(e()(),ho._16(1,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(2,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.context.$implicit.feedback,t.component,t.componentId)},null)}function to(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,33,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(2,{"core-question-answer-correct":0,"core-question-answer-incorrect":1}),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,4,{contentLabel:0}),ho._37(603979776,5,{_buttons:1}),ho._37(603979776,6,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(9,0,null,1,8,"ion-label",[],null,null,null,null,null)),ho._15(10,16384,[[4,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(13,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,no)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(19,0,null,4,5,"ion-checkbox",[["item-end",""]],[[1,"name",0],[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,20)._click(t)&&i}if("ngModelChange"===n){i=!1!==(e.context.$implicit.checked=t)&&i}return i},mr.b,mr.a)),ho._15(20,1228800,null,0,_r.a,[ir.a,tr.a,[2,nr.a],ho.p,ho.K],{disabled:[0,"disabled"]},null),ho._35(1024,null,sr.l,function(e){return[e]},[_r.a]),ho._15(22,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(24,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,2,["\n\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(27,0,null,3,5,"input",[["item-content",""],["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,28)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,28).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,28)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,28)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(28,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(30,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(32,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,1===n.context.$implicit.isCorrect,0===n.context.$implicit.isCorrect));e(n,13,0,n.context.$implicit.text,t.component,t.componentId);e(n,16,0,n.context.$implicit.feedback);e(n,20,0,n.context.$implicit.disabled);e(n,22,0,n.context.$implicit.disabled,n.context.$implicit.checked);e(n,30,0,n.context.$implicit.checked)},function(e,n){e(n,19,0,n.context.$implicit.name,ho._29(n,20)._disabled,ho._29(n,24).ngClassUntouched,ho._29(n,24).ngClassTouched,ho._29(n,24).ngClassPristine,ho._29(n,24).ngClassDirty,ho._29(n,24).ngClassValid,ho._29(n,24).ngClassInvalid,ho._29(n,24).ngClassPending);e(n,27,0,n.context.$implicit.name,ho._29(n,32).ngClassUntouched,ho._29(n,32).ngClassTouched,ho._29(n,32).ngClassPristine,ho._29(n,32).ngClassDirty,ho._29(n,32).ngClassValid,ho._29(n,32).ngClassInvalid,ho._29(n,32).ngClassPending)})}function io(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,to)),ho._15(3,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.question.options)},null)}function oo(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"p",[["class","core-question-feedback-container"]],null,null,null,null,null)),(e()(),ho._16(1,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(2,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.context.$implicit.feedback,t.component,t.componentId)},null)}function ro(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,21,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(1,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._33(2,{"core-question-answer-correct":0,"core-question-answer-incorrect":1}),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,8,{contentLabel:0}),ho._37(603979776,9,{_buttons:1}),ho._37(603979776,10,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(9,0,null,1,8,"ion-label",[],null,null,null,null,null)),ho._15(10,16384,[[8,4]],0,ar.a,[ir.a,ho.p,ho.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._16(12,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(13,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,null,["\n                "])),(e()(),ho._11(16777216,null,null,1,null,oo)),ho._15(16,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n            "])),(e()(),ho._40(-1,2,["\n            "])),(e()(),ho._16(19,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var i=!0;if("click"===n){i=!1!==ho._29(e,20)._click(t)&&i}return i},Du.b,Du.a)),ho._15(20,245760,null,0,xu.a,[tr.a,ir.a,ho.p,ho.K,[2,nr.a],[2,Tu.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),ho._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,1===n.context.$implicit.isCorrect,0===n.context.$implicit.isCorrect));e(n,13,0,n.context.$implicit.text,t.component,t.componentId);e(n,16,0,n.context.$implicit.feedback);e(n,20,0,n.context.$implicit.value,n.context.$implicit.disabled)},function(e,n){e(n,19,0,ho._29(n,20)._disabled)})}function lo(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,18,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var i=!0;if("ngModelChange"===n){i=!1!==(e.component.question.singleChoiceModel=t)&&i}return i},null,null)),ho._15(1,1064960,null,1,Tu.a,[ho.K,ho.p,ho.i],null,null),ho._37(335544320,7,{_header:0}),ho._35(1024,null,sr.l,function(e){return[e]},[Tu.a]),ho._15(4,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(6,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._11(16777216,null,null,1,null,ro)),ho._15(9,802816,null,0,lr.j,[ho.W,ho.T,ho.v],{ngForOf:[0,"ngForOf"]},null),(e()(),ho._40(-1,null,["\n\n        "])),(e()(),ho._40(-1,null,["\n        "])),(e()(),ho._16(12,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;if("input"===n){i=!1!==ho._29(e,13)._handleInput(t.target.value)&&i}if("blur"===n){i=!1!==ho._29(e,13).onTouched()&&i}if("compositionstart"===n){i=!1!==ho._29(e,13)._compositionStart()&&i}if("compositionend"===n){i=!1!==ho._29(e,13)._compositionEnd(t.target.value)&&i}return i},null,null)),ho._15(13,16384,null,0,sr.c,[ho.L,ho.p,[2,sr.a]],null,null),ho._35(1024,null,sr.l,function(e){return[e]},[sr.c]),ho._15(15,671744,null,0,sr.q,[[8,null],[8,null],[8,null],[2,sr.l]],{model:[0,"model"]},null),ho._35(2048,null,sr.m,null,[sr.q]),ho._15(17,16384,null,0,sr.n,[sr.m],null,null),(e()(),ho._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.question.optionsName,t.question.singleChoiceModel);e(n,9,0,t.question.options);e(n,15,0,t.question.singleChoiceModel)},function(e,n){var t=n.component;e(n,0,0,ho._29(n,6).ngClassUntouched,ho._29(n,6).ngClassTouched,ho._29(n,6).ngClassPristine,ho._29(n,6).ngClassDirty,ho._29(n,6).ngClassValid,ho._29(n,6).ngClassInvalid,ho._29(n,6).ngClassPending);e(n,12,0,t.question.optionsName,ho._29(n,17).ngClassUntouched,ho._29(n,17).ngClassTouched,ho._29(n,17).ngClassPristine,ho._29(n,17).ngClassDirty,ho._29(n,17).ngClassValid,ho._29(n,17).ngClassInvalid,ho._29(n,17).ngClassPending)})}function so(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,25,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(4,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(8,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(11,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(12,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._11(16777216,null,2,1,null,eo)),ho._15(15,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,io)),ho._15(20,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._11(16777216,null,null,1,null,lo)),ho._15(24,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.question.text,t.component,t.componentId);e(n,15,0,t.question.prompt);e(n,20,0,t.question.multi);e(n,24,0,!t.question.multi)},null)}function ao(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,so)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function uo(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,20,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,er.b,er.a)),ho._15(3,1097728,null,3,nr.a,[tr.a,ir.a,ho.p,ho.K,[2,or.a]],null,null),ho._37(335544320,1,{contentLabel:0}),ho._37(603979776,2,{_buttons:1}),ho._37(603979776,3,{_icons:1}),ho._15(7,16384,null,0,rr.a,[],null,null),(e()(),ho._40(-1,2,["\n        "])),(e()(),ho._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),ho._16(10,0,null,null,1,"core-format-text",[],null,null,null,null,null)),ho._15(11,540672,null,0,Tr.a,[ho.p,Or.a,Mo.a,dr.a,Zo.a,kr.a,fr.a,Dr.a,Do.a,xr.a,Mr.a,Ur.a,[2,xo.a],[2,Nr.a],[2,Rr.a],Fr.a,Lr.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),ho._40(-1,2,["\n    "])),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._16(14,0,null,null,5,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,Vr.b,Vr.a)),ho._15(15,278528,null,0,lr.i,[ho.v,ho.w,ho.p,ho.L],{ngClass:[0,"ngClass"]},null),ho._31(16,1),ho._15(17,5423104,null,0,$r.a,[ir.a,kr.a,tr.a,qr.a,ho.p,ho.K,[2,Nr.a],[2,nr.a],[2,sr.m],Qr.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),ho._32(131072,Jo.a,[Zo.a,ho.i]),(e()(),ho._40(-1,null,["\n    "])),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId);e(n,15,0,e(n,16,0,t.question.input.correctClass));e(n,17,0,t.question.input.value,t.question.input.readOnly,"text","off",ho._19(1,"",ho._41(n,17,4,ho._29(n,18).transform("core.question.answer")),""))},function(e,n){e(n,14,0,n.component.question.input.name)})}function co(e){return ho._42(0,[(e()(),ho._11(16777216,null,null,1,null,uo)),ho._15(1,16384,null,0,lr.k,[ho.W,ho.T],{ngIf:[0,"ngIf"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function fo(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,2,"ion-nav",[],null,null,null,Gc.b,Gc.a)),ho._35(6144,null,zc.a,null,[Vc.a]),ho._15(2,4374528,null,0,Vc.a,[[2,Xu.a],[2,xo.a],qr.a,ir.a,kr.a,ho.p,ho.D,ho.K,ho.n,ku.l,$c.a,[2,Br.a],Qr.a,ho.q],{root:[0,"root"]},null),(e()(),ho._40(-1,null,["\n"]))],function(e,n){e(n,2,0,n.component.rootPage)},null)}Object.defineProperty(n,"__esModule",{value:!0});var po=t(75),ho=t(1),mo=t(722),_o=t(268),go=t(1345),vo=t(1346),yo=t(1347),bo=t(1348),Po=t(1349),Eo=t(1350),Co=t(1351),Io=t(1352),So=t(1353),wo=t(1356),Ao=t(1357),To=t(1358),Oo=t(1360),ko=t(188),Do=t(6),xo=t(22),Mo=t(5),Uo=t(412),No=t(56),Ro=ho._14({encapsulation:2,styles:[],data:{}}),Fo=ho._12("core-course-format-single-activity",Uo.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"core-course-format-single-activity",[],null,null,null,i,Ro)),ho._15(1,573440,null,0,Uo.a,[No.a,ho.u],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId"},{completionChanged:"completionChanged"},[]),Lo=t(1385),Ho=t(1384),Ko=t(1389),Wo=t(1414),qo=t(1415),Bo=t(1416),jo=t(1417),Go=t(1418),zo=t(1419),Vo=t(1420),$o=t(1421),Qo=t(1422),Yo=t(1394),Xo=t(1395),Jo=t(27),Zo=t(19),er=t(31),nr=t(21),tr=t(20),ir=t(7),or=t(28),rr=t(33),lr=t(8),sr=t(23),ar=t(62),ur=t(83),cr=t(76),dr=t(11),fr=t(3),pr=t(90),hr=t(84),mr=t(229),_r=t(174),gr=t(622),vr=ho._14({encapsulation:2,styles:[],data:{}}),yr=ho._12("addon-user-profile-field-checkbox",gr.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-user-profile-field-checkbox",[],null,null,null,a,vr)),ho._15(1,114688,null,0,gr.a,[sr.d,fr.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form"},{},[]),br=t(1334),Pr=t(310),Er=t(241),Cr=t(223),Ir=t(25),Sr=t(623),wr=ho._14({encapsulation:2,styles:[],data:{}}),Ar=ho._12("addon-user-profile-field-datetime",Sr.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-user-profile-field-datetime",[],null,null,null,d,wr)),ho._15(1,114688,null,0,Sr.a,[sr.d,Ir.a,fr.a,Zo.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form"},{},[]),Tr=t(42),Or=t(2),kr=t(15),Dr=t(26),xr=t(17),Mr=t(10),Ur=t(18),Nr=t(24),Rr=t(35),Fr=t(38),Lr=t(13),Hr=t(92),Kr=t(111),Wr=t(93),qr=t(34),Br=t(52),jr=t(624),Gr=ho._14({encapsulation:2,styles:[],data:{}}),zr=ho._12("addon-user-profile-field-menu",jr.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-user-profile-field-menu",[],null,null,null,m,Gr)),ho._15(1,114688,null,0,jr.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form"},{},[]),Vr=t(94),$r=t(79),Qr=t(32),Yr=t(625),Xr=ho._14({encapsulation:2,styles:[],data:{}}),Jr=ho._12("addon-user-profile-field-text",Yr.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-user-profile-field-text",[],null,null,null,v,Xr)),ho._15(1,114688,null,0,Yr.a,[sr.d,fr.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form"},{},[]),Zr=t(277),el=t(227),nl=t(626),tl=ho._14({encapsulation:2,styles:[],data:{}}),il=ho._12("addon-user-profile-field-textarea",nl.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-user-profile-field-textarea",[],null,null,null,P,tl)),ho._15(1,114688,null,0,nl.a,[],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form"},{},[]),ol=t(1359),rl=t(224),ll=t(250),sl=t(108),al=t(49),ul=t(48),cl=t(627),dl=t(16),fl=ho._14({encapsulation:2,styles:[],data:{}}),pl=ho._12("addon-block-activitymodules",cl.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-activitymodules",[],null,null,null,C,fl)),ho._15(1,114688,null,0,cl.a,[ho.u,fr.a,dl.a,Zo.a,No.a],null,null)],function(e,n){e(n,1,0)},null)},{block:"block",contextLevel:"contextLevel",instanceId:"instanceId"},{},[]),hl=t(1369),ml=t(46),_l=t(43),gl=t(131),vl=t(121),yl=t(146),bl=t(112),Pl=t(95),El=t(81),Cl=t(74),Il=t(70),Sl=t(120),wl=t(109),Al=t(1413),Tl=t(353),Ol=t(113),kl=t(369),Dl=t(261),xl=t(41),Ml=t(51),Ul=t(63),Nl=t(45),Rl=t(80),Fl=t(69),Ll=t(142),Hl=t(114),Kl=t(628),Wl=t(144),ql=t(110),Bl=t(179),jl=ho._14({encapsulation:2,styles:[],data:{}}),Gl=ho._12("addon-block-myoverview",Kl.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-myoverview",[],null,null,null,R,jl)),ho._15(1,245760,null,0,Kl.a,[ho.u,Ml.a,Wl.a,Lr.a,xl.a,fr.a,ql.a,Bl.a,Or.a,Ir.a],null,null)],function(e,n){e(n,1,0)},null)},{downloadEnabled:"downloadEnabled"},{},[]),zl=t(1366),Vl=t(444),$l=t(53),Ql=t(629),Yl=t(206),Xl=ho._14({encapsulation:2,styles:[],data:{}}),Jl=ho._12("addon-block-sitemainmenu",Ql.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-sitemainmenu",[],null,null,null,H,Xl)),ho._15(1,114688,null,0,Ql.a,[ho.u,Or.a,dl.a,xl.a,Yl.a,$l.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Zl=t(226),es=t(348),ns=t(631),ts=ho._14({encapsulation:2,styles:[],data:{}}),is=ho._12("addon-block-timeline-events",ns.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-timeline-events",[],null,null,null,J,ts)),ho._15(1,573440,null,0,ns.a,[[2,xo.a],fr.a,dr.a,Mo.a,Or.a,dl.a,Ur.a,Ir.a],null,null)],null,null)},{events:"events",showCourse:"showCourse",from:"from",to:"to",canLoadMore:"canLoadMore"},{loadMore:"loadMore"},[]),os=t(630),rs=t(274),ls=ho._14({encapsulation:2,styles:[],data:{}}),ss=ho._12("addon-block-timeline",os.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-timeline",[],null,null,null,ie,ls)),ho._15(1,114688,null,0,os.a,[ho.u,Ml.a,fr.a,rs.a,ql.a,Bl.a,Or.a,Ir.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),as=t(632),us=ho._14({encapsulation:2,styles:[],data:{}}),cs=ho._12("addon-block-recentlyaccessedcourses",as.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-recentlyaccessedcourses",[],null,null,null,ce,us)),ho._15(1,245760,null,0,as.a,[ho.u,Ml.a,Wl.a,Lr.a,xl.a,fr.a,ql.a,Bl.a,Or.a],null,null)],function(e,n){e(n,1,0)},null)},{downloadEnabled:"downloadEnabled"},{},[]),ds=t(87),fs=t(633),ps=t(429),hs=ho._14({encapsulation:2,styles:[],data:{}}),ms=ho._12("addon-block-recentlyaccesseditems",fs.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-recentlyaccesseditems",[],null,null,null,me,hs)),ho._15(1,114688,null,0,fs.a,[ho.u,[2,xo.a],Or.a,dr.a,ps.a,Ur.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),_s=t(634),gs=ho._14({encapsulation:2,styles:[],data:{}}),vs=ho._12("addon-block-starredcourses",_s.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-block-starredcourses",[],null,null,null,Ee,gs)),ho._15(1,245760,null,0,_s.a,[ho.u,Ml.a,Wl.a,Lr.a,xl.a,fr.a,ql.a,Bl.a,Or.a],null,null)],function(e,n){e(n,1,0)},null)},{downloadEnabled:"downloadEnabled"},{},[]),ys=t(670),bs=t(363),Ps=t(61),Es=t(168),Cs=t(576),Is=ho._14({encapsulation:2,styles:[],data:{}}),Ss=ho._12("addon-mod-assign-submission-comments",Cs.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-submission-comments",[],null,null,null,Ce,Is)),ho._15(1,49152,null,0,Cs.a,[Es.a],null,null)],null,null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),ws=t(203),As=t(172),Ts=t(132),Os=t(65),ks=t(347),Ds=t(254),xs=t(50),Ms=t(447),Us=t(280),Ns=t(67),Rs=t(133),Fs=t(579),Ls=t(153),Hs=t(72),Ks=t(122),Ws=t(160),qs=ho._14({encapsulation:2,styles:[],data:{}}),Bs=ho._12("addon-mod-assign-submission-file",Fs.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-submission-file",[],null,null,null,Oe,qs)),ho._15(1,114688,null,0,Fs.a,[Ls.a,Hs.a,Ks.a,Ws.a,Ns.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),js=t(580),Gs=ho._14({encapsulation:2,styles:[],data:{}}),zs=ho._12("addon-mod-assign-submission-online-text",js.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-submission-online-text",[],null,null,null,Ue,Gs)),ho._15(1,114688,null,0,js.a,[sr.d,Mo.a,dr.a,Hs.a,Ks.a,ho.p],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),Vs=t(47),$s=t(225),Qs=t(582),Ys=t(204),Xs=t(162),Js=ho._14({encapsulation:2,styles:[],data:{}}),Zs=ho._12("addon-mod-assign-feedback-comments",Qs.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-feedback-comments",[],null,null,null,He,Js)),ho._15(1,114688,null,0,Qs.a,[Ys.a,ho.p,Mo.a,dr.a,Ks.a,Hs.a,sr.d,Xs.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),ea=t(584),na=ho._14({encapsulation:2,styles:[],data:{}}),ta=ho._12("addon-mod-assign-feedback-edit-pdf",ea.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-feedback-edit-pdf",[],null,null,null,qe,na)),ho._15(1,114688,null,0,ea.a,[Ys.a,Hs.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),ia=t(585),oa=ho._14({encapsulation:2,styles:[],data:{}}),ra=ho._12("addon-mod-assign-feedback-file",ia.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-assign-feedback-file",[],null,null,null,Ge,oa)),ho._15(1,114688,null,0,ia.a,[Ys.a,Hs.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),la=t(1396),sa=t(1427),aa=t(1397),ua=t(1398),ca=t(1368),da=t(635),fa=ho._14({encapsulation:2,styles:[],data:{}}),pa=ho._12("addon-mod-data-field-checkbox",da.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-checkbox",[],null,null,null,Je,fa)),ho._15(1,638976,null,0,da.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ha=t(636),ma=ho._14({encapsulation:2,styles:[],data:{}}),_a=ho._12("addon-mod-data-field-date",ha.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-date",[],null,null,null,rn,ma)),ho._15(1,638976,null,0,ha.a,[sr.d,Ir.a,Zo.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ga=t(637),va=ho._14({encapsulation:2,styles:[],data:{}}),ya=ho._12("addon-mod-data-field-file",ga.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-file",[],null,null,null,pn,va)),ho._15(1,638976,null,0,ga.a,[sr.d,Ls.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ba=t(638),Pa=ho._14({encapsulation:2,styles:[],data:{}}),Ea=ho._12("addon-mod-data-field-latlong",ba.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-latlong",[],null,null,null,Pn,Pa)),ho._15(1,638976,null,0,ba.a,[sr.d,kr.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Ca=t(639),Ia=ho._14({encapsulation:2,styles:[],data:{}}),Sa=ho._12("addon-mod-data-field-menu",Ca.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-menu",[],null,null,null,An,Ia)),ho._15(1,638976,null,0,Ca.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),wa=t(640),Aa=ho._14({encapsulation:2,styles:[],data:{}}),Ta=ho._12("addon-mod-data-field-multimenu",wa.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-multimenu",[],null,null,null,Un,Aa)),ho._15(1,638976,null,0,wa.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Oa=t(642),ka=ho._14({encapsulation:2,styles:[],data:{}}),Da=ho._12("addon-mod-data-field-number",Oa.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-number",[],null,null,null,Hn,ka)),ho._15(1,638976,null,0,Oa.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),xa=t(643),Ma=ho._14({encapsulation:2,styles:[],data:{}}),Ua=ho._12("addon-mod-data-field-picture",xa.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-picture",[],null,null,null,Gn,Ma)),ho._15(1,638976,null,0,xa.a,[sr.d,Ls.a,Mo.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Na=t(644),Ra=ho._14({encapsulation:2,styles:[],data:{}}),Fa=ho._12("addon-mod-data-field-radiobutton",Na.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-radiobutton",[],null,null,null,Xn,Ra)),ho._15(1,638976,null,0,Na.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),La=t(641),Ha=ho._14({encapsulation:2,styles:[],data:{}}),Ka=ho._12("addon-mod-data-field-text",La.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-text",[],null,null,null,tt,Ha)),ho._15(1,638976,null,0,La.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Wa=t(645),qa=ho._14({encapsulation:2,styles:[],data:{}}),Ba=ho._12("addon-mod-data-field-textarea",Wa.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-textarea",[],null,null,null,ut,qa)),ho._15(1,638976,null,0,Wa.a,[sr.d,dr.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ja=t(189),Ga=t(646),za=ho._14({encapsulation:2,styles:[],data:{}}),Va=ho._12("addon-mod-data-field-url",Ga.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-data-field-url",[],null,null,null,ht,za)),ho._15(1,638976,null,0,Ga.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),$a=t(1404),Qa=t(1408),Ya=t(1365),Xa=t(1401),Ja=t(1388),Za=t(1402),eu=t(1428),nu=t(1405),tu=t(1406),iu=t(1407),ou=t(1430),ru=t(600),lu=ho._14({encapsulation:2,styles:[],data:{}}),su=ho._12("addon-mod-quiz-access-offline-attempts",ru.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-quiz-access-offline-attempts",[],null,null,null,mt,lu)),ho._15(1,114688,null,0,ru.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),au=t(671),uu=t(343),cu=t(601),du=ho._14({encapsulation:2,styles:[],data:{}}),fu=ho._12("addon-mod-quiz-access-password",cu.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-quiz-access-password",[],null,null,null,_t,du)),ho._15(1,114688,null,0,cu.a,[sr.d],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),pu=t(602),hu=ho._14({encapsulation:2,styles:[],data:{}}),mu=ho._12("addon-mod-quiz-access-time-limit",pu.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-quiz-access-time-limit",[],null,null,null,gt,hu)),ho._15(1,49152,null,0,pu.a,[],null,null)],null,null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),_u=t(1409),gu=t(1431),vu=t(1411),yu=t(1410),bu=t(1383),Pu=t(349),Eu=t(610),Cu=ho._14({encapsulation:2,styles:[],data:{}}),Iu=ho._12("addon-mod-workshop-assessment-strategy-accumulative",Eu.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-accumulative",[],null,null,null,Tt,Cu)),ho._15(1,49152,null,0,Eu.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[]),Su=t(611),wu=ho._14({encapsulation:2,styles:[],data:{}}),Au=ho._12("addon-mod-workshop-assessment-strategy-comments",Su.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-comments",[],null,null,null,Ut,wu)),ho._15(1,49152,null,0,Su.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[]),Tu=t(127),Ou=t(78),ku=t(39),Du=t(167),xu=t(136),Mu=t(612),Uu=ho._14({encapsulation:2,styles:[],data:{}}),Nu=ho._12("addon-mod-workshop-assessment-strategy-numerrors",Mu.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-numerrors",[],null,null,null,Kt,Uu)),ho._15(1,49152,null,0,Mu.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[]),Ru=t(613),Fu=ho._14({encapsulation:2,styles:[],data:{}}),Lu=ho._12("addon-mod-workshop-assessment-strategy-rubric",Ru.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-rubric",[],null,null,null,Gt,Fu)),ho._15(1,49152,null,0,Ru.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[]),Hu=t(1403),Ku=t(1429),Wu=t(1412),qu=t(1432),Bu=t(222),ju=t(186),Gu=t(187),zu=t(341),Vu=t(89),$u=t(82),Qu=t(185),Yu=t(107),Xu=t(37),Ju=t(145),Zu=t(201),ec=t(159),nc=t(615),tc=t(233),ic=t(329),oc=ho._14({encapsulation:2,styles:[],data:{}}),rc=ho._12("addon-notes-list",nc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-notes-list",[],null,null,null,Jt,oc)),ho._15(1,245760,null,0,nc.a,[Mo.a,dr.a,Or.a,Lr.a,tc.a,ic.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId"},{},[]),lc=t(430),sc=ho._14({encapsulation:2,styles:[],data:{}}),ac=ho._12("addon-qbehaviour-deferredcbm",lc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qbehaviour-deferredcbm",[],null,null,null,ni,sc)),ho._15(1,49152,null,0,lc.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),uc=t(648),cc=ho._14({encapsulation:2,styles:[],data:{}}),dc=ho._12("addon-qbehaviour-informationitem",uc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qbehaviour-informationitem",[],null,null,null,ii,cc)),ho._15(1,49152,null,0,uc.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),fc=t(432),pc=ho._14({encapsulation:2,styles:[],data:{}}),hc=ho._12("addon-qtype-calculated",fc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-calculated",[],null,null,null,vi,pc)),ho._15(1,114688,null,0,fc.a,[Do.a,ho.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),mc=t(650),_c=ho._14({encapsulation:2,styles:[],data:{}}),gc=ho._12("addon-qtype-ddimageortext",mc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-ddimageortext",[],null,null,null,Ei,_c)),ho._15(1,245760,null,0,mc.a,[Do.a,ho.u,ho.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),vc=t(651),yc=ho._14({encapsulation:2,styles:[],data:{}}),bc=ho._12("addon-qtype-ddmarker",vc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-ddmarker",[],null,null,null,wi,yc)),ho._15(1,245760,null,0,vc.a,[Do.a,ho.u,ho.p,Or.a,Dr.a,xr.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Pc=t(652),Ec=ho._14({encapsulation:2,styles:[],data:{}}),Cc=ho._12("addon-qtype-ddwtos",Pc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-ddwtos",[],null,null,null,ki,Ec)),ho._15(1,245760,null,0,Pc.a,[Do.a,ho.u,ho.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ic=t(653),Sc=ho._14({encapsulation:2,styles:[],data:{}}),wc=ho._12("addon-qtype-description",Ic.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-description",[],null,null,null,Mi,Sc)),ho._15(1,114688,null,0,Ic.a,[Do.a,ho.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ac=t(654),Tc=ho._14({encapsulation:2,styles:[],data:{}}),Oc=ho._12("addon-qtype-essay",Ac.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-essay",[],null,null,null,ji,Tc)),ho._15(1,114688,null,0,Ac.a,[Do.a,ho.u,sr.d],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),kc=t(655),Dc=ho._14({encapsulation:2,styles:[],data:{}}),xc=ho._12("addon-qtype-gapselect",kc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-gapselect",[],null,null,null,zi,Dc)),ho._15(1,114688,null,0,kc.a,[Do.a,ho.u,ho.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Mc=t(433),Uc=ho._14({encapsulation:2,styles:[],data:{}}),Nc=ho._12("addon-qtype-match",Mc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-match",[],null,null,null,Xi,Uc)),ho._15(1,114688,null,0,Mc.a,[Do.a,ho.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Rc=t(657),Fc=ho._14({encapsulation:2,styles:[],data:{}}),Lc=ho._12("addon-qtype-multianswer",Rc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-multianswer",[],null,null,null,Zi,Fc)),ho._15(1,114688,null,0,Rc.a,[Do.a,ho.u,ho.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Hc=t(331),Kc=ho._14({encapsulation:2,styles:[],data:{}}),Wc=ho._12("addon-qtype-multichoice",Hc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-multichoice",[],null,null,null,ao,Kc)),ho._15(1,114688,null,0,Hc.a,[Do.a,ho.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),qc=t(658),Bc=ho._14({encapsulation:2,styles:[],data:{}}),jc=ho._12("addon-qtype-shortanswer",qc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"addon-qtype-shortanswer",[],null,null,null,co,Bc)),ho._15(1,114688,null,0,qc.a,[Do.a,ho.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Gc=t(987),zc=t(197),Vc=t(269),$c=t(178),Qc=t(621),Yc=t(413),Xc=t(317),Jc=t(134),Zc=t(148),ed=t(428),nd=ho._14({encapsulation:2,styles:[],data:{}}),td=ho._12("ng-component",Qc.a,function(e){return ho._42(0,[(e()(),ho._16(0,0,null,null,1,"ng-component",[],null,null,null,fo,nd)),ho._15(1,114688,null,0,Qc.a,[kr.a,Yc.a,Do.a,Xc.a,Lr.a,Jc.a,ho.D,Mr.a,Zc.a,Or.a,ed.a,_o.b],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),id=t(523),od=t(724),rd=t(723),ld=t(375),sd=t(242),ad=t(402),ud=t(692),cd=t(682),dd=t(676),fd=t(679),pd=t(104),hd=t(674),md=t(338),_d=t(688),gd=t(354),vd=t(344),yd=t(678),bd=t(364),Pd=t(351),Ed=t(193),Cd=t(237),Id=t(522),Sd=t(202),wd=t(525),Ad=t(190),Td=t(524),Od=t(182),kd=t(308),Dd=t(500),xd=t(248),Md=t(526),Ud=t(217),Nd=t(662),Rd=t(4),Fd=t(30),Ld=t(106),Hd=t(29),Kd=t(507),Wd=t(389),qd=t(560),Bd=t(434),jd=t(333),Gd=t(334),zd=t(336),Vd=t(335),$d=t(175),Qd=t(388),Yd=t(1204),Xd=t(270),Jd=t(401),Zd=t(397),ef=t(398),nf=t(499),tf=t(532),of=t(494),rf=t(399),lf=t(517),sf=t(400),af=t(198),uf=t(154),cf=t(518),df=t(324),ff=t(327),pf=t(141),hf=t(272),mf=t(552),_f=t(553),gf=t(177),vf=t(64),yf=t(458),bf=t(325),Pf=t(68),Ef=t(243),Cf=t(207),If=t(166),Sf=t(1003),wf=t(57),Af=t(1004),Tf=t(1005),Of=t(1006),kf=t(549),Df=t(406),xf=t(403),Mf=t(321),Uf=t(492),Nf=t(1007),Rf=t(1008),Ff=t(1009),Lf=t(1011),Hf=t(1010),Kf=t(550),Wf=t(460),qf=t(461),Bf=t(1019),jf=t(557),Gf=t(539),zf=t(176),Vf=t(538),$f=t(548),Qf=t(994),Yf=t(998),Xf=t(997),Jf=t(1e3),Zf=t(999),ep=t(996),np=t(995),tp=t(86),ip=t(361),op=t(1001),rp=t(1002),lp=t(547),sp=t(1020),ap=t(558),up=t(546),cp=t(445),dp=t(100),fp=t(1021),pp=t(1022),hp=t(1023),mp=t(1024),_p=t(559),gp=t(675),vp=t(152),yp=t(1012),bp=t(161),Pp=t(1013),Ep=t(1014),Cp=t(1015),Ip=t(1016),Sp=t(551),wp=t(1205),Ap=t(438),Tp=t(680),Op=t(543),kp=t(138),Dp=t(191),xp=t(292),Mp=t(555),Up=t(71),Np=t(117),Rp=t(556),Fp=t(116),Lp=t(358),Hp=t(128),Kp=t(541),Wp=t(164),qp=t(537),Bp=t(194),jp=t(1207),Gp=t(1206),zp=t(1208),Vp=t(554),$p=t(1209),Qp=t(544),Yp=t(284),Xp=t(1047),Jp=t(1048),Zp=t(1049),eh=t(567),nh=t(342),th=t(1050),ih=t(105),oh=t(568),rh=t(686),lh=t(205),sh=t(1052),ah=t(1051),uh=t(1053),ch=t(569),dh=t(687),fh=t(1211),ph=t(1212),hh=t(1210),mh=t(1215),_h=t(1214),gh=t(1217),vh=t(1216),yh=t(1219),bh=t(1218),Ph=t(1221),Eh=t(1220),Ch=t(1223),Ih=t(1222),Sh=t(1213),wh=t(1054),Ah=t(570),Th=t(66),Oh=t(1225),kh=t(545),Dh=t(165),xh=t(1226),Mh=t(1224),Uh=t(249),Nh=t(1228),Rh=t(1229),Fh=t(1227),Lh=t(1231),Hh=t(1232),Kh=t(1230),Wh=t(1234),qh=t(1235),Bh=t(1233),jh=t(1237),Gh=t(1238),zh=t(1236),Vh=t(1240),$h=t(1241),Qh=t(1239),Yh=t(1243),Xh=t(1244),Jh=t(1242),Zh=t(443),em=t(1069),nm=t(1068),tm=t(578),im=t(1070),om=t(1072),rm=t(1071),lm=t(1067),sm=t(581),am=t(1074),um=t(1076),cm=t(1075),dm=t(1078),fm=t(1077),pm=t(1073),hm=t(1062),mm=t(1063),_m=t(339),gm=t(1064),vm=t(1065),ym=t(1066),bm=t(575),Pm=t(689),Em=t(234),Cm=t(1079),Im=t(1080),Sm=t(362),wm=t(1081),Am=t(586),Tm=t(690),Om=t(1084),km=t(1082),Dm=t(1083),xm=t(587),Mm=t(691),Um=t(1085),Nm=t(259),Rm=t(258),Fm=t(260),Lm=t(1088),Hm=t(1086),Km=t(1089),Wm=t(1087),qm=t(588),Bm=t(439),jm=t(619),Gm=t(115),zm=t(1257),Vm=t(1256),$m=t(1259),Qm=t(1258),Ym=t(1261),Xm=t(1260),Jm=t(1263),Zm=t(1262),e_=t(1265),n_=t(1264),t_=t(1267),i_=t(1266),o_=t(1269),r_=t(1268),l_=t(1271),s_=t(1270),a_=t(1273),u_=t(1272),c_=t(330),d_=t(1274),f_=t(1276),p_=t(1275),h_=t(1278),m_=t(1277),__=t(1255),g_=t(208),v_=t(96),y_=t(1246),b_=t(251),P_=t(1253),E_=t(1247),C_=t(293),I_=t(1254),S_=t(1248),w_=t(1249),A_=t(1250),T_=t(1251),O_=t(1252),k_=t(1245),D_=t(1280),x_=t(1281),M_=t(1279),U_=t(696),N_=t(256),R_=t(143),F_=t(1120),L_=t(296),H_=t(287),K_=t(1121),W_=t(1122),q_=t(1123),B_=t(1124),j_=t(1125),G_=t(596),z_=t(700),V_=t(211),$_=t(263),Q_=t(1157),Y_=t(368),X_=t(1158),J_=t(1160),Z_=t(1159),eg=t(603),ng=t(666),tg=t(262),ig=t(135),og=t(1090),rg=t(278),lg=t(1098),sg=t(1091),ag=t(286),ug=t(1099),cg=t(1092),dg=t(1093),fg=t(1094),pg=t(1095),hg=t(1096),mg=t(1097),_g=t(589),gg=t(693),vg=t(1100),yg=t(294),bg=t(1101),Pg=t(1102),Eg=t(1104),Cg=t(1103),Ig=t(590),Sg=t(677),wg=t(1105),Ag=t(365),Tg=t(252),Og=t(253),kg=t(1106),Dg=t(1107),xg=t(1108),Mg=t(1109),Ug=t(591),Ng=t(694),Rg=t(1110),Fg=t(230),Lg=t(192),Hg=t(1111),Kg=t(465),Wg=t(295),qg=t(1112),Bg=t(1113),jg=t(1114),Gg=t(1115),zg=t(592),Vg=t(697),$g=t(297),Qg=t(1126),Yg=t(1127),Xg=t(1128),Jg=t(597),Zg=t(698),ev=t(210),nv=t(1129),tv=t(298),iv=t(367),ov=t(1130),rv=t(1132),lv=t(1131),sv=t(598),av=t(699),uv=t(1140),cv=t(1139),dv=t(1142),fv=t(1141),pv=t(1144),hv=t(1143),mv=t(236),_v=t(151),gv=t(279),vv=t(123),yv=t(299),bv=t(231),Pv=t(1146),Ev=t(1145),Cv=t(1148),Iv=t(1147),Sv=t(1150),wv=t(1149),Av=t(1152),Tv=t(1151),Ov=t(1154),kv=t(1153),Dv=t(1156),xv=t(1155),Mv=t(1133),Uv=t(1134),Nv=t(1135),Rv=t(1136),Fv=t(1137),Lv=t(1138),Hv=t(599),Kv=t(701),Wv=t(1161),qv=t(300),Bv=t(288),jv=t(1162),Gv=t(1163),zv=t(1164),Vv=t(1165),$v=t(604),Qv=t(703),Yv=t(303),Xv=t(304),Jv=t(1171),Zv=t(1172),ey=t(1173),ny=t(606),ty=t(702),iy=t(1166),oy=t(265),ry=t(264),ly=t(301),sy=t(1169),ay=t(1167),uy=t(302),cy=t(1170),dy=t(1168),fy=t(605),py=t(446),hy=t(1184),my=t(1183),_y=t(1186),gy=t(1185),vy=t(1188),yy=t(1187),by=t(1190),Py=t(1189),Ey=t(1182),Cy=t(163),Iy=t(150),Sy=t(1191),wy=t(1192),Ay=t(173),Ty=t(1194),Oy=t(290),ky=t(1195),Dy=t(1193),xy=t(609),My=t(695),Uy=t(235),Ny=t(1116),Ry=t(366),Fy=t(1117),Ly=t(1119),Hy=t(1118),Ky=t(594),Wy=t(704),qy=t(1174),By=t(257),jy=t(209),Gy=t(1175),zy=t(289),Vy=t(1176),$y=t(1177),Qy=t(1178),Yy=t(1179),Xy=t(1180),Jy=t(1181),Zy=t(607),eb=t(571),nb=t(452),tb=t(1283),ib=t(1282),ob=t(346),rb=t(147),lb=t(228),sb=t(536),ab=t(411),ub=t(451),cb=t(345),db=t(1055),fb=t(1059),pb=t(1058),hb=t(1056),mb=t(453),_b=t(1060),gb=t(1061),vb=t(573),yb=t(574),bb=t(1057),Pb=t(572),Eb=t(1199),Cb=t(427),Ib=t(1196),Sb=t(1198),wb=t(1197),Ab=t(614),Tb=t(285),Ob=t(1200),kb=t(1201),Db=t(1202),xb=t(616),Mb=t(617),Ub=t(1203),Nb=t(618),Rb=t(1286),Fb=t(1285),Lb=t(1288),Hb=t(1287),Kb=t(647),Wb=t(1290),qb=t(1289),Bb=t(1291),jb=t(1293),Gb=t(1292),zb=t(1295),Vb=t(1294),$b=t(1297),Qb=t(1296),Yb=t(1299),Xb=t(1298),Jb=t(1301),Zb=t(1300),eP=t(1303),nP=t(1302),tP=t(1284),iP=t(431),oP=t(1305),rP=t(649),lP=t(1307),sP=t(1306),aP=t(1309),uP=t(1308),cP=t(1311),dP=t(1310),fP=t(1313),pP=t(1312),hP=t(1315),mP=t(1314),_P=t(1317),gP=t(1316),vP=t(1319),yP=t(1318),bP=t(1321),PP=t(1320),EP=t(656),CP=t(1322),IP=t(1324),SP=t(1323),wP=t(1325),AP=t(1327),TP=t(1326),OP=t(1329),kP=t(1328),DP=t(1331),xP=t(1330),MP=t(1333),UP=t(1332),NP=t(1304),RP=ho._13(mo.a,[_o.b],function(e){return ho._25([ho._26(512,ho.n,ho._6,[[8,[go.a,vo.a,yo.a,bo.a,Po.a,Eo.a,Co.a,Io.a,So.a,wo.a,Ao.a,To.a,Fo,Lo.a,Ho.a,Ko.a,Wo.a,qo.a,Bo.a,jo.a,Go.a,zo.a,Vo.a,$o.a,Qo.a,Yo.a,Xo.a,yr,Ar,zr,Jr,il,ol.a,pl,hl.a,Gl,Jl,ss,is,cs,ms,vs,ys.a,Ss,Bs,zs,Zs,ta,ra,la.a,sa.a,aa.a,ua.a,ca.a,pa,_a,ya,Ea,Sa,Ta,Da,Ua,Fa,Ka,Ba,Va,$a.a,Qa.a,Ya.a,Xa.a,Ja.a,Za.a,eu.a,nu.a,tu.a,iu.a,ou.a,su,fu,mu,_u.a,gu.a,vu.a,yu.a,bu.a,Iu,Au,Nu,Lu,Hu.a,Ku.a,Wu.a,qu.a,rc,ac,dc,hc,gc,bc,Cc,wc,Oc,xc,Nc,Lc,Wc,jc,td]],[3,ho.n],ho.B]),ho._26(5120,ho.x,ho._36,[[3,ho.x]]),ho._26(4608,lr.m,lr.l,[ho.x,[2,lr.v]]),ho._26(5120,ho.b,ho._18,[]),ho._26(5120,ho.v,ho._27,[]),ho._26(5120,ho.w,ho._30,[]),ho._26(6144,ho.O,null,[po.c]),ho._26(4608,po.f,id.a,[]),ho._26(5120,po.d,function(e,n,t,i,o){return[new po.k(e,n),new po.p(t),new po.n(i,o)]},[lr.c,ho.D,lr.c,lr.c,po.f]),ho._26(4608,po.e,po.e,[po.d,ho.D]),ho._26(135680,po.m,po.m,[lr.c]),ho._26(4608,po.l,po.l,[po.e,po.m]),ho._26(5120,od.a,rd.d,[]),ho._26(5120,od.c,rd.e,[]),ho._26(4608,od.b,rd.c,[od.a,od.c]),ho._26(5120,ho.M,rd.f,[po.l,od.b,ho.D]),ho._26(6144,po.q,null,[po.m]),ho._26(4608,ho.U,ho.U,[ho.D]),ho._26(4608,po.h,po.h,[lr.c]),ho._26(4608,po.i,po.i,[lr.c]),ho._26(4608,ld.b,rd.b,[ho.M,po.b]),ho._26(4608,sd.h,sd.n,[lr.c,ho.G,sd.l]),ho._26(4608,sd.o,sd.o,[sd.h,sd.m]),ho._26(5120,sd.a,function(e){return[e,new ad.a]},[sd.o]),ho._26(4608,sr.x,sr.x,[]),ho._26(4608,sr.d,sr.d,[]),ho._26(4608,ud.a,ud.a,[]),ho._26(4608,Yc.a,Yc.a,[]),ho._26(4608,cd.a,cd.a,[Zc.a,Or.a]),ho._26(4608,Bl.a,Bl.a,[Ml.a,fr.a,Wl.a]),ho._26(4608,dd.a,dd.a,[Do.a,Zo.a]),ho._26(4608,fd.a,fd.a,[Do.a,Mr.a,pd.a,Lr.a,xr.a,Or.a,fr.a,Zo.a]),ho._26(4608,hd.a,hd.a,[Do.a,dl.a]),ho._26(4608,md.a,md.a,[Or.a,Nl.a,Zo.a]),ho._26(4608,_d.a,_d.a,[Or.a,Rs.a,gd.a,Mo.a]),ho._26(4608,ps.a,ps.a,[Or.a,dl.a,Mo.a]),ho._26(4608,vd.a,vd.a,[Or.a,Nl.a]),ho._26(4608,yd.a,yd.a,[Mo.a,sr.d,Zo.a,dr.a,Ir.a]),ho._26(4608,bd.a,bd.a,[dl.a]),ho._26(4608,Pd.a,Pd.a,[Or.a,Zo.a,Mo.a,fr.a,Ed.a,Cd.a]),ho._26(4608,Id.a,Id.a,[]),ho._26(4608,tr.a,tr.a,[]),ho._26(4608,Sd.a,Sd.a,[kr.a]),ho._26(4608,Yu.a,Yu.a,[ir.a,kr.a,ho.D,Qr.a]),ho._26(4608,Er.a,Er.a,[qr.a,ir.a]),ho._26(4608,Ul.a,Ul.a,[qr.a,ir.a,Br.a]),ho._26(4608,wd.a,wd.a,[ir.a,kr.a,Qr.a,qr.a,ku.l]),ho._26(4608,$c.a,$c.a,[kr.a,ir.a]),ho._26(4608,Fr.a,Fr.a,[Do.a,xs.a,Or.a,Dr.a,dr.a,fr.a,Mo.a,kr.a,Mr.a,Zo.a,Ad.a,ho.D,ir.a,Ur.a]),ho._26(4608,ed.a,ed.a,[]),ho._26(512,lr.b,lr.b,[]),ho._26(1024,ho.q,po.r,[]),ho._26(256,ir.b,{pageTransition:"core-page-transition"},[]),ho._26(1024,Td.a,Td.b,[]),ho._26(1024,kr.a,kr.b,[po.b,Td.a,ho.D]),ho._26(1024,ir.a,ir.c,[ir.b,kr.a]),ho._26(512,Qr.a,Qr.a,[kr.a]),ho._26(512,Od.a,Od.a,[]),ho._26(512,qr.a,qr.a,[ir.a,kr.a,[2,Od.a]]),ho._26(512,ku.l,ku.l,[qr.a]),ho._26(256,kd.a,{links:[{loadChildren:"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory#AddonBadgesIssuedBadgePageModuleNgFactory",name:"AddonBadgesIssuedBadgePage",segment:"addon-badges-issued-badge",priority:"low",defaultHistory:[]},{loadChildren:"../addon/badges/pages/user-badges/user-badges.module.ngfactory#AddonBadgesUserBadgesPageModuleNgFactory",name:"AddonBadgesUserBadgesPage",segment:"addon-badges-user-badges",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/event/event.module.ngfactory#AddonCalendarEventPageModuleNgFactory",name:"AddonCalendarEventPage",segment:"addon-calendar-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/list/list.module.ngfactory#AddonCalendarListPageModuleNgFactory",name:"AddonCalendarListPage",segment:"addon-calendar-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/settings/settings.module.ngfactory#AddonCalendarSettingsPageModuleNgFactory",name:"AddonCalendarSettingsPage",segment:"addon-calendar-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencies/competencies.module.ngfactory#AddonCompetencyCompetenciesPageModuleNgFactory",name:"AddonCompetencyCompetenciesPage",segment:"addon-competency-competencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competency/competency.module.ngfactory#AddonCompetencyCompetencyPageModuleNgFactory",name:"AddonCompetencyCompetencyPage",segment:"addon-competency-competency",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory#AddonCompetencyCompetencySummaryPageModuleNgFactory",name:"AddonCompetencyCompetencySummaryPage",segment:"addon-competency-competency-summary",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory#AddonCompetencyCourseCompetenciesPageModuleNgFactory",name:"AddonCompetencyCourseCompetenciesPage",segment:"addon-competency-coursecompetencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/plan/plan.module.ngfactory#AddonCompetencyPlanPageModuleNgFactory",name:"AddonCompetencyPlanPage",segment:"addon-competency-plan",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/planlist/planlist.module.ngfactory#AddonCompetencyPlanListPageModuleNgFactory",name:"AddonCompetencyPlanListPage",segment:"addon-competency-planlist",priority:"low",defaultHistory:[]},{loadChildren:"../addon/coursecompletion/pages/report/report.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonCourseCompletionReportPage",segment:"addon-course-completion-report",priority:"low",defaultHistory:[]},{loadChildren:"../addon/files/pages/list/list.module.ngfactory#AddonFilesListPageModuleNgFactory",name:"AddonFilesListPage",segment:"addon-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory#AddonMessageOutputAirnotifierDevicesPageModuleNgFactory",name:"AddonMessageOutputAirnotifierDevicesPage",segment:"addon-message-output-airnotifier-devices",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/contacts/contacts.module.ngfactory#AddonMessagesContactsPageModuleNgFactory",name:"AddonMessagesContactsPage",segment:"addon-messages-contacts",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory#AddonMessagesConversationInfoPageModuleNgFactory",name:"AddonMessagesConversationInfoPage",segment:"addon-messages-conversation-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/discussion/discussion.module.ngfactory#AddonMessagesDiscussionPageModuleNgFactory",name:"AddonMessagesDiscussionPage",segment:"addon-messages-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/index/index.module.ngfactory#AddonMessagesIndexPageModuleNgFactory",name:"AddonMessagesIndexPage",segment:"addon-messages-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory#AddonMessagesGroupConversationsPageModuleNgFactory",name:"AddonMessagesGroupConversationsPage",segment:"addon-messages-group-conversations",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/search/search.module.ngfactory#AddonMessagesSearchPageModuleNgFactory",name:"AddonMessagesSearchPage",segment:"addon-messages-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/settings/settings.module.ngfactory#AddonMessagesSettingsPageModuleNgFactory",name:"AddonMessagesSettingsPage",segment:"addon-messages-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory#AddonModAssignEditFeedbackModalPageModuleNgFactory",name:"AddonModAssignEditFeedbackModalPage",segment:"addon-mod-assign-edit-feedback-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit/edit.module.ngfactory#AddonModAssignEditPageModuleNgFactory",name:"AddonModAssignEditPage",segment:"addon-mod-assign-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/index/index.module.ngfactory#AddonModAssignIndexPageModuleNgFactory",name:"AddonModAssignIndexPage",segment:"addon-mod-assign-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory#AddonModAssignSubmissionListPageModuleNgFactory",name:"AddonModAssignSubmissionListPage",segment:"addon-mod-assign-submission-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory#AddonModAssignSubmissionReviewPageModuleNgFactory",name:"AddonModAssignSubmissionReviewPage",segment:"addon-mod-assign-submission-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/index/index.module.ngfactory#AddonModBookIndexPageModuleNgFactory",name:"AddonModBookIndexPage",segment:"addon-mod-book-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/chat/chat.module.ngfactory#AddonModChatChatPageModuleNgFactory",name:"AddonModChatChatPage",segment:"addon-mod-chat-chat",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/index/index.module.ngfactory#AddonModChatIndexPageModuleNgFactory",name:"AddonModChatIndexPage",segment:"addon-mod-chat-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/users/users.module.ngfactory#AddonModChatUsersPageModuleNgFactory",name:"AddonModChatUsersPage",segment:"addon-mod-chat-users",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/choice/pages/index/index.module.ngfactory#AddonModChoiceIndexPageModuleNgFactory",name:"AddonModChoiceIndexPage",segment:"addon-mod-choice-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/edit/edit.module.ngfactory#AddonModDataEditPageModuleNgFactory",name:"AddonModDataEditPage",segment:"addon-mod-data-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/index/index.module.ngfactory#AddonModDataIndexPageModuleNgFactory",name:"AddonModDataIndexPage",segment:"addon-mod-data-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/entry/entry.module.ngfactory#AddonModDataEntryPageModuleNgFactory",name:"AddonModDataEntryPage",segment:"addon-mod-data-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/search/search.module.ngfactory#AddonModDataSearchPageModuleNgFactory",name:"AddonModDataSearchPage",segment:"addon-mod-data-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory#AddonModFeedbackAttemptPageModuleNgFactory",name:"AddonModFeedbackAttemptPage",segment:"addon-mod-feedback-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/form/form.module.ngfactory#AddonModFeedbackFormPageModuleNgFactory",name:"AddonModFeedbackFormPage",segment:"addon-mod-feedback-form",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/index/index.module.ngfactory#AddonModFeedbackIndexPageModuleNgFactory",name:"AddonModFeedbackIndexPage",segment:"addon-mod-feedback-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory#AddonModFeedbackNonRespondentsPageModuleNgFactory",name:"AddonModFeedbackNonRespondentsPage",segment:"addon-mod-feedback-nonrespondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory#AddonModFeedbackRespondentsPageModuleNgFactory",name:"AddonModFeedbackRespondentsPage",segment:"addon-mod-feedback-respondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/folder/pages/index/index.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonModFolderIndexPage",segment:"addon-mod-folder-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/discussion/discussion.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModForumDiscussionPage",segment:"addon-mod-forum-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/index/index.module.ngfactory#AddonModForumIndexPageModuleNgFactory",name:"AddonModForumIndexPage",segment:"addon-mod-forum-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory#AddonModForumNewDiscussionPageModuleNgFactory",name:"AddonModForumNewDiscussionPage",segment:"addon-mod-forum-new-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/edit/edit.module.ngfactory#AddonModGlossaryNewDiscussionPageModuleNgFactory",name:"AddonModGlossaryEditPage",segment:"addon-mod-glossary-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/entry/entry.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModGlossaryEntryPage",segment:"addon-mod-glossary-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/index/index.module.ngfactory#AddonModGlossaryIndexPageModuleNgFactory",name:"AddonModGlossaryIndexPage",segment:"addon-mod-glossary-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/index/index.module.ngfactory#AddonModImscpIndexPageModuleNgFactory",name:"AddonModImscpIndexPage",segment:"addon-mod-imscp-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/index/index.module.ngfactory#AddonModLessonIndexPageModuleNgFactory",name:"AddonModLessonIndexPage",segment:"addon-mod-lesson-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory#AddonModLessonMenuModalPageModuleNgFactory",name:"AddonModLessonMenuModalPage",segment:"addon-mod-lesson-menu-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory#AddonModLessonPasswordModalPageModuleNgFactory",name:"AddonModLessonPasswordModalPage",segment:"addon-mod-lesson-password-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/player/player.module.ngfactory#AddonModLessonPlayerPageModuleNgFactory",name:"AddonModLessonPlayerPage",segment:"addon-mod-lesson-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory#AddonModLessonUserRetakePageModuleNgFactory",name:"AddonModLessonUserRetakePage",segment:"addon-mod-lesson-user-retake",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lti/pages/index/index.module.ngfactory#AddonModLtiIndexPageModuleNgFactory",name:"AddonModLtiIndexPage",segment:"addon-mod-lti-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/page/pages/index/index.module.ngfactory#AddonModPageIndexPageModuleNgFactory",name:"AddonModPageIndexPage",segment:"addon-mod-page-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory#AddonModQuizAttemptPageModuleNgFactory",name:"AddonModQuizAttemptPage",segment:"addon-mod-quiz-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/index/index.module.ngfactory#AddonModQuizIndexPageModuleNgFactory",name:"AddonModQuizIndexPage",segment:"addon-mod-quiz-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory#AddonModQuizNavigationModalPageModuleNgFactory",name:"AddonModQuizNavigationModalPage",segment:"addon-mod-quiz-navigation-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/player/player.module.ngfactory#AddonModQuizPlayerPageModuleNgFactory",name:"AddonModQuizPlayerPage",segment:"addon-mod-quiz-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/review/review.module.ngfactory#AddonModQuizReviewPageModuleNgFactory",name:"AddonModQuizReviewPage",segment:"addon-mod-quiz-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory#AddonModQuizPreflightModalModuleNgFactory",name:"AddonModQuizPreflightModalPage",segment:"addon-mod-quiz-preflight-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/resource/pages/index/index.module.ngfactory#AddonModResourceIndexPageModuleNgFactory",name:"AddonModResourceIndexPage",segment:"addon-mod-resource-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/index/index.module.ngfactory#AddonModScormIndexPageModuleNgFactory",name:"AddonModScormIndexPage",segment:"addon-mod-scorm-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/player/player.module.ngfactory#AddonModScormPlayerPageModuleNgFactory",name:"AddonModScormPlayerPage",segment:"addon-mod-scorm-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/survey/pages/index/index.module.ngfactory#AddonModSurveyIndexPageModuleNgFactory",name:"AddonModSurveyIndexPage",segment:"addon-mod-survey-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/url/pages/index/index.module.ngfactory#AddonModUrlIndexPageModuleNgFactory",name:"AddonModUrlIndexPage",segment:"addon-mod-url-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/edit/edit.module.ngfactory#AddonModWikiEditPageModuleNgFactory",name:"AddonModWikiEditPage",segment:"addon-mod-wiki-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/index/index.module.ngfactory#AddonModWikiIndexPageModuleNgFactory",name:"AddonModWikiIndexPage",segment:"addon-mod-wiki-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory#AddonModWorkshopAssessmentPageModuleNgFactory",name:"AddonModWorkshopAssessmentPage",segment:"addon-mod-workshop-assessment",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory#AddonModWorkshopEditSubmissionPageModuleNgFactory",name:"AddonModWorkshopEditSubmissionPage",segment:"addon-mod-workshop-edit-submission",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/phase/phase.module.ngfactory#AddonModWorkshopPhaseInfoPageModuleNgFactory",name:"AddonModWorkshopPhaseInfoPage",segment:"addon-mod-workshop-phase-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/index/index.module.ngfactory#AddonModWorkshopIndexPageModuleNgFactory",name:"AddonModWorkshopIndexPage",segment:"addon-mod-workshop-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/submission/submission.module.ngfactory#AddonModWorkshopSubmissionPageModuleNgFactory",name:"AddonModWorkshopSubmissionPage",segment:"addon-mod-workshop-submission",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/add/add.module.ngfactory#AddonNotesAddPageModuleNgFactory",name:"AddonNotesAddPage",segment:"addon-notes-add",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/list/list.module.ngfactory#AddonNotificationsListPageModuleNgFactory",name:"AddonNotificationsListPage",segment:"addon-notifications-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/settings/settings.module.ngfactory#AddonNotificationsSettingsPageModuleNgFactory",name:"AddonNotificationsSettingsPage",segment:"addon-notifications-settings",priority:"low",defaultHistory:[]},{loadChildren:"../components/split-view/placeholder/placeholder.module.ngfactory#CorePlaceholderPageModuleNgFactory",name:"CoreSplitViewPlaceholderPage",segment:"core-placeholder",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/viewer/viewer.module.ngfactory#CoreCommentsViewerPageModuleNgFactory",name:"CoreCommentsViewerPage",segment:"core-comments-viewer",priority:"low",defaultHistory:[]},{loadChildren:"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory#CoreContentLinksChooseSitePageModuleNgFactory",name:"CoreContentLinksChooseSitePage",segment:"core-content-links-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory#CoreCourseListModTypePageModuleNgFactory",name:"CoreCourseListModTypePage",segment:"core-course-list-mod-type",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section-selector/section-selector.module.ngfactory#CoreCourseSectionSelectorPageModuleNgFactory",name:"CoreCourseSectionSelectorPage",segment:"core-course-section-selector",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section/section.module.ngfactory#CoreCourseSectionPageModuleNgFactory",name:"CoreCourseSectionPage",segment:"core-course-section",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory#CoreCourseUnsupportedModulePageModuleNgFactory",name:"CoreCourseUnsupportedModulePage",segment:"core-course-unsupported-module",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/available-courses/available-courses.module.ngfactory#CoreCoursesAvailableCoursesPageModuleNgFactory",name:"CoreCoursesAvailableCoursesPage",segment:"core-courses-available-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/categories/categories.module.ngfactory#CoreCoursesCategoriesPageModuleNgFactory",name:"CoreCoursesCategoriesPage",segment:"core-courses-categories",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/course-preview/course-preview.module.ngfactory#CoreCoursesCoursePreviewPageModuleNgFactory",name:"CoreCoursesCoursePreviewPage",segment:"core-courses-course-preview",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/dashboard/dashboard.module.ngfactory#CoreCoursesDashboardPageModuleNgFactory",name:"CoreCoursesDashboardPage",segment:"core-courses-dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/my-courses/my-courses.module.ngfactory#CoreCoursesMyCoursesPageModuleNgFactory",name:"CoreCoursesMyCoursesPage",segment:"core-courses-my-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory#CoreCoursesSelfEnrolPasswordPageModuleNgFactory",name:"CoreCoursesSelfEnrolPasswordPage",segment:"core-courses-self-enrol-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/search/search.module.ngfactory#CoreCoursesSearchPageModuleNgFactory",name:"CoreCoursesSearchPage",segment:"core-courses-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/emulator/pages/capture-media/capture-media.module.ngfactory#CoreEmulatorCaptureMediaPageModuleNgFactory",name:"CoreEmulatorCaptureMediaPage",segment:"core-emulator-capture-media",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/course/course.module.ngfactory#CoreGradesCoursePageModuleNgFactory",name:"CoreGradesCoursePage",segment:"core-grades-course",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/courses/courses.module.ngfactory#CoreGradesCoursesPageModuleNgFactory",name:"CoreGradesCoursesPage",segment:"core-grades-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/coursesplit/coursesplit.module.ngfactory#CoreGradesCourseSplitPageModuleNgFactory",name:"CoreGradesCourseSplitPage",segment:"core-grades-course-split",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/grade/grade.module.ngfactory#CoreGradesGradePageModuleNgFactory",name:"CoreGradesGradePage",segment:"core-grades-grade",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/credentials/credentials.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginCredentialsPage",segment:"core-login-credentials",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/email-signup/email-signup.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginEmailSignupPage",segment:"core-login-email-signup",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory#CoreLoginForgottenPasswordPageModuleNgFactory",name:"CoreLoginForgottenPasswordPage",segment:"core-login-forgotten-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/init/init.module.ngfactory#CoreLoginInitPageModuleNgFactory",name:"CoreLoginInitPage",segment:"core-login-init",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/reconnect/reconnect.module.ngfactory#CoreLoginReconnectPageModuleNgFactory",name:"CoreLoginReconnectPage",segment:"core-login-reconnect",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-error/site-error.module.ngfactory#CoreLoginSiteErrorPageModuleNgFactory",name:"CoreLoginSiteErrorPage",segment:"core-login-site-error",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-help/site-help.module.ngfactory#CoreLoginSiteHelpPageModuleNgFactory",name:"CoreLoginSiteHelpPage",segment:"core-login-site-help",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-policy/site-policy.module.ngfactory#CoreLoginSitePolicyPageModuleNgFactory",name:"CoreLoginSitePolicyPage",segment:"core-login-site-policy",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site/site.module.ngfactory#CoreLoginSitePageModuleNgFactory",name:"CoreLoginSitePage",segment:"core-login-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/sites/sites.module.ngfactory#CoreLoginSitesPageModuleNgFactory",name:"CoreLoginSitesPage",segment:"core-login-sites",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/menu/menu.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuPage",segment:"core-mainmenu",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/more/more.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuMorePage",segment:"core-mainmenu-more",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/about/about.module.ngfactory#CoreSettingsAboutPageModuleNgFactory",name:"CoreSettingsAboutPage",segment:"core-settings-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/list/list.module.ngfactory#CoreSettingsListPageModuleNgFactory",name:"CoreSettingsListPage",segment:"core-settings-list",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/general/general.module.ngfactory#CoreSettingsGeneralPageModuleNgFactory",name:"CoreSettingsGeneralPage",segment:"core-settings-general",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/space-usage/space-usage.module.ngfactory#CoreSettingsSpaceUsagePageModuleNgFactory",name:"CoreSettingsSpaceUsagePage",segment:"core-settings-space-usage",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/synchronization/synchronization.module.ngfactory#CoreSettingsSynchronizationPageModuleNgFactory",name:"CoreSettingsSynchronizationPage",segment:"core-settings-synchronization",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory#CoreSharedFilesChooseSitePageModuleNgFactory",name:"CoreSharedFilesChooseSitePage",segment:"core-shared-files-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/list/list.module.ngfactory#CoreSharedFilesListPageModuleNgFactory",name:"CoreSharedFilesListPage",segment:"core-shared-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../core/sitehome/pages/index/index.module.ngfactory#CoreSiteHomeIndexPageModuleNgFactory",name:"CoreSiteHomeIndexPage",segment:"core-sitehome-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/module-index/module-index.module.ngfactory#CoreSitePluginsModuleIndexPageModuleNgFactory",name:"CoreSitePluginsModuleIndexPage",segment:"core-site-plugins-module-index-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory#CoreSitePluginsPluginPageModuleNgFactory",name:"CoreSitePluginsPluginPage",segment:"core-site-plugins-plugin-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/about/about.module.ngfactory#CoreUserAboutPageModuleNgFactory",name:"CoreUserAboutPage",segment:"core-user-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/participants/participants.module.ngfactory#CoreUserParticipantsPageModuleNgFactory",name:"CoreUserParticipantsPage",segment:"core-user-participants",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/profile/profile.module.ngfactory#CoreUserProfilePageModuleNgFactory",name:"CoreUserProfilePage",segment:"core-user-profile",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/image/image.module.ngfactory#CoreViewerImagePageModuleNgFactory",name:"CoreViewerImagePage",segment:"core-viewer-image",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/iframe/iframe.module.ngfactory#CoreViewerIframePageModuleNgFactory",name:"CoreViewerIframePage",segment:"core-viewer-iframe",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/text/text.module.ngfactory#CoreViewerTextPageModuleNgFactory",name:"CoreViewerTextPage",segment:"core-viewer-text",priority:"low",defaultHistory:[]}]},[]),ho._26(512,ho.j,ho.j,[]),ho._26(512,Dd.a,Dd.a,[ho.j]),ho._26(1024,xd.b,xd.c,[Dd.a,ho.u]),ho._26(1024,ho.c,function(e,n,t,i,o,r,l,s,a,u,c,d,f){return[po.u(e),Md.a(n),Id.b(t,i),wd.b(o,r,l,s,a),xd.d(u,c,d,f)]},[[2,ho.C],ir.a,kr.a,Qr.a,ir.a,kr.a,Qr.a,qr.a,ku.l,ir.a,kd.a,xd.b,ho.D]),ho._26(512,ho.d,ho.d,[[2,ho.c]]),ho._26(131584,ho.f,ho.f,[ho.D,ho._7,ho.u,ho.q,ho.n,ho.d]),ho._26(512,ho.e,ho.e,[ho.f]),ho._26(512,po.a,po.a,[[3,po.a]]),ho._26(512,rd.a,rd.a,[]),ho._26(512,sd.e,sd.e,[]),ho._26(512,sd.d,sd.d,[]),ho._26(512,Ud.e,Ud.e,[]),ho._26(512,sr.v,sr.v,[]),ho._26(512,sr.i,sr.i,[]),ho._26(512,sr.s,sr.s,[]),ho._26(512,Nd.a,Nd.a,[]),ho._26(512,Rd.a,Rd.a,[]),ho._26(512,Fd.a,Fd.a,[]),ho._26(512,Ld.a,Ld.a,[]),ho._26(512,Hd.a,Hd.a,[]),ho._26(512,Kd.a,Kd.a,[]),ho._26(512,Wd.a,Wd.a,[Kd.a,kr.a]),ho._26(512,Xc.a,Xc.a,[]),ho._26(1024,Ad.a,qd.e,[kr.a]),ho._26(512,Do.a,Do.a,[]),ho._26(512,Lr.a,Lr.a,[Do.a]),ho._26(512,Mr.a,Mr.a,[Wd.a,kr.a,Xc.a,qr.a,Ad.a,Do.a,Lr.a,ho.D,Od.a]),ho._26(512,Bd.a,Bd.a,[]),ho._26(512,sd.k,sd.k,[]),ho._26(2048,sd.i,null,[sd.k]),ho._26(512,sd.g,sd.g,[sd.i]),ho._26(2048,sd.b,null,[sd.g]),ho._26(512,sd.f,sd.j,[sd.b,ho.u]),ho._26(512,sd.c,sd.c,[sd.f]),ho._26(1024,jd.b,mo.c,[sd.c]),ho._26(512,Gd.a,Gd.b,[]),ho._26(512,zd.b,zd.a,[]),ho._26(512,Vd.b,Vd.a,[]),ho._26(256,Zo.b,void 0,[]),ho._26(256,Zo.c,void 0,[]),ho._26(512,Zo.a,Zo.a,[Bd.a,jd.b,Gd.a,zd.b,Vd.b,Zo.b,Zo.c]),ho._26(512,$d.a,$d.a,[Mr.a]),ho._26(1024,Qd.a,qd.l,[Mr.a]),ho._26(512,Zc.a,Zc.a,[Zo.a,$d.a,kr.a,Qd.a]),ho._26(1024,kd.b,kd.d,[qr.a,kd.a]),ho._26(512,lr.g,Yd.a,[]),ho._26(512,lr.f,lr.f,[lr.g]),ho._26(1024,Br.a,Br.b,[qr.a,kd.b,lr.f,xd.b,ho.n]),ho._26(512,Ys.a,Ys.a,[qr.a,ir.a,Br.a]),ho._26(512,po.c,po.s,[lr.c]),ho._26(512,dr.a,dr.a,[Zo.a,Zc.a,Ys.a,po.c,kr.a]),ho._26(512,Os.a,Os.a,[sd.c,Do.a,Zo.a,dr.a]),ho._26(1024,Xd.a,qd.i,[Mr.a,dr.a,Os.a]),ho._26(1024,Jd.a,qd.g,[Mr.a,Xd.a,dr.a]),ho._26(512,xs.a,xs.a,[Do.a,kr.a,Xd.a,Mr.a,dr.a,Jd.a,Os.a]),ho._26(512,Dr.a,Dr.a,[Zc.a,dr.a]),ho._26(1024,Zd.a,qd.m,[Mr.a,xs.a,Dr.a]),ho._26(1024,ef.a,qd.h,[Mr.a]),ho._26(512,nf.a,nf.a,[qr.a,ir.a]),ho._26(512,tf.a,tf.a,[qr.a,ir.a]),ho._26(512,of.a,of.a,[qr.a,ir.a]),ho._26(512,Mo.a,Mo.a,[Zo.a,nf.a,tf.a,of.a,dr.a,Mr.a,kr.a,$d.a,Dr.a,Ys.a,po.c]),ho._26(1024,rf.a,qd.j,[Mr.a]),ho._26(512,lf.a,lf.a,[]),ho._26(1024,sf.a,qd.k,[Mr.a,xs.a]),ho._26(512,Ud.c,Ud.c,[]),ho._26(512,Ud.g,Ud.b,[]),ho._26(1024,Ud.i,Ud.j,[]),ho._26(512,Ud.h,Ud.h,[Ud.c,Ud.g,Ud.i]),ho._26(512,Ud.f,Ud.a,[]),ho._26(1024,Ud.d,Ud.k,[Ud.h,Ud.f]),ho._26(512,af.a,af.a,[sd.c,Zo.a,Mr.a,dr.a,Do.a,xs.a,sf.a,Ud.d,Os.a]),ho._26(512,fr.a,fr.a,[Zd.a,Mr.a,ef.a,Mo.a,Do.a,Zo.a,kr.a,Zc.a,Lr.a,rf.a,Os.a,lf.a,af.a,ho.D]),ho._26(512,uf.a,uf.a,[Do.a,kr.a,fr.a]),ho._26(512,cf.a,cf.a,[ho.u]),ho._26(512,Or.a,Or.a,[Do.a,sd.c,cf.a,Mr.a,Zo.a,Dr.a,Lr.a,dr.a,fr.a]),ho._26(1024,df.a,qd.n,[Mr.a,fr.a,dr.a]),ho._26(512,ff.a,ff.a,[fr.a,Os.a,Ys.a]),ho._26(512,Ir.a,Ir.a,[Zo.a]),ho._26(512,pf.a,pf.a,[Do.a,df.a,kr.a,Mr.a,fr.a,$d.a,dr.a,Zo.a,of.a,Lr.a]),ho._26(512,hf.a,hf.a,[Xd.a,xs.a,fr.a,Do.a,Or.a,df.a,ff.a,Ir.a,Mr.a,pf.a]),ho._26(512,qd.a,qd.a,[Mr.a,uf.a,hf.a]),ho._26(512,mf.b,mf.b,[]),ho._26(512,_f.b,_f.b,[]),ho._26(512,gf.a,gf.a,[Do.a,Or.a,Lr.a]),ho._26(512,vf.a,vf.a,[Do.a,Or.a,Dr.a,fr.a]),ho._26(512,Ml.a,Ml.a,[Do.a,Or.a]),ho._26(512,yf.a,yf.a,[Or.a]),ho._26(512,bf.a,bf.a,[Or.a]),ho._26(512,dl.a,dl.a,[Do.a,Or.a,Lr.a,fr.a,Ir.a,Zo.a,bf.a,Mr.a]),ho._26(512,Pf.a,Pf.a,[Or.a,Zo.a,Ml.a]),ho._26(512,Ef.a,Ef.a,[Do.a]),ho._26(512,xr.a,xr.a,[Do.a,Mr.a,xs.a,Or.a,af.a,dr.a,fr.a,Os.a,Dr.a,Ir.a,Lr.a,uf.a,Ad.a,Ef.a,Mo.a,ho.D]),ho._26(512,Nl.a,Nl.a,[Do.a,Or.a,fr.a,xr.a]),ho._26(512,Cf.a,Cf.a,[xs.a,Or.a,dr.a]),ho._26(512,If.a,If.a,[Mr.a,Or.a,Pf.a,xr.a,Nl.a,Zo.a,fr.a,Cf.a]),ho._26(512,Yl.a,Yl.a,[Do.a,Or.a,dl.a,If.a]),ho._26(512,rs.a,rs.a,[Or.a]),ho._26(512,Sf.a,Sf.a,[Ml.a,yf.a,Yl.a,rs.a]),ho._26(512,wf.a,wf.a,[Do.a,Or.a,fr.a,Zc.a,Mr.a,kr.a,xr.a,Ml.a,dr.a,Lr.a]),ho._26(512,Jc.a,Jc.a,[Do.a,Or.a,Mo.a,af.a,Zo.a,dr.a,Lr.a,Mr.a,fr.a,Dr.a,$d.a,kr.a,uf.a,wf.a,lr.f,of.a]),ho._26(512,Af.a,Af.a,[Or.a,Ml.a,Jc.a,Mo.a,Zo.a,dl.a,dr.a]),ho._26(512,Tf.a,Tf.a,[Ml.a,Jc.a]),ho._26(512,Of.a,Of.a,[Jc.a]),ho._26(512,kf.b,kf.b,[gf.a,vf.a,Sf.a,Af.a,Tf.a,Of.a]),ho._26(512,Df.a,Df.a,[Do.a,Or.a,Lr.a]),ho._26(1024,xf.a,qd.o,[Mr.a,ff.a]),ho._26(1024,Mf.a,qd.d,[Mr.a,ff.a]),ho._26(512,Ns.a,Ns.a,[Do.a,xs.a,dr.a,fr.a,Or.a,Ir.a,Os.a,xr.a,kr.a,Zo.a,xf.a,Mf.a]),ho._26(512,Uf.a,Uf.a,[qr.a,ir.a]),ho._26(512,Rs.a,Rs.a,[Do.a,Mr.a,Zo.a,Ns.a,Mo.a,dr.a,xs.a,fr.a,Uf.a,Df.a,Mf.a,kr.a]),ho._26(512,Nf.a,Nf.a,[Mr.a,fr.a,Rs.a]),ho._26(512,Rf.a,Rf.a,[Mr.a,fr.a,kr.a,Rs.a]),ho._26(512,Ff.a,Ff.a,[Mr.a,fr.a,Rs.a]),ho._26(512,Lf.a,Lf.a,[Mr.a,fr.a,kr.a,Rs.a]),ho._26(512,Hf.a,Hf.a,[Mr.a,kr.a,Ir.a,Rs.a,Ns.a,Mo.a]),ho._26(512,Kf.b,Kf.b,[Df.a,Nf.a,Rf.a,Ff.a,Lf.a,Hf.a]),ho._26(512,Wf.a,Wf.a,[Do.a,xs.a,Mr.a,dr.a,Os.a,Or.a,Lr.a]),ho._26(512,qf.a,qf.a,[Do.a,of.a,Zo.a,fr.a,Or.a,Ys.a,Ns.a,uf.a,Wf.a,Mo.a,xs.a,Mr.a]),ho._26(512,Bf.a,Bf.a,[qf.a,kr.a]),ho._26(512,jf.b,jf.b,[kr.a,Df.a,Bf.a,qf.a,Lr.a]),ho._26(512,Gf.a,Gf.a,[Ml.a]),ho._26(512,zf.a,zf.a,[Do.a,Or.a,Lr.a,Gf.a]),ho._26(512,Vf.a,Vf.a,[Or.a,dl.a]),ho._26(512,No.a,No.a,[Do.a,Or.a,Lr.a,dl.a,Vf.a]),ho._26(512,$f.a,$f.a,[No.a]),ho._26(512,Qf.a,Qf.a,[zf.a,$f.a]),ho._26(512,Yf.a,Yf.a,[]),ho._26(512,Xf.a,Xf.a,[zf.a,Yf.a]),ho._26(512,Jf.a,Jf.a,[Ir.a]),ho._26(512,Zf.a,Zf.a,[zf.a,Jf.a]),ho._26(512,ep.a,ep.a,[No.a]),ho._26(512,np.a,np.a,[zf.a,ep.a]),ho._26(512,pd.a,pd.a,[Do.a,Mr.a,$d.a,fr.a,Ad.a,ho.D]),ho._26(512,tp.a,tp.a,[Lr.a,Or.a]),ho._26(512,ip.a,ip.a,[Or.a,Do.a,Mr.a,bf.a,Lr.a,dl.a,Zo.a,fr.a,dr.a,tp.a,Ir.a]),ho._26(512,op.a,op.a,[ip.a]),ho._26(512,rp.a,rp.a,[dl.a,Or.a]),ho._26(512,lp.b,lp.b,[pd.a,op.a,rp.a,kr.a,Lr.a]),ho._26(512,sp.a,sp.a,[Or.a,Yl.a,Jc.a]),ho._26(512,ap.b,ap.b,[vf.a,sp.a]),ho._26(512,up.b,up.b,[]),ho._26(512,cp.a,cp.a,[]),ho._26(512,dp.a,dp.a,[Do.a,Or.a,Ml.a,Lr.a]),ho._26(512,fp.a,fp.a,[Or.a,fr.a]),ho._26(512,Ur.a,Ur.a,[Do.a,Or.a,Jc.a,vf.a,Mr.a,Mo.a,Dr.a,Zo.a,uf.a,Lr.a,dr.a,wf.a]),ho._26(512,pp.a,pp.a,[Ur.a]),ho._26(512,hp.a,hp.a,[Nl.a]),ho._26(512,mp.a,mp.a,[Nl.a,Jc.a]),ho._26(512,ql.a,ql.a,[Do.a,Or.a,fr.a,Lr.a,Ml.a]),ho._26(512,_p.b,_p.b,[dp.a,fp.a,Lr.a,Or.a,Nl.a,vf.a,pp.a,hp.a,mp.a,ql.a]),ho._26(512,gp.a,gp.a,[]),ho._26(512,vp.a,vp.a,[Do.a,Or.a,Ml.a]),ho._26(512,yp.a,yp.a,[vp.a]),ho._26(512,bp.a,bp.a,[Do.a,Ml.a,vp.a,Or.a,dr.a,dl.a,Mo.a,Dr.a,fr.a]),ho._26(512,Pp.a,Pp.a,[vp.a,Ml.a,bp.a]),ho._26(512,Ep.a,Ep.a,[Ur.a,vp.a]),ho._26(512,Cp.a,Cp.a,[Ur.a,vp.a]),ho._26(512,Ip.a,Ip.a,[Ur.a,Or.a,vp.a]),ho._26(512,Sp.b,Sp.b,[gf.a,yp.a,Pp.a,ql.a,vf.a,Ep.a,Cp.a,Ip.a,dp.a,Lr.a,Or.a]),ho._26(512,wp.a,wp.a,[]),ho._26(512,Ap.a,Ap.a,[]),ho._26(512,Tp.a,Tp.a,[]),ho._26(512,$l.a,$l.a,[Do.a,Or.a,fr.a,dl.a,xr.a,Ir.a,xs.a,Lr.a]),ho._26(1024,ho.g,function(){return[mo.d]},[]),ho._26(512,Op.a,Op.a,[ho.g]),ho._26(512,kp.a,kp.a,[ho.u,Do.a,Op.a]),ho._26(512,Dp.a,Dp.a,[Do.a,Or.a,Lr.a]),ho._26(512,xp.a,xp.a,[Do.a,Or.a,Lr.a,fr.a]),ho._26(512,Mp.a,Mp.a,[]),ho._26(512,Up.a,Up.a,[Do.a,Or.a,Lr.a,Mp.a]),ho._26(512,Np.a,Np.a,[Do.a,Or.a,Ir.a,fr.a]),ho._26(512,Rp.a,Rp.a,[Np.a]),ho._26(512,Fp.a,Fp.a,[Do.a,Or.a,Lr.a,Up.a,Rp.a]),ho._26(512,Lp.a,Lp.a,[Do.a,Or.a,Lr.a]),ho._26(512,Hp.a,Hp.a,[Do.a,Or.a,Lr.a,fr.a]),ho._26(512,Kp.a,Kp.a,[Zo.a]),ho._26(512,Wp.a,Wp.a,[Do.a,Or.a,Lr.a,Kp.a]),ho._26(512,qp.a,qp.a,[Zo.a]),ho._26(512,Xs.a,Xs.a,[Do.a,Or.a,Lr.a,qp.a]),ho._26(512,Bp.a,Bp.a,[Do.a,Or.a,Lr.a]),ho._26(512,jp.a,jp.a,[Do.a,Or.a,Mo.a,gf.a,No.a,dp.a,Zc.a,Ud.d,wf.a,$l.a,kp.a,fr.a,Dr.a,ql.a,Lr.a,zf.a,Dp.a,dr.a,xr.a,xp.a,Up.a,Fp.a,Np.a,Lp.a,Hp.a,Wp.a,Zo.a,Xs.a,Mr.a,Bp.a,dl.a]),ho._26(512,Gp.a,Gp.a,[jp.a]),ho._26(512,zp.a,zp.a,[]),ho._26(512,Vp.b,Vp.b,[]),ho._26(512,$p.a,$p.a,[]),ho._26(512,Qp.b,Qp.b,[]),ho._26(512,Yp.a,Yp.a,[Do.a,Or.a]),ho._26(512,Xp.a,Xp.a,[Yp.a]),ho._26(512,Jp.a,Jp.a,[Yp.a,Jc.a]),ho._26(512,Zp.a,Zp.a,[Yp.a,Jc.a]),ho._26(512,eh.b,eh.b,[dp.a,Xp.a,vf.a,Jp.a,Zp.a]),ho._26(512,nh.a,nh.a,[Do.a,Or.a,Pf.a,Ml.a,Ir.a,pf.a,$d.a,Zo.a]),ho._26(512,th.a,th.a,[nh.a]),ho._26(512,ih.a,ih.a,[Do.a,$d.a,Or.a,xr.a,pf.a,fr.a,Mr.a,nh.a]),ho._26(512,oh.b,oh.b,[gf.a,th.a,uf.a,nh.a,Jc.a,pf.a,ih.a]),ho._26(512,rh.a,rh.a,[]),ho._26(512,lh.a,lh.a,[Do.a,Or.a]),ho._26(512,sh.a,sh.a,[lh.a]),ho._26(512,ah.a,ah.a,[lh.a]),ho._26(512,uh.a,uh.a,[Ur.a,Or.a,lh.a,Lr.a]),ho._26(512,ch.b,ch.b,[gf.a,sh.a,ql.a,ah.a,dp.a,uh.a]),ho._26(512,dh.a,dh.a,[]),ho._26(512,Wl.a,Wl.a,[Do.a,Or.a,Ml.a,fr.a]),ho._26(512,fh.a,fh.a,[Wl.a]),ho._26(512,ph.a,ph.a,[Lr.a,Wl.a]),ho._26(512,hh.a,hh.a,[ql.a,fh.a,dp.a,ph.a]),ho._26(512,mh.a,mh.a,[]),ho._26(512,_h.a,_h.a,[Dp.a,mh.a]),ho._26(512,gh.a,gh.a,[]),ho._26(512,vh.a,vh.a,[Dp.a,gh.a]),ho._26(512,yh.a,yh.a,[]),ho._26(512,bh.a,bh.a,[Dp.a,yh.a]),ho._26(512,Ph.a,Ph.a,[dr.a]),ho._26(512,Eh.a,Eh.a,[Dp.a,Ph.a]),ho._26(512,Ch.a,Ch.a,[dr.a]),ho._26(512,Ih.a,Ih.a,[Dp.a,Ch.a]),ho._26(512,Sh.a,Sh.a,[]),ho._26(512,gd.a,gd.a,[Or.a,Os.a]),ho._26(512,wh.a,wh.a,[gd.a]),ho._26(512,Ah.b,Ah.b,[gf.a,wh.a]),ho._26(512,Th.a,Th.a,[]),ho._26(512,Oh.a,Oh.a,[]),ho._26(512,kh.a,kh.a,[]),ho._26(512,Dh.a,Dh.a,[Do.a,Or.a,Lr.a,kh.a]),ho._26(512,xh.a,xh.a,[]),ho._26(512,Mh.a,Mh.a,[Dh.a,xh.a]),ho._26(512,Uh.a,Uh.a,[]),ho._26(512,Nh.a,Nh.a,[]),ho._26(512,Rh.a,Rh.a,[Ml.a,Or.a]),ho._26(512,Fh.a,Fh.a,[Dh.a,Rh.a]),ho._26(512,Lh.a,Lh.a,[]),ho._26(512,Hh.a,Hh.a,[]),ho._26(512,Kh.a,Kh.a,[Dh.a,Hh.a]),ho._26(512,Wh.a,Wh.a,[]),ho._26(512,qh.a,qh.a,[rs.a,Ml.a,Or.a]),ho._26(512,Bh.a,Bh.a,[Dh.a,qh.a]),ho._26(512,jh.a,jh.a,[]),ho._26(512,Gh.a,Gh.a,[]),ho._26(512,zh.a,zh.a,[Dh.a,Gh.a]),ho._26(512,Vh.a,Vh.a,[]),ho._26(512,$h.a,$h.a,[]),ho._26(512,Qh.a,Qh.a,[Dh.a,$h.a]),ho._26(512,Yh.a,Yh.a,[]),ho._26(512,Xh.a,Xh.a,[]),ho._26(512,Jh.a,Jh.a,[Dh.a,Xh.a]),ho._26(512,Zh.a,Zh.a,[]),ho._26(512,Es.a,Es.a,[Or.a]),ho._26(512,em.a,em.a,[Es.a]),ho._26(512,nm.a,nm.a,[Wp.a,em.a]),ho._26(512,Ks.a,Ks.a,[Do.a,Or.a,dr.a,xs.a,Ir.a]),ho._26(512,Hs.a,Hs.a,[Do.a,Or.a,dr.a,Ir.a,Mr.a,fr.a,Nl.a,Wp.a,vp.a,xr.a,Ks.a,Es.a]),ho._26(512,Ws.a,Ws.a,[Do.a,Or.a,xs.a,Hs.a,fr.a,Ks.a,Xs.a,Wp.a,Ns.a,Pf.a]),ho._26(512,Ls.a,Ls.a,[Or.a]),ho._26(512,tm.a,tm.a,[Or.a,af.a,Hs.a,Ks.a,Ws.a,Ls.a,Ns.a,xr.a,xs.a,fr.a]),ho._26(512,im.a,im.a,[Wp.a,tm.a]),ho._26(512,om.a,om.a,[Or.a,af.a,dr.a,Hs.a,Ks.a,Ws.a]),ho._26(512,rm.a,rm.a,[Wp.a,om.a]),ho._26(512,lm.a,lm.a,[]),ho._26(512,sm.a,sm.a,[Or.a,dr.a,Hs.a,Ks.a]),ho._26(512,am.a,am.a,[Xs.a,sm.a]),ho._26(512,um.a,um.a,[Hs.a]),ho._26(512,cm.a,cm.a,[Xs.a,um.a]),ho._26(512,dm.a,dm.a,[Hs.a]),ho._26(512,fm.a,fm.a,[Xs.a,dm.a]),ho._26(512,pm.a,pm.a,[]),ho._26(512,hm.a,hm.a,[dl.a,Hs.a]),ho._26(512,Ts.a,Ts.a,[xs.a,xr.a,Or.a,Mr.a,Zo.a,fr.a]),ho._26(512,xl.a,xl.a,[dl.a,Mo.a,No.a,$l.a,xr.a,Or.a,dr.a,Ir.a,fr.a,Zo.a,Jc.a,ql.a,Yl.a,Lr.a,Ts.a,Mr.a,xs.a,ho.u,Ml.a,bf.a,zf.a,wf.a]),ho._26(512,mm.a,mm.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Hs.a,dr.a,Xs.a,Wp.a,xl.a,Pf.a,bp.a,Nl.a,Ws.a]),ho._26(512,_m.a,_m.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,Lr.a,Hs.a,Ks.a,fr.a,Wp.a,bp.a,Ir.a]),ho._26(512,gm.a,gm.a,[_m.a]),ho._26(512,vm.a,vm.a,[xl.a]),ho._26(512,ym.a,ym.a,[Ur.a,Zo.a,Hs.a]),ho._26(512,bm.b,bm.b,[No.a,hm.a,$l.a,mm.a,pd.a,gm.a,ih.a,vf.a,vm.a,ym.a]),ho._26(512,Pm.a,Pm.a,[]),ho._26(512,Em.a,Em.a,[Do.a,Or.a,dr.a,xs.a,xr.a,Ud.d,fr.a,dl.a,Mo.a]),ho._26(512,Cm.a,Cm.a,[Em.a,dl.a]),ho._26(512,Im.a,Im.a,[xl.a]),ho._26(512,Sm.a,Sm.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Em.a]),ho._26(512,wm.a,wm.a,[Ur.a,Zo.a,Em.a]),ho._26(512,Am.b,Am.b,[No.a,Cm.a,vf.a,Im.a,$l.a,Sm.a,wm.a]),ho._26(512,Tm.a,Tm.a,[]),ho._26(512,Om.a,Om.a,[dl.a]),ho._26(512,km.a,km.a,[xl.a]),ho._26(512,Dm.a,Dm.a,[Ur.a,Zo.a]),ho._26(512,xm.b,xm.b,[No.a,Om.a,vf.a,km.a,Dm.a]),ho._26(512,Mm.a,Mm.a,[]),ho._26(512,Um.a,Um.a,[dl.a]),ho._26(512,Nm.a,Nm.a,[Or.a]),ho._26(512,Rm.a,Rm.a,[Or.a,Mr.a,xr.a,fr.a,Nm.a]),ho._26(512,Fm.a,Fm.a,[Or.a,Do.a,Mr.a,Nm.a,Lr.a,Rm.a,Zo.a,fr.a,dr.a,dl.a,tp.a,Ir.a]),ho._26(512,Lm.a,Lm.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Rm.a,Fm.a,Nl.a]),ho._26(512,Hm.a,Hm.a,[xl.a]),ho._26(512,Km.a,Km.a,[Fm.a]),ho._26(512,Wm.a,Wm.a,[Ur.a,Zo.a]),ho._26(512,qm.b,qm.b,[No.a,Um.a,$l.a,Lm.a,vf.a,Hm.a,pd.a,Km.a,ih.a,Wm.a]),ho._26(512,Bm.a,Bm.a,[]),ho._26(512,jm.a,jm.a,[]),ho._26(512,Gm.a,Gm.a,[Do.a,Or.a,Lr.a,fr.a,jm.a]),ho._26(512,zm.a,zm.a,[Zo.a]),ho._26(512,Vm.a,Vm.a,[Gm.a,zm.a]),ho._26(512,$m.a,$m.a,[Zo.a]),ho._26(512,Qm.a,Qm.a,[Gm.a,$m.a]),ho._26(512,Ym.a,Ym.a,[Zo.a,Ls.a,Ns.a]),ho._26(512,Xm.a,Xm.a,[Gm.a,Ym.a]),ho._26(512,Jm.a,Jm.a,[Zo.a]),ho._26(512,Zm.a,Zm.a,[Gm.a,Jm.a]),ho._26(512,e_.a,e_.a,[Zo.a]),ho._26(512,n_.a,n_.a,[Gm.a,e_.a]),ho._26(512,t_.a,t_.a,[Zo.a]),ho._26(512,i_.a,i_.a,[Gm.a,t_.a]),ho._26(512,o_.a,o_.a,[Zo.a]),ho._26(512,r_.a,r_.a,[Gm.a,o_.a]),ho._26(512,l_.a,l_.a,[Zo.a,Ls.a,Ns.a]),ho._26(512,s_.a,s_.a,[Gm.a,l_.a]),ho._26(512,a_.a,a_.a,[Zo.a]),ho._26(512,u_.a,u_.a,[Gm.a,a_.a]),ho._26(512,c_.a,c_.a,[Zo.a]),ho._26(512,d_.a,d_.a,[Gm.a,c_.a]),ho._26(512,f_.a,f_.a,[Zo.a,dr.a]),ho._26(512,p_.a,p_.a,[Gm.a,f_.a]),ho._26(512,h_.a,h_.a,[Zo.a]),ho._26(512,m_.a,m_.a,[Gm.a,h_.a]),ho._26(512,__.a,__.a,[]),ho._26(512,g_.a,g_.a,[Do.a,Or.a,dr.a,xs.a]),ho._26(512,v_.a,v_.a,[Do.a,Or.a,fr.a,xr.a,g_.a,Mr.a,Gm.a]),ho._26(512,y_.a,y_.a,[dl.a,v_.a]),ho._26(512,b_.a,b_.a,[Or.a,v_.a,Zo.a,Gm.a,g_.a,Ns.a,dr.a]),ho._26(512,P_.a,P_.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,v_.a,Ir.a,b_.a,Pf.a,Es.a]),ho._26(512,E_.a,E_.a,[xl.a]),ho._26(512,C_.a,C_.a,[Or.a,Do.a,Mr.a,g_.a,Lr.a,v_.a,Zo.a,fr.a,dl.a,tp.a,dr.a,Ir.a,b_.a]),ho._26(512,I_.a,I_.a,[C_.a]),ho._26(512,S_.a,S_.a,[v_.a,dl.a,Mo.a,Lr.a]),ho._26(512,w_.a,w_.a,[v_.a,dl.a,Mo.a,Lr.a,Zo.a]),ho._26(512,A_.a,A_.a,[Ur.a,v_.a,dl.a,Mo.a]),ho._26(512,T_.a,T_.a,[Ur.a,v_.a,dl.a,Mo.a]),ho._26(512,O_.a,O_.a,[Ur.a,Zo.a,v_.a]),ho._26(512,k_.a,k_.a,[No.a,y_.a,$l.a,P_.a,vf.a,E_.a,pd.a,I_.a,ih.a,S_.a,w_.a,A_.a,T_.a,O_.a]),ho._26(512,D_.a,D_.a,[]),ho._26(512,x_.a,x_.a,[xl.a]),ho._26(512,M_.a,M_.a,[No.a,D_.a,vf.a,x_.a]),ho._26(512,U_.a,U_.a,[]),ho._26(512,N_.a,N_.a,[Do.a,Or.a,Ir.a,dr.a,fr.a]),ho._26(512,R_.a,R_.a,[Do.a,Or.a,fr.a,Zo.a,dr.a,Mo.a,N_.a]),ho._26(512,F_.a,F_.a,[dl.a,R_.a]),ho._26(512,L_.a,L_.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Ys.a,Pf.a,R_.a]),ho._26(512,H_.a,H_.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,Lr.a,R_.a,N_.a,L_.a,Ir.a,fr.a,Dr.a]),ho._26(512,K_.a,K_.a,[H_.a]),ho._26(512,W_.a,W_.a,[xl.a,R_.a,Mo.a,dl.a]),ho._26(512,q_.a,q_.a,[xl.a,Mo.a,Or.a,R_.a,dl.a,Ur.a]),ho._26(512,B_.a,B_.a,[Mo.a,R_.a,xl.a,Ur.a,dl.a]),ho._26(512,j_.a,j_.a,[Ur.a,Zo.a,R_.a]),ho._26(512,G_.b,G_.b,[No.a,F_.a,$l.a,L_.a,pd.a,K_.a,vf.a,W_.a,q_.a,B_.a,ih.a,j_.a]),ho._26(512,z_.a,z_.a,[]),ho._26(512,V_.a,V_.a,[Do.a,Or.a,dl.a,xr.a,fr.a]),ho._26(512,$_.a,$_.a,[dl.a,Mo.a,V_.a,xl.a,dr.a,Os.a,xs.a,Mr.a,xr.a,Or.a]),ho._26(512,Q_.a,Q_.a,[V_.a,dl.a,Os.a,$_.a,$l.a,dr.a,Zo.a,Ir.a]),ho._26(512,Y_.a,Y_.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,V_.a,$_.a]),ho._26(512,X_.a,X_.a,[xl.a]),ho._26(512,J_.a,J_.a,[]),ho._26(512,Z_.a,Z_.a,[Ur.a,Zo.a,V_.a]),ho._26(512,eg.b,eg.b,[No.a,Q_.a,$l.a,Y_.a,vf.a,X_.a,Ef.a,J_.a,Z_.a]),ho._26(512,ng.a,ng.a,[]),ho._26(512,tg.a,tg.a,[Do.a,Or.a,dr.a,Ir.a]),ho._26(512,ig.a,ig.a,[Do.a,Or.a,fr.a,xr.a,tg.a,Mr.a]),ho._26(512,og.a,og.a,[dl.a,ig.a]),ho._26(512,rg.a,rg.a,[ig.a,Nl.a,dr.a,Zo.a,Ir.a]),ho._26(512,lg.a,lg.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,ig.a,Nl.a,rg.a,Ir.a,Pf.a]),ho._26(512,sg.a,sg.a,[xl.a]),ho._26(512,ag.a,ag.a,[Or.a,Do.a,Mr.a,tg.a,Lr.a,ig.a,Zo.a,fr.a,dr.a,dl.a,tp.a,Ir.a]),ho._26(512,ug.a,ug.a,[ag.a]),ho._26(512,cg.a,cg.a,[Ur.a,ig.a,dl.a,Mo.a]),ho._26(512,dg.a,dg.a,[Ur.a,ig.a,dl.a,Mo.a]),ho._26(512,fg.a,fg.a,[Ur.a,ig.a,dl.a,Mo.a]),ho._26(512,pg.a,pg.a,[Ur.a,ig.a,dl.a,Mo.a]),ho._26(512,hg.a,hg.a,[Ur.a,ig.a,dl.a,Mo.a]),ho._26(512,mg.a,mg.a,[Ur.a,Zo.a,ig.a]),ho._26(512,_g.b,_g.b,[No.a,og.a,$l.a,lg.a,vf.a,sg.a,pd.a,ug.a,cg.a,ih.a,dg.a,fg.a,pg.a,hg.a,mg.a]),ho._26(512,gg.a,gg.a,[]),ho._26(512,vg.a,vg.a,[dl.a]),ho._26(512,yg.a,yg.a,[Do.a,Or.a,dl.a,fr.a]),ho._26(512,bg.a,bg.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,yg.a]),ho._26(512,Pg.a,Pg.a,[xl.a]),ho._26(512,Eg.a,Eg.a,[]),ho._26(512,Cg.a,Cg.a,[Ur.a,Zo.a]),ho._26(512,Ig.b,Ig.b,[No.a,vg.a,$l.a,bg.a,vf.a,Pg.a,Ef.a,Eg.a,Cg.a]),ho._26(512,Sg.a,Sg.a,[]),ho._26(512,wg.a,wg.a,[dl.a,If.a,Zo.a,Lr.a,Or.a]),ho._26(512,Ag.a,Ag.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Pf.a,Nl.a,If.a]),ho._26(512,Tg.a,Tg.a,[xs.a,Ns.a,Nl.a,Cf.a]),ho._26(512,Og.a,Og.a,[Zo.a,Mr.a,dl.a,Lr.a,Do.a,Or.a,tp.a,dr.a,Ir.a,Ns.a,fr.a,If.a,Tg.a,Cf.a]),ho._26(512,kg.a,kg.a,[Og.a]),ho._26(512,Dg.a,Dg.a,[xl.a,If.a]),ho._26(512,xg.a,xg.a,[Mo.a,Ur.a]),ho._26(512,Mg.a,Mg.a,[Ur.a,Zo.a]),ho._26(512,Ug.b,Ug.b,[No.a,wg.a,$l.a,Ag.a,pd.a,kg.a,vf.a,Dg.a,xg.a,ih.a,Mg.a]),ho._26(512,Ng.a,Ng.a,[]),ho._26(512,Rg.a,Rg.a,[dl.a]),ho._26(512,Fg.a,Fg.a,[xs.a,Or.a,dr.a,fr.a]),ho._26(512,Lg.a,Lg.a,[Mr.a,Or.a,xr.a,Zo.a,dr.a,fr.a,Fg.a]),ho._26(512,Hg.a,Hg.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Nl.a,Lg.a]),ho._26(512,Kg.a,Kg.a,[xs.a,Ns.a,Fg.a]),ho._26(512,Wg.a,Wg.a,[Zo.a,Mr.a,dl.a,Lr.a,Do.a,Or.a,tp.a,dr.a,Ir.a,Ns.a,fr.a,Lg.a,Kg.a,Fg.a]),ho._26(512,qg.a,qg.a,[Wg.a]),ho._26(512,Bg.a,Bg.a,[xl.a,Lg.a]),ho._26(512,jg.a,jg.a,[Mo.a,Ur.a,Lg.a,xl.a]),ho._26(512,Gg.a,Gg.a,[Ur.a,Zo.a]),ho._26(512,zg.b,zg.b,[No.a,Rg.a,$l.a,Hg.a,pd.a,qg.a,vf.a,Bg.a,jg.a,ih.a,Gg.a]),ho._26(512,Vg.a,Vg.a,[]),ho._26(512,$g.a,$g.a,[xs.a,Or.a,dr.a,Dr.a,fr.a,Zo.a,Mr.a]),ho._26(512,Qg.a,Qg.a,[Mr.a,dl.a,Mo.a,xr.a,Or.a,$g.a,po.c]),ho._26(512,Yg.a,Yg.a,[xl.a]),ho._26(512,Xg.a,Xg.a,[Ur.a,Zo.a]),ho._26(512,Jg.b,Jg.b,[No.a,Qg.a,vf.a,Yg.a,Xg.a]),ho._26(512,Zg.a,Zg.a,[]),ho._26(512,ev.a,ev.a,[Do.a,Or.a,dl.a,fr.a,xr.a]),ho._26(512,nv.a,nv.a,[dl.a,ev.a]),ho._26(512,tv.a,tv.a,[Do.a,Mo.a,xr.a,xs.a,dr.a,Ud.d,Or.a]),ho._26(512,iv.a,iv.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,ev.a,tv.a]),ho._26(512,ov.a,ov.a,[xl.a]),ho._26(512,rv.a,rv.a,[]),ho._26(512,lv.a,lv.a,[Ur.a,Zo.a,ev.a]),ho._26(512,sv.b,sv.b,[No.a,nv.a,$l.a,iv.a,vf.a,ov.a,Ef.a,rv.a,lv.a]),ho._26(512,av.a,av.a,[]),ho._26(512,uv.a,uv.a,[]),ho._26(512,cv.a,cv.a,[Hp.a,uv.a]),ho._26(512,dv.a,dv.a,[]),ho._26(512,fv.a,fv.a,[Hp.a,dv.a]),ho._26(512,pv.a,pv.a,[]),ho._26(512,hv.a,hv.a,[Hp.a,pv.a]),ho._26(512,mv.a,mv.a,[Do.a,Or.a,Ir.a,Np.a,Zo.a,fr.a,Fp.a]),ho._26(512,_v.a,_v.a,[Do.a,Or.a,fr.a,Zo.a,dr.a,bp.a,Up.a,xr.a,Ir.a,Hp.a,mv.a,Mo.a]),ho._26(512,gv.a,gv.a,[Mo.a,Zo.a,fr.a,Hp.a,_v.a,Ys.a,mv.a]),ho._26(512,vv.a,vv.a,[Mo.a,dr.a,Np.a,Or.a,Zo.a,Dr.a,fr.a,xr.a,Up.a]),ho._26(512,yv.a,yv.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,ho.u,_v.a,dr.a,gv.a,Hp.a,vv.a]),ho._26(512,bv.a,bv.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,Lr.a,Ir.a,_v.a,mv.a,yv.a,Np.a,Up.a]),ho._26(512,Pv.a,Pv.a,[bv.a]),ho._26(512,Ev.a,Ev.a,[Hp.a,Pv.a]),ho._26(512,Cv.a,Cv.a,[]),ho._26(512,Iv.a,Iv.a,[Hp.a,Cv.a]),ho._26(512,Sv.a,Sv.a,[Or.a]),ho._26(512,wv.a,wv.a,[Hp.a,Sv.a,ih.a]),ho._26(512,Av.a,Av.a,[]),ho._26(512,Tv.a,Tv.a,[Hp.a,Av.a]),ho._26(512,Ov.a,Ov.a,[]),ho._26(512,kv.a,kv.a,[Hp.a,Ov.a]),ho._26(512,Dv.a,Dv.a,[]),ho._26(512,xv.a,xv.a,[Hp.a,Dv.a]),ho._26(512,Mv.a,Mv.a,[dl.a]),ho._26(512,Uv.a,Uv.a,[bv.a]),ho._26(512,Nv.a,Nv.a,[xl.a,_v.a]),ho._26(512,Rv.a,Rv.a,[xl.a,Mo.a,Or.a,_v.a]),ho._26(512,Fv.a,Fv.a,[Mo.a,_v.a,xl.a,Ur.a]),ho._26(512,Lv.a,Lv.a,[Ur.a,Zo.a]),ho._26(512,Hv.b,Hv.b,[No.a,Mv.a,$l.a,yv.a,pd.a,Uv.a,vf.a,Nv.a,Rv.a,Fv.a,ih.a,Lv.a]),ho._26(512,Kv.a,Kv.a,[]),ho._26(512,Wv.a,Wv.a,[dl.a]),ho._26(512,Cd.a,Cd.a,[Do.a,Or.a,Ir.a,tp.a,fr.a,dr.a,Nl.a]),ho._26(512,Ed.a,Ed.a,[Do.a,Zo.a,Or.a,af.a,dr.a,fr.a,xr.a,Cd.a,Ir.a,tp.a]),ho._26(512,qv.a,qv.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,xs.a,dr.a,Ed.a]),ho._26(512,Bv.a,Bv.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,Lr.a,Ir.a,Ed.a,Cd.a,qv.a,fr.a]),ho._26(512,jv.a,jv.a,[Bv.a]),ho._26(512,Gv.a,Gv.a,[xl.a]),ho._26(512,zv.a,zv.a,[xl.a,Mo.a,Or.a]),ho._26(512,Vv.a,Vv.a,[Ur.a,Zo.a]),ho._26(512,$v.b,$v.b,[No.a,Wv.a,$l.a,qv.a,pd.a,jv.a,vf.a,Gv.a,zv.a,ih.a,Vv.a]),ho._26(512,Qv.a,Qv.a,[]),ho._26(512,Yv.a,Yv.a,[Do.a,Or.a,dl.a,fr.a,Os.a]),ho._26(512,Xv.a,Xv.a,[Or.a,Mo.a,Ur.a]),ho._26(512,Jv.a,Jv.a,[dl.a,Yv.a,Xv.a,Mo.a,Ur.a]),ho._26(512,Zv.a,Zv.a,[xl.a]),ho._26(512,ey.a,ey.a,[Ur.a,Zo.a]),ho._26(512,ny.b,ny.b,[No.a,Jv.a,vf.a,Zv.a,ey.a]),ho._26(512,ty.a,ty.a,[]),ho._26(512,iy.a,iy.a,[dl.a]),ho._26(512,oy.a,oy.a,[Do.a,Or.a,dr.a]),ho._26(512,ry.a,ry.a,[Do.a,Or.a,Mr.a,xr.a,fr.a,oy.a]),ho._26(512,ly.a,ly.a,[Zo.a]),ho._26(512,sy.a,sy.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,ry.a,ly.a]),ho._26(512,ay.a,ay.a,[xl.a]),ho._26(512,uy.a,uy.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,oy.a,Lr.a,ry.a,fr.a,Ir.a]),ho._26(512,cy.a,cy.a,[uy.a]),ho._26(512,dy.a,dy.a,[Ur.a,Zo.a]),ho._26(512,fy.b,fy.b,[No.a,iy.a,$l.a,sy.a,vf.a,ay.a,pd.a,cy.a,ih.a,dy.a]),ho._26(512,py.a,py.a,[]),ho._26(512,hy.a,hy.a,[Zo.a,bp.a]),ho._26(512,my.a,my.a,[Bp.a,hy.a]),ho._26(512,_y.a,_y.a,[Zo.a]),ho._26(512,gy.a,gy.a,[Bp.a,_y.a]),ho._26(512,vy.a,vy.a,[Zo.a]),ho._26(512,yy.a,yy.a,[Bp.a,vy.a]),ho._26(512,by.a,by.a,[Zo.a]),ho._26(512,Py.a,Py.a,[Bp.a,by.a]),ho._26(512,Ey.a,Ey.a,[]),ho._26(512,Cy.a,Cy.a,[xs.a,Or.a,dr.a,Ir.a]),ho._26(512,Iy.a,Iy.a,[Mr.a,xr.a,Or.a,fr.a,Cy.a]),ho._26(512,Sy.a,Sy.a,[dl.a,Iy.a]),ho._26(512,wy.a,wy.a,[xl.a]),ho._26(512,Ay.a,Ay.a,[Zo.a,xs.a,Ns.a,Or.a,dr.a,fr.a,Iy.a,Cy.a,Bp.a]),ho._26(512,Ty.a,Ty.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Pf.a,Nl.a,Iy.a,Ay.a]),ho._26(512,Oy.a,Oy.a,[Zo.a,Mr.a,dl.a,Lr.a,Do.a,Or.a,tp.a,dr.a,Ir.a,fr.a,Iy.a,Ay.a,Cy.a]),ho._26(512,ky.a,ky.a,[Oy.a]),ho._26(512,Dy.a,Dy.a,[Ur.a,Zo.a,Iy.a]),ho._26(512,xy.b,xy.b,[No.a,Sy.a,vf.a,wy.a,$l.a,Ty.a,pd.a,ky.a,ih.a,Dy.a]),ho._26(512,My.a,My.a,[]),ho._26(512,Uy.a,Uy.a,[Mr.a,dl.a,xr.a,Or.a,dr.a,fr.a]),ho._26(512,Ny.a,Ny.a,[dl.a,Uy.a]),ho._26(512,Ry.a,Ry.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,Uy.a]),ho._26(512,Fy.a,Fy.a,[xl.a]),ho._26(512,Ly.a,Ly.a,[]),ho._26(512,Hy.a,Hy.a,[Ur.a,Zo.a,Uy.a]),ho._26(512,Ky.b,Ky.b,[No.a,Ny.a,$l.a,Ry.a,vf.a,Fy.a,Ef.a,Ly.a,Hy.a]),ho._26(512,Wy.a,Wy.a,[]),ho._26(512,qy.a,qy.a,[dl.a]),ho._26(512,By.a,By.a,[Do.a,Or.a]),ho._26(512,jy.a,jy.a,[Do.a,Or.a,Mr.a,xr.a,fr.a,Zo.a,By.a,Lr.a]),ho._26(512,Gy.a,Gy.a,[Zo.a,Mr.a,fr.a,dl.a,xr.a,Or.a,Mo.a,jy.a,Nl.a,dr.a,xl.a,Pf.a,bp.a]),ho._26(512,zy.a,zy.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,dl.a,Lr.a,jy.a,By.a,fr.a,Pf.a,Ir.a]),ho._26(512,Vy.a,Vy.a,[zy.a]),ho._26(512,$y.a,$y.a,[xl.a]),ho._26(512,Qy.a,Qy.a,[Mo.a,jy.a,xl.a,Ur.a]),ho._26(512,Yy.a,Yy.a,[Mo.a,jy.a,xl.a,Ur.a,dl.a]),ho._26(512,Xy.a,Xy.a,[Ur.a,dr.a]),ho._26(512,Jy.a,Jy.a,[Ur.a,Zo.a]),ho._26(512,Zy.b,Zy.b,[No.a,qy.a,$l.a,Gy.a,pd.a,Vy.a,vf.a,$y.a,Qy.a,Yy.a,Xy.a,ih.a,Jy.a]),ho._26(512,eb.b,eb.b,[]),ho._26(512,nb.a,nb.a,[Do.a,Or.a]),ho._26(512,tb.a,tb.a,[nb.a]),ho._26(512,ib.a,ib.a,[Lp.a,tb.a]),ho._26(512,ob.a,ob.a,[Do.a,Or.a,Mr.a,dr.a]),ho._26(512,rb.a,rb.a,[Do.a,Or.a,Mr.a,Nl.a,ob.a,fr.a,Ir.a,hf.a,Lr.a]),ho._26(512,lb.a,lb.a,[Do.a]),ho._26(1024,sb.a,qd.c,[Mr.a]),ho._26(1024,ab.a,qd.f,[Mr.a]),ho._26(512,ub.a,ub.a,[]),ho._26(512,cb.a,cb.a,[Do.a,Mr.a,uf.a,lb.a,Or.a,sb.a,pf.a,fr.a,dr.a,ab.a,$d.a,ub.a,ho.D,Zo.a]),ho._26(512,db.a,db.a,[rb.a,Or.a,Lr.a,Mr.a,pf.a,dr.a,cb.a,fr.a,lb.a,hf.a]),ho._26(512,fb.a,fb.a,[Ur.a,rb.a]),ho._26(512,pb.a,pb.a,[Ur.a,rb.a,Or.a]),ho._26(512,hb.a,hb.a,[Ur.a,Or.a,rb.a]),ho._26(512,mb.a,mb.a,[Do.a,Or.a,Mr.a,Zo.a,tp.a,dr.a,ob.a,Lr.a,rb.a,Nl.a,fr.a,Ir.a]),ho._26(512,_b.a,_b.a,[mb.a]),ho._26(512,gb.a,gb.a,[rb.a]),ho._26(131584,vb.a,vb.a,[Or.a,rb.a,Lr.a,Mo.a,Zo.a]),ho._26(131584,yb.a,yb.a,[Or.a,rb.a,Lr.a,Mo.a,Zo.a]),ho._26(512,bb.a,bb.a,[Ur.a,rb.a]),ho._26(512,Pb.b,Pb.b,[gf.a,db.a,vf.a,fb.a,pb.a,hb.a,dp.a,pd.a,_b.a,Ad.a,ho.D,mb.a,Mr.a,pf.a,rb.a,Or.a,Ur.a,ih.a,gb.a,xp.a,lb.a,fr.a,vb.a,yb.a,bb.a]),ho._26(512,Eb.a,Eb.a,[]),ho._26(512,Cb.a,Cb.a,[Do.a,Or.a,Ir.a]),ho._26(512,tc.a,tc.a,[Do.a,Or.a,Mr.a,fr.a,Zo.a,Nl.a,Cb.a]),ho._26(512,Ib.a,Ib.a,[tc.a]),ho._26(512,Sb.a,Sb.a,[Ys.a,Or.a,tc.a,Lr.a]),ho._26(512,ic.a,ic.a,[Do.a,Or.a,Mr.a,tp.a,dr.a,Zo.a,Cb.a,fr.a,Lr.a,tc.a,Ml.a,Ir.a]),ho._26(512,wb.a,wb.a,[ic.a]),ho._26(512,Ab.b,Ab.b,[ql.a,Ib.a,dp.a,Sb.a,pd.a,wb.a,ih.a]),ho._26(512,Tb.a,Tb.a,[Do.a,Mr.a,Or.a,Ir.a,Nl.a,hf.a,rb.a]),ho._26(512,Ob.a,Ob.a,[Lr.a,Or.a,fr.a,Tb.a,cb.a,lb.a]),ho._26(512,kb.a,kb.a,[Mr.a,pf.a,Tb.a]),ho._26(512,Db.a,Db.a,[Mr.a,Lr.a,Or.a,pf.a,Tb.a,dr.a,hf.a]),ho._26(512,xb.b,xb.b,[gf.a,Ob.a,xp.a,kb.a,pd.a,Db.a,ho.D,Mr.a,fr.a,Or.a,Tb.a,pf.a,Ur.a,lb.a]),ho._26(512,Mb.b,Mb.b,[kr.a,cb.a,Lr.a,pf.a,Do.a,ih.a]),ho._26(512,Ub.a,Ub.a,[Do.a,Or.a,xs.a,xr.a,Ud.d,fr.a]),ho._26(512,Nb.b,Nb.b,[uf.a,Ub.a,Lr.a,Or.a,Do.a]),ho._26(512,Rb.a,Rb.a,[vv.a]),ho._26(512,Fb.a,Fb.a,[Fp.a,Rb.a]),ho._26(512,Lb.a,Lb.a,[vv.a]),ho._26(512,Hb.a,Hb.a,[Fp.a,Lb.a]),ho._26(512,Kb.a,Kb.a,[Up.a,Np.a]),ho._26(512,Wb.a,Wb.a,[Up.a,vv.a,Kb.a]),ho._26(512,qb.a,qb.a,[Fp.a,Wb.a]),ho._26(512,Bb.a,Bb.a,[Fp.a,Kb.a]),ho._26(512,jb.a,jb.a,[vv.a]),ho._26(512,Gb.a,Gb.a,[Fp.a,jb.a]),ho._26(512,zb.a,zb.a,[vv.a]),ho._26(512,Vb.a,Vb.a,[Fp.a,zb.a]),ho._26(512,$b.a,$b.a,[vv.a,Np.a]),ho._26(512,Qb.a,Qb.a,[Fp.a,$b.a]),ho._26(512,Yb.a,Yb.a,[vv.a]),ho._26(512,Xb.a,Xb.a,[Fp.a,Yb.a]),ho._26(512,Jb.a,Jb.a,[vv.a]),ho._26(512,Zb.a,Zb.a,[Fp.a,Jb.a]),ho._26(512,eP.a,eP.a,[Up.a,Np.a]),ho._26(512,nP.a,nP.a,[Fp.a,eP.a]),ho._26(512,tP.a,tP.a,[]),ho._26(512,iP.a,iP.a,[fr.a,Mo.a]),ho._26(512,oP.a,oP.a,[Up.a,iP.a]),ho._26(512,rP.a,rP.a,[fr.a]),ho._26(512,lP.a,lP.a,[rP.a]),ho._26(512,sP.a,sP.a,[Up.a,lP.a]),ho._26(512,aP.a,aP.a,[iP.a]),ho._26(512,uP.a,uP.a,[Up.a,aP.a]),ho._26(512,cP.a,cP.a,[Np.a]),ho._26(512,dP.a,dP.a,[Up.a,cP.a]),ho._26(512,fP.a,fP.a,[Np.a,vv.a]),ho._26(512,pP.a,pP.a,[Up.a,fP.a]),ho._26(512,hP.a,hP.a,[Np.a]),ho._26(512,mP.a,mP.a,[Up.a,hP.a]),ho._26(512,_P.a,_P.a,[]),ho._26(512,gP.a,gP.a,[Up.a,_P.a]),ho._26(512,vP.a,vP.a,[fr.a,vv.a,dr.a,Mo.a]),ho._26(512,yP.a,yP.a,[Up.a,vP.a]),ho._26(512,bP.a,bP.a,[Np.a]),ho._26(512,PP.a,PP.a,[Up.a,bP.a]),ho._26(512,EP.a,EP.a,[Np.a]),ho._26(512,CP.a,CP.a,[Up.a,EP.a]),ho._26(512,IP.a,IP.a,[Np.a,vv.a]),ho._26(512,SP.a,SP.a,[Up.a,IP.a]),ho._26(512,wP.a,wP.a,[Up.a,rP.a]),ho._26(512,AP.a,AP.a,[fr.a,Mo.a]),ho._26(512,TP.a,TP.a,[Up.a,AP.a]),ho._26(512,OP.a,OP.a,[EP.a]),ho._26(512,kP.a,kP.a,[Up.a,OP.a]),ho._26(512,DP.a,DP.a,[fr.a]),ho._26(512,xP.a,xP.a,[Up.a,DP.a]),ho._26(512,MP.a,MP.a,[fr.a]),ho._26(512,UP.a,UP.a,[Up.a,MP.a]),ho._26(512,NP.a,NP.a,[]),ho._26(512,mo.a,mo.a,[kr.a,uf.a,ih.a,ir.a,Or.a,xs.a,Lr.a]),ho._26(256,sd.l,"XSRF-TOKEN",[]),ho._26(256,sd.m,"X-XSRF-TOKEN",[]),ho._26(256,_o.a,Qc.a,[]),ho._26(256,lr.a,"/",[])])}),FP=t(1812);t(1828);Object(FP.shim)(),Object(ho._0)(),Object(po.j)().bootstrapModuleFactory(RP)},,,,,,,,,,,,,function(e,n,t){function i(e){return t(o(e))}function o(e){var n=r[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var r={"./af":758,"./af.js":758,"./ar":759,"./ar-dz":760,"./ar-dz.js":760,"./ar-kw":761,"./ar-kw.js":761,"./ar-ly":762,"./ar-ly.js":762,"./ar-ma":763,"./ar-ma.js":763,"./ar-sa":764,"./ar-sa.js":764,"./ar-tn":765,"./ar-tn.js":765,"./ar.js":759,"./az":766,"./az.js":766,"./be":767,"./be.js":767,"./bg":768,"./bg.js":768,"./bm":769,"./bm.js":769,"./bn":770,"./bn.js":770,"./bo":771,"./bo.js":771,"./br":772,"./br.js":772,"./bs":773,"./bs.js":773,"./ca":774,"./ca.js":774,"./cs":775,"./cs.js":775,"./cv":776,"./cv.js":776,"./cy":777,"./cy.js":777,"./da":778,"./da.js":778,"./de":779,"./de-at":780,"./de-at.js":780,"./de-ch":781,"./de-ch.js":781,"./de.js":779,"./dv":782,"./dv.js":782,"./el":783,"./el.js":783,"./en-au":784,"./en-au.js":784,"./en-ca":785,"./en-ca.js":785,"./en-gb":786,"./en-gb.js":786,"./en-ie":787,"./en-ie.js":787,"./en-il":788,"./en-il.js":788,"./en-nz":789,"./en-nz.js":789,"./eo":790,"./eo.js":790,"./es":791,"./es-do":792,"./es-do.js":792,"./es-us":793,"./es-us.js":793,"./es.js":791,"./et":794,"./et.js":794,"./eu":795,"./eu.js":795,"./fa":796,"./fa.js":796,"./fi":797,"./fi.js":797,"./fo":798,"./fo.js":798,"./fr":799,"./fr-ca":800,"./fr-ca.js":800,"./fr-ch":801,"./fr-ch.js":801,"./fr.js":799,"./fy":802,"./fy.js":802,"./gd":803,"./gd.js":803,"./gl":804,"./gl.js":804,"./gom-latn":805,"./gom-latn.js":805,"./gu":806,"./gu.js":806,"./he":807,"./he.js":807,"./hi":808,"./hi.js":808,"./hr":809,"./hr.js":809,"./hu":810,"./hu.js":810,"./hy-am":811,"./hy-am.js":811,"./id":812,"./id.js":812,"./is":813,"./is.js":813,"./it":814,"./it.js":814,"./ja":815,"./ja.js":815,"./jv":816,"./jv.js":816,"./ka":817,"./ka.js":817,"./kk":818,"./kk.js":818,"./km":819,"./km.js":819,"./kn":820,"./kn.js":820,"./ko":821,"./ko.js":821,"./ky":822,"./ky.js":822,"./lb":823,"./lb.js":823,"./lo":824,"./lo.js":824,"./lt":825,"./lt.js":825,"./lv":826,"./lv.js":826,"./me":827,"./me.js":827,"./mi":828,"./mi.js":828,"./mk":829,"./mk.js":829,"./ml":830,"./ml.js":830,"./mn":831,"./mn.js":831,"./mr":832,"./mr.js":832,"./ms":833,"./ms-my":834,"./ms-my.js":834,"./ms.js":833,"./mt":835,"./mt.js":835,"./my":836,"./my.js":836,"./nb":837,"./nb.js":837,"./ne":838,"./ne.js":838,"./nl":839,"./nl-be":840,"./nl-be.js":840,"./nl.js":839,"./nn":841,"./nn.js":841,"./pa-in":842,"./pa-in.js":842,"./pl":843,"./pl.js":843,"./pt":844,"./pt-br":845,"./pt-br.js":845,"./pt.js":844,"./ro":846,"./ro.js":846,"./ru":847,"./ru.js":847,"./sd":848,"./sd.js":848,"./se":849,"./se.js":849,"./si":850,"./si.js":850,"./sk":851,"./sk.js":851,"./sl":852,"./sl.js":852,"./sq":853,"./sq.js":853,"./sr":854,"./sr-cyrl":855,"./sr-cyrl.js":855,"./sr.js":854,"./ss":856,"./ss.js":856,"./sv":857,"./sv.js":857,"./sw":858,"./sw.js":858,"./ta":859,"./ta.js":859,"./te":860,"./te.js":860,"./tet":861,"./tet.js":861,"./tg":862,"./tg.js":862,"./th":863,"./th.js":863,"./tl-ph":864,"./tl-ph.js":864,"./tlh":865,"./tlh.js":865,"./tr":866,"./tr.js":866,"./tzl":867,"./tzl.js":867,"./tzm":868,"./tzm-latn":869,"./tzm-latn.js":869,"./tzm.js":868,"./ug-cn":870,"./ug-cn.js":870,"./uk":871,"./uk.js":871,"./ur":872,"./ur.js":872,"./uz":873,"./uz-latn":874,"./uz-latn.js":874,"./uz.js":873,"./vi":875,"./vi.js":875,"./x-pseudo":876,"./x-pseudo.js":876,"./yo":877,"./yo.js":877,"./zh-cn":878,"./zh-cn.js":878,"./zh-hk":879,"./zh-hk.js":879,"./zh-tw":880,"./zh-tw.js":880};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1447},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l});var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),o=function(){function e(e,n,i,o,r,l,s,a){void 0===r&&(r=""),void 0===l&&(l=""),this.textUtils=e,this.mimeUtils=n,this.isFile=i,this.isDirectory=o,this.name=r,this.fullPath=l,this.fileSystem=s,this.nativeURL=a,this.fs=t(414)}return e.prototype.copyTo=function(e,n,t,i){var o=this,s=this.fullPath,a=this.textUtils.concatenatePaths(e.fullPath,n=n||this.name),u=this.fs.createReadStream(s),c=this.fs.createWriteStream(a);new Promise(function(e,n){u.on("error",n),c.on("error",n),c.on("close",e),u.pipe(c)}).then(function(){t&&t(new(o.isDirectory?r:l)(o.textUtils,o.mimeUtils,n,a))}).catch(function(e){i&&i(e)})},e.prototype.getMetadata=function(e,n){this.fs.stat(this.fullPath,function(t,i){t?n&&n(t):e&&e({size:i.size,modificationTime:i.mtime})})},e.prototype.getParent=function(e,n){var t=this,i="/"==this.fullPath.slice(-1)?this.fullPath.slice(0,-1):this.fullPath,o=i.substr(0,i.lastIndexOf("/"));this.fs.stat(o,function(i,l){if(i||!l.isDirectory())n&&n(i);else{var s=o.substr(o.lastIndexOf("/")+1);e&&e(new r(t.textUtils,t.mimeUtils,s,o))}})},e.prototype.moveTo=function(e,n,t,i){var o=this,s=this.fullPath,a=this.textUtils.concatenatePaths(e.fullPath,n=n||this.name);this.fs.rename(s,a,function(e){if(e)i&&i(e);else{t&&t(new(o.isDirectory?r:l)(o.textUtils,o.mimeUtils,n,a))}})},e.prototype.remove=function(e,n){(this.isDirectory?this.fs.rmdir:this.fs.unlink)(this.fullPath,function(t){t<0?n&&n(t):e&&e()})},e.prototype.setMetadata=function(e,n,t){n&&n("Not supported")},e.prototype.toInternalURL=function(){return"file://"+this.fullPath},e.prototype.toURL=function(){return this.fullPath},e}(),r=function(e){function n(n,t,i,o,r,l){void 0===i&&(i=""),void 0===o&&(o="");var s=e.call(this,n,t,!1,!0,i,o,r,l)||this;return s.fullPath&&!/\/$/.test(s.fullPath)&&(s.fullPath+="/"),s.nativeURL&&!/\/$/.test(s.nativeURL)&&(s.nativeURL+="/"),s}return i(n,e),n.prototype.createReader=function(){return new s(this.textUtils,this.mimeUtils,this.fullPath)},n.prototype.deleteEmptyFolder=function(e,n,t){this.fs.rmdir(e,function(e){e?t&&t(e):n&&n()})},n.prototype.getDirectory=function(e,n,t,i){this.getDirOrFile(!0,e,n,t,i)},n.prototype.getDirOrFile=function(e,t,i,o,r){var s=this,a=function(){o&&o(new(e?n:l)(s.textUtils,s.mimeUtils,c,d))},u=function(n){e?s.fs.mkdir(d,n):s.fs.writeFile(d,"",n)},c=t.substr(t.lastIndexOf("/")+1),d=this.textUtils.concatenatePaths(this.fullPath,t);this.fs.stat(d,function(e){e?i.create?u(function(e){if(e)if("EEXIST"===e.code)a();else if("ENOENT"===e.code){var n=d.substring(0,d.lastIndexOf("/"));n?s.getDirectory(n,i,function(){u(function(e){e?r&&r(e):a()})},r):r&&r(e)}else r&&r(e);else a()}):r&&r(e):a()})},n.prototype.getFile=function(e,n,t,i){this.getDirOrFile(!1,e,n,t,i)},n.prototype.removeRecursively=function(e,n){var t=this;new Promise(function(e,n){t.removeRecursiveFn(t.fullPath,e,n)}).then(function(){e&&e()}).catch(function(e){n&&n(e)})},n.prototype.removeRecursiveFn=function(e,n,t){var i=this;this.fs.stat(e,function(o,r){o?t&&t(o):r.isFile()?i.fs.unlink(e,function(e){e?t&&t(e):n&&n()}):i.fs.readdir(e,function(o,r){if(o)t&&t(o);else if(r.length){var l=0;r.forEach(function(o){i.removeRecursiveFn(i.textUtils.concatenatePaths(e,o),function(){++l==r.length&&i.deleteEmptyFolder(e,n,t)},t)})}else i.deleteEmptyFolder(e,n,t)})})},n}(o),l=function(e){function n(n,t,i,o,r,l){void 0===i&&(i=""),void 0===o&&(o="");var s=e.call(this,n,t,!0,!1,i,o,r,l)||this;return s.fullPath&&/\/$/.test(s.fullPath)&&(s.fullPath=s.fullPath.substring(0,s.fullPath.length-1)),s.nativeURL&&/\/$/.test(s.nativeURL)&&(s.nativeURL=s.nativeURL.substring(0,s.nativeURL.length-1)),s}return i(n,e),n.prototype.createWriter=function(e,n){var t=this;this.file(function(n){e&&e(new a(t.textUtils,t.mimeUtils,n))},n)},n.prototype.file=function(e,n){var t=this;this.getMetadata(function(i){t.fs.readFile(t.fullPath,function(o,r){if(o)n&&n(o);else{r=Uint8Array.from(r).buffer;var l=new File([r],t.name||"",{lastModified:i.modificationTime||null,type:t.mimeUtils.getMimeType(t.mimeUtils.getFileExtension(t.name))||null});l.localURL=t.fullPath,l.start=0,l.end=l.size,e&&e(l)}})},n)},n}(o),s=function(){function e(e,n,i){void 0===i&&(i=null),this.textUtils=e,this.mimeUtils=n,this.localURL=i,this.fs=t(414)}return e.prototype.readEntries=function(e,n){var t=this;this.fs.readdir(this.localURL,function(i,o){if(i)n&&n(i);else try{for(var s=[],a=0;a<o.length;a++){var u=o[a],c=t.textUtils.concatenatePaths(t.localURL,u),d=t.fs.statSync(c);d.isDirectory()?s.push(new r(t.textUtils,t.mimeUtils,u,c)):d.isFile()&&s.push(new l(t.textUtils,t.mimeUtils,u,c))}e&&e(s)}catch(e){n&&n(e)}})},e}(),a=function(){function n(e,n,i){this.textUtils=e,this.mimeUtils=n,this.file=i,this.fs=t(414),this.fileName="",this.length=0,this.size=0,this.position=0,this.readyState=0,this.result=null,this.error=null,i&&(this.localURL=i.localURL||i,this.length=i.size||0)}return n.prototype.abort=function(){},n.prototype.seek=function(e){this.position=e},n.prototype.truncate=function(e){this.size=e},n.prototype.write=function(n){var t=this;if(n&&"[object Blob]"==n.toString()){var i=new FileReader;i.onload=function(){2==i.readyState&&t.writeFile(new e(i.result))},i.readAsArrayBuffer(n)}else n&&"[object ArrayBuffer]"==n.toString()?(n=new Uint8Array(n),this.writeFile(e.from(n))):this.writeFile(n)},n.prototype.writeFile=function(e){var n=this,t=this.fs.createWriteStream(this.localURL,{flags:"r+",start:this.position});t.on("error",function(e){n.onerror&&n.onerror(e)}),t.end(e,function(){n.position+=e.length,n.onwrite&&n.onwrite(),n.onwriteend&&n.onwriteend(),t.destroy()}),this.onwritestart&&this.onwritestart()},n}()}).call(n,t(326).Buffer)},,,function(e,n){e.exports=require("stream")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t(0),t(1),t(16),t(41),t(5);t.d(n,"a",function(){return i});var i=function(){return function(){}}()},function(e,n,t){"use strict";t(0),t(1),t(9),t(4),t(5),t(3),t(57),t(155);t.d(n,"a",function(){return i});var i=function(){return function(){}}()}],[1434]);