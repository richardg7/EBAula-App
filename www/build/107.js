webpackJsonp([107],{1853:function(n,l,t){"use strict";function i(n){return p._42(0,[(n()(),p._16(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,N.b,N.a)),p._15(1,49152,null,0,B.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._32(131072,F.a,[j.a,p.i]),(n()(),p._40(-1,0,["\n            "]))],function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function u(n){return p._42(0,[(n()(),p._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function a(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),p._40(1,null,["","",""])),p._32(131072,F.a,[j.a,p.i])],null,function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function s(n){return p._42(0,[(n()(),p._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function e(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""])),p._32(131072,F.a,[j.a,p.i])],null,function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("addon.mod_assign.noteam")))})}function o(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""])),p._32(131072,F.a,[j.a,p.i])],null,function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("addon.mod_assign.multipleteams")))})}function r(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""])),p._32(131072,F.a,[j.a,p.i])],null,function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("addon.mod_assign.defaultteam")))})}function d(n){return p._42(0,[(n()(),p._16(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),p._40(-1,null,["\n                            "])),(n()(),p._11(16777216,null,null,1,null,s)),p._15(3,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n                            "])),(n()(),p._11(16777216,null,null,1,null,e)),p._15(6,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n                            "])),(n()(),p._11(16777216,null,null,1,null,o)),p._15(9,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n                            "])),(n()(),p._11(16777216,null,null,1,null,r)),p._15(12,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n                        "]))],function(n,l){var t=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&!l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function _(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),p._15(1,16384,null,0,J.a,[V.a,p.p,p.K],{color:[0,"color"]},null),(n()(),p._40(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function c(n){return p._42(0,[(n()(),p._16(0,0,null,null,3,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),p._15(1,16384,null,0,J.a,[V.a,p.p,p.K],{color:[0,"color"]},null),(n()(),p._40(2,null,["\n                            ","\n                        "])),p._32(131072,F.a,[j.a,p.i])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,p._41(l,2,0,p._29(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function g(n){return p._42(0,[(n()(),p._16(0,0,null,null,28,null,null,null,null,null,null,null)),(n()(),p._40(-1,null,["\n                    "])),(n()(),p._16(2,0,null,null,25,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,t){var i=!0;if("click"===l){i=!1!==n.component.loadSubmission(n.context.$implicit)&&i}return i},q.b,q.a)),p._15(3,1097728,null,3,z.a,[Q.a,V.a,p.p,p.K,[2,X.a]],null,null),p._37(335544320,3,{contentLabel:0}),p._37(603979776,4,{_buttons:1}),p._37(603979776,5,{_icons:1}),p._15(7,16384,null,0,Y.a,[],null,null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._16(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Z.b,Z.a)),p._15(10,770048,null,0,nn.a,[ln.a,S.a,tn.a,un.a,I.a],{user:[0,"user"]},null),p._15(11,16384,null,0,an.a,[],null,null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._11(16777216,null,2,1,null,u)),p._15(14,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._11(16777216,null,2,1,null,a)),p._15(17,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._11(16777216,null,2,1,null,d)),p._15(20,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._11(16777216,null,2,1,null,_)),p._15(23,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                        "])),(n()(),p._11(16777216,null,2,1,null,c)),p._15(26,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                    "])),(n()(),p._40(-1,null,["\n                "]))],function(n,l){var t=l.component;n(l,10,0,l.context.$implicit);n(l,14,0,l.context.$implicit.userfullname);n(l,17,0,!l.context.$implicit.userfullname);n(l,20,0,t.assign.teamsubmission);n(l,23,0,l.context.$implicit.statusTranslated);n(l,26,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.id==l.component.selectedSubmissionId)})}function m(n){return p._42(0,[(n()(),p._16(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,q.b,q.a)),p._15(1,1097728,null,3,z.a,[Q.a,V.a,p.p,p.K,[2,X.a]],null,null),p._37(335544320,6,{contentLabel:0}),p._37(603979776,7,{_buttons:1}),p._37(603979776,8,{_icons:1}),p._15(5,16384,null,0,Y.a,[],null,null),(n()(),p._40(-1,2,["\n                    "])),(n()(),p._16(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(8,147456,[[8,4]],0,sn.a,[V.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(9,2,["\n                    ","\n                "])),p._32(131072,F.a,[j.a,p.i])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,p._29(l,8)._hidden);n(l,9,0,p._41(l,9,0,p._29(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function f(n){return p._42(0,[p._37(402653184,1,{splitviewCtrl:0}),(n()(),p._16(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),p._15(2,16384,null,0,en.a,[V.a,p.p,p.K,[2,on.a]],null,null),(n()(),p._40(-1,null,["\n    "])),(n()(),p._16(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,rn.b,rn.a)),p._15(5,49152,null,0,dn.a,[_n.a,[2,on.a],[2,ln.a],V.a,p.p,p.K],null,null),p._15(6,212992,null,0,cn.a,[dn.a,gn.a,j.a,I.a],null,null),(n()(),p._40(-1,3,["\n        "])),(n()(),p._16(8,0,null,3,3,"ion-title",[],null,null,null,mn.b,mn.a)),p._15(9,49152,null,0,fn.a,[V.a,p.p,p.K,[2,pn.a],[2,dn.a]],null,null),(n()(),p._16(10,0,null,0,1,"core-format-text",[],null,null,null,null,null)),p._15(11,540672,null,0,hn.a,[p.p,S.a,x.a,bn.a,j.a,gn.a,tn.a,vn.a,In.a,Sn.a,un.a,xn.a,[2,ln.a],[2,Pn.a],[2,k.a],Tn.a,I.a],{text:[0,"text"]},null),(n()(),p._40(-1,3,["\n\n        "])),(n()(),p._16(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),p._15(14,16384,null,1,An.a,[V.a,p.p,p.K,[2,pn.a],[2,dn.a]],null,null),p._37(603979776,2,{_buttons:1}),(n()(),p._40(-1,3,["\n    "])),(n()(),p._40(-1,null,["\n"])),(n()(),p._40(-1,null,["\n"])),(n()(),p._16(19,0,null,null,32,"core-split-view",[],null,null,null,kn.b,kn.a)),p._15(20,245760,[[1,4]],0,k.a,[[2,ln.a],p.p,Dn.a,gn.a,j.a],null,null),(n()(),p._40(-1,0,["\n    "])),(n()(),p._16(22,0,null,0,28,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,$n.b,$n.a)),p._15(23,4374528,null,0,Pn.a,[V.a,gn.a,wn.a,p.p,p.K,_n.a,yn.a,p.D,[2,on.a],[2,ln.a]],null,null),(n()(),p._40(-1,1,["\n        "])),(n()(),p._16(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var i=!0;if("ionRefresh"===l){i=!1!==n.component.refreshList(t)&&i}return i},null,null)),p._15(26,212992,null,0,Cn.a,[gn.a,Pn.a,p.D,On.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Gn.b,Gn.a)),p._15(29,114688,null,0,Wn.a,[Cn.a,V.a],{pullingText:[0,"pullingText"]},null),p._32(131072,F.a,[j.a,p.i]),(n()(),p._40(-1,null,["\n        "])),(n()(),p._40(-1,1,["\n        "])),(n()(),p._16(33,0,null,1,16,"core-loading",[],null,null,null,En.b,En.a)),p._15(34,638976,null,0,Un.a,[j.a,p.p,I.a,tn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),p._40(-1,0,["\n            "])),(n()(),p._11(16777216,null,0,1,null,i)),p._15(37,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,0,["\n\n            "])),(n()(),p._16(39,0,null,0,9,"ion-list",[],null,null,null,null,null)),p._15(40,16384,null,0,Kn.a,[V.a,p.p,p.K,gn.a,On.l,wn.a],null,null),(n()(),p._40(-1,null,["\n                "])),(n()(),p._40(-1,null,["\n                "])),(n()(),p._11(16777216,null,null,1,null,g)),p._15(44,802816,null,0,H.j,[p.W,p.T,p.v],{ngForOf:[0,"ngForOf"]},null),(n()(),p._40(-1,null,["\n\n                "])),(n()(),p._11(16777216,null,null,1,null,m)),p._15(47,16384,null,0,H.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n            "])),(n()(),p._40(-1,0,["\n        "])),(n()(),p._40(-1,1,["\n    "])),(n()(),p._40(-1,0,["\n"])),(n()(),p._40(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0);n(l,11,0,t.title),n(l,20,0);n(l,26,0,t.loaded);n(l,29,0,p._19(1,"",p._41(l,29,0,p._29(l,30).transform("core.pulltorefresh")),""));n(l,34,0,t.loaded);n(l,37,0,!t.submissions||0==t.submissions.length);n(l,44,0,t.submissions);n(l,47,0,!t.haveAllParticipants)},function(n,l){n(l,4,0,p._29(l,5)._hidden,p._29(l,5)._sbPadding);n(l,22,0,p._29(l,23).statusbarPadding,p._29(l,23)._hasRefresher);n(l,25,0,"inactive"!==p._29(l,26).state,p._29(l,26)._top);n(l,28,0,p._29(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var p=t(1),h=(t(0),t(9),t(4)),b=t(29),v=t(30),I=t(13),S=t(2),x=t(5),P=t(72),T=t(122),A=t(160),k=t(35),D=function(){function n(n,l,t,i,u,a,s,e){var o=this;this.domUtils=i,this.translate=u,this.assignProvider=a,this.assignOfflineProvider=s,this.assignHelper=e,this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==P.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=t.on(P.a.GRADED_EVENT,function(n){o.assign&&n.assignmentId==o.assign.id&&n.userId==l.getCurrentSiteUserId()&&(o.loaded=!1,o.refreshAllData().finally(function(){o.loaded=!0}))},l.getCurrentSiteId())}return n.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},n.prototype.fetchAssignment=function(){var n,l,t,i=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){return i.title=n.name||i.title,i.assign=n,i.haveAllParticipants=!0,i.assignProvider.getSubmissions(n.id)}).then(function(t){return t.canviewsubmissions?(l=t,i.assignHelper.getParticipants(i.assign).then(function(l){i.haveAllParticipants=!0,n=l}).catch(function(){i.haveAllParticipants=!1})):Promise.reject(null)}).then(function(){if(!i.assign.markingworkflow)return i.assignProvider.getAssignmentGrades(i.assign.id).then(function(n){t=n})}).then(function(){return i.assignProvider.getSubmissionsUserData(l.submissions,i.courseId,i.assign.id,i.assign.blindmarking&&!i.assign.revealidentities,n)}).then(function(n){var l=i.selectedStatus==P.a.NEED_GRADING,u=l?P.a.SUBMISSION_STATUS_SUBMITTED:i.selectedStatus,a=[];return i.submissions=[],n.forEach(function(n){u&&u!=n.status||a.push(i.assignOfflineProvider.getSubmissionGrade(i.assign.id,n.userid).catch(function(){}).then(function(u){var a=!1;return u&&n.timemodified<u.timemodified&&(a=!0),(l?i.assignProvider.needsSubmissionToBeGraded(n,i.assign.id):Promise.resolve(!0)).then(function(l){if(l){if("graded"==n.gradingstatus&&!i.assign.markingworkflow){var u=t.filter(function(l){return l.userid==n.userid}).reduce(function(n,l){return n.timemodified>l.timemodified?n:l});u&&u.timemodified<n.timemodified&&(n.gradingstatus=P.a.GRADED_FOLLOWUP_SUBMIT)}n.statusColor=i.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=i.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated=("success"!=n.statusColor||!n.gradingstatus)&&i.translate.instant("addon.mod_assign.submissionstatus_"+n.status),a?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId=("danger"!=n.statusColor||"danger"!=n.gradingColor)&&i.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus),i.submissions.push(n)}})}))}),Promise.all(a)}).catch(function(n){i.domUtils.showErrorModalDefault(n,"Error getting assigment data.")})},n.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.id&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.id,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},n.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentGradesData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},n.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},n.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},n}(),$=function(){return function(){}}(),w=t(1345),y=t(1346),C=t(1347),O=t(1348),G=t(1349),W=t(1350),E=t(1351),U=t(1352),K=t(1353),R=t(1356),M=t(1357),L=t(1358),N=t(120),B=t(109),F=t(27),j=t(19),H=t(8),J=t(146),V=t(7),q=t(31),z=t(21),Q=t(20),X=t(28),Y=t(33),Z=t(222),nn=t(187),ln=t(22),tn=t(3),un=t(10),an=t(186),sn=t(47),en=t(435),on=t(37),rn=t(1354),dn=t(200),_n=t(34),cn=t(663),gn=t(15),mn=t(1355),fn=t(337),pn=t(247),hn=t(42),bn=t(11),vn=t(26),In=t(6),Sn=t(17),xn=t(18),Pn=t(24),Tn=t(38),An=t(436),kn=t(437),Dn=t(67),$n=t(185),wn=t(32),yn=t(107),Cn=t(145),On=t(39),Gn=t(201),Wn=t(159),En=t(49),Un=t(48),Kn=t(78),Rn=t(61),Mn=p._14({encapsulation:2,styles:[],data:{}}),Ln=p._12("page-addon-mod-assign-submission-list",D,function(n){return p._42(0,[(n()(),p._16(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,f,Mn)),p._15(1,245760,null,0,D,[Rn.a,S.a,I.a,x.a,j.a,P.a,T.a,A.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Nn=t(23),Bn=t(333),Fn=t(334),jn=t(336),Hn=t(335),Jn=t(434),Vn=t(662),qn=t(106),zn=t(248);t.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return Qn});var Qn=p._13($,[],function(n){return p._25([p._26(512,p.n,p._6,[[8,[w.a,y.a,C.a,O.a,G.a,W.a,E.a,U.a,K.a,R.a,M.a,L.a,Ln]],[3,p.n],p.B]),p._26(4608,H.m,H.l,[p.x,[2,H.v]]),p._26(4608,Nn.x,Nn.x,[]),p._26(4608,Nn.d,Nn.d,[]),p._26(4608,Bn.b,Bn.a,[]),p._26(4608,Fn.a,Fn.b,[]),p._26(4608,jn.b,jn.a,[]),p._26(4608,Hn.b,Hn.a,[]),p._26(4608,j.a,j.a,[Jn.a,Bn.b,Fn.a,jn.b,Hn.b,j.b,j.c]),p._26(512,H.b,H.b,[]),p._26(512,Nn.v,Nn.v,[]),p._26(512,Nn.i,Nn.i,[]),p._26(512,Nn.s,Nn.s,[]),p._26(512,Vn.a,Vn.a,[]),p._26(512,h.a,h.a,[]),p._26(512,v.a,v.a,[]),p._26(512,qn.a,qn.a,[]),p._26(512,b.a,b.a,[]),p._26(512,Vn.b,Vn.b,[]),p._26(512,$,$,[]),p._26(256,j.c,void 0,[]),p._26(256,j.b,void 0,[]),p._26(256,zn.a,D,[])])})}});